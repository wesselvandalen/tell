var hR=Object.defineProperty;var fR=(i,e,t)=>e in i?hR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var wb=(i,e,t)=>fR(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}})();var dR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var pg={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb;function mR(){if(Sb)return Mc;Sb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var d in a)d!=="key"&&(u[d]=a[d])}else u=a;return a=u.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:u}}return Mc.Fragment=e,Mc.jsx=t,Mc.jsxs=t,Mc}var Ab;function pR(){return Ab||(Ab=1,pg.exports=mR()),pg.exports}var Se=pR(),gg={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function gR(){if(Ib)return ft;Ib=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=I&&B[I]||B["@@iterator"],typeof B=="function"?B:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,ce={};function oe(B,Te,Be){this.props=B,this.context=Te,this.refs=ce,this.updater=Be||j}oe.prototype.isReactComponent={},oe.prototype.setState=function(B,Te){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Te,"setState")},oe.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function ye(){}ye.prototype=oe.prototype;function me(B,Te,Be){this.props=B,this.context=Te,this.refs=ce,this.updater=Be||j}var ae=me.prototype=new ye;ae.constructor=me,z(ae,oe.prototype),ae.isPureReactComponent=!0;var Re=Array.isArray,Ce={H:null,A:null,T:null,S:null,V:null},Ve=Object.prototype.hasOwnProperty;function L(B,Te,Be,Ie,We,ct){return Be=ct.ref,{$$typeof:i,type:B,key:Te,ref:Be!==void 0?Be:null,props:ct}}function P(B,Te){return L(B.type,Te,void 0,void 0,void 0,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function q(B){var Te={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Be){return Te[Be]})}var Y=/\/+/g;function W(B,Te){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):Te.toString(36)}function k(){}function Dn(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(k,k):(B.status="pending",B.then(function(Te){B.status==="pending"&&(B.status="fulfilled",B.value=Te)},function(Te){B.status==="pending"&&(B.status="rejected",B.reason=Te)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Yt(B,Te,Be,Ie,We){var ct=typeof B;(ct==="undefined"||ct==="boolean")&&(B=null);var et=!1;if(B===null)et=!0;else switch(ct){case"bigint":case"string":case"number":et=!0;break;case"object":switch(B.$$typeof){case i:case e:et=!0;break;case T:return et=B._init,Yt(et(B._payload),Te,Be,Ie,We)}}if(et)return We=We(B),et=Ie===""?"."+W(B,0):Ie,Re(We)?(Be="",et!=null&&(Be=et.replace(Y,"$&/")+"/"),Yt(We,Te,Be,"",function(Fe){return Fe})):We!=null&&(V(We)&&(We=P(We,Be+(We.key==null||B&&B.key===We.key?"":(""+We.key).replace(Y,"$&/")+"/")+et)),Te.push(We)),1;et=0;var un=Ie===""?".":Ie+":";if(Re(B))for(var Bt=0;Bt<B.length;Bt++)Ie=B[Bt],ct=un+W(Ie,Bt),et+=Yt(Ie,Te,Be,ct,We);else if(Bt=x(B),typeof Bt=="function")for(B=Bt.call(B),Bt=0;!(Ie=B.next()).done;)Ie=Ie.value,ct=un+W(Ie,Bt++),et+=Yt(Ie,Te,Be,ct,We);else if(ct==="object"){if(typeof B.then=="function")return Yt(Dn(B),Te,Be,Ie,We);throw Te=String(B),Error("Objects are not valid as a React child (found: "+(Te==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Te)+"). If you meant to render a collection of children, use an array instead.")}return et}function pe(B,Te,Be){if(B==null)return B;var Ie=[],We=0;return Yt(B,Ie,"","",function(ct){return Te.call(Be,ct,We++)}),Ie}function Le(B){if(B._status===-1){var Te=B._result;Te=Te(),Te.then(function(Be){(B._status===0||B._status===-1)&&(B._status=1,B._result=Be)},function(Be){(B._status===0||B._status===-1)&&(B._status=2,B._result=Be)}),B._status===-1&&(B._status=0,B._result=Te)}if(B._status===1)return B._result.default;throw B._result}var Qe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function pt(){}return ft.Children={map:pe,forEach:function(B,Te,Be){pe(B,function(){Te.apply(this,arguments)},Be)},count:function(B){var Te=0;return pe(B,function(){Te++}),Te},toArray:function(B){return pe(B,function(Te){return Te})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ft.Component=oe,ft.Fragment=t,ft.Profiler=a,ft.PureComponent=me,ft.StrictMode=r,ft.Suspense=p,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ce,ft.__COMPILER_RUNTIME={__proto__:null,c:function(B){return Ce.H.useMemoCache(B)}},ft.cache=function(B){return function(){return B.apply(null,arguments)}},ft.cloneElement=function(B,Te,Be){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Ie=z({},B.props),We=B.key,ct=void 0;if(Te!=null)for(et in Te.ref!==void 0&&(ct=void 0),Te.key!==void 0&&(We=""+Te.key),Te)!Ve.call(Te,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&Te.ref===void 0||(Ie[et]=Te[et]);var et=arguments.length-2;if(et===1)Ie.children=Be;else if(1<et){for(var un=Array(et),Bt=0;Bt<et;Bt++)un[Bt]=arguments[Bt+2];Ie.children=un}return L(B.type,We,void 0,void 0,ct,Ie)},ft.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},ft.createElement=function(B,Te,Be){var Ie,We={},ct=null;if(Te!=null)for(Ie in Te.key!==void 0&&(ct=""+Te.key),Te)Ve.call(Te,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(We[Ie]=Te[Ie]);var et=arguments.length-2;if(et===1)We.children=Be;else if(1<et){for(var un=Array(et),Bt=0;Bt<et;Bt++)un[Bt]=arguments[Bt+2];We.children=un}if(B&&B.defaultProps)for(Ie in et=B.defaultProps,et)We[Ie]===void 0&&(We[Ie]=et[Ie]);return L(B,ct,void 0,void 0,null,We)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(B){return{$$typeof:d,render:B}},ft.isValidElement=V,ft.lazy=function(B){return{$$typeof:T,_payload:{_status:-1,_result:B},_init:Le}},ft.memo=function(B,Te){return{$$typeof:v,type:B,compare:Te===void 0?null:Te}},ft.startTransition=function(B){var Te=Ce.T,Be={};Ce.T=Be;try{var Ie=B(),We=Ce.S;We!==null&&We(Be,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(pt,Qe)}catch(ct){Qe(ct)}finally{Ce.T=Te}},ft.unstable_useCacheRefresh=function(){return Ce.H.useCacheRefresh()},ft.use=function(B){return Ce.H.use(B)},ft.useActionState=function(B,Te,Be){return Ce.H.useActionState(B,Te,Be)},ft.useCallback=function(B,Te){return Ce.H.useCallback(B,Te)},ft.useContext=function(B){return Ce.H.useContext(B)},ft.useDebugValue=function(){},ft.useDeferredValue=function(B,Te){return Ce.H.useDeferredValue(B,Te)},ft.useEffect=function(B,Te,Be){var Ie=Ce.H;if(typeof Be=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ie.useEffect(B,Te)},ft.useId=function(){return Ce.H.useId()},ft.useImperativeHandle=function(B,Te,Be){return Ce.H.useImperativeHandle(B,Te,Be)},ft.useInsertionEffect=function(B,Te){return Ce.H.useInsertionEffect(B,Te)},ft.useLayoutEffect=function(B,Te){return Ce.H.useLayoutEffect(B,Te)},ft.useMemo=function(B,Te){return Ce.H.useMemo(B,Te)},ft.useOptimistic=function(B,Te){return Ce.H.useOptimistic(B,Te)},ft.useReducer=function(B,Te,Be){return Ce.H.useReducer(B,Te,Be)},ft.useRef=function(B){return Ce.H.useRef(B)},ft.useState=function(B){return Ce.H.useState(B)},ft.useSyncExternalStore=function(B,Te,Be){return Ce.H.useSyncExternalStore(B,Te,Be)},ft.useTransition=function(){return Ce.H.useTransition()},ft.version="19.1.0",ft}var Rb;function Iy(){return Rb||(Rb=1,gg.exports=gR()),gg.exports}var ge=Iy(),yg={exports:{}},kc={},vg={exports:{}},_g={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function yR(){return Cb||(Cb=1,function(i){function e(pe,Le){var Qe=pe.length;pe.push(Le);e:for(;0<Qe;){var pt=Qe-1>>>1,B=pe[pt];if(0<a(B,Le))pe[pt]=Le,pe[Qe]=B,Qe=pt;else break e}}function t(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var Le=pe[0],Qe=pe.pop();if(Qe!==Le){pe[0]=Qe;e:for(var pt=0,B=pe.length,Te=B>>>1;pt<Te;){var Be=2*(pt+1)-1,Ie=pe[Be],We=Be+1,ct=pe[We];if(0>a(Ie,Qe))We<B&&0>a(ct,Ie)?(pe[pt]=ct,pe[We]=Qe,pt=We):(pe[pt]=Ie,pe[Be]=Qe,pt=Be);else if(We<B&&0>a(ct,Qe))pe[pt]=ct,pe[We]=Qe,pt=We;else break e}}return Le}function a(pe,Le){var Qe=pe.sortIndex-Le.sortIndex;return Qe!==0?Qe:pe.id-Le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],v=[],T=1,I=null,x=3,j=!1,z=!1,ce=!1,oe=!1,ye=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function Re(pe){for(var Le=t(v);Le!==null;){if(Le.callback===null)r(v);else if(Le.startTime<=pe)r(v),Le.sortIndex=Le.expirationTime,e(p,Le);else break;Le=t(v)}}function Ce(pe){if(ce=!1,Re(pe),!z)if(t(p)!==null)z=!0,Ve||(Ve=!0,W());else{var Le=t(v);Le!==null&&Yt(Ce,Le.startTime-pe)}}var Ve=!1,L=-1,P=5,V=-1;function q(){return oe?!0:!(i.unstable_now()-V<P)}function Y(){if(oe=!1,Ve){var pe=i.unstable_now();V=pe;var Le=!0;try{e:{z=!1,ce&&(ce=!1,me(L),L=-1),j=!0;var Qe=x;try{t:{for(Re(pe),I=t(p);I!==null&&!(I.expirationTime>pe&&q());){var pt=I.callback;if(typeof pt=="function"){I.callback=null,x=I.priorityLevel;var B=pt(I.expirationTime<=pe);if(pe=i.unstable_now(),typeof B=="function"){I.callback=B,Re(pe),Le=!0;break t}I===t(p)&&r(p),Re(pe)}else r(p);I=t(p)}if(I!==null)Le=!0;else{var Te=t(v);Te!==null&&Yt(Ce,Te.startTime-pe),Le=!1}}break e}finally{I=null,x=Qe,j=!1}Le=void 0}}finally{Le?W():Ve=!1}}}var W;if(typeof ae=="function")W=function(){ae(Y)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Dn=k.port2;k.port1.onmessage=Y,W=function(){Dn.postMessage(null)}}else W=function(){ye(Y,0)};function Yt(pe,Le){L=ye(function(){pe(i.unstable_now())},Le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(pe){pe.callback=null},i.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<pe?Math.floor(1e3/pe):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(pe){switch(x){case 1:case 2:case 3:var Le=3;break;default:Le=x}var Qe=x;x=Le;try{return pe()}finally{x=Qe}},i.unstable_requestPaint=function(){oe=!0},i.unstable_runWithPriority=function(pe,Le){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Qe=x;x=pe;try{return Le()}finally{x=Qe}},i.unstable_scheduleCallback=function(pe,Le,Qe){var pt=i.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?pt+Qe:pt):Qe=pt,pe){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Qe+B,pe={id:T++,callback:Le,priorityLevel:pe,startTime:Qe,expirationTime:B,sortIndex:-1},Qe>pt?(pe.sortIndex=Qe,e(v,pe),t(p)===null&&pe===t(v)&&(ce?(me(L),L=-1):ce=!0,Yt(Ce,Qe-pt))):(pe.sortIndex=B,e(p,pe),z||j||(z=!0,Ve||(Ve=!0,W()))),pe},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(pe){var Le=x;return function(){var Qe=x;x=Le;try{return pe.apply(this,arguments)}finally{x=Qe}}}}(_g)),_g}var xb;function vR(){return xb||(xb=1,vg.exports=yR()),vg.exports}var bg={exports:{}},cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function _R(){if(Db)return cr;Db=1;var i=Iy();function e(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(p,v,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:I==null?null:""+I,children:p,containerInfo:v,implementation:T}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cr.createPortal=function(p,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(p,v,null,T)},cr.flushSync=function(p){var v=c.T,T=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=v,r.p=T,r.d.f()}},cr.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(p,v))},cr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},cr.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var T=v.as,I=d(T,v.crossOrigin),x=typeof v.integrity=="string"?v.integrity:void 0,j=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?r.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:I,integrity:x,fetchPriority:j}):T==="script"&&r.d.X(p,{crossOrigin:I,integrity:x,fetchPriority:j,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},cr.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=d(v.as,v.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(p)},cr.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,I=d(T,v.crossOrigin);r.d.L(p,T,{crossOrigin:I,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},cr.preloadModule=function(p,v){if(typeof p=="string")if(v){var T=d(v.as,v.crossOrigin);r.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(p)},cr.requestFormReset=function(p){r.d.r(p)},cr.unstable_batchedUpdates=function(p,v){return p(v)},cr.useFormState=function(p,v,T){return c.H.useFormState(p,v,T)},cr.useFormStatus=function(){return c.H.useHostTransitionStatus()},cr.version="19.1.0",cr}var Ob;function bR(){if(Ob)return bg.exports;Ob=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),bg.exports=_R(),bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function ER(){if(Pb)return kc;Pb=1;var i=vR(),e=Iy(),t=bR();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(u(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,l=s;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(l=m.return,l!==null){o=l;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return d(m),n;if(y===l)return d(m),s;y=y.sibling}throw Error(r(188))}if(o.return!==l.return)o=m,l=y;else{for(var S=!1,C=m.child;C;){if(C===o){S=!0,o=m,l=y;break}if(C===l){S=!0,l=m,o=y;break}C=C.sibling}if(!S){for(C=y.child;C;){if(C===o){S=!0,o=y,l=m;break}if(C===l){S=!0,l=y,o=m;break}C=C.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==l)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),me=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function Dn(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case oe:return"Profiler";case ce:return"StrictMode";case Ce:return"Suspense";case Ve:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case ae:return(n.displayName||"Context")+".Provider";case me:return(n._context.displayName||"Context")+".Consumer";case Re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case L:return s=n.displayName||null,s!==null?s:Dn(n.type)||"Memo";case P:s=n._payload,n=n._init;try{return Dn(n(s))}catch{}}return null}var Yt=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe={pending:!1,data:null,method:null,action:null},pt=[],B=-1;function Te(n){return{current:n}}function Be(n){0>B||(n.current=pt[B],pt[B]=null,B--)}function Ie(n,s){B++,pt[B]=n.current,n.current=s}var We=Te(null),ct=Te(null),et=Te(null),un=Te(null);function Bt(n,s){switch(Ie(et,s),Ie(ct,n),Ie(We,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?W0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=W0(s),n=J0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Be(We),Ie(We,n)}function Fe(){Be(We),Be(ct),Be(et)}function Ni(n){n.memoizedState!==null&&Ie(un,n);var s=We.current,o=J0(s,n.type);s!==o&&(Ie(ct,n),Ie(We,o))}function Ar(n){ct.current===n&&(Be(We),Be(ct)),un.current===n&&(Be(un),Dc._currentValue=Qe)}var Tt=Object.prototype.hasOwnProperty,zr=i.unstable_scheduleCallback,Ds=i.unstable_cancelCallback,jr=i.unstable_shouldYield,Nu=i.unstable_requestPaint,Ir=i.unstable_now,Xl=i.unstable_getCurrentPriorityLevel,So=i.unstable_ImmediatePriority,rs=i.unstable_UserBlockingPriority,Ln=i.unstable_NormalPriority,Vu=i.unstable_LowPriority,li=i.unstable_IdlePriority,ya=i.log,is=i.unstable_setDisableYieldValue,Nt=null,yt=null;function Yn(n){if(typeof ya=="function"&&is(n),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Nt,n)}catch{}}var ln=Math.clz32?Math.clz32:pr,va=Math.log,_a=Math.LN2;function pr(n){return n>>>=0,n===0?32:31-(va(n)/_a|0)|0}var ci=256,Vi=4194304;function wn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qe(n,s,o){var l=n.pendingLanes;if(l===0)return 0;var m=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var C=l&134217727;return C!==0?(l=C&~y,l!==0?m=wn(l):(S&=C,S!==0?m=wn(S):o||(o=C&~n,o!==0&&(m=wn(o))))):(C=l&~y,C!==0?m=wn(C):S!==0?m=wn(S):o||(o=l&~n,o!==0&&(m=wn(o)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:m}function qr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Fr(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(){var n=ci;return ci<<=1,(ci&4194048)===0&&(ci=256),n}function Ue(){var n=Vi;return Vi<<=1,(Vi&62914560)===0&&(Vi=4194304),n}function Kr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function hi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Os(n,s,o,l,m,y){var S=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var C=n.entanglements,M=n.expirationTimes,ie=n.hiddenUpdates;for(o=S&~o;0<o;){var _e=31-ln(o),Ee=1<<_e;C[_e]=0,M[_e]=-1;var ue=ie[_e];if(ue!==null)for(ie[_e]=null,_e=0;_e<ue.length;_e++){var le=ue[_e];le!==null&&(le.lane&=-536870913)}o&=~Ee}l!==0&&Hr(n,l,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~s))}function Hr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-ln(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|o&4194090}function Ps(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var l=31-ln(o),m=1<<l;m&s|n[l]&s&&(n[l]|=s),o&=~m}}function as(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ba(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gr(){var n=Le.p;return n!==0?n:(n=window.event,n===void 0?32:yb(n.type))}function Mi(n,s){var o=Le.p;try{return Le.p=n,s()}finally{Le.p=o}}var zt=Math.random().toString(36).slice(2),Zt="__reactFiber$"+zt,ut="__reactProps$"+zt,Ot="__reactContainer$"+zt,Ao="__reactEvents$"+zt,Ea="__reactListeners$"+zt,Gr="__reactHandles$"+zt,Ns="__reactResources$"+zt,Vs="__reactMarker$"+zt;function $n(n){delete n[Zt],delete n[ut],delete n[Ao],delete n[Ea],delete n[Gr]}function ir(n){var s=n[Zt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ot]||o[Zt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=nb(n);n!==null;){if(o=n[Zt])return o;n=nb(n)}return s}n=o,o=n.parentNode}return null}function On(n){if(n=n[Zt]||n[Ot]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function yr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Xn(n){var s=n[Ns];return s||(s=n[Ns]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Vt(n){n[Vs]=!0}var Ta=new Set,Rr={};function Cr(n,s){Qr(n,s),Qr(n+"Capture",s)}function Qr(n,s){for(Rr[n]=s,n=0;n<s.length;n++)Ta.add(s[n])}var $t=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fi={},Wn={};function Io(n){return Tt.call(Wn,n)?!0:Tt.call(fi,n)?!1:$t.test(n)?Wn[n]=!0:(fi[n]=!0,!1)}function vr(n,s,o){if(Io(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function _r(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function mn(n,s,o,l){if(l===null)n.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+l)}}var ki,di;function mi(n){if(ki===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ki=s&&s[1]||"",di=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ki+n+di}var Li=!1;function Ms(n,s){if(!n||Li)return"";Li=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(le){var ue=le}Reflect.construct(n,[],Ee)}else{try{Ee.call()}catch(le){ue=le}n.call(Ee.prototype)}}else{try{throw Error()}catch(le){ue=le}(Ee=n())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(le){if(le&&ue&&typeof le.stack=="string")return[le.stack,ue.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),S=y[0],C=y[1];if(S&&C){var M=S.split(`
`),ie=C.split(`
`);for(m=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;if(l===M.length||m===ie.length)for(l=M.length-1,m=ie.length-1;1<=l&&0<=m&&M[l]!==ie[m];)m--;for(;1<=l&&0<=m;l--,m--)if(M[l]!==ie[m]){if(l!==1||m!==1)do if(l--,m--,0>m||M[l]!==ie[m]){var _e=`
`+M[l].replace(" at new "," at ");return n.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",n.displayName)),_e}while(1<=l&&0<=m);break}}}finally{Li=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?mi(o):""}function ht(n){switch(n.tag){case 26:case 27:case 5:return mi(n.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Ms(n.type,!1);case 11:return Ms(n.type.render,!1);case 1:return Ms(n.type,!0);case 31:return mi("Activity");default:return""}}function ks(n){try{var s="";do s+=ht(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function wa(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Mt(n){var s=wa(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,y=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function pi(n){n._valueTracker||(n._valueTracker=Mt(n))}function Ui(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),l="";return n&&(l=wa(n)?n.checked?"true":"false":n.value),n=l,n!==o?(s.setValue(n),!0):!1}function xr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ro=/[\n"\\]/g;function en(n){return n.replace(Ro,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Bn(n,s,o,l,m,y,S,C){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Un(s)):n.value!==""+Un(s)&&(n.value=""+Un(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?Yr(n,S,Un(s)):o!=null?Yr(n,S,Un(o)):l!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+Un(C):n.removeAttribute("name")}function os(n,s,o,l,m,y,S,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;o=o!=null?""+Un(o):"",s=s!=null?""+Un(s):o,C||s===n.value||(n.value=s),n.defaultValue=s}l=l??m,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=C?n.checked:!!l,n.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function Yr(n,s,o){s==="number"&&xr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function gi(n,s,o,l){if(n=n.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=s.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&l&&(n[o].defaultSelected=!0)}else{for(o=""+Un(o),s=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,l&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function It(n,s,o){if(s!=null&&(s=""+Un(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Un(o):""}function us(n,s,o,l){if(s==null){if(l!=null){if(o!=null)throw Error(r(92));if(Yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),s=o}o=Un(s),n.defaultValue=o,l=n.textContent,l===o&&l!==""&&l!==null&&(n.value=l)}function Dr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var dt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(n,s,o){var l=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,o):typeof o!="number"||o===0||dt.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Co(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var m in s)l=s[m],s.hasOwnProperty(m)&&o[m]!==l&&Sa(n,m,l)}else for(var y in s)s.hasOwnProperty(y)&&Sa(n,y,s[y])}function xo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bi(n){return ls.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var zn=null;function br(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yi=null,jt=null;function sr(n){var s=On(n);if(s&&(n=s.stateNode)){var o=n[ut]||null;e:switch(n=s.stateNode,s.type){case"input":if(Bn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var l=o[s];if(l!==n&&l.form===n.form){var m=l[ut]||null;if(!m)throw Error(r(90));Bn(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)l=o[s],l.form===n.form&&Ui(l)}break e;case"textarea":It(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&gi(n,!!o.multiple,s,!1)}}}var ar=!1;function cs(n,s,o){if(ar)return n(s,o);ar=!0;try{var l=n(s);return l}finally{if(ar=!1,(yi!==null||jt!==null)&&(Bf(),yi&&(s=yi,n=jt,jt=yi=null,sr(s),n)))for(s=0;s<n.length;s++)sr(n[s])}}function zi(n,s){var o=n.stateNode;if(o===null)return null;var l=o[ut]||null;if(l===null)return null;o=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(Sn)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Or=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Or=!1}var Pr=null,ji=null,$r=null;function qi(){if($r)return $r;var n,s=ji,o=s.length,l,m="value"in Pr?Pr.value:Pr.textContent,y=m.length;for(n=0;n<o&&s[n]===m[n];n++);var S=o-n;for(l=1;l<=S&&s[o-l]===m[y-l];l++);return $r=m.slice(n,1<l?1-l:void 0)}function Nr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xr(){return!0}function Do(){return!1}function tn(n){function s(o,l,m,y,S){this._reactName=o,this._targetInst=m,this.type=l,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(o=n[C],this[C]=o?o(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xr:Do,this.isPropagationStopped=Do,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),s}var xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=tn(xt),vi=T({},xt,{view:0,detail:0}),Ls=tn(vi),hs,Ia,_i,Us=T({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_i&&(_i&&n.type==="mousemove"?(hs=n.screenX-_i.screenX,Ia=n.screenY-_i.screenY):Ia=hs=0,_i=n),hs)},movementY:function(n){return"movementY"in n?n.movementY:Ia}}),or=tn(Us),Ra=T({},Us,{dataTransfer:0}),Mu=tn(Ra),bi=T({},vi,{relatedTarget:0}),Fi=tn(bi),fs=T({},xt,{animationName:0,elapsedTime:0,pseudoElement:0}),Bs=tn(fs),ku=T({},xt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ki=tn(ku),Oo=T({},xt,{data:0}),zs=tn(Oo),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ca={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gi(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=pn[n])?!!s[n]:!1}function Wr(){return Gi}var Po=T({},vi,{key:function(n){if(n.key){var s=Hi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Nr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ca[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(n){return n.type==="keypress"?Nr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Nr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qi=tn(Po),No=T({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xa=tn(No),Vr=T({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),Da=tn(Vr),Ei=T({},xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oa=tn(Ei),Pa=T({},Us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Yi=tn(Pa),Pn=T({},xt,{newState:0,oldState:0}),Vo=tn(Pn),Lu=[9,13,27,32],Mr=Sn&&"CompositionEvent"in window,h=null;Sn&&"documentMode"in document&&(h=document.documentMode);var b=Sn&&"TextEvent"in window&&!h,w=Sn&&(!Mr||h&&8<h&&11>=h),D=" ",te=!1;function de(n,s){switch(n){case"keyup":return Lu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ne(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vt=!1;function cn(n,s){switch(n){case"compositionend":return Ne(s);case"keypress":return s.which!==32?null:(te=!0,D);case"textInput":return n=s.data,n===D&&te?null:n;default:return null}}function wt(n,s){if(vt)return n==="compositionend"||!Mr&&de(n,s)?(n=qi(),$r=ji=Pr=null,vt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gn[n.type]:s==="textarea"}function Ti(n,s,o,l){yi?jt?jt.push(l):jt=[l]:yi=l,s=Hf(s,"onChange"),0<s.length&&(o=new Aa("onChange","change",null,o,l),n.push({event:o,listeners:s}))}var An=null,wi=null;function Mo(n){G0(n,0)}function Uu(n){var s=yr(n);if(Ui(s))return n}function ko(n,s){if(n==="change")return s}var Si=!1;if(Sn){var Wt;if(Sn){var Na="oninput"in document;if(!Na){var Er=document.createElement("div");Er.setAttribute("oninput","return;"),Na=typeof Er.oninput=="function"}Wt=Na}else Wt=!1;Si=Wt&&(!document.documentMode||9<document.documentMode)}function uf(){An&&(An.detachEvent("onpropertychange",Bu),wi=An=null)}function Bu(n){if(n.propertyName==="value"&&Uu(wi)){var s=[];Ti(s,wi,n,br(n)),cs(Mo,s)}}function lf(n,s,o){n==="focusin"?(uf(),An=s,wi=o,An.attachEvent("onpropertychange",Bu)):n==="focusout"&&uf()}function js(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uu(wi)}function Wl(n,s){if(n==="click")return Uu(s)}function Va(n,s){if(n==="input"||n==="change")return Uu(s)}function ds(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ur=typeof Object.is=="function"?Object.is:ds;function f(n,s){if(ur(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),l=Object.keys(s);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var m=o[l];if(!Tt.call(s,m)||!ur(n[m],s[m]))return!1}return!0}function g(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _(n,s){var o=g(n);n=0;for(var l;o;){if(o.nodeType===3){if(l=n+o.textContent.length,n<=s&&l>=s)return{node:o,offset:s-n};n=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=g(o)}}function E(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?E(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function A(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=xr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=xr(n.document)}return s}function R(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var O=Sn&&"documentMode"in document&&11>=document.documentMode,N=null,K=null,G=null,X=!1;function U(n,s,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;X||N==null||N!==xr(l)||(l=N,"selectionStart"in l&&R(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),G&&f(G,l)||(G=l,l=Hf(K,"onSelect"),0<l.length&&(s=new Aa("onSelect","select",null,s,o),n.push({event:s,listeners:l}),s.target=N)))}function Z(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var F={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionrun:Z("Transition","TransitionRun"),transitionstart:Z("Transition","TransitionStart"),transitioncancel:Z("Transition","TransitionCancel"),transitionend:Z("Transition","TransitionEnd")},$={},ee={};Sn&&(ee=document.createElement("div").style,"AnimationEvent"in window||(delete F.animationend.animation,delete F.animationiteration.animation,delete F.animationstart.animation),"TransitionEvent"in window||delete F.transitionend.transition);function Q(n){if($[n])return $[n];if(!F[n])return n;var s=F[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in ee)return $[n]=s[o];return n}var se=Q("animationend"),he=Q("animationiteration"),fe=Q("animationstart"),ve=Q("transitionrun"),Oe=Q("transitionstart"),Me=Q("transitioncancel"),xe=Q("transitionend"),Pe=new Map,ke="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ke.push("scrollEnd");function De(n,s){Pe.set(n,s),Cr(s,[n])}var je=new WeakMap;function Je(n,s){if(typeof n=="object"&&n!==null){var o=je.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ks(s)},je.set(n,s),s)}return{value:n,source:s,stack:ks(s)}}var tt=[],lt=0,Zn=0;function it(){for(var n=lt,s=Zn=lt=0;s<n;){var o=tt[s];tt[s++]=null;var l=tt[s];tt[s++]=null;var m=tt[s];tt[s++]=null;var y=tt[s];if(tt[s++]=null,l!==null&&m!==null){var S=l.pending;S===null?m.next=m:(m.next=S.next,S.next=m),l.pending=m}y!==0&&qn(o,m,y)}}function yn(n,s,o,l){tt[lt++]=n,tt[lt++]=s,tt[lt++]=o,tt[lt++]=l,Zn|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function In(n,s,o,l){return yn(n,s,o,l),Ai(n)}function $i(n,s){return yn(n,null,null,s),Ai(n)}function qn(n,s,o){n.lanes|=o;var l=n.alternate;l!==null&&(l.lanes|=o);for(var m=!1,y=n.return;y!==null;)y.childLanes|=o,l=y.alternate,l!==null&&(l.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&s!==null&&(m=31-ln(o),n=y.hiddenUpdates,l=n[m],l===null?n[m]=[s]:l.push(s),s.lane=o|536870912),y):null}function Ai(n){if(50<Tc)throw Tc=0,Bp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ms={};function XA(n,s,o,l){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(n,s,o,l){return new XA(n,s,o,l)}function Vm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qs(n,s){var o=n.alternate;return o===null?(o=Jr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Ov(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function cf(n,s,o,l,m,y){var S=0;if(l=n,typeof n=="function")Vm(n)&&(S=1);else if(typeof n=="string")S=JI(n,o,We.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Jr(31,o,s,m),n.elementType=V,n.lanes=y,n;case z:return Lo(o.children,m,y,s);case ce:S=8,m|=24;break;case oe:return n=Jr(12,o,s,m|2),n.elementType=oe,n.lanes=y,n;case Ce:return n=Jr(13,o,s,m),n.elementType=Ce,n.lanes=y,n;case Ve:return n=Jr(19,o,s,m),n.elementType=Ve,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ye:case ae:S=10;break e;case me:S=9;break e;case Re:S=11;break e;case L:S=14;break e;case P:S=16,l=null;break e}S=29,o=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Jr(S,o,s,m),s.elementType=n,s.type=l,s.lanes=y,s}function Lo(n,s,o,l){return n=Jr(7,n,l,s),n.lanes=o,n}function Mm(n,s,o){return n=Jr(6,n,null,s),n.lanes=o,n}function km(n,s,o){return s=Jr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var zu=[],ju=0,hf=null,ff=0,Ii=[],Ri=0,Uo=null,Fs=1,Ks="";function Bo(n,s){zu[ju++]=ff,zu[ju++]=hf,hf=n,ff=s}function Pv(n,s,o){Ii[Ri++]=Fs,Ii[Ri++]=Ks,Ii[Ri++]=Uo,Uo=n;var l=Fs;n=Ks;var m=32-ln(l)-1;l&=~(1<<m),o+=1;var y=32-ln(s)+m;if(30<y){var S=m-m%5;y=(l&(1<<S)-1).toString(32),l>>=S,m-=S,Fs=1<<32-ln(s)+m|o<<m|l,Ks=y+n}else Fs=1<<y|o<<m|l,Ks=n}function Lm(n){n.return!==null&&(Bo(n,1),Pv(n,1,0))}function Um(n){for(;n===hf;)hf=zu[--ju],zu[ju]=null,ff=zu[--ju],zu[ju]=null;for(;n===Uo;)Uo=Ii[--Ri],Ii[Ri]=null,Ks=Ii[--Ri],Ii[Ri]=null,Fs=Ii[--Ri],Ii[Ri]=null}var Tr=null,hn=null,Pt=!1,zo=null,ps=!1,Bm=Error(r(519));function jo(n){var s=Error(r(418,""));throw ec(Je(s,n)),Bm}function Nv(n){var s=n.stateNode,o=n.type,l=n.memoizedProps;switch(s[Zt]=n,s[ut]=l,o){case"dialog":bt("cancel",s),bt("close",s);break;case"iframe":case"object":case"embed":bt("load",s);break;case"video":case"audio":for(o=0;o<Sc.length;o++)bt(Sc[o],s);break;case"source":bt("error",s);break;case"img":case"image":case"link":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"input":bt("invalid",s),os(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),pi(s);break;case"select":bt("invalid",s);break;case"textarea":bt("invalid",s),us(s,l.value,l.defaultValue,l.children),pi(s)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||l.suppressHydrationWarning===!0||X0(s.textContent,o)?(l.popover!=null&&(bt("beforetoggle",s),bt("toggle",s)),l.onScroll!=null&&bt("scroll",s),l.onScrollEnd!=null&&bt("scrollend",s),l.onClick!=null&&(s.onclick=Gf),s=!0):s=!1,s||jo(n)}function Vv(n){for(Tr=n.return;Tr;)switch(Tr.tag){case 5:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:Tr=Tr.return}}function Jl(n){if(n!==Tr)return!1;if(!Pt)return Vv(n),Pt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||tg(n.type,n.memoizedProps)),o=!o),o&&hn&&jo(n),Vv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){hn=Wi(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}hn=null}}else s===27?(s=hn,Xa(n.type)?(n=sg,sg=null,hn=n):hn=s):hn=Tr?Wi(n.stateNode.nextSibling):null;return!0}function Zl(){hn=Tr=null,Pt=!1}function Mv(){var n=zo;return n!==null&&(Ur===null?Ur=n:Ur.push.apply(Ur,n),zo=null),n}function ec(n){zo===null?zo=[n]:zo.push(n)}var zm=Te(null),qo=null,Hs=null;function Ma(n,s,o){Ie(zm,s._currentValue),s._currentValue=o}function Gs(n){n._currentValue=zm.current,Be(zm)}function jm(n,s,o){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===o)break;n=n.return}}function qm(n,s,o,l){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=m;for(var M=0;M<s.length;M++)if(C.context===s[M]){y.lanes|=o,C=y.alternate,C!==null&&(C.lanes|=o),jm(y.return,o,n),l||(S=null);break e}y=C.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),jm(S,o,n),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===n){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function tc(n,s,o,l){n=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var C=m.type;ur(m.pendingProps.value,S.value)||(n!==null?n.push(C):n=[C])}}else if(m===un.current){if(S=m.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Dc):n=[Dc])}m=m.return}n!==null&&qm(s,n,o,l),s.flags|=262144}function df(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fo(n){qo=n,Hs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lr(n){return kv(qo,n)}function mf(n,s){return qo===null&&Fo(n),kv(n,s)}function kv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Hs===null){if(n===null)throw Error(r(308));Hs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Hs=Hs.next=s;return o}var WA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},JA=i.unstable_scheduleCallback,ZA=i.unstable_NormalPriority,Nn={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fm(){return{controller:new WA,data:new Map,refCount:0}}function nc(n){n.refCount--,n.refCount===0&&JA(ZA,function(){n.controller.abort()})}var rc=null,Km=0,qu=0,Fu=null;function eI(n,s){if(rc===null){var o=rc=[];Km=0,qu=Gp(),Fu={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Km++,s.then(Lv,Lv),s}function Lv(){if(--Km===0&&rc!==null){Fu!==null&&(Fu.status="fulfilled");var n=rc;rc=null,qu=0,Fu=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function tI(n,s){var o=[],l={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(l.status="rejected",l.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),l}var Uv=pe.S;pe.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&eI(n,s),Uv!==null&&Uv(n,s)};var Ko=Te(null);function Hm(){var n=Ko.current;return n!==null?n:Xt.pooledCache}function pf(n,s){s===null?Ie(Ko,Ko.current):Ie(Ko,s.pool)}function Bv(){var n=Hm();return n===null?null:{parent:Nn._currentValue,pool:n}}var ic=Error(r(460)),zv=Error(r(474)),gf=Error(r(542)),Gm={then:function(){}};function jv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function yf(){}function qv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(yf,yf),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Kv(n),n;default:if(typeof s.status=="string")s.then(yf,yf);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=l}},function(l){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Kv(n),n}throw sc=s,ic}}var sc=null;function Fv(){if(sc===null)throw Error(r(459));var n=sc;return sc=null,n}function Kv(n){if(n===ic||n===gf)throw Error(r(483))}var ka=!1;function Qm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function La(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ua(n,s,o){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(kt&2)!==0){var m=l.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),l.pending=s,s=Ai(n),qn(n,null,o),s}return yn(n,l,s,o),Ai(n)}function ac(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,o|=l,s.lanes=o,Ps(n,o)}}function $m(n,s){var o=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?m=y=s:y=y.next=s}else m=y=s;o={baseState:l.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Xm=!1;function oc(){if(Xm){var n=Fu;if(n!==null)throw n}}function uc(n,s,o,l){Xm=!1;var m=n.updateQueue;ka=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var M=C,ie=M.next;M.next=null,S===null?y=ie:S.next=ie,S=M;var _e=n.alternate;_e!==null&&(_e=_e.updateQueue,C=_e.lastBaseUpdate,C!==S&&(C===null?_e.firstBaseUpdate=ie:C.next=ie,_e.lastBaseUpdate=M))}if(y!==null){var Ee=m.baseState;S=0,_e=ie=M=null,C=y;do{var ue=C.lane&-536870913,le=ue!==C.lane;if(le?(Rt&ue)===ue:(l&ue)===ue){ue!==0&&ue===qu&&(Xm=!0),_e!==null&&(_e=_e.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var st=n,nt=C;ue=s;var Kt=o;switch(nt.tag){case 1:if(st=nt.payload,typeof st=="function"){Ee=st.call(Kt,Ee,ue);break e}Ee=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=nt.payload,ue=typeof st=="function"?st.call(Kt,Ee,ue):st,ue==null)break e;Ee=T({},Ee,ue);break e;case 2:ka=!0}}ue=C.callback,ue!==null&&(n.flags|=64,le&&(n.flags|=8192),le=m.callbacks,le===null?m.callbacks=[ue]:le.push(ue))}else le={lane:ue,tag:C.tag,payload:C.payload,callback:C.callback,next:null},_e===null?(ie=_e=le,M=Ee):_e=_e.next=le,S|=ue;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;le=C,C=le.next,le.next=null,m.lastBaseUpdate=le,m.shared.pending=null}}while(!0);_e===null&&(M=Ee),m.baseState=M,m.firstBaseUpdate=ie,m.lastBaseUpdate=_e,y===null&&(m.shared.lanes=0),Ga|=S,n.lanes=S,n.memoizedState=Ee}}function Hv(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Gv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Hv(o[n],s)}var Ku=Te(null),vf=Te(0);function Qv(n,s){n=Zs,Ie(vf,n),Ie(Ku,s),Zs=n|s.baseLanes}function Wm(){Ie(vf,Zs),Ie(Ku,Ku.current)}function Jm(){Zs=vf.current,Be(Ku),Be(vf)}var Ba=0,mt=null,qt=null,Rn=null,_f=!1,Hu=!1,Ho=!1,bf=0,lc=0,Gu=null,nI=0;function vn(){throw Error(r(321))}function Zm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ur(n[o],s[o]))return!1;return!0}function ep(n,s,o,l,m,y){return Ba=y,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pe.H=n===null||n.memoizedState===null?D_:O_,Ho=!1,y=o(l,m),Ho=!1,Hu&&(y=$v(s,o,l,m)),Yv(n),y}function Yv(n){pe.H=If;var s=qt!==null&&qt.next!==null;if(Ba=0,Rn=qt=mt=null,_f=!1,lc=0,Gu=null,s)throw Error(r(300));n===null||Fn||(n=n.dependencies,n!==null&&df(n)&&(Fn=!0))}function $v(n,s,o,l){mt=n;var m=0;do{if(Hu&&(Gu=null),lc=0,Hu=!1,25<=m)throw Error(r(301));if(m+=1,Rn=qt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}pe.H=lI,y=s(o,l)}while(Hu);return y}function rI(){var n=pe.H,s=n.useState()[0];return s=typeof s.then=="function"?cc(s):s,n=n.useState()[0],(qt!==null?qt.memoizedState:null)!==n&&(mt.flags|=1024),s}function tp(){var n=bf!==0;return bf=0,n}function np(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function rp(n){if(_f){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_f=!1}Ba=0,Rn=qt=mt=null,Hu=!1,lc=bf=0,Gu=null}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?mt.memoizedState=Rn=n:Rn=Rn.next=n,Rn}function Cn(){if(qt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var s=Rn===null?mt.memoizedState:Rn.next;if(s!==null)Rn=s,qt=n;else{if(n===null)throw mt.alternate===null?Error(r(467)):Error(r(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Rn===null?mt.memoizedState=Rn=n:Rn=Rn.next=n}return Rn}function ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cc(n){var s=lc;return lc+=1,Gu===null&&(Gu=[]),n=qv(Gu,n,s),s=mt,(Rn===null?s.memoizedState:Rn.next)===null&&(s=s.alternate,pe.H=s===null||s.memoizedState===null?D_:O_),n}function Ef(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return cc(n);if(n.$$typeof===ae)return lr(n)}throw Error(r(438,String(n)))}function sp(n){var s=null,o=mt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var l=mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ip(),mt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),l=0;l<n;l++)o[l]=q;return s.index++,o}function Qs(n,s){return typeof s=="function"?s(n):s}function Tf(n){var s=Cn();return ap(s,qt,n)}function ap(n,s,o){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=o;var m=n.baseQueue,y=l.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}s.baseQueue=m=y,l.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{s=m.next;var C=S=null,M=null,ie=s,_e=!1;do{var Ee=ie.lane&-536870913;if(Ee!==ie.lane?(Rt&Ee)===Ee:(Ba&Ee)===Ee){var ue=ie.revertLane;if(ue===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),Ee===qu&&(_e=!0);else if((Ba&ue)===ue){ie=ie.next,ue===qu&&(_e=!0);continue}else Ee={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},M===null?(C=M=Ee,S=y):M=M.next=Ee,mt.lanes|=ue,Ga|=ue;Ee=ie.action,Ho&&o(y,Ee),y=ie.hasEagerState?ie.eagerState:o(y,Ee)}else ue={lane:Ee,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},M===null?(C=M=ue,S=y):M=M.next=ue,mt.lanes|=Ee,Ga|=Ee;ie=ie.next}while(ie!==null&&ie!==s);if(M===null?S=y:M.next=C,!ur(y,n.memoizedState)&&(Fn=!0,_e&&(o=Fu,o!==null)))throw o;n.memoizedState=y,n.baseState=S,n.baseQueue=M,l.lastRenderedState=y}return m===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function op(n){var s=Cn(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var l=o.dispatch,m=o.pending,y=s.memoizedState;if(m!==null){o.pending=null;var S=m=m.next;do y=n(y,S.action),S=S.next;while(S!==m);ur(y,s.memoizedState)||(Fn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,l]}function Xv(n,s,o){var l=mt,m=Cn(),y=Pt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=s();var S=!ur((qt||m).memoizedState,o);S&&(m.memoizedState=o,Fn=!0),m=m.queue;var C=Zv.bind(null,l,m,n);if(hc(2048,8,C,[n]),m.getSnapshot!==s||S||Rn!==null&&Rn.memoizedState.tag&1){if(l.flags|=2048,Qu(9,wf(),Jv.bind(null,l,m,o,s),null),Xt===null)throw Error(r(349));y||(Ba&124)!==0||Wv(l,s,o)}return o}function Wv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=mt.updateQueue,s===null?(s=ip(),mt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Jv(n,s,o,l){s.value=o,s.getSnapshot=l,e_(s)&&t_(n)}function Zv(n,s,o){return o(function(){e_(s)&&t_(n)})}function e_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ur(n,o)}catch{return!0}}function t_(n){var s=$i(n,2);s!==null&&ri(s,n,2)}function up(n){var s=kr();if(typeof n=="function"){var o=n;if(n=o(),Ho){Yn(!0);try{o()}finally{Yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:n},s}function n_(n,s,o,l){return n.baseState=o,ap(n,qt,typeof l=="function"?l:Qs)}function iI(n,s,o,l,m){if(Af(n))throw Error(r(485));if(n=s.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};pe.T!==null?o(!0):y.isTransition=!1,l(y),o=s.pending,o===null?(y.next=s.pending=y,r_(s,y)):(y.next=o.next,s.pending=o.next=y)}}function r_(n,s){var o=s.action,l=s.payload,m=n.state;if(s.isTransition){var y=pe.T,S={};pe.T=S;try{var C=o(m,l),M=pe.S;M!==null&&M(S,C),i_(n,s,C)}catch(ie){lp(n,s,ie)}finally{pe.T=y}}else try{y=o(m,l),i_(n,s,y)}catch(ie){lp(n,s,ie)}}function i_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){s_(n,s,l)},function(l){return lp(n,s,l)}):s_(n,s,o)}function s_(n,s,o){s.status="fulfilled",s.value=o,a_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,r_(n,o)))}function lp(n,s,o){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=o,a_(s),s=s.next;while(s!==l)}n.action=null}function a_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function o_(n,s){return s}function u_(n,s){if(Pt){var o=Xt.formState;if(o!==null){e:{var l=mt;if(Pt){if(hn){t:{for(var m=hn,y=ps;m.nodeType!==8;){if(!y){m=null;break t}if(m=Wi(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){hn=Wi(m.nextSibling),l=m.data==="F!";break e}}jo(l)}l=!1}l&&(s=o[0])}}return o=kr(),o.memoizedState=o.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o_,lastRenderedState:s},o.queue=l,o=R_.bind(null,mt,l),l.dispatch=o,l=up(!1),y=mp.bind(null,mt,!1,l.queue),l=kr(),m={state:s,dispatch:null,action:n,pending:null},l.queue=m,o=iI.bind(null,mt,m,y,o),m.dispatch=o,l.memoizedState=n,[s,o,!1]}function l_(n){var s=Cn();return c_(s,qt,n)}function c_(n,s,o){if(s=ap(n,s,o_)[0],n=Tf(Qs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=cc(s)}catch(S){throw S===ic?gf:S}else l=s;s=Cn();var m=s.queue,y=m.dispatch;return o!==s.memoizedState&&(mt.flags|=2048,Qu(9,wf(),sI.bind(null,m,o),null)),[l,y,n]}function sI(n,s){n.action=s}function h_(n){var s=Cn(),o=qt;if(o!==null)return c_(s,o,n);Cn(),s=s.memoizedState,o=Cn();var l=o.queue.dispatch;return o.memoizedState=n,[s,l,!1]}function Qu(n,s,o,l){return n={tag:n,create:o,deps:l,inst:s,next:null},s=mt.updateQueue,s===null&&(s=ip(),mt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(l=o.next,o.next=n,n.next=l,s.lastEffect=n),n}function wf(){return{destroy:void 0,resource:void 0}}function f_(){return Cn().memoizedState}function Sf(n,s,o,l){var m=kr();l=l===void 0?null:l,mt.flags|=n,m.memoizedState=Qu(1|s,wf(),o,l)}function hc(n,s,o,l){var m=Cn();l=l===void 0?null:l;var y=m.memoizedState.inst;qt!==null&&l!==null&&Zm(l,qt.memoizedState.deps)?m.memoizedState=Qu(s,y,o,l):(mt.flags|=n,m.memoizedState=Qu(1|s,y,o,l))}function d_(n,s){Sf(8390656,8,n,s)}function m_(n,s){hc(2048,8,n,s)}function p_(n,s){return hc(4,2,n,s)}function g_(n,s){return hc(4,4,n,s)}function y_(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function v_(n,s,o){o=o!=null?o.concat([n]):null,hc(4,4,y_.bind(null,s,n),o)}function cp(){}function __(n,s){var o=Cn();s=s===void 0?null:s;var l=o.memoizedState;return s!==null&&Zm(s,l[1])?l[0]:(o.memoizedState=[n,s],n)}function b_(n,s){var o=Cn();s=s===void 0?null:s;var l=o.memoizedState;if(s!==null&&Zm(s,l[1]))return l[0];if(l=n(),Ho){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,s],l}function hp(n,s,o){return o===void 0||(Ba&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=w0(),mt.lanes|=n,Ga|=n,o)}function E_(n,s,o,l){return ur(o,s)?o:Ku.current!==null?(n=hp(n,o,l),ur(n,s)||(Fn=!0),n):(Ba&42)===0?(Fn=!0,n.memoizedState=o):(n=w0(),mt.lanes|=n,Ga|=n,s)}function T_(n,s,o,l,m){var y=Le.p;Le.p=y!==0&&8>y?y:8;var S=pe.T,C={};pe.T=C,mp(n,!1,s,o);try{var M=m(),ie=pe.S;if(ie!==null&&ie(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var _e=tI(M,l);fc(n,s,_e,ni(n))}else fc(n,s,l,ni(n))}catch(Ee){fc(n,s,{then:function(){},status:"rejected",reason:Ee},ni())}finally{Le.p=y,pe.T=S}}function aI(){}function fp(n,s,o,l){if(n.tag!==5)throw Error(r(476));var m=w_(n).queue;T_(n,m,s,Qe,o===null?aI:function(){return S_(n),o(l)})}function w_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Qe,baseState:Qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:Qe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function S_(n){var s=w_(n).next.queue;fc(n,s,{},ni())}function dp(){return lr(Dc)}function A_(){return Cn().memoizedState}function I_(){return Cn().memoizedState}function oI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=ni();n=La(o);var l=Ua(s,n,o);l!==null&&(ri(l,s,o),ac(l,s,o)),s={cache:Fm()},n.payload=s;return}s=s.return}}function uI(n,s,o){var l=ni();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Af(n)?C_(s,o):(o=In(n,s,o,l),o!==null&&(ri(o,n,l),x_(o,s,l)))}function R_(n,s,o){var l=ni();fc(n,s,o,l)}function fc(n,s,o,l){var m={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Af(n))C_(s,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,C=y(S,o);if(m.hasEagerState=!0,m.eagerState=C,ur(C,S))return yn(n,s,m,0),Xt===null&&it(),!1}catch{}finally{}if(o=In(n,s,m,l),o!==null)return ri(o,n,l),x_(o,s,l),!0}return!1}function mp(n,s,o,l){if(l={lane:2,revertLane:Gp(),action:l,hasEagerState:!1,eagerState:null,next:null},Af(n)){if(s)throw Error(r(479))}else s=In(n,o,l,2),s!==null&&ri(s,n,2)}function Af(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function C_(n,s){Hu=_f=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function x_(n,s,o){if((o&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,o|=l,s.lanes=o,Ps(n,o)}}var If={readContext:lr,use:Ef,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},D_={readContext:lr,use:Ef,useCallback:function(n,s){return kr().memoizedState=[n,s===void 0?null:s],n},useContext:lr,useEffect:d_,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Sf(4194308,4,y_.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Sf(4194308,4,n,s)},useInsertionEffect:function(n,s){Sf(4,2,n,s)},useMemo:function(n,s){var o=kr();s=s===void 0?null:s;var l=n();if(Ho){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,s],l},useReducer:function(n,s,o){var l=kr();if(o!==void 0){var m=o(s);if(Ho){Yn(!0);try{o(s)}finally{Yn(!1)}}}else m=s;return l.memoizedState=l.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},l.queue=n,n=n.dispatch=uI.bind(null,mt,n),[l.memoizedState,n]},useRef:function(n){var s=kr();return n={current:n},s.memoizedState=n},useState:function(n){n=up(n);var s=n.queue,o=R_.bind(null,mt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:cp,useDeferredValue:function(n,s){var o=kr();return hp(o,n,s)},useTransition:function(){var n=up(!1);return n=T_.bind(null,mt,n.queue,!0,!1),kr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var l=mt,m=kr();if(Pt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Xt===null)throw Error(r(349));(Rt&124)!==0||Wv(l,s,o)}m.memoizedState=o;var y={value:o,getSnapshot:s};return m.queue=y,d_(Zv.bind(null,l,y,n),[n]),l.flags|=2048,Qu(9,wf(),Jv.bind(null,l,y,o,s),null),o},useId:function(){var n=kr(),s=Xt.identifierPrefix;if(Pt){var o=Ks,l=Fs;o=(l&~(1<<32-ln(l)-1)).toString(32)+o,s="«"+s+"R"+o,o=bf++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=nI++,s="«"+s+"r"+o.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:dp,useFormState:u_,useActionState:u_,useOptimistic:function(n){var s=kr();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=mp.bind(null,mt,!0,o),o.dispatch=s,[n,s]},useMemoCache:sp,useCacheRefresh:function(){return kr().memoizedState=oI.bind(null,mt)}},O_={readContext:lr,use:Ef,useCallback:__,useContext:lr,useEffect:m_,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:b_,useReducer:Tf,useRef:f_,useState:function(){return Tf(Qs)},useDebugValue:cp,useDeferredValue:function(n,s){var o=Cn();return E_(o,qt.memoizedState,n,s)},useTransition:function(){var n=Tf(Qs)[0],s=Cn().memoizedState;return[typeof n=="boolean"?n:cc(n),s]},useSyncExternalStore:Xv,useId:A_,useHostTransitionStatus:dp,useFormState:l_,useActionState:l_,useOptimistic:function(n,s){var o=Cn();return n_(o,qt,n,s)},useMemoCache:sp,useCacheRefresh:I_},lI={readContext:lr,use:Ef,useCallback:__,useContext:lr,useEffect:m_,useImperativeHandle:v_,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:b_,useReducer:op,useRef:f_,useState:function(){return op(Qs)},useDebugValue:cp,useDeferredValue:function(n,s){var o=Cn();return qt===null?hp(o,n,s):E_(o,qt.memoizedState,n,s)},useTransition:function(){var n=op(Qs)[0],s=Cn().memoizedState;return[typeof n=="boolean"?n:cc(n),s]},useSyncExternalStore:Xv,useId:A_,useHostTransitionStatus:dp,useFormState:h_,useActionState:h_,useOptimistic:function(n,s){var o=Cn();return qt!==null?n_(o,qt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:sp,useCacheRefresh:I_},Yu=null,dc=0;function Rf(n){var s=dc;return dc+=1,Yu===null&&(Yu=[]),qv(Yu,n,s)}function mc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Cf(n,s){throw s.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function P_(n){var s=n._init;return s(n._payload)}function N_(n){function s(J,H){if(n){var re=J.deletions;re===null?(J.deletions=[H],J.flags|=16):re.push(H)}}function o(J,H){if(!n)return null;for(;H!==null;)s(J,H),H=H.sibling;return null}function l(J){for(var H=new Map;J!==null;)J.key!==null?H.set(J.key,J):H.set(J.index,J),J=J.sibling;return H}function m(J,H){return J=qs(J,H),J.index=0,J.sibling=null,J}function y(J,H,re){return J.index=re,n?(re=J.alternate,re!==null?(re=re.index,re<H?(J.flags|=67108866,H):re):(J.flags|=67108866,H)):(J.flags|=1048576,H)}function S(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function C(J,H,re,be){return H===null||H.tag!==6?(H=Mm(re,J.mode,be),H.return=J,H):(H=m(H,re),H.return=J,H)}function M(J,H,re,be){var Ke=re.type;return Ke===z?_e(J,H,re.props.children,be,re.key):H!==null&&(H.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&P_(Ke)===H.type)?(H=m(H,re.props),mc(H,re),H.return=J,H):(H=cf(re.type,re.key,re.props,null,J.mode,be),mc(H,re),H.return=J,H)}function ie(J,H,re,be){return H===null||H.tag!==4||H.stateNode.containerInfo!==re.containerInfo||H.stateNode.implementation!==re.implementation?(H=km(re,J.mode,be),H.return=J,H):(H=m(H,re.children||[]),H.return=J,H)}function _e(J,H,re,be,Ke){return H===null||H.tag!==7?(H=Lo(re,J.mode,be,Ke),H.return=J,H):(H=m(H,re),H.return=J,H)}function Ee(J,H,re){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Mm(""+H,J.mode,re),H.return=J,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return re=cf(H.type,H.key,H.props,null,J.mode,re),mc(re,H),re.return=J,re;case j:return H=km(H,J.mode,re),H.return=J,H;case P:var be=H._init;return H=be(H._payload),Ee(J,H,re)}if(Yt(H)||W(H))return H=Lo(H,J.mode,re,null),H.return=J,H;if(typeof H.then=="function")return Ee(J,Rf(H),re);if(H.$$typeof===ae)return Ee(J,mf(J,H),re);Cf(J,H)}return null}function ue(J,H,re,be){var Ke=H!==null?H.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ke!==null?null:C(J,H,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return re.key===Ke?M(J,H,re,be):null;case j:return re.key===Ke?ie(J,H,re,be):null;case P:return Ke=re._init,re=Ke(re._payload),ue(J,H,re,be)}if(Yt(re)||W(re))return Ke!==null?null:_e(J,H,re,be,null);if(typeof re.then=="function")return ue(J,H,Rf(re),be);if(re.$$typeof===ae)return ue(J,H,mf(J,re),be);Cf(J,re)}return null}function le(J,H,re,be,Ke){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return J=J.get(re)||null,C(H,J,""+be,Ke);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case x:return J=J.get(be.key===null?re:be.key)||null,M(H,J,be,Ke);case j:return J=J.get(be.key===null?re:be.key)||null,ie(H,J,be,Ke);case P:var gt=be._init;return be=gt(be._payload),le(J,H,re,be,Ke)}if(Yt(be)||W(be))return J=J.get(re)||null,_e(H,J,be,Ke,null);if(typeof be.then=="function")return le(J,H,re,Rf(be),Ke);if(be.$$typeof===ae)return le(J,H,re,mf(H,be),Ke);Cf(H,be)}return null}function st(J,H,re,be){for(var Ke=null,gt=null,Xe=H,rt=H=0,Hn=null;Xe!==null&&rt<re.length;rt++){Xe.index>rt?(Hn=Xe,Xe=null):Hn=Xe.sibling;var Dt=ue(J,Xe,re[rt],be);if(Dt===null){Xe===null&&(Xe=Hn);break}n&&Xe&&Dt.alternate===null&&s(J,Xe),H=y(Dt,H,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt,Xe=Hn}if(rt===re.length)return o(J,Xe),Pt&&Bo(J,rt),Ke;if(Xe===null){for(;rt<re.length;rt++)Xe=Ee(J,re[rt],be),Xe!==null&&(H=y(Xe,H,rt),gt===null?Ke=Xe:gt.sibling=Xe,gt=Xe);return Pt&&Bo(J,rt),Ke}for(Xe=l(Xe);rt<re.length;rt++)Hn=le(Xe,J,rt,re[rt],be),Hn!==null&&(n&&Hn.alternate!==null&&Xe.delete(Hn.key===null?rt:Hn.key),H=y(Hn,H,rt),gt===null?Ke=Hn:gt.sibling=Hn,gt=Hn);return n&&Xe.forEach(function(to){return s(J,to)}),Pt&&Bo(J,rt),Ke}function nt(J,H,re,be){if(re==null)throw Error(r(151));for(var Ke=null,gt=null,Xe=H,rt=H=0,Hn=null,Dt=re.next();Xe!==null&&!Dt.done;rt++,Dt=re.next()){Xe.index>rt?(Hn=Xe,Xe=null):Hn=Xe.sibling;var to=ue(J,Xe,Dt.value,be);if(to===null){Xe===null&&(Xe=Hn);break}n&&Xe&&to.alternate===null&&s(J,Xe),H=y(to,H,rt),gt===null?Ke=to:gt.sibling=to,gt=to,Xe=Hn}if(Dt.done)return o(J,Xe),Pt&&Bo(J,rt),Ke;if(Xe===null){for(;!Dt.done;rt++,Dt=re.next())Dt=Ee(J,Dt.value,be),Dt!==null&&(H=y(Dt,H,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt);return Pt&&Bo(J,rt),Ke}for(Xe=l(Xe);!Dt.done;rt++,Dt=re.next())Dt=le(Xe,J,rt,Dt.value,be),Dt!==null&&(n&&Dt.alternate!==null&&Xe.delete(Dt.key===null?rt:Dt.key),H=y(Dt,H,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt);return n&&Xe.forEach(function(cR){return s(J,cR)}),Pt&&Bo(J,rt),Ke}function Kt(J,H,re,be){if(typeof re=="object"&&re!==null&&re.type===z&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case x:e:{for(var Ke=re.key;H!==null;){if(H.key===Ke){if(Ke=re.type,Ke===z){if(H.tag===7){o(J,H.sibling),be=m(H,re.props.children),be.return=J,J=be;break e}}else if(H.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&P_(Ke)===H.type){o(J,H.sibling),be=m(H,re.props),mc(be,re),be.return=J,J=be;break e}o(J,H);break}else s(J,H);H=H.sibling}re.type===z?(be=Lo(re.props.children,J.mode,be,re.key),be.return=J,J=be):(be=cf(re.type,re.key,re.props,null,J.mode,be),mc(be,re),be.return=J,J=be)}return S(J);case j:e:{for(Ke=re.key;H!==null;){if(H.key===Ke)if(H.tag===4&&H.stateNode.containerInfo===re.containerInfo&&H.stateNode.implementation===re.implementation){o(J,H.sibling),be=m(H,re.children||[]),be.return=J,J=be;break e}else{o(J,H);break}else s(J,H);H=H.sibling}be=km(re,J.mode,be),be.return=J,J=be}return S(J);case P:return Ke=re._init,re=Ke(re._payload),Kt(J,H,re,be)}if(Yt(re))return st(J,H,re,be);if(W(re)){if(Ke=W(re),typeof Ke!="function")throw Error(r(150));return re=Ke.call(re),nt(J,H,re,be)}if(typeof re.then=="function")return Kt(J,H,Rf(re),be);if(re.$$typeof===ae)return Kt(J,H,mf(J,re),be);Cf(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,H!==null&&H.tag===6?(o(J,H.sibling),be=m(H,re),be.return=J,J=be):(o(J,H),be=Mm(re,J.mode,be),be.return=J,J=be),S(J)):o(J,H)}return function(J,H,re,be){try{dc=0;var Ke=Kt(J,H,re,be);return Yu=null,Ke}catch(Xe){if(Xe===ic||Xe===gf)throw Xe;var gt=Jr(29,Xe,null,J.mode);return gt.lanes=be,gt.return=J,gt}finally{}}}var $u=N_(!0),V_=N_(!1),Ci=Te(null),gs=null;function za(n){var s=n.alternate;Ie(Vn,Vn.current&1),Ie(Ci,n),gs===null&&(s===null||Ku.current!==null||s.memoizedState!==null)&&(gs=n)}function M_(n){if(n.tag===22){if(Ie(Vn,Vn.current),Ie(Ci,n),gs===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(gs=n)}}else ja()}function ja(){Ie(Vn,Vn.current),Ie(Ci,Ci.current)}function Ys(n){Be(Ci),gs===n&&(gs=null),Be(Vn)}var Vn=Te(0);function xf(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ig(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function pp(n,s,o,l){s=n.memoizedState,o=o(l,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var gp={enqueueSetState:function(n,s,o){n=n._reactInternals;var l=ni(),m=La(l);m.payload=s,o!=null&&(m.callback=o),s=Ua(n,m,l),s!==null&&(ri(s,n,l),ac(s,n,l))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var l=ni(),m=La(l);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=Ua(n,m,l),s!==null&&(ri(s,n,l),ac(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=ni(),l=La(o);l.tag=2,s!=null&&(l.callback=s),s=Ua(n,l,o),s!==null&&(ri(s,n,o),ac(s,n,o))}};function k_(n,s,o,l,m,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,y,S):s.prototype&&s.prototype.isPureReactComponent?!f(o,l)||!f(m,y):!0}function L_(n,s,o,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,l),s.state!==n&&gp.enqueueReplaceState(s,s.state,null)}function Go(n,s){var o=s;if("ref"in s){o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}var Df=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function U_(n){Df(n)}function B_(n){console.error(n)}function z_(n){Df(n)}function Of(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function j_(n,s,o){try{var l=n.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function yp(n,s,o){return o=La(o),o.tag=3,o.payload={element:null},o.callback=function(){Of(n,s)},o}function q_(n){return n=La(n),n.tag=3,n}function F_(n,s,o,l){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=l.value;n.payload=function(){return m(y)},n.callback=function(){j_(s,o,l)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){j_(s,o,l),typeof m!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function cI(n,s,o,l,m){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=o.alternate,s!==null&&tc(s,o,m,!0),o=Ci.current,o!==null){switch(o.tag){case 13:return gs===null?jp():o.alternate===null&&fn===0&&(fn=3),o.flags&=-257,o.flags|=65536,o.lanes=m,l===Gm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([l]):s.add(l),Fp(n,l,m)),!1;case 22:return o.flags|=65536,l===Gm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([l]):o.add(l)),Fp(n,l,m)),!1}throw Error(r(435,o.tag))}return Fp(n,l,m),jp(),!1}if(Pt)return s=Ci.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,l!==Bm&&(n=Error(r(422),{cause:l}),ec(Je(n,o)))):(l!==Bm&&(s=Error(r(423),{cause:l}),ec(Je(s,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,l=Je(l,o),m=yp(n.stateNode,l,m),$m(n,m),fn!==4&&(fn=2)),!1;var y=Error(r(520),{cause:l});if(y=Je(y,o),Ec===null?Ec=[y]:Ec.push(y),fn!==4&&(fn=2),s===null)return!0;l=Je(l,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=yp(o.stateNode,l,n),$m(o,n),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Qa===null||!Qa.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=q_(m),F_(m,n,o,l),$m(o,m),!1}o=o.return}while(o!==null);return!1}var K_=Error(r(461)),Fn=!1;function er(n,s,o,l){s.child=n===null?V_(s,null,o,l):$u(s,n.child,o,l)}function H_(n,s,o,l,m){o=o.render;var y=s.ref;if("ref"in l){var S={};for(var C in l)C!=="ref"&&(S[C]=l[C])}else S=l;return Fo(s),l=ep(n,s,o,S,y,m),C=tp(),n!==null&&!Fn?(np(n,s,m),$s(n,s,m)):(Pt&&C&&Lm(s),s.flags|=1,er(n,s,l,m),s.child)}function G_(n,s,o,l,m){if(n===null){var y=o.type;return typeof y=="function"&&!Vm(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,Q_(n,s,y,l,m)):(n=cf(o.type,null,l,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Ap(n,m)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:f,o(S,l)&&n.ref===s.ref)return $s(n,s,m)}return s.flags|=1,n=qs(y,l),n.ref=s.ref,n.return=s,s.child=n}function Q_(n,s,o,l,m){if(n!==null){var y=n.memoizedProps;if(f(y,l)&&n.ref===s.ref)if(Fn=!1,s.pendingProps=l=y,Ap(n,m))(n.flags&131072)!==0&&(Fn=!0);else return s.lanes=n.lanes,$s(n,s,m)}return vp(n,s,o,l,m)}function Y_(n,s,o){var l=s.pendingProps,m=l.children,y=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=y!==null?y.baseLanes|o:o,n!==null){for(m=s.child=n.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;s.childLanes=y&~l}else s.childLanes=0,s.child=null;return $_(n,s,l,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&pf(s,y!==null?y.cachePool:null),y!==null?Qv(s,y):Wm(),M_(s);else return s.lanes=s.childLanes=536870912,$_(n,s,y!==null?y.baseLanes|o:o,o)}else y!==null?(pf(s,y.cachePool),Qv(s,y),ja(),s.memoizedState=null):(n!==null&&pf(s,null),Wm(),ja());return er(n,s,m,o),s.child}function $_(n,s,o,l){var m=Hm();return m=m===null?null:{parent:Nn._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&pf(s,null),Wm(),M_(s),n!==null&&tc(n,s,l,!0),null}function Pf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function vp(n,s,o,l,m){return Fo(s),o=ep(n,s,o,l,void 0,m),l=tp(),n!==null&&!Fn?(np(n,s,m),$s(n,s,m)):(Pt&&l&&Lm(s),s.flags|=1,er(n,s,o,m),s.child)}function X_(n,s,o,l,m,y){return Fo(s),s.updateQueue=null,o=$v(s,l,o,m),Yv(n),l=tp(),n!==null&&!Fn?(np(n,s,y),$s(n,s,y)):(Pt&&l&&Lm(s),s.flags|=1,er(n,s,o,y),s.child)}function W_(n,s,o,l,m){if(Fo(s),s.stateNode===null){var y=ms,S=o.contextType;typeof S=="object"&&S!==null&&(y=lr(S)),y=new o(l,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=gp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=l,y.state=s.memoizedState,y.refs={},Qm(s),S=o.contextType,y.context=typeof S=="object"&&S!==null?lr(S):ms,y.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(pp(s,o,S,l),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&gp.enqueueReplaceState(y,y.state,null),uc(s,l,y,m),oc(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){y=s.stateNode;var C=s.memoizedProps,M=Go(o,C);y.props=M;var ie=y.context,_e=o.contextType;S=ms,typeof _e=="object"&&_e!==null&&(S=lr(_e));var Ee=o.getDerivedStateFromProps;_e=typeof Ee=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,_e||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||ie!==S)&&L_(s,y,l,S),ka=!1;var ue=s.memoizedState;y.state=ue,uc(s,l,y,m),oc(),ie=s.memoizedState,C||ue!==ie||ka?(typeof Ee=="function"&&(pp(s,o,Ee,l),ie=s.memoizedState),(M=ka||k_(s,o,M,l,ue,ie,S))?(_e||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=ie),y.props=l,y.state=ie,y.context=S,l=M):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{y=s.stateNode,Ym(n,s),S=s.memoizedProps,_e=Go(o,S),y.props=_e,Ee=s.pendingProps,ue=y.context,ie=o.contextType,M=ms,typeof ie=="object"&&ie!==null&&(M=lr(ie)),C=o.getDerivedStateFromProps,(ie=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Ee||ue!==M)&&L_(s,y,l,M),ka=!1,ue=s.memoizedState,y.state=ue,uc(s,l,y,m),oc();var le=s.memoizedState;S!==Ee||ue!==le||ka||n!==null&&n.dependencies!==null&&df(n.dependencies)?(typeof C=="function"&&(pp(s,o,C,l),le=s.memoizedState),(_e=ka||k_(s,o,_e,l,ue,le,M)||n!==null&&n.dependencies!==null&&df(n.dependencies))?(ie||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,le,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,le,M)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=le),y.props=l,y.state=le,y.context=M,l=_e):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),l=!1)}return y=l,Pf(n,s),l=(s.flags&128)!==0,y||l?(y=s.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&l?(s.child=$u(s,n.child,null,m),s.child=$u(s,null,o,m)):er(n,s,o,m),s.memoizedState=y.state,n=s.child):n=$s(n,s,m),n}function J_(n,s,o,l){return Zl(),s.flags|=256,er(n,s,o,l),s.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bp(n){return{baseLanes:n,cachePool:Bv()}}function Ep(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=xi),n}function Z_(n,s,o){var l=s.pendingProps,m=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Vn.current&2)!==0),S&&(m=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Pt){if(m?za(s):ja(),Pt){var C=hn,M;if(M=C){e:{for(M=C,C=ps;M.nodeType!==8;){if(!C){C=null;break e}if(M=Wi(M.nextSibling),M===null){C=null;break e}}C=M}C!==null?(s.memoizedState={dehydrated:C,treeContext:Uo!==null?{id:Fs,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},M=Jr(18,null,null,0),M.stateNode=C,M.return=s,s.child=M,Tr=s,hn=null,M=!0):M=!1}M||jo(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return ig(C)?s.lanes=32:s.lanes=536870912,null;Ys(s)}return C=l.children,l=l.fallback,m?(ja(),m=s.mode,C=Nf({mode:"hidden",children:C},m),l=Lo(l,m,o,null),C.return=s,l.return=s,C.sibling=l,s.child=C,m=s.child,m.memoizedState=bp(o),m.childLanes=Ep(n,S,o),s.memoizedState=_p,l):(za(s),Tp(s,C))}if(M=n.memoizedState,M!==null&&(C=M.dehydrated,C!==null)){if(y)s.flags&256?(za(s),s.flags&=-257,s=wp(n,s,o)):s.memoizedState!==null?(ja(),s.child=n.child,s.flags|=128,s=null):(ja(),m=l.fallback,C=s.mode,l=Nf({mode:"visible",children:l.children},C),m=Lo(m,C,o,null),m.flags|=2,l.return=s,m.return=s,l.sibling=m,s.child=l,$u(s,n.child,null,o),l=s.child,l.memoizedState=bp(o),l.childLanes=Ep(n,S,o),s.memoizedState=_p,s=m);else if(za(s),ig(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var ie=S.dgst;S=ie,l=Error(r(419)),l.stack="",l.digest=S,ec({value:l,source:null,stack:null}),s=wp(n,s,o)}else if(Fn||tc(n,s,o,!1),S=(o&n.childLanes)!==0,Fn||S){if(S=Xt,S!==null&&(l=o&-o,l=(l&42)!==0?1:as(l),l=(l&(S.suspendedLanes|o))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,$i(n,l),ri(S,n,l),K_;C.data==="$?"||jp(),s=wp(n,s,o)}else C.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,hn=Wi(C.nextSibling),Tr=s,Pt=!0,zo=null,ps=!1,n!==null&&(Ii[Ri++]=Fs,Ii[Ri++]=Ks,Ii[Ri++]=Uo,Fs=n.id,Ks=n.overflow,Uo=s),s=Tp(s,l.children),s.flags|=4096);return s}return m?(ja(),m=l.fallback,C=s.mode,M=n.child,ie=M.sibling,l=qs(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,ie!==null?m=qs(ie,m):(m=Lo(m,C,o,null),m.flags|=2),m.return=s,l.return=s,l.sibling=m,s.child=l,l=m,m=s.child,C=n.child.memoizedState,C===null?C=bp(o):(M=C.cachePool,M!==null?(ie=Nn._currentValue,M=M.parent!==ie?{parent:ie,pool:ie}:M):M=Bv(),C={baseLanes:C.baseLanes|o,cachePool:M}),m.memoizedState=C,m.childLanes=Ep(n,S,o),s.memoizedState=_p,l):(za(s),o=n.child,n=o.sibling,o=qs(o,{mode:"visible",children:l.children}),o.return=s,o.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=o,s.memoizedState=null,o)}function Tp(n,s){return s=Nf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Nf(n,s){return n=Jr(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function wp(n,s,o){return $u(s,n.child,null,o),n=Tp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function e0(n,s,o){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),jm(n.return,s,o)}function Sp(n,s,o,l,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=o,y.tailMode=m)}function t0(n,s,o){var l=s.pendingProps,m=l.revealOrder,y=l.tail;if(er(n,s,l.children,o),l=Vn.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e0(n,o,s);else if(n.tag===19)e0(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(Ie(Vn,l),m){case"forwards":for(o=s.child,m=null;o!==null;)n=o.alternate,n!==null&&xf(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Sp(s,!1,m,o,y);break;case"backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&xf(n)===null){s.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Sp(s,!0,o,null,y);break;case"together":Sp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function $s(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Ga|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(tc(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=qs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=qs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Ap(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&df(n)))}function hI(n,s,o){switch(s.tag){case 3:Bt(s,s.stateNode.containerInfo),Ma(s,Nn,n.memoizedState.cache),Zl();break;case 27:case 5:Ni(s);break;case 4:Bt(s,s.stateNode.containerInfo);break;case 10:Ma(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(za(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Z_(n,s,o):(za(s),n=$s(n,s,o),n!==null?n.sibling:null);za(s);break;case 19:var m=(n.flags&128)!==0;if(l=(o&s.childLanes)!==0,l||(tc(n,s,o,!1),l=(o&s.childLanes)!==0),m){if(l)return t0(n,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ie(Vn,Vn.current),l)break;return null;case 22:case 23:return s.lanes=0,Y_(n,s,o);case 24:Ma(s,Nn,n.memoizedState.cache)}return $s(n,s,o)}function n0(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Fn=!0;else{if(!Ap(n,o)&&(s.flags&128)===0)return Fn=!1,hI(n,s,o);Fn=(n.flags&131072)!==0}else Fn=!1,Pt&&(s.flags&1048576)!==0&&Pv(s,ff,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,m=l._init;if(l=m(l._payload),s.type=l,typeof l=="function")Vm(l)?(n=Go(l,n),s.tag=1,s=W_(null,s,l,n,o)):(s.tag=0,s=vp(null,s,l,n,o));else{if(l!=null){if(m=l.$$typeof,m===Re){s.tag=11,s=H_(null,s,l,n,o);break e}else if(m===L){s.tag=14,s=G_(null,s,l,n,o);break e}}throw s=Dn(l)||l,Error(r(306,s,""))}}return s;case 0:return vp(n,s,s.type,s.pendingProps,o);case 1:return l=s.type,m=Go(l,s.pendingProps),W_(n,s,l,m,o);case 3:e:{if(Bt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var y=s.memoizedState;m=y.element,Ym(n,s),uc(s,l,null,o);var S=s.memoizedState;if(l=S.cache,Ma(s,Nn,l),l!==y.cache&&qm(s,[Nn],o,!0),oc(),l=S.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=J_(n,s,l,o);break e}else if(l!==m){m=Je(Error(r(424)),s),ec(m),s=J_(n,s,l,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(hn=Wi(n.firstChild),Tr=s,Pt=!0,zo=null,ps=!0,o=V_(s,null,l,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Zl(),l===m){s=$s(n,s,o);break e}er(n,s,l,o)}s=s.child}return s;case 26:return Pf(n,s),n===null?(o=ab(s.type,null,s.pendingProps,null))?s.memoizedState=o:Pt||(o=s.type,n=s.pendingProps,l=Qf(et.current).createElement(o),l[Zt]=s,l[ut]=n,nr(l,o,n),Vt(l),s.stateNode=l):s.memoizedState=ab(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ni(s),n===null&&Pt&&(l=s.stateNode=rb(s.type,s.pendingProps,et.current),Tr=s,ps=!0,m=hn,Xa(s.type)?(sg=m,hn=Wi(l.firstChild)):hn=m),er(n,s,s.pendingProps.children,o),Pf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Pt&&((m=l=hn)&&(l=BI(l,s.type,s.pendingProps,ps),l!==null?(s.stateNode=l,Tr=s,hn=Wi(l.firstChild),ps=!1,m=!0):m=!1),m||jo(s)),Ni(s),m=s.type,y=s.pendingProps,S=n!==null?n.memoizedProps:null,l=y.children,tg(m,y)?l=null:S!==null&&tg(m,S)&&(s.flags|=32),s.memoizedState!==null&&(m=ep(n,s,rI,null,null,o),Dc._currentValue=m),Pf(n,s),er(n,s,l,o),s.child;case 6:return n===null&&Pt&&((n=o=hn)&&(o=zI(o,s.pendingProps,ps),o!==null?(s.stateNode=o,Tr=s,hn=null,n=!0):n=!1),n||jo(s)),null;case 13:return Z_(n,s,o);case 4:return Bt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=$u(s,null,l,o):er(n,s,l,o),s.child;case 11:return H_(n,s,s.type,s.pendingProps,o);case 7:return er(n,s,s.pendingProps,o),s.child;case 8:return er(n,s,s.pendingProps.children,o),s.child;case 12:return er(n,s,s.pendingProps.children,o),s.child;case 10:return l=s.pendingProps,Ma(s,s.type,l.value),er(n,s,l.children,o),s.child;case 9:return m=s.type._context,l=s.pendingProps.children,Fo(s),m=lr(m),l=l(m),s.flags|=1,er(n,s,l,o),s.child;case 14:return G_(n,s,s.type,s.pendingProps,o);case 15:return Q_(n,s,s.type,s.pendingProps,o);case 19:return t0(n,s,o);case 31:return l=s.pendingProps,o=s.mode,l={mode:l.mode,children:l.children},n===null?(o=Nf(l,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=qs(n.child,l),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return Y_(n,s,o);case 24:return Fo(s),l=lr(Nn),n===null?(m=Hm(),m===null&&(m=Xt,y=Fm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),s.memoizedState={parent:l,cache:m},Qm(s),Ma(s,Nn,m)):((n.lanes&o)!==0&&(Ym(n,s),uc(s,null,null,o),oc()),m=n.memoizedState,y=s.memoizedState,m.parent!==l?(m={parent:l,cache:l},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Ma(s,Nn,l)):(l=y.cache,Ma(s,Nn,l),l!==m.cache&&qm(s,[Nn],o,!0))),er(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Xs(n){n.flags|=4}function r0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!hb(s)){if(s=Ci.current,s!==null&&((Rt&4194048)===Rt?gs!==null:(Rt&62914560)!==Rt&&(Rt&536870912)===0||s!==gs))throw sc=Gm,zv;n.flags|=8192}}function Vf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Ue():536870912,n.lanes|=s,Zu|=s)}function pc(n,s){if(!Pt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function an(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,l=0;if(s)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,l|=m.subtreeFlags&65011712,l|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,l|=m.subtreeFlags,l|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=l,n.childLanes=o,s}function fI(n,s,o){var l=s.pendingProps;switch(Um(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(s),null;case 1:return an(s),null;case 3:return o=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Gs(Nn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Jl(s)?Xs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mv())),an(s),null;case 26:return o=s.memoizedState,n===null?(Xs(s),o!==null?(an(s),r0(s,o)):(an(s),s.flags&=-16777217)):o?o!==n.memoizedState?(Xs(s),an(s),r0(s,o)):(an(s),s.flags&=-16777217):(n.memoizedProps!==l&&Xs(s),an(s),s.flags&=-16777217),null;case 27:Ar(s),o=et.current;var m=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Xs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return an(s),null}n=We.current,Jl(s)?Nv(s):(n=rb(m,l,o),s.stateNode=n,Xs(s))}return an(s),null;case 5:if(Ar(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Xs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return an(s),null}if(n=We.current,Jl(s))Nv(s);else{switch(m=Qf(et.current),n){case 1:n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=m.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?m.createElement(o,{is:l.is}):m.createElement(o)}}n[Zt]=s,n[ut]=l;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)n.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=n;e:switch(nr(n,o,l),o){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Xs(s)}}return an(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Xs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=et.current,Jl(s)){if(n=s.stateNode,o=s.memoizedProps,l=null,m=Tr,m!==null)switch(m.tag){case 27:case 5:l=m.memoizedProps}n[Zt]=s,n=!!(n.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||X0(n.nodeValue,o)),n||jo(s)}else n=Qf(n).createTextNode(l),n[Zt]=s,s.stateNode=n}return an(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Jl(s),l!==null&&l.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Zt]=s}else Zl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),m=!1}else m=Mv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Ys(s),s):(Ys(s),null)}if(Ys(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=l!==null,n=n!==null&&n.memoizedState!==null,o){l=s.child,m=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(m=l.alternate.memoizedState.cachePool.pool);var y=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==m&&(l.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Vf(s,s.updateQueue),an(s),null;case 4:return Fe(),n===null&&Xp(s.stateNode.containerInfo),an(s),null;case 10:return Gs(s.type),an(s),null;case 19:if(Be(Vn),m=s.memoizedState,m===null)return an(s),null;if(l=(s.flags&128)!==0,y=m.rendering,y===null)if(l)pc(m,!1);else{if(fn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=xf(n),y!==null){for(s.flags|=128,pc(m,!1),n=y.updateQueue,s.updateQueue=n,Vf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Ov(o,n),o=o.sibling;return Ie(Vn,Vn.current&1|2),s.child}n=n.sibling}m.tail!==null&&Ir()>Lf&&(s.flags|=128,l=!0,pc(m,!1),s.lanes=4194304)}else{if(!l)if(n=xf(y),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,Vf(s,n),pc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Pt)return an(s),null}else 2*Ir()-m.renderingStartTime>Lf&&o!==536870912&&(s.flags|=128,l=!0,pc(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(n=m.last,n!==null?n.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ir(),s.sibling=null,n=Vn.current,Ie(Vn,l?n&1|2:n&1),s):(an(s),null);case 22:case 23:return Ys(s),Jm(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(o&536870912)!==0&&(s.flags&128)===0&&(an(s),s.subtreeFlags&6&&(s.flags|=8192)):an(s),o=s.updateQueue,o!==null&&Vf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==o&&(s.flags|=2048),n!==null&&Be(Ko),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Gs(Nn),an(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function dI(n,s){switch(Um(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Gs(Nn),Fe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ar(s),null;case 13:if(Ys(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Zl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Be(Vn),null;case 4:return Fe(),null;case 10:return Gs(s.type),null;case 22:case 23:return Ys(s),Jm(),n!==null&&Be(Ko),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Gs(Nn),null;case 25:return null;default:return null}}function i0(n,s){switch(Um(s),s.tag){case 3:Gs(Nn),Fe();break;case 26:case 27:case 5:Ar(s);break;case 4:Fe();break;case 13:Ys(s);break;case 19:Be(Vn);break;case 10:Gs(s.type);break;case 22:case 23:Ys(s),Jm(),n!==null&&Be(Ko);break;case 24:Gs(Nn)}}function gc(n,s){try{var o=s.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var m=l.next;o=m;do{if((o.tag&n)===n){l=void 0;var y=o.create,S=o.inst;l=y(),S.destroy=l}o=o.next}while(o!==m)}}catch(C){Gt(s,s.return,C)}}function qa(n,s,o){try{var l=s.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var y=m.next;l=y;do{if((l.tag&n)===n){var S=l.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,m=s;var M=o,ie=C;try{ie()}catch(_e){Gt(m,M,_e)}}}l=l.next}while(l!==y)}}catch(_e){Gt(s,s.return,_e)}}function s0(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Gv(s,o)}catch(l){Gt(n,n.return,l)}}}function a0(n,s,o){o.props=Go(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(l){Gt(n,s,l)}}function yc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof o=="function"?n.refCleanup=o(l):o.current=l}}catch(m){Gt(n,s,m)}}function ys(n,s){var o=n.ref,l=n.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(m){Gt(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Gt(n,s,m)}else o.current=null}function o0(n){var s=n.type,o=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(m){Gt(n,n.return,m)}}function Ip(n,s,o){try{var l=n.stateNode;VI(l,n.type,o,s),l[ut]=s}catch(m){Gt(n,n.return,m)}}function u0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xa(n.type)||n.tag===4}function Rp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||u0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cp(n,s,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Gf));else if(l!==4&&(l===27&&Xa(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Cp(n,s,o),n=n.sibling;n!==null;)Cp(n,s,o),n=n.sibling}function Mf(n,s,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(l!==4&&(l===27&&Xa(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Mf(n,s,o),n=n.sibling;n!==null;)Mf(n,s,o),n=n.sibling}function l0(n){var s=n.stateNode,o=n.memoizedProps;try{for(var l=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);nr(s,l,o),s[Zt]=n,s[ut]=o}catch(y){Gt(n,n.return,y)}}var Ws=!1,_n=!1,xp=!1,c0=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function mI(n,s){if(n=n.containerInfo,Zp=Zf,n=A(n),R(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var m=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,C=-1,M=-1,ie=0,_e=0,Ee=n,ue=null;t:for(;;){for(var le;Ee!==o||m!==0&&Ee.nodeType!==3||(C=S+m),Ee!==y||l!==0&&Ee.nodeType!==3||(M=S+l),Ee.nodeType===3&&(S+=Ee.nodeValue.length),(le=Ee.firstChild)!==null;)ue=Ee,Ee=le;for(;;){if(Ee===n)break t;if(ue===o&&++ie===m&&(C=S),ue===y&&++_e===l&&(M=S),(le=Ee.nextSibling)!==null)break;Ee=ue,ue=Ee.parentNode}Ee=le}o=C===-1||M===-1?null:{start:C,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(eg={focusedElem:n,selectionRange:o},Zf=!1,Kn=s;Kn!==null;)if(s=Kn,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Kn=n;else for(;Kn!==null;){switch(s=Kn,y=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=s,m=y.memoizedProps,y=y.memoizedState,l=o.stateNode;try{var st=Go(o.type,m,o.elementType===o.type);n=l.getSnapshotBeforeUpdate(st,y),l.__reactInternalSnapshotBeforeUpdate=n}catch(nt){Gt(o,o.return,nt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)rg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":rg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Kn=n;break}Kn=s.return}}function h0(n,s,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:Fa(n,o),l&4&&gc(5,o);break;case 1:if(Fa(n,o),l&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(S){Gt(o,o.return,S)}else{var m=Go(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Gt(o,o.return,S)}}l&64&&s0(o),l&512&&yc(o,o.return);break;case 3:if(Fa(n,o),l&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Gv(n,s)}catch(S){Gt(o,o.return,S)}}break;case 27:s===null&&l&4&&l0(o);case 26:case 5:Fa(n,o),s===null&&l&4&&o0(o),l&512&&yc(o,o.return);break;case 12:Fa(n,o);break;case 13:Fa(n,o),l&4&&m0(n,o),l&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=wI.bind(null,o),jI(n,o))));break;case 22:if(l=o.memoizedState!==null||Ws,!l){s=s!==null&&s.memoizedState!==null||_n,m=Ws;var y=_n;Ws=l,(_n=s)&&!y?Ka(n,o,(o.subtreeFlags&8772)!==0):Fa(n,o),Ws=m,_n=y}break;case 30:break;default:Fa(n,o)}}function f0(n){var s=n.alternate;s!==null&&(n.alternate=null,f0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&$n(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var nn=null,Lr=!1;function Js(n,s,o){for(o=o.child;o!==null;)d0(n,s,o),o=o.sibling}function d0(n,s,o){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Nt,o)}catch{}switch(o.tag){case 26:_n||ys(o,s),Js(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||ys(o,s);var l=nn,m=Lr;Xa(o.type)&&(nn=o.stateNode,Lr=!1),Js(n,s,o),Ic(o.stateNode),nn=l,Lr=m;break;case 5:_n||ys(o,s);case 6:if(l=nn,m=Lr,nn=null,Js(n,s,o),nn=l,Lr=m,nn!==null)if(Lr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(o.stateNode)}catch(y){Gt(o,s,y)}else try{nn.removeChild(o.stateNode)}catch(y){Gt(o,s,y)}break;case 18:nn!==null&&(Lr?(n=nn,tb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Vc(n)):tb(nn,o.stateNode));break;case 4:l=nn,m=Lr,nn=o.stateNode.containerInfo,Lr=!0,Js(n,s,o),nn=l,Lr=m;break;case 0:case 11:case 14:case 15:_n||qa(2,o,s),_n||qa(4,o,s),Js(n,s,o);break;case 1:_n||(ys(o,s),l=o.stateNode,typeof l.componentWillUnmount=="function"&&a0(o,s,l)),Js(n,s,o);break;case 21:Js(n,s,o);break;case 22:_n=(l=_n)||o.memoizedState!==null,Js(n,s,o),_n=l;break;default:Js(n,s,o)}}function m0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Vc(n)}catch(o){Gt(s,s.return,o)}}function pI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new c0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new c0),s;default:throw Error(r(435,n.tag))}}function Dp(n,s){var o=pI(n);s.forEach(function(l){var m=SI.bind(null,n,l);o.has(l)||(o.add(l),l.then(m,m))})}function Zr(n,s){var o=s.deletions;if(o!==null)for(var l=0;l<o.length;l++){var m=o[l],y=n,S=s,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Xa(C.type)){nn=C.stateNode,Lr=!1;break e}break;case 5:nn=C.stateNode,Lr=!1;break e;case 3:case 4:nn=C.stateNode.containerInfo,Lr=!0;break e}C=C.return}if(nn===null)throw Error(r(160));d0(y,S,m),nn=null,Lr=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)p0(s,n),s=s.sibling}var Xi=null;function p0(n,s){var o=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Zr(s,n),ei(n),l&4&&(qa(3,n,n.return),gc(3,n),qa(5,n,n.return));break;case 1:Zr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),l&64&&Ws&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var m=Xi;if(Zr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),l&4){var y=o!==null?o.memoizedState:null;if(l=n.memoizedState,o===null)if(l===null)if(n.stateNode===null){e:{l=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(l){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Vs]||y[Zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(l),m.head.insertBefore(y,m.querySelector("head > title"))),nr(y,l,o),y[Zt]=n,Vt(y),l=y;break e;case"link":var S=lb("link","href",m).get(l+(o.href||""));if(S){for(var C=0;C<S.length;C++)if(y=S[C],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(C,1);break t}}y=m.createElement(l),nr(y,l,o),m.head.appendChild(y);break;case"meta":if(S=lb("meta","content",m).get(l+(o.content||""))){for(C=0;C<S.length;C++)if(y=S[C],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(C,1);break t}}y=m.createElement(l),nr(y,l,o),m.head.appendChild(y);break;default:throw Error(r(468,l))}y[Zt]=n,Vt(y),l=y}n.stateNode=l}else cb(m,n.type,n.stateNode);else n.stateNode=ub(m,l,n.memoizedProps);else y!==l?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,l===null?cb(m,n.type,n.stateNode):ub(m,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Ip(n,n.memoizedProps,o.memoizedProps)}break;case 27:Zr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),o!==null&&l&4&&Ip(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Zr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),n.flags&32){m=n.stateNode;try{Dr(m,"")}catch(le){Gt(n,n.return,le)}}l&4&&n.stateNode!=null&&(m=n.memoizedProps,Ip(n,m,o!==null?o.memoizedProps:m)),l&1024&&(xp=!0);break;case 6:if(Zr(s,n),ei(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,o=n.stateNode;try{o.nodeValue=l}catch(le){Gt(n,n.return,le)}}break;case 3:if(Xf=null,m=Xi,Xi=Yf(s.containerInfo),Zr(s,n),Xi=m,ei(n),l&4&&o!==null&&o.memoizedState.isDehydrated)try{Vc(s.containerInfo)}catch(le){Gt(n,n.return,le)}xp&&(xp=!1,g0(n));break;case 4:l=Xi,Xi=Yf(n.stateNode.containerInfo),Zr(s,n),ei(n),Xi=l;break;case 12:Zr(s,n),ei(n);break;case 13:Zr(s,n),ei(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(kp=Ir()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Dp(n,l)));break;case 22:m=n.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,ie=Ws,_e=_n;if(Ws=ie||m,_n=_e||M,Zr(s,n),_n=_e,Ws=ie,ei(n),l&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||M||Ws||_n||Qo(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(y=M.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=M.stateNode;var Ee=M.memoizedProps.style,ue=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;C.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(le){Gt(M,M.return,le)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(le){Gt(M,M.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,Dp(n,o))));break;case 19:Zr(s,n),ei(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Dp(n,l)));break;case 30:break;case 21:break;default:Zr(s,n),ei(n)}}function ei(n){var s=n.flags;if(s&2){try{for(var o,l=n.return;l!==null;){if(u0(l)){o=l;break}l=l.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,y=Rp(n);Mf(n,y,m);break;case 5:var S=o.stateNode;o.flags&32&&(Dr(S,""),o.flags&=-33);var C=Rp(n);Mf(n,C,S);break;case 3:case 4:var M=o.stateNode.containerInfo,ie=Rp(n);Cp(n,ie,M);break;default:throw Error(r(161))}}catch(_e){Gt(n,n.return,_e)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function g0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;g0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fa(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)h0(n,s.alternate,s),s=s.sibling}function Qo(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:qa(4,s,s.return),Qo(s);break;case 1:ys(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&a0(s,s.return,o),Qo(s);break;case 27:Ic(s.stateNode);case 26:case 5:ys(s,s.return),Qo(s);break;case 22:s.memoizedState===null&&Qo(s);break;case 30:Qo(s);break;default:Qo(s)}n=n.sibling}}function Ka(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,m=n,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ka(m,y,o),gc(4,y);break;case 1:if(Ka(m,y,o),l=y,m=l.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ie){Gt(l,l.return,ie)}if(l=y,m=l.updateQueue,m!==null){var C=l.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)Hv(M[m],C)}catch(ie){Gt(l,l.return,ie)}}o&&S&64&&s0(y),yc(y,y.return);break;case 27:l0(y);case 26:case 5:Ka(m,y,o),o&&l===null&&S&4&&o0(y),yc(y,y.return);break;case 12:Ka(m,y,o);break;case 13:Ka(m,y,o),o&&S&4&&m0(m,y);break;case 22:y.memoizedState===null&&Ka(m,y,o),yc(y,y.return);break;case 30:break;default:Ka(m,y,o)}s=s.sibling}}function Op(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&nc(o))}function Pp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&nc(n))}function vs(n,s,o,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)y0(n,s,o,l),s=s.sibling}function y0(n,s,o,l){var m=s.flags;switch(s.tag){case 0:case 11:case 15:vs(n,s,o,l),m&2048&&gc(9,s);break;case 1:vs(n,s,o,l);break;case 3:vs(n,s,o,l),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&nc(n)));break;case 12:if(m&2048){vs(n,s,o,l),n=s.stateNode;try{var y=s.memoizedProps,S=y.id,C=y.onPostCommit;typeof C=="function"&&C(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){Gt(s,s.return,M)}}else vs(n,s,o,l);break;case 13:vs(n,s,o,l);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?vs(n,s,o,l):vc(n,s):y._visibility&2?vs(n,s,o,l):(y._visibility|=2,Xu(n,s,o,l,(s.subtreeFlags&10256)!==0)),m&2048&&Op(S,s);break;case 24:vs(n,s,o,l),m&2048&&Pp(s.alternate,s);break;default:vs(n,s,o,l)}}function Xu(n,s,o,l,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=n,S=s,C=o,M=l,ie=S.flags;switch(S.tag){case 0:case 11:case 15:Xu(y,S,C,M,m),gc(8,S);break;case 23:break;case 22:var _e=S.stateNode;S.memoizedState!==null?_e._visibility&2?Xu(y,S,C,M,m):vc(y,S):(_e._visibility|=2,Xu(y,S,C,M,m)),m&&ie&2048&&Op(S.alternate,S);break;case 24:Xu(y,S,C,M,m),m&&ie&2048&&Pp(S.alternate,S);break;default:Xu(y,S,C,M,m)}s=s.sibling}}function vc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,l=s,m=l.flags;switch(l.tag){case 22:vc(o,l),m&2048&&Op(l.alternate,l);break;case 24:vc(o,l),m&2048&&Pp(l.alternate,l);break;default:vc(o,l)}s=s.sibling}}var _c=8192;function Wu(n){if(n.subtreeFlags&_c)for(n=n.child;n!==null;)v0(n),n=n.sibling}function v0(n){switch(n.tag){case 26:Wu(n),n.flags&_c&&n.memoizedState!==null&&eR(Xi,n.memoizedState,n.memoizedProps);break;case 5:Wu(n);break;case 3:case 4:var s=Xi;Xi=Yf(n.stateNode.containerInfo),Wu(n),Xi=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=_c,_c=16777216,Wu(n),_c=s):Wu(n));break;default:Wu(n)}}function _0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function bc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Kn=l,E0(l,n)}_0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)b0(n),n=n.sibling}function b0(n){switch(n.tag){case 0:case 11:case 15:bc(n),n.flags&2048&&qa(9,n,n.return);break;case 3:bc(n);break;case 12:bc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,kf(n)):bc(n);break;default:bc(n)}}function kf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Kn=l,E0(l,n)}_0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:qa(8,s,s.return),kf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,kf(s));break;default:kf(s)}n=n.sibling}}function E0(n,s){for(;Kn!==null;){var o=Kn;switch(o.tag){case 0:case 11:case 15:qa(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:nc(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,Kn=l;else e:for(o=n;Kn!==null;){l=Kn;var m=l.sibling,y=l.return;if(f0(l),l===o){Kn=null;break e}if(m!==null){m.return=y,Kn=m;break e}Kn=y}}}var gI={getCacheForType:function(n){var s=lr(Nn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},yI=typeof WeakMap=="function"?WeakMap:Map,kt=0,Xt=null,_t=null,Rt=0,Lt=0,ti=null,Ha=!1,Ju=!1,Np=!1,Zs=0,fn=0,Ga=0,Yo=0,Vp=0,xi=0,Zu=0,Ec=null,Ur=null,Mp=!1,kp=0,Lf=1/0,Uf=null,Qa=null,tr=0,Ya=null,el=null,tl=0,Lp=0,Up=null,T0=null,Tc=0,Bp=null;function ni(){if((kt&2)!==0&&Rt!==0)return Rt&-Rt;if(pe.T!==null){var n=qu;return n!==0?n:Gp()}return gr()}function w0(){xi===0&&(xi=(Rt&536870912)===0||Pt?ss():536870912);var n=Ci.current;return n!==null&&(n.flags|=32),xi}function ri(n,s,o){(n===Xt&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)&&(nl(n,0),$a(n,Rt,xi,!1)),hi(n,o),((kt&2)===0||n!==Xt)&&(n===Xt&&((kt&2)===0&&(Yo|=o),fn===4&&$a(n,Rt,xi,!1)),_s(n))}function S0(n,s,o){if((kt&6)!==0)throw Error(r(327));var l=!o&&(s&124)===0&&(s&n.expiredLanes)===0||qr(n,s),m=l?bI(n,s):qp(n,s,!0),y=l;do{if(m===0){Ju&&!l&&$a(n,s,0,!1);break}else{if(o=n.current.alternate,y&&!vI(o)){m=qp(n,s,!1),y=!1;continue}if(m===2){if(y=s,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var C=n;m=Ec;var M=C.current.memoizedState.isDehydrated;if(M&&(nl(C,S).flags|=256),S=qp(C,S,!1),S!==2){if(Np&&!M){C.errorRecoveryDisabledLanes|=y,Yo|=y,m=4;break e}y=Ur,Ur=m,y!==null&&(Ur===null?Ur=y:Ur.push.apply(Ur,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){nl(n,0),$a(n,s,0,!0);break}e:{switch(l=n,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:$a(l,s,xi,!Ha);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=kp+300-Ir(),10<m)){if($a(l,s,xi,!Ha),qe(l,0,!0)!==0)break e;l.timeoutHandle=Z0(A0.bind(null,l,o,Ur,Uf,Mp,s,xi,Yo,Zu,Ha,y,2,-0,0),m);break e}A0(l,o,Ur,Uf,Mp,s,xi,Yo,Zu,Ha,y,0,-0,0)}}break}while(!0);_s(n)}function A0(n,s,o,l,m,y,S,C,M,ie,_e,Ee,ue,le){if(n.timeoutHandle=-1,Ee=s.subtreeFlags,(Ee&8192||(Ee&16785408)===16785408)&&(xc={stylesheets:null,count:0,unsuspend:ZI},v0(s),Ee=tR(),Ee!==null)){n.cancelPendingCommit=Ee(P0.bind(null,n,s,y,o,l,m,S,C,M,_e,1,ue,le)),$a(n,y,S,!ie);return}P0(n,s,y,o,l,m,S,C,M)}function vI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var m=o[l],y=m.getSnapshot;m=m.value;try{if(!ur(y(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $a(n,s,o,l){s&=~Vp,s&=~Yo,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var m=s;0<m;){var y=31-ln(m),S=1<<y;l[y]=-1,m&=~S}o!==0&&Hr(n,o,s)}function Bf(){return(kt&6)===0?(wc(0),!1):!0}function zp(){if(_t!==null){if(Lt===0)var n=_t.return;else n=_t,Hs=qo=null,rp(n),Yu=null,dc=0,n=_t;for(;n!==null;)i0(n.alternate,n),n=n.return;_t=null}}function nl(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,kI(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),zp(),Xt=n,_t=o=qs(n.current,null),Rt=s,Lt=0,ti=null,Ha=!1,Ju=qr(n,s),Np=!1,Zu=xi=Vp=Yo=Ga=fn=0,Ur=Ec=null,Mp=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var m=31-ln(l),y=1<<m;s|=n[m],l&=~y}return Zs=s,it(),o}function I0(n,s){mt=null,pe.H=If,s===ic||s===gf?(s=Fv(),Lt=3):s===zv?(s=Fv(),Lt=4):Lt=s===K_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ti=s,_t===null&&(fn=1,Of(n,Je(s,n.current)))}function R0(){var n=pe.H;return pe.H=If,n===null?If:n}function C0(){var n=pe.A;return pe.A=gI,n}function jp(){fn=4,Ha||(Rt&4194048)!==Rt&&Ci.current!==null||(Ju=!0),(Ga&134217727)===0&&(Yo&134217727)===0||Xt===null||$a(Xt,Rt,xi,!1)}function qp(n,s,o){var l=kt;kt|=2;var m=R0(),y=C0();(Xt!==n||Rt!==s)&&(Uf=null,nl(n,s)),s=!1;var S=fn;e:do try{if(Lt!==0&&_t!==null){var C=_t,M=ti;switch(Lt){case 8:zp(),S=6;break e;case 3:case 2:case 9:case 6:Ci.current===null&&(s=!0);var ie=Lt;if(Lt=0,ti=null,rl(n,C,M,ie),o&&Ju){S=0;break e}break;default:ie=Lt,Lt=0,ti=null,rl(n,C,M,ie)}}_I(),S=fn;break}catch(_e){I0(n,_e)}while(!0);return s&&n.shellSuspendCounter++,Hs=qo=null,kt=l,pe.H=m,pe.A=y,_t===null&&(Xt=null,Rt=0,it()),S}function _I(){for(;_t!==null;)x0(_t)}function bI(n,s){var o=kt;kt|=2;var l=R0(),m=C0();Xt!==n||Rt!==s?(Uf=null,Lf=Ir()+500,nl(n,s)):Ju=qr(n,s);e:do try{if(Lt!==0&&_t!==null){s=_t;var y=ti;t:switch(Lt){case 1:Lt=0,ti=null,rl(n,s,y,1);break;case 2:case 9:if(jv(y)){Lt=0,ti=null,D0(s);break}s=function(){Lt!==2&&Lt!==9||Xt!==n||(Lt=7),_s(n)},y.then(s,s);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:jv(y)?(Lt=0,ti=null,D0(s)):(Lt=0,ti=null,rl(n,s,y,7));break;case 5:var S=null;switch(_t.tag){case 26:S=_t.memoizedState;case 5:case 27:var C=_t;if(!S||hb(S)){Lt=0,ti=null;var M=C.sibling;if(M!==null)_t=M;else{var ie=C.return;ie!==null?(_t=ie,zf(ie)):_t=null}break t}}Lt=0,ti=null,rl(n,s,y,5);break;case 6:Lt=0,ti=null,rl(n,s,y,6);break;case 8:zp(),fn=6;break e;default:throw Error(r(462))}}EI();break}catch(_e){I0(n,_e)}while(!0);return Hs=qo=null,pe.H=l,pe.A=m,kt=o,_t!==null?0:(Xt=null,Rt=0,it(),fn)}function EI(){for(;_t!==null&&!jr();)x0(_t)}function x0(n){var s=n0(n.alternate,n,Zs);n.memoizedProps=n.pendingProps,s===null?zf(n):_t=s}function D0(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=X_(o,s,s.pendingProps,s.type,void 0,Rt);break;case 11:s=X_(o,s,s.pendingProps,s.type.render,s.ref,Rt);break;case 5:rp(s);default:i0(o,s),s=_t=Ov(s,Zs),s=n0(o,s,Zs)}n.memoizedProps=n.pendingProps,s===null?zf(n):_t=s}function rl(n,s,o,l){Hs=qo=null,rp(s),Yu=null,dc=0;var m=s.return;try{if(cI(n,m,s,o,Rt)){fn=1,Of(n,Je(o,n.current)),_t=null;return}}catch(y){if(m!==null)throw _t=m,y;fn=1,Of(n,Je(o,n.current)),_t=null;return}s.flags&32768?(Pt||l===1?n=!0:Ju||(Rt&536870912)!==0?n=!1:(Ha=n=!0,(l===2||l===9||l===3||l===6)&&(l=Ci.current,l!==null&&l.tag===13&&(l.flags|=16384))),O0(s,n)):zf(s)}function zf(n){var s=n;do{if((s.flags&32768)!==0){O0(s,Ha);return}n=s.return;var o=fI(s.alternate,s,Zs);if(o!==null){_t=o;return}if(s=s.sibling,s!==null){_t=s;return}_t=s=n}while(s!==null);fn===0&&(fn=5)}function O0(n,s){do{var o=dI(n.alternate,n);if(o!==null){o.flags&=32767,_t=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){_t=n;return}_t=n=o}while(n!==null);fn=6,_t=null}function P0(n,s,o,l,m,y,S,C,M){n.cancelPendingCommit=null;do jf();while(tr!==0);if((kt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=Zn,Os(n,o,y,S,C,M),n===Xt&&(_t=Xt=null,Rt=0),el=s,Ya=n,tl=o,Lp=y,Up=m,T0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AI(Ln,function(){return L0(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=pe.T,pe.T=null,m=Le.p,Le.p=2,S=kt,kt|=4;try{mI(n,s,o)}finally{kt=S,Le.p=m,pe.T=l}}tr=1,N0(),V0(),M0()}}function N0(){if(tr===1){tr=0;var n=Ya,s=el,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=pe.T,pe.T=null;var l=Le.p;Le.p=2;var m=kt;kt|=4;try{p0(s,n);var y=eg,S=A(n.containerInfo),C=y.focusedElem,M=y.selectionRange;if(S!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(M!==null&&R(C)){var ie=M.start,_e=M.end;if(_e===void 0&&(_e=ie),"selectionStart"in C)C.selectionStart=ie,C.selectionEnd=Math.min(_e,C.value.length);else{var Ee=C.ownerDocument||document,ue=Ee&&Ee.defaultView||window;if(ue.getSelection){var le=ue.getSelection(),st=C.textContent.length,nt=Math.min(M.start,st),Kt=M.end===void 0?nt:Math.min(M.end,st);!le.extend&&nt>Kt&&(S=Kt,Kt=nt,nt=S);var J=_(C,nt),H=_(C,Kt);if(J&&H&&(le.rangeCount!==1||le.anchorNode!==J.node||le.anchorOffset!==J.offset||le.focusNode!==H.node||le.focusOffset!==H.offset)){var re=Ee.createRange();re.setStart(J.node,J.offset),le.removeAllRanges(),nt>Kt?(le.addRange(re),le.extend(H.node,H.offset)):(re.setEnd(H.node,H.offset),le.addRange(re))}}}}for(Ee=[],le=C;le=le.parentNode;)le.nodeType===1&&Ee.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Ee.length;C++){var be=Ee[C];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Zf=!!Zp,eg=Zp=null}finally{kt=m,Le.p=l,pe.T=o}}n.current=s,tr=2}}function V0(){if(tr===2){tr=0;var n=Ya,s=el,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=pe.T,pe.T=null;var l=Le.p;Le.p=2;var m=kt;kt|=4;try{h0(n,s.alternate,s)}finally{kt=m,Le.p=l,pe.T=o}}tr=3}}function M0(){if(tr===4||tr===3){tr=0,Nu();var n=Ya,s=el,o=tl,l=T0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tr=5:(tr=0,el=Ya=null,k0(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Qa=null),ba(o),s=s.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Nt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=pe.T,m=Le.p,Le.p=2,pe.T=null;try{for(var y=n.onRecoverableError,S=0;S<l.length;S++){var C=l[S];y(C.value,{componentStack:C.stack})}}finally{pe.T=s,Le.p=m}}(tl&3)!==0&&jf(),_s(n),m=n.pendingLanes,(o&4194090)!==0&&(m&42)!==0?n===Bp?Tc++:(Tc=0,Bp=n):Tc=0,wc(0)}}function k0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,nc(s)))}function jf(n){return N0(),V0(),M0(),L0()}function L0(){if(tr!==5)return!1;var n=Ya,s=Lp;Lp=0;var o=ba(tl),l=pe.T,m=Le.p;try{Le.p=32>o?32:o,pe.T=null,o=Up,Up=null;var y=Ya,S=tl;if(tr=0,el=Ya=null,tl=0,(kt&6)!==0)throw Error(r(331));var C=kt;if(kt|=4,b0(y.current),y0(y,y.current,S,o),kt=C,wc(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Nt,y)}catch{}return!0}finally{Le.p=m,pe.T=l,k0(n,s)}}function U0(n,s,o){s=Je(o,s),s=yp(n.stateNode,s,2),n=Ua(n,s,2),n!==null&&(hi(n,2),_s(n))}function Gt(n,s,o){if(n.tag===3)U0(n,n,o);else for(;s!==null;){if(s.tag===3){U0(s,n,o);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qa===null||!Qa.has(l))){n=Je(o,n),o=q_(2),l=Ua(s,o,2),l!==null&&(F_(o,l,s,n),hi(l,2),_s(l));break}}s=s.return}}function Fp(n,s,o){var l=n.pingCache;if(l===null){l=n.pingCache=new yI;var m=new Set;l.set(s,m)}else m=l.get(s),m===void 0&&(m=new Set,l.set(s,m));m.has(o)||(Np=!0,m.add(o),n=TI.bind(null,n,s,o),s.then(n,n))}function TI(n,s,o){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(Rt&o)===o&&(fn===4||fn===3&&(Rt&62914560)===Rt&&300>Ir()-kp?(kt&2)===0&&nl(n,0):Vp|=o,Zu===Rt&&(Zu=0)),_s(n)}function B0(n,s){s===0&&(s=Ue()),n=$i(n,s),n!==null&&(hi(n,s),_s(n))}function wI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),B0(n,o)}function SI(n,s){var o=0;switch(n.tag){case 13:var l=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),B0(n,o)}function AI(n,s){return zr(n,s)}var qf=null,il=null,Kp=!1,Ff=!1,Hp=!1,$o=0;function _s(n){n!==il&&n.next===null&&(il===null?qf=il=n:il=il.next=n),Ff=!0,Kp||(Kp=!0,RI())}function wc(n,s){if(!Hp&&Ff){Hp=!0;do for(var o=!1,l=qf;l!==null;){if(n!==0){var m=l.pendingLanes;if(m===0)var y=0;else{var S=l.suspendedLanes,C=l.pingedLanes;y=(1<<31-ln(42|n)+1)-1,y&=m&~(S&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,F0(l,y))}else y=Rt,y=qe(l,l===Xt?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||qr(l,y)||(o=!0,F0(l,y));l=l.next}while(o);Hp=!1}}function II(){z0()}function z0(){Ff=Kp=!1;var n=0;$o!==0&&(MI()&&(n=$o),$o=0);for(var s=Ir(),o=null,l=qf;l!==null;){var m=l.next,y=j0(l,s);y===0?(l.next=null,o===null?qf=m:o.next=m,m===null&&(il=o)):(o=l,(n!==0||(y&3)!==0)&&(Ff=!0)),l=m}wc(n)}function j0(n,s){for(var o=n.suspendedLanes,l=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-ln(y),C=1<<S,M=m[S];M===-1?((C&o)===0||(C&l)!==0)&&(m[S]=Fr(C,s)):M<=s&&(n.expiredLanes|=C),y&=~C}if(s=Xt,o=Rt,o=qe(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,o===0||n===s&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ds(l),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||qr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(l!==null&&Ds(l),ba(o)){case 2:case 8:o=rs;break;case 32:o=Ln;break;case 268435456:o=li;break;default:o=Ln}return l=q0.bind(null,n),o=zr(o,l),n.callbackPriority=s,n.callbackNode=o,s}return l!==null&&l!==null&&Ds(l),n.callbackPriority=2,n.callbackNode=null,2}function q0(n,s){if(tr!==0&&tr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(jf()&&n.callbackNode!==o)return null;var l=Rt;return l=qe(n,n===Xt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(S0(n,l,s),j0(n,Ir()),n.callbackNode!=null&&n.callbackNode===o?q0.bind(null,n):null)}function F0(n,s){if(jf())return null;S0(n,s,!0)}function RI(){LI(function(){(kt&6)!==0?zr(So,II):z0()})}function Gp(){return $o===0&&($o=ss()),$o}function K0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bi(""+n)}function H0(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function CI(n,s,o,l,m){if(s==="submit"&&o&&o.stateNode===m){var y=K0((m[ut]||null).action),S=l.submitter;S&&(s=(s=S[ut]||null)?K0(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var C=new Aa("action","action",null,l,m);n.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($o!==0){var M=S?H0(m,S):new FormData(m);fp(o,{pending:!0,data:M,method:m.method,action:y},null,M)}}else typeof y=="function"&&(C.preventDefault(),M=S?H0(m,S):new FormData(m),fp(o,{pending:!0,data:M,method:m.method,action:y},y,M))},currentTarget:m}]})}}for(var Qp=0;Qp<ke.length;Qp++){var Yp=ke[Qp],xI=Yp.toLowerCase(),DI=Yp[0].toUpperCase()+Yp.slice(1);De(xI,"on"+DI)}De(se,"onAnimationEnd"),De(he,"onAnimationIteration"),De(fe,"onAnimationStart"),De("dblclick","onDoubleClick"),De("focusin","onFocus"),De("focusout","onBlur"),De(ve,"onTransitionRun"),De(Oe,"onTransitionStart"),De(Me,"onTransitionCancel"),De(xe,"onTransitionEnd"),Qr("onMouseEnter",["mouseout","mouseover"]),Qr("onMouseLeave",["mouseout","mouseover"]),Qr("onPointerEnter",["pointerout","pointerover"]),Qr("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sc));function G0(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var l=n[o],m=l.event;l=l.listeners;e:{var y=void 0;if(s)for(var S=l.length-1;0<=S;S--){var C=l[S],M=C.instance,ie=C.currentTarget;if(C=C.listener,M!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=ie;try{y(m)}catch(_e){Df(_e)}m.currentTarget=null,y=M}else for(S=0;S<l.length;S++){if(C=l[S],M=C.instance,ie=C.currentTarget,C=C.listener,M!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=ie;try{y(m)}catch(_e){Df(_e)}m.currentTarget=null,y=M}}}}function bt(n,s){var o=s[Ao];o===void 0&&(o=s[Ao]=new Set);var l=n+"__bubble";o.has(l)||(Q0(s,n,2,!1),o.add(l))}function $p(n,s,o){var l=0;s&&(l|=4),Q0(o,n,l,s)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function Xp(n){if(!n[Kf]){n[Kf]=!0,Ta.forEach(function(o){o!=="selectionchange"&&(OI.has(o)||$p(o,!1,n),$p(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Kf]||(s[Kf]=!0,$p("selectionchange",!1,s))}}function Q0(n,s,o,l){switch(yb(s)){case 2:var m=iR;break;case 8:m=sR;break;default:m=cg}o=m.bind(null,s,o,n),m=void 0,!Or||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),l?m!==void 0?n.addEventListener(s,o,{capture:!0,passive:m}):n.addEventListener(s,o,!0):m!==void 0?n.addEventListener(s,o,{passive:m}):n.addEventListener(s,o,!1)}function Wp(n,s,o,l,m){var y=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var C=l.stateNode.containerInfo;if(C===m)break;if(S===4)for(S=l.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;C!==null;){if(S=ir(C),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){l=y=S;continue e}C=C.parentNode}}l=l.return}cs(function(){var ie=y,_e=br(o),Ee=[];e:{var ue=Pe.get(n);if(ue!==void 0){var le=Aa,st=n;switch(n){case"keypress":if(Nr(o)===0)break e;case"keydown":case"keyup":le=Qi;break;case"focusin":st="focus",le=Fi;break;case"focusout":st="blur",le=Fi;break;case"beforeblur":case"afterblur":le=Fi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Da;break;case se:case he:case fe:le=Bs;break;case xe:le=Oa;break;case"scroll":case"scrollend":le=Ls;break;case"wheel":le=Yi;break;case"copy":case"cut":case"paste":le=Ki;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=xa;break;case"toggle":case"beforetoggle":le=Vo}var nt=(s&4)!==0,Kt=!nt&&(n==="scroll"||n==="scrollend"),J=nt?ue!==null?ue+"Capture":null:ue;nt=[];for(var H=ie,re;H!==null;){var be=H;if(re=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||re===null||J===null||(be=zi(H,J),be!=null&&nt.push(Ac(H,be,re))),Kt)break;H=H.return}0<nt.length&&(ue=new le(ue,st,null,o,_e),Ee.push({event:ue,listeners:nt}))}}if((s&7)===0){e:{if(ue=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",ue&&o!==zn&&(st=o.relatedTarget||o.fromElement)&&(ir(st)||st[Ot]))break e;if((le||ue)&&(ue=_e.window===_e?_e:(ue=_e.ownerDocument)?ue.defaultView||ue.parentWindow:window,le?(st=o.relatedTarget||o.toElement,le=ie,st=st?ir(st):null,st!==null&&(Kt=u(st),nt=st.tag,st!==Kt||nt!==5&&nt!==27&&nt!==6)&&(st=null)):(le=null,st=ie),le!==st)){if(nt=or,be="onMouseLeave",J="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(nt=xa,be="onPointerLeave",J="onPointerEnter",H="pointer"),Kt=le==null?ue:yr(le),re=st==null?ue:yr(st),ue=new nt(be,H+"leave",le,o,_e),ue.target=Kt,ue.relatedTarget=re,be=null,ir(_e)===ie&&(nt=new nt(J,H+"enter",st,o,_e),nt.target=re,nt.relatedTarget=Kt,be=nt),Kt=be,le&&st)t:{for(nt=le,J=st,H=0,re=nt;re;re=sl(re))H++;for(re=0,be=J;be;be=sl(be))re++;for(;0<H-re;)nt=sl(nt),H--;for(;0<re-H;)J=sl(J),re--;for(;H--;){if(nt===J||J!==null&&nt===J.alternate)break t;nt=sl(nt),J=sl(J)}nt=null}else nt=null;le!==null&&Y0(Ee,ue,le,nt,!1),st!==null&&Kt!==null&&Y0(Ee,Kt,st,nt,!0)}}e:{if(ue=ie?yr(ie):window,le=ue.nodeName&&ue.nodeName.toLowerCase(),le==="select"||le==="input"&&ue.type==="file")var Ke=ko;else if(sn(ue))if(Si)Ke=Va;else{Ke=js;var gt=lf}else le=ue.nodeName,!le||le.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?ie&&xo(ie.elementType)&&(Ke=ko):Ke=Wl;if(Ke&&(Ke=Ke(n,ie))){Ti(Ee,Ke,o,_e);break e}gt&&gt(n,ue,ie),n==="focusout"&&ie&&ue.type==="number"&&ie.memoizedProps.value!=null&&Yr(ue,"number",ue.value)}switch(gt=ie?yr(ie):window,n){case"focusin":(sn(gt)||gt.contentEditable==="true")&&(N=gt,K=ie,G=null);break;case"focusout":G=K=N=null;break;case"mousedown":X=!0;break;case"contextmenu":case"mouseup":case"dragend":X=!1,U(Ee,o,_e);break;case"selectionchange":if(O)break;case"keydown":case"keyup":U(Ee,o,_e)}var Xe;if(Mr)e:{switch(n){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else vt?de(n,o)&&(rt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(w&&o.locale!=="ko"&&(vt||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&vt&&(Xe=qi()):(Pr=_e,ji="value"in Pr?Pr.value:Pr.textContent,vt=!0)),gt=Hf(ie,rt),0<gt.length&&(rt=new zs(rt,n,null,o,_e),Ee.push({event:rt,listeners:gt}),Xe?rt.data=Xe:(Xe=Ne(o),Xe!==null&&(rt.data=Xe)))),(Xe=b?cn(n,o):wt(n,o))&&(rt=Hf(ie,"onBeforeInput"),0<rt.length&&(gt=new zs("onBeforeInput","beforeinput",null,o,_e),Ee.push({event:gt,listeners:rt}),gt.data=Xe)),CI(Ee,n,ie,o,_e)}G0(Ee,s)})}function Ac(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Hf(n,s){for(var o=s+"Capture",l=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=zi(n,o),m!=null&&l.unshift(Ac(n,m,y)),m=zi(n,s),m!=null&&l.push(Ac(n,m,y))),n.tag===3)return l;n=n.return}return[]}function sl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Y0(n,s,o,l,m){for(var y=s._reactName,S=[];o!==null&&o!==l;){var C=o,M=C.alternate,ie=C.stateNode;if(C=C.tag,M!==null&&M===l)break;C!==5&&C!==26&&C!==27||ie===null||(M=ie,m?(ie=zi(o,y),ie!=null&&S.unshift(Ac(o,ie,M))):m||(ie=zi(o,y),ie!=null&&S.push(Ac(o,ie,M)))),o=o.return}S.length!==0&&n.push({event:s,listeners:S})}var PI=/\r\n?/g,NI=/\u0000|\uFFFD/g;function $0(n){return(typeof n=="string"?n:""+n).replace(PI,`
`).replace(NI,"")}function X0(n,s){return s=$0(s),$0(n)===s}function Gf(){}function Ft(n,s,o,l,m,y){switch(o){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Dr(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Dr(n,""+l);break;case"className":_r(n,"class",l);break;case"tabIndex":_r(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(n,o,l);break;case"style":Co(n,l,y);break;case"data":if(s!=="object"){_r(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=Bi(""+l),n.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&Ft(n,s,"name",m.name,m,null),Ft(n,s,"formEncType",m.formEncType,m,null),Ft(n,s,"formMethod",m.formMethod,m,null),Ft(n,s,"formTarget",m.formTarget,m,null)):(Ft(n,s,"encType",m.encType,m,null),Ft(n,s,"method",m.method,m,null),Ft(n,s,"target",m.target,m,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=Bi(""+l),n.setAttribute(o,l);break;case"onClick":l!=null&&(n.onclick=Gf);break;case"onScroll":l!=null&&bt("scroll",n);break;case"onScrollEnd":l!=null&&bt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}o=Bi(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""+l):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":l===!0?n.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,l):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(o,l):n.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(o):n.setAttribute(o,l);break;case"popover":bt("beforetoggle",n),bt("toggle",n),vr(n,"popover",l);break;case"xlinkActuate":mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":mn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":mn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":mn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":mn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":vr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Jn.get(o)||o,vr(n,o,l))}}function Jp(n,s,o,l,m,y){switch(o){case"style":Co(n,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof l=="string"?Dr(n,l):(typeof l=="number"||typeof l=="bigint")&&Dr(n,""+l);break;case"onScroll":l!=null&&bt("scroll",n);break;case"onScrollEnd":l!=null&&bt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),y=n[ut]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(s,y,m),typeof l=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,l,m);break e}o in n?n[o]=l:l===!0?n.setAttribute(o,""):vr(n,o,l)}}}function nr(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",n),bt("load",n);var l=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":l=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ft(n,s,y,S,o,null)}}m&&Ft(n,s,"srcSet",o.srcSet,o,null),l&&Ft(n,s,"src",o.src,o,null);return;case"input":bt("invalid",n);var C=y=S=m=null,M=null,ie=null;for(l in o)if(o.hasOwnProperty(l)){var _e=o[l];if(_e!=null)switch(l){case"name":m=_e;break;case"type":S=_e;break;case"checked":M=_e;break;case"defaultChecked":ie=_e;break;case"value":y=_e;break;case"defaultValue":C=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,s));break;default:Ft(n,s,l,_e,o,null)}}os(n,y,C,M,ie,S,m,!1),pi(n);return;case"select":bt("invalid",n),l=S=y=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":y=C;break;case"defaultValue":S=C;break;case"multiple":l=C;default:Ft(n,s,m,C,o,null)}s=y,o=S,n.multiple=!!l,s!=null?gi(n,!!l,s,!1):o!=null&&gi(n,!!l,o,!0);return;case"textarea":bt("invalid",n),y=m=l=null;for(S in o)if(o.hasOwnProperty(S)&&(C=o[S],C!=null))switch(S){case"value":l=C;break;case"defaultValue":m=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:Ft(n,s,S,C,o,null)}us(n,l,m,y),pi(n);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(l=o[M],l!=null))switch(M){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(n,s,M,l,o,null)}return;case"dialog":bt("beforetoggle",n),bt("toggle",n),bt("cancel",n),bt("close",n);break;case"iframe":case"object":bt("load",n);break;case"video":case"audio":for(l=0;l<Sc.length;l++)bt(Sc[l],n);break;case"image":bt("error",n),bt("load",n);break;case"details":bt("toggle",n);break;case"embed":case"source":case"link":bt("error",n),bt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in o)if(o.hasOwnProperty(ie)&&(l=o[ie],l!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ft(n,s,ie,l,o,null)}return;default:if(xo(s)){for(_e in o)o.hasOwnProperty(_e)&&(l=o[_e],l!==void 0&&Jp(n,s,_e,l,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(l=o[C],l!=null&&Ft(n,s,C,l,o,null))}function VI(n,s,o,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,C=null,M=null,ie=null,_e=null;for(le in o){var Ee=o[le];if(o.hasOwnProperty(le)&&Ee!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":M=Ee;default:l.hasOwnProperty(le)||Ft(n,s,le,null,l,Ee)}}for(var ue in l){var le=l[ue];if(Ee=o[ue],l.hasOwnProperty(ue)&&(le!=null||Ee!=null))switch(ue){case"type":y=le;break;case"name":m=le;break;case"checked":ie=le;break;case"defaultChecked":_e=le;break;case"value":S=le;break;case"defaultValue":C=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:le!==Ee&&Ft(n,s,ue,le,l,Ee)}}Bn(n,S,C,M,ie,_e,y,m);return;case"select":le=S=C=ue=null;for(y in o)if(M=o[y],o.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":le=M;default:l.hasOwnProperty(y)||Ft(n,s,y,null,l,M)}for(m in l)if(y=l[m],M=o[m],l.hasOwnProperty(m)&&(y!=null||M!=null))switch(m){case"value":ue=y;break;case"defaultValue":C=y;break;case"multiple":S=y;default:y!==M&&Ft(n,s,m,y,l,M)}s=C,o=S,l=le,ue!=null?gi(n,!!o,ue,!1):!!l!=!!o&&(s!=null?gi(n,!!o,s,!0):gi(n,!!o,o?[]:"",!1));return;case"textarea":le=ue=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ft(n,s,C,null,l,m)}for(S in l)if(m=l[S],y=o[S],l.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":ue=m;break;case"defaultValue":le=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Ft(n,s,S,m,l,y)}It(n,ue,le);return;case"option":for(var st in o)if(ue=o[st],o.hasOwnProperty(st)&&ue!=null&&!l.hasOwnProperty(st))switch(st){case"selected":n.selected=!1;break;default:Ft(n,s,st,null,l,ue)}for(M in l)if(ue=l[M],le=o[M],l.hasOwnProperty(M)&&ue!==le&&(ue!=null||le!=null))switch(M){case"selected":n.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Ft(n,s,M,ue,l,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in o)ue=o[nt],o.hasOwnProperty(nt)&&ue!=null&&!l.hasOwnProperty(nt)&&Ft(n,s,nt,null,l,ue);for(ie in l)if(ue=l[ie],le=o[ie],l.hasOwnProperty(ie)&&ue!==le&&(ue!=null||le!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,s));break;default:Ft(n,s,ie,ue,l,le)}return;default:if(xo(s)){for(var Kt in o)ue=o[Kt],o.hasOwnProperty(Kt)&&ue!==void 0&&!l.hasOwnProperty(Kt)&&Jp(n,s,Kt,void 0,l,ue);for(_e in l)ue=l[_e],le=o[_e],!l.hasOwnProperty(_e)||ue===le||ue===void 0&&le===void 0||Jp(n,s,_e,ue,l,le);return}}for(var J in o)ue=o[J],o.hasOwnProperty(J)&&ue!=null&&!l.hasOwnProperty(J)&&Ft(n,s,J,null,l,ue);for(Ee in l)ue=l[Ee],le=o[Ee],!l.hasOwnProperty(Ee)||ue===le||ue==null&&le==null||Ft(n,s,Ee,ue,l,le)}var Zp=null,eg=null;function Qf(n){return n.nodeType===9?n:n.ownerDocument}function W0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function tg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ng=null;function MI(){var n=window.event;return n&&n.type==="popstate"?n===ng?!1:(ng=n,!0):(ng=null,!1)}var Z0=typeof setTimeout=="function"?setTimeout:void 0,kI=typeof clearTimeout=="function"?clearTimeout:void 0,eb=typeof Promise=="function"?Promise:void 0,LI=typeof queueMicrotask=="function"?queueMicrotask:typeof eb<"u"?function(n){return eb.resolve(null).then(n).catch(UI)}:Z0;function UI(n){setTimeout(function(){throw n})}function Xa(n){return n==="head"}function tb(n,s){var o=s,l=0,m=0;do{var y=o.nextSibling;if(n.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<l&&8>l){o=l;var S=n.ownerDocument;if(o&1&&Ic(S.documentElement),o&2&&Ic(S.body),o&4)for(o=S.head,Ic(o),S=o.firstChild;S;){var C=S.nextSibling,M=S.nodeName;S[Vs]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=C}}if(m===0){n.removeChild(y),Vc(s);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:l=o.charCodeAt(0)-48;else l=0;o=y}while(o);Vc(s)}function rg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rg(o),$n(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function BI(n,s,o,l){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Vs])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Wi(n.nextSibling),n===null)break}return null}function zI(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Wi(n.nextSibling),n===null))return null;return n}function ig(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function jI(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var l=function(){s(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Wi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var sg=null;function nb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function rb(n,s,o){switch(s=Qf(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Ic(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);$n(n)}var Di=new Map,ib=new Set;function Yf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ea=Le.d;Le.d={f:qI,r:FI,D:KI,C:HI,L:GI,m:QI,X:$I,S:YI,M:XI};function qI(){var n=ea.f(),s=Bf();return n||s}function FI(n){var s=On(n);s!==null&&s.tag===5&&s.type==="form"?S_(s):ea.r(n)}var al=typeof document>"u"?null:document;function sb(n,s,o){var l=al;if(l&&typeof s=="string"&&s){var m=en(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),ib.has(m)||(ib.add(m),n={rel:n,crossOrigin:o,href:s},l.querySelector(m)===null&&(s=l.createElement("link"),nr(s,"link",n),Vt(s),l.head.appendChild(s)))}}function KI(n){ea.D(n),sb("dns-prefetch",n,null)}function HI(n,s){ea.C(n,s),sb("preconnect",n,s)}function GI(n,s,o){ea.L(n,s,o);var l=al;if(l&&n&&s){var m='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+en(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+en(o.imageSizes)+'"]')):m+='[href="'+en(n)+'"]';var y=m;switch(s){case"style":y=ol(n);break;case"script":y=ul(n)}Di.has(y)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Di.set(y,n),l.querySelector(m)!==null||s==="style"&&l.querySelector(Rc(y))||s==="script"&&l.querySelector(Cc(y))||(s=l.createElement("link"),nr(s,"link",n),Vt(s),l.head.appendChild(s)))}}function QI(n,s){ea.m(n,s);var o=al;if(o&&n){var l=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+en(l)+'"][href="'+en(n)+'"]',y=m;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ul(n)}if(!Di.has(y)&&(n=T({rel:"modulepreload",href:n},s),Di.set(y,n),o.querySelector(m)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cc(y)))return}l=o.createElement("link"),nr(l,"link",n),Vt(l),o.head.appendChild(l)}}}function YI(n,s,o){ea.S(n,s,o);var l=al;if(l&&n){var m=Xn(l).hoistableStyles,y=ol(n);s=s||"default";var S=m.get(y);if(!S){var C={loading:0,preload:null};if(S=l.querySelector(Rc(y)))C.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Di.get(y))&&ag(n,o);var M=S=l.createElement("link");Vt(M),nr(M,"link",n),M._p=new Promise(function(ie,_e){M.onload=ie,M.onerror=_e}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,$f(S,s,l)}S={type:"stylesheet",instance:S,count:1,state:C},m.set(y,S)}}}function $I(n,s){ea.X(n,s);var o=al;if(o&&n){var l=Xn(o).hoistableScripts,m=ul(n),y=l.get(m);y||(y=o.querySelector(Cc(m)),y||(n=T({src:n,async:!0},s),(s=Di.get(m))&&og(n,s),y=o.createElement("script"),Vt(y),nr(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function XI(n,s){ea.M(n,s);var o=al;if(o&&n){var l=Xn(o).hoistableScripts,m=ul(n),y=l.get(m);y||(y=o.querySelector(Cc(m)),y||(n=T({src:n,async:!0,type:"module"},s),(s=Di.get(m))&&og(n,s),y=o.createElement("script"),Vt(y),nr(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function ab(n,s,o,l){var m=(m=et.current)?Yf(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ol(o.href),o=Xn(m).hoistableStyles,l=o.get(s),l||(l={type:"style",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ol(o.href);var y=Xn(m).hoistableStyles,S=y.get(n);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=m.querySelector(Rc(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Di.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Di.set(n,o),y||WI(m,n,o,S.state))),s&&l===null)throw Error(r(528,""));return S}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ul(o),o=Xn(m).hoistableScripts,l=o.get(s),l||(l={type:"script",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ol(n){return'href="'+en(n)+'"'}function Rc(n){return'link[rel="stylesheet"]['+n+"]"}function ob(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function WI(n,s,o,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),nr(s,"link",o),Vt(s),n.head.appendChild(s))}function ul(n){return'[src="'+en(n)+'"]'}function Cc(n){return"script[async]"+n}function ub(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+en(o.href)+'"]');if(l)return s.instance=l,Vt(l),l;var m=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Vt(l),nr(l,"style",m),$f(l,o.precedence,n),s.instance=l;case"stylesheet":m=ol(o.href);var y=n.querySelector(Rc(m));if(y)return s.state.loading|=4,s.instance=y,Vt(y),y;l=ob(o),(m=Di.get(m))&&ag(l,m),y=(n.ownerDocument||n).createElement("link"),Vt(y);var S=y;return S._p=new Promise(function(C,M){S.onload=C,S.onerror=M}),nr(y,"link",l),s.state.loading|=4,$f(y,o.precedence,n),s.instance=y;case"script":return y=ul(o.src),(m=n.querySelector(Cc(y)))?(s.instance=m,Vt(m),m):(l=o,(m=Di.get(y))&&(l=T({},o),og(l,m)),n=n.ownerDocument||n,m=n.createElement("script"),Vt(m),nr(m,"link",l),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,$f(l,o.precedence,n));return s.instance}function $f(n,s,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=l.length?l[l.length-1]:null,y=m,S=0;S<l.length;S++){var C=l[S];if(C.dataset.precedence===s)y=C;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function ag(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function og(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Xf=null;function lb(n,s,o){if(Xf===null){var l=new Map,m=Xf=new Map;m.set(o,l)}else m=Xf,l=m.get(o),l||(l=new Map,m.set(o,l));if(l.has(n))return l;for(l.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var y=o[m];if(!(y[Vs]||y[Zt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=n+S;var C=l.get(S);C?C.push(y):l.set(S,[y])}}return l}function cb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function JI(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function hb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var xc=null;function ZI(){}function eR(n,s,o){if(xc===null)throw Error(r(475));var l=xc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=ol(o.href),y=n.querySelector(Rc(m));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Wf.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=y,Vt(y);return}y=n.ownerDocument||n,o=ob(o),(m=Di.get(m))&&ag(o,m),y=y.createElement("link"),Vt(y);var S=y;S._p=new Promise(function(C,M){S.onload=C,S.onerror=M}),nr(y,"link",o),s.instance=y}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Wf.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function tR(){if(xc===null)throw Error(r(475));var n=xc;return n.stylesheets&&n.count===0&&ug(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&ug(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Wf(){if(this.count--,this.count===0){if(this.stylesheets)ug(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jf=null;function ug(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jf=new Map,s.forEach(nR,n),Jf=null,Wf.call(n))}function nR(n,s){if(!(s.state.loading&4)){var o=Jf.get(n);if(o)var l=o.get(null);else{o=new Map,Jf.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),l=S)}l&&o.set(null,l)}m=s.instance,S=m.getAttribute("data-precedence"),y=o.get(S)||l,y===l&&o.set(null,m),o.set(S,m),this.count++,l=Wf.bind(this),m.addEventListener("load",l),m.addEventListener("error",l),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var Dc={$$typeof:ae,Provider:null,Consumer:null,_currentValue:Qe,_currentValue2:Qe,_threadCount:0};function rR(n,s,o,l,m,y,S,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=l,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function fb(n,s,o,l,m,y,S,C,M,ie,_e,Ee){return n=new rR(n,s,o,S,C,M,ie,Ee),s=1,y===!0&&(s|=24),y=Jr(3,null,null,s),n.current=y,y.stateNode=n,s=Fm(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:l,isDehydrated:o,cache:s},Qm(y),n}function db(n){return n?(n=ms,n):ms}function mb(n,s,o,l,m,y){m=db(m),l.context===null?l.context=m:l.pendingContext=m,l=La(s),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=Ua(n,l,s),o!==null&&(ri(o,n,s),ac(o,n,s))}function pb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function lg(n,s){pb(n,s),(n=n.alternate)&&pb(n,s)}function gb(n){if(n.tag===13){var s=$i(n,67108864);s!==null&&ri(s,n,67108864),lg(n,67108864)}}var Zf=!0;function iR(n,s,o,l){var m=pe.T;pe.T=null;var y=Le.p;try{Le.p=2,cg(n,s,o,l)}finally{Le.p=y,pe.T=m}}function sR(n,s,o,l){var m=pe.T;pe.T=null;var y=Le.p;try{Le.p=8,cg(n,s,o,l)}finally{Le.p=y,pe.T=m}}function cg(n,s,o,l){if(Zf){var m=hg(l);if(m===null)Wp(n,s,l,ed,o),vb(n,l);else if(oR(m,n,s,o,l))l.stopPropagation();else if(vb(n,l),s&4&&-1<aR.indexOf(n)){for(;m!==null;){var y=On(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=wn(y.pendingLanes);if(S!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var M=1<<31-ln(S);C.entanglements[1]|=M,S&=~M}_s(y),(kt&6)===0&&(Lf=Ir()+500,wc(0))}}break;case 13:C=$i(y,2),C!==null&&ri(C,y,2),Bf(),lg(y,2)}if(y=hg(l),y===null&&Wp(n,s,l,ed,o),y===m)break;m=y}m!==null&&l.stopPropagation()}else Wp(n,s,l,null,o)}}function hg(n){return n=br(n),fg(n)}var ed=null;function fg(n){if(ed=null,n=ir(n),n!==null){var s=u(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ed=n,null}function yb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xl()){case So:return 2;case rs:return 8;case Ln:case Vu:return 32;case li:return 268435456;default:return 32}default:return 32}}var dg=!1,Wa=null,Ja=null,Za=null,Oc=new Map,Pc=new Map,eo=[],aR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vb(n,s){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Nc(n,s,o,l,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:o,eventSystemFlags:l,nativeEvent:y,targetContainers:[m]},s!==null&&(s=On(s),s!==null&&gb(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function oR(n,s,o,l,m){switch(s){case"focusin":return Wa=Nc(Wa,n,s,o,l,m),!0;case"dragenter":return Ja=Nc(Ja,n,s,o,l,m),!0;case"mouseover":return Za=Nc(Za,n,s,o,l,m),!0;case"pointerover":var y=m.pointerId;return Oc.set(y,Nc(Oc.get(y)||null,n,s,o,l,m)),!0;case"gotpointercapture":return y=m.pointerId,Pc.set(y,Nc(Pc.get(y)||null,n,s,o,l,m)),!0}return!1}function _b(n){var s=ir(n.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Mi(n.priority,function(){if(o.tag===13){var l=ni();l=as(l);var m=$i(o,l);m!==null&&ri(m,o,l),lg(o,l)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function td(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=hg(n.nativeEvent);if(o===null){o=n.nativeEvent;var l=new o.constructor(o.type,o);zn=l,o.target.dispatchEvent(l),zn=null}else return s=On(o),s!==null&&gb(s),n.blockedOn=o,!1;s.shift()}return!0}function bb(n,s,o){td(n)&&o.delete(s)}function uR(){dg=!1,Wa!==null&&td(Wa)&&(Wa=null),Ja!==null&&td(Ja)&&(Ja=null),Za!==null&&td(Za)&&(Za=null),Oc.forEach(bb),Pc.forEach(bb)}function nd(n,s){n.blockedOn===s&&(n.blockedOn=null,dg||(dg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,uR)))}var rd=null;function Eb(n){rd!==n&&(rd=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){rd===n&&(rd=null);for(var s=0;s<n.length;s+=3){var o=n[s],l=n[s+1],m=n[s+2];if(typeof l!="function"){if(fg(l||o)===null)continue;break}var y=On(o);y!==null&&(n.splice(s,3),s-=3,fp(y,{pending:!0,data:m,method:o.method,action:l},l,m))}}))}function Vc(n){function s(M){return nd(M,n)}Wa!==null&&nd(Wa,n),Ja!==null&&nd(Ja,n),Za!==null&&nd(Za,n),Oc.forEach(s),Pc.forEach(s);for(var o=0;o<eo.length;o++){var l=eo[o];l.blockedOn===n&&(l.blockedOn=null)}for(;0<eo.length&&(o=eo[0],o.blockedOn===null);)_b(o),o.blockedOn===null&&eo.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var m=o[l],y=o[l+1],S=m[ut]||null;if(typeof y=="function")S||Eb(o);else if(S){var C=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[ut]||null)C=S.formAction;else if(fg(m)!==null)continue}else C=S.action;typeof C=="function"?o[l+1]=C:(o.splice(l,3),l-=3),Eb(o)}}}function mg(n){this._internalRoot=n}id.prototype.render=mg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,l=ni();mb(o,l,n,s,null,null)},id.prototype.unmount=mg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;mb(n.current,2,null,n,null,null),Bf(),s[Ot]=null}};function id(n){this._internalRoot=n}id.prototype.unstable_scheduleHydration=function(n){if(n){var s=gr();n={blockedOn:null,target:n,priority:s};for(var o=0;o<eo.length&&s!==0&&s<eo[o].priority;o++);eo.splice(o,0,n),o===0&&_b(n)}};var Tb=e.version;if(Tb!=="19.1.0")throw Error(r(527,Tb,"19.1.0"));Le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var lR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{Nt=sd.inject(lR),yt=sd}catch{}}return kc.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,l="",m=U_,y=B_,S=z_,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=fb(n,1,!1,null,null,o,l,m,y,S,C,null),n[Ot]=s.current,Xp(n),new mg(s)},kc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var l=!1,m="",y=U_,S=B_,C=z_,M=null,ie=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(ie=o.formState)),s=fb(n,1,!0,s,o??null,l,m,y,S,C,M,ie),s.context=db(null),o=s.current,l=ni(),l=as(l),m=La(l),m.callback=null,Ua(o,m,l),o=l,s.current.lanes=o,hi(s,o),_s(s),n[Ot]=s.current,Xp(n),new id(s)},kc.version="19.1.0",kc}var Nb;function TR(){if(Nb)return yg.exports;Nb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),yg.exports=ER(),yg.exports}var wR=TR();const SR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAKlBMVEVHcEwdTtUeTtMjTsYkT8YkTLsmTcMeTtQfTc4gTs8dTtYhTckfTs8dTtf95L3bAAAADXRSTlMA98E7RwoX2FR06SmP7PIPHQAAAOtJREFUSMdjYGCbJHsXD7iomcDAwGCEVw1QlTIDA3PtXQLgugFD0l2CQI1hImFFkgy6hBVdYpAlrOgiw10iwKgi2iqSqiWoSFzTu5GQIhkzBgZHQoqEGYatoutKStqg7KqkpKSLU9GN0NAAoCLW0NDQXTgVSTDAweBRRIzDkYJAkVBg+o7gpDLUFRkSo2gXIUUiQEU8wFpCFp+iG6BE13PmxER8iu5Ak68hPkXXEyCKHPGWdBOIUSRBjKJb04hQdPf6iW1pmzt1CRTRF5eXLxytyshSRFQzhKgGDVFNI6IaWUQ114hq+BHThAQAqJPZu5Aizg0AAAAASUVORK5CYII=",vw=ge.createContext(void 0);function AR(){const{user:i}=ge.useContext(vw);return console.log(i),Se.jsxs("div",{className:"w-64 bg-white h-screen p-4 shadow-md max-md:hidden",children:[Se.jsxs("div",{className:"flex align-center gap-2",children:[Se.jsx("img",{src:SR,alt:"Tell logo",className:"w-6 h-6"}),Se.jsx("p",{className:"text-1xl",children:"Tell - Spor mat skikkelig"})]}),Se.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 border-b-1 pb-5 border-gray-200"}),Se.jsxs("ul",{className:"space-y-2 w-full",children:[Se.jsx("li",{className:"w-full",children:Se.jsx("a",{href:"/",className:"w-full text-left p-2 hover:bg-gray-100 rounded text-gray-900",children:"Hjem"})}),i?null:Se.jsx("li",{children:Se.jsx("a",{href:"/login",className:"w-full text-left p-2 hover:bg-gray-100 rounded text-gray-900",children:"Logg på"})}),Se.jsx("li",{children:i})]})]})}function IR({message:i,onClose:e}){const[t,r]=ge.useState(!0);return ge.useEffect(()=>{const a=setTimeout(()=>{r(!1),e()},3e3);return()=>clearTimeout(a)},[e]),t?Se.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-gray-50 text-black px-4 py-2 rounded-lg shadow-lg text-sm sm:text-base z-50 animate-fade-in-out",children:i}):null}const RR=[{id:1,name:"Banan",calories:100,fat:.1,protein:1.2,carbs:22.4},{id:2,name:"Eple",calories:52,fat:.2,protein:.3,carbs:14},{id:3,name:"Peanøttsmør-brød",calories:280,fat:16,protein:9,carbs:24},{id:4,name:"Egg",calories:93,fat:6.6,protein:7.8,carbs:.7},{id:5,name:"Chocolate Cookie",calories:93.9,fat:4.8,protein:1,carbs:11.4},{id:6,name:"Tosti ham kaas",calories:350,fat:17,protein:19,carbs:30},{id:7,name:"Sultana kjeks (1)",calories:140,fat:4.5,protein:1.5,carbs:22},{id:8,name:"Cola (33cl)",calories:139,fat:0,protein:0,carbs:35},{id:9,name:"Apple Crumble (100g)",calories:170,fat:5,protein:1.5,carbs:30},{id:10,name:"Nudler (1 porsjon, ca. 300 kcal)",calories:300,fat:12,protein:7,carbs:40},{id:11,name:"Spelt Eierkoek (150 kcal)",calories:150,fat:3.5,protein:4,carbs:25},{id:12,name:"Smultring",calories:192,fat:11,protein:2,carbs:22},{id:13,name:"Protein Quark",calories:132,fat:.2,protein:25,carbs:6},{id:14,name:"Choco Mousse",calories:220,fat:13,protein:4,carbs:20},{id:15,name:"Chips",calories:275,fat:17,protein:3,carbs:25},{id:16,name:"Pannenkoek",calories:150,fat:5,protein:5,carbs:20},{id:17,name:"Eplejus (1 glass)",calories:117,fat:.2,protein:.1,carbs:28},{id:18,name:"Protein Shake (1 scoop + 300 ml melk)",calories:298,fat:6,protein:30,carbs:22},{id:19,name:"Drue (1 stk)",calories:3,fat:0,protein:0,carbs:.8},{id:20,name:"Margerhita Pizza",calories:940,fat:34,protein:40,carbs:108},{id:21,name:"KitKat",calories:219,fat:11,protein:2.6,carbs:27},{id:22,name:"Mandarin",calories:21,fat:.1,protein:.3,carbs:5},{id:23,name:"Øl (1 flaske)",calories:164,fat:0,protein:1.6,carbs:13},{id:24,name:"Croissant",calories:231,fat:12,protein:4.5,carbs:26},{id:25,name:"Hamburger (patty)",calories:250,fat:20,protein:17,carbs:0}];function CR({searchTerm:i,filteredFoods:e,addFood:t,setSearchTerm:r}){return Se.jsxs(Se.Fragment,{children:[Se.jsx("input",{type:"text",placeholder:"Søk etter mat...",className:"w-full p-3 sm:p-2 mb-4 border rounded text-gray-900 bg-white text-base sm:text-base",value:i,onChange:a=>r(a.target.value)}),Se.jsx("div",{className:"mb-6",children:Se.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i!==""&&e.map(a=>Se.jsxs("div",{onClick:()=>t(a),className:"p-3 sm:p-2 bg-white rounded shadow cursor-pointer text-gray-900 text-sm sm:text-base",children:[a.name," - ",a.calories," kcal (Fat: ",a.fat,"g, Protein: ",a.protein,"g, Carbs: ",a.carbs,"g)"]},a.id))})})]})}function xR({currentDate:i,changeDate:e}){return Se.jsxs("div",{className:"mb-4 flex justify-center gap-4",children:[Se.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2  text-white rounded",children:Se.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Se.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Se.jsx("span",{className:"text-gray-900 mt-2",onClick:()=>e(0),children:i}),Se.jsx("button",{onClick:()=>e(1),className:"px-4 py-2  text-white rounded ",children:Se.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Se.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}function DR({totals:i,goals:e}){const t=Math.min(i.calories/e.calories*100,100),r=45,a=2*Math.PI*r,u=a-t/100*a;function c(d,p){return d>p?d-p:p-d}return Se.jsxs("div",{className:"flex flex-col items-center mb-6 mt-6",children:[Se.jsxs("div",{className:"w-48 h-48 sm:w-32 sm:h-32 relative flex items-center justify-center",children:[Se.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[Se.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#e5e7eb",strokeWidth:"1"}),Se.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#3b82f6",strokeWidth:"1",strokeDasharray:a,strokeDashoffset:u,className:"transition-all duration-500 ease-in-out",transform:"rotate(-90 50 50)"})]}),Se.jsxs("div",{className:"absolute flex flex-col items-center justify-center text-gray-900",children:[Se.jsx("span",{className:"text-3xl sm:text-2xl text-center",children:c(i.calories,e.calories)}),Se.jsx("span",{className:"text-md sm:text-base text-center",children:i.calories>e.calories?"over":"igjen"})]})]}),Se.jsx("div",{id:"confetti"}),Se.jsxs("div",{className:"flex flex-row justify-center gap-4 mt-4 rounded-lg bg-white shadow p-4 sm:p-6 w-full sm:w-auto",children:[Se.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Se.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Karbs"}),Se.jsxs("span",{className:"text-base sm:text-lg",children:[i.carbs.toFixed(0),"/",e.carbs,"g"]})]}),Se.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Se.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Proteiner"}),Se.jsxs("span",{className:"text-base sm:text-lg",children:[i.protein.toFixed(0),"/",e.protein,"g"]})]}),Se.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Se.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Fett"}),Se.jsxs("span",{className:"text-base sm:text-lg",children:[i.fat.toFixed(0),"/",e.fat,"g"]})]})]})]})}function OR({selectedFoods:i,currentDate:e,removeFood:t,updateQuantity:r}){const a=i[e]||[];return Se.jsxs("div",{className:"mt-4",children:[Se.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Valgte matvarer"}),a.length===0?Se.jsx("p",{className:"text-gray-500",children:"Ingen matvarer valgt for denne dagen."}):Se.jsx("ul",{className:"space-y-2",children:a.map((u,c)=>Se.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[Se.jsxs("span",{children:[u.food.name," - ",(u.food.calories*u.quantity).toFixed(0)," kcal"]}),Se.jsxs("div",{className:"flex items-center space-x-2",children:[Se.jsx("button",{onClick:()=>r(c,-1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"-"}),Se.jsx("span",{className:"w-8 text-center",children:u.quantity}),Se.jsx("button",{onClick:()=>r(c,1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"+"}),Se.jsx("button",{onClick:()=>t(c),className:"px-2 py-1 border text-sm border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"Fjern"})]})]},`${u.food.id}-${c}`))})]})}function PR(){return Se.jsx("footer",{className:"p-4 bg-white mt-10",children:Se.jsxs("div",{className:"mx-auto max-w-screen-xl text-center",children:[Se.jsx("a",{href:"/",className:"flex justify-center items-center text-2xl font-semibold text-gray-900",children:"Tell™"}),Se.jsx("p",{className:"mb-2 text-gray-500 dark:text-gray-400",children:"En enkel matsporer for deg, uten trøbbel."}),Se.jsxs("ul",{className:"flex flex-wrap justify-center items-center mb-2 text-gray-900 dark:text-white",children:[Se.jsx("li",{children:Se.jsx("a",{href:"/",className:"mr-4 hover:underline md:mr-6 ",children:"Hjem"})}),Se.jsx("li",{children:Se.jsx("a",{href:"/login",className:"mr-4 hover:underline md:mr-6",children:"Logg inn"})})]}),Se.jsxs("span",{className:"text-sm sm:text-center",children:["© ",new Date().getFullYear()," ",Se.jsx("a",{href:"/",className:"hover:underline",children:"Tell™"}),". Alle rettigheter reservert."]})]})})}var pd={exports:{}},NR=pd.exports,Vb;function VR(){return Vb||(Vb=1,function(i,e){(function(t,r){i.exports=r()})(NR,function(){var t=function(f,g){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(_[A]=E[A])})(f,g)},r=function(){return(r=Object.assign||function(f){for(var g,_=1,E=arguments.length;_<E;_++)for(var A in g=arguments[_])Object.prototype.hasOwnProperty.call(g,A)&&(f[A]=g[A]);return f}).apply(this,arguments)};function a(f,g,_){for(var E,A=0,R=g.length;A<R;A++)!E&&A in g||((E=E||Array.prototype.slice.call(g,0,A))[A]=g[A]);return f.concat(E||Array.prototype.slice.call(g))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:dR,c=Object.keys,d=Array.isArray;function p(f,g){return typeof g!="object"||c(g).forEach(function(_){f[_]=g[_]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var v=Object.getPrototypeOf,T={}.hasOwnProperty;function I(f,g){return T.call(f,g)}function x(f,g){typeof g=="function"&&(g=g(v(f))),(typeof Reflect>"u"?c:Reflect.ownKeys)(g).forEach(function(_){z(f,_,g[_])})}var j=Object.defineProperty;function z(f,g,_,E){j(f,g,p(_&&I(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},E))}function ce(f){return{from:function(g){return f.prototype=Object.create(g.prototype),z(f.prototype,"constructor",f),{extend:x.bind(null,f.prototype)}}}}var oe=Object.getOwnPropertyDescriptor,ye=[].slice;function me(f,g,_){return ye.call(f,g,_)}function ae(f,g){return g(f)}function Re(f){if(!f)throw new Error("Assertion Failed")}function Ce(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Ve(f,g){if(typeof g=="string"&&I(f,g))return f[g];if(!g)return f;if(typeof g!="string"){for(var _=[],E=0,A=g.length;E<A;++E){var R=Ve(f,g[E]);_.push(R)}return _}var O=g.indexOf(".");if(O!==-1){var N=f[g.substr(0,O)];return N==null?void 0:Ve(N,g.substr(O+1))}}function L(f,g,_){if(f&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof g!="string"&&"length"in g){Re(typeof _!="string"&&"length"in _);for(var E=0,A=g.length;E<A;++E)L(f,g[E],_[E])}else{var R,O,N=g.indexOf(".");N!==-1?(R=g.substr(0,N),(O=g.substr(N+1))===""?_===void 0?d(f)&&!isNaN(parseInt(R))?f.splice(R,1):delete f[R]:f[R]=_:L(N=!(N=f[R])||!I(f,R)?f[R]={}:N,O,_)):_===void 0?d(f)&&!isNaN(parseInt(g))?f.splice(g,1):delete f[g]:f[g]=_}}function P(f){var g,_={};for(g in f)I(f,g)&&(_[g]=f[g]);return _}var V=[].concat;function q(f){return V.apply([],f)}var Nt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(q([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(g){return g+f+"Array"})}))).filter(function(f){return u[f]}),Y=new Set(Nt.map(function(f){return u[f]})),W=null;function k(f){return W=new WeakMap,f=function g(_){if(!_||typeof _!="object")return _;var E=W.get(_);if(E)return E;if(d(_)){E=[],W.set(_,E);for(var A=0,R=_.length;A<R;++A)E.push(g(_[A]))}else if(Y.has(_.constructor))E=_;else{var O,N=v(_);for(O in E=N===Object.prototype?{}:Object.create(N),W.set(_,E),_)I(_,O)&&(E[O]=g(_[O]))}return E}(f),W=null,f}var Dn={}.toString;function Yt(f){return Dn.call(f).slice(8,-1)}var pe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Le=typeof pe=="symbol"?function(f){var g;return f!=null&&(g=f[pe])&&g.apply(f)}:function(){return null};function Qe(f,g){return g=f.indexOf(g),0<=g&&f.splice(g,1),0<=g}var pt={};function B(f){var g,_,E,A;if(arguments.length===1){if(d(f))return f.slice();if(this===pt&&typeof f=="string")return[f];if(A=Le(f)){for(_=[];!(E=A.next()).done;)_.push(E.value);return _}if(f==null)return[f];if(typeof(g=f.length)!="number")return[f];for(_=new Array(g);g--;)_[g]=f[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var Te=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},is=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(is),Be={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(f,g){this.name=f,this.message=g}function We(f,g){return f+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,E,A){return A.indexOf(_)===E}).join(`
`)}function ct(f,g,_,E){this.failures=g,this.failedKeys=E,this.successCount=_,this.message=We(f,g)}function et(f,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=We(f,this.failures)}ce(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),ce(ct).from(Ie),ce(et).from(Ie);var un=Er.reduce(function(f,g){return f[g]=g+"Error",f},{}),Bt=Ie,Fe=Er.reduce(function(f,g){var _=g+"Error";function E(A,R){this.name=_,A?typeof A=="string"?(this.message="".concat(A).concat(R?`
 `+R:""),this.inner=R||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=Be[g]||_,this.inner=null)}return ce(E).from(Bt),f[g]=E,f},{});Fe.Syntax=SyntaxError,Fe.Type=TypeError,Fe.Range=RangeError;var Ni=is.reduce(function(f,g){return f[g+"Error"]=Fe[g],f},{}),Ar=Er.reduce(function(f,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(f[g+"Error"]=Fe[g]),f},{});function Tt(){}function zr(f){return f}function Ds(f,g){return f==null||f===zr?g:function(_){return g(f(_))}}function jr(f,g){return function(){f.apply(this,arguments),g.apply(this,arguments)}}function Nu(f,g){return f===Tt?g:function(){var _=f.apply(this,arguments);_!==void 0&&(arguments[0]=_);var E=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var R=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?jr(E,this.onsuccess):E),A&&(this.onerror=this.onerror?jr(A,this.onerror):A),R!==void 0?R:_}}function Ir(f,g){return f===Tt?g:function(){f.apply(this,arguments);var _=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?jr(_,this.onsuccess):_),E&&(this.onerror=this.onerror?jr(E,this.onerror):E)}}function Xl(f,g){return f===Tt?g:function(_){var E=f.apply(this,arguments);p(_,E);var A=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?jr(A,this.onsuccess):A),R&&(this.onerror=this.onerror?jr(R,this.onerror):R),E===void 0?_===void 0?void 0:_:p(E,_)}}function So(f,g){return f===Tt?g:function(){return g.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function rs(f,g){return f===Tt?g:function(){var _=f.apply(this,arguments);if(_&&typeof _.then=="function"){for(var E=this,A=arguments.length,R=new Array(A);A--;)R[A]=arguments[A];return _.then(function(){return g.apply(E,R)})}return g.apply(this,arguments)}}Ar.ModifyError=ct,Ar.DexieError=Ie,Ar.BulkError=et;var Ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Vu(f){Ln=f}var li={},ya=100,Nt=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,v(f),f];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,v(g),f]}(),is=Nt[0],Er=Nt[1],Nt=Nt[2],Er=Er&&Er.then,yt=is&&is.constructor,Yn=!!Nt,ln=function(f,g){qr.push([f,g]),_a&&(queueMicrotask(ba),_a=!1)},va=!0,_a=!0,pr=[],ci=[],Vi=zr,wn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Tt,pgp:!1,env:{},finalize:Tt},qe=wn,qr=[],Fr=0,ss=[];function Ue(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=qe;if(typeof f!="function"){if(f!==li)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Os(this,this._value))}this._state=null,this._value=null,++g.ref,function _(E,A){try{A(function(R){if(E._state===null){if(R===E)throw new TypeError("A promise cannot be resolved with itself.");var O=E._lib&&gr();R&&typeof R.then=="function"?_(E,function(N,K){R instanceof Ue?R._then(N,K):R.then(N,K)}):(E._state=!0,E._value=R,Hr(E)),O&&Mi()}},Os.bind(null,E))}catch(R){Os(E,R)}}(this,f)}var Kr={get:function(){var f=qe,g=Ns;function _(E,A){var R=this,O=!f.global&&(f!==qe||g!==Ns),N=O&&!On(),K=new Ue(function(G,X){Ps(R,new hi(Cr(E,f,O,N),Cr(A,f,O,N),G,X,f))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return _.prototype=li,_},set:function(f){z(this,"then",f&&f.prototype===li?Kr:{get:function(){return f},set:Kr.set})}};function hi(f,g,_,E,A){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=E,this.psd=A}function Os(f,g){var _,E;ci.push(g),f._state===null&&(_=f._lib&&gr(),g=Vi(g),f._state=!1,f._value=g,E=f,pr.some(function(A){return A._value===E._value})||pr.push(E),Hr(f),_&&Mi())}function Hr(f){var g=f._listeners;f._listeners=[];for(var _=0,E=g.length;_<E;++_)Ps(f,g[_]);var A=f._PSD;--A.ref||A.finalize(),Fr===0&&(++Fr,ln(function(){--Fr==0&&zt()},[]))}function Ps(f,g){if(f._state!==null){var _=f._state?g.onFulfilled:g.onRejected;if(_===null)return(f._state?g.resolve:g.reject)(f._value);++g.psd.ref,++Fr,ln(as,[_,f,g])}else f._listeners.push(g)}function as(f,g,_){try{var E,A=g._value;!g._state&&ci.length&&(ci=[]),E=Ln&&g._consoleTask?g._consoleTask.run(function(){return f(A)}):f(A),g._state||ci.indexOf(A)!==-1||function(R){for(var O=pr.length;O;)if(pr[--O]._value===R._value)return pr.splice(O,1)}(g),_.resolve(E)}catch(R){_.reject(R)}finally{--Fr==0&&zt(),--_.psd.ref||_.psd.finalize()}}function ba(){Rr(wn,function(){gr()&&Mi()})}function gr(){var f=va;return _a=va=!1,f}function Mi(){var f,g,_;do for(;0<qr.length;)for(f=qr,qr=[],_=f.length,g=0;g<_;++g){var E=f[g];E[0].apply(null,E[1])}while(0<qr.length);_a=va=!0}function zt(){var f=pr;pr=[],f.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var g=ss.slice(0),_=g.length;_;)g[--_]()}function Zt(f){return new Ue(li,!1,f)}function ut(f,g){var _=qe;return function(){var E=gr(),A=qe;try{return Vt(_,!0),f.apply(this,arguments)}catch(R){g&&g(R)}finally{Vt(A,!1),E&&Mi()}}}x(Ue.prototype,{then:Kr,_then:function(f,g){Ps(this,new hi(null,null,f,g,qe))},catch:function(f){if(arguments.length===1)return this.then(null,f);var g=f,_=arguments[1];return typeof g=="function"?this.then(null,function(E){return(E instanceof g?_:Zt)(E)}):this.then(null,function(E){return(E&&E.name===g?_:Zt)(E)})},finally:function(f){return this.then(function(g){return Ue.resolve(f()).then(function(){return g})},function(g){return Ue.resolve(f()).then(function(){return Zt(g)})})},timeout:function(f,g){var _=this;return f<1/0?new Ue(function(E,A){var R=setTimeout(function(){return A(new Fe.Timeout(g))},f);_.then(E,A).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&z(Ue.prototype,Symbol.toStringTag,"Dexie.Promise"),wn.env=Ta(),x(Ue,{all:function(){var f=B.apply(null,arguments).map(yr);return new Ue(function(g,_){f.length===0&&g([]);var E=f.length;f.forEach(function(A,R){return Ue.resolve(A).then(function(O){f[R]=O,--E||g(f)},_)})})},resolve:function(f){return f instanceof Ue?f:f&&typeof f.then=="function"?new Ue(function(g,_){f.then(g,_)}):new Ue(li,!0,f)},reject:Zt,race:function(){var f=B.apply(null,arguments).map(yr);return new Ue(function(g,_){f.map(function(E){return Ue.resolve(E).then(g,_)})})},PSD:{get:function(){return qe},set:function(f){return qe=f}},totalEchoes:{get:function(){return Ns}},newPSD:$n,usePSD:Rr,scheduler:{get:function(){return ln},set:function(f){ln=f}},rejectionMapper:{get:function(){return Vi},set:function(f){Vi=f}},follow:function(f,g){return new Ue(function(_,E){return $n(function(A,R){var O=qe;O.unhandleds=[],O.onunhandled=R,O.finalize=jr(function(){var N,K=this;N=function(){K.unhandleds.length===0?A():R(K.unhandleds[0])},ss.push(function G(){N(),ss.splice(ss.indexOf(G),1)}),++Fr,ln(function(){--Fr==0&&zt()},[])},O.finalize),f()},g,_,E)})}}),yt&&(yt.allSettled&&z(Ue,"allSettled",function(){var f=B.apply(null,arguments).map(yr);return new Ue(function(g){f.length===0&&g([]);var _=f.length,E=new Array(_);f.forEach(function(A,R){return Ue.resolve(A).then(function(O){return E[R]={status:"fulfilled",value:O}},function(O){return E[R]={status:"rejected",reason:O}}).then(function(){return--_||g(E)})})})}),yt.any&&typeof AggregateError<"u"&&z(Ue,"any",function(){var f=B.apply(null,arguments).map(yr);return new Ue(function(g,_){f.length===0&&_(new AggregateError([]));var E=f.length,A=new Array(E);f.forEach(function(R,O){return Ue.resolve(R).then(function(N){return g(N)},function(N){A[O]=N,--E||_(new AggregateError(A))})})})}),yt.withResolvers&&(Ue.withResolvers=yt.withResolvers));var Ot={awaits:0,echoes:0,id:0},Ao=0,Ea=[],Gr=0,Ns=0,Vs=0;function $n(f,g,_,E){var A=qe,R=Object.create(A);return R.parent=A,R.ref=0,R.global=!1,R.id=++Vs,wn.env,R.env=Yn?{Promise:Ue,PromiseProp:{value:Ue,configurable:!0,writable:!0},all:Ue.all,race:Ue.race,allSettled:Ue.allSettled,any:Ue.any,resolve:Ue.resolve,reject:Ue.reject}:{},g&&p(R,g),++A.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Rr(R,f,_,E),R.ref===0&&R.finalize(),E}function ir(){return Ot.id||(Ot.id=++Ao),++Ot.awaits,Ot.echoes+=ya,Ot.id}function On(){return!!Ot.awaits&&(--Ot.awaits==0&&(Ot.id=0),Ot.echoes=Ot.awaits*ya,!0)}function yr(f){return Ot.echoes&&f&&f.constructor===yt?(ir(),f.then(function(g){return On(),g},function(g){return On(),$t(g)})):f}function Xn(){var f=Ea[Ea.length-1];Ea.pop(),Vt(f,!1)}function Vt(f,g){var _,E=qe;(g?!Ot.echoes||Gr++&&f===qe:!Gr||--Gr&&f===qe)||queueMicrotask(g?(function(A){++Ns,Ot.echoes&&--Ot.echoes!=0||(Ot.echoes=Ot.awaits=Ot.id=0),Ea.push(qe),Vt(A,!0)}).bind(null,f):Xn),f!==qe&&(qe=f,E===wn&&(wn.env=Ta()),Yn&&(_=wn.env.Promise,g=f.env,(E.global||f.global)&&(Object.defineProperty(u,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function Ta(){var f=u.Promise;return Yn?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Rr(f,g,_,E,A){var R=qe;try{return Vt(f,!0),g(_,E,A)}finally{Vt(R,!1)}}function Cr(f,g,_,E){return typeof f!="function"?f:function(){var A=qe;_&&ir(),Vt(g,!0);try{return f.apply(this,arguments)}finally{Vt(A,!1),E&&queueMicrotask(On)}}}function Qr(f){Promise===yt&&Ot.echoes===0?Gr===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Er).indexOf("[native code]")===-1&&(ir=On=Tt);var $t=Ue.reject,fi="￿",Wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Io="String expected.",vr=[],_r="__dbnames",mn="readonly",ki="readwrite";function di(f,g){return f?g?function(){return f.apply(this,arguments)&&g.apply(this,arguments)}:f:g}var mi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Li(f){return typeof f!="string"||/\./.test(f)?function(g){return g}:function(g){return g[f]===void 0&&f in g&&delete(g=k(g))[f],g}}function Ms(){throw Fe.Type()}function ht(f,g){try{var _=ks(f),E=ks(g);if(_!==E)return _==="Array"?1:E==="Array"?-1:_==="binary"?1:E==="binary"?-1:_==="string"?1:E==="string"?-1:_==="Date"?1:E!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<f?1:f<g?-1:0;case"binary":return function(A,R){for(var O=A.length,N=R.length,K=O<N?O:N,G=0;G<K;++G)if(A[G]!==R[G])return A[G]<R[G]?-1:1;return O===N?0:O<N?-1:1}(Un(f),Un(g));case"Array":return function(A,R){for(var O=A.length,N=R.length,K=O<N?O:N,G=0;G<K;++G){var X=ht(A[G],R[G]);if(X!==0)return X}return O===N?0:O<N?-1:1}(f,g)}}catch{}return NaN}function ks(f){var g=typeof f;return g!="object"?g:ArrayBuffer.isView(f)?"binary":(f=Yt(f),f==="ArrayBuffer"?"binary":f)}function Un(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var wa=(Mt.prototype._trans=function(f,g,_){var E=this._tx||qe.trans,A=this.name,R=Ln&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(G,X,U){if(!U.schema[A])throw new Fe.NotFound("Table "+A+" not part of transaction");return g(U.idbtrans,U)}var N=gr();try{var K=E&&E.db._novip===this.db._novip?E===qe.trans?E._promise(f,O,_):$n(function(){return E._promise(f,O,_)},{trans:E,transless:qe.transless||qe}):function G(X,U,Z,F){if(X.idbdb&&(X._state.openComplete||qe.letThrough||X._vip)){var $=X._createTransaction(U,Z,X._dbSchema);try{$.create(),X._state.PR1398_maxLoop=3}catch(ee){return ee.name===un.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,U,Z,F)})):$t(ee)}return $._promise(U,function(ee,Q){return $n(function(){return qe.trans=$,F(ee,Q,$)})}).then(function(ee){if(U==="readwrite")try{$.idbtrans.commit()}catch{}return U==="readonly"?ee:$._completion.then(function(){return ee})})}if(X._state.openComplete)return $t(new Fe.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return $t(new Fe.DatabaseClosed);X.open().catch(Tt)}return X._state.dbReadyPromise.then(function(){return G(X,U,Z,F)})}(this.db,f,[this.name],O);return R&&(K._consoleTask=R,K=K.catch(function(G){return console.trace(G),$t(G)})),K}finally{N&&Mi()}},Mt.prototype.get=function(f,g){var _=this;return f&&f.constructor===Object?this.where(f).first(g):f==null?$t(new Fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return _.core.get({trans:E,key:f}).then(function(A){return _.hook.reading.fire(A)})}).then(g)},Mt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(d(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var g=c(f);if(g.length===1)return this.where(g[0]).equals(f[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&g.every(function(G){return 0<=N.keyPath.indexOf(G)})){for(var K=0;K<g.length;++K)if(g.indexOf(N.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(N,K){return N.keyPath.length-K.keyPath.length})[0];if(_&&this.db._maxKey!==fi){var R=_.keyPath.slice(0,g.length);return this.where(R).equals(R.map(function(K){return f[K]}))}!_&&Ln&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var E=this.schema.idxByName;function A(N,K){return ht(N,K)===0}var O=g.reduce(function(U,K){var G=U[0],X=U[1],U=E[K],Z=f[K];return[G||U,G||!U?di(X,U&&U.multi?function(F){return F=Ve(F,K),d(F)&&F.some(function($){return A(Z,$)})}:function(F){return A(Z,Ve(F,K))}):X]},[null,null]),R=O[0],O=O[1];return R?this.where(R.name).equals(f[R.keyPath]).filter(O):_?this.filter(O):this.where(g).equals("")},Mt.prototype.filter=function(f){return this.toCollection().and(f)},Mt.prototype.count=function(f){return this.toCollection().count(f)},Mt.prototype.offset=function(f){return this.toCollection().offset(f)},Mt.prototype.limit=function(f){return this.toCollection().limit(f)},Mt.prototype.each=function(f){return this.toCollection().each(f)},Mt.prototype.toArray=function(f){return this.toCollection().toArray(f)},Mt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Mt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,d(f)?"[".concat(f.join("+"),"]"):f))},Mt.prototype.reverse=function(){return this.toCollection().reverse()},Mt.prototype.mapToClass=function(f){var g,_=this.db,E=this.name;function A(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Ms&&(function(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function X(){this.constructor=K}t(K,G),K.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}(A,g=f),Object.defineProperty(A.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),A.prototype.table=function(){return E},f=A);for(var R=new Set,O=f.prototype;O;O=v(O))Object.getOwnPropertyNames(O).forEach(function(K){return R.add(K)});function N(K){if(!K)return K;var G,X=Object.create(f.prototype);for(G in K)if(!R.has(G))try{X[G]=K[G]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),f},Mt.prototype.defineClass=function(){return this.mapToClass(function(f){p(this,f)})},Mt.prototype.add=function(f,g){var _=this,E=this.schema.primKey,A=E.auto,R=E.keyPath,O=f;return R&&A&&(O=Li(R)(f)),this._trans("readwrite",function(N){return _.core.mutate({trans:N,type:"add",keys:g!=null?[g]:null,values:[O]})}).then(function(N){return N.numFailures?Ue.reject(N.failures[0]):N.lastResult}).then(function(N){if(R)try{L(f,R,N)}catch{}return N})},Mt.prototype.update=function(f,g){return typeof f!="object"||d(f)?this.where(":id").equals(f).modify(g):(f=Ve(f,this.schema.primKey.keyPath),f===void 0?$t(new Fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(g))},Mt.prototype.put=function(f,g){var _=this,E=this.schema.primKey,A=E.auto,R=E.keyPath,O=f;return R&&A&&(O=Li(R)(f)),this._trans("readwrite",function(N){return _.core.mutate({trans:N,type:"put",values:[O],keys:g!=null?[g]:null})}).then(function(N){return N.numFailures?Ue.reject(N.failures[0]):N.lastResult}).then(function(N){if(R)try{L(f,R,N)}catch{}return N})},Mt.prototype.delete=function(f){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[f]})}).then(function(_){return _.numFailures?Ue.reject(_.failures[0]):void 0})},Mt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"deleteRange",range:mi})}).then(function(g){return g.numFailures?Ue.reject(g.failures[0]):void 0})},Mt.prototype.bulkGet=function(f){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:f,trans:_}).then(function(E){return E.map(function(A){return g.hook.reading.fire(A)})})})},Mt.prototype.bulkAdd=function(f,g,_){var E=this,A=Array.isArray(g)?g:void 0,R=(_=_||(A?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=E.schema.primKey,N=G.auto,G=G.keyPath;if(G&&A)throw new Fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var K=f.length,G=G&&N?f.map(Li(G)):f;return E.core.mutate({trans:O,type:"add",keys:A,values:G,wantResults:R}).then(function($){var U=$.numFailures,Z=$.results,F=$.lastResult,$=$.failures;if(U===0)return R?Z:F;throw new et("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(K," operations failed"),$)})})},Mt.prototype.bulkPut=function(f,g,_){var E=this,A=Array.isArray(g)?g:void 0,R=(_=_||(A?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=E.schema.primKey,N=G.auto,G=G.keyPath;if(G&&A)throw new Fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var K=f.length,G=G&&N?f.map(Li(G)):f;return E.core.mutate({trans:O,type:"put",keys:A,values:G,wantResults:R}).then(function($){var U=$.numFailures,Z=$.results,F=$.lastResult,$=$.failures;if(U===0)return R?Z:F;throw new et("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(K," operations failed"),$)})})},Mt.prototype.bulkUpdate=function(f){var g=this,_=this.core,E=f.map(function(O){return O.key}),A=f.map(function(O){return O.changes}),R=[];return this._trans("readwrite",function(O){return _.getMany({trans:O,keys:E,cache:"clone"}).then(function(N){var K=[],G=[];f.forEach(function(U,Z){var F=U.key,$=U.changes,ee=N[Z];if(ee){for(var Q=0,se=Object.keys($);Q<se.length;Q++){var he=se[Q],fe=$[he];if(he===g.schema.primKey.keyPath){if(ht(fe,F)!==0)throw new Fe.Constraint("Cannot update primary key in bulkUpdate()")}else L(ee,he,fe)}R.push(Z),K.push(F),G.push(ee)}});var X=K.length;return _.mutate({trans:O,type:"put",keys:K,values:G,updates:{keys:E,changeSpecs:A}}).then(function(U){var Z=U.numFailures,F=U.failures;if(Z===0)return X;for(var $=0,ee=Object.keys(F);$<ee.length;$++){var Q,se=ee[$],he=R[Number(se)];he!=null&&(Q=F[se],delete F[se],F[he]=Q)}throw new et("".concat(g.name,".bulkUpdate(): ").concat(Z," of ").concat(X," operations failed"),F)})})})},Mt.prototype.bulkDelete=function(f){var g=this,_=f.length;return this._trans("readwrite",function(E){return g.core.mutate({trans:E,type:"delete",keys:f})}).then(function(O){var A=O.numFailures,R=O.lastResult,O=O.failures;if(A===0)return R;throw new et("".concat(g.name,".bulkDelete(): ").concat(A," of ").concat(_," operations failed"),O)})},Mt);function Mt(){}function pi(f){function g(O,N){if(N){for(var K=arguments.length,G=new Array(K-1);--K;)G[K-1]=arguments[K];return _[O].subscribe.apply(null,G),f}if(typeof O=="string")return _[O]}var _={};g.addEventType=R;for(var E=1,A=arguments.length;E<A;++E)R(arguments[E]);return g;function R(O,N,K){if(typeof O!="object"){var G;N=N||So;var X={subscribers:[],fire:K=K||Tt,subscribe:function(U){X.subscribers.indexOf(U)===-1&&(X.subscribers.push(U),X.fire=N(X.fire,U))},unsubscribe:function(U){X.subscribers=X.subscribers.filter(function(Z){return Z!==U}),X.fire=X.subscribers.reduce(N,K)}};return _[O]=g[O]=X}c(G=O).forEach(function(U){var Z=G[U];if(d(Z))R(U,G[U][0],G[U][1]);else{if(Z!=="asap")throw new Fe.InvalidArgument("Invalid event config");var F=R(U,zr,function(){for(var $=arguments.length,ee=new Array($);$--;)ee[$]=arguments[$];F.subscribers.forEach(function(Q){Ce(function(){Q.apply(null,ee)})})})}})}}function Ui(f,g){return ce(g).from({prototype:f}),g}function xr(f,g){return!(f.filter||f.algorithm||f.or)&&(g?f.justLimit:!f.replayFilter)}function Ro(f,g){f.filter=di(f.filter,g)}function en(f,g,_){var E=f.replayFilter;f.replayFilter=E?function(){return di(E(),g())}:g,f.justLimit=_&&!E}function Bn(f,g){if(f.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(f.index);if(!_)throw new Fe.Schema("KeyPath "+f.index+" on object store "+g.name+" is not indexed");return _}function os(f,g,_){var E=Bn(f,g.schema);return g.openCursor({trans:_,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:E,range:f.range}})}function Yr(f,g,_,E){var A=f.replayFilter?di(f.filter,f.replayFilter()):f.filter;if(f.or){var R={},O=function(N,K,G){var X,U;A&&!A(K,G,function(Z){return K.stop(Z)},function(Z){return K.fail(Z)})||((U=""+(X=K.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(X)),I(R,U)||(R[U]=!0,g(N,K,G)))};return Promise.all([f.or._iterate(O,_),gi(os(f,E,_),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return gi(os(f,E,_),di(f.algorithm,A),g,!f.keysOnly&&f.valueMapper)}function gi(f,g,_,E){var A=ut(E?function(R,O,N){return _(E(R),O,N)}:_);return f.then(function(R){if(R)return R.start(function(){var O=function(){return R.continue()};g&&!g(R,function(N){return O=N},function(N){R.stop(N),O=Tt},function(N){R.fail(N),O=Tt})||A(R.value,R,function(N){return O=N}),O()})})}var It=(us.prototype.execute=function(f){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(d(_))return a(a([],d(f)?f:[],!0),_).sort();if(typeof _=="number")return(Number(f)||0)+_;if(typeof _=="bigint")try{return BigInt(f)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var E=g.remove;if(d(E))return d(f)?f.filter(function(A){return!E.includes(A)}).sort():[];if(typeof E=="number")return Number(f)-E;if(typeof E=="bigint")try{return BigInt(f)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof f=="string"&&f.startsWith(_)?g.replacePrefix[1]+f.substring(_.length):f},us);function us(f){this["@@propmod"]=f}var Dr=(dt.prototype._read=function(f,g){var _=this._ctx;return _.error?_.table._trans(null,$t.bind(null,_.error)):_.table._trans("readonly",f).then(g)},dt.prototype._write=function(f){var g=this._ctx;return g.error?g.table._trans(null,$t.bind(null,g.error)):g.table._trans("readwrite",f,"locked")},dt.prototype._addAlgorithm=function(f){var g=this._ctx;g.algorithm=di(g.algorithm,f)},dt.prototype._iterate=function(f,g){return Yr(this._ctx,f,g,this._ctx.table.core)},dt.prototype.clone=function(f){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return f&&p(_,f),g._ctx=_,g},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(f){var g=this._ctx;return this._read(function(_){return Yr(g,f,_,g.table.core)})},dt.prototype.count=function(f){var g=this;return this._read(function(_){var E=g._ctx,A=E.table.core;if(xr(E,!0))return A.count({trans:_,query:{index:Bn(E,A.schema),range:E.range}}).then(function(O){return Math.min(O,E.limit)});var R=0;return Yr(E,function(){return++R,!1},_,A).then(function(){return R})}).then(f)},dt.prototype.sortBy=function(f,g){var _=f.split(".").reverse(),E=_[0],A=_.length-1;function R(K,G){return G?R(K[_[G]],G-1):K[E]}var O=this._ctx.dir==="next"?1:-1;function N(K,G){return ht(R(K,A),R(G,A))*O}return this.toArray(function(K){return K.sort(N)}).then(g)},dt.prototype.toArray=function(f){var g=this;return this._read(function(_){var E=g._ctx;if(E.dir==="next"&&xr(E,!0)&&0<E.limit){var A=E.valueMapper,R=Bn(E,E.table.core.schema);return E.table.core.query({trans:_,limit:E.limit,values:!0,query:{index:R,range:E.range}}).then(function(N){return N=N.result,A?N.map(A):N})}var O=[];return Yr(E,function(N){return O.push(N)},_,E.table.core).then(function(){return O})},f)},dt.prototype.offset=function(f){var g=this._ctx;return f<=0||(g.offset+=f,xr(g)?en(g,function(){var _=f;return function(E,A){return _===0||(_===1?--_:A(function(){E.advance(_),_=0}),!1)}}):en(g,function(){var _=f;return function(){return--_<0}})),this},dt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),en(this._ctx,function(){var g=f;return function(_,E,A){return--g<=0&&E(A),0<=g}},!0),this},dt.prototype.until=function(f,g){return Ro(this._ctx,function(_,E,A){return!f(_.value)||(E(A),g)}),this},dt.prototype.first=function(f){return this.limit(1).toArray(function(g){return g[0]}).then(f)},dt.prototype.last=function(f){return this.reverse().first(f)},dt.prototype.filter=function(f){var g;return Ro(this._ctx,function(_){return f(_.value)}),(g=this._ctx).isMatch=di(g.isMatch,f),this},dt.prototype.and=function(f){return this.filter(f)},dt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(f){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){f(E.key,E)})},dt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},dt.prototype.eachPrimaryKey=function(f){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){f(E.primaryKey,E)})},dt.prototype.keys=function(f){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,A){_.push(A.key)}).then(function(){return _}).then(f)},dt.prototype.primaryKeys=function(f){var g=this._ctx;if(g.dir==="next"&&xr(g,!0)&&0<g.limit)return this._read(function(E){var A=Bn(g,g.table.core.schema);return g.table.core.query({trans:E,values:!1,limit:g.limit,query:{index:A,range:g.range}})}).then(function(E){return E.result}).then(f);g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,A){_.push(A.primaryKey)}).then(function(){return _}).then(f)},dt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},dt.prototype.firstKey=function(f){return this.limit(1).keys(function(g){return g[0]}).then(f)},dt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},dt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var g={};return Ro(this._ctx,function(A){var E=A.primaryKey.toString(),A=I(g,E);return g[E]=!0,!A}),this},dt.prototype.modify=function(f){var g=this,_=this._ctx;return this._write(function(E){var A,R,O;O=typeof f=="function"?f:(A=c(f),R=A.length,function(Q){for(var se=!1,he=0;he<R;++he){var fe=A[he],ve=f[fe],Oe=Ve(Q,fe);ve instanceof It?(L(Q,fe,ve.execute(Oe)),se=!0):Oe!==ve&&(L(Q,fe,ve),se=!0)}return se});var N=_.table.core,U=N.schema.primaryKey,K=U.outbound,G=U.extractKey,X=200,U=g.db._options.modifyChunkSize;U&&(X=typeof U=="object"?U[N.name]||U["*"]||200:U);function Z(Q,fe){var he=fe.failures,fe=fe.numFailures;$+=Q-fe;for(var ve=0,Oe=c(he);ve<Oe.length;ve++){var Me=Oe[ve];F.push(he[Me])}}var F=[],$=0,ee=[];return g.clone().primaryKeys().then(function(Q){function se(fe){var ve=Math.min(X,Q.length-fe);return N.getMany({trans:E,keys:Q.slice(fe,fe+ve),cache:"immutable"}).then(function(Oe){for(var Me=[],xe=[],Pe=K?[]:null,ke=[],De=0;De<ve;++De){var je=Oe[De],Je={value:k(je),primKey:Q[fe+De]};O.call(Je,Je.value,Je)!==!1&&(Je.value==null?ke.push(Q[fe+De]):K||ht(G(je),G(Je.value))===0?(xe.push(Je.value),K&&Pe.push(Q[fe+De])):(ke.push(Q[fe+De]),Me.push(Je.value)))}return Promise.resolve(0<Me.length&&N.mutate({trans:E,type:"add",values:Me}).then(function(tt){for(var lt in tt.failures)ke.splice(parseInt(lt),1);Z(Me.length,tt)})).then(function(){return(0<xe.length||he&&typeof f=="object")&&N.mutate({trans:E,type:"put",keys:Pe,values:xe,criteria:he,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<fe}).then(function(tt){return Z(xe.length,tt)})}).then(function(){return(0<ke.length||he&&f===Sa)&&N.mutate({trans:E,type:"delete",keys:ke,criteria:he,isAdditionalChunk:0<fe}).then(function(tt){return Z(ke.length,tt)})}).then(function(){return Q.length>fe+ve&&se(fe+X)})})}var he=xr(_)&&_.limit===1/0&&(typeof f!="function"||f===Sa)&&{index:_.index,range:_.range};return se(0).then(function(){if(0<F.length)throw new ct("Error modifying one or more objects",F,$,ee);return Q.length})})})},dt.prototype.delete=function(){var f=this._ctx,g=f.range;return xr(f)&&(f.isPrimKey||g.type===3)?this._write(function(_){var E=f.table.core.schema.primaryKey,A=g;return f.table.core.count({trans:_,query:{index:E,range:A}}).then(function(R){return f.table.core.mutate({trans:_,type:"deleteRange",range:A}).then(function(O){var N=O.failures;if(O.lastResult,O.results,O=O.numFailures,O)throw new ct("Could not delete some values",Object.keys(N).map(function(K){return N[K]}),R-O);return R-O})})}):this.modify(Sa)},dt);function dt(){}var Sa=function(f,g){return g.value=null};function Co(f,g){return f<g?-1:f===g?0:1}function xo(f,g){return g<f?-1:f===g?0:1}function Jn(f,g,_){return f=f instanceof yi?new f.Collection(f):f,f._ctx.error=new(_||TypeError)(g),f}function ls(f){return new f.Collection(f,function(){return br("")}).limit(0)}function Bi(f,g,_,E){var A,R,O,N,K,G,X,U=_.length;if(!_.every(function($){return typeof $=="string"}))return Jn(f,Io);function Z($){A=$==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},R=$==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},O=$==="next"?Co:xo;var ee=_.map(function(Q){return{lower:R(Q),upper:A(Q)}}).sort(function(Q,se){return O(Q.lower,se.lower)});N=ee.map(function(Q){return Q.upper}),K=ee.map(function(Q){return Q.lower}),X=(G=$)==="next"?"":E}Z("next"),f=new f.Collection(f,function(){return zn(N[0],K[U-1]+E)}),f._ondirectionchange=function($){Z($)};var F=0;return f._addAlgorithm(function($,ee,Q){var se=$.key;if(typeof se!="string")return!1;var he=R(se);if(g(he,K,F))return!0;for(var fe=null,ve=F;ve<U;++ve){var Oe=function(Me,xe,Pe,ke,De,je){for(var Je=Math.min(Me.length,ke.length),tt=-1,lt=0;lt<Je;++lt){var Zn=xe[lt];if(Zn!==ke[lt])return De(Me[lt],Pe[lt])<0?Me.substr(0,lt)+Pe[lt]+Pe.substr(lt+1):De(Me[lt],ke[lt])<0?Me.substr(0,lt)+ke[lt]+Pe.substr(lt+1):0<=tt?Me.substr(0,tt)+xe[tt]+Pe.substr(tt+1):null;De(Me[lt],Zn)<0&&(tt=lt)}return Je<ke.length&&je==="next"?Me+Pe.substr(Me.length):Je<Me.length&&je==="prev"?Me.substr(0,Pe.length):tt<0?null:Me.substr(0,tt)+ke[tt]+Pe.substr(tt+1)}(se,he,N[ve],K[ve],O,G);Oe===null&&fe===null?F=ve+1:(fe===null||0<O(fe,Oe))&&(fe=Oe)}return ee(fe!==null?function(){$.continue(fe+X)}:Q),!1}),f}function zn(f,g,_,E){return{type:2,lower:f,upper:g,lowerOpen:_,upperOpen:E}}function br(f){return{type:1,lower:f,upper:f}}var yi=(Object.defineProperty(jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),jt.prototype.between=function(f,g,_,E){_=_!==!1,E=E===!0;try{return 0<this._cmp(f,g)||this._cmp(f,g)===0&&(_||E)&&(!_||!E)?ls(this):new this.Collection(this,function(){return zn(f,g,!_,!E)})}catch{return Jn(this,Wn)}},jt.prototype.equals=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return br(f)})},jt.prototype.above=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(f,void 0,!0)})},jt.prototype.aboveOrEqual=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(f,void 0,!1)})},jt.prototype.below=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(void 0,f,!1,!0)})},jt.prototype.belowOrEqual=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(void 0,f)})},jt.prototype.startsWith=function(f){return typeof f!="string"?Jn(this,Io):this.between(f,f+fi,!0,!0)},jt.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):Bi(this,function(g,_){return g.indexOf(_[0])===0},[f],fi)},jt.prototype.equalsIgnoreCase=function(f){return Bi(this,function(g,_){return g===_[0]},[f],"")},jt.prototype.anyOfIgnoreCase=function(){var f=B.apply(pt,arguments);return f.length===0?ls(this):Bi(this,function(g,_){return _.indexOf(g)!==-1},f,"")},jt.prototype.startsWithAnyOfIgnoreCase=function(){var f=B.apply(pt,arguments);return f.length===0?ls(this):Bi(this,function(g,_){return _.some(function(E){return g.indexOf(E)===0})},f,fi)},jt.prototype.anyOf=function(){var f=this,g=B.apply(pt,arguments),_=this._cmp;try{g.sort(_)}catch{return Jn(this,Wn)}if(g.length===0)return ls(this);var E=new this.Collection(this,function(){return zn(g[0],g[g.length-1])});E._ondirectionchange=function(R){_=R==="next"?f._ascending:f._descending,g.sort(_)};var A=0;return E._addAlgorithm(function(R,O,N){for(var K=R.key;0<_(K,g[A]);)if(++A===g.length)return O(N),!1;return _(K,g[A])===0||(O(function(){R.continue(g[A])}),!1)}),E},jt.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},jt.prototype.noneOf=function(){var f=B.apply(pt,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Jn(this,Wn)}var g=f.reduce(function(_,E){return _?_.concat([[_[_.length-1][1],E]]):[[-1/0,E]]},null);return g.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},jt.prototype.inAnyRange=function(se,g){var _=this,E=this._cmp,A=this._ascending,R=this._descending,O=this._min,N=this._max;if(se.length===0)return ls(this);if(!se.every(function(he){return he[0]!==void 0&&he[1]!==void 0&&A(he[0],he[1])<=0}))return Jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Fe.InvalidArgument);var K=!g||g.includeLowers!==!1,G=g&&g.includeUppers===!0,X,U=A;function Z(he,fe){return U(he[0],fe[0])}try{(X=se.reduce(function(he,fe){for(var ve=0,Oe=he.length;ve<Oe;++ve){var Me=he[ve];if(E(fe[0],Me[1])<0&&0<E(fe[1],Me[0])){Me[0]=O(Me[0],fe[0]),Me[1]=N(Me[1],fe[1]);break}}return ve===Oe&&he.push(fe),he},[])).sort(Z)}catch{return Jn(this,Wn)}var F=0,$=G?function(he){return 0<A(he,X[F][1])}:function(he){return 0<=A(he,X[F][1])},ee=K?function(he){return 0<R(he,X[F][0])}:function(he){return 0<=R(he,X[F][0])},Q=$,se=new this.Collection(this,function(){return zn(X[0][0],X[X.length-1][1],!K,!G)});return se._ondirectionchange=function(he){U=he==="next"?(Q=$,A):(Q=ee,R),X.sort(Z)},se._addAlgorithm(function(he,fe,ve){for(var Oe,Me=he.key;Q(Me);)if(++F===X.length)return fe(ve),!1;return!$(Oe=Me)&&!ee(Oe)||(_._cmp(Me,X[F][1])===0||_._cmp(Me,X[F][0])===0||fe(function(){U===A?he.continue(X[F][0]):he.continue(X[F][1])}),!1)}),se},jt.prototype.startsWithAnyOf=function(){var f=B.apply(pt,arguments);return f.every(function(g){return typeof g=="string"})?f.length===0?ls(this):this.inAnyRange(f.map(function(g){return[g,g+fi]})):Jn(this,"startsWithAnyOf() only works with strings")},jt);function jt(){}function sr(f){return ut(function(g){return ar(g),f(g.target.error),!1})}function ar(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var cs="storagemutated",zi="x-storagemutated-1",Sn=pi(null,cs),Or=(jn.prototype._lock=function(){return Re(!qe.global),++this._reculock,this._reculock!==1||qe.global||(qe.lockOwnerFor=this),this},jn.prototype._unlock=function(){if(Re(!qe.global),--this._reculock==0)for(qe.global||(qe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Rr(f[1],f[0])}catch{}}return this},jn.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},jn.prototype.create=function(f){var g=this;if(!this.mode)return this;var _=this.db.idbdb,E=this.db._state.dbOpenError;if(Re(!this.idbtrans),!f&&!_)switch(E&&E.name){case"DatabaseClosedError":throw new Fe.DatabaseClosed(E);case"MissingAPIError":throw new Fe.MissingAPI(E.message,E);default:throw new Fe.OpenFailed(E)}if(!this.active)throw new Fe.TransactionInactive;return Re(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(A){ar(A),g._reject(f.error)}),f.onabort=ut(function(A){ar(A),g.active&&g._reject(new Fe.Abort(f.error)),g.active=!1,g.on("abort").fire(A)}),f.oncomplete=ut(function(){g.active=!1,g._resolve(),"mutatedParts"in f&&Sn.storagemutated.fire(f.mutatedParts)}),this},jn.prototype._promise=function(f,g,_){var E=this;if(f==="readwrite"&&this.mode!=="readwrite")return $t(new Fe.ReadOnly("Transaction is readonly"));if(!this.active)return $t(new Fe.TransactionInactive);if(this._locked())return new Ue(function(R,O){E._blockedFuncs.push([function(){E._promise(f,g,_).then(R,O)},qe])});if(_)return $n(function(){var R=new Ue(function(O,N){E._lock();var K=g(O,N,E);K&&K.then&&K.then(O,N)});return R.finally(function(){return E._unlock()}),R._lib=!0,R});var A=new Ue(function(R,O){var N=g(R,O,E);N&&N.then&&N.then(R,O)});return A._lib=!0,A},jn.prototype._root=function(){return this.parent?this.parent._root():this},jn.prototype.waitFor=function(f){var g,_=this._root(),E=Ue.resolve(f);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return E}):(_._waitingFor=E,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function R(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=R)}());var A=_._waitingFor;return new Ue(function(R,O){E.then(function(N){return _._waitingQueue.push(ut(R.bind(null,N)))},function(N){return _._waitingQueue.push(ut(O.bind(null,N)))}).finally(function(){_._waitingFor===A&&(_._waitingFor=null)})})},jn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Fe.Abort))},jn.prototype.table=function(f){var g=this._memoizedTables||(this._memoizedTables={});if(I(g,f))return g[f];var _=this.schema[f];if(!_)throw new Fe.NotFound("Table "+f+" not part of transaction");return _=new this.db.Table(f,_,this),_.core=this.db.core.table(f),g[f]=_},jn);function jn(){}function Pr(f,g,_,E,A,R,O){return{name:f,keyPath:g,unique:_,multi:E,auto:A,compound:R,src:(_&&!O?"&":"")+(E?"*":"")+(A?"++":"")+ji(g)}}function ji(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function $r(f,g,_){return{name:f,primKey:g,indexes:_,mappedClass:null,idxByName:(E=function(A){return[A.name,A]},_.reduce(function(A,R,O){return O=E(R,O),O&&(A[O[0]]=O[1]),A},{}))};var E}var qi=function(f){try{return f.only([[]]),qi=function(){return[[]]},[[]]}catch{return qi=function(){return fi},fi}};function Nr(f){return f==null?function(){}:typeof f=="string"?(g=f).split(".").length===1?function(_){return _[g]}:function(_){return Ve(_,g)}:function(_){return Ve(_,f)};var g}function Xr(f){return[].slice.call(f)}var Do=0;function tn(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function xt(f,g,K){function E(Q){if(Q.type===3)return null;if(Q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=Q.lower,$=Q.upper,ee=Q.lowerOpen,Q=Q.upperOpen;return F===void 0?$===void 0?null:g.upperBound($,!!Q):$===void 0?g.lowerBound(F,!!ee):g.bound(F,$,!!ee,!!Q)}function A(Z){var F,$=Z.name;return{name:$,schema:Z,mutate:function(ee){var Q=ee.trans,se=ee.type,he=ee.keys,fe=ee.values,ve=ee.range;return new Promise(function(Oe,Me){Oe=ut(Oe);var xe=Q.objectStore($),Pe=xe.keyPath==null,ke=se==="put"||se==="add";if(!ke&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var De,je=(he||fe||{length:1}).length;if(he&&fe&&he.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(qn){++Zn,ar(qn)}var tt=[],lt=[],Zn=0;if(se==="deleteRange"){if(ve.type===4)return Oe({numFailures:Zn,failures:lt,results:[],lastResult:void 0});ve.type===3?tt.push(De=xe.clear()):tt.push(De=xe.delete(E(ve)))}else{var Pe=ke?Pe?[fe,he]:[fe,null]:[he,null],it=Pe[0],yn=Pe[1];if(ke)for(var In=0;In<je;++In)tt.push(De=yn&&yn[In]!==void 0?xe[se](it[In],yn[In]):xe[se](it[In])),De.onerror=Je;else for(In=0;In<je;++In)tt.push(De=xe[se](it[In])),De.onerror=Je}function $i(qn){qn=qn.target.result,tt.forEach(function(Ai,ms){return Ai.error!=null&&(lt[ms]=Ai.error)}),Oe({numFailures:Zn,failures:lt,results:se==="delete"?he:tt.map(function(Ai){return Ai.result}),lastResult:qn})}De.onerror=function(qn){Je(qn),$i(qn)},De.onsuccess=$i})},getMany:function(ee){var Q=ee.trans,se=ee.keys;return new Promise(function(he,fe){he=ut(he);for(var ve,Oe=Q.objectStore($),Me=se.length,xe=new Array(Me),Pe=0,ke=0,De=function(tt){tt=tt.target,xe[tt._pos]=tt.result,++ke===Pe&&he(xe)},je=sr(fe),Je=0;Je<Me;++Je)se[Je]!=null&&((ve=Oe.get(se[Je]))._pos=Je,ve.onsuccess=De,ve.onerror=je,++Pe);Pe===0&&he(xe)})},get:function(ee){var Q=ee.trans,se=ee.key;return new Promise(function(he,fe){he=ut(he);var ve=Q.objectStore($).get(se);ve.onsuccess=function(Oe){return he(Oe.target.result)},ve.onerror=sr(fe)})},query:(F=G,function(ee){return new Promise(function(Q,se){Q=ut(Q);var he,fe,ve,Pe=ee.trans,Oe=ee.values,Me=ee.limit,De=ee.query,xe=Me===1/0?void 0:Me,ke=De.index,De=De.range,Pe=Pe.objectStore($),ke=ke.isPrimaryKey?Pe:Pe.index(ke.name),De=E(De);if(Me===0)return Q({result:[]});F?((xe=Oe?ke.getAll(De,xe):ke.getAllKeys(De,xe)).onsuccess=function(je){return Q({result:je.target.result})},xe.onerror=sr(se)):(he=0,fe=!Oe&&"openKeyCursor"in ke?ke.openKeyCursor(De):ke.openCursor(De),ve=[],fe.onsuccess=function(je){var Je=fe.result;return Je?(ve.push(Oe?Je.value:Je.primaryKey),++he===Me?Q({result:ve}):void Je.continue()):Q({result:ve})},fe.onerror=sr(se))})}),openCursor:function(ee){var Q=ee.trans,se=ee.values,he=ee.query,fe=ee.reverse,ve=ee.unique;return new Promise(function(Oe,Me){Oe=ut(Oe);var ke=he.index,xe=he.range,Pe=Q.objectStore($),Pe=ke.isPrimaryKey?Pe:Pe.index(ke.name),ke=fe?ve?"prevunique":"prev":ve?"nextunique":"next",De=!se&&"openKeyCursor"in Pe?Pe.openKeyCursor(E(xe),ke):Pe.openCursor(E(xe),ke);De.onerror=sr(Me),De.onsuccess=ut(function(je){var Je,tt,lt,Zn,it=De.result;it?(it.___id=++Do,it.done=!1,Je=it.continue.bind(it),tt=(tt=it.continuePrimaryKey)&&tt.bind(it),lt=it.advance.bind(it),Zn=function(){throw new Error("Cursor not stopped")},it.trans=Q,it.stop=it.continue=it.continuePrimaryKey=it.advance=function(){throw new Error("Cursor not started")},it.fail=ut(Me),it.next=function(){var yn=this,In=1;return this.start(function(){return In--?yn.continue():yn.stop()}).then(function(){return yn})},it.start=function(yn){function In(){if(De.result)try{yn()}catch(qn){it.fail(qn)}else it.done=!0,it.start=function(){throw new Error("Cursor behind last entry")},it.stop()}var $i=new Promise(function(qn,Ai){qn=ut(qn),De.onerror=sr(Ai),it.fail=Ai,it.stop=function(ms){it.stop=it.continue=it.continuePrimaryKey=it.advance=Zn,qn(ms)}});return De.onsuccess=ut(function(qn){De.onsuccess=In,In()}),it.continue=Je,it.continuePrimaryKey=tt,it.advance=lt,In(),$i},Oe(it)):Oe(null)},Me)})},count:function(ee){var Q=ee.query,se=ee.trans,he=Q.index,fe=Q.range;return new Promise(function(ve,Oe){var Me=se.objectStore($),xe=he.isPrimaryKey?Me:Me.index(he.name),Me=E(fe),xe=Me?xe.count(Me):xe.count();xe.onsuccess=ut(function(Pe){return ve(Pe.target.result)}),xe.onerror=sr(Oe)})}}}var R,O,N,X=(O=K,N=Xr((R=f).objectStoreNames),{schema:{name:R.name,tables:N.map(function(Z){return O.objectStore(Z)}).map(function(Z){var F=Z.keyPath,Q=Z.autoIncrement,$=d(F),ee={},Q={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:$,keyPath:F,autoIncrement:Q,unique:!0,extractKey:Nr(F)},indexes:Xr(Z.indexNames).map(function(se){return Z.index(se)}).map(function(ve){var he=ve.name,fe=ve.unique,Oe=ve.multiEntry,ve=ve.keyPath,Oe={name:he,compound:d(ve),keyPath:ve,unique:fe,multiEntry:Oe,extractKey:Nr(ve)};return ee[tn(ve)]=Oe}),getIndexByKeyPath:function(se){return ee[tn(se)]}};return ee[":id"]=Q.primaryKey,F!=null&&(ee[tn(F)]=Q.primaryKey),Q})},hasGetAll:0<N.length&&"getAll"in O.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=X.schema,G=X.hasGetAll,X=K.tables.map(A),U={};return X.forEach(function(Z){return U[Z.name]=Z}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(Z){if(!U[Z])throw new Error("Table '".concat(Z,"' not found"));return U[Z]},MIN_KEY:-1/0,MAX_KEY:qi(g),schema:K}}function Aa(f,g,_,E){var A=_.IDBKeyRange;return _.indexedDB,{dbcore:(E=xt(g,A,E),f.dbcore.reduce(function(R,O){return O=O.create,r(r({},R),O(R))},E))}}function vi(f,E){var _=E.db,E=Aa(f._middlewares,_,f._deps,E);f.core=E.dbcore,f.tables.forEach(function(A){var R=A.name;f.core.schema.tables.some(function(O){return O.name===R})&&(A.core=f.core.table(R),f[R]instanceof f.Table&&(f[R].core=A.core))})}function Ls(f,g,_,E){_.forEach(function(A){var R=E[A];g.forEach(function(O){var N=function K(G,X){return oe(G,X)||(G=v(G))&&K(G,X)}(O,A);(!N||"value"in N&&N.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?z(O,A,{get:function(){return this.table(A)},set:function(K){j(this,A,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):O[A]=new f.Table(A,R))})})}function hs(f,g){g.forEach(function(_){for(var E in _)_[E]instanceof f.Table&&delete _[E]})}function Ia(f,g){return f._cfg.version-g._cfg.version}function _i(f,g,_,E){var A=f._dbSchema;_.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=$r("$meta",Bs("")[0],[]),f._storeNames.push("$meta"));var R=f._createTransaction("readwrite",f._storeNames,A);R.create(_),R._completion.catch(E);var O=R._reject.bind(R),N=qe.transless||qe;$n(function(){return qe.trans=R,qe.transless=N,g!==0?(vi(f,_),G=g,((K=R).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(X){return X??G}):Ue.resolve(G)).then(function(X){return Z=X,F=R,$=_,ee=[],X=(U=f)._versions,Q=U._dbSchema=Fi(0,U.idbdb,$),(X=X.filter(function(se){return se._cfg.version>=Z})).length!==0?(X.forEach(function(se){ee.push(function(){var he=Q,fe=se._cfg.dbschema;fs(U,he,$),fs(U,fe,$),Q=U._dbSchema=fe;var ve=or(he,fe);ve.add.forEach(function(ke){Ra($,ke[0],ke[1].primKey,ke[1].indexes)}),ve.change.forEach(function(ke){if(ke.recreate)throw new Fe.Upgrade("Not yet support for changing primary key");var De=$.objectStore(ke.name);ke.add.forEach(function(je){return bi(De,je)}),ke.change.forEach(function(je){De.deleteIndex(je.name),bi(De,je)}),ke.del.forEach(function(je){return De.deleteIndex(je)})});var Oe=se._cfg.contentUpgrade;if(Oe&&se._cfg.version>Z){vi(U,$),F._memoizedTables={};var Me=P(fe);ve.del.forEach(function(ke){Me[ke]=he[ke]}),hs(U,[U.Transaction.prototype]),Ls(U,[U.Transaction.prototype],c(Me),Me),F.schema=Me;var xe,Pe=Te(Oe);return Pe&&ir(),ve=Ue.follow(function(){var ke;(xe=Oe(F))&&Pe&&(ke=On.bind(null,null),xe.then(ke,ke))}),xe&&typeof xe.then=="function"?Ue.resolve(xe):ve.then(function(){return xe})}}),ee.push(function(he){var fe,ve,Oe=se._cfg.dbschema;fe=Oe,ve=he,[].slice.call(ve.db.objectStoreNames).forEach(function(Me){return fe[Me]==null&&ve.db.deleteObjectStore(Me)}),hs(U,[U.Transaction.prototype]),Ls(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),F.schema=U._dbSchema}),ee.push(function(he){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===se._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(fe){return fe!=="$meta"})):he.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return ee.length?Ue.resolve(ee.shift()(F.idbtrans)).then(se):Ue.resolve()}().then(function(){Mu(Q,$)})):Ue.resolve();var U,Z,F,$,ee,Q}).catch(O)):(c(A).forEach(function(X){Ra(_,X,A[X].primKey,A[X].indexes)}),vi(f,_),void Ue.follow(function(){return f.on.populate.fire(R)}).catch(O));var K,G})}function Us(f,g){Mu(f._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=Fi(0,f.idbdb,g);fs(f,f._dbSchema,g);for(var E=0,A=or(_,f._dbSchema).change;E<A.length;E++){var R=function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=g.objectStore(O.name);O.add.forEach(function(K){Ln&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(K.src)),bi(N,K)})}(A[E]);if(typeof R=="object")return R.value}}function or(f,g){var _,E={del:[],add:[],change:[]};for(_ in f)g[_]||E.del.push(_);for(_ in g){var A=f[_],R=g[_];if(A){var O={name:_,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||A.primKey.auto!==R.primKey.auto)O.recreate=!0,E.change.push(O);else{var N=A.idxByName,K=R.idxByName,G=void 0;for(G in N)K[G]||O.del.push(G);for(G in K){var X=N[G],U=K[G];X?X.src!==U.src&&O.change.push(U):O.add.push(U)}(0<O.del.length||0<O.add.length||0<O.change.length)&&E.change.push(O)}}else E.add.push([_,R])}return E}function Ra(f,g,_,E){var A=f.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return E.forEach(function(R){return bi(A,R)}),A}function Mu(f,g){c(f).forEach(function(_){g.db.objectStoreNames.contains(_)||(Ln&&console.debug("Dexie: Creating missing table",_),Ra(g,_,f[_].primKey,f[_].indexes))})}function bi(f,g){f.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Fi(f,g,_){var E={};return me(g.objectStoreNames,0).forEach(function(A){for(var R=_.objectStore(A),O=Pr(ji(G=R.keyPath),G||"",!0,!1,!!R.autoIncrement,G&&typeof G!="string",!0),N=[],K=0;K<R.indexNames.length;++K){var X=R.index(R.indexNames[K]),G=X.keyPath,X=Pr(X.name,G,!!X.unique,!!X.multiEntry,!1,G&&typeof G!="string",!1);N.push(X)}E[A]=$r(A,O,N)}),E}function fs(f,g,_){for(var E=_.db.objectStoreNames,A=0;A<E.length;++A){var R=E[A],O=_.objectStore(R);f._hasGetAll="getAll"in O;for(var N=0;N<O.indexNames.length;++N){var K=O.indexNames[N],G=O.index(K).keyPath,X=typeof G=="string"?G:"["+me(G).join("+")+"]";!g[R]||(G=g[R].idxByName[X])&&(G.name=K,delete g[R].idxByName[X],g[R].idxByName[K]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Bs(f){return f.split(",").map(function(g,_){var E=(g=g.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(E)?E.match(/^\[(.*)\]$/)[1].split("+"):E;return Pr(E,A||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),d(A),_===0)})}var ku=(Ki.prototype._parseStoresSpec=function(f,g){c(f).forEach(function(_){if(f[_]!==null){var E=Bs(f[_]),A=E.shift();if(A.unique=!0,A.multi)throw new Fe.Schema("Primary key cannot be multi-valued");E.forEach(function(R){if(R.auto)throw new Fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!R.keyPath)throw new Fe.Schema("Index must have a name and cannot be an empty string")}),g[_]=$r(_,A,E)}})},Ki.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,_):_;var _=g._versions,E={},A={};return _.forEach(function(R){p(E,R._cfg.storesSource),A=R._cfg.dbschema={},R._parseStoresSpec(E,A)}),g._dbSchema=A,hs(g,[g._allTables,g,g.Transaction.prototype]),Ls(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],c(A),A),g._storeNames=c(A),this},Ki.prototype.upgrade=function(f){return this._cfg.contentUpgrade=rs(this._cfg.contentUpgrade||Tt,f),this},Ki);function Ki(){}function Oo(f,g){var _=f._dbNamesDB;return _||(_=f._dbNamesDB=new Si(_r,{addons:[],indexedDB:f,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function zs(f){return f&&typeof f.databases=="function"}function Hi(f){return $n(function(){return qe.letThrough=!0,f()})}function Ca(f){return!("from"in f)}var pn=function(f,g){if(!this){var _=new pn;return f&&"d"in f&&p(_,f),_}p(this,arguments.length?{d:1,from:f,to:1<arguments.length?g:f}:{d:0})};function Gi(f,g,_){var E=ht(g,_);if(!isNaN(E)){if(0<E)throw RangeError();if(Ca(f))return p(f,{from:g,to:_,d:1});var A=f.l,E=f.r;if(ht(_,f.from)<0)return A?Gi(A,g,_):f.l={from:g,to:_,d:1,l:null,r:null},No(f);if(0<ht(g,f.to))return E?Gi(E,g,_):f.r={from:g,to:_,d:1,l:null,r:null},No(f);ht(g,f.from)<0&&(f.from=g,f.l=null,f.d=E?E.d+1:1),0<ht(_,f.to)&&(f.to=_,f.r=null,f.d=f.l?f.l.d+1:1),_=!f.r,A&&!f.l&&Wr(f,A),E&&_&&Wr(f,E)}}function Wr(f,g){Ca(g)||function _(E,K){var R=K.from,O=K.to,N=K.l,K=K.r;Gi(E,R,O),N&&_(E,N),K&&_(E,K)}(f,g)}function Po(f,g){var _=Qi(g),E=_.next();if(E.done)return!1;for(var A=E.value,R=Qi(f),O=R.next(A.from),N=O.value;!E.done&&!O.done;){if(ht(N.from,A.to)<=0&&0<=ht(N.to,A.from))return!0;ht(A.from,N.from)<0?A=(E=_.next(N.from)).value:N=(O=R.next(A.from)).value}return!1}function Qi(f){var g=Ca(f)?null:{s:0,n:f};return{next:function(_){for(var E=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,E)for(;g.n.l&&ht(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!E||ht(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function No(f){var g,_,E=(((g=f.r)===null||g===void 0?void 0:g.d)||0)-(((_=f.l)===null||_===void 0?void 0:_.d)||0),A=1<E?"r":E<-1?"l":"";A&&(g=A=="r"?"l":"r",_=r({},f),E=f[A],f.from=E.from,f.to=E.to,f[A]=E[A],_[A]=E[g],(f[g]=_).d=xa(_)),f.d=xa(f)}function xa(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function Vr(f,g){return c(g).forEach(function(_){f[_]?Wr(f[_],g[_]):f[_]=function E(A){var R,O,N={};for(R in A)I(A,R)&&(O=A[R],N[R]=!O||typeof O!="object"||Y.has(O.constructor)?O:E(O));return N}(g[_])}),f}function Da(f,g){return f.all||g.all||Object.keys(f).some(function(_){return g[_]&&Po(g[_],f[_])})}x(pn.prototype,((Er={add:function(f){return Wr(this,f),this},addKey:function(f){return Gi(this,f,f),this},addKeys:function(f){var g=this;return f.forEach(function(_){return Gi(g,_,_)}),this},hasKey:function(f){var g=Qi(this).next(f).value;return g&&ht(g.from,f)<=0&&0<=ht(g.to,f)}})[pe]=function(){return Qi(this)},Er));var Ei={},Oa={},Pa=!1;function Yi(f){Vr(Oa,f),Pa||(Pa=!0,setTimeout(function(){Pa=!1,Pn(Oa,!(Oa={}))},0))}function Pn(f,g){g===void 0&&(g=!1);var _=new Set;if(f.all)for(var E=0,A=Object.values(Ei);E<A.length;E++)Vo(O=A[E],f,_,g);else for(var R in f){var O,N=/^idb\:\/\/(.*)\/(.*)\//.exec(R);N&&(R=N[1],N=N[2],(O=Ei["idb://".concat(R,"/").concat(N)])&&Vo(O,f,_,g))}_.forEach(function(K){return K()})}function Vo(f,g,_,E){for(var A=[],R=0,O=Object.entries(f.queries.query);R<O.length;R++){for(var N=O[R],K=N[0],G=[],X=0,U=N[1];X<U.length;X++){var Z=U[X];Da(g,Z.obsSet)?Z.subscribers.forEach(function(Q){return _.add(Q)}):E&&G.push(Z)}E&&A.push([K,G])}if(E)for(var F=0,$=A;F<$.length;F++){var ee=$[F],K=ee[0],G=ee[1];f.queries.query[K]=G}}function Lu(f){var g=f._state,_=f._deps.indexedDB;if(g.isBeingOpened||f.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?$t(g.dbOpenError):f});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var E=g.openCanceller,A=Math.round(10*f.verno),R=!1;function O(){if(g.openCanceller!==E)throw new Fe.DatabaseClosed("db.open() was cancelled")}function N(){return new Ue(function(Z,F){if(O(),!_)throw new Fe.MissingAPI;var $=f.name,ee=g.autoSchema||!A?_.open($):_.open($,A);if(!ee)throw new Fe.MissingAPI;ee.onerror=sr(F),ee.onblocked=ut(f._fireOnBlocked),ee.onupgradeneeded=ut(function(Q){var se;X=ee.transaction,g.autoSchema&&!f._options.allowEmptyDB?(ee.onerror=ar,X.abort(),ee.result.close(),(se=_.deleteDatabase($)).onsuccess=se.onerror=ut(function(){F(new Fe.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(X.onerror=sr(F),Q=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,U=Q<1,f.idbdb=ee.result,R&&Us(f,X),_i(f,Q/10,X,F))},F),ee.onsuccess=ut(function(){X=null;var Q,se,he,fe,ve,Oe=f.idbdb=ee.result,Me=me(Oe.objectStoreNames);if(0<Me.length)try{var xe=Oe.transaction((fe=Me).length===1?fe[0]:fe,"readonly");if(g.autoSchema)se=Oe,he=xe,(Q=f).verno=se.version/10,he=Q._dbSchema=Fi(0,se,he),Q._storeNames=me(se.objectStoreNames,0),Ls(Q,[Q._allTables],c(he),he);else if(fs(f,f._dbSchema,xe),((ve=or(Fi(0,(ve=f).idbdb,xe),ve._dbSchema)).add.length||ve.change.some(function(Pe){return Pe.add.length||Pe.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Oe.close(),A=Oe.version+1,R=!0,Z(N());vi(f,xe)}catch{}vr.push(f),Oe.onversionchange=ut(function(Pe){g.vcFired=!0,f.on("versionchange").fire(Pe)}),Oe.onclose=ut(function(Pe){f.on("close").fire(Pe)}),U&&(ve=f._deps,xe=$,Oe=ve.indexedDB,ve=ve.IDBKeyRange,zs(Oe)||xe===_r||Oo(Oe,ve).put({name:xe}).catch(Tt)),Z()},F)}).catch(function(Z){switch(Z==null?void 0:Z.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(0<A)return A=0,N()}return Ue.reject(Z)})}var K,G=g.dbReadyResolve,X=null,U=!1;return Ue.race([E,(typeof navigator>"u"?Ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function F(){return indexedDB.databases().finally(Z)}K=setInterval(F,100),F()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(N)]).then(function(){return O(),g.onReadyBeingFired=[],Ue.resolve(Hi(function(){return f.on.ready.fire(f.vip)})).then(function Z(){if(0<g.onReadyBeingFired.length){var F=g.onReadyBeingFired.reduce(rs,Tt);return g.onReadyBeingFired=[],Ue.resolve(Hi(function(){return F(f.vip)})).then(Z)}})}).finally(function(){g.openCanceller===E&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(Z){g.dbOpenError=Z;try{X&&X.abort()}catch{}return E===g.openCanceller&&f._close(),$t(Z)}).finally(function(){g.openComplete=!0,G()}).then(function(){var Z;return U&&(Z={},f.tables.forEach(function(F){F.schema.indexes.forEach(function($){$.name&&(Z["idb://".concat(f.name,"/").concat(F.name,"/").concat($.name)]=new pn(-1/0,[[[]]]))}),Z["idb://".concat(f.name,"/").concat(F.name,"/")]=Z["idb://".concat(f.name,"/").concat(F.name,"/:dels")]=new pn(-1/0,[[[]]])}),Sn(cs).fire(Z),Pn(Z,!0)),f})}function Mr(f){function g(R){return f.next(R)}var _=A(g),E=A(function(R){return f.throw(R)});function A(R){return function(K){var N=R(K),K=N.value;return N.done?K:K&&typeof K.then=="function"?K.then(_,E):d(K)?Promise.all(K).then(_,E):_(K)}}return A(g)()}function h(f,g,_){for(var E=d(f)?f.slice():[f],A=0;A<_;++A)E.push(g);return E}var b={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(g){var _=f.table(g),E=_.schema,A={},R=[];function O(U,Z,F){var $=tn(U),ee=A[$]=A[$]||[],Q=U==null?0:typeof U=="string"?1:U.length,se=0<Z,se=r(r({},F),{name:se?"".concat($,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:se,keyTail:Z,keyLength:Q,extractKey:Nr(U),unique:!se&&F.unique});return ee.push(se),se.isPrimaryKey||R.push(se),1<Q&&O(Q===2?U[0]:U.slice(0,Q-1),Z+1,F),ee.sort(function(he,fe){return he.keyTail-fe.keyTail}),se}g=O(E.primaryKey.keyPath,0,E.primaryKey),A[":id"]=[g];for(var N=0,K=E.indexes;N<K.length;N++){var G=K[N];O(G.keyPath,0,G)}function X(U){var Z,F=U.query.index;return F.isVirtual?r(r({},U),{query:{index:F.lowLevelIndex,range:(Z=U.query.range,F=F.keyTail,{type:Z.type===1?2:Z.type,lower:h(Z.lower,Z.lowerOpen?f.MAX_KEY:f.MIN_KEY,F),lowerOpen:!0,upper:h(Z.upper,Z.upperOpen?f.MIN_KEY:f.MAX_KEY,F),upperOpen:!0})}}):U}return r(r({},_),{schema:r(r({},E),{primaryKey:g,indexes:R,getIndexByKeyPath:function(U){return(U=A[tn(U)])&&U[0]}}),count:function(U){return _.count(X(U))},query:function(U){return _.query(X(U))},openCursor:function(U){var Z=U.query.index,F=Z.keyTail,$=Z.isVirtual,ee=Z.keyLength;return $?_.openCursor(X(U)).then(function(se){return se&&Q(se)}):_.openCursor(U);function Q(se){return Object.create(se,{continue:{value:function(he){he!=null?se.continue(h(he,U.reverse?f.MAX_KEY:f.MIN_KEY,F)):U.unique?se.continue(se.key.slice(0,ee).concat(U.reverse?f.MIN_KEY:f.MAX_KEY,F)):se.continue()}},continuePrimaryKey:{value:function(he,fe){se.continuePrimaryKey(h(he,f.MAX_KEY,F),fe)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var he=se.key;return ee===1?he[0]:he.slice(0,ee)}},value:{get:function(){return se.value}}})}}})}})}};function w(f,g,_,E){return _=_||{},E=E||"",c(f).forEach(function(A){var R,O,N;I(g,A)?(R=f[A],O=g[A],typeof R=="object"&&typeof O=="object"&&R&&O?(N=Yt(R))!==Yt(O)?_[E+A]=g[A]:N==="Object"?w(R,O,_,E+A+"."):R!==O&&(_[E+A]=g[A]):R!==O&&(_[E+A]=g[A])):_[E+A]=void 0}),c(g).forEach(function(A){I(f,A)||(_[E+A]=g[A])}),_}function D(f,g){return g.type==="delete"?g.keys:g.keys||g.values.map(f.extractKey)}var te={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(g){var _=f.table(g),E=_.schema.primaryKey;return r(r({},_),{mutate:function(A){var R=qe.trans,O=R.table(g).hook,N=O.deleting,K=O.creating,G=O.updating;switch(A.type){case"add":if(K.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"put":if(K.fire===Tt&&G.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"delete":if(N.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"deleteRange":if(N.fire===Tt)break;return R._promise("readwrite",function(){return function U(Z,F,$){return _.query({trans:Z,values:!1,query:{index:E,range:F},limit:$}).then(function(ee){var Q=ee.result;return X({type:"delete",keys:Q,trans:Z}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):Q.length<$?{failures:[],numFailures:0,lastResult:void 0}:U(Z,r(r({},F),{lower:Q[Q.length-1],lowerOpen:!0}),$)})})}(A.trans,A.range,1e4)},!0)}return _.mutate(A);function X(U){var Z,F,$,ee=qe.trans,Q=U.keys||D(E,U);if(!Q)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?r(r({},U),{keys:Q}):r({},U)).type!=="delete"&&(U.values=a([],U.values)),U.keys&&(U.keys=a([],U.keys)),Z=_,$=Q,((F=U).type==="add"?Promise.resolve([]):Z.getMany({trans:F.trans,keys:$,cache:"immutable"})).then(function(se){var he=Q.map(function(fe,ve){var Oe,Me,xe,Pe=se[ve],ke={onerror:null,onsuccess:null};return U.type==="delete"?N.fire.call(ke,fe,Pe,ee):U.type==="add"||Pe===void 0?(Oe=K.fire.call(ke,fe,U.values[ve],ee),fe==null&&Oe!=null&&(U.keys[ve]=fe=Oe,E.outbound||L(U.values[ve],E.keyPath,fe))):(Oe=w(Pe,U.values[ve]),(Me=G.fire.call(ke,Oe,fe,Pe,ee))&&(xe=U.values[ve],Object.keys(Me).forEach(function(De){I(xe,De)?xe[De]=Me[De]:L(xe,De,Me[De])}))),ke});return _.mutate(U).then(function(fe){for(var ve=fe.failures,Oe=fe.results,Me=fe.numFailures,fe=fe.lastResult,xe=0;xe<Q.length;++xe){var Pe=(Oe||Q)[xe],ke=he[xe];Pe==null?ke.onerror&&ke.onerror(ve[xe]):ke.onsuccess&&ke.onsuccess(U.type==="put"&&se[xe]?U.values[xe]:Pe)}return{failures:ve,results:Oe,numFailures:Me,lastResult:fe}}).catch(function(fe){return he.forEach(function(ve){return ve.onerror&&ve.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function de(f,g,_){try{if(!g||g.keys.length<f.length)return null;for(var E=[],A=0,R=0;A<g.keys.length&&R<f.length;++A)ht(g.keys[A],f[R])===0&&(E.push(_?k(g.values[A]):g.values[A]),++R);return E.length===f.length?E:null}catch{return null}}var Ne={stack:"dbcore",level:-1,create:function(f){return{table:function(g){var _=f.table(g);return r(r({},_),{getMany:function(E){if(!E.cache)return _.getMany(E);var A=de(E.keys,E.trans._cache,E.cache==="clone");return A?Ue.resolve(A):_.getMany(E).then(function(R){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?k(R):R},R})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),_.mutate(E)}})}}}};function vt(f,g){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function cn(f,g){switch(f){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var wt={stack:"dbcore",level:0,name:"Observability",create:function(f){var g=f.schema.name,_=new pn(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(E,A,R){if(qe.subscr&&A!=="readonly")throw new Fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(qe.querier));return f.transaction(E,A,R)},table:function(E){var A=f.table(E),R=A.schema,O=R.primaryKey,U=R.indexes,N=O.extractKey,K=O.outbound,G=O.autoIncrement&&U.filter(function(F){return F.compound&&F.keyPath.includes(O.keyPath)}),X=r(r({},A),{mutate:function(F){function $(De){return De="idb://".concat(g,"/").concat(E,"/").concat(De),fe[De]||(fe[De]=new pn)}var ee,Q,se,he=F.trans,fe=F.mutatedParts||(F.mutatedParts={}),ve=$(""),Oe=$(":dels"),Me=F.type,ke=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[D(O,F).filter(function(De){return De}),F.values]:[],xe=ke[0],Pe=ke[1],ke=F.trans._cache;return d(xe)?(ve.addKeys(xe),(ke=Me==="delete"||xe.length===Pe.length?de(xe,ke):null)||Oe.addKeys(xe),(ke||Pe)&&(ee=$,Q=ke,se=Pe,R.indexes.forEach(function(De){var je=ee(De.name||"");function Je(lt){return lt!=null?De.extractKey(lt):null}function tt(lt){return De.multiEntry&&d(lt)?lt.forEach(function(Zn){return je.addKey(Zn)}):je.addKey(lt)}(Q||se).forEach(function(lt,yn){var it=Q&&Je(Q[yn]),yn=se&&Je(se[yn]);ht(it,yn)!==0&&(it!=null&&tt(it),yn!=null&&tt(yn))})}))):xe?(Pe={from:(Pe=xe.lower)!==null&&Pe!==void 0?Pe:f.MIN_KEY,to:(Pe=xe.upper)!==null&&Pe!==void 0?Pe:f.MAX_KEY},Oe.add(Pe),ve.add(Pe)):(ve.add(_),Oe.add(_),R.indexes.forEach(function(De){return $(De.name).add(_)})),A.mutate(F).then(function(De){return!xe||F.type!=="add"&&F.type!=="put"||(ve.addKeys(De.results),G&&G.forEach(function(je){for(var Je=F.values.map(function(it){return je.extractKey(it)}),tt=je.keyPath.findIndex(function(it){return it===O.keyPath}),lt=0,Zn=De.results.length;lt<Zn;++lt)Je[lt][tt]=De.results[lt];$(je.name).addKeys(Je)})),he.mutatedParts=Vr(he.mutatedParts||{},fe),De})}}),U=function($){var ee=$.query,$=ee.index,ee=ee.range;return[$,new pn(($=ee.lower)!==null&&$!==void 0?$:f.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:f.MAX_KEY)]},Z={get:function(F){return[O,new pn(F.key)]},getMany:function(F){return[O,new pn().addKeys(F.keys)]},count:U,query:U,openCursor:U};return c(Z).forEach(function(F){X[F]=function($){var ee=qe.subscr,Q=!!ee,se=vt(qe,A)&&cn(F,$)?$.obsSet={}:ee;if(Q){var he=function(Pe){return Pe="idb://".concat(g,"/").concat(E,"/").concat(Pe),se[Pe]||(se[Pe]=new pn)},fe=he(""),ve=he(":dels"),ee=Z[F]($),Q=ee[0],ee=ee[1];if((F==="query"&&Q.isPrimaryKey&&!$.values?ve:he(Q.name||"")).add(ee),!Q.isPrimaryKey){if(F!=="count"){var Oe=F==="query"&&K&&$.values&&A.query(r(r({},$),{values:!1}));return A[F].apply(this,arguments).then(function(Pe){if(F==="query"){if(K&&$.values)return Oe.then(function(Je){return Je=Je.result,fe.addKeys(Je),Pe});var ke=$.values?Pe.result.map(N):Pe.result;($.values?fe:ve).addKeys(ke)}else if(F==="openCursor"){var De=Pe,je=$.values;return De&&Object.create(De,{key:{get:function(){return ve.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var Je=De.primaryKey;return ve.addKey(Je),Je}},value:{get:function(){return je&&fe.addKey(De.primaryKey),De.value}}})}return Pe})}ve.add(_)}}return A[F].apply(this,arguments)}}),X}})}};function gn(f,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var E=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===E?null:(g=r({},g),d(g.keys)&&(g.keys=g.keys.filter(function(A,R){return!(R in _.failures)})),"values"in g&&d(g.values)&&(g.values=g.values.filter(function(A,R){return!(R in _.failures)})),g)}function sn(f,g){return _=f,((E=g).lower===void 0||(E.lowerOpen?0<ht(_,E.lower):0<=ht(_,E.lower)))&&(f=f,(g=g).upper===void 0||(g.upperOpen?ht(f,g.upper)<0:ht(f,g.upper)<=0));var _,E}function Ti(f,g,Z,E,A,R){if(!Z||Z.length===0)return f;var O=g.query.index,N=O.multiEntry,K=g.query.range,G=E.schema.primaryKey.extractKey,X=O.extractKey,U=(O.lowLevelIndex||O).extractKey,Z=Z.reduce(function(F,$){var ee=F,Q=[];if($.type==="add"||$.type==="put")for(var se=new pn,he=$.values.length-1;0<=he;--he){var fe,ve=$.values[he],Oe=G(ve);se.hasKey(Oe)||(fe=X(ve),(N&&d(fe)?fe.some(function(De){return sn(De,K)}):sn(fe,K))&&(se.addKey(Oe),Q.push(ve)))}switch($.type){case"add":var Me=new pn().addKeys(g.values?F.map(function(je){return G(je)}):F),ee=F.concat(g.values?Q.filter(function(je){return je=G(je),!Me.hasKey(je)&&(Me.addKey(je),!0)}):Q.map(function(je){return G(je)}).filter(function(je){return!Me.hasKey(je)&&(Me.addKey(je),!0)}));break;case"put":var xe=new pn().addKeys($.values.map(function(je){return G(je)}));ee=F.filter(function(je){return!xe.hasKey(g.values?G(je):je)}).concat(g.values?Q:Q.map(function(je){return G(je)}));break;case"delete":var Pe=new pn().addKeys($.keys);ee=F.filter(function(je){return!Pe.hasKey(g.values?G(je):je)});break;case"deleteRange":var ke=$.range;ee=F.filter(function(je){return!sn(G(je),ke)})}return ee},f);return Z===f?f:(Z.sort(function(F,$){return ht(U(F),U($))||ht(G(F),G($))}),g.limit&&g.limit<1/0&&(Z.length>g.limit?Z.length=g.limit:f.length===g.limit&&Z.length<g.limit&&(A.dirty=!0)),R?Object.freeze(Z):Z)}function An(f,g){return ht(f.lower,g.lower)===0&&ht(f.upper,g.upper)===0&&!!f.lowerOpen==!!g.lowerOpen&&!!f.upperOpen==!!g.upperOpen}function wi(f,g){return function(_,E,A,R){if(_===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ht(_,E))===0){if(A&&R)return 0;if(A)return 1;if(R)return-1}return E}(f.lower,g.lower,f.lowerOpen,g.lowerOpen)<=0&&0<=function(_,E,A,R){if(_===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ht(_,E))===0){if(A&&R)return 0;if(A)return-1;if(R)return 1}return E}(f.upper,g.upper,f.upperOpen,g.upperOpen)}function Mo(f,g,_,E){f.subscribers.add(_),E.addEventListener("abort",function(){var A,R;f.subscribers.delete(_),f.subscribers.size===0&&(A=f,R=g,setTimeout(function(){A.subscribers.size===0&&Qe(R,A)},3e3))})}var Uu={stack:"dbcore",level:0,name:"Cache",create:function(f){var g=f.schema.name;return r(r({},f),{transaction:function(_,E,A){var R,O,N=f.transaction(_,E,A);return E==="readwrite"&&(O=(R=new AbortController).signal,A=function(K){return function(){if(R.abort(),E==="readwrite"){for(var G=new Set,X=0,U=_;X<U.length;X++){var Z=U[X],F=Ei["idb://".concat(g,"/").concat(Z)];if(F){var $=f.table(Z),ee=F.optimisticOps.filter(function(je){return je.trans===N});if(N._explicit&&K&&N.mutatedParts)for(var Q=0,se=Object.values(F.queries.query);Q<se.length;Q++)for(var he=0,fe=(Me=se[Q]).slice();he<fe.length;he++)Da((xe=fe[he]).obsSet,N.mutatedParts)&&(Qe(Me,xe),xe.subscribers.forEach(function(je){return G.add(je)}));else if(0<ee.length){F.optimisticOps=F.optimisticOps.filter(function(je){return je.trans!==N});for(var ve=0,Oe=Object.values(F.queries.query);ve<Oe.length;ve++)for(var Me,xe,Pe,ke=0,De=(Me=Oe[ve]).slice();ke<De.length;ke++)(xe=De[ke]).res!=null&&N.mutatedParts&&(K&&!xe.dirty?(Pe=Object.isFrozen(xe.res),Pe=Ti(xe.res,xe.req,ee,$,xe,Pe),xe.dirty?(Qe(Me,xe),xe.subscribers.forEach(function(je){return G.add(je)})):Pe!==xe.res&&(xe.res=Pe,xe.promise=Ue.resolve({result:Pe}))):(xe.dirty&&Qe(Me,xe),xe.subscribers.forEach(function(je){return G.add(je)})))}}}G.forEach(function(je){return je()})}}},N.addEventListener("abort",A(!1),{signal:O}),N.addEventListener("error",A(!1),{signal:O}),N.addEventListener("complete",A(!0),{signal:O})),N},table:function(_){var E=f.table(_),A=E.schema.primaryKey;return r(r({},E),{mutate:function(R){var O=qe.trans;if(A.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return E.mutate(R);var N=Ei["idb://".concat(g,"/").concat(_)];return N?(O=E.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||D(A,R).some(function(K){return K==null}))?(N.optimisticOps.push(R),R.mutatedParts&&Yi(R.mutatedParts),O.then(function(K){0<K.numFailures&&(Qe(N.optimisticOps,R),(K=gn(0,R,K))&&N.optimisticOps.push(K),R.mutatedParts&&Yi(R.mutatedParts))}),O.catch(function(){Qe(N.optimisticOps,R),R.mutatedParts&&Yi(R.mutatedParts)})):O.then(function(K){var G=gn(0,r(r({},R),{values:R.values.map(function(X,U){var Z;return K.failures[U]?X:(X=(Z=A.keyPath)!==null&&Z!==void 0&&Z.includes(".")?k(X):r({},X),L(X,A.keyPath,K.results[U]),X)})}),K);N.optimisticOps.push(G),queueMicrotask(function(){return R.mutatedParts&&Yi(R.mutatedParts)})}),O):E.mutate(R)},query:function(R){if(!vt(qe,E)||!cn("query",R))return E.query(R);var O=((G=qe.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",U=qe,N=U.requery,K=U.signal,G=function($,ee,Q,se){var he=Ei["idb://".concat($,"/").concat(ee)];if(!he)return[];if(!(ee=he.queries[Q]))return[null,!1,he,null];var fe=ee[(se.query?se.query.index.name:null)||""];if(!fe)return[null,!1,he,null];switch(Q){case"query":var ve=fe.find(function(Oe){return Oe.req.limit===se.limit&&Oe.req.values===se.values&&An(Oe.req.query.range,se.query.range)});return ve?[ve,!0,he,fe]:[fe.find(function(Oe){return("limit"in Oe.req?Oe.req.limit:1/0)>=se.limit&&(!se.values||Oe.req.values)&&wi(Oe.req.query.range,se.query.range)}),!1,he,fe];case"count":return ve=fe.find(function(Oe){return An(Oe.req.query.range,se.query.range)}),[ve,!!ve,he,fe]}}(g,_,"query",R),X=G[0],U=G[1],Z=G[2],F=G[3];return X&&U?X.obsSet=R.obsSet:(U=E.query(R).then(function($){var ee=$.result;if(X&&(X.res=ee),O){for(var Q=0,se=ee.length;Q<se;++Q)Object.freeze(ee[Q]);Object.freeze(ee)}else $.result=k(ee);return $}).catch(function($){return F&&X&&Qe(F,X),Promise.reject($)}),X={obsSet:R.obsSet,promise:U,subscribers:new Set,type:"query",req:R,dirty:!1},F?F.push(X):(F=[X],(Z=Z||(Ei["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=F)),Mo(X,F,N,K),X.promise.then(function($){return{result:Ti($.result,R,Z==null?void 0:Z.optimisticOps,E,X,O)}})}})}})}};function ko(f,g){return new Proxy(f,{get:function(_,E,A){return E==="db"?g:Reflect.get(_,E,A)}})}var Si=(Wt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Fe.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var g=this._versions,_=g.filter(function(E){return E._cfg.version===f})[0];return _||(_=new this.Version(f),g.push(_),g.sort(Ia),_.stores({}),this._state.autoSchema=!1,_)},Wt.prototype._whenReady=function(f){var g=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?f():new Ue(function(_,E){if(g._state.openComplete)return E(new Fe.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void E(new Fe.DatabaseClosed);g.open().catch(Tt)}g._state.dbReadyPromise.then(_,E)}).then(f)},Wt.prototype.use=function(f){var g=f.stack,_=f.create,E=f.level,A=f.name;return A&&this.unuse({stack:g,name:A}),f=this._middlewares[g]||(this._middlewares[g]=[]),f.push({stack:g,create:_,level:E??10,name:A}),f.sort(function(R,O){return R.level-O.level}),this},Wt.prototype.unuse=function(f){var g=f.stack,_=f.name,E=f.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(A){return E?A.create!==E:!!_&&A.name!==_})),this},Wt.prototype.open=function(){var f=this;return Rr(wn,function(){return Lu(f)})},Wt.prototype._close=function(){var f=this._state,g=vr.indexOf(this);if(0<=g&&vr.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ue(function(_){f.dbReadyResolve=_}),f.openCanceller=new Ue(function(_,E){f.cancelOpen=E}))},Wt.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new Fe.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Fe.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Wt.prototype.delete=function(f){var g=this;f===void 0&&(f={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ue(function(A,R){function O(){g.close(f);var N=g._deps.indexedDB.deleteDatabase(g.name);N.onsuccess=ut(function(){var K,G,X;K=g._deps,G=g.name,X=K.indexedDB,K=K.IDBKeyRange,zs(X)||G===_r||Oo(X,K).delete(G).catch(Tt),A()}),N.onerror=sr(R),N.onblocked=g._fireOnBlocked}if(_)throw new Fe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(O):O()})},Wt.prototype.backendDB=function(){return this.idbdb},Wt.prototype.isOpen=function(){return this.idbdb!==null},Wt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Wt.prototype,"tables",{get:function(){var f=this;return c(this._allTables).map(function(g){return f._allTables[g]})},enumerable:!1,configurable:!0}),Wt.prototype.transaction=function(){var f=(function(g,_,E){var A=arguments.length;if(A<2)throw new Fe.InvalidArgument("Too few arguments");for(var R=new Array(A-1);--A;)R[A-1]=arguments[A];return E=R.pop(),[g,q(R),E]}).apply(this,arguments);return this._transaction.apply(this,f)},Wt.prototype._transaction=function(f,g,_){var E=this,A=qe.trans;A&&A.db===this&&f.indexOf("!")===-1||(A=null);var R,O,N=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=g.map(function(G){if(G=G instanceof E.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),f=="r"||f===mn)R=mn;else{if(f!="rw"&&f!=ki)throw new Fe.InvalidArgument("Invalid transaction mode: "+f);R=ki}if(A){if(A.mode===mn&&R===ki){if(!N)throw new Fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&O.forEach(function(G){if(A&&A.storeNames.indexOf(G)===-1){if(!N)throw new Fe.SubTransaction("Table "+G+" not included in parent transaction.");A=null}}),N&&A&&!A.active&&(A=null)}}catch(G){return A?A._promise(null,function(X,U){U(G)}):$t(G)}var K=(function G(X,U,Z,F,$){return Ue.resolve().then(function(){var ee=qe.transless||qe,Q=X._createTransaction(U,Z,X._dbSchema,F);if(Q.explicit=!0,ee={trans:Q,transless:ee},F)Q.idbtrans=F.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(fe){return fe.name===un.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,U,Z,null,$)})):$t(fe)}var se,he=Te($);return he&&ir(),ee=Ue.follow(function(){var fe;(se=$.call(Q,Q))&&(he?(fe=On.bind(null,null),se.then(fe,fe)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=Mr(se)))},ee),(se&&typeof se.then=="function"?Ue.resolve(se).then(function(fe){return Q.active?fe:$t(new Fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return se})).then(function(fe){return F&&Q._resolve(),Q._completion.then(function(){return fe})}).catch(function(fe){return Q._reject(fe),$t(fe)})})}).bind(null,this,R,O,A,_);return A?A._promise(R,K,"lock"):qe.trans?Rr(qe.transless,function(){return E._whenReady(K)}):this._whenReady(K)},Wt.prototype.table=function(f){if(!I(this._allTables,f))throw new Fe.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Wt);function Wt(f,g){var _=this;this._middlewares={},this.verno=0;var E=Wt.dependencies;this._options=g=r({addons:Wt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},E=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,R,O,N,K,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Tt,dbReadyPromise:null,cancelOpen:Tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};G.dbReadyPromise=new Ue(function(U){G.dbReadyResolve=U}),G.openCanceller=new Ue(function(U,Z){G.cancelOpen=Z}),this._state=G,this.name=f,this.on=pi(this,"populate","blocked","versionchange","close",{ready:[rs,Tt]}),this.on.ready.subscribe=ae(this.on.ready.subscribe,function(U){return function(Z,F){Wt.vip(function(){var $,ee=_._state;ee.openComplete?(ee.dbOpenError||Ue.resolve().then(Z),F&&U(Z)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(Z),F&&U(Z)):(U(Z),$=_,F||U(function Q(){$.on.ready.unsubscribe(Z),$.on.ready.unsubscribe(Q)}))})}}),this.Collection=(A=this,Ui(Dr.prototype,function(se,Q){this.db=A;var F=mi,$=null;if(Q)try{F=Q()}catch(he){$=he}var ee=se._ctx,Q=ee.table,se=Q.hook.reading.fire;this._ctx={table:Q,index:ee.index,isPrimKey:!ee.index||Q.schema.primKey.keyPath&&ee.index===Q.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:ee.or,valueMapper:se!==zr?se:null}})),this.Table=(R=this,Ui(wa.prototype,function(U,Z,F){this.db=R,this._tx=F,this.name=U,this.schema=Z,this.hook=R._allTables[U]?R._allTables[U].hook:pi(null,{creating:[Nu,Tt],reading:[Ds,zr],updating:[Xl,Tt],deleting:[Ir,Tt]})})),this.Transaction=(O=this,Ui(Or.prototype,function(U,Z,F,$,ee){var Q=this;this.db=O,this.mode=U,this.storeNames=Z,this.schema=F,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=pi(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ue(function(se,he){Q._resolve=se,Q._reject=he}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(se){var he=Q.active;return Q.active=!1,Q.on.error.fire(se),Q.parent?Q.parent._reject(se):he&&Q.idbtrans&&Q.idbtrans.abort(),$t(se)})})),this.Version=(N=this,Ui(ku.prototype,function(U){this.db=N,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,Ui(yi.prototype,function(U,Z,F){if(this.db=K,this._ctx={table:U,index:Z===":id"?null:Z,or:F},this._cmp=this._ascending=ht,this._descending=function($,ee){return ht(ee,$)},this._max=function($,ee){return 0<ht($,ee)?$:ee},this._min=function($,ee){return ht($,ee)<0?$:ee},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new Fe.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=qi(g.IDBKeyRange),this._createTransaction=function(U,Z,F,$){return new _.Transaction(U,Z,F,_._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(U){_.on("blocked").fire(U),vr.filter(function(Z){return Z.name===_.name&&Z!==_&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(U)})},this.use(Ne),this.use(Uu),this.use(wt),this.use(b),this.use(te);var X=new Proxy(this,{get:function(U,Z,F){if(Z==="_vip")return!0;if(Z==="table")return function(ee){return ko(_.table(ee),X)};var $=Reflect.get(U,Z,F);return $ instanceof wa?ko($,X):Z==="tables"?$.map(function(ee){return ko(ee,X)}):Z==="_createTransaction"?function(){return ko($.apply(this,arguments),X)}:$}});this.vip=X,E.forEach(function(U){return U(_)})}var Na,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",uf=(Bu.prototype.subscribe=function(f,g,_){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:g,complete:_})},Bu.prototype[Er]=function(){return this},Bu);function Bu(f){this._subscribe=f}try{Na={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Na={indexedDB:null,IDBKeyRange:null}}function lf(f){var g,_=!1,E=new uf(function(A){var R=Te(f),O,N=!1,K={},G={},X={get closed(){return N},unsubscribe:function(){N||(N=!0,O&&O.abort(),U&&Sn.storagemutated.unsubscribe(F))}};A.start&&A.start(X);var U=!1,Z=function(){return Qr($)},F=function(ee){Vr(K,ee),Da(G,K)&&Z()},$=function(){var ee,Q,se;!N&&Na.indexedDB&&(K={},ee={},O&&O.abort(),O=new AbortController,se=function(he){var fe=gr();try{R&&ir();var ve=$n(f,he);return ve=R?ve.finally(On):ve}finally{fe&&Mi()}}(Q={subscr:ee,signal:O.signal,requery:Z,querier:f,trans:null}),Promise.resolve(se).then(function(he){_=!0,g=he,N||Q.signal.aborted||(K={},function(fe){for(var ve in fe)if(I(fe,ve))return;return 1}(G=ee)||U||(Sn(cs,F),U=!0),Qr(function(){return!N&&A.next&&A.next(he)}))},function(he){_=!1,["DatabaseClosedError","AbortError"].includes(he==null?void 0:he.name)||N||Qr(function(){N||A.error&&A.error(he)})}))};return setTimeout(Z,0),X});return E.hasValue=function(){return _},E.getValue=function(){return g},E}var js=Si;function Wl(f){var g=ds;try{ds=!0,Sn.storagemutated.fire(f),Pn(f,!0)}finally{ds=g}}x(js,r(r({},Ar),{delete:function(f){return new js(f,{addons:[]}).delete()},exists:function(f){return new js(f,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return g=js.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(zs(_)?Promise.resolve(_.databases()).then(function(E){return E.map(function(A){return A.name}).filter(function(A){return A!==_r})}):Oo(_,g).toCollection().primaryKeys()).then(f)}catch{return $t(new Fe.MissingAPI)}var g,_},defineClass:function(){return function(f){p(this,f)}},ignoreTransaction:function(f){return qe.trans?Rr(qe.transless,f):f()},vip:Hi,async:function(f){return function(){try{var g=Mr(f.apply(this,arguments));return g&&typeof g.then=="function"?g:Ue.resolve(g)}catch(_){return $t(_)}}},spawn:function(f,g,_){try{var E=Mr(f.apply(_,g||[]));return E&&typeof E.then=="function"?E:Ue.resolve(E)}catch(A){return $t(A)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(f,g){return g=Ue.resolve(typeof f=="function"?js.ignoreTransaction(f):f).timeout(g||6e4),qe.trans?qe.trans.waitFor(g):g},Promise:Ue,debug:{get:function(){return Ln},set:function(f){Vu(f)}},derive:ce,extend:p,props:x,override:ae,Events:pi,on:Sn,liveQuery:lf,extendObservabilitySet:Vr,getByKeyPath:Ve,setByKeyPath:L,delByKeyPath:function(f,g){typeof g=="string"?L(f,g,void 0):"length"in g&&[].map.call(g,function(_){L(f,_,void 0)})},shallowClone:P,deepClone:k,getObjectDiff:w,cmp:ht,asap:Ce,minKey:-1/0,addons:[],connections:vr,errnames:un,dependencies:Na,cache:Ei,semVer:"4.0.11",version:"4.0.11".split(".").map(function(f){return parseInt(f)}).reduce(function(f,g,_){return f+g/Math.pow(10,2*_)})})),js.maxKey=qi(js.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Sn(cs,function(f){ds||(f=new CustomEvent(zi,{detail:f}),ds=!0,dispatchEvent(f),ds=!1)}),addEventListener(zi,function(f){f=f.detail,ds||Wl(f)}));var Va,ds=!1,ur=function(){};return typeof BroadcastChannel<"u"&&((ur=function(){(Va=new BroadcastChannel(zi)).onmessage=function(f){return f.data&&Wl(f.data)}})(),typeof Va.unref=="function"&&Va.unref(),Sn(cs,function(f){ds||Va.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Si.disableBfCache&&f.persisted){Ln&&console.debug("Dexie: handling persisted pagehide"),Va!=null&&Va.close();for(var g=0,_=vr;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Si.disableBfCache&&f.persisted&&(Ln&&console.debug("Dexie: handling persisted pageshow"),ur(),Wl({all:new pn(-1/0,[[]])}))})),Ue.rejectionMapper=function(f,g){return!f||f instanceof Ie||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Ni[f.name]?f:(g=new Ni[f.name](g||f.message,f),"stack"in f&&z(g,"stack",{get:function(){return this.inner.stack}}),g)},Vu(Ln),r(Si,Object.freeze({__proto__:null,Dexie:Si,liveQuery:lf,Entity:Ms,cmp:ht,PropModification:It,replacePrefix:function(f,g){return new It({replacePrefix:[f,g]})},add:function(f){return new It({add:f})},remove:function(f){return new It({remove:f})},default:Si,RangeSet:pn,mergeRanges:Wr,rangesOverlap:Po}),{default:Si}),Si})}(pd)),pd.exports}var MR=VR();const qg=yw(MR),Mb=Symbol.for("Dexie"),Od=globalThis[Mb]||(globalThis[Mb]=qg);if(qg.semVer!==Od.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${qg.semVer} and ${Od.semVer}`);const{liveQuery:rk,mergeRanges:ik,rangesOverlap:sk,RangeSet:ak,cmp:ok,Entity:uk,PropModification:lk,replacePrefix:ck,add:hk,remove:fk}=Od;class kR extends Od{constructor(){super("FoodTrackerDB");wb(this,"foods");this.version(1).stores({foods:"date"})}}const _w=new kR;async function LR(i,e){await _w.foods.put({date:i,selectedFoods:e})}async function UR(){return await _w.foods.toArray()}var Xo={},Lc={},Wo={},Eg={},Uc={},kb;function um(){return kb||(kb=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.settings=void 0,Uc.settings={debug:!1,gravity:800,zIndex:99999,respectReducedMotion:!0}),Uc}var Jo={},Bc={},Lb;function Ry(){if(Lb)return Bc;Lb=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.overrideDefaults=void 0;function i(e,t){return Object.assign({},e,t)}return Bc.overrideDefaults=i,Bc}var zc={},Zo={},jc={},Ub;function BR(){if(Ub)return jc;Ub=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.Circle=void 0;var i=function(){function e(t,r,a){a===void 0&&(a=0),this.x=t,this.y=r,this.radius=a}return e.zero=new e(0,0),e}();return jc.Circle=i,jc}var qc={},Tg={},Bb;function Cu(){return Bb||(Bb=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.approximately=i.clamp=i.invlerp=i.slerp=i.lerp=i.epsilon=i.rad2deg=i.deg2rad=void 0,i.deg2rad=Math.PI/180,i.rad2deg=180/Math.PI,i.epsilon=1e-6;function e(c,d,p){return(1-p)*c+p*d}i.lerp=e;function t(c,d,p){return e(c,d,(1-Math.cos(p*Math.PI))/2)}i.slerp=t;function r(c,d,p){return(p-c)/(d-c)}i.invlerp=r;function a(c,d,p){return Math.min(p,Math.max(d,c))}i.clamp=a;function u(c,d){return Math.abs(c-d)<i.epsilon}i.approximately=u}(Tg)),Tg}var zb;function zR(){if(zb)return qc;zb=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.Color=void 0;var i=Cu(),e=function(){function t(r,a,u){this.values=new Float32Array(3),this.rgb=[r,a,u]}return Object.defineProperty(t.prototype,"r",{get:function(){return this.values[0]},set:function(r){this.values[0]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this.values[1]},set:function(r){this.values[1]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.values[2]},set:function(r){this.values[2]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return[this.r,this.g,this.b]},set:function(r){this.r=r[0],this.g=r[1],this.b=r[2]},enumerable:!1,configurable:!0}),t.prototype.mix=function(r,a){return a===void 0&&(a=.5),new t(i.lerp(this.r,r.r,a),i.lerp(this.g,r.g,a),i.lerp(this.b,r.b,a))},t.prototype.toHex=function(){var r=function(a){return a.toString(16).padStart(2,"0")};return"#"+r(this.r)+r(this.g)+r(this.b)},t.prototype.toString=function(){return"rgb("+this.values.join(", ")+")"},t.fromHex=function(r){return r.startsWith("#")&&(r=r.substr(1)),new t(parseInt(r.substr(0,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(4,2),16))},t.fromHsl=function(r,a,u){if(r/=360,a/=100,u/=100,a===0)return new t(u,u,u);var c=function(T,I,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?T+(I-T)*6*x:x<.5?I:x<.6666666666666666?T+(I-T)*(.6666666666666666-x)*6:T},d=function(T){return Math.min(255,256*T)},p=u<.5?u*(1+a):u+a-u*a,v=2*u-p;return new t(d(c(v,p,r+1/3)),d(c(v,p,r)),d(c(v,p,r-1/3)))},t.white=new t(255,255,255),t.black=new t(0,0,0),t}();return qc.Color=e,qc}var ta={},Fc={},jb;function bw(){if(jb)return Fc;jb=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Spline=void 0;var i=Cu(),e=function(){function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(r.length===0)throw new Error("Splines require at least one key.");if(Array.isArray(r[0]))throw new Error("You are trying to pass an array to the spline constructor, which is not supported. Try to spread the array into the constructor instead.");this.keys=r}return t.prototype.evaluate=function(r){if(this.keys.length===0)throw new Error("Attempt to evaluate a spline with no keys.");if(this.keys.length===1)return this.keys[0].value;var a=this.keys.sort(function(v,T){return v.time-T.time}),u=a.findIndex(function(v){return v.time>r});if(u===0)return a[0].value;if(u===-1)return a[a.length-1].value;var c=a[u-1],d=a[u],p=i.invlerp(c.time,d.time,r);return this.interpolate(c.value,d.value,p)},t}();return Fc.Spline=e,Fc}var qb;function jR(){if(qb)return ta;qb=1;var i=ta&&ta.__extends||function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function d(){this.constructor=u}u.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=ta&&ta.__spreadArray||function(a,u){for(var c=0,d=u.length,p=a.length;c<d;c++,p++)a[p]=u[c];return a};Object.defineProperty(ta,"__esModule",{value:!0}),ta.Gradient=void 0;var t=bw(),r=function(a){i(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.interpolate=function(c,d,p){return c.mix(d,p)},u.solid=function(c){return new u({value:c,time:.5})},u.simple=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var p=1/(c.length-1);return new(u.bind.apply(u,e([void 0],c.map(function(v,T){return{value:v,time:T*p}}))))},u}(t.Spline);return ta.Gradient=r,ta}var eu={},Fb;function qR(){if(Fb)return eu;Fb=1;var i=eu&&eu.__extends||function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function d(){this.constructor=u}u.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(eu,"__esModule",{value:!0}),eu.NumericSpline=void 0;var e=Cu(),t=bw(),r=function(a){i(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.interpolate=function(c,d,p){return e.slerp(c,d,p)},u}(t.Spline);return eu.NumericSpline=r,eu}var Kc={},Kb;function FR(){if(Kb)return Kc;Kb=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.Rect=void 0;var i=function(){function e(t,r,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.x=t,this.y=r,this.width=a,this.height=u}return e.fromScreen=function(){return new e(window.scrollX,window.scrollY,window.innerWidth,window.innerHeight)},e.fromElement=function(t){var r=t.getBoundingClientRect();return new e(window.scrollX+r.x,window.scrollY+r.y,r.width,r.height)},e.zero=new e(0,0),e}();return Kc.Rect=i,Kc}var tu={},Hb;function Cy(){if(Hb)return tu;Hb=1;var i=tu&&tu.__spreadArray||function(r,a){for(var u=0,c=a.length,d=r.length;u<c;u++,d++)r[d]=a[u];return r};Object.defineProperty(tu,"__esModule",{value:!0}),tu.Vector=void 0;var e=Cu(),t=function(){function r(a,u,c){a===void 0&&(a=0),u===void 0&&(u=0),c===void 0&&(c=0),this.values=new Float32Array(3),this.xyz=[a,u,c]}return Object.defineProperty(r.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"z",{get:function(){return this.values[2]},set:function(a){this.values[2]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"xyz",{get:function(){return[this.x,this.y,this.z]},set:function(a){this.values[0]=a[0],this.values[1]=a[1],this.values[2]=a[2]},enumerable:!1,configurable:!0}),r.prototype.magnitude=function(){return Math.sqrt(this.sqrMagnitude())},r.prototype.sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},r.prototype.add=function(a){return new r(this.x+a.x,this.y+a.y,this.z+a.z)},r.prototype.subtract=function(a){return new r(this.x-a.x,this.y-a.y,this.z-a.z)},r.prototype.scale=function(a){return typeof a=="number"?new r(this.x*a,this.y*a,this.z*a):new r(this.x*a.x,this.y*a.y,this.z*a.z)},r.prototype.normalized=function(){var a=this.magnitude();return a!==0?this.scale(1/a):new(r.bind.apply(r,i([void 0],this.xyz)))},r.prototype.angle=function(a){return e.rad2deg*Math.acos((this.x*a.x+this.y*a.y+this.z*a.z)/(this.magnitude()*a.magnitude()))},r.prototype.cross=function(a){return new r(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},r.prototype.dot=function(a){return this.magnitude()*a.magnitude()*Math.cos(e.deg2rad*this.angle(a))},r.prototype.toString=function(){return"Vector("+this.values.join(", ")+")"},r.from2dAngle=function(a){return new r(Math.cos(a*e.deg2rad),Math.sin(a*e.deg2rad))},r.zero=new r(0,0,0),r.one=new r(1,1,1),r.right=new r(1,0,0),r.up=new r(0,1,0),r.forward=new r(0,0,1),r}();return tu.Vector=t,tu}var Gb;function da(){return Gb||(Gb=1,function(i){var e=Zo&&Zo.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=Zo&&Zo.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(BR(),i),t(zR(),i),t(jR(),i),t(qR(),i),t(FR(),i),t(Cy(),i)}(Zo)),Zo}var Qb;function KR(){if(Qb)return zc;Qb=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.rotationToNormal=void 0;var i=da(),e=Cu();function t(r){var a=r.x*e.deg2rad,u=r.y*e.deg2rad,c=new i.Vector(Math.cos(u),0,Math.sin(u)),d=new i.Vector(0,Math.cos(a),Math.sin(a));return c.cross(d)}return zc.rotationToNormal=t,zc}var Hc={},Yb;function Ew(){return Yb||(Yb=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.despawningRules=void 0,Hc.despawningRules={lifetime:function(i){return i.lifetime<=0},bounds:function(i){var e=document.documentElement.scrollHeight;return i.location.y>e}}),Hc}var Gc={},$b;function HR(){if($b)return Gc;$b=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.Lazy=void 0;var i=function(){function e(t,r){r===void 0&&(r=e.defaultExists),this.factory=t,this.exists=r}return Object.defineProperty(e.prototype,"current",{get:function(){return this.exists(this.value)||(this.value=this.factory()),this.value},enumerable:!1,configurable:!0}),e.defaultExists=function(t){return typeof t<"u"},e}();return Gc.Lazy=i,Gc}var Xb;function Sl(){return Xb||(Xb=1,function(i){var e=Jo&&Jo.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=Jo&&Jo.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(Ry(),i),t(KR(),i),t(Ew(),i),t(HR(),i)}(Jo)),Jo}var Wb;function Tw(){return Wb||(Wb=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.particleContainer=i.debugContainer=i.rootContainer=void 0;var e=um(),t=Sl(),r="party-js-";function a(c){return c&&c.isConnected}function u(c,d,p){var v=document.createElement("div");return v.id=r+c,Object.assign(v.style,d),p.appendChild(v)}i.rootContainer=new t.Lazy(function(){return u("container",{position:"fixed",left:"0",top:"0",height:"100vh",width:"100vw",pointerEvents:"none",userSelect:"none",zIndex:e.settings.zIndex.toString()},document.body)},a),i.debugContainer=new t.Lazy(function(){return u("debug",{position:"absolute",top:"0",left:"0",margin:"0.5em",padding:"0.5em 1em",border:"2px solid rgb(0, 0, 0, 0.2)",background:"rgb(0, 0, 0, 0.1)",color:"#555",fontFamily:"monospace"},i.rootContainer.current)},a),i.particleContainer=new t.Lazy(function(){return u("particles",{width:"100%",height:"100%",overflow:"hidden",perspective:"1200px"},i.rootContainer.current)},a)}(Eg)),Eg}var Jb;function GR(){if(Jb)return Wo;Jb=1;var i=Wo&&Wo.__spreadArray||function(a,u){for(var c=0,d=u.length,p=a.length;c<d;c++,p++)a[p]=u[c];return a};Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.Debug=void 0;var e=Tw(),t=um(),r=function(){function a(u){this.scene=u,this.refreshRate=8,this.refreshTimer=1/this.refreshRate}return a.prototype.tick=function(u){var c=e.debugContainer.current,d=t.settings.debug?"block":"none";c.style.display!==d&&(c.style.display=d),t.settings.debug&&(this.refreshTimer+=u,this.refreshTimer>1/this.refreshRate&&(this.refreshTimer=0,c.innerHTML=this.getDebugInformation(u).join("<br>")))},a.prototype.getDebugInformation=function(u){var c=this.scene.emitters.length,d=this.scene.emitters.reduce(function(T,I){return T+I.particles.length},0),p=["<b>party.js Debug</b>","--------------","FPS: "+Math.round(1/u),"Emitters: "+c,"Particles: "+d],v=this.scene.emitters.map(function(T){return["⭯: "+(T.currentLoop+1)+"/"+(T.options.loops>=0?T.options.loops:"∞"),"Σp: "+T.particles.length,T.isExpired?"<i>expired</i>":"Σt: "+T.durationTimer.toFixed(3)+"s"].join(", ")});return p.push.apply(p,i(["--------------"],v)),p},a}();return Wo.Debug=r,Wo}var Qc={},wr={},ii={},Zb;function zh(){if(Zb)return ii;Zb=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.randomInsideCircle=ii.randomInsideRect=ii.randomUnitVector=ii.pick=ii.randomRange=void 0;var i=da(),e=Cu();function t(d,p){return d===void 0&&(d=0),p===void 0&&(p=1),e.lerp(d,p,Math.random())}ii.randomRange=t;function r(d){return d.length===0?void 0:d[Math.floor(Math.random()*d.length)]}ii.pick=r;function a(){var d=t(0,2*Math.PI),p=t(-1,1);return new i.Vector(Math.sqrt(1-p*p)*Math.cos(d),Math.sqrt(1-p*p)*Math.sin(d),p)}ii.randomUnitVector=a;function u(d){return new i.Vector(d.x+t(0,d.width),d.y+t(0,d.height))}ii.randomInsideRect=u;function c(d){var p=t(0,2*Math.PI),v=t(0,d.radius);return new i.Vector(d.x+Math.cos(p)*v,d.y+Math.sin(p)*v)}return ii.randomInsideCircle=c,ii}var eE;function jh(){if(eE)return wr;eE=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.gradientSample=wr.splineSample=wr.skewRelative=wr.skew=wr.range=wr.evaluateVariation=void 0;var i=zh();function e(d){return Array.isArray(d)?i.pick(d):typeof d=="function"?d():d}wr.evaluateVariation=e;function t(d,p){return function(){return i.randomRange(d,p)}}wr.range=t;function r(d,p){return function(){return d+i.randomRange(-p,p)}}wr.skew=r;function a(d,p){return function(){return d*(1+i.randomRange(-p,p))}}wr.skewRelative=a;function u(d){return function(){return d.evaluate(Math.random())}}wr.splineSample=u;function c(d){return u(d)}return wr.gradientSample=c,wr}var nu={},Yc={},tE;function QR(){if(tE)return Yc;tE=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.getDefaultEmitterOptions=void 0;var i=Ew();function e(){return{duration:5,loops:1,useGravity:!0,maxParticles:300,despawningRules:[i.despawningRules.lifetime,i.despawningRules.bounds],modules:[]}}return Yc.getDefaultEmitterOptions=e,Yc}var $c={},si={},nE;function lm(){if(nE)return si;nE=1,Object.defineProperty(si,"__esModule",{value:!0}),si.circleSource=si.rectSource=si.mouseSource=si.elementSource=si.dynamicSource=void 0;var i=da(),e=zh();function t(d){if(d instanceof HTMLElement)return r(d);if(d instanceof i.Circle)return c(d);if(d instanceof i.Rect)return u(d);if(d instanceof MouseEvent)return a(d);throw new Error("Cannot infer the source type of '"+d+"'.")}si.dynamicSource=t;function r(d){return function(){return e.randomInsideRect(i.Rect.fromElement(d))}}si.elementSource=r;function a(d){return function(){return new i.Vector(window.scrollX+d.clientX,window.scrollY+d.clientY)}}si.mouseSource=a;function u(d){return function(){return e.randomInsideRect(d)}}si.rectSource=u;function c(d){return function(){return e.randomInsideCircle(d)}}return si.circleSource=c,si}var rE;function YR(){if(rE)return $c;rE=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.getDefaultEmissionOptions=void 0;var i=da(),e=lm();function t(){return{rate:10,angle:0,bursts:[],sourceSampler:e.rectSource(i.Rect.zero),initialLifetime:5,initialSpeed:5,initialSize:1,initialRotation:i.Vector.zero,initialColor:i.Color.white}}return $c.getDefaultEmissionOptions=t,$c}var Xc={},iE;function $R(){if(iE)return Xc;iE=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.getDefaultRendererOptions=void 0;function i(){return{shapeFactory:"square",applyColor:e,applyOpacity:t,applyLighting:r,applyTransform:a}}Xc.getDefaultRendererOptions=i;function e(u,c){var d=u.toHex();switch(c.nodeName.toLowerCase()){case"div":c.style.background=d;break;case"svg":c.style.fill=c.style.color=d;break;default:c.style.color=d;break}}function t(u,c){c.style.opacity=u.toString()}function r(u,c){c.style.filter="brightness("+(.5+Math.abs(u))+")"}function a(u,c){c.style.transform="translateX("+(u.location.x-window.scrollX).toFixed(3)+"px) "+("translateY("+(u.location.y-window.scrollY).toFixed(3)+"px) ")+("translateZ("+u.location.z.toFixed(3)+"px) ")+("rotateX("+u.rotation.x.toFixed(3)+"deg) ")+("rotateY("+u.rotation.y.toFixed(3)+"deg) ")+("rotateZ("+u.rotation.z.toFixed(3)+"deg) ")+("scale("+u.size.toFixed(3)+")")}return Xc}var sE;function XR(){return sE||(sE=1,function(i){var e=nu&&nu.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=nu&&nu.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(QR(),i),t(YR(),i),t($R(),i)}(nu)),nu}var Wc={},aE;function ww(){if(aE)return Wc;aE=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.Particle=void 0;var i=da(),e=Ry(),t=function(){function r(a){var u=e.overrideDefaults({lifetime:0,size:1,location:i.Vector.zero,rotation:i.Vector.zero,velocity:i.Vector.zero,color:i.Color.white,opacity:1},a);this.id=Symbol(),this.size=this.initialSize=u.size,this.lifetime=this.initialLifetime=u.lifetime,this.rotation=this.initialRotation=u.rotation,this.location=u.location,this.velocity=u.velocity,this.color=u.color,this.opacity=u.opacity}return r}();return Wc.Particle=t,Wc}var oE;function Sw(){if(oE)return Qc;oE=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.Emitter=void 0;var i=Cy(),e=um(),t=jh(),r=Ry(),a=XR(),u=ww(),c=function(){function d(p){this.particles=[],this.currentLoop=0,this.durationTimer=0,this.emissionTimer=0,this.attemptedBurstIndices=[],this.options=r.overrideDefaults(a.getDefaultEmitterOptions(),p==null?void 0:p.emitterOptions),this.emission=r.overrideDefaults(a.getDefaultEmissionOptions(),p==null?void 0:p.emissionOptions),this.renderer=r.overrideDefaults(a.getDefaultRendererOptions(),p==null?void 0:p.rendererOptions)}return Object.defineProperty(d.prototype,"isExpired",{get:function(){return this.options.loops>=0&&this.currentLoop>=this.options.loops},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"canRemove",{get:function(){return this.particles.length===0},enumerable:!1,configurable:!0}),d.prototype.clearParticles=function(){return this.particles.splice(0).length},d.prototype.tick=function(p){if(!this.isExpired&&(this.durationTimer+=p,this.durationTimer>=this.options.duration&&(this.currentLoop++,this.durationTimer=0,this.attemptedBurstIndices=[]),!this.isExpired)){for(var v=0,T=0,I=this.emission.bursts;T<I.length;T++){var x=I[T];if(x.time<=this.durationTimer&&!this.attemptedBurstIndices.includes(v)){for(var j=t.evaluateVariation(x.count),z=0;z<j;z++)this.emitParticle();this.attemptedBurstIndices.push(v)}v++}this.emissionTimer+=p;for(var ce=1/this.emission.rate;this.emissionTimer>ce;)this.emissionTimer-=ce,this.emitParticle()}for(var oe=function(me){var ae=ye.particles[me];ye.tickParticle(ae,p),ye.options.despawningRules.some(function(Re){return Re(ae)})&&ye.particles.splice(me,1)},ye=this,z=this.particles.length-1;z>=0;z--)oe(z)},d.prototype.tickParticle=function(p,v){p.lifetime-=v,this.options.useGravity&&(p.velocity=p.velocity.add(i.Vector.up.scale(e.settings.gravity*v))),p.location=p.location.add(p.velocity.scale(v));for(var T=0,I=this.options.modules;T<I.length;T++){var x=I[T];x(p)}},d.prototype.emitParticle=function(){var p=new u.Particle({location:this.emission.sourceSampler(),lifetime:t.evaluateVariation(this.emission.initialLifetime),velocity:i.Vector.from2dAngle(t.evaluateVariation(this.emission.angle)).scale(t.evaluateVariation(this.emission.initialSpeed)),size:t.evaluateVariation(this.emission.initialSize),rotation:t.evaluateVariation(this.emission.initialRotation),color:t.evaluateVariation(this.emission.initialColor)});return this.particles.push(p),this.particles.length>this.options.maxParticles&&this.particles.shift(),p},d}();return Qc.Emitter=c,Qc}var Jc={},wg={},uE;function Aw(){return uE||(uE=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.resolveShapeFactory=i.resolvableShapes=void 0;var e=jh();i.resolvableShapes={square:'<div style="height: 10px; width: 10px;"></div>',rectangle:'<div style="height: 6px; width: 10px;"></div>',circle:'<svg viewBox="0 0 2 2" width="10" height="10"><circle cx="1" cy="1" r="1" fill="currentColor"/></svg>',roundedSquare:'<div style="height: 10px; width: 10px; border-radius: 3px;"></div>',roundedRectangle:'<div style="height: 6px; width: 10px; border-radius: 3px;"></div>',star:'<svg viewBox="0 0 512 512" width="15" height="15"><polygon fill="currentColor" points="512,197.816 325.961,185.585 255.898,9.569 185.835,185.585 0,197.816 142.534,318.842 95.762,502.431 255.898,401.21 416.035,502.431 369.263,318.842"/></svg>'};function t(r){var a=e.evaluateVariation(r);if(typeof a=="string"){var u=i.resolvableShapes[a];if(!u)throw new Error("Failed to resolve shape key '"+a+"'. Did you forget to add it to the 'resolvableShapes' lookup?");var c=document.createElement("div");return c.innerHTML=u,c.firstElementChild}return a}i.resolveShapeFactory=t}(wg)),wg}var lE;function WR(){if(lE)return Jc;lE=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Renderer=void 0;var i=qh(),e=Cy(),t=Tw(),r=Aw(),a=Sl(),u=function(){function c(){this.elements=new Map,this.light=new e.Vector(0,0,1),this.enabled=!0,this.enabled=!i.settings.respectReducedMotion||!window.matchMedia("(prefers-reduced-motion)").matches}return c.prototype.begin=function(){this.renderedParticles=[]},c.prototype.end=function(){for(var d=this.elements.keys(),p=d.next();!p.done;){var v=p.value;this.renderedParticles.includes(v)||(this.elements.get(v).remove(),this.elements.delete(v)),p=d.next()}return this.renderedParticles.length},c.prototype.renderParticle=function(d,p){if(this.enabled){var v=p.renderer,T=this.elements.has(d.id)?this.elements.get(d.id):this.createParticleElement(d,v);if(v.applyColor&&v.applyColor(d.color,T),v.applyOpacity&&v.applyOpacity(d.opacity,T),v.applyLighting){var I=a.rotationToNormal(d.rotation),x=I.dot(this.light);v.applyLighting(x,T)}v.applyTransform&&v.applyTransform(d,T),this.renderedParticles.push(d.id)}},c.prototype.createParticleElement=function(d,p){var v=r.resolveShapeFactory(p.shapeFactory),T=v.cloneNode(!0);return T.style.position="absolute",this.elements.set(d.id,t.particleContainer.current.appendChild(T)),T},c}();return Jc.Renderer=u,Jc}var cE;function JR(){if(cE)return Lc;cE=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.Scene=void 0;var i=GR(),e=Sw(),t=WR(),r=function(){function a(){this.emitters=[],this.debug=new i.Debug(this),this.renderer=new t.Renderer,this.scheduledTickId=void 0,this.lastTickTimestamp=performance.now(),this.tick=this.tick.bind(this),this.scheduleTick()}return a.prototype.createEmitter=function(u){var c=new e.Emitter(u);return this.emitters.push(c),c},a.prototype.clearEmitters=function(){return this.emitters.splice(0).length},a.prototype.clearParticles=function(){return this.emitters.reduce(function(u,c){return u+c.clearParticles()},0)},a.prototype.scheduleTick=function(){this.scheduledTickId=window.requestAnimationFrame(this.tick)},a.prototype.cancelTick=function(){window.cancelAnimationFrame(this.scheduledTickId)},a.prototype.tick=function(u){var c=(u-this.lastTickTimestamp)/1e3;try{for(var d=0;d<this.emitters.length;d++){var p=this.emitters[d];p.tick(c),p.isExpired&&p.canRemove&&this.emitters.splice(d--,1)}}catch(z){console.error(`An error occurred while updating the scene's emitters:
"`+z+'"')}try{this.renderer.begin();for(var v=0,T=this.emitters;v<T.length;v++)for(var p=T[v],I=0,x=p.particles;I<x.length;I++){var j=x[I];this.renderer.renderParticle(j,p)}this.renderer.end()}catch(z){console.error(`An error occurred while rendering the scene's particles:
"`+z+'"')}this.debug.tick(c),this.lastTickTimestamp=u,this.scheduleTick()},a}();return Lc.Scene=r,Lc}var ru={},Zc={},eh={},hE;function xy(){if(hE)return eh;hE=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.ModuleBuilder=void 0;var i=da(),e=function(){function u(){this.factor="lifetime",this.isRelative=!1}return u.prototype.drive=function(c){return this.driverKey=c,this},u.prototype.through=function(c){return this.factor=c,this},u.prototype.by=function(c){return this.driverValue=c,this},u.prototype.relative=function(c){return c===void 0&&(c=!0),this.isRelative=c,this},u.prototype.build=function(){var c=this;if(typeof this.driverKey>"u")throw new Error("No driving key was provided in the module builder. Did you forget a '.drive()' call?");if(typeof this.driverValue>"u")throw new Error("No driving value was provided in the module builder. Did you forget a '.through()' call?");return function(d){a(d,c.driverKey,t(c.driverValue,r(c.factor,d),d),c.isRelative)}},u}();eh.ModuleBuilder=e;function t(u,c,d){return typeof u=="object"&&"evaluate"in u?u.evaluate(c):typeof u=="function"?u(c,d):u}function r(u,c){switch(u){case"lifetime":return c.initialLifetime-c.lifetime;case"relativeLifetime":return(c.initialLifetime-c.lifetime)/c.initialLifetime;case"size":return c.size;default:throw new Error("Invalid driving factor '"+u+"'.")}}function a(u,c,d,p){if(p===void 0&&(p=!1),!p)u[c]=d;else{var v=u["initial"+c[0].toUpperCase()+c.substr(1)];if(typeof v>"u")throw new Error("Unable to use relative chaining with key '"+c+"'; no initial value exists.");if(d instanceof i.Vector)a(u,c,v.add(d));else if(typeof d=="number")a(u,c,v*d);else throw new Error("Unable to use relative chaining with particle key '"+c+"'; no relative operation for '"+d+"' could be inferred.")}}return eh}var fE;function ZR(){if(fE)return Zc;fE=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.confetti=void 0;var i=qh(),e=da(),t=xy(),r=zh(),a=lm(),u=jh(),c=Sl();function d(p,v){var T=c.overrideDefaults({count:u.range(20,40),spread:u.range(35,45),speed:u.range(300,600),size:u.skew(1,.2),rotation:function(){return r.randomUnitVector().scale(180)},color:function(){return e.Color.fromHsl(r.randomRange(0,360),100,70)},modules:[new t.ModuleBuilder().drive("size").by(function(x){return Math.min(1,x*3)}).relative().build(),new t.ModuleBuilder().drive("rotation").by(function(x){return new e.Vector(140,200,260).scale(x)}).relative().build()],shapes:["square","circle"]},v),I=i.scene.current.createEmitter({emitterOptions:{loops:1,duration:8,modules:T.modules},emissionOptions:{rate:0,bursts:[{time:0,count:T.count}],sourceSampler:a.dynamicSource(p),angle:u.skew(-90,u.evaluateVariation(T.spread)),initialLifetime:8,initialSpeed:T.speed,initialSize:T.size,initialRotation:T.rotation,initialColor:T.color},rendererOptions:{shapeFactory:T.shapes}});return I}return Zc.confetti=d,Zc}var th={},dE;function eC(){if(dE)return th;dE=1,Object.defineProperty(th,"__esModule",{value:!0}),th.sparkles=void 0;var i=qh(),e=da(),t=xy(),r=zh(),a=lm(),u=jh(),c=Sl();function d(p,v){var T=c.overrideDefaults({lifetime:u.range(1,2),count:u.range(10,20),speed:u.range(100,200),size:u.range(.8,1.8),rotation:function(){return new e.Vector(0,0,r.randomRange(0,360))},color:function(){return e.Color.fromHsl(50,100,r.randomRange(55,85))},modules:[new t.ModuleBuilder().drive("rotation").by(function(x){return new e.Vector(0,0,200).scale(x)}).relative().build(),new t.ModuleBuilder().drive("size").by(new e.NumericSpline({time:0,value:0},{time:.3,value:1},{time:.7,value:1},{time:1,value:0})).through("relativeLifetime").relative().build(),new t.ModuleBuilder().drive("opacity").by(new e.NumericSpline({time:0,value:1},{time:.5,value:1},{time:1,value:0})).through("relativeLifetime").build()],shapes:"star"},v),I=i.scene.current.createEmitter({emitterOptions:{loops:1,duration:3,useGravity:!1,modules:T.modules},emissionOptions:{rate:0,bursts:[{time:0,count:T.count}],sourceSampler:a.dynamicSource(p),angle:u.range(0,360),initialLifetime:T.lifetime,initialSpeed:T.speed,initialSize:T.size,initialRotation:T.rotation,initialColor:T.color},rendererOptions:{applyLighting:void 0,shapeFactory:T.shapes}});return I}return th.sparkles=d,th}var mE;function tC(){return mE||(mE=1,function(i){var e=ru&&ru.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=ru&&ru.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(ZR(),i),t(eC(),i)}(ru)),ru}var pE;function qh(){return pE||(pE=1,function(i){var e=Xo&&Xo.__createBinding||(Object.create?function(v,T,I,x){x===void 0&&(x=I),Object.defineProperty(v,x,{enumerable:!0,get:function(){return T[I]}})}:function(v,T,I,x){x===void 0&&(x=I),v[x]=T[I]}),t=Xo&&Xo.__exportStar||function(v,T){for(var I in v)I!=="default"&&!Object.prototype.hasOwnProperty.call(T,I)&&e(T,v,I)};Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.forceInit=i.util=i.math=i.random=i.sources=i.variation=i.Emitter=i.Particle=i.settings=i.scene=void 0;var r=JR(),a=Sl();t(da(),i),t(tC(),i),t(Aw(),i),t(xy(),i),i.scene=new a.Lazy(function(){if(typeof document>"u"||typeof window>"u")throw new Error("It seems like you are trying to run party.js in a non-browser-like environment, which is not supported.");return new r.Scene});var u=um();Object.defineProperty(i,"settings",{enumerable:!0,get:function(){return u.settings}});var c=ww();Object.defineProperty(i,"Particle",{enumerable:!0,get:function(){return c.Particle}});var d=Sw();Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return d.Emitter}}),i.variation=jh(),i.sources=lm(),i.random=zh(),i.math=Cu(),i.util=Sl();function p(){i.scene.current}i.forceInit=p,i.default=qh()}(Xo)),Xo}var nC=qh();const rC=yw(nC);function iC(){const[i,e]=ge.useState(""),[t,r]=ge.useState({}),[a,u]=ge.useState(new Date().toISOString().split("T")[0]),[c,d]=ge.useState({calories:3e3,fat:75,protein:150,carbs:431}),[p,v]=ge.useState(null),[T,I]=ge.useState(!1),x=(t[a]||[]).reduce((me,ae)=>({calories:me.calories+ae.food.calories*ae.quantity,fat:me.fat+ae.food.fat*ae.quantity,protein:me.protein+ae.food.protein*ae.quantity,carbs:me.carbs+ae.food.carbs*ae.quantity}),{calories:0,fat:0,protein:0,carbs:0});ge.useEffect(()=>{const me=localStorage.getItem("nutritionGoals");me&&d(JSON.parse(me))},[]),ge.useEffect(()=>{localStorage.setItem("nutritionGoals",JSON.stringify(c))},[c]),ge.useEffect(()=>{UR().then(me=>{const ae=me.reduce((Re,{date:Ce,selectedFoods:Ve})=>(Re[Ce]=Ve,Re),{});r({...ae,[a]:ae[a]||[]})}).catch(me=>{console.error("Error loading all foods:",me),v("Failed to load food data")})},[a]),ge.useEffect(()=>{if(LR(a,t[a]||[]).catch(me=>{console.error("Error saving foods:",me),v("Failed to save food data")}),x.calories>c.calories&&!T){const me=document.querySelector("#confetti");me&&(rC.confetti(me),I(!0))}x.calories<=c.calories&&T&&I(!1)},[t,a,x.calories,c.calories,T]);const j=RR.filter(me=>me.name.toLowerCase().includes(i.toLowerCase())),z=me=>{r(ae=>{const Re=ae[a]||[],Ce=Re.findIndex(L=>L.food.id===me.id);let Ve;return Ce>=0?(Ve=[...Re],Ve[Ce]={...Ve[Ce],quantity:Ve[Ce].quantity+1}):Ve=[...Re,{food:me,quantity:1}],{...ae,[a]:Ve}}),e(""),v(`${me.name} lagt til`)},ce=me=>{r(ae=>({...ae,[a]:ae[a].filter((Re,Ce)=>Ce!==me)}))},oe=(me,ae)=>{r(Re=>{const Ve=[...Re[a]||[]],L=Ve[me].quantity+ae;return L<=0?{...Re,[a]:Ve.filter((P,V)=>V!==me)}:(Ve[me]={...Ve[me],quantity:L},{...Re,[a]:Ve})}),ae>0&&v(`${t[a][me].food.name} lagt til`)},ye=me=>{if(me===0){u(new Date().toISOString().split("T")[0]),t[new Date().toISOString().split("T")[0]]||r(Ce=>({...Ce,[Re]:[]})),I(!1);return}const ae=new Date(a);ae.setDate(ae.getDate()+me);const Re=ae.toISOString().split("T")[0];u(Re),t[Re]||r(Ce=>({...Ce,[Re]:[]})),I(!1)};return Se.jsxs("div",{className:"flex-1 p-4 sm:p-6 max-w-7xl mx-auto",children:[Se.jsx(DR,{totals:x,goals:c}),Se.jsx(xR,{currentDate:a,changeDate:ye}),Se.jsx(CR,{searchTerm:i,filteredFoods:j,addFood:z,setSearchTerm:e}),Se.jsx(OR,{selectedFoods:t,currentDate:a,removeFood:ce,updateQuantity:oe}),p&&Se.jsx(IR,{message:p,onClose:()=>v(null)}),Se.jsx(PR,{})]})}var nh={},gE;function sC(){if(gE)return nh;gE=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.parse=c,nh.serialize=v;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function c(x,j){const z=new u,ce=x.length;if(ce<2)return z;const oe=(j==null?void 0:j.decode)||T;let ye=0;do{const me=x.indexOf("=",ye);if(me===-1)break;const ae=x.indexOf(";",ye),Re=ae===-1?ce:ae;if(me>Re){ye=x.lastIndexOf(";",me-1)+1;continue}const Ce=d(x,ye,me),Ve=p(x,me,Ce),L=x.slice(Ce,Ve);if(z[L]===void 0){let P=d(x,me+1,Re),V=p(x,Re,P);const q=oe(x.slice(P,V));z[L]=q}ye=Re+1}while(ye<ce);return z}function d(x,j,z){do{const ce=x.charCodeAt(j);if(ce!==32&&ce!==9)return j}while(++j<z);return z}function p(x,j,z){for(;j>z;){const ce=x.charCodeAt(--j);if(ce!==32&&ce!==9)return j+1}return z}function v(x,j,z){const ce=(z==null?void 0:z.encode)||encodeURIComponent;if(!i.test(x))throw new TypeError(`argument name is invalid: ${x}`);const oe=ce(j);if(!e.test(oe))throw new TypeError(`argument val is invalid: ${j}`);let ye=x+"="+oe;if(!z)return ye;if(z.maxAge!==void 0){if(!Number.isInteger(z.maxAge))throw new TypeError(`option maxAge is invalid: ${z.maxAge}`);ye+="; Max-Age="+z.maxAge}if(z.domain){if(!t.test(z.domain))throw new TypeError(`option domain is invalid: ${z.domain}`);ye+="; Domain="+z.domain}if(z.path){if(!r.test(z.path))throw new TypeError(`option path is invalid: ${z.path}`);ye+="; Path="+z.path}if(z.expires){if(!I(z.expires)||!Number.isFinite(z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${z.expires}`);ye+="; Expires="+z.expires.toUTCString()}if(z.httpOnly&&(ye+="; HttpOnly"),z.secure&&(ye+="; Secure"),z.partitioned&&(ye+="; Partitioned"),z.priority)switch(typeof z.priority=="string"?z.priority.toLowerCase():void 0){case"low":ye+="; Priority=Low";break;case"medium":ye+="; Priority=Medium";break;case"high":ye+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${z.priority}`)}if(z.sameSite)switch(typeof z.sameSite=="string"?z.sameSite.toLowerCase():z.sameSite){case!0:case"strict":ye+="; SameSite=Strict";break;case"lax":ye+="; SameSite=Lax";break;case"none":ye+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${z.sameSite}`)}return ye}function T(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function I(x){return a.call(x)==="[object Date]"}return nh}sC();var yE="popstate";function aC(i={}){function e(r,a){let{pathname:u,search:c,hash:d}=r.location;return Fg("",{pathname:u,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Th(a)}return uC(e,t,null,i)}function on(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Is(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oC(){return Math.random().toString(36).substring(2,10)}function vE(i,e){return{usr:i.state,key:i.key,idx:e}}function Fg(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?ql(e):e,state:t,key:e&&e.key||r||oC()}}function Th({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function ql(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function uC(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:u=!1}=r,c=a.history,d="POP",p=null,v=T();v==null&&(v=0,c.replaceState({...c.state,idx:v},""));function T(){return(c.state||{idx:null}).idx}function I(){d="POP";let oe=T(),ye=oe==null?null:oe-v;v=oe,p&&p({action:d,location:ce.location,delta:ye})}function x(oe,ye){d="PUSH";let me=Fg(ce.location,oe,ye);v=T()+1;let ae=vE(me,v),Re=ce.createHref(me);try{c.pushState(ae,"",Re)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;a.location.assign(Re)}u&&p&&p({action:d,location:ce.location,delta:1})}function j(oe,ye){d="REPLACE";let me=Fg(ce.location,oe,ye);v=T();let ae=vE(me,v),Re=ce.createHref(me);c.replaceState(ae,"",Re),u&&p&&p({action:d,location:ce.location,delta:0})}function z(oe){return lC(oe)}let ce={get action(){return d},get location(){return i(a,c)},listen(oe){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(yE,I),p=oe,()=>{a.removeEventListener(yE,I),p=null}},createHref(oe){return e(a,oe)},createURL:z,encodeLocation(oe){let ye=z(oe);return{pathname:ye.pathname,search:ye.search,hash:ye.hash}},push:x,replace:j,go(oe){return c.go(oe)}};return ce}function lC(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),on(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Th(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Iw(i,e,t="/"){return cC(i,e,t,!1)}function cC(i,e,t,r){let a=typeof e=="string"?ql(e):e,u=ua(a.pathname||"/",t);if(u==null)return null;let c=Rw(i);hC(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let v=TC(u);d=bC(c[p],v,r)}return d}function Rw(i,e=[],t=[],r=""){let a=(u,c,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};p.relativePath.startsWith("/")&&(on(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let v=aa([r,p.relativePath]),T=t.concat(p);u.children&&u.children.length>0&&(on(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Rw(u.children,e,T,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:vC(v,u.index),routesMeta:T})};return i.forEach((u,c)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,c);else for(let p of Cw(u.path))a(u,c,p)}),e}function Cw(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return a?[u,""]:[u];let c=Cw(r.join("/")),d=[];return d.push(...c.map(p=>p===""?u:[u,p].join("/"))),a&&d.push(...c),d.map(p=>i.startsWith("/")&&p===""?"/":p)}function hC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:_C(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var fC=/^:[\w-]+$/,dC=3,mC=2,pC=1,gC=10,yC=-2,_E=i=>i==="*";function vC(i,e){let t=i.split("/"),r=t.length;return t.some(_E)&&(r+=yC),e&&(r+=mC),t.filter(a=>!_E(a)).reduce((a,u)=>a+(fC.test(u)?dC:u===""?pC:gC),r)}function _C(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function bC(i,e,t=!1){let{routesMeta:r}=i,a={},u="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],v=d===r.length-1,T=u==="/"?e:e.slice(u.length)||"/",I=Pd({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},T),x=p.route;if(!I&&v&&t&&!r[r.length-1].route.index&&(I=Pd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!I)return null;Object.assign(a,I.params),c.push({params:a,pathname:aa([u,I.pathname]),pathnameBase:IC(aa([u,I.pathnameBase])),route:x}),I.pathnameBase!=="/"&&(u=aa([u,I.pathnameBase]))}return c}function Pd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=EC(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((v,{paramName:T,isOptional:I},x)=>{if(T==="*"){let z=d[x]||"";c=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const j=d[x];return I&&!j?v[T]=void 0:v[T]=(j||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:c,pattern:i}}function EC(i,e=!1,t=!0){Is(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function TC(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Is(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ua(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function wC(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?ql(i):i;return{pathname:t?t.startsWith("/")?t:SC(t,e):e,search:RC(r),hash:CC(a)}}function SC(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Sg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AC(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xw(i){let e=AC(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Dw(i,e,t,r=!1){let a;typeof i=="string"?a=ql(i):(a={...i},on(!a.pathname||!a.pathname.includes("?"),Sg("?","pathname","search",a)),on(!a.pathname||!a.pathname.includes("#"),Sg("#","pathname","hash",a)),on(!a.search||!a.search.includes("#"),Sg("#","search","hash",a)));let u=i===""||a.pathname==="",c=u?"/":a.pathname,d;if(c==null)d=t;else{let I=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),I-=1;a.pathname=x.join("/")}d=I>=0?e[I]:"/"}let p=wC(a,d),v=c&&c!=="/"&&c.endsWith("/"),T=(u||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||T)&&(p.pathname+="/"),p}var aa=i=>i.join("/").replace(/\/\/+/g,"/"),IC=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),RC=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,CC=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function xC(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Ow=["POST","PUT","PATCH","DELETE"];new Set(Ow);var DC=["GET",...Ow];new Set(DC);var Fl=ge.createContext(null);Fl.displayName="DataRouter";var cm=ge.createContext(null);cm.displayName="DataRouterState";var Pw=ge.createContext({isTransitioning:!1});Pw.displayName="ViewTransition";var OC=ge.createContext(new Map);OC.displayName="Fetchers";var PC=ge.createContext(null);PC.displayName="Await";var xs=ge.createContext(null);xs.displayName="Navigation";var Fh=ge.createContext(null);Fh.displayName="Location";var ma=ge.createContext({outlet:null,matches:[],isDataRoute:!1});ma.displayName="Route";var Dy=ge.createContext(null);Dy.displayName="RouteError";function NC(i,{relative:e}={}){on(Kh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ge.useContext(xs),{hash:a,pathname:u,search:c}=Hh(i,{relative:e}),d=u;return t!=="/"&&(d=u==="/"?t:aa([t,u])),r.createHref({pathname:d,search:c,hash:a})}function Kh(){return ge.useContext(Fh)!=null}function xu(){return on(Kh(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(Fh).location}var Nw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vw(i){ge.useContext(xs).static||ge.useLayoutEffect(i)}function VC(){let{isDataRoute:i}=ge.useContext(ma);return i?QC():MC()}function MC(){on(Kh(),"useNavigate() may be used only in the context of a <Router> component.");let i=ge.useContext(Fl),{basename:e,navigator:t}=ge.useContext(xs),{matches:r}=ge.useContext(ma),{pathname:a}=xu(),u=JSON.stringify(xw(r)),c=ge.useRef(!1);return Vw(()=>{c.current=!0}),ge.useCallback((p,v={})=>{if(Is(c.current,Nw),!c.current)return;if(typeof p=="number"){t.go(p);return}let T=Dw(p,JSON.parse(u),a,v.relative==="path");i==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:aa([e,T.pathname])),(v.replace?t.replace:t.push)(T,v.state,v)},[e,t,u,a,i])}ge.createContext(null);function Hh(i,{relative:e}={}){let{matches:t}=ge.useContext(ma),{pathname:r}=xu(),a=JSON.stringify(xw(t));return ge.useMemo(()=>Dw(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function kC(i,e){return Mw(i,e)}function Mw(i,e,t,r){var me;on(Kh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:u}=ge.useContext(xs),{matches:c}=ge.useContext(ma),d=c[c.length-1],p=d?d.params:{},v=d?d.pathname:"/",T=d?d.pathnameBase:"/",I=d&&d.route;{let ae=I&&I.path||"";kw(v,!I||ae.endsWith("*")||ae.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${ae}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ae}"> to <Route path="${ae==="/"?"*":`${ae}/*`}">.`)}let x=xu(),j;if(e){let ae=typeof e=="string"?ql(e):e;on(T==="/"||((me=ae.pathname)==null?void 0:me.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${ae.pathname}" was given in the \`location\` prop.`),j=ae}else j=x;let z=j.pathname||"/",ce=z;if(T!=="/"){let ae=T.replace(/^\//,"").split("/");ce="/"+z.replace(/^\//,"").split("/").slice(ae.length).join("/")}let oe=!u&&t&&t.matches&&t.matches.length>0?t.matches:Iw(i,{pathname:ce});Is(I||oe!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),Is(oe==null||oe[oe.length-1].route.element!==void 0||oe[oe.length-1].route.Component!==void 0||oe[oe.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ye=jC(oe&&oe.map(ae=>Object.assign({},ae,{params:Object.assign({},p,ae.params),pathname:aa([T,a.encodeLocation?a.encodeLocation(ae.pathname).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?T:aa([T,a.encodeLocation?a.encodeLocation(ae.pathnameBase).pathname:ae.pathnameBase])})),c,t,r);return e&&ye?ge.createElement(Fh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},ye):ye}function LC(){let i=GC(),e=xC(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=ge.createElement(ge.Fragment,null,ge.createElement("p",null,"💿 Hey developer 👋"),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:u},"ErrorBoundary")," or"," ",ge.createElement("code",{style:u},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:a},t):null,c)}var UC=ge.createElement(LC,null),BC=class extends ge.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ge.createElement(ma.Provider,{value:this.props.routeContext},ge.createElement(Dy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zC({routeContext:i,match:e,children:t}){let r=ge.useContext(Fl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(ma.Provider,{value:i},t)}function jC(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,u=t==null?void 0:t.errors;if(u!=null){let p=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);on(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let v=a[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=p),v.route.id){let{loaderData:T,errors:I}=t,x=v.route.loader&&!T.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||x){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,v,T)=>{let I,x=!1,j=null,z=null;t&&(I=u&&v.route.id?u[v.route.id]:void 0,j=v.route.errorElement||UC,c&&(d<0&&T===0?(kw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,z=null):d===T&&(x=!0,z=v.route.hydrateFallbackElement||null)));let ce=e.concat(a.slice(0,T+1)),oe=()=>{let ye;return I?ye=j:x?ye=z:v.route.Component?ye=ge.createElement(v.route.Component,null):v.route.element?ye=v.route.element:ye=p,ge.createElement(zC,{match:v,routeContext:{outlet:p,matches:ce,isDataRoute:t!=null},children:ye})};return t&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?ge.createElement(BC,{location:t.location,revalidation:t.revalidation,component:j,error:I,children:oe(),routeContext:{outlet:null,matches:ce,isDataRoute:!0}}):oe()},null)}function Oy(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(i){let e=ge.useContext(Fl);return on(e,Oy(i)),e}function FC(i){let e=ge.useContext(cm);return on(e,Oy(i)),e}function KC(i){let e=ge.useContext(ma);return on(e,Oy(i)),e}function Py(i){let e=KC(i),t=e.matches[e.matches.length-1];return on(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function HC(){return Py("useRouteId")}function GC(){var r;let i=ge.useContext(Dy),e=FC("useRouteError"),t=Py("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function QC(){let{router:i}=qC("useNavigate"),e=Py("useNavigate"),t=ge.useRef(!1);return Vw(()=>{t.current=!0}),ge.useCallback(async(a,u={})=>{Is(t.current,Nw),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var bE={};function kw(i,e,t){!e&&!bE[i]&&(bE[i]=!0,Is(!1,t))}ge.memo(YC);function YC({routes:i,future:e,state:t}){return Mw(i,void 0,t,e)}function Kg(i){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $C({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:u=!1}){on(!Kh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),d=ge.useMemo(()=>({basename:c,navigator:a,static:u,future:{}}),[c,a,u]);typeof t=="string"&&(t=ql(t));let{pathname:p="/",search:v="",hash:T="",state:I=null,key:x="default"}=t,j=ge.useMemo(()=>{let z=ua(p,c);return z==null?null:{location:{pathname:z,search:v,hash:T,state:I,key:x},navigationType:r}},[c,p,v,T,I,x,r]);return Is(j!=null,`<Router basename="${c}"> is not able to match the URL "${p}${v}${T}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:ge.createElement(xs.Provider,{value:d},ge.createElement(Fh.Provider,{children:e,value:j}))}function XC({children:i,location:e}){return kC(Hg(i),e)}function Hg(i,e=[]){let t=[];return ge.Children.forEach(i,(r,a)=>{if(!ge.isValidElement(r))return;let u=[...e,a];if(r.type===ge.Fragment){t.push.apply(t,Hg(r.props.children,u));return}on(r.type===Kg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Hg(r.props.children,u)),t.push(c)}),t}var gd="get",yd="application/x-www-form-urlencoded";function hm(i){return i!=null&&typeof i.tagName=="string"}function WC(i){return hm(i)&&i.tagName.toLowerCase()==="button"}function JC(i){return hm(i)&&i.tagName.toLowerCase()==="form"}function ZC(i){return hm(i)&&i.tagName.toLowerCase()==="input"}function ex(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function tx(i,e){return i.button===0&&(!e||e==="_self")&&!ex(i)}var ad=null;function nx(){if(ad===null)try{new FormData(document.createElement("form"),0),ad=!1}catch{ad=!0}return ad}var rx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ag(i){return i!=null&&!rx.has(i)?(Is(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yd}"`),null):i}function ix(i,e){let t,r,a,u,c;if(JC(i)){let d=i.getAttribute("action");r=d?ua(d,e):null,t=i.getAttribute("method")||gd,a=Ag(i.getAttribute("enctype"))||yd,u=new FormData(i)}else if(WC(i)||ZC(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||d.getAttribute("action");if(r=p?ua(p,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||gd,a=Ag(i.getAttribute("formenctype"))||Ag(d.getAttribute("enctype"))||yd,u=new FormData(d,i),!nx()){let{name:v,type:T,value:I}=i;if(T==="image"){let x=v?`${v}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else v&&u.append(v,I)}}else{if(hm(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gd,r=null,a=yd,c=i}return u&&a==="text/plain"&&(c=u,u=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:u,body:c}}function Ny(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function sx(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ax(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function ox(i,e,t){let r=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let c=await sx(u,t);return c.links?c.links():[]}return[]}));return hx(r.flat(1).filter(ax).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function EE(i,e,t,r,a,u){let c=(p,v)=>t[v]?p.route.id!==t[v].route.id:!0,d=(p,v)=>{var T;return t[v].pathname!==p.pathname||((T=t[v].route.path)==null?void 0:T.endsWith("*"))&&t[v].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,v)=>c(p,v)||d(p,v)):u==="data"?e.filter((p,v)=>{var I;let T=r.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(c(p,v)||d(p,v))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function ux(i,e,{includeHydrateFallback:t}={}){return lx(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function lx(i){return[...new Set(i)]}function cx(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function hx(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let u=JSON.stringify(cx(a));return t.has(u)||(t.add(u),r.push({key:u,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fx=new Set([100,101,204,205]);function dx(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&ua(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Lw(){let i=ge.useContext(Fl);return Ny(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function mx(){let i=ge.useContext(cm);return Ny(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Vy=ge.createContext(void 0);Vy.displayName="FrameworkContext";function Uw(){let i=ge.useContext(Vy);return Ny(i,"You must render this element inside a <HydratedRouter> element"),i}function px(i,e){let t=ge.useContext(Vy),[r,a]=ge.useState(!1),[u,c]=ge.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:v,onMouseLeave:T,onTouchStart:I}=e,x=ge.useRef(null);ge.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let ce=ye=>{ye.forEach(me=>{c(me.isIntersecting)})},oe=new IntersectionObserver(ce,{threshold:.5});return x.current&&oe.observe(x.current),()=>{oe.disconnect()}}},[i]),ge.useEffect(()=>{if(r){let ce=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(ce)}}},[r]);let j=()=>{a(!0)},z=()=>{a(!1),c(!1)};return t?i!=="intent"?[u,x,{}]:[u,x,{onFocus:rh(d,j),onBlur:rh(p,z),onMouseEnter:rh(v,j),onMouseLeave:rh(T,z),onTouchStart:rh(I,j)}]:[!1,x,{}]}function rh(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function gx({page:i,...e}){let{router:t}=Lw(),r=ge.useMemo(()=>Iw(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?ge.createElement(vx,{page:i,matches:r,...e}):null}function yx(i){let{manifest:e,routeModules:t}=Uw(),[r,a]=ge.useState([]);return ge.useEffect(()=>{let u=!1;return ox(i,e,t).then(c=>{u||a(c)}),()=>{u=!0}},[i,e,t]),r}function vx({page:i,matches:e,...t}){let r=xu(),{manifest:a,routeModules:u}=Uw(),{basename:c}=Lw(),{loaderData:d,matches:p}=mx(),v=ge.useMemo(()=>EE(i,e,p,a,r,"data"),[i,e,p,a,r]),T=ge.useMemo(()=>EE(i,e,p,a,r,"assets"),[i,e,p,a,r]),I=ge.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let z=new Set,ce=!1;if(e.forEach(ye=>{var ae;let me=a.routes[ye.route.id];!me||!me.hasLoader||(!v.some(Re=>Re.route.id===ye.route.id)&&ye.route.id in d&&((ae=u[ye.route.id])!=null&&ae.shouldRevalidate)||me.hasClientLoader?ce=!0:z.add(ye.route.id))}),z.size===0)return[];let oe=dx(i,c);return ce&&z.size>0&&oe.searchParams.set("_routes",e.filter(ye=>z.has(ye.route.id)).map(ye=>ye.route.id).join(",")),[oe.pathname+oe.search]},[c,d,r,a,v,e,i,u]),x=ge.useMemo(()=>ux(T,a),[T,a]),j=yx(T);return ge.createElement(ge.Fragment,null,I.map(z=>ge.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),x.map(z=>ge.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),j.map(({key:z,link:ce})=>ge.createElement("link",{key:z,...ce})))}function _x(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Bw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bw&&(window.__reactRouterVersion="7.6.0")}catch{}function bx({basename:i,children:e,window:t}){let r=ge.useRef();r.current==null&&(r.current=aC({window:t,v5Compat:!0}));let a=r.current,[u,c]=ge.useState({action:a.action,location:a.location}),d=ge.useCallback(p=>{ge.startTransition(()=>c(p))},[c]);return ge.useLayoutEffect(()=>a.listen(d),[a,d]),ge.createElement($C,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:a})}var zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jw=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:u,replace:c,state:d,target:p,to:v,preventScrollReset:T,viewTransition:I,...x},j){let{basename:z}=ge.useContext(xs),ce=typeof v=="string"&&zw.test(v),oe,ye=!1;if(typeof v=="string"&&ce&&(oe=v,Bw))try{let V=new URL(window.location.href),q=v.startsWith("//")?new URL(V.protocol+v):new URL(v),Y=ua(q.pathname,z);q.origin===V.origin&&Y!=null?v=Y+q.search+q.hash:ye=!0}catch{Is(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let me=NC(v,{relative:a}),[ae,Re,Ce]=px(r,x),Ve=Sx(v,{replace:c,state:d,target:p,preventScrollReset:T,relative:a,viewTransition:I});function L(V){e&&e(V),V.defaultPrevented||Ve(V)}let P=ge.createElement("a",{...x,...Ce,href:oe||me,onClick:ye||u?e:L,ref:_x(j,Re),target:p,"data-discover":!ce&&t==="render"?"true":void 0});return ae&&!ce?ge.createElement(ge.Fragment,null,P,ge.createElement(gx,{page:me})):P});jw.displayName="Link";var Ex=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:u,to:c,viewTransition:d,children:p,...v},T){let I=Hh(c,{relative:v.relative}),x=xu(),j=ge.useContext(cm),{navigator:z,basename:ce}=ge.useContext(xs),oe=j!=null&&xx(I)&&d===!0,ye=z.encodeLocation?z.encodeLocation(I).pathname:I.pathname,me=x.pathname,ae=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;t||(me=me.toLowerCase(),ae=ae?ae.toLowerCase():null,ye=ye.toLowerCase()),ae&&ce&&(ae=ua(ae,ce)||ae);const Re=ye!=="/"&&ye.endsWith("/")?ye.length-1:ye.length;let Ce=me===ye||!a&&me.startsWith(ye)&&me.charAt(Re)==="/",Ve=ae!=null&&(ae===ye||!a&&ae.startsWith(ye)&&ae.charAt(ye.length)==="/"),L={isActive:Ce,isPending:Ve,isTransitioning:oe},P=Ce?e:void 0,V;typeof r=="function"?V=r(L):V=[r,Ce?"active":null,Ve?"pending":null,oe?"transitioning":null].filter(Boolean).join(" ");let q=typeof u=="function"?u(L):u;return ge.createElement(jw,{...v,"aria-current":P,className:V,ref:T,style:q,to:c,viewTransition:d},typeof p=="function"?p(L):p)});Ex.displayName="NavLink";var Tx=ge.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:u,method:c=gd,action:d,onSubmit:p,relative:v,preventScrollReset:T,viewTransition:I,...x},j)=>{let z=Rx(),ce=Cx(d,{relative:v}),oe=c.toLowerCase()==="get"?"get":"post",ye=typeof d=="string"&&zw.test(d),me=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let Re=ae.nativeEvent.submitter,Ce=(Re==null?void 0:Re.getAttribute("formmethod"))||c;z(Re||ae.currentTarget,{fetcherKey:e,method:Ce,navigate:t,replace:a,state:u,relative:v,preventScrollReset:T,viewTransition:I})};return ge.createElement("form",{ref:j,method:oe,action:ce,onSubmit:r?p:me,...x,"data-discover":!ye&&i==="render"?"true":void 0})});Tx.displayName="Form";function wx(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qw(i){let e=ge.useContext(Fl);return on(e,wx(i)),e}function Sx(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:u,viewTransition:c}={}){let d=VC(),p=xu(),v=Hh(i,{relative:u});return ge.useCallback(T=>{if(tx(T,e)){T.preventDefault();let I=t!==void 0?t:Th(p)===Th(v);d(i,{replace:I,state:r,preventScrollReset:a,relative:u,viewTransition:c})}},[p,d,v,t,r,e,i,a,u,c])}var Ax=0,Ix=()=>`__${String(++Ax)}__`;function Rx(){let{router:i}=qw("useSubmit"),{basename:e}=ge.useContext(xs),t=HC();return ge.useCallback(async(r,a={})=>{let{action:u,method:c,encType:d,formData:p,body:v}=ix(r,e);if(a.navigate===!1){let T=a.fetcherKey||Ix();await i.fetch(T,t,a.action||u,{preventScrollReset:a.preventScrollReset,formData:p,body:v,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:p,body:v,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function Cx(i,{relative:e}={}){let{basename:t}=ge.useContext(xs),r=ge.useContext(ma);on(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),u={...Hh(i||".",{relative:e})},c=xu();if(i==null){u.search=c.search;let d=new URLSearchParams(u.search),p=d.getAll("index");if(p.some(T=>T==="")){d.delete("index"),p.filter(I=>I).forEach(I=>d.append("index",I));let T=d.toString();u.search=T?`?${T}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:aa([t,u.pathname])),Th(u)}function xx(i,e={}){let t=ge.useContext(Pw);on(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=qw("useViewTransitionState"),a=Hh(i,{relative:e.relative});if(!t.isTransitioning)return!1;let u=ua(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=ua(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Pd(a.pathname,c)!=null||Pd(a.pathname,u)!=null}[...fx];const Dx=()=>{};var TE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Ox=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[t++];e[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[t++],c=i[t++],d=i[t++],p=((a&7)<<18|(u&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return e.join("")},Kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const u=i[a],c=a+1<i.length,d=c?i[a+1]:0,p=a+2<i.length,v=p?i[a+2]:0,T=u>>2,I=(u&3)<<4|d>>4;let x=(d&15)<<2|v>>6,j=v&63;p||(j=64,c||(x=64)),r.push(t[T],t[I],t[x],t[j])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Fw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Ox(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const u=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const v=a<i.length?t[i.charAt(a)]:64;++a;const I=a<i.length?t[i.charAt(a)]:64;if(++a,u==null||d==null||v==null||I==null)throw new Px;const x=u<<2|d>>4;if(r.push(x),v!==64){const j=d<<4&240|v>>2;if(r.push(j),I!==64){const z=v<<6&192|I;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Px extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nx=function(i){const e=Fw(i);return Kw.encodeByteArray(e,!0)},Hw=function(i){return Nx(i).replace(/\./g,"")},Gw=function(i){try{return Kw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=()=>Qw().__FIREBASE_DEFAULTS__,Mx=()=>{if(typeof process>"u"||typeof TE>"u")return;const i=TE.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},kx=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Gw(i[1]);return e&&JSON.parse(e)},fm=()=>{try{return Dx()||Vx()||Mx()||kx()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Lx=i=>{var e,t;return(t=(e=fm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Yw=()=>{var i;return(i=fm())===null||i===void 0?void 0:i.config},$w=i=>{var e;return(e=fm())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(i){return i.endsWith(".cloudworkstations.dev")}async function Xw(i){return(await fetch(i,{credentials:"include"})).ok}const dh={};function Bx(){const i={prod:[],emulator:[]};for(const e of Object.keys(dh))dh[e]?i.emulator.push(e):i.prod.push(e);return i}function zx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let wE=!1;function My(i,e){if(typeof window>"u"||typeof document>"u"||!Gh(window.location.host)||dh[i]===e||dh[i]||wE)return;dh[i]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=Bx().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,j){x.setAttribute("width","24"),x.setAttribute("id",j),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{wE=!0,c()},x}function T(x,j){x.setAttribute("id",j),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=zx(r),j=t("text"),z=document.getElementById(j)||document.createElement("span"),ce=t("learnmore"),oe=document.getElementById(ce)||document.createElement("a"),ye=t("preprendIcon"),me=document.getElementById(ye)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ae=x.element;d(ae),T(oe,ce);const Re=v();p(me,ye),ae.append(me,z,oe,Re),document.body.appendChild(ae)}u?(z.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function qx(){var i;const e=(i=fm())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kx(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gx(){const i=Mn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Ww(){return!qx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jw(){try{return typeof indexedDB=="object"}catch{return!1}}function Qx(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="FirebaseError";class pa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Yx,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qh.prototype.create)}}class Qh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],c=u?$x(u,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new pa(a,d,r)}}function $x(i,e){return i.replace(Xx,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const Xx=/\{\$([^}]+)}/g;function Wx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function vu(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const u=i[a],c=e[a];if(SE(u)&&SE(c)){if(!vu(u,c))return!1}else if(u!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function SE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jx(i,e){const t=new Zx(i,e);return t.subscribe.bind(t)}class Zx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");e2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Ig),a.error===void 0&&(a.error=Ig),a.complete===void 0&&(a.complete=Ig);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e2(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Ig(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(i){return i&&i._delegate?i._delegate:i}class _u{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ux;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r2(e))try{this.getOrInitializeService({instanceIdentifier:su})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(e=su){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=su){return this.instances.has(e)}getOptions(e=su){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),u=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(a,u);const c=this.instances.get(a);return c&&e(c,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=su){return this.component?this.component.multipleInstances?e:su:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n2(i){return i===su?void 0:i}function r2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(St||(St={}));const s2={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},a2=St.INFO,o2={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},u2=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=o2[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=a2,this._logHandler=u2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const l2=(i,e)=>e.some(t=>i instanceof t);let AE,IE;function c2(){return AE||(AE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h2(){return IE||(IE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zw=new WeakMap,Gg=new WeakMap,e1=new WeakMap,Rg=new WeakMap,Ly=new WeakMap;function f2(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{t(ho(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Zw.set(t,i)}).catch(()=>{}),Ly.set(e,i),e}function d2(i){if(Gg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});Gg.set(i,e)}let Qg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Gg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||e1.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ho(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function m2(i){Qg=i(Qg)}function p2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Cg(this),e,...t);return e1.set(r,e.sort?e.sort():[e]),ho(r)}:h2().includes(i)?function(...e){return i.apply(Cg(this),e),ho(Zw.get(this))}:function(...e){return ho(i.apply(Cg(this),e))}}function g2(i){return typeof i=="function"?p2(i):(i instanceof IDBTransaction&&d2(i),l2(i,c2())?new Proxy(i,Qg):i)}function ho(i){if(i instanceof IDBRequest)return f2(i);if(Rg.has(i))return Rg.get(i);const e=g2(i);return e!==i&&(Rg.set(i,e),Ly.set(e,i)),e}const Cg=i=>Ly.get(i);function y2(i,e,{blocked:t,upgrade:r,blocking:a,terminated:u}={}){const c=indexedDB.open(i,e),d=ho(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ho(c.result),p.oldVersion,p.newVersion,ho(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{u&&p.addEventListener("close",()=>u()),a&&p.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const v2=["get","getKey","getAll","getAllKeys","count"],_2=["put","add","delete","clear"],xg=new Map;function RE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=_2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||v2.includes(t)))return;const u=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),a&&p.done]))[0]};return xg.set(e,u),u}m2(i=>({...i,get:(e,t,r)=>RE(e,t)||i.get(e,t,r),has:(e,t)=>!!RE(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function E2(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yg="@firebase/app",CE="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new ky("@firebase/app"),T2="@firebase/app-compat",w2="@firebase/analytics-compat",S2="@firebase/analytics",A2="@firebase/app-check-compat",I2="@firebase/app-check",R2="@firebase/auth",C2="@firebase/auth-compat",x2="@firebase/database",D2="@firebase/data-connect",O2="@firebase/database-compat",P2="@firebase/functions",N2="@firebase/functions-compat",V2="@firebase/installations",M2="@firebase/installations-compat",k2="@firebase/messaging",L2="@firebase/messaging-compat",U2="@firebase/performance",B2="@firebase/performance-compat",z2="@firebase/remote-config",j2="@firebase/remote-config-compat",q2="@firebase/storage",F2="@firebase/storage-compat",K2="@firebase/firestore",H2="@firebase/vertexai",G2="@firebase/firestore-compat",Q2="firebase",Y2="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="[DEFAULT]",$2={[Yg]:"fire-core",[T2]:"fire-core-compat",[S2]:"fire-analytics",[w2]:"fire-analytics-compat",[I2]:"fire-app-check",[A2]:"fire-app-check-compat",[R2]:"fire-auth",[C2]:"fire-auth-compat",[x2]:"fire-rtdb",[D2]:"fire-data-connect",[O2]:"fire-rtdb-compat",[P2]:"fire-fn",[N2]:"fire-fn-compat",[V2]:"fire-iid",[M2]:"fire-iid-compat",[k2]:"fire-fcm",[L2]:"fire-fcm-compat",[U2]:"fire-perf",[B2]:"fire-perf-compat",[z2]:"fire-rc",[j2]:"fire-rc-compat",[q2]:"fire-gcs",[F2]:"fire-gcs-compat",[K2]:"fire-fst",[G2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[Q2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,X2=new Map,Xg=new Map;function xE(i,e){try{i.container.addComponent(e)}catch(t){la.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Al(i){const e=i.name;if(Xg.has(e))return la.debug(`There were multiple attempts to register component ${e}.`),!1;Xg.set(e,i);for(const t of Nd.values())xE(t,i);for(const t of X2.values())xE(t,i);return!0}function Uy(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Zi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Qh("app","Firebase",W2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _u("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=Y2;function t1(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$g,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw fo.create("bad-app-name",{appName:String(a)});if(t||(t=Yw()),!t)throw fo.create("no-options");const u=Nd.get(a);if(u){if(vu(t,u.options)&&vu(r,u.config))return u;throw fo.create("duplicate-app",{appName:a})}const c=new i2(a);for(const p of Xg.values())c.addComponent(p);const d=new J2(t,r,c);return Nd.set(a,d),d}function Z2(i=$g){const e=Nd.get(i);if(!e&&i===$g&&Yw())return t1();if(!e)throw fo.create("no-app",{appName:i});return e}function mo(i,e,t){var r;let a=(r=$2[i])!==null&&r!==void 0?r:i;t&&(a+=`-${t}`);const u=a.match(/\s|\//),c=e.match(/\s|\//);if(u||c){const d=[`Unable to register library "${a}" with version "${e}":`];u&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),la.warn(d.join(" "));return}Al(new _u(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-heartbeat-database",tD=1,wh="firebase-heartbeat-store";let Dg=null;function n1(){return Dg||(Dg=y2(eD,tD,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wh)}catch(t){console.warn(t)}}}}).catch(i=>{throw fo.create("idb-open",{originalErrorMessage:i.message})})),Dg}async function nD(i){try{const t=(await n1()).transaction(wh),r=await t.objectStore(wh).get(r1(i));return await t.done,r}catch(e){if(e instanceof pa)la.warn(e.message);else{const t=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});la.warn(t.message)}}}async function DE(i,e){try{const r=(await n1()).transaction(wh,"readwrite");await r.objectStore(wh).put(e,r1(i)),await r.done}catch(t){if(t instanceof pa)la.warn(t.message);else{const r=fo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});la.warn(r.message)}}}function r1(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=1024,iD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=OE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>iD){const c=uD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){la.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=OE(),{heartbeatsToSend:r,unsentEntries:a}=aD(this._heartbeatsCache.heartbeats),u=Hw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return la.warn(t),""}}}function OE(){return new Date().toISOString().substring(0,10)}function aD(i,e=rD){const t=[];let r=i.slice();for(const a of i){const u=t.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),PE(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),PE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class oD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jw()?Qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return DE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return DE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function PE(i){return Hw(JSON.stringify({version:2,heartbeats:i})).length}function uD(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(i){Al(new _u("platform-logger",e=>new b2(e),"PRIVATE")),Al(new _u("heartbeat",e=>new sD(e),"PRIVATE")),mo(Yg,CE,i),mo(Yg,CE,"esm2017"),mo("fire-js","")}lD("");var cD="firebase",hD="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mo(cD,hD,"app");function By(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function i1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fD=i1,s1=new Qh("auth","Firebase",i1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new ky("@firebase/auth");function dD(i,...e){Vd.logLevel<=St.WARN&&Vd.warn(`Auth (${Kl}): ${i}`,...e)}function vd(i,...e){Vd.logLevel<=St.ERROR&&Vd.error(`Auth (${Kl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(i,...e){throw jy(i,...e)}function ns(i,...e){return jy(i,...e)}function zy(i,e,t){const r=Object.assign(Object.assign({},fD()),{[e]:t});return new Qh("auth","Firebase",r).create(e,{appName:i.name})}function mu(i){return zy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mD(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rs(i,"argument-error"),zy(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jy(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return s1.create(i,...e)}function ot(i,e,...t){if(!i)throw jy(e,...t)}function na(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vd(e),new Error(e)}function ca(i,e){i||na(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function pD(){return NE()==="http:"||NE()==="https:"}function NE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pD()||Kx()||"connection"in navigator)?navigator.onLine:!0}function yD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.shortDelay=e,this.longDelay=t,ca(t>e,"Short delay should be less than long delay!"),this.isMobile=jx()||Hx()}get(){return gD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(i,e){ca(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bD=new $h(3e4,6e4);function Fy(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Hl(i,e,t,r,a={}){return o1(i,a,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const d=Yh(Object.assign({key:i.config.apiKey},c)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const v=Object.assign({method:e,headers:p},u);return Fx()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&Gh(i.emulatorConfig.host)&&(v.credentials="include"),a1.fetch()(await u1(i,i.config.apiHost,t,d),v)})}async function o1(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},vD),e);try{const a=new TD(i),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw od(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const d=u.ok?c.errorMessage:c.error.message,[p,v]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw od(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw od(i,"user-disabled",c);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw zy(i,T,v);Rs(i,T)}}catch(a){if(a instanceof pa)throw a;Rs(i,"network-request-failed",{message:String(a)})}}async function ED(i,e,t,r,a={}){const u=await Hl(i,e,t,r,a);return"mfaPendingCredential"in u&&Rs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function u1(i,e,t,r){const a=`${e}${t}?${r}`,u=i,c=u.config.emulator?qy(i.config,a):`${i.config.apiScheme}://${a}`;return _D.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class TD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),bD.get())})}}function od(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ns(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(i,e){return Hl(i,"POST","/v1/accounts:delete",e)}async function Md(i,e){return Hl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SD(i,e=!1){const t=Du(i),r=await t.getIdToken(e),a=Ky(r);ot(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:a,token:r,authTime:mh(Og(a.auth_time)),issuedAtTime:mh(Og(a.iat)),expirationTime:mh(Og(a.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Og(i){return Number(i)*1e3}function Ky(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Gw(t);return a?JSON.parse(a):(vd("Failed to decode base64 JWT payload"),null)}catch(a){return vd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function VE(i){const e=Ky(i);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pa&&AD(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function AD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mh(this.lastLoginAt),this.creationTime=mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(i){var e;const t=i.auth,r=await i.getIdToken(),a=await Sh(i,Md(t,{idToken:r}));ot(a==null?void 0:a.users.length,t,"internal-error");const u=a.users[0];i._notifyReloadListener(u);const c=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?l1(u.providerUserInfo):[],d=CD(i.providerData,c),p=i.isAnonymous,v=!(i.email&&u.passwordHash)&&!(d!=null&&d.length),T=p?v:!1,I={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new Jg(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(i,I)}async function RD(i){const e=Du(i);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CD(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function l1(i){return i.map(e=>{var{providerId:t}=e,r=By(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(i,e){const t=await o1(i,{},async()=>{const r=Yh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=i.config,c=await u1(i,a,"/v1/token",`key=${u}`),d=await i._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",a1.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DD(i,e){return Hl(i,"POST","/v2/accounts:revokeToken",Fy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=VE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:u}=await xD(e,t);this.updateTokensAndExpiration(r,a,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:u}=t,c=new bl;return r&&(ot(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ot(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),u&&(ot(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(i,e){ot(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class es{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,u=By(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ID(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Jg(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Sh(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SD(this,e)}reload(){return RD(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zi(this.auth.app))return Promise.reject(mu(this.auth));const e=await this.getIdToken();return await Sh(this,wD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,u,c,d,p,v,T;const I=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(a=t.email)!==null&&a!==void 0?a:void 0,j=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,z=(c=t.photoURL)!==null&&c!==void 0?c:void 0,ce=(d=t.tenantId)!==null&&d!==void 0?d:void 0,oe=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ye=(v=t.createdAt)!==null&&v!==void 0?v:void 0,me=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ae,emailVerified:Re,isAnonymous:Ce,providerData:Ve,stsTokenManager:L}=t;ot(ae&&L,e,"internal-error");const P=bl.fromJSON(this.name,L);ot(typeof ae=="string",e,"internal-error"),no(I,e.name),no(x,e.name),ot(typeof Re=="boolean",e,"internal-error"),ot(typeof Ce=="boolean",e,"internal-error"),no(j,e.name),no(z,e.name),no(ce,e.name),no(oe,e.name),no(ye,e.name),no(me,e.name);const V=new es({uid:ae,auth:e,email:x,emailVerified:Re,displayName:I,isAnonymous:Ce,photoURL:z,phoneNumber:j,tenantId:ce,stsTokenManager:P,createdAt:ye,lastLoginAt:me});return Ve&&Array.isArray(Ve)&&(V.providerData=Ve.map(q=>Object.assign({},q))),oe&&(V._redirectEventId=oe),V}static async _fromIdTokenResponse(e,t,r=!1){const a=new bl;a.updateFromServerResponse(t);const u=new es({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await kd(u),u}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ot(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?l1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(u!=null&&u.length),d=new bl;d.updateFromIdToken(r);const p=new es({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Jg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;function ra(i){ca(i instanceof Function,"Expected a class definition");let e=ME.get(i);return e?(ca(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ME.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}c1.type="NONE";const kE=c1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(i,e,t){return`firebase:${i}:${e}:${t}`}class El{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:u}=this.auth;this.fullUserKey=_d(this.userKey,a.apiKey,u),this.fullPersistenceKey=_d("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Md(this.auth,{idToken:e}).catch(()=>{});return t?es._fromGetAccountInfoResponse(this.auth,t,e):null}return es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new El(ra(kE),e,r);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=a[0]||ra(kE);const c=_d(r,e.config.apiKey,e.name);let d=null;for(const v of t)try{const T=await v._get(c);if(T){let I;if(typeof T=="string"){const x=await Md(e,{idToken:T}).catch(()=>{});if(!x)break;I=await es._fromGetAccountInfoResponse(e,x,T)}else I=es._fromJSON(e,T);v!==u&&(d=I),u=v;break}}catch{}const p=a.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new El(u,e,r):(u=p[0],d&&await u._set(c,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(c)}catch{}})),new El(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g1(e))return"Blackberry";if(y1(e))return"Webos";if(f1(e))return"Safari";if((e.includes("chrome/")||d1(e))&&!e.includes("edge/"))return"Chrome";if(p1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function h1(i=Mn()){return/firefox\//i.test(i)}function f1(i=Mn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d1(i=Mn()){return/crios\//i.test(i)}function m1(i=Mn()){return/iemobile/i.test(i)}function p1(i=Mn()){return/android/i.test(i)}function g1(i=Mn()){return/blackberry/i.test(i)}function y1(i=Mn()){return/webos/i.test(i)}function Hy(i=Mn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function OD(i=Mn()){var e;return Hy(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PD(){return Gx()&&document.documentMode===10}function v1(i=Mn()){return Hy(i)||p1(i)||y1(i)||g1(i)||/windows phone/i.test(i)||m1(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(i,e=[]){let t;switch(i){case"Browser":t=LE(Mn());break;case"Worker":t=`${LE(Mn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,d)=>{try{const p=e(u);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(i,e={}){return Hl(i,"GET","/v2/passwordPolicy",Fy(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=6;class kD{constructor(e){var t,r,a,u;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:MD,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,u,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UE(this),this.idTokenSubscription=new UE(this),this.beforeStateQueue=new ND(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ra(t)),this._initializationPromise=this.queue(async()=>{var r,a,u;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Md(this,{idToken:e}),r=await es._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zi(this.app))return Promise.reject(mu(this));const t=e?Du(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zi(this.app)?Promise.reject(mu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zi(this.app)?Promise.reject(mu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VD(this),t=new kD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await DD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ra(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(d,this,"internal-error"),d.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dD(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function dm(i){return Du(i)}class UE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jx(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UD(i){Gy=i}function BD(i){return Gy.loadJS(i)}function zD(){return Gy.gapiScript}function jD(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(i,e){const t=Uy(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(vu(u,e??{}))return a;Rs(a,"already-initialized")}return t.initialize({options:e})}function FD(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ra);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KD(i,e,t){const r=dm(i);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,u=b1(e),{host:c,port:d}=HD(e),p=d===null?"":`:${d}`,v={url:`${u}//${c}${p}/`},T=Object.freeze({host:c,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(vu(v,r.config.emulator)&&vu(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Gh(c)?(My("Auth",!0),Xw(`${u}//${c}${p}`)):GD()}function b1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function HD(i){const e=b1(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const u=a[1];return{host:u,port:BE(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:BE(c)}}}function BE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function GD(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return na("not implemented")}_getIdTokenResponse(e){return na("not implemented")}_linkToIdToken(e,t){return na("not implemented")}_getReauthenticationResolver(e){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(i,e){return ED(i,"POST","/v1/accounts:signInWithIdp",Fy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="http://localhost";class bu extends E1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,u=By(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new bu(r,a);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Tl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Tl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tl(e,t)}buildRequest(){const e={requestUri:QD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Qy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Xh{constructor(){super("facebook.com")}static credential(e){return bu._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bu._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ts.credential(t,r)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Xh{constructor(){super("github.com")}static credential(e){return bu._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Xh{constructor(){super("twitter.com")}static credential(e,t){return bu._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return uo.credential(t,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const u=await es._fromIdTokenResponse(e,r,a),c=zE(r);return new Il({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=zE(r);return new Il({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function zE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends pa{constructor(e,t,r,a){var u;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Ld(e,t,r,a)}}function T1(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(i,u,e,r):u})}async function YD(i,e,t=!1){const r=await Sh(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Il._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(i,e,t=!1){const{auth:r}=i;if(Zi(r.app))return Promise.reject(mu(r));const a="reauthenticate";try{const u=await Sh(i,T1(r,a,e,i),t);ot(u.idToken,r,"internal-error");const c=Ky(u.idToken);ot(c,r,"internal-error");const{sub:d}=c;return ot(i.uid===d,r,"user-mismatch"),Il._forOperation(i,a,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Rs(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(i,e,t=!1){if(Zi(i.app))return Promise.reject(mu(i));const r="signIn",a=await T1(i,r,e),u=await Il._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(u.user),u}function WD(i,e,t,r){return Du(i).onIdTokenChanged(e,t,r)}function JD(i,e,t){return Du(i).beforeAuthStateChanged(e,t)}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1e3,eO=10;class S1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);PD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,eO):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ZD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}S1.type="LOCAL";const tO=S1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}A1.type="SESSION";const I1=A1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:u}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async v=>v(t.origin,u)),p=await nO(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((d,p)=>{const v=Yy("",20);a.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(I){const x=I;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(x.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return window}function iO(i){As().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function sO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function oO(){return R1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firebaseLocalStorageDb",uO=1,Bd="firebaseLocalStorage",x1="fbase_key";class Wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pm(i,e){return i.transaction([Bd],e?"readwrite":"readonly").objectStore(Bd)}function lO(){const i=indexedDB.deleteDatabase(C1);return new Wh(i).toPromise()}function Zg(){const i=indexedDB.open(C1,uO);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Bd,{keyPath:x1})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Bd)?e(r):(r.close(),await lO(),e(await Zg()))})})}async function jE(i,e,t){const r=pm(i,!0).put({[x1]:e,value:t});return new Wh(r).toPromise()}async function cO(i,e){const t=pm(i,!1).get(e),r=await new Wh(t).toPromise();return r===void 0?null:r.value}function qE(i,e){const t=pm(i,!0).delete(e);return new Wh(t).toPromise()}const hO=800,fO=3;class D1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>fO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(oO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await sO(),!this.activeServiceWorker)return;this.sender=new rO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await jE(e,Ud,"1"),await qE(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>jE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>cO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=pm(a,!1).getAll();return new Wh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D1.type="LOCAL";const dO=D1;new $h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(i,e){return e?ra(e):(ot(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends E1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mO(i){return XD(i.auth,new $y(i),i.bypassAuthState)}function pO(i){const{auth:e,user:t}=i;return ot(t,e,"internal-error"),$D(t,new $y(i),i.bypassAuthState)}async function gO(i){const{auth:e,user:t}=i;return ot(t,e,"internal-error"),YD(t,new $y(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t,r,a,u=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:u,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mO;case"linkViaPopup":case"linkViaRedirect":return gO;case"reauthViaPopup":case"reauthViaRedirect":return pO;default:Rs(this.auth,"internal-error")}}resolve(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new $h(2e3,1e4);async function N1(i,e,t){if(Zi(i.app))return Promise.reject(ns(i,"operation-not-supported-in-this-environment"));const r=dm(i);mD(i,e,Qy);const a=O1(r,t);return new fu(r,"signInViaPopup",e,a).executeNotNull()}class fu extends P1{constructor(e,t,r,a,u){super(e,t,a,u),this.provider=r,this.authWindow=null,this.pollId=null,fu.currentPopupAction&&fu.currentPopupAction.cancel(),fu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ca(this.filter.length===1,"Popup operations only handle one event");const e=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yO.get())};e()}}fu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="pendingRedirect",bd=new Map;class _O extends P1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const r=await bO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bO(i,e){const t=wO(e),r=TO(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function EO(i,e){bd.set(i._key(),e)}function TO(i){return ra(i._redirectPersistence)}function wO(i){return _d(vO,i.config.apiKey,i.name)}async function SO(i,e,t=!1){if(Zi(i.app))return Promise.reject(mu(i));const r=dm(i),a=O1(r,e),c=await new _O(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=10*60*1e3;class IO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!V1(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ns(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AO&&this.cachedEventUids.clear(),this.cachedEventUids.has(FE(e))}saveEventToCache(e){this.cachedEventUids.add(FE(e)),this.lastProcessedEventTime=Date.now()}}function FE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function V1({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RO(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V1(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(i,e={}){return Hl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DO=/^https?/;async function OO(i){if(i.config.emulator)return;const{authorizedDomains:e}=await CO(i);for(const t of e)try{if(PO(t))return}catch{}Rs(i,"unauthorized-domain")}function PO(i){const e=Wg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!DO.test(t))return!1;if(xO.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new $h(3e4,6e4);function KE(){const i=As().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function VO(i){return new Promise((e,t)=>{var r,a,u;function c(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),t(ns(i,"network-request-failed"))},timeout:NO.get()})}if(!((a=(r=As().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=As().gapi)===null||u===void 0)&&u.load)c();else{const d=jD("iframefcb");return As()[d]=()=>{gapi.load?c():t(ns(i,"network-request-failed"))},BD(`${zD()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ed=null,e})}let Ed=null;function MO(i){return Ed=Ed||VO(i),Ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new $h(5e3,15e3),LO="__/auth/iframe",UO="emulator/auth/iframe",BO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jO(i){const e=i.config;ot(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?qy(e,UO):`https://${i.config.authDomain}/${LO}`,r={apiKey:e.apiKey,appName:i.name,v:Kl},a=zO.get(i.config.apiHost);a&&(r.eid=a);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${Yh(r).slice(1)}`}async function qO(i){const e=await MO(i),t=As().gapi;return ot(t,i,"internal-error"),e.open({where:document.body,url:jO(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BO,dontclear:!0},r=>new Promise(async(a,u)=>{await r.restyle({setHideOnLeave:!1});const c=ns(i,"network-request-failed"),d=As().setTimeout(()=>{u(c)},kO.get());function p(){As().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KO=500,HO=600,GO="_blank",QO="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YO(i,e,t,r=KO,a=HO){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},FO),{width:r.toString(),height:a.toString(),top:u,left:c}),v=Mn().toLowerCase();t&&(d=d1(v)?GO:t),h1(v)&&(e=e||QO,p.scrollbars="yes");const T=Object.entries(p).reduce((x,[j,z])=>`${x}${j}=${z},`,"");if(OD(v)&&d!=="_self")return $O(e||"",d),new HE(null);const I=window.open(e||"",d,T);ot(I,i,"popup-blocked");try{I.focus()}catch{}return new HE(I)}function $O(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="__/auth/handler",WO="emulator/auth/handler",JO=encodeURIComponent("fac");async function GE(i,e,t,r,a,u){ot(i.config.authDomain,i,"auth-domain-config-required"),ot(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Kl,eventId:a};if(e instanceof Qy){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",Wx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))c[T]=I}if(e instanceof Xh){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(c.scopes=T.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const T of Object.keys(d))d[T]===void 0&&delete d[T];const p=await i._getAppCheckToken(),v=p?`#${JO}=${encodeURIComponent(p)}`:"";return`${ZO(i)}?${Yh(d).slice(1)}${v}`}function ZO({config:i}){return i.emulator?qy(i,WO):`https://${i.authDomain}/${XO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="webStorageSupport";class eP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I1,this._completeRedirectFn=SO,this._overrideRedirectResult=EO}async _openPopup(e,t,r,a){var u;ca((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await GE(e,t,r,Wg(),a);return YO(e,c,Yy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const u=await GE(e,t,r,Wg(),a);return iO(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(ca(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await qO(e),r=new IO(e);return t.register("authEvent",a=>(ot(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pg,{type:Pg},a=>{var u;const c=(u=a==null?void 0:a[0])===null||u===void 0?void 0:u[Pg];c!==void 0&&t(!!c),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v1()||f1()||Hy()}}const tP=eP;var QE="@firebase/auth",YE="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iP(i){Al(new _u("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ot(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_1(i)},v=new LD(r,a,u,p);return FD(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Al(new _u("auth-internal",e=>{const t=dm(e.getProvider("auth").getImmediate());return(r=>new nP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mo(QE,YE,rP(i)),mo(QE,YE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=5*60,aP=$w("authIdTokenMaxAge")||sP;let $E=null;const oP=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>aP)return;const a=t==null?void 0:t.token;$E!==a&&($E=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uP(i=Z2()){const e=Uy(i,"auth");if(e.isInitialized())return e.getImmediate();const t=qD(i,{popupRedirectResolver:tP,persistence:[dO,tO,I1]}),r=$w("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=oP(u.toString());JD(t,c,()=>c(t.currentUser)),WD(t,d=>c(d))}}const a=Lx("auth");return a?KD(t,`http://${a}`):My("Auth",!1),t}function lP(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}UD({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const u=ns("internal-error");u.customData=a,t(u)},r.type="text/javascript",r.charset="UTF-8",lP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iP("Browser");var XE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,M1;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,P){function V(){}V.prototype=P.prototype,L.D=P.prototype,L.prototype=new V,L.prototype.constructor=L,L.C=function(q,Y,W){for(var k=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)k[Dn-2]=arguments[Dn];return P.prototype[Y].apply(q,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,P,V){V||(V=0);var q=Array(16);if(typeof P=="string")for(var Y=0;16>Y;++Y)q[Y]=P.charCodeAt(V++)|P.charCodeAt(V++)<<8|P.charCodeAt(V++)<<16|P.charCodeAt(V++)<<24;else for(Y=0;16>Y;++Y)q[Y]=P[V++]|P[V++]<<8|P[V++]<<16|P[V++]<<24;P=L.g[0],V=L.g[1],Y=L.g[2];var W=L.g[3],k=P+(W^V&(Y^W))+q[0]+3614090360&4294967295;P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[1]+3905402710&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[2]+606105819&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[3]+3250441966&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(W^V&(Y^W))+q[4]+4118548399&4294967295,P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[5]+1200080426&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[6]+2821735955&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[7]+4249261313&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(W^V&(Y^W))+q[8]+1770035416&4294967295,P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[9]+2336552879&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[10]+4294925233&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[11]+2304563134&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(W^V&(Y^W))+q[12]+1804603682&4294967295,P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[13]+4254626195&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[14]+2792965006&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[15]+1236535329&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(Y^W&(V^Y))+q[1]+4129170786&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[6]+3225465664&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[11]+643717713&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[0]+3921069994&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(Y^W&(V^Y))+q[5]+3593408605&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[10]+38016083&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[15]+3634488961&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[4]+3889429448&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(Y^W&(V^Y))+q[9]+568446438&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[14]+3275163606&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[3]+4107603335&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[8]+1163531501&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(Y^W&(V^Y))+q[13]+2850285829&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[2]+4243563512&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[7]+1735328473&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[12]+2368359562&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(V^Y^W)+q[5]+4294588738&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[8]+2272392833&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[11]+1839030562&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[14]+4259657740&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(V^Y^W)+q[1]+2763975236&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[4]+1272893353&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[7]+4139469664&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[10]+3200236656&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(V^Y^W)+q[13]+681279174&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[0]+3936430074&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[3]+3572445317&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[6]+76029189&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(V^Y^W)+q[9]+3654602809&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[12]+3873151461&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[15]+530742520&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[2]+3299628645&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(Y^(V|~W))+q[0]+4096336452&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[7]+1126891415&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[14]+2878612391&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[5]+4237533241&4294967295,V=Y+(k<<21&4294967295|k>>>11),k=P+(Y^(V|~W))+q[12]+1700485571&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[3]+2399980690&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[10]+4293915773&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[1]+2240044497&4294967295,V=Y+(k<<21&4294967295|k>>>11),k=P+(Y^(V|~W))+q[8]+1873313359&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[15]+4264355552&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[6]+2734768916&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[13]+1309151649&4294967295,V=Y+(k<<21&4294967295|k>>>11),k=P+(Y^(V|~W))+q[4]+4149444226&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[11]+3174756917&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[2]+718787259&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[9]+3951481745&4294967295,L.g[0]=L.g[0]+P&4294967295,L.g[1]=L.g[1]+(Y+(k<<21&4294967295|k>>>11))&4294967295,L.g[2]=L.g[2]+Y&4294967295,L.g[3]=L.g[3]+W&4294967295}r.prototype.u=function(L,P){P===void 0&&(P=L.length);for(var V=P-this.blockSize,q=this.B,Y=this.h,W=0;W<P;){if(Y==0)for(;W<=V;)a(this,L,W),W+=this.blockSize;if(typeof L=="string"){for(;W<P;)if(q[Y++]=L.charCodeAt(W++),Y==this.blockSize){a(this,q),Y=0;break}}else for(;W<P;)if(q[Y++]=L[W++],Y==this.blockSize){a(this,q),Y=0;break}}this.h=Y,this.o+=P},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var P=1;P<L.length-8;++P)L[P]=0;var V=8*this.o;for(P=L.length-8;P<L.length;++P)L[P]=V&255,V/=256;for(this.u(L),L=Array(16),P=V=0;4>P;++P)for(var q=0;32>q;q+=8)L[V++]=this.g[P]>>>q&255;return L};function u(L,P){var V=d;return Object.prototype.hasOwnProperty.call(V,L)?V[L]:V[L]=P(L)}function c(L,P){this.h=P;for(var V=[],q=!0,Y=L.length-1;0<=Y;Y--){var W=L[Y]|0;q&&W==P||(V[Y]=W,q=!1)}this.g=V}var d={};function p(L){return-128<=L&&128>L?u(L,function(P){return new c([P|0],0>P?-1:0)}):new c([L|0],0>L?-1:0)}function v(L){if(isNaN(L)||!isFinite(L))return I;if(0>L)return oe(v(-L));for(var P=[],V=1,q=0;L>=V;q++)P[q]=L/V|0,V*=4294967296;return new c(P,0)}function T(L,P){if(L.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(L.charAt(0)=="-")return oe(T(L.substring(1),P));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=v(Math.pow(P,8)),q=I,Y=0;Y<L.length;Y+=8){var W=Math.min(8,L.length-Y),k=parseInt(L.substring(Y,Y+W),P);8>W?(W=v(Math.pow(P,W)),q=q.j(W).add(v(k))):(q=q.j(V),q=q.add(v(k)))}return q}var I=p(0),x=p(1),j=p(16777216);i=c.prototype,i.m=function(){if(ce(this))return-oe(this).m();for(var L=0,P=1,V=0;V<this.g.length;V++){var q=this.i(V);L+=(0<=q?q:4294967296+q)*P,P*=4294967296}return L},i.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(z(this))return"0";if(ce(this))return"-"+oe(this).toString(L);for(var P=v(Math.pow(L,6)),V=this,q="";;){var Y=Re(V,P).g;V=ye(V,Y.j(P));var W=((0<V.g.length?V.g[0]:V.h)>>>0).toString(L);if(V=Y,z(V))return W+q;for(;6>W.length;)W="0"+W;q=W+q}},i.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function z(L){if(L.h!=0)return!1;for(var P=0;P<L.g.length;P++)if(L.g[P]!=0)return!1;return!0}function ce(L){return L.h==-1}i.l=function(L){return L=ye(this,L),ce(L)?-1:z(L)?0:1};function oe(L){for(var P=L.g.length,V=[],q=0;q<P;q++)V[q]=~L.g[q];return new c(V,~L.h).add(x)}i.abs=function(){return ce(this)?oe(this):this},i.add=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0,Y=0;Y<=P;Y++){var W=q+(this.i(Y)&65535)+(L.i(Y)&65535),k=(W>>>16)+(this.i(Y)>>>16)+(L.i(Y)>>>16);q=k>>>16,W&=65535,k&=65535,V[Y]=k<<16|W}return new c(V,V[V.length-1]&-2147483648?-1:0)};function ye(L,P){return L.add(oe(P))}i.j=function(L){if(z(this)||z(L))return I;if(ce(this))return ce(L)?oe(this).j(oe(L)):oe(oe(this).j(L));if(ce(L))return oe(this.j(oe(L)));if(0>this.l(j)&&0>L.l(j))return v(this.m()*L.m());for(var P=this.g.length+L.g.length,V=[],q=0;q<2*P;q++)V[q]=0;for(q=0;q<this.g.length;q++)for(var Y=0;Y<L.g.length;Y++){var W=this.i(q)>>>16,k=this.i(q)&65535,Dn=L.i(Y)>>>16,Yt=L.i(Y)&65535;V[2*q+2*Y]+=k*Yt,me(V,2*q+2*Y),V[2*q+2*Y+1]+=W*Yt,me(V,2*q+2*Y+1),V[2*q+2*Y+1]+=k*Dn,me(V,2*q+2*Y+1),V[2*q+2*Y+2]+=W*Dn,me(V,2*q+2*Y+2)}for(q=0;q<P;q++)V[q]=V[2*q+1]<<16|V[2*q];for(q=P;q<2*P;q++)V[q]=0;return new c(V,0)};function me(L,P){for(;(L[P]&65535)!=L[P];)L[P+1]+=L[P]>>>16,L[P]&=65535,P++}function ae(L,P){this.g=L,this.h=P}function Re(L,P){if(z(P))throw Error("division by zero");if(z(L))return new ae(I,I);if(ce(L))return P=Re(oe(L),P),new ae(oe(P.g),oe(P.h));if(ce(P))return P=Re(L,oe(P)),new ae(oe(P.g),P.h);if(30<L.g.length){if(ce(L)||ce(P))throw Error("slowDivide_ only works with positive integers.");for(var V=x,q=P;0>=q.l(L);)V=Ce(V),q=Ce(q);var Y=Ve(V,1),W=Ve(q,1);for(q=Ve(q,2),V=Ve(V,2);!z(q);){var k=W.add(q);0>=k.l(L)&&(Y=Y.add(V),W=k),q=Ve(q,1),V=Ve(V,1)}return P=ye(L,Y.j(P)),new ae(Y,P)}for(Y=I;0<=L.l(P);){for(V=Math.max(1,Math.floor(L.m()/P.m())),q=Math.ceil(Math.log(V)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),W=v(V),k=W.j(P);ce(k)||0<k.l(L);)V-=q,W=v(V),k=W.j(P);z(W)&&(W=x),Y=Y.add(W),L=ye(L,k)}return new ae(Y,L)}i.A=function(L){return Re(this,L).h},i.and=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0;q<P;q++)V[q]=this.i(q)&L.i(q);return new c(V,this.h&L.h)},i.or=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0;q<P;q++)V[q]=this.i(q)|L.i(q);return new c(V,this.h|L.h)},i.xor=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0;q<P;q++)V[q]=this.i(q)^L.i(q);return new c(V,this.h^L.h)};function Ce(L){for(var P=L.g.length+1,V=[],q=0;q<P;q++)V[q]=L.i(q)<<1|L.i(q-1)>>>31;return new c(V,L.h)}function Ve(L,P){var V=P>>5;P%=32;for(var q=L.g.length-V,Y=[],W=0;W<q;W++)Y[W]=0<P?L.i(W+V)>>>P|L.i(W+V+1)<<32-P:L.i(W+V);return new c(Y,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,M1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=T,po=c}).apply(typeof XE<"u"?XE:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k1,lh,L1,Td,ey,U1,B1,z1;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,w){return h==Array.prototype||h==Object.prototype||(h[b]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var b=0;b<h.length;++b){var w=h[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var w=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var te=h[D];if(!(te in w))break e;w=w[te]}h=h[h.length-1],D=w[h],b=b(D),b!=D&&b!=null&&e(w,h,{configurable:!0,writable:!0,value:b})}}function u(h,b){h instanceof String&&(h+="");var w=0,D=!1,te={next:function(){if(!D&&w<h.length){var de=w++;return{value:b(de,h[de]),done:!1}}return D=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}a("Array.prototype.values",function(h){return h||function(){return u(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function v(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function T(h,b,w){return h.call.apply(h.bind,arguments)}function I(h,b,w){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,D),h.apply(b,te)}}return function(){return h.apply(b,arguments)}}function x(h,b,w){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,x.apply(null,arguments)}function j(h,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function z(h,b){function w(){}w.prototype=b.prototype,h.aa=b.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(D,te,de){for(var Ne=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Ne[vt-2]=arguments[vt];return b.prototype[te].apply(D,Ne)}}function ce(h){const b=h.length;if(0<b){const w=Array(b);for(let D=0;D<b;D++)w[D]=h[D];return w}return[]}function oe(h,b){for(let w=1;w<arguments.length;w++){const D=arguments[w];if(p(D)){const te=h.length||0,de=D.length||0;h.length=te+de;for(let Ne=0;Ne<de;Ne++)h[te+Ne]=D[Ne]}else h.push(D)}}class ye{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function me(h){return/^[\s\xa0]*$/.test(h)}function ae(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Re(h){return Re[" "](h),h}Re[" "]=function(){};var Ce=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function Ve(h,b,w){for(const D in h)b.call(w,h[D],D,h)}function L(h,b){for(const w in h)b.call(void 0,h[w],w,h)}function P(h){const b={};for(const w in h)b[w]=h[w];return b}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(h,b){let w,D;for(let te=1;te<arguments.length;te++){D=arguments[te];for(w in D)h[w]=D[w];for(let de=0;de<V.length;de++)w=V[de],Object.prototype.hasOwnProperty.call(D,w)&&(h[w]=D[w])}}function Y(h){var b=1;h=h.split(":");const w=[];for(;0<b&&h.length;)w.push(h.shift()),b--;return h.length&&w.push(h.join(":")),w}function W(h){d.setTimeout(()=>{throw h},0)}function k(){var h=pt;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class Dn{constructor(){this.h=this.g=null}add(b,w){const D=Yt.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var Yt=new ye(()=>new pe,h=>h.reset());class pe{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,Qe=!1,pt=new Dn,B=()=>{const h=d.Promise.resolve(void 0);Le=()=>{h.then(Te)}};var Te=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(w){W(w)}var b=Yt;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}Qe=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,b),d.removeEventListener("test",w,b)}catch{}return h}();function ct(h,b){if(Ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(Ce){e:{try{Re(b.nodeName);var te=!0;break e}catch{}te=!1}te||(b=null)}}else w=="mouseover"?b=h.fromElement:w=="mouseout"&&(b=h.toElement);this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:et[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ct.aa.h.call(this)}}z(ct,Ie);var et={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var un="closure_listenable_"+(1e6*Math.random()|0),Bt=0;function Fe(h,b,w,D,te){this.listener=h,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=te,this.key=++Bt,this.da=this.fa=!1}function Ni(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ar(h){this.src=h,this.g={},this.h=0}Ar.prototype.add=function(h,b,w,D,te){var de=h.toString();h=this.g[de],h||(h=this.g[de]=[],this.h++);var Ne=zr(h,b,D,te);return-1<Ne?(b=h[Ne],w||(b.fa=!1)):(b=new Fe(b,this.src,de,!!D,te),b.fa=w,h.push(b)),b};function Tt(h,b){var w=b.type;if(w in h.g){var D=h.g[w],te=Array.prototype.indexOf.call(D,b,void 0),de;(de=0<=te)&&Array.prototype.splice.call(D,te,1),de&&(Ni(b),h.g[w].length==0&&(delete h.g[w],h.h--))}}function zr(h,b,w,D){for(var te=0;te<h.length;++te){var de=h[te];if(!de.da&&de.listener==b&&de.capture==!!w&&de.ha==D)return te}return-1}var Ds="closure_lm_"+(1e6*Math.random()|0),jr={};function Nu(h,b,w,D,te){if(Array.isArray(b)){for(var de=0;de<b.length;de++)Nu(h,b[de],w,D,te);return null}return w=is(w),h&&h[un]?h.K(b,w,v(D)?!!D.capture:!1,te):Ir(h,b,w,!1,D,te)}function Ir(h,b,w,D,te,de){if(!b)throw Error("Invalid event type");var Ne=v(te)?!!te.capture:!!te,vt=li(h);if(vt||(h[Ds]=vt=new Ar(h)),w=vt.add(b,w,D,Ne,de),w.proxy)return w;if(D=Xl(),w.proxy=D,D.src=h,D.listener=w,h.addEventListener)We||(te=Ne),te===void 0&&(te=!1),h.addEventListener(b.toString(),D,te);else if(h.attachEvent)h.attachEvent(Ln(b.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Xl(){function h(w){return b.call(h.src,h.listener,w)}const b=Vu;return h}function So(h,b,w,D,te){if(Array.isArray(b))for(var de=0;de<b.length;de++)So(h,b[de],w,D,te);else D=v(D)?!!D.capture:!!D,w=is(w),h&&h[un]?(h=h.i,b=String(b).toString(),b in h.g&&(de=h.g[b],w=zr(de,w,D,te),-1<w&&(Ni(de[w]),Array.prototype.splice.call(de,w,1),de.length==0&&(delete h.g[b],h.h--)))):h&&(h=li(h))&&(b=h.g[b.toString()],h=-1,b&&(h=zr(b,w,D,te)),(w=-1<h?b[h]:null)&&rs(w))}function rs(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[un])Tt(b.i,h);else{var w=h.type,D=h.proxy;b.removeEventListener?b.removeEventListener(w,D,h.capture):b.detachEvent?b.detachEvent(Ln(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=li(b))?(Tt(w,h),w.h==0&&(w.src=null,b[Ds]=null)):Ni(h)}}}function Ln(h){return h in jr?jr[h]:jr[h]="on"+h}function Vu(h,b){if(h.da)h=!0;else{b=new ct(b,this);var w=h.listener,D=h.ha||h.src;h.fa&&rs(h),h=w.call(D,b)}return h}function li(h){return h=h[Ds],h instanceof Ar?h:null}var ya="__closure_events_fn_"+(1e9*Math.random()>>>0);function is(h){return typeof h=="function"?h:(h[ya]||(h[ya]=function(b){return h.handleEvent(b)}),h[ya])}function Nt(){Be.call(this),this.i=new Ar(this),this.M=this,this.F=null}z(Nt,Be),Nt.prototype[un]=!0,Nt.prototype.removeEventListener=function(h,b,w,D){So(this,h,b,w,D)};function yt(h,b){var w,D=h.F;if(D)for(w=[];D;D=D.F)w.push(D);if(h=h.M,D=b.type||b,typeof b=="string")b=new Ie(b,h);else if(b instanceof Ie)b.target=b.target||h;else{var te=b;b=new Ie(D,h),q(b,te)}if(te=!0,w)for(var de=w.length-1;0<=de;de--){var Ne=b.g=w[de];te=Yn(Ne,D,!0,b)&&te}if(Ne=b.g=h,te=Yn(Ne,D,!0,b)&&te,te=Yn(Ne,D,!1,b)&&te,w)for(de=0;de<w.length;de++)Ne=b.g=w[de],te=Yn(Ne,D,!1,b)&&te}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var w=h.g[b],D=0;D<w.length;D++)Ni(w[D]);delete h.g[b],h.h--}}this.F=null},Nt.prototype.K=function(h,b,w,D){return this.i.add(String(h),b,!1,w,D)},Nt.prototype.L=function(h,b,w,D){return this.i.add(String(h),b,!0,w,D)};function Yn(h,b,w,D){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var te=!0,de=0;de<b.length;++de){var Ne=b[de];if(Ne&&!Ne.da&&Ne.capture==w){var vt=Ne.listener,cn=Ne.ha||Ne.src;Ne.fa&&Tt(h.i,Ne),te=vt.call(cn,D)!==!1&&te}}return te&&!D.defaultPrevented}function ln(h,b,w){if(typeof h=="function")w&&(h=x(h,w));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:d.setTimeout(h,b||0)}function va(h){h.g=ln(()=>{h.g=null,h.i&&(h.i=!1,va(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class _a extends Be{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:va(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(h){Be.call(this),this.h=h,this.g={}}z(pr,Be);var ci=[];function Vi(h){Ve(h.g,function(b,w){this.g.hasOwnProperty(w)&&rs(b)},h),h.g={}}pr.prototype.N=function(){pr.aa.N.call(this),Vi(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=d.JSON.stringify,qe=d.JSON.parse,qr=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Fr(){}Fr.prototype.h=null;function ss(h){return h.h||(h.h=h.i())}function Ue(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){Ie.call(this,"d")}z(hi,Ie);function Os(){Ie.call(this,"c")}z(Os,Ie);var Hr={},Ps=null;function as(){return Ps=Ps||new Nt}Hr.La="serverreachability";function ba(h){Ie.call(this,Hr.La,h)}z(ba,Ie);function gr(h){const b=as();yt(b,new ba(b))}Hr.STAT_EVENT="statevent";function Mi(h,b){Ie.call(this,Hr.STAT_EVENT,h),this.stat=b}z(Mi,Ie);function zt(h){const b=as();yt(b,new Mi(b,h))}Hr.Ma="timingevent";function Zt(h,b){Ie.call(this,Hr.Ma,h),this.size=b}z(Zt,Ie);function ut(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function Ao(h,b,w,D,te,de){h.info(function(){if(h.g)if(de)for(var Ne="",vt=de.split("&"),cn=0;cn<vt.length;cn++){var wt=vt[cn].split("=");if(1<wt.length){var gn=wt[0];wt=wt[1];var sn=gn.split("_");Ne=2<=sn.length&&sn[1]=="type"?Ne+(gn+"="+wt+"&"):Ne+(gn+"=redacted&")}}else Ne=null;else Ne=de;return"XMLHTTP REQ ("+D+") [attempt "+te+"]: "+b+`
`+w+`
`+Ne})}function Ea(h,b,w,D,te,de,Ne){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+te+"]: "+b+`
`+w+`
`+de+" "+Ne})}function Gr(h,b,w,D){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Vs(h,w)+(D?" "+D:"")})}function Ns(h,b){h.info(function(){return"TIMEOUT: "+b})}Ot.prototype.info=function(){};function Vs(h,b){if(!h.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var D=w[h];if(!(2>D.length)){var te=D[1];if(Array.isArray(te)&&!(1>te.length)){var de=te[0];if(de!="noop"&&de!="stop"&&de!="close")for(var Ne=1;Ne<te.length;Ne++)te[Ne]=""}}}}return wn(w)}catch{return b}}var $n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},On;function yr(){}z(yr,Fr),yr.prototype.g=function(){return new XMLHttpRequest},yr.prototype.i=function(){return{}},On=new yr;function Xn(h,b,w,D){this.j=h,this.i=b,this.l=w,this.R=D||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vt}function Vt(){this.i=null,this.g="",this.h=!1}var Ta={},Rr={};function Cr(h,b,w){h.L=1,h.v=us(Bn(b)),h.m=w,h.P=!0,Qr(h,null)}function Qr(h,b){h.F=Date.now(),Wn(h),h.A=Bn(h.v);var w=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),sr(w.i,"t",D),h.C=0,w=h.j.J,h.h=new Vt,h.g=Oa(h.j,w?b:null,!h.m),0<h.O&&(h.M=new _a(x(h.Y,h,h.g),h.O)),b=h.U,w=h.g,D=h.ca;var te="readystatechange";Array.isArray(te)||(te&&(ci[0]=te.toString()),te=ci);for(var de=0;de<te.length;de++){var Ne=Nu(w,te[de],D||b.handleEvent,!1,b.h||b);if(!Ne)break;b.g[Ne.key]=Ne}b=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),gr(),Ao(h.i,h.u,h.A,h.l,h.R,h.m)}Xn.prototype.ca=function(h){h=h.target;const b=this.M;b&&or(h)==3?b.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)e:{const sn=or(this.g);var b=this.g.Ba();const Ti=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||sn!=4||b==7||(b==8||0>=Ti?gr(3):gr(2)),vr(this);var w=this.g.Z();this.X=w;t:if($t(this)){var D=Ra(this.g);h="";var te=D.length,de=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),_r(this);var Ne="";break t}this.h.i=new d.TextDecoder}for(b=0;b<te;b++)this.h.h=!0,h+=this.h.i.decode(D[b],{stream:!(de&&b==te-1)});D.length=0,this.h.g+=h,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=w==200,Ea(this.i,this.u,this.A,this.l,this.R,sn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,cn=this.g;if((vt=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(vt)){var wt=vt;break t}}wt=null}if(w=wt)Gr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ki(this,w);else{this.o=!1,this.s=3,zt(12),mn(this),_r(this);break e}}if(this.P){w=!0;let An;for(;!this.J&&this.C<Ne.length;)if(An=fi(this,Ne),An==Rr){sn==4&&(this.s=4,zt(14),w=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Ta){this.s=4,zt(15),Gr(this.i,this.l,Ne,"[Invalid Chunk]"),w=!1;break}else Gr(this.i,this.l,An,null),ki(this,An);if($t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||Ne.length!=0||this.h.h||(this.s=1,zt(16),w=!1),this.o=this.o&&w,!w)Gr(this.i,this.l,Ne,"[Invalid Chunked Response]"),mn(this),_r(this);else if(0<Ne.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),Wr(gn),gn.M=!0,zt(11))}}else Gr(this.i,this.l,Ne,null),ki(this,Ne);sn==4&&mn(this),this.o&&!this.J&&(sn==4?No(this.j,this):(this.o=!1,Wn(this)))}else Mu(this.g),w==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),mn(this),_r(this)}}}catch{}finally{}};function $t(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function fi(h,b){var w=h.C,D=b.indexOf(`
`,w);return D==-1?Rr:(w=Number(b.substring(w,D)),isNaN(w)?Ta:(D+=1,D+w>b.length?Rr:(b=b.slice(D,D+w),h.C=D+w,b)))}Xn.prototype.cancel=function(){this.J=!0,mn(this)};function Wn(h){h.S=Date.now()+h.I,Io(h,h.I)}function Io(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ut(x(h.ba,h),b)}function vr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Xn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ns(this.i,this.A),this.L!=2&&(gr(),zt(17)),mn(this),this.s=2,_r(this)):Io(this,this.S-h)};function _r(h){h.j.G==0||h.J||No(h.j,h)}function mn(h){vr(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,Vi(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function ki(h,b){try{var w=h.j;if(w.G!=0&&(w.g==h||ht(w.h,h))){if(!h.K&&ht(w.h,h)&&w.G==3){try{var D=w.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var te=D;if(te[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Qi(w),Bs(w);else break e;Gi(w),zt(18)}}else w.za=te[1],0<w.za-w.T&&37500>te[2]&&w.F&&w.v==0&&!w.C&&(w.C=ut(x(w.Za,w),6e3));if(1>=Ms(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Vr(w,11)}else if((h.K||w.g==h)&&Qi(w),!me(b))for(te=w.Da.g.parse(b),b=0;b<te.length;b++){let wt=te[b];if(w.T=wt[0],wt=wt[1],w.G==2)if(wt[0]=="c"){w.K=wt[1],w.ia=wt[2];const gn=wt[3];gn!=null&&(w.la=gn,w.j.info("VER="+w.la));const sn=wt[4];sn!=null&&(w.Aa=sn,w.j.info("SVER="+w.Aa));const Ti=wt[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(D=1.5*Ti,w.L=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const An=h.g;if(An){const wi=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var de=D.h;de.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(ks(de,de.h),de.h=null))}if(D.D){const Mo=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(D.ya=Mo,It(D.I,D.D,Mo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),D=w;var Ne=h;if(D.qa=Ei(D,D.J?D.ia:null,D.W),Ne.K){Un(D.h,Ne);var vt=Ne,cn=D.L;cn&&(vt.I=cn),vt.B&&(vr(vt),Wn(vt)),D.g=Ne}else pn(D);0<w.i.length&&Ki(w)}else wt[0]!="stop"&&wt[0]!="close"||Vr(w,7);else w.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Vr(w,7):fs(w):wt[0]!="noop"&&w.l&&w.l.ta(wt),w.v=0)}}gr(4)}catch{}}var di=class{constructor(h,b){this.g=h,this.map=b}};function mi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Li(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ms(h){return h.h?1:h.g?h.g.size:0}function ht(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function ks(h,b){h.g?h.g.add(b):h.h=b}function Un(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}mi.prototype.cancel=function(){if(this.i=wa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wa(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const w of h.g.values())b=b.concat(w.D);return b}return ce(h.i)}function Mt(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var b=[],w=h.length,D=0;D<w;D++)b.push(h[D]);return b}b=[],w=0;for(D in h)b[w++]=h[D];return b}function pi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var b=[];h=h.length;for(var w=0;w<h;w++)b.push(w);return b}b=[],w=0;for(const D in h)b[w++]=D;return b}}}function Ui(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var w=pi(h),D=Mt(h),te=D.length,de=0;de<te;de++)b.call(void 0,D[de],w&&w[de],h)}var xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ro(h,b){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var D=h[w].indexOf("="),te=null;if(0<=D){var de=h[w].substring(0,D);te=h[w].substring(D+1)}else de=h[w];b(de,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function en(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof en){this.h=h.h,os(this,h.j),this.o=h.o,this.g=h.g,Yr(this,h.s),this.l=h.l;var b=h.i,w=new zn;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),gi(this,w),this.m=h.m}else h&&(b=String(h).match(xr))?(this.h=!1,os(this,b[1]||"",!0),this.o=Dr(b[2]||""),this.g=Dr(b[3]||"",!0),Yr(this,b[4]),this.l=Dr(b[5]||"",!0),gi(this,b[6]||"",!0),this.m=Dr(b[7]||"")):(this.h=!1,this.i=new zn(null,this.h))}en.prototype.toString=function(){var h=[],b=this.j;b&&h.push(dt(b,Co,!0),":");var w=this.g;return(w||b=="file")&&(h.push("//"),(b=this.o)&&h.push(dt(b,Co,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(dt(w,w.charAt(0)=="/"?Jn:xo,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",dt(w,Bi)),h.join("")};function Bn(h){return new en(h)}function os(h,b,w){h.j=w?Dr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Yr(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function gi(h,b,w){b instanceof zn?(h.i=b,cs(h.i,h.h)):(w||(b=dt(b,ls)),h.i=new zn(b,h.h))}function It(h,b,w){h.i.set(b,w)}function us(h){return It(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Dr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dt(h,b,w){return typeof h=="string"?(h=encodeURI(h).replace(b,Sa),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sa(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Co=/[#\/\?@]/g,xo=/[#\?:]/g,Jn=/[#\?]/g,ls=/[#\?@]/g,Bi=/#/g;function zn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function br(h){h.g||(h.g=new Map,h.h=0,h.i&&Ro(h.i,function(b,w){h.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}i=zn.prototype,i.add=function(h,b){br(this),this.i=null,h=ar(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(b),this.h+=1,this};function yi(h,b){br(h),b=ar(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function jt(h,b){return br(h),b=ar(h,b),h.g.has(b)}i.forEach=function(h,b){br(this),this.g.forEach(function(w,D){w.forEach(function(te){h.call(b,te,D,this)},this)},this)},i.na=function(){br(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let D=0;D<b.length;D++){const te=h[D];for(let de=0;de<te.length;de++)w.push(b[D])}return w},i.V=function(h){br(this);let b=[];if(typeof h=="string")jt(this,h)&&(b=b.concat(this.g.get(ar(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)b=b.concat(h[w])}return b},i.set=function(h,b){return br(this),this.i=null,h=ar(this,h),jt(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},i.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function sr(h,b,w){yi(h,b),0<w.length&&(h.i=null,h.g.set(ar(h,b),ce(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var D=b[w];const de=encodeURIComponent(String(D)),Ne=this.V(D);for(D=0;D<Ne.length;D++){var te=de;Ne[D]!==""&&(te+="="+encodeURIComponent(String(Ne[D]))),h.push(te)}}return this.i=h.join("&")};function ar(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function cs(h,b){b&&!h.j&&(br(h),h.i=null,h.g.forEach(function(w,D){var te=D.toLowerCase();D!=te&&(yi(this,D),sr(this,te,w))},h)),h.j=b}function zi(h,b){const w=new Ot;if(d.Image){const D=new Image;D.onload=j(Or,w,"TestLoadImage: loaded",!0,b,D),D.onerror=j(Or,w,"TestLoadImage: error",!1,b,D),D.onabort=j(Or,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=j(Or,w,"TestLoadImage: timeout",!1,b,D),d.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else b(!1)}function Sn(h,b){const w=new Ot,D=new AbortController,te=setTimeout(()=>{D.abort(),Or(w,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:D.signal}).then(de=>{clearTimeout(te),de.ok?Or(w,"TestPingServer: ok",!0,b):Or(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(te),Or(w,"TestPingServer: error",!1,b)})}function Or(h,b,w,D,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),D(w)}catch{}}function jn(){this.g=new qr}function Pr(h,b,w){const D=w||"";try{Ui(h,function(te,de){let Ne=te;v(te)&&(Ne=wn(te)),b.push(D+de+"="+encodeURIComponent(Ne))})}catch(te){throw b.push(D+"type="+encodeURIComponent("_badmap")),te}}function ji(h){this.l=h.Ub||null,this.j=h.eb||!1}z(ji,Fr),ji.prototype.g=function(){return new $r(this.l,this.j)},ji.prototype.i=function(h){return function(){return h}}({});function $r(h,b){Nt.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z($r,Nt),i=$r.prototype,i.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,Xr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||d).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Nr(this):Xr(this),this.readyState==3&&qi(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},i.Qa=function(h){this.g&&(this.response=h,Nr(this))},i.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Xr(h)}i.setRequestHeader=function(h,b){this.u.append(h,b)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=b.next();return h.join(`\r
`)};function Xr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Do(h){let b="";return Ve(h,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function tn(h,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=Do(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):It(h,b,w))}function xt(h){Nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(xt,Nt);var Aa=/^https?$/i,vi=["POST","PUT"];i=xt.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():On.g(),this.v=this.o?ss(this.o):ss(On),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(de){Ls(this,de);return}if(h=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var te in D)w.set(te,D[te]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const de of D.keys())w.set(de,D.get(de));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(de=>de.toLowerCase()=="content-type"),te=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(vi,b,void 0))||D||te||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ne]of w)this.g.setRequestHeader(de,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Us(this),this.u=!0,this.g.send(h),this.u=!1}catch(de){Ls(this,de)}};function Ls(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,hs(h),_i(h)}function hs(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,yt(this,"complete"),yt(this,"abort"),_i(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),xt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},i.bb=function(){Ia(this)};function Ia(h){if(h.h&&typeof c<"u"&&(!h.v[1]||or(h)!=4||h.Z()!=2)){if(h.u&&or(h)==4)ln(h.Ea,0,h);else if(yt(h,"readystatechange"),or(h)==4){h.h=!1;try{const Ne=h.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=Ne===0){var te=String(h.D).match(xr)[1]||null;!te&&d.self&&d.self.location&&(te=d.self.location.protocol.slice(0,-1)),D=!Aa.test(te?te.toLowerCase():"")}w=D}if(w)yt(h,"complete"),yt(h,"success");else{h.m=6;try{var de=2<or(h)?h.g.statusText:""}catch{de=""}h.l=de+" ["+h.Z()+"]",hs(h)}}finally{_i(h)}}}}function _i(h,b){if(h.g){Us(h);const w=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||yt(h,"ready");try{w.onreadystatechange=D}catch{}}}function Us(h){h.I&&(d.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),qe(b)}};function Ra(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Mu(h){const b={};h=(h.g&&2<=or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(me(h[D]))continue;var w=Y(h[D]);const te=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const de=b[te]||[];b[te]=de,de.push(w)}L(b,function(D){return D.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(h,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||b}function Fi(h){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,h),this.cb=bi("retryDelaySeedMs",1e4,h),this.Wa=bi("forwardChannelMaxRetries",2,h),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(h&&h.concurrentRequestLimit),this.Da=new jn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Fi.prototype,i.la=8,i.G=1,i.connect=function(h,b,w,D){zt(0),this.W=h,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.I=Ei(this,null,this.W),Ki(this)};function fs(h){if(ku(h),h.G==3){var b=h.U++,w=Bn(h.I);if(It(w,"SID",h.K),It(w,"RID",b),It(w,"TYPE","terminate"),Hi(h,w),b=new Xn(h,h.j,b),b.L=2,b.v=us(Bn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=b.v,w=!0),w||(b.g=Oa(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Wn(b)}Da(h)}function Bs(h){h.g&&(Wr(h),h.g.cancel(),h.g=null)}function ku(h){Bs(h),h.u&&(d.clearTimeout(h.u),h.u=null),Qi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ki(h){if(!Li(h.h)&&!h.s){h.s=!0;var b=h.Ga;Le||B(),Qe||(Le(),Qe=!0),pt.add(b,h),h.B=0}}function Oo(h,b){return Ms(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ut(x(h.Ga,h,b),xa(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const te=new Xn(this,this.j,h);let de=this.o;if(this.S&&(de?(de=P(de),q(de,this.S)):de=this.S),this.m!==null||this.O||(te.H=de,de=null),this.P)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,4096<b){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Ca(this,te,b),w=Bn(this.I),It(w,"RID",h),It(w,"CVER",22),this.D&&It(w,"X-HTTP-Session-Id",this.D),Hi(this,w),de&&(this.O?b="headers="+encodeURIComponent(String(Do(de)))+"&"+b:this.m&&tn(w,this.m,de)),ks(this.h,te),this.Ua&&It(w,"TYPE","init"),this.P?(It(w,"$req",b),It(w,"SID","null"),te.T=!0,Cr(te,w,null)):Cr(te,w,b),this.G=2}}else this.G==3&&(h?zs(this,h):this.i.length==0||Li(this.h)||zs(this))};function zs(h,b){var w;b?w=b.l:w=h.U++;const D=Bn(h.I);It(D,"SID",h.K),It(D,"RID",w),It(D,"AID",h.T),Hi(h,D),h.m&&h.o&&tn(D,h.m,h.o),w=new Xn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),b&&(h.i=b.D.concat(h.i)),b=Ca(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ks(h.h,w),Cr(w,D,b)}function Hi(h,b){h.H&&Ve(h.H,function(w,D){It(b,D,w)}),h.l&&Ui({},function(w,D){It(b,D,w)})}function Ca(h,b,w){w=Math.min(h.i.length,w);var D=h.l?x(h.l.Na,h.l,h):null;e:{var te=h.i;let de=-1;for(;;){const Ne=["count="+w];de==-1?0<w?(de=te[0].g,Ne.push("ofs="+de)):de=0:Ne.push("ofs="+de);let vt=!0;for(let cn=0;cn<w;cn++){let wt=te[cn].g;const gn=te[cn].map;if(wt-=de,0>wt)de=Math.max(0,te[cn].g-100),vt=!1;else try{Pr(gn,Ne,"req"+wt+"_")}catch{D&&D(gn)}}if(vt){D=Ne.join("&");break e}}}return h=h.i.splice(0,w),b.D=h,D}function pn(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;Le||B(),Qe||(Le(),Qe=!0),pt.add(b,h),h.v=0}}function Gi(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ut(x(h.Fa,h),xa(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,Po(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ut(x(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Bs(this),Po(this))};function Wr(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Po(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=Bn(h.qa);It(b,"RID","rpc"),It(b,"SID",h.K),It(b,"AID",h.T),It(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&It(b,"TO",h.ja),It(b,"TYPE","xmlhttp"),Hi(h,b),h.m&&h.o&&tn(b,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=us(Bn(b)),w.m=null,w.P=!0,Qr(w,h)}i.Za=function(){this.C!=null&&(this.C=null,Bs(this),Gi(this),zt(19))};function Qi(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function No(h,b){var w=null;if(h.g==b){Qi(h),Wr(h),h.g=null;var D=2}else if(ht(h.h,b))w=b.D,Un(h.h,b),D=1;else return;if(h.G!=0){if(b.o)if(D==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var te=h.B;D=as(),yt(D,new Zt(D,w)),Ki(h)}else pn(h);else if(te=b.s,te==3||te==0&&0<b.X||!(D==1&&Oo(h,b)||D==2&&Gi(h)))switch(w&&0<w.length&&(b=h.h,b.i=b.i.concat(w)),te){case 1:Vr(h,5);break;case 4:Vr(h,10);break;case 3:Vr(h,6);break;default:Vr(h,2)}}}function xa(h,b){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*b}function Vr(h,b){if(h.j.info("Error code "+b),b==2){var w=x(h.fb,h),D=h.Xa;const te=!D;D=new en(D||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||os(D,"https"),us(D),te?zi(D.toString(),w):Sn(D.toString(),w)}else zt(2);h.G=0,h.l&&h.l.sa(b),Da(h),ku(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Da(h){if(h.G=0,h.ka=[],h.l){const b=wa(h.h);(b.length!=0||h.i.length!=0)&&(oe(h.ka,b),oe(h.ka,h.i),h.h.i.length=0,ce(h.i),h.i.length=0),h.l.ra()}}function Ei(h,b,w){var D=w instanceof en?Bn(w):new en(w);if(D.g!="")b&&(D.g=b+"."+D.g),Yr(D,D.s);else{var te=d.location;D=te.protocol,b=b?b+"."+te.hostname:te.hostname,te=+te.port;var de=new en(null);D&&os(de,D),b&&(de.g=b),te&&Yr(de,te),w&&(de.l=w),D=de}return w=h.D,b=h.ya,w&&b&&It(D,w,b),It(D,"VER",h.la),Hi(h,D),D}function Oa(h,b,w){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new xt(new ji({eb:w})):new xt(h.pa),b.Ha(h.J),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pa(){}i=Pa.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Yi(){}Yi.prototype.g=function(h,b){return new Pn(h,b)};function Pn(h,b){Nt.call(this),this.g=new Fi(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!me(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!me(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Mr(this)}z(Pn,Nt),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){fs(this.g)},Pn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=wn(h),h=w);b.i.push(new di(b.Ya++,h)),b.G==3&&Ki(b)},Pn.prototype.N=function(){this.g.l=null,delete this.j,fs(this.g),delete this.g,Pn.aa.N.call(this)};function Vo(h){hi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const w in b){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}z(Vo,hi);function Lu(){Os.call(this),this.status=1}z(Lu,Os);function Mr(h){this.g=h}z(Mr,Pa),Mr.prototype.ua=function(){yt(this.g,"a")},Mr.prototype.ta=function(h){yt(this.g,new Vo(h))},Mr.prototype.sa=function(h){yt(this.g,new Lu)},Mr.prototype.ra=function(){yt(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,z1=function(){return new Yi},B1=function(){return as()},U1=Hr,ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Td=$n,ir.COMPLETE="complete",L1=ir,Ue.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,lh=Ue,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,k1=xt}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const WE="@firebase/firestore",JE="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new ky("@firebase/firestore");function pl(){return Eu.logLevel}function Ae(i,...e){if(Eu.logLevel<=St.DEBUG){const t=e.map(Xy);Eu.debug(`Firestore (${Gl}): ${i}`,...t)}}function bn(i,...e){if(Eu.logLevel<=St.ERROR){const t=e.map(Xy);Eu.error(`Firestore (${Gl}): ${i}`,...t)}}function Ah(i,...e){if(Eu.logLevel<=St.WARN){const t=e.map(Xy);Eu.warn(`Firestore (${Gl}): ${i}`,...t)}}function Xy(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,j1(i,r,t)}function j1(i,e,t){let r=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bn(r),new Error(r)}function $e(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||j1(e,a,r)}function Ye(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class fP{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let u=new go;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new go,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new go)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new cP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class dP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const a=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ZE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ZE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=gP(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<t&&(r+=e.charAt(a[u]%62))}return r}}function at(i,e){return i<e?-1:i>e?1:0}function ty(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return at(r,a);{const u=q1(),c=yP(u.encode(eT(i,t)),u.encode(eT(e,t)));return c!==0?c:at(r,a)}}t+=r>65535?2:1}return at(i.length,e.length)}function eT(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function yP(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return at(i[t],e[t]);return at(i.length,e.length)}function Rl(i,e,t){return i.length===e.length&&i.every((r,a)=>t(r,e[a]))}function K1(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=-62135596800,nT=1e6;class Qn{static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*nT);return new Qn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tT)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nT}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-tT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Qn(0,0))}static max(){return new Ze(new Qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&He(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const u=bs.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return at(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),a=bs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?bs.extractNumericId(e).compare(bs.extractNumericId(t)):ty(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class Qt extends bs{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const vP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends bs{construct(e,t,r){return new En(e,t,r)}static isValidIdentifier(e){return vP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rT}static keyField(){return new En([rT])}static fromServerFormat(e){const t=[];let r="",a=0;const u=()=>{if(r.length===0)throw new Ge(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ge(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ge(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(u(),a++)}if(u(),c)throw new Ge(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Qt.fromString(e))}static fromName(e){return new ze(Qt.fromString(e).popFirst(5))}static empty(){return new ze(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;class zd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function ny(i){return i.fields.find(e=>e.kind===2)}function au(i){return i.fields.filter(e=>e.kind!==2)}zd.UNKNOWN_ID=-1;class wd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ih(0,ui.min())}}function H1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ze.fromTimestamp(r===1e9?new Qn(t+1,0):new Qn(t,r));return new ui(a,ze.empty(),e)}function G1(i){return new ui(i.readTime,i.key,Cl)}class ui{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ui(Ze.min(),ze.empty(),Cl)}static max(){return new ui(Ze.max(),ze.empty(),Cl)}}function Wy(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(i.documentKey,e.documentKey),t!==0?t:at(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(i){if(i.code!==we.FAILED_PRECONDITION||i.message!==Q1)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let a=0,u=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++u,c&&u===a&&t()},p=>r(p))}),c=!0,u===a&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(a=>a?ne.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,u)=>{r.push(t.call(this,a,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,a)=>{const u=e.length,c=new Array(u);let d=0;for(let p=0;p<u;p++){const v=p;t(e[v]).next(T=>{c[v]=T,++d,d===u&&r(c)},T=>a(T))}})}static doWhile(e,t){return new ne((r,a)=>{const u=()=>{e()===!0?t().next(()=>{u()},a):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="SimpleDb";class gm{static open(e,t,r,a){try{return new gm(t,e.transaction(a,r))}catch(u){throw new ph(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new go,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ph(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Jy(r.target.error);this.S.reject(new ph(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ae(ai,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bP(t)}}class yo{static delete(e){return Ae(ai,"Removing database:",e),uu(Qw().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Jw())return!1;if(yo.F())return!0;const e=Mn(),t=yo.M(e),r=0<t&&t<10,a=$1(e),u=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,yo.M(Mn())===12.2&&bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ae(ai,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=u=>{const c=u.target.result;t(c)},a.onblocked=()=>{r(new ph(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new Ge(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new Ge(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ph(e,c))},a.onupgradeneeded=u=>{Ae(ai,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;if(this.L!==null&&this.L!==u.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${u.oldVersion}, event.newVersion=${u.newVersion}, db.version=${c.version}`);this.B.q(c,a.transaction,u.oldVersion,this.version).next(()=>{Ae(ai,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=gm.open(this.db,e,u?"readonly":"readwrite",r),p=a(d).next(v=>(d.v(),v)).catch(v=>(d.abort(v),ne.reject(v))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,v=p.name!=="FirebaseError"&&c<3;if(Ae(ai,"Transaction failed with error:",p.message,"Retrying:",v),this.close(),!v)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function $1(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _P{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return uu(this.K.delete())}}class ph extends Ge{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wo(i){return i.name==="IndexedDbTransactionError"}class bP{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ae(ai,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae(ai,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uu(r)}add(e){return Ae(ai,"ADD",this.store.name,e,e),uu(this.store.add(e))}get(e){return uu(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ae(ai,"GET",this.store.name,e,t),t))}delete(e){return Ae(ai,"DELETE",this.store.name,e),uu(this.store.delete(e))}count(){return Ae(ai,"COUNT",this.store.name),uu(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const u=a.getAll(r.range);return new ne((c,d)=>{u.onerror=p=>{d(p.target.error)},u.onsuccess=p=>{c(p.target.result)}})}{const u=this.cursor(r),c=[];return this.Y(u,(d,p)=>{c.push(p)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ne((a,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}X(e,t){Ae(ai,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const a=this.cursor(r);return this.Y(a,(u,c,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Y(a,t)}ne(e){const t=this.cursor({});return new ne((r,a)=>{t.onerror=u=>{const c=Jy(u.target.error);a(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}Y(e,t){const r=[];return new ne((a,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new _P(d),v=t(d.primaryKey,d.value,p);if(v instanceof ne){const T=v.catch(I=>(p.done(),ne.reject(I)));r.push(T)}p.isDone?a():p.j===null?d.continue():d.continue(p.j)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uu(i){return new ne((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=Jy(r.target.error);t(a)}})}let iT=!1;function Jy(i){const e=yo.M(Mn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iT||(iT=!0,setTimeout(()=>{throw r},0)),r}}return i}const gh="IndexBackfiller";class EP{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Ae(gh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Ae(gh,`Documents written: ${t}`)}catch(t){wo(t)?Ae(gh,"Ignoring IndexedDB error during index backfill: ",t):await To(t)}await this.ie(6e4)})}}class TP{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let a=t,u=!0;return ne.doWhile(()=>u===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Ae(gh,`Processing collection: ${c}`),this._e(e,c,a).next(d=>{a-=d,r.add(c)});u=!1})).next(()=>t-a)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(a,u)).next(d=>(Ae(gh,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((a,u)=>{const c=G1(u);Wy(c,r)>0&&(r=c)}),new ui(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Br.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function ym(i){return i==null}function Rh(i){return i===0&&1/i==-1/0}function wP(i){return typeof i=="number"&&Number.isInteger(i)&&!Rh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="";function mr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=sT(e)),e=SP(i.get(t),e);return sT(e)}function SP(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const u=i.charAt(a);switch(u){case"\0":t+="";break;case jd:t+="";break;default:t+=u}}return t}function sT(i){return i+jd+""}function ws(i){const e=i.length;if($e(e>=2,64408,{path:i}),e===2)return $e(i.charAt(0)===jd&&i.charAt(1)==="",56145,{path:i}),Qt.emptyPath();const t=e-2,r=[];let a="";for(let u=0;u<e;){const c=i.indexOf(jd,u);switch((c<0||c>t)&&He(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(u,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),r.push(p);break;case"":a+=i.substring(u,c),a+="\0";break;case"":a+=i.substring(u,c+1);break;default:He(61167,{path:i})}u=c+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="remoteDocuments",Jh="owner",ll="owner",Ch="mutationQueues",AP="userId",Ji="mutations",aT="batchId",du="userMutationsIndex",oT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(i,e){return[i,mr(e)]}function X1(i,e,t){return[i,mr(e),t]}const IP={},xl="documentMutations",qd="remoteDocumentsV14",RP=["prefixPath","collectionGroup","readTime","documentId"],Ad="documentKeyIndex",CP=["prefixPath","collectionGroup","documentId"],W1="collectionGroupIndex",xP=["collectionGroup","readTime","prefixPath","documentId"],xh="remoteDocumentGlobal",ry="remoteDocumentGlobalKey",Dl="targets",J1="queryTargetsIndex",DP=["canonicalId","targetId"],Ol="targetDocuments",OP=["targetId","path"],Zy="documentTargetsIndex",PP=["path","targetId"],Fd="targetGlobalKey",gu="targetGlobal",Dh="collectionParents",NP=["collectionId","parent"],Pl="clientMetadata",VP="clientId",vm="bundles",MP="bundleId",_m="namedQueries",kP="name",ev="indexConfiguration",LP="indexId",iy="collectionGroupIndex",UP="collectionGroup",Kd="indexState",BP=["indexId","uid"],Z1="sequenceNumberIndex",zP=["uid","sequenceNumber"],Hd="indexEntries",jP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eS="documentKeyIndex",qP=["indexId","uid","orderedDocumentKey"],bm="documentOverlays",FP=["userId","collectionPath","documentId"],sy="collectionPathOverlayIndex",KP=["userId","collectionPath","largestBatchId"],tS="collectionGroupOverlayIndex",HP=["userId","collectionGroup","largestBatchId"],tv="globals",GP="name",nS=[Ch,Ji,xl,ou,Dl,Jh,gu,Ol,Pl,xh,Dh,vm,_m],QP=[...nS,bm],rS=[Ch,Ji,xl,qd,Dl,Jh,gu,Ol,Pl,xh,Dh,vm,_m,bm],iS=rS,nv=[...iS,ev,Kd,Hd],YP=nv,$P=[...nv,tv];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends Y1{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function kn(i,e){const t=Ye(i);return yo.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Zh(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function XP(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new Jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,t,r,a,u){this.key=e,this.value=t,this.color=r??rr.RED,this.left=a??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,u){return new rr(e??this.key,t??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const u=r(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,r),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,r,a,u){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lT(this.data.getIterator())}getIteratorFrom(e){return new lT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class lT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new ia([])}unionWith(e){let t=new Ut(En.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ia(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new sS("Invalid base64 string: "+u):u}}(e);return new Tn(t)}static fromUint8Array(e){const t=function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u}(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const WP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ha(i){if($e(!!i,39018),typeof i=="string"){let e=0;const t=WP.exec(i);if($e(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(i.seconds),nanos:rn(i.nanos)}}function rn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function fa(i){return typeof i=="string"?Tn.fromBase64String(i):Tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="server_timestamp",oS="__type__",uS="__previous_value__",lS="__local_write_time__";function rv(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[oS])===null||t===void 0?void 0:t.stringValue)===aS}function Em(i){const e=i.mapValue.fields[uS];return rv(e)?Em(e):e}function Oh(i){const e=ha(i.mapValue.fields[lS].timestampValue);return new Qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,r,a,u,c,d,p,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=T}}const Gd="(default)";class Tu{constructor(e,t){this.projectId=e,this.database=t||Gd}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database===Gd}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="__type__",hS="__max__",co={mapValue:{fields:{__type__:{stringValue:hS}}}},fS="__vector__",Ph="value",Id={nullValue:"NULL_VALUE"};function vo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?rv(i)?4:dS(i)?9007199254740991:Tm(i)?10:11:He(28295,{value:i})}function Cs(i,e){if(i===e)return!0;const t=vo(i);if(t!==vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Oh(i).isEqual(Oh(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=ha(a.timestampValue),d=ha(u.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,u){return fa(a.bytesValue).isEqual(fa(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,u){return rn(a.geoPointValue.latitude)===rn(u.geoPointValue.latitude)&&rn(a.geoPointValue.longitude)===rn(u.geoPointValue.longitude)}(i,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return rn(a.integerValue)===rn(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=rn(a.doubleValue),d=rn(u.doubleValue);return c===d?Rh(c)===Rh(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return Rl(i.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:case 11:return function(a,u){const c=a.mapValue.fields||{},d=u.mapValue.fields||{};if(uT(c)!==uT(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Cs(c[p],d[p])))return!1;return!0}(i,e);default:return He(52216,{left:i})}}function Nh(i,e){return(i.values||[]).find(t=>Cs(t,e))!==void 0}function _o(i,e){if(i===e)return 0;const t=vo(i),r=vo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(i.booleanValue,e.booleanValue);case 2:return function(u,c){const d=rn(u.integerValue||u.doubleValue),p=rn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return cT(i.timestampValue,e.timestampValue);case 4:return cT(Oh(i),Oh(e));case 5:return ty(i.stringValue,e.stringValue);case 6:return function(u,c){const d=fa(u),p=fa(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,c){const d=u.split("/"),p=c.split("/");for(let v=0;v<d.length&&v<p.length;v++){const T=at(d[v],p[v]);if(T!==0)return T}return at(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,c){const d=at(rn(u.latitude),rn(c.latitude));return d!==0?d:at(rn(u.longitude),rn(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return hT(i.arrayValue,e.arrayValue);case 10:return function(u,c){var d,p,v,T;const I=u.fields||{},x=c.fields||{},j=(d=I[Ph])===null||d===void 0?void 0:d.arrayValue,z=(p=x[Ph])===null||p===void 0?void 0:p.arrayValue,ce=at(((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0,((T=z==null?void 0:z.values)===null||T===void 0?void 0:T.length)||0);return ce!==0?ce:hT(j,z)}(i.mapValue,e.mapValue);case 11:return function(u,c){if(u===co.mapValue&&c===co.mapValue)return 0;if(u===co.mapValue)return 1;if(c===co.mapValue)return-1;const d=u.fields||{},p=Object.keys(d),v=c.fields||{},T=Object.keys(v);p.sort(),T.sort();for(let I=0;I<p.length&&I<T.length;++I){const x=ty(p[I],T[I]);if(x!==0)return x;const j=_o(d[p[I]],v[T[I]]);if(j!==0)return j}return at(p.length,T.length)}(i.mapValue,e.mapValue);default:throw He(23264,{Pe:t})}}function cT(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return at(i,e);const t=ha(i),r=ha(e),a=at(t.seconds,r.seconds);return a!==0?a:at(t.nanos,r.nanos)}function hT(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const u=_o(t[a],r[a]);if(u)return u}return at(t.length,r.length)}function Nl(i){return oy(i)}function oy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=ha(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return fa(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ze.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",a=!0;for(const u of t.values||[])a?a=!1:r+=",",r+=oy(u);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const c of r)u?u=!1:a+=",",a+=`${c}:${oy(t.fields[c])}`;return a+"}"}(i.mapValue):He(61005,{value:i})}function Rd(i){switch(vo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(i);return e?16+Rd(e):16;case 5:return 2*i.stringValue.length;case 6:return fa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,u)=>a+Rd(u),0)}(i.arrayValue);case 10:case 11:return function(r){let a=0;return Zh(r.fields,(u,c)=>{a+=u.length+Rd(c)}),a}(i.mapValue);default:throw He(13486,{value:i})}}function iv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function uy(i){return!!i&&"integerValue"in i}function Vh(i){return!!i&&"arrayValue"in i}function fT(i){return!!i&&"nullValue"in i}function dT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ng(i){return!!i&&"mapValue"in i}function Tm(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[cS])===null||t===void 0?void 0:t.stringValue)===fS}function yh(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Zh(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yh(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(i.arrayValue.values[t]);return e}return Object.assign({},i)}function dS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===hS}const mS={mapValue:{fields:{[cS]:{stringValue:fS},[Ph]:{arrayValue:{}}}}};function ZP(i){return"nullValue"in i?Id:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?iv(Tu.empty(),ze.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Tm(i)?mS:{mapValue:{}}:He(35942,{value:i})}function eN(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?iv(Tu.empty(),ze.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?mS:"mapValue"in i?Tm(i)?{mapValue:{}}:co:He(61959,{value:i})}function mT(i,e){const t=_o(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function pT(i,e){const t=_o(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ng(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=En.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=yh(c):a.push(d.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,a)}delete(e){const t=this.field(e.popLast());Ng(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Ng(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Zh(t,(a,u)=>e[a]=u);for(const a of r)delete e[a]}clone(){return new Oi(yh(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,a,u,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=u,this.data=c,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,Ze.min(),Ze.min(),Ze.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,a){return new dn(e,1,t,Ze.min(),r,a,0)}static newNoDocument(e,t){return new dn(e,2,t,Ze.min(),Ze.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Ze.min(),Ze.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t){this.position=e,this.inclusive=t}}function gT(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const u=e[a],c=i.position[a];if(u.field.isKeyField()?r=ze.comparator(ze.fromName(c.referenceValue),t.key):r=_o(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function yT(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Cs(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function tN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{}class At extends pS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nN(e,t,r):t==="array-contains"?new sN(e,r):t==="in"?new ES(e,r):t==="not-in"?new aN(e,r):t==="array-contains-any"?new oN(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rN(e,r):new iN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_o(t,this.value)):t!==null&&vo(this.value)===vo(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends pS{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ht(e,t)}matches(e){return Ml(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ml(i){return i.op==="and"}function ly(i){return i.op==="or"}function sv(i){return gS(i)&&Ml(i)}function gS(i){for(const e of i.filters)if(e instanceof Ht)return!1;return!0}function cy(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+Nl(i.value);if(sv(i))return i.filters.map(e=>cy(e)).join(",");{const e=i.filters.map(t=>cy(t)).join(",");return`${i.op}(${e})`}}function yS(i,e){return i instanceof At?function(r,a){return a instanceof At&&r.op===a.op&&r.field.isEqual(a.field)&&Cs(r.value,a.value)}(i,e):i instanceof Ht?function(r,a){return a instanceof Ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((u,c,d)=>u&&yS(c,a.filters[d]),!0):!1}(i,e):void He(19439)}function vS(i,e){const t=i.filters.concat(e);return Ht.create(t,i.op)}function _S(i){return i instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`}(i):i instanceof Ht?function(t){return t.op.toString()+" {"+t.getFilters().map(_S).join(" ,")+"}"}(i):"Filter"}class nN extends At{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class rN extends At{constructor(e,t){super(e,"in",t),this.keys=bS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iN extends At{constructor(e,t){super(e,"not-in",t),this.keys=bS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bS(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class sN extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vh(t)&&Nh(t.arrayValue,this.value)}}class ES extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nh(this.value.arrayValue,t)}}class aN extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nh(this.value.arrayValue,t)}}class oN extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t=null,r=[],a=[],u=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=c,this.endAt=d,this.Ie=null}}function hy(i,e=null,t=[],r=[],a=null,u=null,c=null){return new uN(i,e,t,r,a,u,c)}function wu(i){const e=Ye(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),ym(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nl(r)).join(",")),e.Ie=t}return e.Ie}function ef(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!tN(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!yS(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!yT(i.startAt,e.startAt)&&yT(i.endAt,e.endAt)}function Yd(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function $d(i,e){return i.filters.filter(t=>t instanceof At&&t.field.isEqual(e))}function vT(i,e,t){let r=Id,a=!0;for(const u of $d(i,e)){let c=Id,d=!0;switch(u.op){case"<":case"<=":c=ZP(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,d=!1;break;case"!=":case"not-in":c=Id}mT({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let u=0;u<i.orderBy.length;++u)if(i.orderBy[u].field.isEqual(e)){const c=t.position[u];mT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function _T(i,e,t){let r=co,a=!0;for(const u of $d(i,e)){let c=co,d=!0;switch(u.op){case">=":case">":c=eN(u.value),d=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,d=!1;break;case"!=":case"not-in":c=co}pT({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let u=0;u<i.orderBy.length;++u)if(i.orderBy[u].field.isEqual(e)){const c=t.position[u];pT({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t=null,r=[],a=[],u=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function TS(i,e,t,r,a,u,c,d){return new wm(i,e,t,r,a,u,c,d)}function Sm(i){return new wm(i)}function bT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function lN(i){return i.collectionGroup!==null}function vh(i){const e=Ye(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ut(En.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(d=d.add(v.field))})}),d})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Qd(u,r))}),t.has(En.keyField().canonicalString())||e.Ee.push(new Qd(En.keyField(),r))}return e.Ee}function oi(i){const e=Ye(i);return e.de||(e.de=cN(e,vh(i))),e.de}function cN(i,e){if(i.limitType==="F")return hy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new Qd(a.field,u)});const t=i.endAt?new Vl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Vl(i.startAt.position,i.startAt.inclusive):null;return hy(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function fy(i,e,t){return new wm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Am(i,e){return ef(oi(i),oi(e))&&i.limitType===e.limitType}function wS(i){return`${wu(oi(i))}|lt:${i.limitType}`}function gl(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>_S(a)).join(", ")}]`),ym(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Nl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Nl(a)).join(",")),`Target(${r})`}(oi(i))}; limitType=${i.limitType})`}function tf(i,e){return e.isFoundDocument()&&function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ze.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(i,e)&&function(r,a){for(const u of vh(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(i,e)&&function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0}(i,e)&&function(r,a){return!(r.startAt&&!function(c,d,p){const v=gT(c,d,p);return c.inclusive?v<=0:v<0}(r.startAt,vh(r),a)||r.endAt&&!function(c,d,p){const v=gT(c,d,p);return c.inclusive?v>=0:v>0}(r.endAt,vh(r),a))}(i,e)}function SS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function AS(i){return(e,t)=>{let r=!1;for(const a of vh(i)){const u=hN(a,e,t);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function hN(i,e,t){const r=i.field.isKeyField()?ze.comparator(e.key,t.key):function(u,c,d){const p=c.data.field(u),v=d.data.field(u);return p!==null&&v!==null?_o(p,v):He(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zh(this.inner,(t,r)=>{for(const[a,u]of r)e(a,u)})}isEmpty(){return XP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Jt(ze.comparator);function Pi(){return fN}const IS=new Jt(ze.comparator);function ch(...i){let e=IS;for(const t of i)e=e.insert(t.key,t);return e}function dN(i){let e=IS;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ss(){return _h()}function RS(){return _h()}function _h(){return new ga(i=>i.toString(),(i,e)=>i.isEqual(e))}const mN=new Jt(ze.comparator),pN=new Ut(ze.comparator);function Et(...i){let e=pN;for(const t of i)e=e.add(t);return e}const gN=new Ut(at);function av(){return gN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function vN(i){return{integerValue:""+i}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this._=void 0}}function _N(i,e,t){return i instanceof Mh?function(a,u){const c={fields:{[oS]:{stringValue:aS},[lS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&rv(u)&&(u=Em(u)),u&&(c.fields[uS]=u),{mapValue:c}}(t,e):i instanceof kl?CS(i,e):i instanceof Ll?xS(i,e):function(a,u){const c=EN(a,u),d=ET(c)+ET(a.Re);return uy(c)&&uy(a.Re)?vN(d):yN(a.serializer,d)}(i,e)}function bN(i,e,t){return i instanceof kl?CS(i,e):i instanceof Ll?xS(i,e):t}function EN(i,e){return i instanceof kh?function(r){return uy(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class Mh extends Im{}class kl extends Im{constructor(e){super(),this.elements=e}}function CS(i,e){const t=DS(e);for(const r of i.elements)t.some(a=>Cs(a,r))||t.push(r);return{arrayValue:{values:t}}}class Ll extends Im{constructor(e){super(),this.elements=e}}function xS(i,e){let t=DS(e);for(const r of i.elements)t=t.filter(a=>!Cs(a,r));return{arrayValue:{values:t}}}class kh extends Im{constructor(e,t){super(),this.serializer=e,this.Re=t}}function ET(i){return rn(i.integerValue||i.doubleValue)}function DS(i){return Vh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.field=e,this.transform=t}}function wN(i,e){return i.field.isEqual(e.field)&&function(r,a){return r instanceof kl&&a instanceof kl||r instanceof Ll&&a instanceof Ll?Rl(r.elements,a.elements,Cs):r instanceof kh&&a instanceof kh?Cs(r.Re,a.Re):r instanceof Mh&&a instanceof Mh}(i.transform,e.transform)}class SN{constructor(e,t){this.version=e,this.transformResults=t}}class ts{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Rm{}function OS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ov(i.key,ts.none()):new nf(i.key,i.data,ts.none());{const t=i.data,r=Oi.empty();let a=new Ut(En.comparator);for(let u of e.fields)if(!a.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),a=a.add(u)}return new Ql(i.key,r,new ia(a.toArray()),ts.none())}}function AN(i,e,t){i instanceof nf?function(a,u,c){const d=a.value.clone(),p=wT(a.fieldTransforms,u,c.transformResults);d.setAll(p),u.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Ql?function(a,u,c){if(!Cd(a.precondition,u))return void u.convertToUnknownDocument(c.version);const d=wT(a.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(PS(a)),p.setAll(d),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function bh(i,e,t,r){return i instanceof nf?function(u,c,d,p){if(!Cd(u.precondition,c))return d;const v=u.value.clone(),T=ST(u.fieldTransforms,p,c);return v.setAll(T),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(i,e,t,r):i instanceof Ql?function(u,c,d,p){if(!Cd(u.precondition,c))return d;const v=ST(u.fieldTransforms,p,c),T=c.data;return T.setAll(PS(u)),T.setAll(v),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(I=>I.field))}(i,e,t,r):function(u,c,d){return Cd(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function TT(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Rl(r,a,(u,c)=>wN(u,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class nf extends Rm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ql extends Rm{constructor(e,t,r,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function PS(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function wT(i,e,t){const r=new Map;$e(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let a=0;a<t.length;a++){const u=i[a],c=u.transform,d=e.data.field(u.field);r.set(u.field,bN(c,d,t[a]))}return r}function ST(i,e,t){const r=new Map;for(const a of i){const u=a.transform,c=t.data.field(a.field);r.set(a.field,_N(u,c,e))}return r}class ov extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NS extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&AN(u,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RS();return this.mutations.forEach(a=>{const u=e.get(a.key),c=u.overlayedDocument;let d=this.applyToLocalView(c,u.mutatedFields);d=t.has(a.key)?null:d;const p=OS(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Et())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(t,r)=>TT(t,r))&&Rl(this.baseMutations,e.baseMutations,(t,r)=>TT(t,r))}}class lv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){$e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let a=function(){return mN}();const u=e.mutations;for(let c=0;c<u.length;c++)a=a.insert(u[c].key,r[c].version);return new lv(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,Ct;function RN(i){switch(i){case we.OK:return He(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return He(15467,{code:i})}}function VS(i){if(i===void 0)return bn("GRPC error has no .code"),we.UNKNOWN;switch(i){case xn.OK:return we.OK;case xn.CANCELLED:return we.CANCELLED;case xn.UNKNOWN:return we.UNKNOWN;case xn.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case xn.INTERNAL:return we.INTERNAL;case xn.UNAVAILABLE:return we.UNAVAILABLE;case xn.UNAUTHENTICATED:return we.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case xn.NOT_FOUND:return we.NOT_FOUND;case xn.ALREADY_EXISTS:return we.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return we.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case xn.ABORTED:return we.ABORTED;case xn.OUT_OF_RANGE:return we.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return we.UNIMPLEMENTED;case xn.DATA_LOSS:return we.DATA_LOSS;default:return He(39323,{code:i})}}(Ct=xn||(xn={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new po([4294967295,4294967295],0);function AT(i){const e=q1().encode(i),t=new M1;return t.update(e),new Uint8Array(t.digest())}function IT(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new po([t,r],0),new po([a,u],0)]}class hv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new hh(`Invalid padding: ${t}`);if(r<0)throw new hh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new hh(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=po.fromNumber(this.pe)}we(e,t,r){let a=e.add(t.multiply(po.fromNumber(r)));return a.compare(CN)===1&&(a=new po([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=AT(e),[r,a]=IT(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);if(!this.be(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new hv(u,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=AT(e),[r,a]=IT(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class hh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,sf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rf(Ze.min(),a,new Jt(at),Pi(),Et())}}class sf{constructor(e,t,r,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sf(r,t,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,r,a){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=a}}class MS{constructor(e,t){this.targetId=e,this.Ce=t}}class kS{constructor(e,t,r=Tn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class RT{constructor(){this.Fe=0,this.Me=CT(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Et(),t=Et(),r=Et();return this.Me.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:He(38017,{changeType:u})}}),new sf(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=CT()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class xN{constructor(e){this.ze=e,this.je=new Map,this.He=Pi(),this.Je=cd(),this.Ye=cd(),this.Ze=new Jt(at)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:He(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,r=e.Ce.count,a=this._t(t);if(a){const u=a.target;if(Yd(u))if(r===0){const c=new ze(u.path);this.tt(t,c,dn.newNoDocument(c,Ze.min()))}else $e(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=t;let c,d;try{c=fa(r).toUint8Array()}catch(p){if(p instanceof sS)return Ah("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new hv(c,a,u)}catch(p){return Ah(p instanceof hh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let a=0;return r.forEach(u=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,u,null),a++)}),a}It(e){const t=new Map;this.je.forEach((u,c)=>{const d=this._t(c);if(d){if(u.current&&Yd(d.target)){const p=new ze(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,dn.newNoDocument(p,e))}u.Le&&(t.set(c,u.qe()),u.Qe())}});let r=Et();this.Ye.forEach((u,c)=>{let d=!0;c.forEachWhile(p=>{const v=this._t(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(u))}),this.He.forEach((u,c)=>c.setReadTime(e));const a=new rf(e,t,this.Ze,this.He,r);return this.He=Pi(),this.Je=cd(),this.Ye=cd(),this.Ze=new Jt(at),a}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new RT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ut(at),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ut(at),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new RT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function cd(){return new Jt(ze.comparator)}function CT(){return new Jt(ze.comparator)}const DN={asc:"ASCENDING",desc:"DESCENDING"},ON={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PN={and:"AND",or:"OR"};class NN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dy(i,e){return i.useProto3Json||ym(e)?e:{value:e}}function Xd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VN(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function MN(i,e){return Xd(i,e.toTimestamp())}function Sr(i){return $e(!!i,49232),Ze.fromTimestamp(function(t){const r=ha(t);return new Qn(r.seconds,r.nanos)}(i))}function LS(i,e){return my(i,e).canonicalString()}function my(i,e){const t=function(a){return new Qt(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function US(i){const e=Qt.fromString(i);return $e(QS(e),10190,{key:e.toString()}),e}function Wd(i,e){return LS(i.databaseId,e.path)}function yu(i,e){const t=US(e);if(t.get(1)!==i.databaseId.projectId)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ze(jS(t))}function BS(i,e){return LS(i.databaseId,e)}function zS(i){const e=US(i);return e.length===4?Qt.emptyPath():jS(e)}function py(i){return new Qt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function jS(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function xT(i,e,t){return{name:Wd(i,e),fields:t.value.mapValue.fields}}function kN(i,e,t){const r=yu(i,e.name),a=Sr(e.updateTime),u=e.createTime?Sr(e.createTime):Ze.min(),c=new Oi({mapValue:{fields:e.fields}}),d=dn.newFoundDocument(r,a,u,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function LN(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:He(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(v,T){return v.useProto3Json?($e(T===void 0||typeof T=="string",58123),Tn.fromBase64String(T||"")):($e(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Tn.fromUint8Array(T||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(v){const T=v.code===void 0?we.UNKNOWN:VS(v.code);return new Ge(T,v.message||"")}(c);t=new kS(r,a,u,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=yu(i,r.document.name),u=Sr(r.document.updateTime),c=r.document.createTime?Sr(r.document.createTime):Ze.min(),d=new Oi({mapValue:{fields:r.document.fields}}),p=dn.newFoundDocument(a,u,c,d),v=r.targetIds||[],T=r.removedTargetIds||[];t=new xd(v,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=yu(i,r.document),u=r.readTime?Sr(r.readTime):Ze.min(),c=dn.newNoDocument(a,u),d=r.removedTargetIds||[];t=new xd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=yu(i,r.document),u=r.removedTargetIds||[];t=new xd([],u,a,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,c=new IN(a,u),d=r.targetId;t=new MS(d,c)}}return t}function Jd(i,e){let t;if(e instanceof nf)t={update:xT(i,e.key,e.value)};else if(e instanceof ov)t={delete:Wd(i,e.key)};else if(e instanceof Ql)t={update:xT(i,e.key,e.data),updateMask:FN(e.fieldMask)};else{if(!(e instanceof NS))return He(16599,{ft:e.type});t={verify:Wd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const d=c.transform;if(d instanceof Mh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof kl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ll)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kh)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw He(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:MN(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)}(i,e.precondition)),t}function gy(i,e){const t=e.currentDocument?function(u){return u.updateTime!==void 0?ts.updateTime(Sr(u.updateTime)):u.exists!==void 0?ts.exists(u.exists):ts.none()}(e.currentDocument):ts.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let p=null;if("setToServerValue"in d)$e(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new Mh;else if("appendMissingElements"in d){const T=d.appendMissingElements.values||[];p=new kl(T)}else if("removeAllFromArray"in d){const T=d.removeAllFromArray.values||[];p=new Ll(T)}else"increment"in d?p=new kh(c,d.increment):He(16584,{proto:d});const v=En.fromServerFormat(d.fieldPath);return new TN(v,p)}(i,a)):[];if(e.update){e.update.name;const a=yu(i,e.update.name),u=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const v=p.fieldPaths||[];return new ia(v.map(T=>En.fromServerFormat(T)))}(e.updateMask);return new Ql(a,u,c,t,r)}return new nf(a,u,t,r)}if(e.delete){const a=yu(i,e.delete);return new ov(a,t)}if(e.verify){const a=yu(i,e.verify);return new NS(a,t)}return He(1463,{proto:e})}function UN(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map(t=>function(a,u){let c=a.updateTime?Sr(a.updateTime):Sr(u);return c.isEqual(Ze.min())&&(c=Sr(u)),new SN(c,a.transformResults||[])}(t,e))):[]}function qS(i,e){return{documents:[BS(i,e.path)]}}function FS(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BS(i,a);const u=function(v){if(v.length!==0)return GS(Ht.create(v,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const c=function(v){if(v.length!==0)return v.map(T=>function(x){return{field:yl(x.field),direction:zN(x.dir)}}(T))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=dy(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:a}}function KS(i){let e=zS(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){$e(r===1,65062);const T=t.from[0];T.allDescendants?a=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(I){const x=HS(I);return x instanceof Ht&&sv(x)?x.getFilters():[x]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(x=>function(z){return new Qd(vl(z.field),function(oe){switch(oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(x))}(t.orderBy));let d=null;t.limit&&(d=function(I){let x;return x=typeof I=="object"?I.value:I,ym(x)?null:x}(t.limit));let p=null;t.startAt&&(p=function(I){const x=!!I.before,j=I.values||[];return new Vl(j,x)}(t.startAt));let v=null;return t.endAt&&(v=function(I){const x=!I.before,j=I.values||[];return new Vl(j,x)}(t.endAt)),TS(e,a,c,u,d,"F",p,v)}function BN(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HS(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vl(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=vl(t.unaryFilter.field);return At.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(t.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=vl(t.unaryFilter.field);return At.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}}(i):i.fieldFilter!==void 0?function(t){return At.create(vl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Ht.create(t.compositeFilter.filters.map(r=>HS(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He(1026)}}(t.compositeFilter.op))}(i):He(30097,{filter:i})}function zN(i){return DN[i]}function jN(i){return ON[i]}function qN(i){return PN[i]}function yl(i){return{fieldPath:i.canonicalString()}}function vl(i){return En.fromServerFormat(i.fieldPath)}function GS(i){return i instanceof At?function(t){if(t.op==="=="){if(dT(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(fT(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dT(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(fT(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:jN(t.op),value:t.value}}}(i):i instanceof Ht?function(t){const r=t.getFilters().map(a=>GS(a));return r.length===1?r[0]:{compositeFilter:{op:qN(t.op),filters:r}}}(i):He(54877,{filter:i})}function FN(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,r,a,u=Ze.min(),c=Ze.min(),d=Tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.wt=e}}function KN(i,e){let t;if(e.document)t=kN(i.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),a=Au(e.noDocument.readTime);t=dn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return He(56709);{const r=ze.fromSegments(e.unknownDocument.path),a=Au(e.unknownDocument.version);t=dn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const u=new Qn(a[0],a[1]);return Ze.fromTimestamp(u)}(e.readTime)),t}function DT(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(u,c){return{name:Wd(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Xd(u,c.version.toTimestamp()),createTime:Xd(u,c.createTime.toTimestamp())}}(i.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Su(e.version)};else{if(!e.isUnknownDocument())return He(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Su(e.version)}}return r}function Zd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Su(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Au(i){const e=new Qn(i.seconds,i.nanoseconds);return Ze.fromTimestamp(e)}function lu(i,e){const t=(e.baseMutations||[]).map(u=>gy(i.wt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const d=e.mutations[u+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map(u=>gy(i.wt,u)),a=Qn.fromMillis(e.localWriteTimeMs);return new uv(e.batchId,a,t,r)}function fh(i){const e=Au(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Au(i.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=function(u){return u.documents!==void 0}(i.query)?function(u){const c=u.documents.length;return $e(c===1,1966,{count:c}),oi(Sm(zS(u.documents[0])))}(i.query):function(u){return oi(KS(u))}(i.query),new sa(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Tn.fromBase64String(i.resumeToken))}function $S(i,e){const t=Su(e.snapshotVersion),r=Su(e.lastLimboFreeSnapshotVersion);let a;a=Yd(e.target)?qS(i.wt,e.target):FS(i.wt,e.target).gt;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function XS(i){const e=KS({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?fy(e,e.limit,"L"):e}function Vg(i,e){return new cv(e.largestBatchId,gy(i.wt,e.overlayMutation))}function OT(i,e){const t=e.path.lastSegment();return[i,mr(e.path.popLast()),t]}function PT(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Su(r.readTime),documentKey:mr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{getBundleMetadata(e,t){return NT(e).get(t).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:Au(u.createTime),version:u.version}}(r)})}saveBundleMetadata(e,t){return NT(e).put(function(a){return{bundleId:a.id,createTime:Su(Sr(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return VT(e).get(t).next(r=>{if(r)return function(u){return{name:u.name,query:XS(u.bundledQuery),readTime:Au(u.readTime)}}(r)})}saveNamedQuery(e,t){return VT(e).put(function(a){return{name:a.name,readTime:Su(Sr(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function NT(i){return kn(i,vm)}function VT(i){return kn(i,_m)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new Cm(e,r)}getOverlay(e,t){return ih(e).get(OT(this.userId,t)).next(r=>r?Vg(this.serializer,r):null)}getOverlays(e,t){const r=Ss();return ne.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((u,c)=>{const d=new cv(t,c);a.push(this.St(e,d))}),ne.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(mr(c.getCollectionPath())));const u=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(ih(e).X(sy,d))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const a=Ss(),u=mr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ih(e).J(sy,c).next(d=>{for(const p of d){const v=Vg(this.serializer,p);a.set(v.getKey(),v)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const u=Ss();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ih(e).te({index:tS,range:d},(p,v,T)=>{const I=Vg(this.serializer,v);u.size()<a||I.largestBatchId===c?(u.set(I.getKey(),I),c=I.largestBatchId):T.done()}).next(()=>u)}St(e,t){return ih(e).put(function(a,u,c){const[d,p,v]=OT(u,c.mutation.key);return{userId:u,collectionPath:p,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Jd(a.wt,c.mutation)}}(this.serializer,this.userId,t))}}function ih(i){return kn(i,bm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{Dt(e){return kn(e,tv)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Tn.fromUint8Array(r):Tn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rn(e.integerValue));else if("doubleValue"in e){const r=rn(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Rh(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=ha(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(fa(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?dS(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Tm(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):He(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const a of Object.keys(r))this.Nt(a,t),this.Ct(r[a],t)}qt(e,t){var r,a;const u=e.fields||{};this.Mt(t,53);const c=Ph,d=((a=(r=u[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Mt(t,15),t.xt(rn(d)),this.Nt(c,t),this.Ct(u[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const a of r)this.Ct(a,t)}kt(e,t){this.Mt(t,37),ze.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}cu.Wt=new cu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=255;function QN(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function MT(i){const e=64-function(r){let a=0;for(let u=0;u<8;++u){const c=QN(255&r[u]);if(a+=c,c!==8)break}return a}(i);return Math.ceil(e/8)}class YN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const a=t.codePointAt(0);this.zt(240|a>>>18),this.zt(128|63&a>>>12),this.zt(128|63&a>>>6),this.zt(128|63&a)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Yt()}en(e){const t=this.tn(e),r=MT(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}rn(e){const t=this.tn(e),r=MT(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}sn(){this._n(hl),this._n(255)}an(){this.un(hl),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===hl?(this._n(hl),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===hl?(this.un(hl),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class $N{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class XN{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class sh{constructor(){this.ln=new YN,this.hn=new $N(this.ln),this.Pn=new XN(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}In(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hu(this.indexId,this.documentKey,this.arrayValue,r)}}function ro(i,e){let t=i.indexId-e.indexId;return t!==0?t:(t=kT(i.arrayValue,e.arrayValue),t!==0?t:(t=kT(i.directionalValue,e.directionalValue),t!==0?t:ze.comparator(i.documentKey,e.documentKey)))}function kT(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.En=new Ut((t,r)=>En.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if($e(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=ny(e);if(t!==void 0&&!this.mn(t))return!1;const r=au(e);let a=new Set,u=0,c=0;for(;u<r.length&&this.mn(r[u]);++u)a=a.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.En.size>0){const d=this.En.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=r[u];if(!this.fn(d,p)||!this.gn(this.dn[c++],p))return!1}++u}for(;u<r.length;++u){const d=r[u];if(c>=this.dn.length||!this.gn(this.dn[c++],d))return!1}return!0}pn(){if(this.Rn)return null;let e=new Ut(En.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new wd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new wd(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new wd(r.field,r.dir==="asc"?0:1)));return new zd(zd.UNKNOWN_ID,this.collectionId,t,Ih.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(i){var e,t;if($e(i instanceof At||i instanceof Ht,20012),i instanceof At){if(i instanceof ES){const a=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(u=>At.create(i.field,"==",u)))||[];return Ht.create(a,"or")}return i}const r=i.filters.map(a=>WS(a));return Ht.create(r,i.op)}function WN(i){if(i.getFilters().length===0)return[];const e=_y(WS(i));return $e(JS(e),7391),yy(e)||vy(e)?[e]:e.getFilters()}function yy(i){return i instanceof At}function vy(i){return i instanceof Ht&&sv(i)}function JS(i){return yy(i)||vy(i)||function(t){if(t instanceof Ht&&ly(t)){for(const r of t.getFilters())if(!yy(r)&&!vy(r))return!1;return!0}return!1}(i)}function _y(i){if($e(i instanceof At||i instanceof Ht,34018),i instanceof At)return i;if(i.filters.length===1)return _y(i.filters[0]);const e=i.filters.map(r=>_y(r));let t=Ht.create(e,i.op);return t=em(t),JS(t)?t:($e(t instanceof Ht,64498),$e(Ml(t),40251),$e(t.filters.length>1,57927),t.filters.reduce((r,a)=>fv(r,a)))}function fv(i,e){let t;return $e(i instanceof At||i instanceof Ht,38388),$e(e instanceof At||e instanceof Ht,25473),t=i instanceof At?e instanceof At?function(a,u){return Ht.create([a,u],"and")}(i,e):UT(i,e):e instanceof At?UT(e,i):function(a,u){if($e(a.filters.length>0&&u.filters.length>0,48005),Ml(a)&&Ml(u))return vS(a,u.getFilters());const c=ly(a)?a:u,d=ly(a)?u:a,p=c.filters.map(v=>fv(v,d));return Ht.create(p,"or")}(i,e),em(t)}function UT(i,e){if(Ml(e))return vS(e,i.getFilters());{const t=e.filters.map(r=>fv(i,r));return Ht.create(t,"or")}}function em(i){if($e(i instanceof At||i instanceof Ht,11850),i instanceof At)return i;const e=i.getFilters();if(e.length===1)return em(e[0]);if(gS(i))return i;const t=e.map(a=>em(a)),r=[];return t.forEach(a=>{a instanceof At?r.push(a):a instanceof Ht&&(a.op===i.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Ht.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.yn=new dv}addToCollectionParentIndex(e,t){return this.yn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ui.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class dv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ut(Qt.comparator),u=!a.has(r);return this.index[t]=a.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ut(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="IndexedDbIndexManager",hd=new Uint8Array(0);class ZN{constructor(e,t){this.databaseId=t,this.wn=new dv,this.bn=new ga(r=>wu(r),(r,a)=>ef(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const u={collectionId:r,parent:mr(a)};return zT(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[K1(t),""],!1,!0);return zT(e).J(a).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ws(c.parent))}return r})}addFieldIndex(e,t){const r=ah(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete a.indexId;const u=r.add(a);if(t.indexState){const c=dl(e);return u.next(d=>{c.put(PT(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ah(e),a=dl(e),u=fl(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ah(e),r=fl(e),a=dl(e);return t.X().next(()=>r.X()).next(()=>a.X())}createTargetIndexes(e,t){return ne.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const u=new LT(r).pn();if(u!=null)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=fl(e);let a=!0;const u=new Map;return ne.forEach(this.Sn(t),c=>this.Dn(e,c).next(d=>{a&&(a=!!d),u.set(c,d)})).next(()=>{if(a){let c=Et();const d=[];return ne.forEach(u,(p,v)=>{Ae(BT,`Using index ${function(ae){return`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`}(p)} to execute ${wu(t)}`);const T=function(ae,Re){const Ce=ny(Re);if(Ce===void 0)return null;for(const Ve of $d(ae,Ce.fieldPath))switch(Ve.op){case"array-contains-any":return Ve.value.arrayValue.values||[];case"array-contains":return[Ve.value]}return null}(v,p),I=function(ae,Re){const Ce=new Map;for(const Ve of au(Re))for(const L of $d(ae,Ve.fieldPath))switch(L.op){case"==":case"in":Ce.set(Ve.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return Ce.set(Ve.fieldPath.canonicalString(),L.value),Array.from(Ce.values())}return null}(v,p),x=function(ae,Re){const Ce=[];let Ve=!0;for(const L of au(Re)){const P=L.kind===0?vT(ae,L.fieldPath,ae.startAt):_T(ae,L.fieldPath,ae.startAt);Ce.push(P.value),Ve&&(Ve=P.inclusive)}return new Vl(Ce,Ve)}(v,p),j=function(ae,Re){const Ce=[];let Ve=!0;for(const L of au(Re)){const P=L.kind===0?_T(ae,L.fieldPath,ae.endAt):vT(ae,L.fieldPath,ae.endAt);Ce.push(P.value),Ve&&(Ve=P.inclusive)}return new Vl(Ce,Ve)}(v,p),z=this.vn(p,v,x),ce=this.vn(p,v,j),oe=this.Cn(p,v,I),ye=this.Fn(p.indexId,T,z,x.inclusive,ce,j.inclusive,oe);return ne.forEach(ye,me=>r.Z(me,t.limit).next(ae=>{ae.forEach(Re=>{const Ce=ze.fromSegments(Re.documentKey);c.has(Ce)||(c=c.add(Ce),d.push(Ce))})}))}).next(()=>d)}return ne.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=WN(Ht.create(e.filters,"and")).map(r=>hy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,a,u,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,u.length),v=p/(t!=null?t.length:1),T=[];for(let I=0;I<p;++I){const x=t?this.Mn(t[I/v]):hd,j=this.xn(e,x,r[I%v],a),z=this.On(e,x,u[I%v],c),ce=d.map(oe=>this.xn(e,x,oe,!0));T.push(...this.createRange(j,z,ce))}return T}xn(e,t,r,a){const u=new hu(e,ze.empty(),t,r);return a?u:u.In()}On(e,t,r,a){const u=new hu(e,ze.empty(),t,r);return a?u.In():u}Dn(e,t){const r=new LT(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(u=>{let c=null;for(const d of u)r.Vn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.Sn(t);return ne.forEach(a,u=>this.Dn(e,u).next(c=>{c?r!==0&&c.fields.length<function(p){let v=new Ut(En.comparator),T=!1;for(const I of p.filters)for(const x of I.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?T=!0:v=v.add(x.field));for(const I of p.orderBy)I.field.isKeyField()||(v=v.add(I.field));return v.size+(T?1:0)}(u)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}Nn(e,t){const r=new sh;for(const a of au(e)){const u=t.data.field(a.fieldPath);if(u==null)return null;const c=r.Tn(a.kind);cu.Wt.vt(u,c)}return r.cn()}Mn(e){const t=new sh;return cu.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new sh;return cu.Wt.vt(iv(this.databaseId,t),r.Tn(function(u){const c=au(u);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let a=[];a.push(new sh);let u=0;for(const c of au(e)){const d=r[u++];for(const p of a)if(this.Ln(t,c.fieldPath)&&Vh(d))a=this.kn(a,c,d);else{const v=p.Tn(c.kind);cu.Wt.vt(d,v)}}return this.qn(a)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const a=[...e],u=[];for(const c of r.arrayValue.values||[])for(const d of a){const p=new sh;p.seed(d.cn()),cu.Wt.vt(c,p.Tn(t.kind)),u.push(p)}return u}Ln(e,t){return!!e.filters.find(r=>r instanceof At&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=ah(e),a=dl(e);return(t?r.J(iy,IDBKeyRange.bound(t,t)):r.J()).next(u=>{const c=[];return ne.forEach(u,d=>a.get([d.indexId,this.uid]).next(p=>{c.push(function(T,I){const x=I?new Ih(I.sequenceNumber,new ui(Au(I.readTime),new ze(ws(I.documentKey)),I.largestBatchId)):Ih.empty(),j=T.fields.map(([z,ce])=>new wd(En.fromServerFormat(z),ce));return new zd(T.indexId,T.collectionGroup,j,x)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const u=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return u!==0?u:at(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=ah(e),u=dl(e);return this.Qn(e).next(c=>a.J(iy,IDBKeyRange.bound(t,t)).next(d=>ne.forEach(d,p=>u.put(PT(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(a,u)=>{const c=r.get(a.collectionGroup);return(c?ne.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),ne.forEach(d,p=>this.$n(e,a,p).next(v=>{const T=this.Un(u,p);return v.isEqual(T)?ne.resolve():this.Kn(e,u,p,v,T)}))))})}Wn(e,t,r,a){return fl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,a){return fl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const a=fl(e);let u=new Ut(ro);return a.te({index:eS,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(c,d)=>{u=u.add(new hu(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>u)}Un(e,t){let r=new Ut(ro);const a=this.Nn(t,e);if(a==null)return r;const u=ny(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Vh(c))for(const d of c.arrayValue.values||[])r=r.add(new hu(t.indexId,e.key,this.Mn(d),a))}else r=r.add(new hu(t.indexId,e.key,hd,a));return r}Kn(e,t,r,a,u){Ae(BT,"Updating index entries for document '%s'",t.key);const c=[];return function(p,v,T,I,x){const j=p.getIterator(),z=v.getIterator();let ce=cl(j),oe=cl(z);for(;ce||oe;){let ye=!1,me=!1;if(ce&&oe){const ae=T(ce,oe);ae<0?me=!0:ae>0&&(ye=!0)}else ce!=null?me=!0:ye=!0;ye?(I(oe),oe=cl(z)):me?(x(ce),ce=cl(j)):(ce=cl(j),oe=cl(z))}}(a,u,ro,d=>{c.push(this.Wn(e,t,r,d))},d=>{c.push(this.Gn(e,t,r,d))}),ne.waitFor(c)}Qn(e){let t=1;return dl(e).te({index:Z1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,u)=>{u.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>ro(c,d)).filter((c,d,p)=>!d||ro(c,p[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=ro(c,e),p=ro(c,t);if(d===0)a[0]=e.In();else if(d>0&&p<0)a.push(c),a.push(c.In());else if(p>0)break}a.push(t);const u=[];for(let c=0;c<a.length;c+=2){if(this.zn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,hd,[]],p=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,hd,[]];u.push(IDBKeyRange.bound(d,p))}return u}zn(e,t){return ro(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jT)}getMinOffset(e,t){return ne.mapArray(this.Sn(t),r=>this.Dn(e,r).next(a=>a||He(44426))).next(jT)}}function zT(i){return kn(i,Dh)}function fl(i){return kn(i,Hd)}function ah(i){return kn(i,ev)}function dl(i){return kn(i,Kd)}function jT(i){$e(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Wy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ui(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZS=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(i,e,t){const r=i.store(Ji),a=i.store(xl),u=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:c},(T,I,x)=>(d++,x.delete()));u.push(p.next(()=>{$e(d===1,47070,{batchId:t.batchId})}));const v=[];for(const T of t.mutations){const I=X1(e,T.key.path,t.batchId);u.push(a.delete(I)),v.push(T.key)}return ne.waitFor(u).next(()=>v)}function tm(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw He(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(ZS,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class xm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.jn={}}static bt(e,t,r,a){$e(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new xm(u,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return io(e).te({index:du,range:r},(a,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const u=_l(e),c=io(e);return c.add({}).next(d=>{$e(typeof d=="number",49019);const p=new uv(d,t,r,a),v=function(j,z,ce){const oe=ce.baseMutations.map(me=>Jd(j.wt,me)),ye=ce.mutations.map(me=>Jd(j.wt,me));return{userId:z,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:oe,mutations:ye}}(this.serializer,this.userId,p),T=[];let I=new Ut((x,j)=>at(x.canonicalString(),j.canonicalString()));for(const x of a){const j=X1(this.userId,x.key.path,d);I=I.add(x.key.path.popLast()),T.push(c.put(v)),T.push(u.put(j,IP))}return I.forEach(x=>{T.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.jn[d]=p.keys()}),ne.waitFor(T).next(()=>p)})}lookupMutationBatch(e,t){return io(e).get(t).next(r=>r?($e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),lu(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?ne.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.jn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return io(e).te({index:du,range:a},(c,d,p)=>{d.userId===this.userId&&($e(d.batchId>=r,47524,{Jn:r}),u=lu(this.serializer,d)),p.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=pu;return io(e).te({index:du,range:t,reverse:!0},(a,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,pu],[this.userId,Number.POSITIVE_INFINITY]);return io(e).J(du,t).next(r=>r.map(a=>lu(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sd(this.userId,t.path),a=IDBKeyRange.lowerBound(r),u=[];return _l(e).te({range:a},(c,d,p)=>{const[v,T,I]=c,x=ws(T);if(v===this.userId&&t.path.isEqual(x))return io(e).get(I).next(j=>{if(!j)throw He(61480,{Yn:c,batchId:I});$e(j.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:j.userId,batchId:I}),u.push(lu(this.serializer,j))});p.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(at);const a=[];return t.forEach(u=>{const c=Sd(this.userId,u.path),d=IDBKeyRange.lowerBound(c),p=_l(e).te({range:d},(v,T,I)=>{const[x,j,z]=v,ce=ws(j);x===this.userId&&u.path.isEqual(ce)?r=r.add(z):I.done()});a.push(p)}),ne.waitFor(a).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,u=Sd(this.userId,r),c=IDBKeyRange.lowerBound(u);let d=new Ut(at);return _l(e).te({range:c},(p,v,T)=>{const[I,x,j]=p,z=ws(x);I===this.userId&&r.isPrefixOf(z)?z.length===a&&(d=d.add(j)):T.done()}).next(()=>this.Zn(e,d))}Zn(e,t){const r=[],a=[];return t.forEach(u=>{a.push(io(e).get(u).next(c=>{if(c===null)throw He(35274,{batchId:u});$e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(lu(this.serializer,c))}))}),ne.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return eA(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),ne.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return _l(e).te({range:r},(u,c,d)=>{if(u[0]===this.userId){const p=ws(u[1]);a.push(p)}else d.done()}).next(()=>{$e(a.length===0,56720,{er:a.map(u=>u.canonicalString())})})})}containsKey(e,t){return tA(e,this.userId,t)}tr(e){return nA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:pu,lastStreamToken:""})}}function tA(i,e,t){const r=Sd(e,t.path),a=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return _l(i).te({range:u,ee:!0},(d,p,v)=>{const[T,I,x]=d;T===e&&I===a&&(c=!0),v.done()}).next(()=>c)}function io(i){return kn(i,Ji)}function _l(i){return kn(i,xl)}function nA(i){return kn(i,Ch)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Iu(0)}static ir(){return new Iu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new Iu(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>Ze.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this._r(e,a)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ml(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>($e(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let a=0;const u=[];return ml(e).te((c,d)=>{const p=fh(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,u.push(this.removeTargetData(e,p)))}).next(()=>ne.waitFor(u)).next(()=>a)}forEachTarget(e,t){return ml(e).te((r,a)=>{const u=fh(a);t(u)})}sr(e){return FT(e).get(Fd).next(t=>($e(t!==null,2888),t))}_r(e,t){return FT(e).put(Fd,t)}ar(e,t){return ml(e).put($S(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wu(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ml(e).te({range:a,index:J1},(c,d,p)=>{const v=fh(d);ef(t,v.target)&&(u=v,p.done())}).next(()=>u)}addMatchingKeys(e,t,r){const a=[],u=lo(e);return t.forEach(c=>{const d=mr(c.path);a.push(u.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),ne.waitFor(a)}removeMatchingKeys(e,t,r){const a=lo(e);return ne.forEach(t,u=>{const c=mr(u.path);return ne.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=lo(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=lo(e);let u=Et();return a.te({range:r,ee:!0},(c,d,p)=>{const v=ws(c[1]),T=new ze(v);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=mr(t.path),a=IDBKeyRange.bound([r],[K1(r)],!1,!0);let u=0;return lo(e).te({index:Zy,ee:!0,range:a},([c,d],p,v)=>{c!==0&&(u++,v.done())}).next(()=>u>0)}Rt(e,t){return ml(e).get(t).next(r=>r?fh(r):null)}}function ml(i){return kn(i,Dl)}function FT(i){return kn(i,gu)}function lo(i){return kn(i,Ol)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="LruGarbageCollector",rA=1048576;function HT([i,e],[t,r]){const a=at(i,t);return a===0?at(e,r):a}class tV{constructor(e){this.cr=e,this.buffer=new Ut(HT),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();HT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ae(KT,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wo(t)?Ae(KT,"Ignoring IndexedDB error during garbage collection: ",t):await To(t)}await this.Ir(3e5)})}}class nV{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Br.le);const r=new tV(t);return this.Er.forEachTarget(e,a=>r.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>r.Pr(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(qT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qT):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,a,u,c,d,p,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,c=Date.now(),this.nthSequenceNumber(e,a))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,t))).next(I=>(u=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(v=Date.now(),pl()<=St.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${u} targets in `+(p-d)+`ms
	Removed ${I} documents in `+(v-p)+`ms
Total Duration: ${v-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:I})))}}function sA(i,e){return new nV(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t){this.db=e,this.garbageCollector=sA(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,a)=>t(a))}addReference(e,t,r){return fd(e,r)}removeReference(e,t,r){return fd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fd(e,t)}gr(e,t){return function(a,u){let c=!1;return nA(a).ne(d=>tA(a,d,u).next(p=>(p&&(c=!0),ne.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let u=0;return this.mr(e,(c,d)=>{if(d<=t){const p=this.gr(e,c).next(v=>{if(!v)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ze.min()),lo(e).delete(function(I){return[0,mr(I.path)]}(c))))});a.push(p)}}).next(()=>ne.waitFor(a)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fd(e,t)}mr(e,t){const r=lo(e);let a,u=Br.le;return r.te({index:Zy},([c,d],{path:p,sequenceNumber:v})=>{c===0?(u!==Br.le&&t(new ze(ws(a)),u),u=v,a=p):u=Br.le}).next(()=>{u!==Br.le&&t(new ze(ws(a)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fd(i,e){return lo(i).put(function(r,a){return{targetId:0,path:mr(r.path),sequenceNumber:a}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.changes=new ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return iu(e).put(r)}removeEntry(e,t,r){return iu(e).delete(function(u,c){const d=u.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Zd(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return iu(e).te({index:Ad,range:IDBKeyRange.only(oh(t))},(a,u)=>{r=this.yr(t,u)}).next(()=>r)}wr(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return iu(e).te({index:Ad,range:IDBKeyRange.only(oh(t))},(a,u)=>{r={document:this.yr(t,u),size:tm(u)}}).next(()=>r)}getEntries(e,t){let r=Pi();return this.br(e,t,(a,u)=>{const c=this.yr(a,u);r=r.insert(a,c)}).next(()=>r)}Sr(e,t){let r=Pi(),a=new Jt(ze.comparator);return this.br(e,t,(u,c)=>{const d=this.yr(u,c);r=r.insert(u,d),a=a.insert(u,tm(c))}).next(()=>({documents:r,Dr:a}))}br(e,t,r){if(t.isEmpty())return ne.resolve();let a=new Ut(YT);t.forEach(p=>a=a.add(p));const u=IDBKeyRange.bound(oh(a.first()),oh(a.last())),c=a.getIterator();let d=c.getNext();return iu(e).te({index:Ad,range:u},(p,v,T)=>{const I=ze.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&YT(d,I)<0;)r(d,null),d=c.getNext();d&&d.isEqual(I)&&(r(d,v),d=c.hasNext()?c.getNext():null),d?T.H(oh(d)):T.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,u){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Zd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return iu(e).J(IDBKeyRange.bound(d,p,!0)).next(v=>{u==null||u.incrementDocumentReadCount(v.length);let T=Pi();for(const I of v){const x=this.yr(ze.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);x.isFoundDocument()&&(tf(t,x)||a.has(x.key))&&(T=T.insert(x.key,x))}return T})}getAllFromCollectionGroup(e,t,r,a){let u=Pi();const c=QT(t,r),d=QT(t,ui.max());return iu(e).te({index:W1,range:IDBKeyRange.bound(c,d,!0)},(p,v,T)=>{const I=this.yr(ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);u=u.insert(I.key,I),u.size===a&&T.done()}).next(()=>u)}newChangeBuffer(e){return new sV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return GT(e).get(ry).next(t=>($e(!!t,20021),t))}pr(e,t){return GT(e).put(ry,t)}yr(e,t){if(t){const r=KN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ze.min())))return r}return dn.newInvalidDocument(e)}}function oA(i){return new iV(i)}class sV extends aA{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new ga(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Ut((u,c)=>at(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const d=this.Cr.get(u);if(t.push(this.vr.removeEntry(e,u,d.readTime)),c.isValidDocument()){const p=DT(this.vr.serializer,c);a=a.add(u.path.popLast());const v=tm(p);r+=v-d.size,t.push(this.vr.addEntry(e,u,p))}else if(r-=d.size,this.trackRemovals){const p=DT(this.vr.serializer,c.convertToNoDocument(Ze.min()));t.push(this.vr.addEntry(e,u,p))}}),a.forEach(u=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.vr.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:a})=>(a.forEach((u,c)=>{this.Cr.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function GT(i){return kn(i,xh)}function iu(i){return kn(i,qd)}function oh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QT(i,e){const t=e.documentKey.path.toArray();return[i,Zd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function YT(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(a=at(t[u],r[u]),a)return a;return a=at(t.length,r.length),a||(a=at(t[t.length-2],r[r.length-2]),a||at(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&bh(r.mutation,a,ia.empty(),Qn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Et()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Et()){const a=Ss();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(u=>{let c=ch();return u.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ss();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Et()))}populateOverlays(e,t,r){const a=[];return r.forEach(u=>{t.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let u=Pi();const c=_h(),d=function(){return _h()}();return t.forEach((p,v)=>{const T=r.get(v.key);a.has(v.key)&&(T===void 0||T.mutation instanceof Ql)?u=u.insert(v.key,v):T!==void 0?(c.set(v.key,T.mutation.getFieldMask()),bh(T.mutation,v,T.mutation.getFieldMask(),Qn.now())):c.set(v.key,ia.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((v,T)=>c.set(v,T)),t.forEach((v,T)=>{var I;return d.set(v,new aV(T,(I=c.get(v))!==null&&I!==void 0?I:null))}),d))}recalculateAndSaveOverlays(e,t){const r=_h();let a=new Jt((c,d)=>c-d),u=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const v=t.get(p);if(v===null)return;let T=r.get(p)||ia.empty();T=d.applyToLocalView(v,T),r.set(p,T);const I=(a.get(d.batchId)||Et()).add(p);a=a.insert(d.batchId,I)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,T=p.value,I=RS();T.forEach(x=>{if(!u.has(x)){const j=OS(t.get(x),r.get(x));j!==null&&I.set(x,j),u=u.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,I))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ze.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-u.size):ne.resolve(Ss());let d=Cl,p=u;return c.next(v=>ne.forEach(v,(T,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),u.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next(x=>{p=p.insert(T,x)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,p,v,Et())).next(T=>({batchId:d,changes:dN(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let a=ch();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const u=t.collectionGroup;let c=ch();return this.indexManager.getCollectionParents(e,u).next(d=>ne.forEach(d,p=>{const v=function(I,x){return new wm(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,r,a).next(T=>{T.forEach((I,x)=>{c=c.insert(I,x)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,a))).next(c=>{u.forEach((p,v)=>{const T=v.getKey();c.get(T)===null&&(c=c.insert(T,dn.newInvalidDocument(T)))});let d=ch();return c.forEach((p,v)=>{const T=u.get(p);T!==void 0&&bh(T.mutation,v,ia.empty(),Qn.now()),tf(t,v)&&(d=d.insert(p,v))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Sr(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:XS(a.bundledQuery),readTime:Sr(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.overlays=new Jt(ze.comparator),this.Or=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ss();return ne.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,u)=>{this.St(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Or.get(r);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Or.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const a=Ss(),u=t.length+1,c=new ze(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&p.largestBatchId>r&&a.set(p.getKey(),p)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let u=new Jt((v,T)=>v-T);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=u.get(v.largestBatchId);T===null&&(T=Ss(),u=u.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const d=Ss(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,T)=>d.set(v,T)),!(d.size()>=a)););return ne.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(r.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new cv(t,r));let u=this.Or.get(t);u===void 0&&(u=Et(),this.Or.set(t,u)),this.Or.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.Nr=new Ut(Gn.Br),this.Lr=new Ut(Gn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Gn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Gn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new ze(new Qt([])),r=new Gn(t,e),a=new Gn(t,e+1),u=[];return this.Lr.forEachInRange([r,a],c=>{this.Qr(c),u.push(c.key)}),u}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new ze(new Qt([])),r=new Gn(t,e),a=new Gn(t,e+1);let u=Et();return this.Lr.forEachInRange([r,a],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Gn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return ze.comparator(e.key,t.key)||at(e.Gr,t.Gr)}static kr(e,t){return at(e.Gr,t.Gr)||ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ut(Gn.Br)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const u=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new uv(u,t,r,a);this.mutationQueue.push(c);for(const d of a)this.zr=this.zr.add(new Gn(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Hr(r),u=a<0?0:a;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?pu:this.Jn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gn(t,0),a=new Gn(t,Number.POSITIVE_INFINITY),u=[];return this.zr.forEachInRange([r,a],c=>{const d=this.jr(c.Gr);u.push(d)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(at);return t.forEach(a=>{const u=new Gn(a,0),c=new Gn(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([u,c],d=>{r=r.add(d.Gr)})}),ne.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const c=new Gn(new ze(u),0);let d=new Ut(at);return this.zr.forEachWhile(p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===a&&(d=d.add(p.Gr)),!0)},c),ne.resolve(this.Jr(d))}Jr(e){const t=[];return e.forEach(r=>{const a=this.jr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){$e(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return ne.forEach(t.mutations,a=>{const u=new Gn(a.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Gn(t,0),a=this.zr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.Zr=e,this.docs=function(){return new Jt(ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),u=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Pi();return t.forEach(a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():dn.newInvalidDocument(a))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let u=Pi();const c=t.path,d=new ze(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:T}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Wy(G1(T),r)<=0||(a.has(T.key)||tf(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,r,a){He(9500)}Xr(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fV(this)}getSize(e){return ne.resolve(this.size)}}class fV extends aA{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.persistence=e,this.ei=new ga(t=>wu(t),ef),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.ti=0,this.ni=new mv,this.targetCount=0,this.ri=Iu.rr()}forEachTarget(e,t){return this.ei.forEach((r,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),ne.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Iu(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.ar(t),ne.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let a=0;const u=[];return this.ei.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ei.delete(c),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ne.waitFor(u).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach(c=>{u.push(a.markPotentiallyOrphaned(e,c))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){this.ii={},this.overlays={},this.si=new Br(0),this.oi=!1,this.oi=!0,this._i=new lV,this.referenceDelegate=e(this),this.ai=new dV(this),this.indexManager=new JN,this.remoteDocumentCache=function(a){return new hV(a)}(r=>this.referenceDelegate.ui(r)),this.serializer=new YS(t),this.ci=new oV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new cV(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const a=new mV(this.si.next());return this.referenceDelegate.li(),r(a).next(u=>this.referenceDelegate.hi(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Pi(e,t){return ne.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class mV extends Y1{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Ti=new mv,this.Ii=null}static Ei(e){return new Dm(e)}get di(){if(this.Ii)return this.Ii;throw He(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(u=>this.di.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,r=>{const a=ze.fromPath(r);return this.Ai(e,a).next(u=>{u||t.removeEntry(a,Ze.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ne.or([()=>ne.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class nm{constructor(e,t){this.persistence=e,this.Ri=new ga(r=>mr(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=sA(this,t)}static Ei(e,t){return new nm(e,t)}li(){}hi(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return ne.forEach(this.Ri,(r,a)=>this.gr(e,r,a).next(u=>u?ne.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(d=>{d||(r++,u.removeEntry(c,Ze.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rd(e.data.value)),t}gr(e,t,r){return ne.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return ne.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.serializer=e}q(e,t,r,a){const u=new gm("createOrUpgrade",t);r<1&&a>=1&&(function(p){p.createObjectStore(Jh)}(e),function(p){p.createObjectStore(Ch,{keyPath:AP}),p.createObjectStore(Ji,{keyPath:aT,autoIncrement:!0}).createIndex(du,oT,{unique:!0}),p.createObjectStore(xl)}(e),$T(e),function(p){p.createObjectStore(ou)}(e));let c=ne.resolve();return r<3&&a>=3&&(r!==0&&(function(p){p.deleteObjectStore(Ol),p.deleteObjectStore(Dl),p.deleteObjectStore(gu)}(e),$T(e)),c=c.next(()=>function(p){const v=p.store(gu),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return v.put(Fd,T)}(u))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(p,v){return v.store(Ji).J().next(I=>{p.deleteObjectStore(Ji),p.createObjectStore(Ji,{keyPath:aT,autoIncrement:!0}).createIndex(du,oT,{unique:!0});const x=v.store(Ji),j=I.map(z=>x.put(z));return ne.waitFor(j)})}(e,u))),c=c.next(()=>{(function(p){p.createObjectStore(Pl,{keyPath:VP})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.Vi(u))),r<6&&a>=6&&(c=c.next(()=>(function(p){p.createObjectStore(xh)}(e),this.mi(u)))),r<7&&a>=7&&(c=c.next(()=>this.fi(u))),r<8&&a>=8&&(c=c.next(()=>this.gi(e,u))),r<9&&a>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.pi(u))),r<11&&a>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(vm,{keyPath:MP})})(e),function(p){p.createObjectStore(_m,{keyPath:kP})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(p){const v=p.createObjectStore(bm,{keyPath:FP});v.createIndex(sy,KP,{unique:!1}),v.createIndex(tS,HP,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(p){const v=p.createObjectStore(qd,{keyPath:RP});v.createIndex(Ad,CP),v.createIndex(W1,xP)}(e)).next(()=>this.yi(e,u)).next(()=>e.deleteObjectStore(ou))),r<14&&a>=14&&(c=c.next(()=>this.wi(e,u))),r<15&&a>=15&&(c=c.next(()=>function(p){p.createObjectStore(ev,{keyPath:LP,autoIncrement:!0}).createIndex(iy,UP,{unique:!1}),p.createObjectStore(Kd,{keyPath:BP}).createIndex(Z1,zP,{unique:!1}),p.createObjectStore(Hd,{keyPath:jP}).createIndex(eS,qP,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Kd).clear()}).next(()=>{t.objectStore(Hd).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(tv,{keyPath:GP})})(e)})),c}mi(e){let t=0;return e.store(ou).te((r,a)=>{t+=tm(a)}).next(()=>{const r={byteSize:t};return e.store(xh).put(ry,r)})}Vi(e){const t=e.store(Ch),r=e.store(Ji);return t.J().next(a=>ne.forEach(a,u=>{const c=IDBKeyRange.bound([u.userId,pu],[u.userId,u.lastAcknowledgedBatchId]);return r.J(du,c).next(d=>ne.forEach(d,p=>{$e(p.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const v=lu(this.serializer,p);return eA(e,u.userId,v).next(()=>{})}))}))}fi(e){const t=e.store(Ol),r=e.store(ou);return e.store(gu).get(Fd).next(a=>{const u=[];return r.te((c,d)=>{const p=new Qt(c),v=function(I){return[0,mr(I)]}(p);u.push(t.get(v).next(T=>T?ne.resolve():(I=>t.put({targetId:0,path:mr(I),sequenceNumber:a.highestListenSequenceNumber}))(p)))}).next(()=>ne.waitFor(u))})}gi(e,t){e.createObjectStore(Dh,{keyPath:NP});const r=t.store(Dh),a=new dv,u=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:mr(p)})}};return t.store(ou).te({ee:!0},(c,d)=>{const p=new Qt(c);return u(p.popLast())}).next(()=>t.store(xl).te({ee:!0},([c,d,p],v)=>{const T=ws(d);return u(T.popLast())}))}pi(e){const t=e.store(Dl);return t.te((r,a)=>{const u=fh(a),c=$S(this.serializer,u);return t.put(c)})}yi(e,t){const r=t.store(ou),a=[];return r.te((u,c)=>{const d=t.store(qd),p=function(I){return I.document?new ze(Qt.fromString(I.document.name).popFirst(5)):I.noDocument?ze.fromSegments(I.noDocument.path):I.unknownDocument?ze.fromSegments(I.unknownDocument.path):He(36783)}(c).path.toArray(),v={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(v))}).next(()=>ne.waitFor(a))}wi(e,t){const r=t.store(Ji),a=oA(this.serializer),u=new pv(Dm.Ei,this.serializer.wt);return r.J().next(c=>{const d=new Map;return c.forEach(p=>{var v;let T=(v=d.get(p.userId))!==null&&v!==void 0?v:Et();lu(this.serializer,p).keys().forEach(I=>T=T.add(I)),d.set(p.userId,T)}),ne.forEach(d,(p,v)=>{const T=new fr(v),I=Cm.bt(this.serializer,T),x=u.getIndexManager(T),j=xm.bt(T,this.serializer,x,u.referenceDelegate);return new uA(a,j,I,x).recalculateAndSaveOverlaysForDocumentKeys(new ay(t,Br.le),p).next()})})}}function $T(i){i.createObjectStore(Ol,{keyPath:OP}).createIndex(Zy,PP,{unique:!0}),i.createObjectStore(Dl,{keyPath:"targetId"}).createIndex(J1,DP,{unique:!0}),i.createObjectStore(gu)}const so="IndexedDbPersistence",Mg=18e5,kg=5e3,Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gV="main";class gv{constructor(e,t,r,a,u,c,d,p,v,T,I=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=u,this.window=c,this.document=d,this.Si=v,this.Di=T,this.Ci=I,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=x=>Promise.resolve(),!gv.C())throw new Ge(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rV(this,a),this.Bi=t+gV,this.serializer=new YS(p),this.Li=new yo(this.Bi,this.Ci,new pV(this.serializer)),this._i=new GN,this.ai=new eV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oA(this.serializer),this.ci=new HN,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,T===!1&&bn(so,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(we.FAILED_PRECONDITION,Lg);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new Br(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(async()=>{this.started&&await this.qi()}))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(wo(e))return Ae(so,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae(so,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return uh(e).get(ll).next(t=>ne.resolve(this.Hi(t)))}Ji(e){return dd(e).delete(this.clientId)}async Yi(){if(this.isPrimary&&!this.Zi(this.Oi,Mg)){this.Oi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=kn(t,Pl);return r.J().next(a=>{const u=this.Xi(a,Mg),c=a.filter(d=>u.indexOf(d)===-1);return ne.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.ki)for(const t of e)this.ki.removeItem(this.es(t.clientId))}}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?ne.resolve(!0):uh(e).get(ll).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,kg)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new Ge(we.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||dd(e).J().next(r=>this.Xi(r,kg).find(a=>{if(this.clientId!==a.clientId){const u=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(u||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Ae(so,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),await this.Li.runTransaction("shutdown","readwrite",[Jh,Pl],e=>{const t=new ay(e,Br.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>dd(e).J().next(t=>this.Xi(t,Mg).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return xm.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZN(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Cm.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae(so,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",u=function(p){return p===17?$P:p===16?YP:p===15?nv:p===14?iS:p===13?rS:p===12?QP:p===11?nS:void He(60245)}(this.Ci);let c;return this.Li.runTransaction(e,a,u,d=>(c=new ay(d,this.si?this.si.next():Br.le),t==="readwrite-primary"?this.Wi(c).next(p=>!!p||this.Gi(c)).next(p=>{if(!p)throw bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new Ge(we.FAILED_PRECONDITION,Q1);return r(c)}).next(p=>this.ji(c).next(()=>p)):this.cs(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}cs(e){return uh(e).get(ll).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,kg)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(we.FAILED_PRECONDITION,Lg)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uh(e).put(ll,t)}static C(){return yo.C()}zi(e){const t=uh(e);return t.get(ll).next(r=>this.Hi(r)?(Ae(so,"Releasing primary lease."),t.delete(ll)):ne.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;Ww()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return Ae(so,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bn(so,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){bn("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uh(i){return kn(i,Jh)}function dd(i){return kn(i,Pl)}function lA(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=a}static Ps(e,t){let r=Et(),a=Et();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new yv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Ww()?8:$1(Mn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,a){const u={result:null};return this.Rs(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.Vs(e,t,a,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new yV;return this.fs(e,t,c).next(d=>{if(u.result=d,this.Is)return this.gs(e,t,c,d.size)})}).next(()=>u.result)}gs(e,t,r,a){return r.documentReadCount<this.Es?(pl()<=St.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ne.resolve()):(pl()<=St.DEBUG&&Ae("QueryEngine","Query:",gl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(pl()<=St.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(t))):ne.resolve())}Rs(e,t){if(bT(t))return ne.resolve(null);let r=oi(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=fy(t,null,"F"),r=oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Et(...u);return this.As.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const v=this.ps(t,d);return this.ys(t,v,c,p.readTime)?this.Rs(e,fy(t,null,"F")):this.ws(e,v,t,p)}))})))}Vs(e,t,r,a){return bT(t)||a.isEqual(Ze.min())?ne.resolve(null):this.As.getDocuments(e,r).next(u=>{const c=this.ps(t,u);return this.ys(t,c,r,a)?ne.resolve(null):(pl()<=St.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gl(t)),this.ws(e,c,t,H1(a,Cl)).next(d=>d))})}ps(e,t){let r=new Ut(AS(e));return t.forEach((a,u)=>{tf(e,u)&&(r=r.add(u))}),r}ys(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}fs(e,t,r){return pl()<=St.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",gl(t)),this.As.getDocumentsMatchingQuery(e,t,ui.min(),r)}ws(e,t,r,a){return this.As.getDocumentsMatchingQuery(e,r,a).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="LocalStore",vV=3e8;class _V{constructor(e,t,r,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new Jt(at),this.Ds=new ga(u=>wu(u),ef),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uA(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function hA(i,e,t,r){return new _V(i,e,t,r)}async function fA(i,e){const t=Ye(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(u=>(a=u,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],d=[];let p=Et();for(const v of a){c.push(v.batchId);for(const T of v.mutations)p=p.add(T.key)}for(const v of u){d.push(v.batchId);for(const T of v.mutations)p=p.add(T.key)}return t.localDocuments.getDocuments(r,p).next(v=>({Ms:v,removedBatchIds:c,addedBatchIds:d}))})})}function bV(i,e){const t=Ye(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),u=t.Cs.newChangeBuffer({trackRemovals:!0});return function(d,p,v,T){const I=v.batch,x=I.keys();let j=ne.resolve();return x.forEach(z=>{j=j.next(()=>T.getEntry(p,z)).next(ce=>{const oe=v.docVersions.get(z);$e(oe!==null,48541),ce.version.compareTo(oe)<0&&(I.applyToRemoteDocument(ce,v),ce.isValidDocument()&&(ce.setReadTime(v.commitVersion),T.addEntry(ce)))})}),j.next(()=>d.mutationQueue.removeMutationBatch(p,I))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Et();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function dA(i){const e=Ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function EV(i,e){const t=Ye(i),r=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const d=[];e.targetChanges.forEach((T,I)=>{const x=a.get(I);if(!x)return;d.push(t.ai.removeMatchingKeys(u,T.removedDocuments,I).next(()=>t.ai.addMatchingKeys(u,T.addedDocuments,I)));let j=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(Tn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):T.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(T.resumeToken,r)),a=a.insert(I,j),function(ce,oe,ye){return ce.resumeToken.approximateByteSize()===0||oe.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=vV?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0}(x,j,T)&&d.push(t.ai.updateTargetData(u,j))});let p=Pi(),v=Et();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),d.push(TV(u,c,e.documentUpdates).next(T=>{p=T.xs,v=T.Os})),!r.isEqual(Ze.min())){const T=t.ai.getLastRemoteSnapshotVersion(u).next(I=>t.ai.setTargetsMetadata(u,u.currentSequenceNumber,r));d.push(T)}return ne.waitFor(d).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,p,v)).next(()=>p)}).then(u=>(t.Ss=a,u))}function TV(i,e,t){let r=Et(),a=Et();return t.forEach(u=>r=r.add(u)),e.getEntries(i,r).next(u=>{let c=Pi();return t.forEach((d,p)=>{const v=u.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ze.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ae(vv,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)}),{xs:c,Os:a}})}function wV(i,e){const t=Ye(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rm(i,e){const t=Ye(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.ai.getTargetData(r,e).next(u=>u?(a=u,ne.resolve(a)):t.ai.allocateTargetId(r).next(c=>(a=new sa(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ss.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Ul(i,e,t){const r=Ye(i),a=r.Ss.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!wo(c))throw c;Ae(vv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(a.target)}function by(i,e,t){const r=Ye(i);let a=Ze.min(),u=Et();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,v,T){const I=Ye(p),x=I.Ds.get(T);return x!==void 0?ne.resolve(I.Ss.get(x)):I.ai.getTargetData(v,T)}(r,c,oi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(c,d.targetId).next(p=>{u=p})}).next(()=>r.bs.getDocumentsMatchingQuery(c,e,t?a:Ze.min(),t?u:Et())).next(d=>(gA(r,SS(e),d),{documents:d,Ns:u})))}function mA(i,e){const t=Ye(i),r=Ye(t.ai),a=t.Ss.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Rt(u,e).next(c=>c?c.target:null))}function pA(i,e){const t=Ye(i),r=t.vs.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Cs.getAllFromCollectionGroup(a,e,H1(r,Cl),Number.MAX_SAFE_INTEGER)).then(a=>(gA(t,e,a),a))}function gA(i,e,t){let r=i.vs.get(e)||Ze.min();t.forEach((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),i.vs.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firestore_clients";function XT(i,e){return`${yA}_${i}_${e}`}const vA="firestore_mutations";function WT(i,e,t){let r=`${vA}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const _A="firestore_targets";function Ug(i,e){return`${_A}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="SharedClientState";class im{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static qs(e,t,r){const a=JSON.parse(r);let u,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(u=new Ge(a.error.code,a.error.message))),c?new im(e,t,a.state,u):(bn(Es,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){const r=JSON.parse(t);let a,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(a=new Ge(r.error.code,r.error.message))),u?new Eh(e,r.state,a):(bn(Es,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,u=av();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=wP(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return a?new sm(e,u):(bn(Es,`Failed to parse client data for instance '${e}': ${t}`),null)}}class _v{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new _v(t.clientId,t.onlineState):(bn(Es,`Failed to parse online state: ${e}`),null)}}class Ey{constructor(){this.activeTargetIds=av()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bg{constructor(e,t,r,a,u){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new Jt(at),this.started=!1,this.js=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Hs=XT(this.persistenceKey,this.Ks),this.Js=function(p){return`firestore_sequence_number_${p}`}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new Ey),this.Ys=new RegExp(`^${yA}_${c}_([^_]*)$`),this.Zs=new RegExp(`^${vA}_${c}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${_A}_${c}_(\\d+)$`),this.eo=function(p){return`firestore_online_state_${p}`}(this.persistenceKey),this.no=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.us();for(const r of e){if(r===this.Ks)continue;const a=this.getItem(XT(this.persistenceKey,r));if(a){const u=sm.qs(r,a);u&&(this.zs=this.zs.insert(u.clientId,u))}}this.ro();const t=this.storage.getItem(this.eo);if(t){const r=this.io(t);r&&this.so(r)}for(const r of this.js)this.Gs(r);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ug(this.persistenceKey,e));if(a){const u=Eh.qs(e,a);u&&(r=u.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.ao(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae(Es,"READ",e,t),t}setItem(e,t){Ae(Es,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae(Es,"REMOVE",e),this.storage.removeItem(e)}Gs(e){const t=e;if(t.storageArea===this.storage){if(Ae(Es,"EVENT",t.key,t.newValue),t.key===this.Hs)return void bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ys.test(t.key)){if(t.newValue==null){const r=this.Po(t.key);return this.To(r,null)}{const r=this.Io(t.key,t.newValue);if(r)return this.To(r.clientId,r)}}else if(this.Zs.test(t.key)){if(t.newValue!==null){const r=this.Eo(t.key,t.newValue);if(r)return this.Ao(r)}}else if(this.Xs.test(t.key)){if(t.newValue!==null){const r=this.Ro(t.key,t.newValue);if(r)return this.Vo(r)}}else if(t.key===this.eo){if(t.newValue!==null){const r=this.io(t.newValue);if(r)return this.so(r)}}else if(t.key===this.Js){const r=function(u){let c=Br.le;if(u!=null)try{const d=JSON.parse(u);$e(typeof d=="number",30636,{mo:u}),c=d}catch(d){bn(Es,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==Br.le&&this.sequenceNumberHandler(r)}else if(t.key===this.no){const r=this.fo(t.newValue);await Promise.all(r.map(a=>this.syncEngine.po(a)))}}}else this.js.push(t)})}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){const a=new im(this.currentUser,e,t,r),u=WT(this.persistenceKey,this.currentUser,e);this.setItem(u,a.Qs())}ao(e){const t=WT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){const t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,r){const a=Ug(this.persistenceKey,e),u=new Eh(e,t,r);this.setItem(a,u.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const r=this.Po(e);return sm.qs(r,t)}Eo(e,t){const r=this.Zs.exec(e),a=Number(r[1]),u=r[2]!==void 0?r[2]:null;return im.qs(new fr(u),a,t)}Ro(e,t){const r=this.Xs.exec(e),a=Number(r[1]);return Eh.qs(a,t)}io(e){return _v.qs(e)}fo(e){return JSON.parse(e)}async Ao(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);Ae(Es,`Ignoring mutation for non-active user ${e.user.uid}`)}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const r=t?this.zs.insert(e,t):this.zs.remove(e),a=this.oo(this.zs),u=this.oo(r),c=[],d=[];return u.forEach(p=>{a.has(p)||c.push(p)}),a.forEach(p=>{u.has(p)||d.push(p)}),this.syncEngine.bo(c,d).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=av();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class bA{constructor(){this.So=new Ey,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="ConnectivityMonitor";class ZT{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ae(JT,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ae(JT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function Ty(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="RestConnection",AV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IV{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${a}`,this.qo=this.databaseId.database===Gd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Qo(e,t,r,a,u){const c=Ty(),d=this.$o(e,t.toUriEncodedString());Ae(zg,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,a,u);const{host:v}=new URL(d),T=Gh(v);return this.Ko(e,d,p,r,T).then(I=>(Ae(zg,`Received RPC '${e}' ${c}: `,I),I),I=>{throw Ah(zg,`RPC '${e}' ${c} failed with error: `,I,"url: ",d,"request:",r),I})}Wo(e,t,r,a,u,c){return this.Qo(e,t,r,a,u)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,u)=>e[u]=a),r&&r.headers.forEach((a,u)=>e[u]=a)}$o(e,t){const r=AV[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="WebChannelConnection";class CV extends IV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,a,u){const c=Ty();return new Promise((d,p)=>{const v=new k1;v.setWithCredentials(!0),v.listenOnce(L1.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Td.NO_ERROR:const I=v.getResponseJson();Ae(hr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case Td.TIMEOUT:Ae(hr,`RPC '${e}' ${c} timed out`),p(new Ge(we.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const x=v.getStatus();if(Ae(hr,`RPC '${e}' ${c} failed with status:`,x,"response text:",v.getResponseText()),x>0){let j=v.getResponseJson();Array.isArray(j)&&(j=j[0]);const z=j==null?void 0:j.error;if(z&&z.status&&z.message){const ce=function(ye){const me=ye.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(me)>=0?me:we.UNKNOWN}(z.status);p(new Ge(ce,z.message))}else p(new Ge(we.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new Ge(we.UNAVAILABLE,"Connection failed."));break;default:He(9055,{s_:e,streamId:c,o_:v.getLastErrorCode(),__:v.getLastError()})}}finally{Ae(hr,`RPC '${e}' ${c} completed.`)}});const T=JSON.stringify(a);Ae(hr,`RPC '${e}' ${c} sending request:`,a),v.send(t,"POST",T,r,15)})}a_(e,t,r){const a=Ty(),u=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=z1(),d=B1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const T=u.join("");Ae(hr,`Creating RPC '${e}' stream ${a}: ${T}`,p);const I=c.createWebChannel(T,p);let x=!1,j=!1;const z=new RV({Go:oe=>{j?Ae(hr,`Not sending because RPC '${e}' stream ${a} is closed:`,oe):(x||(Ae(hr,`Opening RPC '${e}' stream ${a} transport.`),I.open(),x=!0),Ae(hr,`RPC '${e}' stream ${a} sending:`,oe),I.send(oe))},zo:()=>I.close()}),ce=(oe,ye,me)=>{oe.listen(ye,ae=>{try{me(ae)}catch(Re){setTimeout(()=>{throw Re},0)}})};return ce(I,lh.EventType.OPEN,()=>{j||(Ae(hr,`RPC '${e}' stream ${a} transport opened.`),z.t_())}),ce(I,lh.EventType.CLOSE,()=>{j||(j=!0,Ae(hr,`RPC '${e}' stream ${a} transport closed`),z.r_())}),ce(I,lh.EventType.ERROR,oe=>{j||(j=!0,Ah(hr,`RPC '${e}' stream ${a} transport errored. Name:`,oe.name,"Message:",oe.message),z.r_(new Ge(we.UNAVAILABLE,"The operation could not be completed")))}),ce(I,lh.EventType.MESSAGE,oe=>{var ye;if(!j){const me=oe.data[0];$e(!!me,16349);const ae=me,Re=(ae==null?void 0:ae.error)||((ye=ae[0])===null||ye===void 0?void 0:ye.error);if(Re){Ae(hr,`RPC '${e}' stream ${a} received error:`,Re);const Ce=Re.status;let Ve=function(V){const q=xn[V];if(q!==void 0)return VS(q)}(Ce),L=Re.message;Ve===void 0&&(Ve=we.INTERNAL,L="Unknown error status: "+Ce+" with message "+Re.message),j=!0,z.r_(new Ge(Ve,L)),I.close()}else Ae(hr,`RPC '${e}' stream ${a} received:`,me),z.i_(me)}}),ce(d,U1.STAT_EVENT,oe=>{oe.stat===ey.PROXY?Ae(hr,`RPC '${e}' stream ${a} detected buffering proxy`):oe.stat===ey.NOPROXY&&Ae(hr,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{z.n_()},0),z}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return typeof window<"u"?window:null}function Dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(i){return new NN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,r=1e3,a=1.5,u=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=a,this.l_=u,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-r);a>0&&Ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="PersistentStream";class SA{constructor(e,t,r,a,u,c,d,p){this.bi=e,this.R_=r,this.V_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new wA(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(bn(t.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.m_===t&&this.B_(r,a)},r=>{e(()=>{const a=new Ge(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(a)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{r(()=>this.L_(a))}),this.stream.onMessage(a=>{r(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ae(ew,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Ae(ew,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xV extends SA{constructor(e,t,r,a,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=LN(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ze.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ze.min():c.readTime?Sr(c.readTime):Ze.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=py(this.serializer),t.addTarget=function(u,c){let d;const p=c.target;if(d=Yd(p)?{documents:qS(u,p)}:{query:FS(u,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=VN(u,c.resumeToken);const v=dy(u,c.expectedCount);v!==null&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ze.min())>0){d.readTime=Xd(u,c.snapshotVersion.toTimestamp());const v=dy(u,c.expectedCount);v!==null&&(d.expectedCount=v)}return d}(this.serializer,e);const r=BN(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=py(this.serializer),t.removeTarget=e,this.F_(t)}}class DV extends SA{constructor(e,t,r,a,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=UN(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=py(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jd(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{}class PV extends OV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Qo(e,my(t,r),a,u,c)).catch(u=>{throw u.name==="FirebaseError"?(u.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ge(we.UNKNOWN,u.toString())})}Wo(e,t,r,a,u){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,my(t,r),a,c,d,u)).catch(c=>{throw c.name==="FirebaseError"?(c.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ge(we.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class NV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(bn(t),this.ea=!1):Ae("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="RemoteStore";class VV{constructor(e,t,r,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=u,this.ca.vo(c=>{r.enqueueAndForget(async()=>{Ou(this)&&(Ae(Ru,"Restarting streams for network reachability change."),await async function(p){const v=Ye(p);v.aa.add(4),await af(v),v.la.set("Unknown"),v.aa.delete(4),await Om(v)}(this))})}),this.la=new NV(r,a)}}async function Om(i){if(Ou(i))for(const e of i.ua)await e(!0)}async function af(i){for(const e of i.ua)await e(!1)}function Pm(i,e){const t=Ye(i);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Tv(t)?Ev(t):Yl(t).b_()&&bv(t,e))}function Bl(i,e){const t=Ye(i),r=Yl(t);t._a.delete(e),r.b_()&&AA(t,e),t._a.size===0&&(r.b_()?r.v_():Ou(t)&&t.la.set("Unknown"))}function bv(i,e){if(i.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yl(i).U_(e)}function AA(i,e){i.ha.Ke(e),Yl(i).K_(e)}function Ev(i){i.ha=new xN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i._a.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Yl(i).start(),i.la.ta()}function Tv(i){return Ou(i)&&!Yl(i).w_()&&i._a.size>0}function Ou(i){return Ye(i).aa.size===0}function IA(i){i.ha=void 0}async function MV(i){i.la.set("Online")}async function kV(i){i._a.forEach((e,t)=>{bv(i,e)})}async function LV(i,e){IA(i),Tv(i)?(i.la.ia(e),Ev(i)):i.la.set("Unknown")}async function UV(i,e,t){if(i.la.set("Online"),e instanceof kS&&e.state===2&&e.cause)try{await async function(a,u){const c=u.cause;for(const d of u.targetIds)a._a.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a._a.delete(d),a.ha.removeTarget(d))}(i,e)}catch(r){Ae(Ru,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await am(i,r)}else if(e instanceof xd?i.ha.Xe(e):e instanceof MS?i.ha.ot(e):i.ha.nt(e),!t.isEqual(Ze.min()))try{const r=await dA(i.localStore);t.compareTo(r)>=0&&await function(u,c){const d=u.ha.It(c);return d.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const T=u._a.get(v);T&&u._a.set(v,T.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,v)=>{const T=u._a.get(p);if(!T)return;u._a.set(p,T.withResumeToken(Tn.EMPTY_BYTE_STRING,T.snapshotVersion)),AA(u,p);const I=new sa(T.target,p,v,T.sequenceNumber);bv(u,I)}),u.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){Ae(Ru,"Failed to raise snapshot:",r),await am(i,r)}}async function am(i,e,t){if(!wo(e))throw e;i.aa.add(1),await af(i),i.la.set("Offline"),t||(t=()=>dA(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ae(Ru,"Retrying IndexedDB access"),await t(),i.aa.delete(1),await Om(i)})}function RA(i,e){return e().catch(t=>am(i,t,e))}async function of(i){const e=Ye(i),t=bo(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:pu;for(;BV(e);)try{const a=await wV(e.localStore,r);if(a===null){e.oa.length===0&&t.v_();break}r=a.batchId,zV(e,a)}catch(a){await am(e,a)}CA(e)&&xA(e)}function BV(i){return Ou(i)&&i.oa.length<10}function zV(i,e){i.oa.push(e);const t=bo(i);t.b_()&&t.W_&&t.G_(e.mutations)}function CA(i){return Ou(i)&&!bo(i).w_()&&i.oa.length>0}function xA(i){bo(i).start()}async function jV(i){bo(i).H_()}async function qV(i){const e=bo(i);for(const t of i.oa)e.G_(t.mutations)}async function FV(i,e,t){const r=i.oa.shift(),a=lv.from(r,e,t);await RA(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await of(i)}async function KV(i,e){e&&bo(i).W_&&await async function(r,a){if(function(c){return RN(c)&&c!==we.ABORTED}(a.code)){const u=r.oa.shift();bo(r).D_(),await RA(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,a)),await of(r)}}(i,e),CA(i)&&xA(i)}async function tw(i,e){const t=Ye(i);t.asyncQueue.verifyOperationInProgress(),Ae(Ru,"RemoteStore received new credentials");const r=Ou(t);t.aa.add(3),await af(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Om(t)}async function wy(i,e){const t=Ye(i);e?(t.aa.delete(2),await Om(t)):e||(t.aa.add(2),await af(t),t.la.set("Unknown"))}function Yl(i){return i.Pa||(i.Pa=function(t,r,a){const u=Ye(t);return u.Y_(),new xV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{jo:MV.bind(null,i),Jo:kV.bind(null,i),Zo:LV.bind(null,i),Q_:UV.bind(null,i)}),i.ua.push(async e=>{e?(i.Pa.D_(),Tv(i)?Ev(i):i.la.set("Unknown")):(await i.Pa.stop(),IA(i))})),i.Pa}function bo(i){return i.Ta||(i.Ta=function(t,r,a){const u=Ye(t);return u.Y_(),new DV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{jo:()=>Promise.resolve(),Jo:jV.bind(null,i),Zo:KV.bind(null,i),z_:qV.bind(null,i),j_:FV.bind(null,i)}),i.ua.push(async e=>{e?(i.Ta.D_(),await of(i)):(await i.Ta.stop(),i.oa.length>0&&(Ae(Ru,`Stopping write stream with ${i.oa.length} pending writes`),i.oa=[]))})),i.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t,r,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,u){const c=Date.now()+r,d=new wv(e,t,c,a,u);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DA(i,e){if(bn("AsyncQueue",`${e}: ${i}`),wo(i))return new Ge(we.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=ch(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.Ia=new Jt(ze.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class zl{constructor(e,t,r,a,u,c,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,a,u){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new zl(e,t,wl.emptySet(t),c,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class GV{constructor(){this.queries=rw(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const a=Ye(t),u=a.queries;a.queries=rw(),u.forEach((c,d)=>{for(const p of d.Ra)p.onError(r)})})(this,new Ge(we.ABORTED,"Firestore shutting down"))}}function rw(){return new ga(i=>wS(i),Am)}async function QV(i,e){const t=Ye(i);let r=3;const a=e.query;let u=t.queries.get(a);u?!u.Va()&&e.ma()&&(r=2):(u=new HV,r=e.ma()?0:1);try{switch(r){case 0:u.Aa=await t.onListen(a,!0);break;case 1:u.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=DA(c,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,u),u.Ra.push(e),e.ga(t.onlineState),u.Aa&&e.pa(u.Aa)&&Sv(t)}async function YV(i,e){const t=Ye(i),r=e.query;let a=3;const u=t.queries.get(r);if(u){const c=u.Ra.indexOf(e);c>=0&&(u.Ra.splice(c,1),u.Ra.length===0?a=e.ma()?0:1:!u.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $V(i,e){const t=Ye(i);let r=!1;for(const a of e){const u=a.query,c=t.queries.get(u);if(c){for(const d of c.Ra)d.pa(a)&&(r=!0);c.Aa=a}}r&&Sv(t)}function XV(i,e,t){const r=Ye(i),a=r.queries.get(e);if(a)for(const u of a.Ra)u.onError(t);r.queries.delete(e)}function Sv(i){i.fa.forEach(e=>{e.next()})}var Sy,iw;(iw=Sy||(Sy={})).ya="default",iw.Cache="cache";class WV{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new zl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Sy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.key=e}}class PA{constructor(e){this.key=e}}class JV{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Et(),this.mutatedKeys=Et(),this.Ua=AS(e),this.Ka=new wl(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new nw,a=t?t.Ka:this.Ka;let u=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((T,I)=>{const x=a.get(T),j=tf(this.query,I)?I:null,z=!!x&&this.mutatedKeys.has(x.key),ce=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let oe=!1;x&&j?x.data.isEqual(j.data)?z!==ce&&(r.track({type:3,doc:j}),oe=!0):this.ja(x,j)||(r.track({type:2,doc:j}),oe=!0,(p&&this.Ua(j,p)>0||v&&this.Ua(j,v)<0)&&(d=!0)):!x&&j?(r.track({type:0,doc:j}),oe=!0):x&&!j&&(r.track({type:1,doc:x}),oe=!0,(p||v)&&(d=!0)),oe&&(j?(c=c.add(j),u=ce?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Ka:c,za:r,ys:d,mutatedKeys:u}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const u=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((T,I)=>function(j,z){const ce=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:oe})}};return ce(j)-ce(z)}(T.type,I.type)||this.Ua(T.doc,I.doc)),this.Ha(r),a=a!=null&&a;const d=t&&!a?this.Ja():[],p=this.$a.size===0&&this.current&&!a?1:0,v=p!==this.Qa;return this.Qa=p,c.length!==0||v?{snapshot:new zl(this.query,e.Ka,u,c,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:d}:{Ya:d}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new nw,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Et(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new PA(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new OA(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Et();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return zl.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const $l="SyncEngine";class ZV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eM{constructor(e){this.key=e,this.tu=!1}}class tM{constructor(e,t,r,a,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new ga(d=>wS(d),Am),this.iu=new Map,this.su=new Set,this.ou=new Jt(ze.comparator),this._u=new Map,this.au=new mv,this.uu={},this.cu=new Map,this.lu=Iu.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function nM(i,e,t=!0){const r=Nm(i);let a;const u=r.ru.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.eu()):a=await NA(r,e,t,!0),a}async function rM(i,e){const t=Nm(i);await NA(t,e,!0,!1)}async function NA(i,e,t,r){const a=await rm(i.localStore,oi(e)),u=a.targetId,c=i.sharedClientState.addLocalQueryTarget(u,t);let d;return r&&(d=await Av(i,e,u,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&Pm(i.remoteStore,a),d}async function Av(i,e,t,r,a){i.Pu=(I,x,j)=>async function(ce,oe,ye,me){let ae=oe.view.Ga(ye);ae.ys&&(ae=await by(ce.localStore,oe.query,!1).then(({documents:L})=>oe.view.Ga(L,ae)));const Re=me&&me.targetChanges.get(oe.targetId),Ce=me&&me.targetMismatches.get(oe.targetId)!=null,Ve=oe.view.applyChanges(ae,ce.isPrimaryClient,Re,Ce);return Ay(ce,oe.targetId,Ve.Ya),Ve.snapshot}(i,I,x,j);const u=await by(i.localStore,e,!0),c=new JV(e,u.Ns),d=c.Ga(u.documents),p=sf.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),v=c.applyChanges(d,i.isPrimaryClient,p);Ay(i,t,v.Ya);const T=new ZV(e,t,c);return i.ru.set(e,T),i.iu.has(t)?i.iu.get(t).push(e):i.iu.set(t,[e]),v.snapshot}async function iM(i,e,t){const r=Ye(i),a=r.ru.get(e),u=r.iu.get(a.targetId);if(u.length>1)return r.iu.set(a.targetId,u.filter(c=>!Am(c,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ul(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Bl(r.remoteStore,a.targetId),jl(r,a.targetId)}).catch(To)):(jl(r,a.targetId),await Ul(r.localStore,a.targetId,!0))}async function sM(i,e){const t=Ye(i),r=t.ru.get(e),a=t.iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bl(t.remoteStore,r.targetId))}async function VA(i,e){const t=Ye(i);try{const r=await EV(t.localStore,e);e.targetChanges.forEach((a,u)=>{const c=t._u.get(u);c&&($e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?$e(c.tu,14607):a.removedDocuments.size>0&&($e(c.tu,42227),c.tu=!1))}),await Pu(t,r,e)}catch(r){await To(r)}}function sw(i,e,t){const r=Ye(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ru.forEach((u,c)=>{const d=c.view.ga(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const p=Ye(c);p.onlineState=d;let v=!1;p.queries.forEach((T,I)=>{for(const x of I.Ra)x.ga(d)&&(v=!0)}),v&&Sv(p)}(r.eventManager,e),a.length&&r.nu.Q_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aM(i,e,t){const r=Ye(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r._u.get(e),u=a&&a.key;if(u){let c=new Jt(ze.comparator);c=c.insert(u,dn.newNoDocument(u,Ze.min()));const d=Et().add(u),p=new rf(Ze.min(),new Map,new Jt(at),c,d);await VA(r,p),r.ou=r.ou.remove(u),r._u.delete(e),Cv(r)}else await Ul(r.localStore,e,!1).then(()=>jl(r,e,t)).catch(To)}async function oM(i,e){const t=Ye(i),r=e.batch.batchId;try{const a=await bV(t.localStore,e);Rv(t,r,null),Iv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Pu(t,a)}catch(a){await To(a)}}async function uM(i,e,t){const r=Ye(i);try{const a=await function(c,d){const p=Ye(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let T;return p.mutationQueue.lookupMutationBatch(v,d).next(I=>($e(I!==null,37113),T=I.keys(),p.mutationQueue.removeMutationBatch(v,I))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,T,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T)).next(()=>p.localDocuments.getDocuments(v,T))})}(r.localStore,e);Rv(r,e,t),Iv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Pu(r,a)}catch(a){await To(a)}}function Iv(i,e){(i.cu.get(e)||[]).forEach(t=>{t.resolve()}),i.cu.delete(e)}function Rv(i,e,t){const r=Ye(i);let a=r.uu[r.currentUser.toKey()];if(a){const u=a.get(e);u&&(t?u.reject(t):u.resolve(),a=a.remove(e)),r.uu[r.currentUser.toKey()]=a}}function jl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.iu.get(e))i.ru.delete(r),t&&i.nu.Tu(r,t);i.iu.delete(e),i.isPrimaryClient&&i.au.Ur(e).forEach(r=>{i.au.containsKey(r)||MA(i,r)})}function MA(i,e){i.su.delete(e.path.canonicalString());const t=i.ou.get(e);t!==null&&(Bl(i.remoteStore,t),i.ou=i.ou.remove(e),i._u.delete(t),Cv(i))}function Ay(i,e,t){for(const r of t)r instanceof OA?(i.au.addReference(r.key,e),lM(i,r)):r instanceof PA?(Ae($l,"Document no longer in limbo: "+r.key),i.au.removeReference(r.key,e),i.au.containsKey(r.key)||MA(i,r.key)):He(19791,{Iu:r})}function lM(i,e){const t=e.key,r=t.path.canonicalString();i.ou.get(t)||i.su.has(r)||(Ae($l,"New document in limbo: "+t),i.su.add(r),Cv(i))}function Cv(i){for(;i.su.size>0&&i.ou.size<i.maxConcurrentLimboResolutions;){const e=i.su.values().next().value;i.su.delete(e);const t=new ze(Qt.fromString(e)),r=i.lu.next();i._u.set(r,new eM(t)),i.ou=i.ou.insert(t,r),Pm(i.remoteStore,new sa(oi(Sm(t.path)),r,"TargetPurposeLimboResolution",Br.le))}}async function Pu(i,e,t){const r=Ye(i),a=[],u=[],c=[];r.ru.isEmpty()||(r.ru.forEach((d,p)=>{c.push(r.Pu(p,e,t).then(v=>{var T;if((v||t)&&r.isPrimaryClient){const I=v?!v.fromCache:(T=t==null?void 0:t.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(v){a.push(v);const I=yv.Ps(p.targetId,v);u.push(I)}}))}),await Promise.all(c),r.nu.Q_(a),await async function(p,v){const T=Ye(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>ne.forEach(v,x=>ne.forEach(x.ls,j=>T.persistence.referenceDelegate.addReference(I,x.targetId,j)).next(()=>ne.forEach(x.hs,j=>T.persistence.referenceDelegate.removeReference(I,x.targetId,j)))))}catch(I){if(!wo(I))throw I;Ae(vv,"Failed to update sequence numbers: "+I)}for(const I of v){const x=I.targetId;if(!I.fromCache){const j=T.Ss.get(x),z=j.snapshotVersion,ce=j.withLastLimboFreeSnapshotVersion(z);T.Ss=T.Ss.insert(x,ce)}}}(r.localStore,u))}async function cM(i,e){const t=Ye(i);if(!t.currentUser.isEqual(e)){Ae($l,"User change. New user:",e.toKey());const r=await fA(t.localStore,e);t.currentUser=e,function(u,c){u.cu.forEach(d=>{d.forEach(p=>{p.reject(new Ge(we.CANCELLED,c))})}),u.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pu(t,r.Ms)}}function hM(i,e){const t=Ye(i),r=t._u.get(e);if(r&&r.tu)return Et().add(r.key);{let a=Et();const u=t.iu.get(e);if(!u)return a;for(const c of u){const d=t.ru.get(c);a=a.unionWith(d.view.Wa)}return a}}async function fM(i,e){const t=Ye(i),r=await by(t.localStore,e.query,!0),a=e.view.Xa(r);return t.isPrimaryClient&&Ay(t,e.targetId,a.Ya),a}async function dM(i,e){const t=Ye(i);return pA(t.localStore,e).then(r=>Pu(t,r))}async function mM(i,e,t,r){const a=Ye(i),u=await function(d,p){const v=Ye(d),T=Ye(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",I=>T.Hn(I,p).next(x=>x?v.localDocuments.getDocuments(I,x):ne.resolve(null)))}(a.localStore,e);u!==null?(t==="pending"?await of(a.remoteStore):t==="acknowledged"||t==="rejected"?(Rv(a,e,r||null),Iv(a,e),function(d,p){Ye(Ye(d).mutationQueue).Xn(p)}(a.localStore,e)):He(6720,"Unknown batchState",{Eu:t}),await Pu(a,u)):Ae($l,"Cannot apply mutation batch with id: "+e)}async function pM(i,e){const t=Ye(i);if(Nm(t),LA(t),e===!0&&t.hu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await aw(t,r.toArray());t.hu=!0,await wy(t.remoteStore,!0);for(const u of a)Pm(t.remoteStore,u)}else if(e===!1&&t.hu!==!1){const r=[];let a=Promise.resolve();t.iu.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(jl(t,c),Ul(t.localStore,c,!0))),Bl(t.remoteStore,c)}),await a,await aw(t,r),function(c){const d=Ye(c);d._u.forEach((p,v)=>{Bl(d.remoteStore,v)}),d.au.Kr(),d._u=new Map,d.ou=new Jt(ze.comparator)}(t),t.hu=!1,await wy(t.remoteStore,!1)}}async function aw(i,e,t){const r=Ye(i),a=[],u=[];for(const c of e){let d;const p=r.iu.get(c);if(p&&p.length!==0){d=await rm(r.localStore,oi(p[0]));for(const v of p){const T=r.ru.get(v),I=await fM(r,T);I.snapshot&&u.push(I.snapshot)}}else{const v=await mA(r.localStore,c);d=await rm(r.localStore,v),await Av(r,kA(v),c,!1,d.resumeToken)}a.push(d)}return r.nu.Q_(u),a}function kA(i){return TS(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gM(i){return function(t){return Ye(Ye(t).persistence).us()}(Ye(i).localStore)}async function yM(i,e,t,r){const a=Ye(i);if(a.hu)return void Ae($l,"Ignoring unexpected query state notification.");const u=a.iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await pA(a.localStore,SS(u[0])),d=rf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tn.EMPTY_BYTE_STRING);await Pu(a,c,d);break}case"rejected":await Ul(a.localStore,e,!0),jl(a,e,r);break;default:He(64155,t)}}async function vM(i,e,t){const r=Nm(i);if(r.hu){for(const a of e){if(r.iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){Ae($l,"Adding an already active target "+a);continue}const u=await mA(r.localStore,a),c=await rm(r.localStore,u);await Av(r,kA(u),c.targetId,!1,c.resumeToken),Pm(r.remoteStore,c)}for(const a of t)r.iu.has(a)&&await Ul(r.localStore,a,!1).then(()=>{Bl(r.remoteStore,a),jl(r,a)}).catch(To)}}function Nm(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=VA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aM.bind(null,e),e.nu.Q_=$V.bind(null,e.eventManager),e.nu.Tu=XV.bind(null,e.eventManager),e}function LA(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uM.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=TA(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return hA(this.persistence,new cA,e.initialUser,this.serializer)}Ru(e){return new pv(Dm.Ei,this.serializer)}Au(e){return new bA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class _M extends Lh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){$e(this.persistence.referenceDelegate instanceof nm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new iA(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new pv(r=>nm.Ei(r,t),this.serializer)}}class UA extends Lh{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.gu.initialize(this,e),await LA(this.gu.syncEngine),await of(this.gu.remoteStore),await this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Vu(e){return hA(this.persistence,new cA,e.initialUser,this.serializer)}mu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new iA(r,e.asyncQueue,t)}fu(e,t){const r=new TP(t,this.persistence);return new EP(e.asyncQueue,r)}Ru(e){const t=lA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new gv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,EA(),Dd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new bA}}class bM extends UA{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.gu.syncEngine;this.sharedClientState instanceof Bg&&(this.sharedClientState.syncEngine={yo:mM.bind(null,t),wo:yM.bind(null,t),bo:vM.bind(null,t),us:gM.bind(null,t),po:dM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ki(async r=>{await pM(this.gu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Au(e){const t=EA();if(!Bg.C(t))throw new Ge(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Uh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cM.bind(null,this.syncEngine),await wy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GV}()}createDatastore(e){const t=TA(e.databaseInfo.databaseId),r=function(u){return new CV(u)}(e.databaseInfo);return function(u,c,d,p){return new PV(u,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,u,c,d){return new VV(r,a,u,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>sw(this.syncEngine,t,0),function(){return ZT.C()?new ZT:new SV}())}createSyncEngine(e,t){return function(a,u,c,d,p,v,T){const I=new tM(a,u,c,d,p,v);return T&&(I.hu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const u=Ye(a);Ae(Ru,"RemoteStore shutting down."),u.aa.add(5),await af(u),u.ca.shutdown(),u.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Uh.provider={build:()=>new Uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):bn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="FirestoreClient";class TM{constructor(e,t,r,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=fr.UNAUTHENTICATED,this.clientId=F1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async c=>{Ae(Eo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ae(Eo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=DA(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jg(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(Eo,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async a=>{r.isEqual(a)||(await fA(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ow(i,e){i.asyncQueue.verifyOperationInProgress();const t=await wM(i);Ae(Eo,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>tw(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,a)=>tw(e.remoteStore,a)),i._onlineComponents=e}async function wM(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(Eo,"Using user provided OfflineComponentProvider");try{await jg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===we.FAILED_PRECONDITION||a.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Ah("Error using user provided cache. Falling back to memory cache: "+t),await jg(i,new Lh)}}else Ae(Eo,"Using default OfflineComponentProvider"),await jg(i,new _M(void 0));return i._offlineComponents}async function SM(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(Eo,"Using user provided OnlineComponentProvider"),await ow(i,i._uninitializedComponentsProvider._online)):(Ae(Eo,"Using default OnlineComponentProvider"),await ow(i,new Uh))),i._onlineComponents}async function AM(i){const e=await SM(i),t=e.eventManager;return t.onListen=nM.bind(null,e.syncEngine),t.onUnlisten=iM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sM.bind(null,e.syncEngine),t}function IM(i,e,t={}){const r=new go;return i.asyncQueue.enqueueAndForget(async()=>function(u,c,d,p,v){const T=new EM({next:x=>{T.yu(),c.enqueueAndForget(()=>YV(u,I));const j=x.docs.has(d);!j&&x.fromCache?v.reject(new Ge(we.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&p&&p.source==="server"?v.reject(new Ge(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),I=new WV(Sm(d.path),T,{includeMetadataChanges:!0,Fa:!0});return QV(u,I)}(await AM(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(i,e,t){if(!t)throw new Ge(we.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function CM(i,e,t,r){if(e===!0&&r===!0)throw new Ge(we.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function lw(i){if(!ze.isDocumentKey(i))throw new Ge(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function xM(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":He(12329,{type:typeof i})}function cw(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ge(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xM(i);throw new Ge(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="firestore.googleapis.com",hw=!0;class fw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DM,this.ssl=hw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rA)throw new Ge(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zA{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hP;switch(r.type){case"firstParty":return new mP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ge(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,My("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=uw.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),uw.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xv(this.firestore,e,this._query)}}class oa{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oa(this.firestore,e,this._key)}}class Bh extends xv{constructor(e,t,r){super(e,t,Sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oa(this.firestore,null,new ze(e))}withConverter(e){return new Bh(this.firestore,e,this._path)}}function jA(i,e,...t){if(i=Du(i),arguments.length===1&&(e=F1.newId()),RM("doc","path",e),i instanceof zA){const r=Qt.fromString(e,...t);return lw(r),new oa(i,null,new ze(r))}{if(!(i instanceof oa||i instanceof Bh))throw new Ge(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Qt.fromString(e,...t));return lw(r),new oa(i.firestore,i instanceof Bh?i.converter:null,new ze(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="AsyncQueue";class mw{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new wA(this,"async_queue_retry"),this.ju=()=>{const r=Dd();r&&Ae(dw,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Dd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new go;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!wo(e))throw e;Ae(dw,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,bn("INTERNAL UNHANDLED ERROR: ",pw(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=wv.createAndSchedule(this,e,t,r,u=>this.Xu(u));return this.Uu.push(a),a}Ju(){this.Ku&&He(47125,{ec:pw(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function pw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class qA extends zA{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new mw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mw(e),this._firestoreClient=void 0,await e}}}function OM(i,e,t){t||(t=Gd);const r=Uy(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),u=r.getOptions(t);if(vu(u,e))return a;throw new Ge(we.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ge(we.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rA)throw new Ge(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Gh(e.host)&&Xw(e.host),r.initialize({options:e,instanceIdentifier:t})}function PM(i){if(i._terminated)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||NM(i),i._firestoreClient}function NM(i){var e,t,r;const a=i._freezeSettings(),u=function(d,p,v,T){return new JP(d,p,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,BA(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new TM(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this._byteString=e}static fromBase64String(e){try{return new om(Tn.fromBase64String(e))}catch(t){throw new Ge(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new om(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ge(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0}(this._values,e._values)}}const kM=new RegExp("[~\\*/\\[\\]]");function LM(i,e,t){if(e.search(kM)>=0)throw gw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i);try{return new FA(...e.split("."))._internalPath}catch{throw gw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i)}}function gw(i,e,t,r,a){let u=`Function ${e}() called with invalid data`;u+=". ";let c="";return new Ge(we.INVALID_ARGUMENT,u+i+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,r,a,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new oa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class UM extends KA{data(){return super.data()}}function HA(i,e){return typeof e=="string"?LM(i,e):e instanceof FA?e._internalPath:e._delegate._internalPath}class BM{convertValue(e,t="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zh(e,(a,u)=>{r[a]=this.convertValue(u,t)}),r}convertVectorValue(e){var t,r,a;const u=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Ph].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>rn(c.doubleValue));return new MM(u)}convertGeoPoint(e){return new VM(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Em(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const t=ha(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);$e(QS(r),9688,{name:e});const a=new Tu(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return a.isEqual(t)||bn(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GA extends KA{constructor(e,t,r,a,u,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jM extends GA{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(i){i=cw(i,oa);const e=cw(i.firestore,qA);return IM(PM(e),i._key).then(t=>FM(e,i,t))}class qM extends BM{constructor(e){super(),this.firestore=e}convertBytes(e){return new om(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oa(this.firestore,null,t)}}function FM(i,e,t){const r=t.docs.get(e._key),a=new qM(i);return new GA(i,a,e._key,r,new zM(t.hasPendingWrites,t.fromCache),e.converter)}class KM{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=YM(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function HM(i){return new KM(i)}class GM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Uh.provider,this._offlineComponentProvider={build:t=>new UA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class QM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Uh.provider,this._offlineComponentProvider={build:t=>new bM(t,e==null?void 0:e.cacheSizeBytes)}}}function YM(i){return new GM(void 0)}function $M(){return new QM}(function(e,t=!0){(function(a){Gl=a})(Kl),Al(new _u("firestore",(r,{instanceIdentifier:a,options:u})=>{const c=r.getProvider("app").getImmediate(),d=new qA(new fP(r.getProvider("auth-internal")),new pP(c,r.getProvider("app-check-internal")),function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ge(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(v.options.projectId,T)}(c,a),c);return u=Object.assign({useFetchStreams:t},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),mo(WE,JE,e),mo(WE,JE,"esm2017")})();const XM={apiKey:"AIzaSyBaP9APfVtEPw1sLQgHx26ZEZ7SPfutv28",authDomain:"tell-4f02c.firebaseapp.com",projectId:"tell-4f02c",storageBucket:"tell-4f02c.firebasestorage.app",messagingSenderId:"1032114981963",appId:"1:1032114981963:web:719ae9a5040929b739d1ce"},YA=t1(XM),Dv=uP(YA),$A=OM(YA,{localCache:HM({tabManager:$M()})}),WM=async()=>{var u;const i=new Ts,t=(await N1(Dv,i)).user,r=jA($A,"users",t.email),a=await QA(r);if(!a.exists()||!((u=a.data())!=null&&u.role))throw window.alert("User doesn't exist"),new Error("User doesn't exist");return t},JM=async()=>{const i=new Ts;return(await N1(Dv,i)).user};function ZM(){const i=async()=>{try{const t=await JM();console.log(t)}catch(t){alert(t.message)}},e=async()=>{const t=await WM();console.log(t)};return Se.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Se.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[Se.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Sign In"}),Se.jsxs("div",{className:"flex justify-center",children:[Se.jsxs("button",{onClick:i,className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:[Se.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Se.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Se.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Se.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),Se.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Register with Google"]}),Se.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:[Se.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Se.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Se.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Se.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),Se.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]})]})})}function ek(){return Se.jsxs("div",{className:"flex min-h-screen",children:[Se.jsx("div",{className:"fixed top-0 left-0 h-screen w-64 bg-gray-800 hidden md:block",children:Se.jsx(AR,{})}),Se.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:Se.jsx(bx,{children:Se.jsxs(XC,{children:[Se.jsx(Kg,{path:"/",element:Se.jsx(iC,{})}),Se.jsx(Kg,{path:"/login",element:Se.jsx(ZM,{})})]})})})]})}const tk=({children:i})=>{const[e,t]=ge.useState(null);return ge.useEffect(()=>{const r=Dv.onAuthStateChanged(async a=>{if(a){const u=jA($A,"users",a.email);(await QA(u)).exists()?t(a):console.log("User doesn't exist")}else t(null)});return()=>r()},[]),Se.jsx(vw.Provider,{value:{user:e},children:i})};wR.createRoot(document.getElementById("root")).render(Se.jsx(ge.StrictMode,{children:Se.jsx(tk,{children:Se.jsx(ek,{})})}));
