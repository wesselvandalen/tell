var PR=Object.defineProperty;var NR=(i,e,t)=>e in i?PR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var qb=(i,e,t)=>NR(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}})();var VR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Eg={exports:{}},jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function MR(){if(Fb)return jc;Fb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var d in a)d!=="key"&&(u[d]=a[d])}else u=a;return a=u.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:u}}return jc.Fragment=e,jc.jsx=t,jc.jsxs=t,jc}var Kb;function kR(){return Kb||(Kb=1,Eg.exports=MR()),Eg.exports}var Ee=kR(),Tg={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function LR(){if(Hb)return ft;Hb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=I&&j[I]||j["@@iterator"],typeof j=="function"?j:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,le={};function ie(j,we,Be){this.props=j,this.context=we,this.refs=le,this.updater=Be||B}ie.prototype.isReactComponent={},ie.prototype.setState=function(j,we){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,we,"setState")},ie.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function pe(){}pe.prototype=ie.prototype;function de(j,we,Be){this.props=j,this.context=we,this.refs=le,this.updater=Be||B}var ae=de.prototype=new pe;ae.constructor=de,z(ae,ie.prototype),ae.isPureReactComponent=!0;var Re=Array.isArray,xe={H:null,A:null,T:null,S:null,V:null},Ve=Object.prototype.hasOwnProperty;function L(j,we,Be,Ie,We,ct){return Be=ct.ref,{$$typeof:i,type:j,key:we,ref:Be!==void 0?Be:null,props:ct}}function P(j,we){return L(j.type,we,void 0,void 0,void 0,j.props)}function V(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function q(j){var we={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Be){return we[Be]})}var Y=/\/+/g;function W(j,we){return typeof j=="object"&&j!==null&&j.key!=null?q(""+j.key):we.toString(36)}function k(){}function On(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(k,k):(j.status="pending",j.then(function(we){j.status==="pending"&&(j.status="fulfilled",j.value=we)},function(we){j.status==="pending"&&(j.status="rejected",j.reason=we)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Yt(j,we,Be,Ie,We){var ct=typeof j;(ct==="undefined"||ct==="boolean")&&(j=null);var et=!1;if(j===null)et=!0;else switch(ct){case"bigint":case"string":case"number":et=!0;break;case"object":switch(j.$$typeof){case i:case e:et=!0;break;case E:return et=j._init,Yt(et(j._payload),we,Be,Ie,We)}}if(et)return We=We(j),et=Ie===""?"."+W(j,0):Ie,Re(We)?(Be="",et!=null&&(Be=et.replace(Y,"$&/")+"/"),Yt(We,we,Be,"",function(He){return He})):We!=null&&(V(We)&&(We=P(We,Be+(We.key==null||j&&j.key===We.key?"":(""+We.key).replace(Y,"$&/")+"/")+et)),we.push(We)),1;et=0;var cn=Ie===""?".":Ie+":";if(Re(j))for(var Bt=0;Bt<j.length;Bt++)Ie=j[Bt],ct=cn+W(Ie,Bt),et+=Yt(Ie,we,Be,ct,We);else if(Bt=x(j),typeof Bt=="function")for(j=Bt.call(j),Bt=0;!(Ie=j.next()).done;)Ie=Ie.value,ct=cn+W(Ie,Bt++),et+=Yt(Ie,we,Be,ct,We);else if(ct==="object"){if(typeof j.then=="function")return Yt(On(j),we,Be,Ie,We);throw we=String(j),Error("Objects are not valid as a React child (found: "+(we==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":we)+"). If you meant to render a collection of children, use an array instead.")}return et}function ye(j,we,Be){if(j==null)return j;var Ie=[],We=0;return Yt(j,Ie,"","",function(ct){return we.call(Be,ct,We++)}),Ie}function Le(j){if(j._status===-1){var we=j._result;we=we(),we.then(function(Be){(j._status===0||j._status===-1)&&(j._status=1,j._result=Be)},function(Be){(j._status===0||j._status===-1)&&(j._status=2,j._result=Be)}),j._status===-1&&(j._status=0,j._result=we)}if(j._status===1)return j._result.default;throw j._result}var Qe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var we=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(we))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function gt(){}return ft.Children={map:ye,forEach:function(j,we,Be){ye(j,function(){we.apply(this,arguments)},Be)},count:function(j){var we=0;return ye(j,function(){we++}),we},toArray:function(j){return ye(j,function(we){return we})||[]},only:function(j){if(!V(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ft.Component=ie,ft.Fragment=t,ft.Profiler=a,ft.PureComponent=de,ft.StrictMode=r,ft.Suspense=p,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe,ft.__COMPILER_RUNTIME={__proto__:null,c:function(j){return xe.H.useMemoCache(j)}},ft.cache=function(j){return function(){return j.apply(null,arguments)}},ft.cloneElement=function(j,we,Be){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Ie=z({},j.props),We=j.key,ct=void 0;if(we!=null)for(et in we.ref!==void 0&&(ct=void 0),we.key!==void 0&&(We=""+we.key),we)!Ve.call(we,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&we.ref===void 0||(Ie[et]=we[et]);var et=arguments.length-2;if(et===1)Ie.children=Be;else if(1<et){for(var cn=Array(et),Bt=0;Bt<et;Bt++)cn[Bt]=arguments[Bt+2];Ie.children=cn}return L(j.type,We,void 0,void 0,ct,Ie)},ft.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},ft.createElement=function(j,we,Be){var Ie,We={},ct=null;if(we!=null)for(Ie in we.key!==void 0&&(ct=""+we.key),we)Ve.call(we,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(We[Ie]=we[Ie]);var et=arguments.length-2;if(et===1)We.children=Be;else if(1<et){for(var cn=Array(et),Bt=0;Bt<et;Bt++)cn[Bt]=arguments[Bt+2];We.children=cn}if(j&&j.defaultProps)for(Ie in et=j.defaultProps,et)We[Ie]===void 0&&(We[Ie]=et[Ie]);return L(j,ct,void 0,void 0,null,We)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(j){return{$$typeof:d,render:j}},ft.isValidElement=V,ft.lazy=function(j){return{$$typeof:E,_payload:{_status:-1,_result:j},_init:Le}},ft.memo=function(j,we){return{$$typeof:v,type:j,compare:we===void 0?null:we}},ft.startTransition=function(j){var we=xe.T,Be={};xe.T=Be;try{var Ie=j(),We=xe.S;We!==null&&We(Be,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(gt,Qe)}catch(ct){Qe(ct)}finally{xe.T=we}},ft.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()},ft.use=function(j){return xe.H.use(j)},ft.useActionState=function(j,we,Be){return xe.H.useActionState(j,we,Be)},ft.useCallback=function(j,we){return xe.H.useCallback(j,we)},ft.useContext=function(j){return xe.H.useContext(j)},ft.useDebugValue=function(){},ft.useDeferredValue=function(j,we){return xe.H.useDeferredValue(j,we)},ft.useEffect=function(j,we,Be){var Ie=xe.H;if(typeof Be=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ie.useEffect(j,we)},ft.useId=function(){return xe.H.useId()},ft.useImperativeHandle=function(j,we,Be){return xe.H.useImperativeHandle(j,we,Be)},ft.useInsertionEffect=function(j,we){return xe.H.useInsertionEffect(j,we)},ft.useLayoutEffect=function(j,we){return xe.H.useLayoutEffect(j,we)},ft.useMemo=function(j,we){return xe.H.useMemo(j,we)},ft.useOptimistic=function(j,we){return xe.H.useOptimistic(j,we)},ft.useReducer=function(j,we,Be){return xe.H.useReducer(j,we,Be)},ft.useRef=function(j){return xe.H.useRef(j)},ft.useState=function(j){return xe.H.useState(j)},ft.useSyncExternalStore=function(j,we,Be){return xe.H.useSyncExternalStore(j,we,Be)},ft.useTransition=function(){return xe.H.useTransition()},ft.version="19.1.0",ft}var Gb;function Dy(){return Gb||(Gb=1,Tg.exports=LR()),Tg.exports}var ge=Dy(),wg={exports:{}},qc={},Sg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function UR(){return Qb||(Qb=1,function(i){function e(ye,Le){var Qe=ye.length;ye.push(Le);e:for(;0<Qe;){var gt=Qe-1>>>1,j=ye[gt];if(0<a(j,Le))ye[gt]=Le,ye[Qe]=j,Qe=gt;else break e}}function t(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var Le=ye[0],Qe=ye.pop();if(Qe!==Le){ye[0]=Qe;e:for(var gt=0,j=ye.length,we=j>>>1;gt<we;){var Be=2*(gt+1)-1,Ie=ye[Be],We=Be+1,ct=ye[We];if(0>a(Ie,Qe))We<j&&0>a(ct,Ie)?(ye[gt]=ct,ye[We]=Qe,gt=We):(ye[gt]=Ie,ye[Be]=Qe,gt=Be);else if(We<j&&0>a(ct,Qe))ye[gt]=ct,ye[We]=Qe,gt=We;else break e}}return Le}function a(ye,Le){var Qe=ye.sortIndex-Le.sortIndex;return Qe!==0?Qe:ye.id-Le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],v=[],E=1,I=null,x=3,B=!1,z=!1,le=!1,ie=!1,pe=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function Re(ye){for(var Le=t(v);Le!==null;){if(Le.callback===null)r(v);else if(Le.startTime<=ye)r(v),Le.sortIndex=Le.expirationTime,e(p,Le);else break;Le=t(v)}}function xe(ye){if(le=!1,Re(ye),!z)if(t(p)!==null)z=!0,Ve||(Ve=!0,W());else{var Le=t(v);Le!==null&&Yt(xe,Le.startTime-ye)}}var Ve=!1,L=-1,P=5,V=-1;function q(){return ie?!0:!(i.unstable_now()-V<P)}function Y(){if(ie=!1,Ve){var ye=i.unstable_now();V=ye;var Le=!0;try{e:{z=!1,le&&(le=!1,de(L),L=-1),B=!0;var Qe=x;try{t:{for(Re(ye),I=t(p);I!==null&&!(I.expirationTime>ye&&q());){var gt=I.callback;if(typeof gt=="function"){I.callback=null,x=I.priorityLevel;var j=gt(I.expirationTime<=ye);if(ye=i.unstable_now(),typeof j=="function"){I.callback=j,Re(ye),Le=!0;break t}I===t(p)&&r(p),Re(ye)}else r(p);I=t(p)}if(I!==null)Le=!0;else{var we=t(v);we!==null&&Yt(xe,we.startTime-ye),Le=!1}}break e}finally{I=null,x=Qe,B=!1}Le=void 0}}finally{Le?W():Ve=!1}}}var W;if(typeof ae=="function")W=function(){ae(Y)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,On=k.port2;k.port1.onmessage=Y,W=function(){On.postMessage(null)}}else W=function(){pe(Y,0)};function Yt(ye,Le){L=pe(function(){ye(i.unstable_now())},Le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ye){ye.callback=null},i.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ye?Math.floor(1e3/ye):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(ye){switch(x){case 1:case 2:case 3:var Le=3;break;default:Le=x}var Qe=x;x=Le;try{return ye()}finally{x=Qe}},i.unstable_requestPaint=function(){ie=!0},i.unstable_runWithPriority=function(ye,Le){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Qe=x;x=ye;try{return Le()}finally{x=Qe}},i.unstable_scheduleCallback=function(ye,Le,Qe){var gt=i.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?gt+Qe:gt):Qe=gt,ye){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Qe+j,ye={id:E++,callback:Le,priorityLevel:ye,startTime:Qe,expirationTime:j,sortIndex:-1},Qe>gt?(ye.sortIndex=Qe,e(v,ye),t(p)===null&&ye===t(v)&&(le?(de(L),L=-1):le=!0,Yt(xe,Qe-gt))):(ye.sortIndex=j,e(p,ye),z||B||(z=!0,Ve||(Ve=!0,W()))),ye},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(ye){var Le=x;return function(){var Qe=x;x=Le;try{return ye.apply(this,arguments)}finally{x=Qe}}}}(Ag)),Ag}var Yb;function BR(){return Yb||(Yb=1,Sg.exports=UR()),Sg.exports}var Ig={exports:{}},cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function zR(){if($b)return cr;$b=1;var i=Dy();function e(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)v+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(p,v,E){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:I==null?null:""+I,children:p,containerInfo:v,implementation:E}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cr.createPortal=function(p,v){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(p,v,null,E)},cr.flushSync=function(p){var v=c.T,E=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=v,r.p=E,r.d.f()}},cr.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(p,v))},cr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},cr.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var E=v.as,I=d(E,v.crossOrigin),x=typeof v.integrity=="string"?v.integrity:void 0,B=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;E==="style"?r.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:I,integrity:x,fetchPriority:B}):E==="script"&&r.d.X(p,{crossOrigin:I,integrity:x,fetchPriority:B,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},cr.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var E=d(v.as,v.crossOrigin);r.d.M(p,{crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(p)},cr.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var E=v.as,I=d(E,v.crossOrigin);r.d.L(p,E,{crossOrigin:I,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},cr.preloadModule=function(p,v){if(typeof p=="string")if(v){var E=d(v.as,v.crossOrigin);r.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(p)},cr.requestFormReset=function(p){r.d.r(p)},cr.unstable_batchedUpdates=function(p,v){return p(v)},cr.useFormState=function(p,v,E){return c.H.useFormState(p,v,E)},cr.useFormStatus=function(){return c.H.useHostTransitionStatus()},cr.version="19.1.0",cr}var Xb;function jR(){if(Xb)return Ig.exports;Xb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ig.exports=zR(),Ig.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function qR(){if(Wb)return qc;Wb=1;var i=BR(),e=Dy(),t=jR();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(u(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,l=s;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(l=m.return,l!==null){o=l;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return d(m),n;if(y===l)return d(m),s;y=y.sibling}throw Error(r(188))}if(o.return!==l.return)o=m,l=y;else{for(var S=!1,C=m.child;C;){if(C===o){S=!0,o=m,l=y;break}if(C===l){S=!0,l=m,o=y;break}C=C.sibling}if(!S){for(C=y.child;C;){if(C===o){S=!0,o=y,l=m;break}if(C===l){S=!0,l=y,o=m;break}C=C.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==l)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),de=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function W(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function On(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case ie:return"Profiler";case le:return"StrictMode";case xe:return"Suspense";case Ve:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case B:return"Portal";case ae:return(n.displayName||"Context")+".Provider";case de:return(n._context.displayName||"Context")+".Consumer";case Re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case L:return s=n.displayName||null,s!==null?s:On(n.type)||"Memo";case P:s=n._payload,n=n._init;try{return On(n(s))}catch{}}return null}var Yt=Array.isArray,ye=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe={pending:!1,data:null,method:null,action:null},gt=[],j=-1;function we(n){return{current:n}}function Be(n){0>j||(n.current=gt[j],gt[j]=null,j--)}function Ie(n,s){j++,gt[j]=n.current,n.current=s}var We=we(null),ct=we(null),et=we(null),cn=we(null);function Bt(n,s){switch(Ie(et,s),Ie(ct,n),Ie(We,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?gb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=gb(s),n=yb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Be(We),Ie(We,n)}function He(){Be(We),Be(ct),Be(et)}function ki(n){n.memoizedState!==null&&Ie(cn,n);var s=We.current,o=yb(s,n.type);s!==o&&(Ie(ct,n),Ie(We,o))}function Ar(n){ct.current===n&&(Be(We),Be(ct)),cn.current===n&&(Be(cn),kc._currentValue=Qe)}var Tt=Object.prototype.hasOwnProperty,jr=i.unstable_scheduleCallback,Ns=i.unstable_cancelCallback,qr=i.unstable_shouldYield,Mu=i.unstable_requestPaint,Ir=i.unstable_now,nc=i.unstable_getCurrentPriorityLevel,Ro=i.unstable_ImmediatePriority,as=i.unstable_UserBlockingPriority,Un=i.unstable_NormalPriority,ku=i.unstable_LowPriority,fi=i.unstable_IdlePriority,_a=i.log,os=i.unstable_setDisableYieldValue,Nt=null,vt=null;function Yn(n){if(typeof _a=="function"&&os(n),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Nt,n)}catch{}}var hn=Math.clz32?Math.clz32:pr,ba=Math.log,Ea=Math.LN2;function pr(n){return n>>>=0,n===0?32:31-(ba(n)/Ea|0)|0}var di=256,Li=4194304;function Sn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qe(n,s,o){var l=n.pendingLanes;if(l===0)return 0;var m=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var C=l&134217727;return C!==0?(l=C&~y,l!==0?m=Sn(l):(S&=C,S!==0?m=Sn(S):o||(o=C&~n,o!==0&&(m=Sn(o))))):(C=l&~y,C!==0?m=Sn(C):S!==0?m=Sn(S):o||(o=l&~n,o!==0&&(m=Sn(o)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:m}function Fr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Kr(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function us(){var n=di;return di<<=1,(di&4194048)===0&&(di=256),n}function Ue(){var n=Li;return Li<<=1,(Li&62914560)===0&&(Li=4194304),n}function Hr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function mi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Vs(n,s,o,l,m,y){var S=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var C=n.entanglements,M=n.expirationTimes,se=n.hiddenUpdates;for(o=S&~o;0<o;){var _e=31-hn(o),Te=1<<_e;C[_e]=0,M[_e]=-1;var ue=se[_e];if(ue!==null)for(se[_e]=null,_e=0;_e<ue.length;_e++){var ce=ue[_e];ce!==null&&(ce.lane&=-536870913)}o&=~Te}l!==0&&Gr(n,l,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~s))}function Gr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-hn(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|o&4194090}function Ms(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var l=31-hn(o),m=1<<l;m&s|n[l]&s&&(n[l]|=s),o&=~m}}function ls(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ta(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gr(){var n=Le.p;return n!==0?n:(n=window.event,n===void 0?32:kb(n.type))}function Ui(n,s){var o=Le.p;try{return Le.p=n,s()}finally{Le.p=o}}var zt=Math.random().toString(36).slice(2),Zt="__reactFiber$"+zt,ut="__reactProps$"+zt,Ot="__reactContainer$"+zt,xo="__reactEvents$"+zt,wa="__reactListeners$"+zt,Qr="__reactHandles$"+zt,ks="__reactResources$"+zt,Ls="__reactMarker$"+zt;function $n(n){delete n[Zt],delete n[ut],delete n[xo],delete n[wa],delete n[Qr]}function ir(n){var s=n[Zt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ot]||o[Zt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Eb(n);n!==null;){if(o=n[Zt])return o;n=Eb(n)}return s}n=o,o=n.parentNode}return null}function Pn(n){if(n=n[Zt]||n[Ot]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function yr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Xn(n){var s=n[ks];return s||(s=n[ks]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Vt(n){n[Ls]=!0}var Sa=new Set,Rr={};function xr(n,s){Yr(n,s),Yr(n+"Capture",s)}function Yr(n,s){for(Rr[n]=s,n=0;n<s.length;n++)Sa.add(s[n])}var $t=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pi={},Wn={};function Co(n){return Tt.call(Wn,n)?!0:Tt.call(pi,n)?!1:$t.test(n)?Wn[n]=!0:(pi[n]=!0,!1)}function vr(n,s,o){if(Co(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function _r(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function gn(n,s,o,l){if(l===null)n.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+l)}}var Bi,gi;function yi(n){if(Bi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Bi=s&&s[1]||"",gi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bi+n+gi}var zi=!1;function Us(n,s){if(!n||zi)return"";zi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ce){var ue=ce}Reflect.construct(n,[],Te)}else{try{Te.call()}catch(ce){ue=ce}n.call(Te.prototype)}}else{try{throw Error()}catch(ce){ue=ce}(Te=n())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ce){if(ce&&ue&&typeof ce.stack=="string")return[ce.stack,ue.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),S=y[0],C=y[1];if(S&&C){var M=S.split(`
`),se=C.split(`
`);for(m=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;m<se.length&&!se[m].includes("DetermineComponentFrameRoot");)m++;if(l===M.length||m===se.length)for(l=M.length-1,m=se.length-1;1<=l&&0<=m&&M[l]!==se[m];)m--;for(;1<=l&&0<=m;l--,m--)if(M[l]!==se[m]){if(l!==1||m!==1)do if(l--,m--,0>m||M[l]!==se[m]){var _e=`
`+M[l].replace(" at new "," at ");return n.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",n.displayName)),_e}while(1<=l&&0<=m);break}}}finally{zi=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?yi(o):""}function ht(n){switch(n.tag){case 26:case 27:case 5:return yi(n.type);case 16:return yi("Lazy");case 13:return yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return Us(n.type,!1);case 11:return Us(n.type.render,!1);case 1:return Us(n.type,!0);case 31:return yi("Activity");default:return""}}function Bs(n){try{var s="";do s+=ht(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Bn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Aa(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Mt(n){var s=Aa(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,y=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function vi(n){n._valueTracker||(n._valueTracker=Mt(n))}function ji(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),l="";return n&&(l=Aa(n)?n.checked?"true":"false":n.value),n=l,n!==o?(s.setValue(n),!0):!1}function Cr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Do=/[\n"\\]/g;function en(n){return n.replace(Do,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zn(n,s,o,l,m,y,S,C){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Bn(s)):n.value!==""+Bn(s)&&(n.value=""+Bn(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?$r(n,S,Bn(s)):o!=null?$r(n,S,Bn(o)):l!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+Bn(C):n.removeAttribute("name")}function cs(n,s,o,l,m,y,S,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;o=o!=null?""+Bn(o):"",s=s!=null?""+Bn(s):o,C||s===n.value||(n.value=s),n.defaultValue=s}l=l??m,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=C?n.checked:!!l,n.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function $r(n,s,o){s==="number"&&Cr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function _i(n,s,o,l){if(n=n.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=s.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&l&&(n[o].defaultSelected=!0)}else{for(o=""+Bn(o),s=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,l&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function It(n,s,o){if(s!=null&&(s=""+Bn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Bn(o):""}function hs(n,s,o,l){if(s==null){if(l!=null){if(o!=null)throw Error(r(92));if(Yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),s=o}o=Bn(s),n.defaultValue=o,l=n.textContent,l===o&&l!==""&&l!==null&&(n.value=l)}function Dr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var dt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ia(n,s,o){var l=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,o):typeof o!="number"||o===0||dt.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Oo(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var m in s)l=s[m],s.hasOwnProperty(m)&&o[m]!==l&&Ia(n,m,l)}else for(var y in s)s.hasOwnProperty(y)&&Ia(n,y,s[y])}function Po(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qi(n){return fs.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var jn=null;function br(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bi=null,jt=null;function sr(n){var s=Pn(n);if(s&&(n=s.stateNode)){var o=n[ut]||null;e:switch(n=s.stateNode,s.type){case"input":if(zn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var l=o[s];if(l!==n&&l.form===n.form){var m=l[ut]||null;if(!m)throw Error(r(90));zn(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)l=o[s],l.form===n.form&&ji(l)}break e;case"textarea":It(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&_i(n,!!o.multiple,s,!1)}}}var ar=!1;function ds(n,s,o){if(ar)return n(s,o);ar=!0;try{var l=n(s);return l}finally{if(ar=!1,(bi!==null||jt!==null)&&(qf(),bi&&(s=bi,n=jt,jt=bi=null,sr(s),n)))for(s=0;s<n.length;s++)sr(n[s])}}function Fi(n,s){var o=n.stateNode;if(o===null)return null;var l=o[ut]||null;if(l===null)return null;o=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(An)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Or=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Or=!1}var Pr=null,Ki=null,Xr=null;function Hi(){if(Xr)return Xr;var n,s=Ki,o=s.length,l,m="value"in Pr?Pr.value:Pr.textContent,y=m.length;for(n=0;n<o&&s[n]===m[n];n++);var S=o-n;for(l=1;l<=S&&s[o-l]===m[y-l];l++);return Xr=m.slice(n,1<l?1-l:void 0)}function Nr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Wr(){return!0}function No(){return!1}function tn(n){function s(o,l,m,y,S){this._reactName=o,this._targetInst=m,this.type=l,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(o=n[C],this[C]=o?o(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Wr:No,this.isPropagationStopped=No,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),s}var Ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=tn(Ct),Ei=E({},Ct,{view:0,detail:0}),zs=tn(Ei),ms,xa,Ti,js=E({},Ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ti&&(Ti&&n.type==="mousemove"?(ms=n.screenX-Ti.screenX,xa=n.screenY-Ti.screenY):xa=ms=0,Ti=n),ms)},movementY:function(n){return"movementY"in n?n.movementY:xa}}),or=tn(js),Ca=E({},js,{dataTransfer:0}),Lu=tn(Ca),wi=E({},Ei,{relatedTarget:0}),Gi=tn(wi),ps=E({},Ct,{animationName:0,elapsedTime:0,pseudoElement:0}),qs=tn(ps),Uu=E({},Ct,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qi=tn(Uu),Vo=E({},Ct,{data:0}),Fs=tn(Vo),Yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Da={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $i(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=yn[n])?!!s[n]:!1}function Jr(){return $i}var Mo=E({},Ei,{key:function(n){if(n.key){var s=Yi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Nr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Da[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(n){return n.type==="keypress"?Nr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Nr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xi=tn(Mo),ko=E({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oa=tn(ko),Vr=E({},Ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),Pa=tn(Vr),Si=E({},Ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),Na=tn(Si),Va=E({},js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wi=tn(Va),Nn=E({},Ct,{newState:0,oldState:0}),Lo=tn(Nn),Bu=[9,13,27,32],Mr=An&&"CompositionEvent"in window,h=null;An&&"documentMode"in document&&(h=document.documentMode);var b=An&&"TextEvent"in window&&!h,w=An&&(!Mr||h&&8<h&&11>=h),D=" ",te=!1;function me(n,s){switch(n){case"keyup":return Bu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ne(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _t=!1;function fn(n,s){switch(n){case"compositionend":return Ne(s);case"keypress":return s.which!==32?null:(te=!0,D);case"textInput":return n=s.data,n===D&&te?null:n;default:return null}}function wt(n,s){if(_t)return n==="compositionend"||!Mr&&me(n,s)?(n=Hi(),Xr=Ki=Pr=null,_t=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!vn[n.type]:s==="textarea"}function Ai(n,s,o,l){bi?jt?jt.push(l):jt=[l]:bi=l,s=Yf(s,"onChange"),0<s.length&&(o=new Ra("onChange","change",null,o,l),n.push({event:o,listeners:s}))}var In=null,Ii=null;function Uo(n){hb(n,0)}function zu(n){var s=yr(n);if(ji(s))return n}function Bo(n,s){if(n==="change")return s}var Ri=!1;if(An){var Jt;if(An){var Ma="oninput"in document;if(!Ma){var Er=document.createElement("div");Er.setAttribute("oninput","return;"),Ma=typeof Er.oninput=="function"}Jt=Ma}else Jt=!1;Ri=Jt&&(!document.documentMode||9<document.documentMode)}function hf(){In&&(In.detachEvent("onpropertychange",ju),Ii=In=null)}function ju(n){if(n.propertyName==="value"&&zu(Ii)){var s=[];Ai(s,Ii,n,br(n)),ds(Uo,s)}}function ff(n,s,o){n==="focusin"?(hf(),In=s,Ii=o,In.attachEvent("onpropertychange",ju)):n==="focusout"&&hf()}function Ks(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zu(Ii)}function rc(n,s){if(n==="click")return zu(s)}function ka(n,s){if(n==="input"||n==="change")return zu(s)}function gs(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ur=typeof Object.is=="function"?Object.is:gs;function f(n,s){if(ur(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),l=Object.keys(s);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var m=o[l];if(!Tt.call(s,m)||!ur(n[m],s[m]))return!1}return!0}function g(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _(n,s){var o=g(n);n=0;for(var l;o;){if(o.nodeType===3){if(l=n+o.textContent.length,n<=s&&l>=s)return{node:o,offset:s-n};n=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=g(o)}}function T(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?T(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function A(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Cr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Cr(n.document)}return s}function R(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var O=An&&"documentMode"in document&&11>=document.documentMode,N=null,K=null,G=null,X=!1;function U(n,s,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;X||N==null||N!==Cr(l)||(l=N,"selectionStart"in l&&R(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),G&&f(G,l)||(G=l,l=Yf(K,"onSelect"),0<l.length&&(s=new Ra("onSelect","select",null,s,o),n.push({event:s,listeners:l}),s.target=N)))}function Z(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var F={animationend:Z("Animation","AnimationEnd"),animationiteration:Z("Animation","AnimationIteration"),animationstart:Z("Animation","AnimationStart"),transitionrun:Z("Transition","TransitionRun"),transitionstart:Z("Transition","TransitionStart"),transitioncancel:Z("Transition","TransitionCancel"),transitionend:Z("Transition","TransitionEnd")},$={},ee={};An&&(ee=document.createElement("div").style,"AnimationEvent"in window||(delete F.animationend.animation,delete F.animationiteration.animation,delete F.animationstart.animation),"TransitionEvent"in window||delete F.transitionend.transition);function Q(n){if($[n])return $[n];if(!F[n])return n;var s=F[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in ee)return $[n]=s[o];return n}var oe=Q("animationend"),he=Q("animationiteration"),fe=Q("animationstart"),ve=Q("transitionrun"),Oe=Q("transitionstart"),Me=Q("transitioncancel"),Ce=Q("transitionend"),Pe=new Map,ke="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ke.push("scrollEnd");function De(n,s){Pe.set(n,s),xr(s,[n])}var je=new WeakMap;function Je(n,s){if(typeof n=="object"&&n!==null){var o=je.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Bs(s)},je.set(n,s),s)}return{value:n,source:s,stack:Bs(s)}}var tt=[],lt=0,Zn=0;function st(){for(var n=lt,s=Zn=lt=0;s<n;){var o=tt[s];tt[s++]=null;var l=tt[s];tt[s++]=null;var m=tt[s];tt[s++]=null;var y=tt[s];if(tt[s++]=null,l!==null&&m!==null){var S=l.pending;S===null?m.next=m:(m.next=S.next,S.next=m),l.pending=m}y!==0&&Fn(o,m,y)}}function _n(n,s,o,l){tt[lt++]=n,tt[lt++]=s,tt[lt++]=o,tt[lt++]=l,Zn|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Rn(n,s,o,l){return _n(n,s,o,l),xi(n)}function Ji(n,s){return _n(n,null,null,s),xi(n)}function Fn(n,s,o){n.lanes|=o;var l=n.alternate;l!==null&&(l.lanes|=o);for(var m=!1,y=n.return;y!==null;)y.childLanes|=o,l=y.alternate,l!==null&&(l.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&s!==null&&(m=31-hn(o),n=y.hiddenUpdates,l=n[m],l===null?n[m]=[s]:l.push(s),s.lane=o|536870912),y):null}function xi(n){if(50<xc)throw xc=0,Hp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ys={};function yI(n,s,o,l){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(n,s,o,l){return new yI(n,s,o,l)}function zm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hs(n,s){var o=n.alternate;return o===null?(o=Zr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Xv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function df(n,s,o,l,m,y){var S=0;if(l=n,typeof n=="function")zm(n)&&(S=1);else if(typeof n=="string")S=_R(n,o,We.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Zr(31,o,s,m),n.elementType=V,n.lanes=y,n;case z:return zo(o.children,m,y,s);case le:S=8,m|=24;break;case ie:return n=Zr(12,o,s,m|2),n.elementType=ie,n.lanes=y,n;case xe:return n=Zr(13,o,s,m),n.elementType=xe,n.lanes=y,n;case Ve:return n=Zr(19,o,s,m),n.elementType=Ve,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pe:case ae:S=10;break e;case de:S=9;break e;case Re:S=11;break e;case L:S=14;break e;case P:S=16,l=null;break e}S=29,o=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Zr(S,o,s,m),s.elementType=n,s.type=l,s.lanes=y,s}function zo(n,s,o,l){return n=Zr(7,n,l,s),n.lanes=o,n}function jm(n,s,o){return n=Zr(6,n,null,s),n.lanes=o,n}function qm(n,s,o){return s=Zr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var qu=[],Fu=0,mf=null,pf=0,Ci=[],Di=0,jo=null,Gs=1,Qs="";function qo(n,s){qu[Fu++]=pf,qu[Fu++]=mf,mf=n,pf=s}function Wv(n,s,o){Ci[Di++]=Gs,Ci[Di++]=Qs,Ci[Di++]=jo,jo=n;var l=Gs;n=Qs;var m=32-hn(l)-1;l&=~(1<<m),o+=1;var y=32-hn(s)+m;if(30<y){var S=m-m%5;y=(l&(1<<S)-1).toString(32),l>>=S,m-=S,Gs=1<<32-hn(s)+m|o<<m|l,Qs=y+n}else Gs=1<<y|o<<m|l,Qs=n}function Fm(n){n.return!==null&&(qo(n,1),Wv(n,1,0))}function Km(n){for(;n===mf;)mf=qu[--Fu],qu[Fu]=null,pf=qu[--Fu],qu[Fu]=null;for(;n===jo;)jo=Ci[--Di],Ci[Di]=null,Qs=Ci[--Di],Ci[Di]=null,Gs=Ci[--Di],Ci[Di]=null}var Tr=null,dn=null,Pt=!1,Fo=null,vs=!1,Hm=Error(r(519));function Ko(n){var s=Error(r(418,""));throw ac(Je(s,n)),Hm}function Jv(n){var s=n.stateNode,o=n.type,l=n.memoizedProps;switch(s[Zt]=n,s[ut]=l,o){case"dialog":Et("cancel",s),Et("close",s);break;case"iframe":case"object":case"embed":Et("load",s);break;case"video":case"audio":for(o=0;o<Dc.length;o++)Et(Dc[o],s);break;case"source":Et("error",s);break;case"img":case"image":case"link":Et("error",s),Et("load",s);break;case"details":Et("toggle",s);break;case"input":Et("invalid",s),cs(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),vi(s);break;case"select":Et("invalid",s);break;case"textarea":Et("invalid",s),hs(s,l.value,l.defaultValue,l.children),vi(s)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||l.suppressHydrationWarning===!0||pb(s.textContent,o)?(l.popover!=null&&(Et("beforetoggle",s),Et("toggle",s)),l.onScroll!=null&&Et("scroll",s),l.onScrollEnd!=null&&Et("scrollend",s),l.onClick!=null&&(s.onclick=$f),s=!0):s=!1,s||Ko(n)}function Zv(n){for(Tr=n.return;Tr;)switch(Tr.tag){case 5:case 13:vs=!1;return;case 27:case 3:vs=!0;return;default:Tr=Tr.return}}function ic(n){if(n!==Tr)return!1;if(!Pt)return Zv(n),Pt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||og(n.type,n.memoizedProps)),o=!o),o&&dn&&Ko(n),Zv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){dn=es(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}dn=null}}else s===27?(s=dn,Ja(n.type)?(n=hg,hg=null,dn=n):dn=s):dn=Tr?es(n.stateNode.nextSibling):null;return!0}function sc(){dn=Tr=null,Pt=!1}function e_(){var n=Fo;return n!==null&&(Ur===null?Ur=n:Ur.push.apply(Ur,n),Fo=null),n}function ac(n){Fo===null?Fo=[n]:Fo.push(n)}var Gm=we(null),Ho=null,Ys=null;function La(n,s,o){Ie(Gm,s._currentValue),s._currentValue=o}function $s(n){n._currentValue=Gm.current,Be(Gm)}function Qm(n,s,o){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===o)break;n=n.return}}function Ym(n,s,o,l){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=m;for(var M=0;M<s.length;M++)if(C.context===s[M]){y.lanes|=o,C=y.alternate,C!==null&&(C.lanes|=o),Qm(y.return,o,n),l||(S=null);break e}y=C.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),Qm(S,o,n),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===n){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function oc(n,s,o,l){n=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var C=m.type;ur(m.pendingProps.value,S.value)||(n!==null?n.push(C):n=[C])}}else if(m===cn.current){if(S=m.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(kc):n=[kc])}m=m.return}n!==null&&Ym(s,n,o,l),s.flags|=262144}function gf(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Go(n){Ho=n,Ys=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lr(n){return t_(Ho,n)}function yf(n,s){return Ho===null&&Go(n),t_(n,s)}function t_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ys===null){if(n===null)throw Error(r(308));Ys=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ys=Ys.next=s;return o}var vI=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},_I=i.unstable_scheduleCallback,bI=i.unstable_NormalPriority,Vn={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $m(){return{controller:new vI,data:new Map,refCount:0}}function uc(n){n.refCount--,n.refCount===0&&_I(bI,function(){n.controller.abort()})}var lc=null,Xm=0,Ku=0,Hu=null;function EI(n,s){if(lc===null){var o=lc=[];Xm=0,Ku=Jp(),Hu={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Xm++,s.then(n_,n_),s}function n_(){if(--Xm===0&&lc!==null){Hu!==null&&(Hu.status="fulfilled");var n=lc;lc=null,Ku=0,Hu=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function TI(n,s){var o=[],l={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(l.status="rejected",l.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),l}var r_=ye.S;ye.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&EI(n,s),r_!==null&&r_(n,s)};var Qo=we(null);function Wm(){var n=Qo.current;return n!==null?n:Xt.pooledCache}function vf(n,s){s===null?Ie(Qo,Qo.current):Ie(Qo,s.pool)}function i_(){var n=Wm();return n===null?null:{parent:Vn._currentValue,pool:n}}var cc=Error(r(460)),s_=Error(r(474)),_f=Error(r(542)),Jm={then:function(){}};function a_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bf(){}function o_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(bf,bf),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,l_(n),n;default:if(typeof s.status=="string")s.then(bf,bf);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=l}},function(l){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,l_(n),n}throw hc=s,cc}}var hc=null;function u_(){if(hc===null)throw Error(r(459));var n=hc;return hc=null,n}function l_(n){if(n===cc||n===_f)throw Error(r(483))}var Ua=!1;function Zm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ep(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ba(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function za(n,s,o){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(kt&2)!==0){var m=l.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),l.pending=s,s=xi(n),Fn(n,null,o),s}return _n(n,l,s,o),xi(n)}function fc(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,o|=l,s.lanes=o,Ms(n,o)}}function tp(n,s){var o=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?m=y=s:y=y.next=s}else m=y=s;o={baseState:l.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var np=!1;function dc(){if(np){var n=Hu;if(n!==null)throw n}}function mc(n,s,o,l){np=!1;var m=n.updateQueue;Ua=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var M=C,se=M.next;M.next=null,S===null?y=se:S.next=se,S=M;var _e=n.alternate;_e!==null&&(_e=_e.updateQueue,C=_e.lastBaseUpdate,C!==S&&(C===null?_e.firstBaseUpdate=se:C.next=se,_e.lastBaseUpdate=M))}if(y!==null){var Te=m.baseState;S=0,_e=se=M=null,C=y;do{var ue=C.lane&-536870913,ce=ue!==C.lane;if(ce?(Rt&ue)===ue:(l&ue)===ue){ue!==0&&ue===Ku&&(np=!0),_e!==null&&(_e=_e.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var at=n,nt=C;ue=s;var Kt=o;switch(nt.tag){case 1:if(at=nt.payload,typeof at=="function"){Te=at.call(Kt,Te,ue);break e}Te=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=nt.payload,ue=typeof at=="function"?at.call(Kt,Te,ue):at,ue==null)break e;Te=E({},Te,ue);break e;case 2:Ua=!0}}ue=C.callback,ue!==null&&(n.flags|=64,ce&&(n.flags|=8192),ce=m.callbacks,ce===null?m.callbacks=[ue]:ce.push(ue))}else ce={lane:ue,tag:C.tag,payload:C.payload,callback:C.callback,next:null},_e===null?(se=_e=ce,M=Te):_e=_e.next=ce,S|=ue;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;ce=C,C=ce.next,ce.next=null,m.lastBaseUpdate=ce,m.shared.pending=null}}while(!0);_e===null&&(M=Te),m.baseState=M,m.firstBaseUpdate=se,m.lastBaseUpdate=_e,y===null&&(m.shared.lanes=0),Ya|=S,n.lanes=S,n.memoizedState=Te}}function c_(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function h_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)c_(o[n],s)}var Gu=we(null),Ef=we(0);function f_(n,s){n=na,Ie(Ef,n),Ie(Gu,s),na=n|s.baseLanes}function rp(){Ie(Ef,na),Ie(Gu,Gu.current)}function ip(){na=Ef.current,Be(Gu),Be(Ef)}var ja=0,mt=null,qt=null,xn=null,Tf=!1,Qu=!1,Yo=!1,wf=0,pc=0,Yu=null,wI=0;function bn(){throw Error(r(321))}function sp(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ur(n[o],s[o]))return!1;return!0}function ap(n,s,o,l,m,y){return ja=y,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ye.H=n===null||n.memoizedState===null?$_:X_,Yo=!1,y=o(l,m),Yo=!1,Qu&&(y=m_(s,o,l,m)),d_(n),y}function d_(n){ye.H=Cf;var s=qt!==null&&qt.next!==null;if(ja=0,xn=qt=mt=null,Tf=!1,pc=0,Yu=null,s)throw Error(r(300));n===null||Kn||(n=n.dependencies,n!==null&&gf(n)&&(Kn=!0))}function m_(n,s,o,l){mt=n;var m=0;do{if(Qu&&(Yu=null),pc=0,Qu=!1,25<=m)throw Error(r(301));if(m+=1,xn=qt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ye.H=DI,y=s(o,l)}while(Qu);return y}function SI(){var n=ye.H,s=n.useState()[0];return s=typeof s.then=="function"?gc(s):s,n=n.useState()[0],(qt!==null?qt.memoizedState:null)!==n&&(mt.flags|=1024),s}function op(){var n=wf!==0;return wf=0,n}function up(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function lp(n){if(Tf){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Tf=!1}ja=0,xn=qt=mt=null,Qu=!1,pc=wf=0,Yu=null}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?mt.memoizedState=xn=n:xn=xn.next=n,xn}function Cn(){if(qt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var s=xn===null?mt.memoizedState:xn.next;if(s!==null)xn=s,qt=n;else{if(n===null)throw mt.alternate===null?Error(r(467)):Error(r(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},xn===null?mt.memoizedState=xn=n:xn=xn.next=n}return xn}function cp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(n){var s=pc;return pc+=1,Yu===null&&(Yu=[]),n=o_(Yu,n,s),s=mt,(xn===null?s.memoizedState:xn.next)===null&&(s=s.alternate,ye.H=s===null||s.memoizedState===null?$_:X_),n}function Sf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return gc(n);if(n.$$typeof===ae)return lr(n)}throw Error(r(438,String(n)))}function hp(n){var s=null,o=mt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var l=mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=cp(),mt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),l=0;l<n;l++)o[l]=q;return s.index++,o}function Xs(n,s){return typeof s=="function"?s(n):s}function Af(n){var s=Cn();return fp(s,qt,n)}function fp(n,s,o){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=o;var m=n.baseQueue,y=l.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}s.baseQueue=m=y,l.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{s=m.next;var C=S=null,M=null,se=s,_e=!1;do{var Te=se.lane&-536870913;if(Te!==se.lane?(Rt&Te)===Te:(ja&Te)===Te){var ue=se.revertLane;if(ue===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Te===Ku&&(_e=!0);else if((ja&ue)===ue){se=se.next,ue===Ku&&(_e=!0);continue}else Te={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},M===null?(C=M=Te,S=y):M=M.next=Te,mt.lanes|=ue,Ya|=ue;Te=se.action,Yo&&o(y,Te),y=se.hasEagerState?se.eagerState:o(y,Te)}else ue={lane:Te,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},M===null?(C=M=ue,S=y):M=M.next=ue,mt.lanes|=Te,Ya|=Te;se=se.next}while(se!==null&&se!==s);if(M===null?S=y:M.next=C,!ur(y,n.memoizedState)&&(Kn=!0,_e&&(o=Hu,o!==null)))throw o;n.memoizedState=y,n.baseState=S,n.baseQueue=M,l.lastRenderedState=y}return m===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function dp(n){var s=Cn(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var l=o.dispatch,m=o.pending,y=s.memoizedState;if(m!==null){o.pending=null;var S=m=m.next;do y=n(y,S.action),S=S.next;while(S!==m);ur(y,s.memoizedState)||(Kn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,l]}function p_(n,s,o){var l=mt,m=Cn(),y=Pt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=s();var S=!ur((qt||m).memoizedState,o);S&&(m.memoizedState=o,Kn=!0),m=m.queue;var C=v_.bind(null,l,m,n);if(yc(2048,8,C,[n]),m.getSnapshot!==s||S||xn!==null&&xn.memoizedState.tag&1){if(l.flags|=2048,$u(9,If(),y_.bind(null,l,m,o,s),null),Xt===null)throw Error(r(349));y||(ja&124)!==0||g_(l,s,o)}return o}function g_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=mt.updateQueue,s===null?(s=cp(),mt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function y_(n,s,o,l){s.value=o,s.getSnapshot=l,__(s)&&b_(n)}function v_(n,s,o){return o(function(){__(s)&&b_(n)})}function __(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ur(n,o)}catch{return!0}}function b_(n){var s=Ji(n,2);s!==null&&ii(s,n,2)}function mp(n){var s=kr();if(typeof n=="function"){var o=n;if(n=o(),Yo){Yn(!0);try{o()}finally{Yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:n},s}function E_(n,s,o,l){return n.baseState=o,fp(n,qt,typeof l=="function"?l:Xs)}function AI(n,s,o,l,m){if(xf(n))throw Error(r(485));if(n=s.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};ye.T!==null?o(!0):y.isTransition=!1,l(y),o=s.pending,o===null?(y.next=s.pending=y,T_(s,y)):(y.next=o.next,s.pending=o.next=y)}}function T_(n,s){var o=s.action,l=s.payload,m=n.state;if(s.isTransition){var y=ye.T,S={};ye.T=S;try{var C=o(m,l),M=ye.S;M!==null&&M(S,C),w_(n,s,C)}catch(se){pp(n,s,se)}finally{ye.T=y}}else try{y=o(m,l),w_(n,s,y)}catch(se){pp(n,s,se)}}function w_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){S_(n,s,l)},function(l){return pp(n,s,l)}):S_(n,s,o)}function S_(n,s,o){s.status="fulfilled",s.value=o,A_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,T_(n,o)))}function pp(n,s,o){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=o,A_(s),s=s.next;while(s!==l)}n.action=null}function A_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function I_(n,s){return s}function R_(n,s){if(Pt){var o=Xt.formState;if(o!==null){e:{var l=mt;if(Pt){if(dn){t:{for(var m=dn,y=vs;m.nodeType!==8;){if(!y){m=null;break t}if(m=es(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){dn=es(m.nextSibling),l=m.data==="F!";break e}}Ko(l)}l=!1}l&&(s=o[0])}}return o=kr(),o.memoizedState=o.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I_,lastRenderedState:s},o.queue=l,o=G_.bind(null,mt,l),l.dispatch=o,l=mp(!1),y=bp.bind(null,mt,!1,l.queue),l=kr(),m={state:s,dispatch:null,action:n,pending:null},l.queue=m,o=AI.bind(null,mt,m,y,o),m.dispatch=o,l.memoizedState=n,[s,o,!1]}function x_(n){var s=Cn();return C_(s,qt,n)}function C_(n,s,o){if(s=fp(n,s,I_)[0],n=Af(Xs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=gc(s)}catch(S){throw S===cc?_f:S}else l=s;s=Cn();var m=s.queue,y=m.dispatch;return o!==s.memoizedState&&(mt.flags|=2048,$u(9,If(),II.bind(null,m,o),null)),[l,y,n]}function II(n,s){n.action=s}function D_(n){var s=Cn(),o=qt;if(o!==null)return C_(s,o,n);Cn(),s=s.memoizedState,o=Cn();var l=o.queue.dispatch;return o.memoizedState=n,[s,l,!1]}function $u(n,s,o,l){return n={tag:n,create:o,deps:l,inst:s,next:null},s=mt.updateQueue,s===null&&(s=cp(),mt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(l=o.next,o.next=n,n.next=l,s.lastEffect=n),n}function If(){return{destroy:void 0,resource:void 0}}function O_(){return Cn().memoizedState}function Rf(n,s,o,l){var m=kr();l=l===void 0?null:l,mt.flags|=n,m.memoizedState=$u(1|s,If(),o,l)}function yc(n,s,o,l){var m=Cn();l=l===void 0?null:l;var y=m.memoizedState.inst;qt!==null&&l!==null&&sp(l,qt.memoizedState.deps)?m.memoizedState=$u(s,y,o,l):(mt.flags|=n,m.memoizedState=$u(1|s,y,o,l))}function P_(n,s){Rf(8390656,8,n,s)}function N_(n,s){yc(2048,8,n,s)}function V_(n,s){return yc(4,2,n,s)}function M_(n,s){return yc(4,4,n,s)}function k_(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function L_(n,s,o){o=o!=null?o.concat([n]):null,yc(4,4,k_.bind(null,s,n),o)}function gp(){}function U_(n,s){var o=Cn();s=s===void 0?null:s;var l=o.memoizedState;return s!==null&&sp(s,l[1])?l[0]:(o.memoizedState=[n,s],n)}function B_(n,s){var o=Cn();s=s===void 0?null:s;var l=o.memoizedState;if(s!==null&&sp(s,l[1]))return l[0];if(l=n(),Yo){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,s],l}function yp(n,s,o){return o===void 0||(ja&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=q0(),mt.lanes|=n,Ya|=n,o)}function z_(n,s,o,l){return ur(o,s)?o:Gu.current!==null?(n=yp(n,o,l),ur(n,s)||(Kn=!0),n):(ja&42)===0?(Kn=!0,n.memoizedState=o):(n=q0(),mt.lanes|=n,Ya|=n,s)}function j_(n,s,o,l,m){var y=Le.p;Le.p=y!==0&&8>y?y:8;var S=ye.T,C={};ye.T=C,bp(n,!1,s,o);try{var M=m(),se=ye.S;if(se!==null&&se(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var _e=TI(M,l);vc(n,s,_e,ri(n))}else vc(n,s,l,ri(n))}catch(Te){vc(n,s,{then:function(){},status:"rejected",reason:Te},ri())}finally{Le.p=y,ye.T=S}}function RI(){}function vp(n,s,o,l){if(n.tag!==5)throw Error(r(476));var m=q_(n).queue;j_(n,m,s,Qe,o===null?RI:function(){return F_(n),o(l)})}function q_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Qe,baseState:Qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:Qe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function F_(n){var s=q_(n).next.queue;vc(n,s,{},ri())}function _p(){return lr(kc)}function K_(){return Cn().memoizedState}function H_(){return Cn().memoizedState}function xI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=ri();n=Ba(o);var l=za(s,n,o);l!==null&&(ii(l,s,o),fc(l,s,o)),s={cache:$m()},n.payload=s;return}s=s.return}}function CI(n,s,o){var l=ri();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},xf(n)?Q_(s,o):(o=Rn(n,s,o,l),o!==null&&(ii(o,n,l),Y_(o,s,l)))}function G_(n,s,o){var l=ri();vc(n,s,o,l)}function vc(n,s,o,l){var m={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(xf(n))Q_(s,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,C=y(S,o);if(m.hasEagerState=!0,m.eagerState=C,ur(C,S))return _n(n,s,m,0),Xt===null&&st(),!1}catch{}finally{}if(o=Rn(n,s,m,l),o!==null)return ii(o,n,l),Y_(o,s,l),!0}return!1}function bp(n,s,o,l){if(l={lane:2,revertLane:Jp(),action:l,hasEagerState:!1,eagerState:null,next:null},xf(n)){if(s)throw Error(r(479))}else s=Rn(n,o,l,2),s!==null&&ii(s,n,2)}function xf(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function Q_(n,s){Qu=Tf=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Y_(n,s,o){if((o&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,o|=l,s.lanes=o,Ms(n,o)}}var Cf={readContext:lr,use:Sf,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn},$_={readContext:lr,use:Sf,useCallback:function(n,s){return kr().memoizedState=[n,s===void 0?null:s],n},useContext:lr,useEffect:P_,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Rf(4194308,4,k_.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Rf(4194308,4,n,s)},useInsertionEffect:function(n,s){Rf(4,2,n,s)},useMemo:function(n,s){var o=kr();s=s===void 0?null:s;var l=n();if(Yo){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,s],l},useReducer:function(n,s,o){var l=kr();if(o!==void 0){var m=o(s);if(Yo){Yn(!0);try{o(s)}finally{Yn(!1)}}}else m=s;return l.memoizedState=l.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},l.queue=n,n=n.dispatch=CI.bind(null,mt,n),[l.memoizedState,n]},useRef:function(n){var s=kr();return n={current:n},s.memoizedState=n},useState:function(n){n=mp(n);var s=n.queue,o=G_.bind(null,mt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:gp,useDeferredValue:function(n,s){var o=kr();return yp(o,n,s)},useTransition:function(){var n=mp(!1);return n=j_.bind(null,mt,n.queue,!0,!1),kr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var l=mt,m=kr();if(Pt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Xt===null)throw Error(r(349));(Rt&124)!==0||g_(l,s,o)}m.memoizedState=o;var y={value:o,getSnapshot:s};return m.queue=y,P_(v_.bind(null,l,y,n),[n]),l.flags|=2048,$u(9,If(),y_.bind(null,l,y,o,s),null),o},useId:function(){var n=kr(),s=Xt.identifierPrefix;if(Pt){var o=Qs,l=Gs;o=(l&~(1<<32-hn(l)-1)).toString(32)+o,s=""+s+"R"+o,o=wf++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=wI++,s=""+s+"r"+o.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:_p,useFormState:R_,useActionState:R_,useOptimistic:function(n){var s=kr();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=bp.bind(null,mt,!0,o),o.dispatch=s,[n,s]},useMemoCache:hp,useCacheRefresh:function(){return kr().memoizedState=xI.bind(null,mt)}},X_={readContext:lr,use:Sf,useCallback:U_,useContext:lr,useEffect:N_,useImperativeHandle:L_,useInsertionEffect:V_,useLayoutEffect:M_,useMemo:B_,useReducer:Af,useRef:O_,useState:function(){return Af(Xs)},useDebugValue:gp,useDeferredValue:function(n,s){var o=Cn();return z_(o,qt.memoizedState,n,s)},useTransition:function(){var n=Af(Xs)[0],s=Cn().memoizedState;return[typeof n=="boolean"?n:gc(n),s]},useSyncExternalStore:p_,useId:K_,useHostTransitionStatus:_p,useFormState:x_,useActionState:x_,useOptimistic:function(n,s){var o=Cn();return E_(o,qt,n,s)},useMemoCache:hp,useCacheRefresh:H_},DI={readContext:lr,use:Sf,useCallback:U_,useContext:lr,useEffect:N_,useImperativeHandle:L_,useInsertionEffect:V_,useLayoutEffect:M_,useMemo:B_,useReducer:dp,useRef:O_,useState:function(){return dp(Xs)},useDebugValue:gp,useDeferredValue:function(n,s){var o=Cn();return qt===null?yp(o,n,s):z_(o,qt.memoizedState,n,s)},useTransition:function(){var n=dp(Xs)[0],s=Cn().memoizedState;return[typeof n=="boolean"?n:gc(n),s]},useSyncExternalStore:p_,useId:K_,useHostTransitionStatus:_p,useFormState:D_,useActionState:D_,useOptimistic:function(n,s){var o=Cn();return qt!==null?E_(o,qt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hp,useCacheRefresh:H_},Xu=null,_c=0;function Df(n){var s=_c;return _c+=1,Xu===null&&(Xu=[]),o_(Xu,n,s)}function bc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Of(n,s){throw s.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function W_(n){var s=n._init;return s(n._payload)}function J_(n){function s(J,H){if(n){var re=J.deletions;re===null?(J.deletions=[H],J.flags|=16):re.push(H)}}function o(J,H){if(!n)return null;for(;H!==null;)s(J,H),H=H.sibling;return null}function l(J){for(var H=new Map;J!==null;)J.key!==null?H.set(J.key,J):H.set(J.index,J),J=J.sibling;return H}function m(J,H){return J=Hs(J,H),J.index=0,J.sibling=null,J}function y(J,H,re){return J.index=re,n?(re=J.alternate,re!==null?(re=re.index,re<H?(J.flags|=67108866,H):re):(J.flags|=67108866,H)):(J.flags|=1048576,H)}function S(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function C(J,H,re,be){return H===null||H.tag!==6?(H=jm(re,J.mode,be),H.return=J,H):(H=m(H,re),H.return=J,H)}function M(J,H,re,be){var Ge=re.type;return Ge===z?_e(J,H,re.props.children,be,re.key):H!==null&&(H.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===P&&W_(Ge)===H.type)?(H=m(H,re.props),bc(H,re),H.return=J,H):(H=df(re.type,re.key,re.props,null,J.mode,be),bc(H,re),H.return=J,H)}function se(J,H,re,be){return H===null||H.tag!==4||H.stateNode.containerInfo!==re.containerInfo||H.stateNode.implementation!==re.implementation?(H=qm(re,J.mode,be),H.return=J,H):(H=m(H,re.children||[]),H.return=J,H)}function _e(J,H,re,be,Ge){return H===null||H.tag!==7?(H=zo(re,J.mode,be,Ge),H.return=J,H):(H=m(H,re),H.return=J,H)}function Te(J,H,re){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=jm(""+H,J.mode,re),H.return=J,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return re=df(H.type,H.key,H.props,null,J.mode,re),bc(re,H),re.return=J,re;case B:return H=qm(H,J.mode,re),H.return=J,H;case P:var be=H._init;return H=be(H._payload),Te(J,H,re)}if(Yt(H)||W(H))return H=zo(H,J.mode,re,null),H.return=J,H;if(typeof H.then=="function")return Te(J,Df(H),re);if(H.$$typeof===ae)return Te(J,yf(J,H),re);Of(J,H)}return null}function ue(J,H,re,be){var Ge=H!==null?H.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ge!==null?null:C(J,H,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return re.key===Ge?M(J,H,re,be):null;case B:return re.key===Ge?se(J,H,re,be):null;case P:return Ge=re._init,re=Ge(re._payload),ue(J,H,re,be)}if(Yt(re)||W(re))return Ge!==null?null:_e(J,H,re,be,null);if(typeof re.then=="function")return ue(J,H,Df(re),be);if(re.$$typeof===ae)return ue(J,H,yf(J,re),be);Of(J,re)}return null}function ce(J,H,re,be,Ge){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return J=J.get(re)||null,C(H,J,""+be,Ge);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case x:return J=J.get(be.key===null?re:be.key)||null,M(H,J,be,Ge);case B:return J=J.get(be.key===null?re:be.key)||null,se(H,J,be,Ge);case P:var yt=be._init;return be=yt(be._payload),ce(J,H,re,be,Ge)}if(Yt(be)||W(be))return J=J.get(re)||null,_e(H,J,be,Ge,null);if(typeof be.then=="function")return ce(J,H,re,Df(be),Ge);if(be.$$typeof===ae)return ce(J,H,re,yf(H,be),Ge);Of(H,be)}return null}function at(J,H,re,be){for(var Ge=null,yt=null,Xe=H,rt=H=0,Gn=null;Xe!==null&&rt<re.length;rt++){Xe.index>rt?(Gn=Xe,Xe=null):Gn=Xe.sibling;var Dt=ue(J,Xe,re[rt],be);if(Dt===null){Xe===null&&(Xe=Gn);break}n&&Xe&&Dt.alternate===null&&s(J,Xe),H=y(Dt,H,rt),yt===null?Ge=Dt:yt.sibling=Dt,yt=Dt,Xe=Gn}if(rt===re.length)return o(J,Xe),Pt&&qo(J,rt),Ge;if(Xe===null){for(;rt<re.length;rt++)Xe=Te(J,re[rt],be),Xe!==null&&(H=y(Xe,H,rt),yt===null?Ge=Xe:yt.sibling=Xe,yt=Xe);return Pt&&qo(J,rt),Ge}for(Xe=l(Xe);rt<re.length;rt++)Gn=ce(Xe,J,rt,re[rt],be),Gn!==null&&(n&&Gn.alternate!==null&&Xe.delete(Gn.key===null?rt:Gn.key),H=y(Gn,H,rt),yt===null?Ge=Gn:yt.sibling=Gn,yt=Gn);return n&&Xe.forEach(function(ro){return s(J,ro)}),Pt&&qo(J,rt),Ge}function nt(J,H,re,be){if(re==null)throw Error(r(151));for(var Ge=null,yt=null,Xe=H,rt=H=0,Gn=null,Dt=re.next();Xe!==null&&!Dt.done;rt++,Dt=re.next()){Xe.index>rt?(Gn=Xe,Xe=null):Gn=Xe.sibling;var ro=ue(J,Xe,Dt.value,be);if(ro===null){Xe===null&&(Xe=Gn);break}n&&Xe&&ro.alternate===null&&s(J,Xe),H=y(ro,H,rt),yt===null?Ge=ro:yt.sibling=ro,yt=ro,Xe=Gn}if(Dt.done)return o(J,Xe),Pt&&qo(J,rt),Ge;if(Xe===null){for(;!Dt.done;rt++,Dt=re.next())Dt=Te(J,Dt.value,be),Dt!==null&&(H=y(Dt,H,rt),yt===null?Ge=Dt:yt.sibling=Dt,yt=Dt);return Pt&&qo(J,rt),Ge}for(Xe=l(Xe);!Dt.done;rt++,Dt=re.next())Dt=ce(Xe,J,rt,Dt.value,be),Dt!==null&&(n&&Dt.alternate!==null&&Xe.delete(Dt.key===null?rt:Dt.key),H=y(Dt,H,rt),yt===null?Ge=Dt:yt.sibling=Dt,yt=Dt);return n&&Xe.forEach(function(OR){return s(J,OR)}),Pt&&qo(J,rt),Ge}function Kt(J,H,re,be){if(typeof re=="object"&&re!==null&&re.type===z&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case x:e:{for(var Ge=re.key;H!==null;){if(H.key===Ge){if(Ge=re.type,Ge===z){if(H.tag===7){o(J,H.sibling),be=m(H,re.props.children),be.return=J,J=be;break e}}else if(H.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===P&&W_(Ge)===H.type){o(J,H.sibling),be=m(H,re.props),bc(be,re),be.return=J,J=be;break e}o(J,H);break}else s(J,H);H=H.sibling}re.type===z?(be=zo(re.props.children,J.mode,be,re.key),be.return=J,J=be):(be=df(re.type,re.key,re.props,null,J.mode,be),bc(be,re),be.return=J,J=be)}return S(J);case B:e:{for(Ge=re.key;H!==null;){if(H.key===Ge)if(H.tag===4&&H.stateNode.containerInfo===re.containerInfo&&H.stateNode.implementation===re.implementation){o(J,H.sibling),be=m(H,re.children||[]),be.return=J,J=be;break e}else{o(J,H);break}else s(J,H);H=H.sibling}be=qm(re,J.mode,be),be.return=J,J=be}return S(J);case P:return Ge=re._init,re=Ge(re._payload),Kt(J,H,re,be)}if(Yt(re))return at(J,H,re,be);if(W(re)){if(Ge=W(re),typeof Ge!="function")throw Error(r(150));return re=Ge.call(re),nt(J,H,re,be)}if(typeof re.then=="function")return Kt(J,H,Df(re),be);if(re.$$typeof===ae)return Kt(J,H,yf(J,re),be);Of(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,H!==null&&H.tag===6?(o(J,H.sibling),be=m(H,re),be.return=J,J=be):(o(J,H),be=jm(re,J.mode,be),be.return=J,J=be),S(J)):o(J,H)}return function(J,H,re,be){try{_c=0;var Ge=Kt(J,H,re,be);return Xu=null,Ge}catch(Xe){if(Xe===cc||Xe===_f)throw Xe;var yt=Zr(29,Xe,null,J.mode);return yt.lanes=be,yt.return=J,yt}finally{}}}var Wu=J_(!0),Z_=J_(!1),Oi=we(null),_s=null;function qa(n){var s=n.alternate;Ie(Mn,Mn.current&1),Ie(Oi,n),_s===null&&(s===null||Gu.current!==null||s.memoizedState!==null)&&(_s=n)}function e0(n){if(n.tag===22){if(Ie(Mn,Mn.current),Ie(Oi,n),_s===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(_s=n)}}else Fa()}function Fa(){Ie(Mn,Mn.current),Ie(Oi,Oi.current)}function Ws(n){Be(Oi),_s===n&&(_s=null),Be(Mn)}var Mn=we(0);function Pf(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||cg(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Ep(n,s,o,l){s=n.memoizedState,o=o(l,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tp={enqueueSetState:function(n,s,o){n=n._reactInternals;var l=ri(),m=Ba(l);m.payload=s,o!=null&&(m.callback=o),s=za(n,m,l),s!==null&&(ii(s,n,l),fc(s,n,l))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var l=ri(),m=Ba(l);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=za(n,m,l),s!==null&&(ii(s,n,l),fc(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=ri(),l=Ba(o);l.tag=2,s!=null&&(l.callback=s),s=za(n,l,o),s!==null&&(ii(s,n,o),fc(s,n,o))}};function t0(n,s,o,l,m,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,y,S):s.prototype&&s.prototype.isPureReactComponent?!f(o,l)||!f(m,y):!0}function n0(n,s,o,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,l),s.state!==n&&Tp.enqueueReplaceState(s,s.state,null)}function $o(n,s){var o=s;if("ref"in s){o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}var Nf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function r0(n){Nf(n)}function i0(n){console.error(n)}function s0(n){Nf(n)}function Vf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function a0(n,s,o){try{var l=n.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function wp(n,s,o){return o=Ba(o),o.tag=3,o.payload={element:null},o.callback=function(){Vf(n,s)},o}function o0(n){return n=Ba(n),n.tag=3,n}function u0(n,s,o,l){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=l.value;n.payload=function(){return m(y)},n.callback=function(){a0(s,o,l)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){a0(s,o,l),typeof m!="function"&&($a===null?$a=new Set([this]):$a.add(this));var C=l.stack;this.componentDidCatch(l.value,{componentStack:C!==null?C:""})})}function OI(n,s,o,l,m){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=o.alternate,s!==null&&oc(s,o,m,!0),o=Oi.current,o!==null){switch(o.tag){case 13:return _s===null?Qp():o.alternate===null&&mn===0&&(mn=3),o.flags&=-257,o.flags|=65536,o.lanes=m,l===Jm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([l]):s.add(l),$p(n,l,m)),!1;case 22:return o.flags|=65536,l===Jm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([l]):o.add(l)),$p(n,l,m)),!1}throw Error(r(435,o.tag))}return $p(n,l,m),Qp(),!1}if(Pt)return s=Oi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,l!==Hm&&(n=Error(r(422),{cause:l}),ac(Je(n,o)))):(l!==Hm&&(s=Error(r(423),{cause:l}),ac(Je(s,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,l=Je(l,o),m=wp(n.stateNode,l,m),tp(n,m),mn!==4&&(mn=2)),!1;var y=Error(r(520),{cause:l});if(y=Je(y,o),Rc===null?Rc=[y]:Rc.push(y),mn!==4&&(mn=2),s===null)return!0;l=Je(l,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=wp(o.stateNode,l,n),tp(o,n),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&($a===null||!$a.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=o0(m),u0(m,n,o,l),tp(o,m),!1}o=o.return}while(o!==null);return!1}var l0=Error(r(461)),Kn=!1;function er(n,s,o,l){s.child=n===null?Z_(s,null,o,l):Wu(s,n.child,o,l)}function c0(n,s,o,l,m){o=o.render;var y=s.ref;if("ref"in l){var S={};for(var C in l)C!=="ref"&&(S[C]=l[C])}else S=l;return Go(s),l=ap(n,s,o,S,y,m),C=op(),n!==null&&!Kn?(up(n,s,m),Js(n,s,m)):(Pt&&C&&Fm(s),s.flags|=1,er(n,s,l,m),s.child)}function h0(n,s,o,l,m){if(n===null){var y=o.type;return typeof y=="function"&&!zm(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,f0(n,s,y,l,m)):(n=df(o.type,null,l,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Op(n,m)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:f,o(S,l)&&n.ref===s.ref)return Js(n,s,m)}return s.flags|=1,n=Hs(y,l),n.ref=s.ref,n.return=s,s.child=n}function f0(n,s,o,l,m){if(n!==null){var y=n.memoizedProps;if(f(y,l)&&n.ref===s.ref)if(Kn=!1,s.pendingProps=l=y,Op(n,m))(n.flags&131072)!==0&&(Kn=!0);else return s.lanes=n.lanes,Js(n,s,m)}return Sp(n,s,o,l,m)}function d0(n,s,o){var l=s.pendingProps,m=l.children,y=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=y!==null?y.baseLanes|o:o,n!==null){for(m=s.child=n.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;s.childLanes=y&~l}else s.childLanes=0,s.child=null;return m0(n,s,l,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&vf(s,y!==null?y.cachePool:null),y!==null?f_(s,y):rp(),e0(s);else return s.lanes=s.childLanes=536870912,m0(n,s,y!==null?y.baseLanes|o:o,o)}else y!==null?(vf(s,y.cachePool),f_(s,y),Fa(),s.memoizedState=null):(n!==null&&vf(s,null),rp(),Fa());return er(n,s,m,o),s.child}function m0(n,s,o,l){var m=Wm();return m=m===null?null:{parent:Vn._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&vf(s,null),rp(),e0(s),n!==null&&oc(n,s,l,!0),null}function Mf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Sp(n,s,o,l,m){return Go(s),o=ap(n,s,o,l,void 0,m),l=op(),n!==null&&!Kn?(up(n,s,m),Js(n,s,m)):(Pt&&l&&Fm(s),s.flags|=1,er(n,s,o,m),s.child)}function p0(n,s,o,l,m,y){return Go(s),s.updateQueue=null,o=m_(s,l,o,m),d_(n),l=op(),n!==null&&!Kn?(up(n,s,y),Js(n,s,y)):(Pt&&l&&Fm(s),s.flags|=1,er(n,s,o,y),s.child)}function g0(n,s,o,l,m){if(Go(s),s.stateNode===null){var y=ys,S=o.contextType;typeof S=="object"&&S!==null&&(y=lr(S)),y=new o(l,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Tp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=l,y.state=s.memoizedState,y.refs={},Zm(s),S=o.contextType,y.context=typeof S=="object"&&S!==null?lr(S):ys,y.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Ep(s,o,S,l),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Tp.enqueueReplaceState(y,y.state,null),mc(s,l,y,m),dc(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){y=s.stateNode;var C=s.memoizedProps,M=$o(o,C);y.props=M;var se=y.context,_e=o.contextType;S=ys,typeof _e=="object"&&_e!==null&&(S=lr(_e));var Te=o.getDerivedStateFromProps;_e=typeof Te=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,_e||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||se!==S)&&n0(s,y,l,S),Ua=!1;var ue=s.memoizedState;y.state=ue,mc(s,l,y,m),dc(),se=s.memoizedState,C||ue!==se||Ua?(typeof Te=="function"&&(Ep(s,o,Te,l),se=s.memoizedState),(M=Ua||t0(s,o,M,l,ue,se,S))?(_e||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=se),y.props=l,y.state=se,y.context=S,l=M):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{y=s.stateNode,ep(n,s),S=s.memoizedProps,_e=$o(o,S),y.props=_e,Te=s.pendingProps,ue=y.context,se=o.contextType,M=ys,typeof se=="object"&&se!==null&&(M=lr(se)),C=o.getDerivedStateFromProps,(se=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Te||ue!==M)&&n0(s,y,l,M),Ua=!1,ue=s.memoizedState,y.state=ue,mc(s,l,y,m),dc();var ce=s.memoizedState;S!==Te||ue!==ce||Ua||n!==null&&n.dependencies!==null&&gf(n.dependencies)?(typeof C=="function"&&(Ep(s,o,C,l),ce=s.memoizedState),(_e=Ua||t0(s,o,_e,l,ue,ce,M)||n!==null&&n.dependencies!==null&&gf(n.dependencies))?(se||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,ce,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,ce,M)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ce),y.props=l,y.state=ce,y.context=M,l=_e):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),l=!1)}return y=l,Mf(n,s),l=(s.flags&128)!==0,y||l?(y=s.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&l?(s.child=Wu(s,n.child,null,m),s.child=Wu(s,null,o,m)):er(n,s,o,m),s.memoizedState=y.state,n=s.child):n=Js(n,s,m),n}function y0(n,s,o,l){return sc(),s.flags|=256,er(n,s,o,l),s.child}var Ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(n){return{baseLanes:n,cachePool:i_()}}function Rp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Pi),n}function v0(n,s,o){var l=s.pendingProps,m=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Mn.current&2)!==0),S&&(m=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Pt){if(m?qa(s):Fa(),Pt){var C=dn,M;if(M=C){e:{for(M=C,C=vs;M.nodeType!==8;){if(!C){C=null;break e}if(M=es(M.nextSibling),M===null){C=null;break e}}C=M}C!==null?(s.memoizedState={dehydrated:C,treeContext:jo!==null?{id:Gs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},M=Zr(18,null,null,0),M.stateNode=C,M.return=s,s.child=M,Tr=s,dn=null,M=!0):M=!1}M||Ko(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return cg(C)?s.lanes=32:s.lanes=536870912,null;Ws(s)}return C=l.children,l=l.fallback,m?(Fa(),m=s.mode,C=kf({mode:"hidden",children:C},m),l=zo(l,m,o,null),C.return=s,l.return=s,C.sibling=l,s.child=C,m=s.child,m.memoizedState=Ip(o),m.childLanes=Rp(n,S,o),s.memoizedState=Ap,l):(qa(s),xp(s,C))}if(M=n.memoizedState,M!==null&&(C=M.dehydrated,C!==null)){if(y)s.flags&256?(qa(s),s.flags&=-257,s=Cp(n,s,o)):s.memoizedState!==null?(Fa(),s.child=n.child,s.flags|=128,s=null):(Fa(),m=l.fallback,C=s.mode,l=kf({mode:"visible",children:l.children},C),m=zo(m,C,o,null),m.flags|=2,l.return=s,m.return=s,l.sibling=m,s.child=l,Wu(s,n.child,null,o),l=s.child,l.memoizedState=Ip(o),l.childLanes=Rp(n,S,o),s.memoizedState=Ap,s=m);else if(qa(s),cg(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var se=S.dgst;S=se,l=Error(r(419)),l.stack="",l.digest=S,ac({value:l,source:null,stack:null}),s=Cp(n,s,o)}else if(Kn||oc(n,s,o,!1),S=(o&n.childLanes)!==0,Kn||S){if(S=Xt,S!==null&&(l=o&-o,l=(l&42)!==0?1:ls(l),l=(l&(S.suspendedLanes|o))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Ji(n,l),ii(S,n,l),l0;C.data==="$?"||Qp(),s=Cp(n,s,o)}else C.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,dn=es(C.nextSibling),Tr=s,Pt=!0,Fo=null,vs=!1,n!==null&&(Ci[Di++]=Gs,Ci[Di++]=Qs,Ci[Di++]=jo,Gs=n.id,Qs=n.overflow,jo=s),s=xp(s,l.children),s.flags|=4096);return s}return m?(Fa(),m=l.fallback,C=s.mode,M=n.child,se=M.sibling,l=Hs(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,se!==null?m=Hs(se,m):(m=zo(m,C,o,null),m.flags|=2),m.return=s,l.return=s,l.sibling=m,s.child=l,l=m,m=s.child,C=n.child.memoizedState,C===null?C=Ip(o):(M=C.cachePool,M!==null?(se=Vn._currentValue,M=M.parent!==se?{parent:se,pool:se}:M):M=i_(),C={baseLanes:C.baseLanes|o,cachePool:M}),m.memoizedState=C,m.childLanes=Rp(n,S,o),s.memoizedState=Ap,l):(qa(s),o=n.child,n=o.sibling,o=Hs(o,{mode:"visible",children:l.children}),o.return=s,o.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=o,s.memoizedState=null,o)}function xp(n,s){return s=kf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function kf(n,s){return n=Zr(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Cp(n,s,o){return Wu(s,n.child,null,o),n=xp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function _0(n,s,o){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Qm(n.return,s,o)}function Dp(n,s,o,l,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=o,y.tailMode=m)}function b0(n,s,o){var l=s.pendingProps,m=l.revealOrder,y=l.tail;if(er(n,s,l.children,o),l=Mn.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_0(n,o,s);else if(n.tag===19)_0(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(Ie(Mn,l),m){case"forwards":for(o=s.child,m=null;o!==null;)n=o.alternate,n!==null&&Pf(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Dp(s,!1,m,o,y);break;case"backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Pf(n)===null){s.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Dp(s,!0,o,null,y);break;case"together":Dp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Js(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Ya|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(oc(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Hs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Hs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Op(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&gf(n)))}function PI(n,s,o){switch(s.tag){case 3:Bt(s,s.stateNode.containerInfo),La(s,Vn,n.memoizedState.cache),sc();break;case 27:case 5:ki(s);break;case 4:Bt(s,s.stateNode.containerInfo);break;case 10:La(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(qa(s),s.flags|=128,null):(o&s.child.childLanes)!==0?v0(n,s,o):(qa(s),n=Js(n,s,o),n!==null?n.sibling:null);qa(s);break;case 19:var m=(n.flags&128)!==0;if(l=(o&s.childLanes)!==0,l||(oc(n,s,o,!1),l=(o&s.childLanes)!==0),m){if(l)return b0(n,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ie(Mn,Mn.current),l)break;return null;case 22:case 23:return s.lanes=0,d0(n,s,o);case 24:La(s,Vn,n.memoizedState.cache)}return Js(n,s,o)}function E0(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Kn=!0;else{if(!Op(n,o)&&(s.flags&128)===0)return Kn=!1,PI(n,s,o);Kn=(n.flags&131072)!==0}else Kn=!1,Pt&&(s.flags&1048576)!==0&&Wv(s,pf,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,m=l._init;if(l=m(l._payload),s.type=l,typeof l=="function")zm(l)?(n=$o(l,n),s.tag=1,s=g0(null,s,l,n,o)):(s.tag=0,s=Sp(null,s,l,n,o));else{if(l!=null){if(m=l.$$typeof,m===Re){s.tag=11,s=c0(null,s,l,n,o);break e}else if(m===L){s.tag=14,s=h0(null,s,l,n,o);break e}}throw s=On(l)||l,Error(r(306,s,""))}}return s;case 0:return Sp(n,s,s.type,s.pendingProps,o);case 1:return l=s.type,m=$o(l,s.pendingProps),g0(n,s,l,m,o);case 3:e:{if(Bt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var y=s.memoizedState;m=y.element,ep(n,s),mc(s,l,null,o);var S=s.memoizedState;if(l=S.cache,La(s,Vn,l),l!==y.cache&&Ym(s,[Vn],o,!0),dc(),l=S.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=y0(n,s,l,o);break e}else if(l!==m){m=Je(Error(r(424)),s),ac(m),s=y0(n,s,l,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dn=es(n.firstChild),Tr=s,Pt=!0,Fo=null,vs=!0,o=Z_(s,null,l,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sc(),l===m){s=Js(n,s,o);break e}er(n,s,l,o)}s=s.child}return s;case 26:return Mf(n,s),n===null?(o=Ab(s.type,null,s.pendingProps,null))?s.memoizedState=o:Pt||(o=s.type,n=s.pendingProps,l=Xf(et.current).createElement(o),l[Zt]=s,l[ut]=n,nr(l,o,n),Vt(l),s.stateNode=l):s.memoizedState=Ab(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ki(s),n===null&&Pt&&(l=s.stateNode=Tb(s.type,s.pendingProps,et.current),Tr=s,vs=!0,m=dn,Ja(s.type)?(hg=m,dn=es(l.firstChild)):dn=m),er(n,s,s.pendingProps.children,o),Mf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Pt&&((m=l=dn)&&(l=aR(l,s.type,s.pendingProps,vs),l!==null?(s.stateNode=l,Tr=s,dn=es(l.firstChild),vs=!1,m=!0):m=!1),m||Ko(s)),ki(s),m=s.type,y=s.pendingProps,S=n!==null?n.memoizedProps:null,l=y.children,og(m,y)?l=null:S!==null&&og(m,S)&&(s.flags|=32),s.memoizedState!==null&&(m=ap(n,s,SI,null,null,o),kc._currentValue=m),Mf(n,s),er(n,s,l,o),s.child;case 6:return n===null&&Pt&&((n=o=dn)&&(o=oR(o,s.pendingProps,vs),o!==null?(s.stateNode=o,Tr=s,dn=null,n=!0):n=!1),n||Ko(s)),null;case 13:return v0(n,s,o);case 4:return Bt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Wu(s,null,l,o):er(n,s,l,o),s.child;case 11:return c0(n,s,s.type,s.pendingProps,o);case 7:return er(n,s,s.pendingProps,o),s.child;case 8:return er(n,s,s.pendingProps.children,o),s.child;case 12:return er(n,s,s.pendingProps.children,o),s.child;case 10:return l=s.pendingProps,La(s,s.type,l.value),er(n,s,l.children,o),s.child;case 9:return m=s.type._context,l=s.pendingProps.children,Go(s),m=lr(m),l=l(m),s.flags|=1,er(n,s,l,o),s.child;case 14:return h0(n,s,s.type,s.pendingProps,o);case 15:return f0(n,s,s.type,s.pendingProps,o);case 19:return b0(n,s,o);case 31:return l=s.pendingProps,o=s.mode,l={mode:l.mode,children:l.children},n===null?(o=kf(l,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Hs(n.child,l),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return d0(n,s,o);case 24:return Go(s),l=lr(Vn),n===null?(m=Wm(),m===null&&(m=Xt,y=$m(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),s.memoizedState={parent:l,cache:m},Zm(s),La(s,Vn,m)):((n.lanes&o)!==0&&(ep(n,s),mc(s,null,null,o),dc()),m=n.memoizedState,y=s.memoizedState,m.parent!==l?(m={parent:l,cache:l},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),La(s,Vn,l)):(l=y.cache,La(s,Vn,l),l!==m.cache&&Ym(s,[Vn],o,!0))),er(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Zs(n){n.flags|=4}function T0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Db(s)){if(s=Oi.current,s!==null&&((Rt&4194048)===Rt?_s!==null:(Rt&62914560)!==Rt&&(Rt&536870912)===0||s!==_s))throw hc=Jm,s_;n.flags|=8192}}function Lf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Ue():536870912,n.lanes|=s,tl|=s)}function Ec(n,s){if(!Pt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function an(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,l=0;if(s)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,l|=m.subtreeFlags&65011712,l|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,l|=m.subtreeFlags,l|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=l,n.childLanes=o,s}function NI(n,s,o){var l=s.pendingProps;switch(Km(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(s),null;case 1:return an(s),null;case 3:return o=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),$s(Vn),He(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ic(s)?Zs(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,e_())),an(s),null;case 26:return o=s.memoizedState,n===null?(Zs(s),o!==null?(an(s),T0(s,o)):(an(s),s.flags&=-16777217)):o?o!==n.memoizedState?(Zs(s),an(s),T0(s,o)):(an(s),s.flags&=-16777217):(n.memoizedProps!==l&&Zs(s),an(s),s.flags&=-16777217),null;case 27:Ar(s),o=et.current;var m=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Zs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return an(s),null}n=We.current,ic(s)?Jv(s):(n=Tb(m,l,o),s.stateNode=n,Zs(s))}return an(s),null;case 5:if(Ar(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&Zs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return an(s),null}if(n=We.current,ic(s))Jv(s);else{switch(m=Xf(et.current),n){case 1:n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=m.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?m.createElement(o,{is:l.is}):m.createElement(o)}}n[Zt]=s,n[ut]=l;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)n.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=n;e:switch(nr(n,o,l),o){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Zs(s)}}return an(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&Zs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=et.current,ic(s)){if(n=s.stateNode,o=s.memoizedProps,l=null,m=Tr,m!==null)switch(m.tag){case 27:case 5:l=m.memoizedProps}n[Zt]=s,n=!!(n.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||pb(n.nodeValue,o)),n||Ko(s)}else n=Xf(n).createTextNode(l),n[Zt]=s,s.stateNode=n}return an(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=ic(s),l!==null&&l.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Zt]=s}else sc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),m=!1}else m=e_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Ws(s),s):(Ws(s),null)}if(Ws(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=l!==null,n=n!==null&&n.memoizedState!==null,o){l=s.child,m=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(m=l.alternate.memoizedState.cachePool.pool);var y=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==m&&(l.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Lf(s,s.updateQueue),an(s),null;case 4:return He(),n===null&&ng(s.stateNode.containerInfo),an(s),null;case 10:return $s(s.type),an(s),null;case 19:if(Be(Mn),m=s.memoizedState,m===null)return an(s),null;if(l=(s.flags&128)!==0,y=m.rendering,y===null)if(l)Ec(m,!1);else{if(mn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Pf(n),y!==null){for(s.flags|=128,Ec(m,!1),n=y.updateQueue,s.updateQueue=n,Lf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Xv(o,n),o=o.sibling;return Ie(Mn,Mn.current&1|2),s.child}n=n.sibling}m.tail!==null&&Ir()>zf&&(s.flags|=128,l=!0,Ec(m,!1),s.lanes=4194304)}else{if(!l)if(n=Pf(y),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,Lf(s,n),Ec(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Pt)return an(s),null}else 2*Ir()-m.renderingStartTime>zf&&o!==536870912&&(s.flags|=128,l=!0,Ec(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(n=m.last,n!==null?n.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ir(),s.sibling=null,n=Mn.current,Ie(Mn,l?n&1|2:n&1),s):(an(s),null);case 22:case 23:return Ws(s),ip(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(o&536870912)!==0&&(s.flags&128)===0&&(an(s),s.subtreeFlags&6&&(s.flags|=8192)):an(s),o=s.updateQueue,o!==null&&Lf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==o&&(s.flags|=2048),n!==null&&Be(Qo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),$s(Vn),an(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function VI(n,s){switch(Km(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return $s(Vn),He(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ar(s),null;case 13:if(Ws(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));sc()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Be(Mn),null;case 4:return He(),null;case 10:return $s(s.type),null;case 22:case 23:return Ws(s),ip(),n!==null&&Be(Qo),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return $s(Vn),null;case 25:return null;default:return null}}function w0(n,s){switch(Km(s),s.tag){case 3:$s(Vn),He();break;case 26:case 27:case 5:Ar(s);break;case 4:He();break;case 13:Ws(s);break;case 19:Be(Mn);break;case 10:$s(s.type);break;case 22:case 23:Ws(s),ip(),n!==null&&Be(Qo);break;case 24:$s(Vn)}}function Tc(n,s){try{var o=s.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var m=l.next;o=m;do{if((o.tag&n)===n){l=void 0;var y=o.create,S=o.inst;l=y(),S.destroy=l}o=o.next}while(o!==m)}}catch(C){Gt(s,s.return,C)}}function Ka(n,s,o){try{var l=s.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var y=m.next;l=y;do{if((l.tag&n)===n){var S=l.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,m=s;var M=o,se=C;try{se()}catch(_e){Gt(m,M,_e)}}}l=l.next}while(l!==y)}}catch(_e){Gt(s,s.return,_e)}}function S0(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{h_(s,o)}catch(l){Gt(n,n.return,l)}}}function A0(n,s,o){o.props=$o(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(l){Gt(n,s,l)}}function wc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof o=="function"?n.refCleanup=o(l):o.current=l}}catch(m){Gt(n,s,m)}}function bs(n,s){var o=n.ref,l=n.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(m){Gt(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Gt(n,s,m)}else o.current=null}function I0(n){var s=n.type,o=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(m){Gt(n,n.return,m)}}function Pp(n,s,o){try{var l=n.stateNode;tR(l,n.type,o,s),l[ut]=s}catch(m){Gt(n,n.return,m)}}function R0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ja(n.type)||n.tag===4}function Np(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||R0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ja(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vp(n,s,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=$f));else if(l!==4&&(l===27&&Ja(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Vp(n,s,o),n=n.sibling;n!==null;)Vp(n,s,o),n=n.sibling}function Uf(n,s,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(l!==4&&(l===27&&Ja(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Uf(n,s,o),n=n.sibling;n!==null;)Uf(n,s,o),n=n.sibling}function x0(n){var s=n.stateNode,o=n.memoizedProps;try{for(var l=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);nr(s,l,o),s[Zt]=n,s[ut]=o}catch(y){Gt(n,n.return,y)}}var ea=!1,En=!1,Mp=!1,C0=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function MI(n,s){if(n=n.containerInfo,sg=nd,n=A(n),R(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var m=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,C=-1,M=-1,se=0,_e=0,Te=n,ue=null;t:for(;;){for(var ce;Te!==o||m!==0&&Te.nodeType!==3||(C=S+m),Te!==y||l!==0&&Te.nodeType!==3||(M=S+l),Te.nodeType===3&&(S+=Te.nodeValue.length),(ce=Te.firstChild)!==null;)ue=Te,Te=ce;for(;;){if(Te===n)break t;if(ue===o&&++se===m&&(C=S),ue===y&&++_e===l&&(M=S),(ce=Te.nextSibling)!==null)break;Te=ue,ue=Te.parentNode}Te=ce}o=C===-1||M===-1?null:{start:C,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(ag={focusedElem:n,selectionRange:o},nd=!1,Hn=s;Hn!==null;)if(s=Hn,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Hn=n;else for(;Hn!==null;){switch(s=Hn,y=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=s,m=y.memoizedProps,y=y.memoizedState,l=o.stateNode;try{var at=$o(o.type,m,o.elementType===o.type);n=l.getSnapshotBeforeUpdate(at,y),l.__reactInternalSnapshotBeforeUpdate=n}catch(nt){Gt(o,o.return,nt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)lg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":lg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Hn=n;break}Hn=s.return}}function D0(n,s,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:Ha(n,o),l&4&&Tc(5,o);break;case 1:if(Ha(n,o),l&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(S){Gt(o,o.return,S)}else{var m=$o(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Gt(o,o.return,S)}}l&64&&S0(o),l&512&&wc(o,o.return);break;case 3:if(Ha(n,o),l&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{h_(n,s)}catch(S){Gt(o,o.return,S)}}break;case 27:s===null&&l&4&&x0(o);case 26:case 5:Ha(n,o),s===null&&l&4&&I0(o),l&512&&wc(o,o.return);break;case 12:Ha(n,o);break;case 13:Ha(n,o),l&4&&N0(n,o),l&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=KI.bind(null,o),uR(n,o))));break;case 22:if(l=o.memoizedState!==null||ea,!l){s=s!==null&&s.memoizedState!==null||En,m=ea;var y=En;ea=l,(En=s)&&!y?Ga(n,o,(o.subtreeFlags&8772)!==0):Ha(n,o),ea=m,En=y}break;case 30:break;default:Ha(n,o)}}function O0(n){var s=n.alternate;s!==null&&(n.alternate=null,O0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&$n(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var nn=null,Lr=!1;function ta(n,s,o){for(o=o.child;o!==null;)P0(n,s,o),o=o.sibling}function P0(n,s,o){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Nt,o)}catch{}switch(o.tag){case 26:En||bs(o,s),ta(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:En||bs(o,s);var l=nn,m=Lr;Ja(o.type)&&(nn=o.stateNode,Lr=!1),ta(n,s,o),Pc(o.stateNode),nn=l,Lr=m;break;case 5:En||bs(o,s);case 6:if(l=nn,m=Lr,nn=null,ta(n,s,o),nn=l,Lr=m,nn!==null)if(Lr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(o.stateNode)}catch(y){Gt(o,s,y)}else try{nn.removeChild(o.stateNode)}catch(y){Gt(o,s,y)}break;case 18:nn!==null&&(Lr?(n=nn,bb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),zc(n)):bb(nn,o.stateNode));break;case 4:l=nn,m=Lr,nn=o.stateNode.containerInfo,Lr=!0,ta(n,s,o),nn=l,Lr=m;break;case 0:case 11:case 14:case 15:En||Ka(2,o,s),En||Ka(4,o,s),ta(n,s,o);break;case 1:En||(bs(o,s),l=o.stateNode,typeof l.componentWillUnmount=="function"&&A0(o,s,l)),ta(n,s,o);break;case 21:ta(n,s,o);break;case 22:En=(l=En)||o.memoizedState!==null,ta(n,s,o),En=l;break;default:ta(n,s,o)}}function N0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zc(n)}catch(o){Gt(s,s.return,o)}}function kI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new C0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new C0),s;default:throw Error(r(435,n.tag))}}function kp(n,s){var o=kI(n);s.forEach(function(l){var m=HI.bind(null,n,l);o.has(l)||(o.add(l),l.then(m,m))})}function ei(n,s){var o=s.deletions;if(o!==null)for(var l=0;l<o.length;l++){var m=o[l],y=n,S=s,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Ja(C.type)){nn=C.stateNode,Lr=!1;break e}break;case 5:nn=C.stateNode,Lr=!1;break e;case 3:case 4:nn=C.stateNode.containerInfo,Lr=!0;break e}C=C.return}if(nn===null)throw Error(r(160));P0(y,S,m),nn=null,Lr=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)V0(s,n),s=s.sibling}var Zi=null;function V0(n,s){var o=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ei(s,n),ti(n),l&4&&(Ka(3,n,n.return),Tc(3,n),Ka(5,n,n.return));break;case 1:ei(s,n),ti(n),l&512&&(En||o===null||bs(o,o.return)),l&64&&ea&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var m=Zi;if(ei(s,n),ti(n),l&512&&(En||o===null||bs(o,o.return)),l&4){var y=o!==null?o.memoizedState:null;if(l=n.memoizedState,o===null)if(l===null)if(n.stateNode===null){e:{l=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(l){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ls]||y[Zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(l),m.head.insertBefore(y,m.querySelector("head > title"))),nr(y,l,o),y[Zt]=n,Vt(y),l=y;break e;case"link":var S=xb("link","href",m).get(l+(o.href||""));if(S){for(var C=0;C<S.length;C++)if(y=S[C],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(C,1);break t}}y=m.createElement(l),nr(y,l,o),m.head.appendChild(y);break;case"meta":if(S=xb("meta","content",m).get(l+(o.content||""))){for(C=0;C<S.length;C++)if(y=S[C],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(C,1);break t}}y=m.createElement(l),nr(y,l,o),m.head.appendChild(y);break;default:throw Error(r(468,l))}y[Zt]=n,Vt(y),l=y}n.stateNode=l}else Cb(m,n.type,n.stateNode);else n.stateNode=Rb(m,l,n.memoizedProps);else y!==l?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,l===null?Cb(m,n.type,n.stateNode):Rb(m,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Pp(n,n.memoizedProps,o.memoizedProps)}break;case 27:ei(s,n),ti(n),l&512&&(En||o===null||bs(o,o.return)),o!==null&&l&4&&Pp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ei(s,n),ti(n),l&512&&(En||o===null||bs(o,o.return)),n.flags&32){m=n.stateNode;try{Dr(m,"")}catch(ce){Gt(n,n.return,ce)}}l&4&&n.stateNode!=null&&(m=n.memoizedProps,Pp(n,m,o!==null?o.memoizedProps:m)),l&1024&&(Mp=!0);break;case 6:if(ei(s,n),ti(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,o=n.stateNode;try{o.nodeValue=l}catch(ce){Gt(n,n.return,ce)}}break;case 3:if(Zf=null,m=Zi,Zi=Wf(s.containerInfo),ei(s,n),Zi=m,ti(n),l&4&&o!==null&&o.memoizedState.isDehydrated)try{zc(s.containerInfo)}catch(ce){Gt(n,n.return,ce)}Mp&&(Mp=!1,M0(n));break;case 4:l=Zi,Zi=Wf(n.stateNode.containerInfo),ei(s,n),ti(n),Zi=l;break;case 12:ei(s,n),ti(n);break;case 13:ei(s,n),ti(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(qp=Ir()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,kp(n,l)));break;case 22:m=n.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,se=ea,_e=En;if(ea=se||m,En=_e||M,ei(s,n),En=_e,ea=se,ti(n),l&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||M||ea||En||Xo(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){M=o=s;try{if(y=M.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=M.stateNode;var Te=M.memoizedProps.style,ue=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;C.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(ce){Gt(M,M.return,ce)}}}else if(s.tag===6){if(o===null){M=s;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(ce){Gt(M,M.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,kp(n,o))));break;case 19:ei(s,n),ti(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,kp(n,l)));break;case 30:break;case 21:break;default:ei(s,n),ti(n)}}function ti(n){var s=n.flags;if(s&2){try{for(var o,l=n.return;l!==null;){if(R0(l)){o=l;break}l=l.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,y=Np(n);Uf(n,y,m);break;case 5:var S=o.stateNode;o.flags&32&&(Dr(S,""),o.flags&=-33);var C=Np(n);Uf(n,C,S);break;case 3:case 4:var M=o.stateNode.containerInfo,se=Np(n);Vp(n,se,M);break;default:throw Error(r(161))}}catch(_e){Gt(n,n.return,_e)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function M0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;M0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ha(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)D0(n,s.alternate,s),s=s.sibling}function Xo(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ka(4,s,s.return),Xo(s);break;case 1:bs(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&A0(s,s.return,o),Xo(s);break;case 27:Pc(s.stateNode);case 26:case 5:bs(s,s.return),Xo(s);break;case 22:s.memoizedState===null&&Xo(s);break;case 30:Xo(s);break;default:Xo(s)}n=n.sibling}}function Ga(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,m=n,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ga(m,y,o),Tc(4,y);break;case 1:if(Ga(m,y,o),l=y,m=l.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(se){Gt(l,l.return,se)}if(l=y,m=l.updateQueue,m!==null){var C=l.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)c_(M[m],C)}catch(se){Gt(l,l.return,se)}}o&&S&64&&S0(y),wc(y,y.return);break;case 27:x0(y);case 26:case 5:Ga(m,y,o),o&&l===null&&S&4&&I0(y),wc(y,y.return);break;case 12:Ga(m,y,o);break;case 13:Ga(m,y,o),o&&S&4&&N0(m,y);break;case 22:y.memoizedState===null&&Ga(m,y,o),wc(y,y.return);break;case 30:break;default:Ga(m,y,o)}s=s.sibling}}function Lp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&uc(o))}function Up(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&uc(n))}function Es(n,s,o,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)k0(n,s,o,l),s=s.sibling}function k0(n,s,o,l){var m=s.flags;switch(s.tag){case 0:case 11:case 15:Es(n,s,o,l),m&2048&&Tc(9,s);break;case 1:Es(n,s,o,l);break;case 3:Es(n,s,o,l),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&uc(n)));break;case 12:if(m&2048){Es(n,s,o,l),n=s.stateNode;try{var y=s.memoizedProps,S=y.id,C=y.onPostCommit;typeof C=="function"&&C(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){Gt(s,s.return,M)}}else Es(n,s,o,l);break;case 13:Es(n,s,o,l);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?Es(n,s,o,l):Sc(n,s):y._visibility&2?Es(n,s,o,l):(y._visibility|=2,Ju(n,s,o,l,(s.subtreeFlags&10256)!==0)),m&2048&&Lp(S,s);break;case 24:Es(n,s,o,l),m&2048&&Up(s.alternate,s);break;default:Es(n,s,o,l)}}function Ju(n,s,o,l,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=n,S=s,C=o,M=l,se=S.flags;switch(S.tag){case 0:case 11:case 15:Ju(y,S,C,M,m),Tc(8,S);break;case 23:break;case 22:var _e=S.stateNode;S.memoizedState!==null?_e._visibility&2?Ju(y,S,C,M,m):Sc(y,S):(_e._visibility|=2,Ju(y,S,C,M,m)),m&&se&2048&&Lp(S.alternate,S);break;case 24:Ju(y,S,C,M,m),m&&se&2048&&Up(S.alternate,S);break;default:Ju(y,S,C,M,m)}s=s.sibling}}function Sc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,l=s,m=l.flags;switch(l.tag){case 22:Sc(o,l),m&2048&&Lp(l.alternate,l);break;case 24:Sc(o,l),m&2048&&Up(l.alternate,l);break;default:Sc(o,l)}s=s.sibling}}var Ac=8192;function Zu(n){if(n.subtreeFlags&Ac)for(n=n.child;n!==null;)L0(n),n=n.sibling}function L0(n){switch(n.tag){case 26:Zu(n),n.flags&Ac&&n.memoizedState!==null&&ER(Zi,n.memoizedState,n.memoizedProps);break;case 5:Zu(n);break;case 3:case 4:var s=Zi;Zi=Wf(n.stateNode.containerInfo),Zu(n),Zi=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Ac,Ac=16777216,Zu(n),Ac=s):Zu(n));break;default:Zu(n)}}function U0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ic(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Hn=l,z0(l,n)}U0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)B0(n),n=n.sibling}function B0(n){switch(n.tag){case 0:case 11:case 15:Ic(n),n.flags&2048&&Ka(9,n,n.return);break;case 3:Ic(n);break;case 12:Ic(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Bf(n)):Ic(n);break;default:Ic(n)}}function Bf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Hn=l,z0(l,n)}U0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ka(8,s,s.return),Bf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Bf(s));break;default:Bf(s)}n=n.sibling}}function z0(n,s){for(;Hn!==null;){var o=Hn;switch(o.tag){case 0:case 11:case 15:Ka(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:uc(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,Hn=l;else e:for(o=n;Hn!==null;){l=Hn;var m=l.sibling,y=l.return;if(O0(l),l===o){Hn=null;break e}if(m!==null){m.return=y,Hn=m;break e}Hn=y}}}var LI={getCacheForType:function(n){var s=lr(Vn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},UI=typeof WeakMap=="function"?WeakMap:Map,kt=0,Xt=null,bt=null,Rt=0,Lt=0,ni=null,Qa=!1,el=!1,Bp=!1,na=0,mn=0,Ya=0,Wo=0,zp=0,Pi=0,tl=0,Rc=null,Ur=null,jp=!1,qp=0,zf=1/0,jf=null,$a=null,tr=0,Xa=null,nl=null,rl=0,Fp=0,Kp=null,j0=null,xc=0,Hp=null;function ri(){if((kt&2)!==0&&Rt!==0)return Rt&-Rt;if(ye.T!==null){var n=Ku;return n!==0?n:Jp()}return gr()}function q0(){Pi===0&&(Pi=(Rt&536870912)===0||Pt?us():536870912);var n=Oi.current;return n!==null&&(n.flags|=32),Pi}function ii(n,s,o){(n===Xt&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)&&(il(n,0),Wa(n,Rt,Pi,!1)),mi(n,o),((kt&2)===0||n!==Xt)&&(n===Xt&&((kt&2)===0&&(Wo|=o),mn===4&&Wa(n,Rt,Pi,!1)),Ts(n))}function F0(n,s,o){if((kt&6)!==0)throw Error(r(327));var l=!o&&(s&124)===0&&(s&n.expiredLanes)===0||Fr(n,s),m=l?jI(n,s):Yp(n,s,!0),y=l;do{if(m===0){el&&!l&&Wa(n,s,0,!1);break}else{if(o=n.current.alternate,y&&!BI(o)){m=Yp(n,s,!1),y=!1;continue}if(m===2){if(y=s,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var C=n;m=Rc;var M=C.current.memoizedState.isDehydrated;if(M&&(il(C,S).flags|=256),S=Yp(C,S,!1),S!==2){if(Bp&&!M){C.errorRecoveryDisabledLanes|=y,Wo|=y,m=4;break e}y=Ur,Ur=m,y!==null&&(Ur===null?Ur=y:Ur.push.apply(Ur,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){il(n,0),Wa(n,s,0,!0);break}e:{switch(l=n,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Wa(l,s,Pi,!Qa);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=qp+300-Ir(),10<m)){if(Wa(l,s,Pi,!Qa),qe(l,0,!0)!==0)break e;l.timeoutHandle=vb(K0.bind(null,l,o,Ur,jf,jp,s,Pi,Wo,tl,Qa,y,2,-0,0),m);break e}K0(l,o,Ur,jf,jp,s,Pi,Wo,tl,Qa,y,0,-0,0)}}break}while(!0);Ts(n)}function K0(n,s,o,l,m,y,S,C,M,se,_e,Te,ue,ce){if(n.timeoutHandle=-1,Te=s.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(Mc={stylesheets:null,count:0,unsuspend:bR},L0(s),Te=TR(),Te!==null)){n.cancelPendingCommit=Te(W0.bind(null,n,s,y,o,l,m,S,C,M,_e,1,ue,ce)),Wa(n,y,S,!se);return}W0(n,s,y,o,l,m,S,C,M)}function BI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var m=o[l],y=m.getSnapshot;m=m.value;try{if(!ur(y(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wa(n,s,o,l){s&=~zp,s&=~Wo,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var m=s;0<m;){var y=31-hn(m),S=1<<y;l[y]=-1,m&=~S}o!==0&&Gr(n,o,s)}function qf(){return(kt&6)===0?(Cc(0),!1):!0}function Gp(){if(bt!==null){if(Lt===0)var n=bt.return;else n=bt,Ys=Ho=null,lp(n),Xu=null,_c=0,n=bt;for(;n!==null;)w0(n.alternate,n),n=n.return;bt=null}}function il(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,rR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Gp(),Xt=n,bt=o=Hs(n.current,null),Rt=s,Lt=0,ni=null,Qa=!1,el=Fr(n,s),Bp=!1,tl=Pi=zp=Wo=Ya=mn=0,Ur=Rc=null,jp=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var m=31-hn(l),y=1<<m;s|=n[m],l&=~y}return na=s,st(),o}function H0(n,s){mt=null,ye.H=Cf,s===cc||s===_f?(s=u_(),Lt=3):s===s_?(s=u_(),Lt=4):Lt=s===l0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ni=s,bt===null&&(mn=1,Vf(n,Je(s,n.current)))}function G0(){var n=ye.H;return ye.H=Cf,n===null?Cf:n}function Q0(){var n=ye.A;return ye.A=LI,n}function Qp(){mn=4,Qa||(Rt&4194048)!==Rt&&Oi.current!==null||(el=!0),(Ya&134217727)===0&&(Wo&134217727)===0||Xt===null||Wa(Xt,Rt,Pi,!1)}function Yp(n,s,o){var l=kt;kt|=2;var m=G0(),y=Q0();(Xt!==n||Rt!==s)&&(jf=null,il(n,s)),s=!1;var S=mn;e:do try{if(Lt!==0&&bt!==null){var C=bt,M=ni;switch(Lt){case 8:Gp(),S=6;break e;case 3:case 2:case 9:case 6:Oi.current===null&&(s=!0);var se=Lt;if(Lt=0,ni=null,sl(n,C,M,se),o&&el){S=0;break e}break;default:se=Lt,Lt=0,ni=null,sl(n,C,M,se)}}zI(),S=mn;break}catch(_e){H0(n,_e)}while(!0);return s&&n.shellSuspendCounter++,Ys=Ho=null,kt=l,ye.H=m,ye.A=y,bt===null&&(Xt=null,Rt=0,st()),S}function zI(){for(;bt!==null;)Y0(bt)}function jI(n,s){var o=kt;kt|=2;var l=G0(),m=Q0();Xt!==n||Rt!==s?(jf=null,zf=Ir()+500,il(n,s)):el=Fr(n,s);e:do try{if(Lt!==0&&bt!==null){s=bt;var y=ni;t:switch(Lt){case 1:Lt=0,ni=null,sl(n,s,y,1);break;case 2:case 9:if(a_(y)){Lt=0,ni=null,$0(s);break}s=function(){Lt!==2&&Lt!==9||Xt!==n||(Lt=7),Ts(n)},y.then(s,s);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:a_(y)?(Lt=0,ni=null,$0(s)):(Lt=0,ni=null,sl(n,s,y,7));break;case 5:var S=null;switch(bt.tag){case 26:S=bt.memoizedState;case 5:case 27:var C=bt;if(!S||Db(S)){Lt=0,ni=null;var M=C.sibling;if(M!==null)bt=M;else{var se=C.return;se!==null?(bt=se,Ff(se)):bt=null}break t}}Lt=0,ni=null,sl(n,s,y,5);break;case 6:Lt=0,ni=null,sl(n,s,y,6);break;case 8:Gp(),mn=6;break e;default:throw Error(r(462))}}qI();break}catch(_e){H0(n,_e)}while(!0);return Ys=Ho=null,ye.H=l,ye.A=m,kt=o,bt!==null?0:(Xt=null,Rt=0,st(),mn)}function qI(){for(;bt!==null&&!qr();)Y0(bt)}function Y0(n){var s=E0(n.alternate,n,na);n.memoizedProps=n.pendingProps,s===null?Ff(n):bt=s}function $0(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=p0(o,s,s.pendingProps,s.type,void 0,Rt);break;case 11:s=p0(o,s,s.pendingProps,s.type.render,s.ref,Rt);break;case 5:lp(s);default:w0(o,s),s=bt=Xv(s,na),s=E0(o,s,na)}n.memoizedProps=n.pendingProps,s===null?Ff(n):bt=s}function sl(n,s,o,l){Ys=Ho=null,lp(s),Xu=null,_c=0;var m=s.return;try{if(OI(n,m,s,o,Rt)){mn=1,Vf(n,Je(o,n.current)),bt=null;return}}catch(y){if(m!==null)throw bt=m,y;mn=1,Vf(n,Je(o,n.current)),bt=null;return}s.flags&32768?(Pt||l===1?n=!0:el||(Rt&536870912)!==0?n=!1:(Qa=n=!0,(l===2||l===9||l===3||l===6)&&(l=Oi.current,l!==null&&l.tag===13&&(l.flags|=16384))),X0(s,n)):Ff(s)}function Ff(n){var s=n;do{if((s.flags&32768)!==0){X0(s,Qa);return}n=s.return;var o=NI(s.alternate,s,na);if(o!==null){bt=o;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=n}while(s!==null);mn===0&&(mn=5)}function X0(n,s){do{var o=VI(n.alternate,n);if(o!==null){o.flags&=32767,bt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){bt=n;return}bt=n=o}while(n!==null);mn=6,bt=null}function W0(n,s,o,l,m,y,S,C,M){n.cancelPendingCommit=null;do Kf();while(tr!==0);if((kt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=Zn,Vs(n,o,y,S,C,M),n===Xt&&(bt=Xt=null,Rt=0),nl=s,Xa=n,rl=o,Fp=y,Kp=m,j0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,GI(Un,function(){return nb(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ye.T,ye.T=null,m=Le.p,Le.p=2,S=kt,kt|=4;try{MI(n,s,o)}finally{kt=S,Le.p=m,ye.T=l}}tr=1,J0(),Z0(),eb()}}function J0(){if(tr===1){tr=0;var n=Xa,s=nl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ye.T,ye.T=null;var l=Le.p;Le.p=2;var m=kt;kt|=4;try{V0(s,n);var y=ag,S=A(n.containerInfo),C=y.focusedElem,M=y.selectionRange;if(S!==C&&C&&C.ownerDocument&&T(C.ownerDocument.documentElement,C)){if(M!==null&&R(C)){var se=M.start,_e=M.end;if(_e===void 0&&(_e=se),"selectionStart"in C)C.selectionStart=se,C.selectionEnd=Math.min(_e,C.value.length);else{var Te=C.ownerDocument||document,ue=Te&&Te.defaultView||window;if(ue.getSelection){var ce=ue.getSelection(),at=C.textContent.length,nt=Math.min(M.start,at),Kt=M.end===void 0?nt:Math.min(M.end,at);!ce.extend&&nt>Kt&&(S=Kt,Kt=nt,nt=S);var J=_(C,nt),H=_(C,Kt);if(J&&H&&(ce.rangeCount!==1||ce.anchorNode!==J.node||ce.anchorOffset!==J.offset||ce.focusNode!==H.node||ce.focusOffset!==H.offset)){var re=Te.createRange();re.setStart(J.node,J.offset),ce.removeAllRanges(),nt>Kt?(ce.addRange(re),ce.extend(H.node,H.offset)):(re.setEnd(H.node,H.offset),ce.addRange(re))}}}}for(Te=[],ce=C;ce=ce.parentNode;)ce.nodeType===1&&Te.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Te.length;C++){var be=Te[C];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}nd=!!sg,ag=sg=null}finally{kt=m,Le.p=l,ye.T=o}}n.current=s,tr=2}}function Z0(){if(tr===2){tr=0;var n=Xa,s=nl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ye.T,ye.T=null;var l=Le.p;Le.p=2;var m=kt;kt|=4;try{D0(n,s.alternate,s)}finally{kt=m,Le.p=l,ye.T=o}}tr=3}}function eb(){if(tr===4||tr===3){tr=0,Mu();var n=Xa,s=nl,o=rl,l=j0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tr=5:(tr=0,nl=Xa=null,tb(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&($a=null),Ta(o),s=s.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Nt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ye.T,m=Le.p,Le.p=2,ye.T=null;try{for(var y=n.onRecoverableError,S=0;S<l.length;S++){var C=l[S];y(C.value,{componentStack:C.stack})}}finally{ye.T=s,Le.p=m}}(rl&3)!==0&&Kf(),Ts(n),m=n.pendingLanes,(o&4194090)!==0&&(m&42)!==0?n===Hp?xc++:(xc=0,Hp=n):xc=0,Cc(0)}}function tb(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,uc(s)))}function Kf(n){return J0(),Z0(),eb(),nb()}function nb(){if(tr!==5)return!1;var n=Xa,s=Fp;Fp=0;var o=Ta(rl),l=ye.T,m=Le.p;try{Le.p=32>o?32:o,ye.T=null,o=Kp,Kp=null;var y=Xa,S=rl;if(tr=0,nl=Xa=null,rl=0,(kt&6)!==0)throw Error(r(331));var C=kt;if(kt|=4,B0(y.current),k0(y,y.current,S,o),kt=C,Cc(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Nt,y)}catch{}return!0}finally{Le.p=m,ye.T=l,tb(n,s)}}function rb(n,s,o){s=Je(o,s),s=wp(n.stateNode,s,2),n=za(n,s,2),n!==null&&(mi(n,2),Ts(n))}function Gt(n,s,o){if(n.tag===3)rb(n,n,o);else for(;s!==null;){if(s.tag===3){rb(s,n,o);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($a===null||!$a.has(l))){n=Je(o,n),o=o0(2),l=za(s,o,2),l!==null&&(u0(o,l,s,n),mi(l,2),Ts(l));break}}s=s.return}}function $p(n,s,o){var l=n.pingCache;if(l===null){l=n.pingCache=new UI;var m=new Set;l.set(s,m)}else m=l.get(s),m===void 0&&(m=new Set,l.set(s,m));m.has(o)||(Bp=!0,m.add(o),n=FI.bind(null,n,s,o),s.then(n,n))}function FI(n,s,o){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(Rt&o)===o&&(mn===4||mn===3&&(Rt&62914560)===Rt&&300>Ir()-qp?(kt&2)===0&&il(n,0):zp|=o,tl===Rt&&(tl=0)),Ts(n)}function ib(n,s){s===0&&(s=Ue()),n=Ji(n,s),n!==null&&(mi(n,s),Ts(n))}function KI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),ib(n,o)}function HI(n,s){var o=0;switch(n.tag){case 13:var l=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),ib(n,o)}function GI(n,s){return jr(n,s)}var Hf=null,al=null,Xp=!1,Gf=!1,Wp=!1,Jo=0;function Ts(n){n!==al&&n.next===null&&(al===null?Hf=al=n:al=al.next=n),Gf=!0,Xp||(Xp=!0,YI())}function Cc(n,s){if(!Wp&&Gf){Wp=!0;do for(var o=!1,l=Hf;l!==null;){if(n!==0){var m=l.pendingLanes;if(m===0)var y=0;else{var S=l.suspendedLanes,C=l.pingedLanes;y=(1<<31-hn(42|n)+1)-1,y&=m&~(S&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,ub(l,y))}else y=Rt,y=qe(l,l===Xt?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||Fr(l,y)||(o=!0,ub(l,y));l=l.next}while(o);Wp=!1}}function QI(){sb()}function sb(){Gf=Xp=!1;var n=0;Jo!==0&&(nR()&&(n=Jo),Jo=0);for(var s=Ir(),o=null,l=Hf;l!==null;){var m=l.next,y=ab(l,s);y===0?(l.next=null,o===null?Hf=m:o.next=m,m===null&&(al=o)):(o=l,(n!==0||(y&3)!==0)&&(Gf=!0)),l=m}Cc(n)}function ab(n,s){for(var o=n.suspendedLanes,l=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-hn(y),C=1<<S,M=m[S];M===-1?((C&o)===0||(C&l)!==0)&&(m[S]=Kr(C,s)):M<=s&&(n.expiredLanes|=C),y&=~C}if(s=Xt,o=Rt,o=qe(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,o===0||n===s&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ns(l),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Fr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(l!==null&&Ns(l),Ta(o)){case 2:case 8:o=as;break;case 32:o=Un;break;case 268435456:o=fi;break;default:o=Un}return l=ob.bind(null,n),o=jr(o,l),n.callbackPriority=s,n.callbackNode=o,s}return l!==null&&l!==null&&Ns(l),n.callbackPriority=2,n.callbackNode=null,2}function ob(n,s){if(tr!==0&&tr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Kf()&&n.callbackNode!==o)return null;var l=Rt;return l=qe(n,n===Xt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(F0(n,l,s),ab(n,Ir()),n.callbackNode!=null&&n.callbackNode===o?ob.bind(null,n):null)}function ub(n,s){if(Kf())return null;F0(n,s,!0)}function YI(){iR(function(){(kt&6)!==0?jr(Ro,QI):sb()})}function Jp(){return Jo===0&&(Jo=us()),Jo}function lb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:qi(""+n)}function cb(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function $I(n,s,o,l,m){if(s==="submit"&&o&&o.stateNode===m){var y=lb((m[ut]||null).action),S=l.submitter;S&&(s=(s=S[ut]||null)?lb(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var C=new Ra("action","action",null,l,m);n.push({event:C,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Jo!==0){var M=S?cb(m,S):new FormData(m);vp(o,{pending:!0,data:M,method:m.method,action:y},null,M)}}else typeof y=="function"&&(C.preventDefault(),M=S?cb(m,S):new FormData(m),vp(o,{pending:!0,data:M,method:m.method,action:y},y,M))},currentTarget:m}]})}}for(var Zp=0;Zp<ke.length;Zp++){var eg=ke[Zp],XI=eg.toLowerCase(),WI=eg[0].toUpperCase()+eg.slice(1);De(XI,"on"+WI)}De(oe,"onAnimationEnd"),De(he,"onAnimationIteration"),De(fe,"onAnimationStart"),De("dblclick","onDoubleClick"),De("focusin","onFocus"),De("focusout","onBlur"),De(ve,"onTransitionRun"),De(Oe,"onTransitionStart"),De(Me,"onTransitionCancel"),De(Ce,"onTransitionEnd"),Yr("onMouseEnter",["mouseout","mouseover"]),Yr("onMouseLeave",["mouseout","mouseover"]),Yr("onPointerEnter",["pointerout","pointerover"]),Yr("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function hb(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var l=n[o],m=l.event;l=l.listeners;e:{var y=void 0;if(s)for(var S=l.length-1;0<=S;S--){var C=l[S],M=C.instance,se=C.currentTarget;if(C=C.listener,M!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=se;try{y(m)}catch(_e){Nf(_e)}m.currentTarget=null,y=M}else for(S=0;S<l.length;S++){if(C=l[S],M=C.instance,se=C.currentTarget,C=C.listener,M!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=se;try{y(m)}catch(_e){Nf(_e)}m.currentTarget=null,y=M}}}}function Et(n,s){var o=s[xo];o===void 0&&(o=s[xo]=new Set);var l=n+"__bubble";o.has(l)||(fb(s,n,2,!1),o.add(l))}function tg(n,s,o){var l=0;s&&(l|=4),fb(o,n,l,s)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function ng(n){if(!n[Qf]){n[Qf]=!0,Sa.forEach(function(o){o!=="selectionchange"&&(JI.has(o)||tg(o,!1,n),tg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Qf]||(s[Qf]=!0,tg("selectionchange",!1,s))}}function fb(n,s,o,l){switch(kb(s)){case 2:var m=AR;break;case 8:m=IR;break;default:m=gg}o=m.bind(null,s,o,n),m=void 0,!Or||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),l?m!==void 0?n.addEventListener(s,o,{capture:!0,passive:m}):n.addEventListener(s,o,!0):m!==void 0?n.addEventListener(s,o,{passive:m}):n.addEventListener(s,o,!1)}function rg(n,s,o,l,m){var y=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var C=l.stateNode.containerInfo;if(C===m)break;if(S===4)for(S=l.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;C!==null;){if(S=ir(C),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){l=y=S;continue e}C=C.parentNode}}l=l.return}ds(function(){var se=y,_e=br(o),Te=[];e:{var ue=Pe.get(n);if(ue!==void 0){var ce=Ra,at=n;switch(n){case"keypress":if(Nr(o)===0)break e;case"keydown":case"keyup":ce=Xi;break;case"focusin":at="focus",ce=Gi;break;case"focusout":at="blur",ce=Gi;break;case"beforeblur":case"afterblur":ce=Gi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Pa;break;case oe:case he:case fe:ce=qs;break;case Ce:ce=Na;break;case"scroll":case"scrollend":ce=zs;break;case"wheel":ce=Wi;break;case"copy":case"cut":case"paste":ce=Qi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Oa;break;case"toggle":case"beforetoggle":ce=Lo}var nt=(s&4)!==0,Kt=!nt&&(n==="scroll"||n==="scrollend"),J=nt?ue!==null?ue+"Capture":null:ue;nt=[];for(var H=se,re;H!==null;){var be=H;if(re=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||re===null||J===null||(be=Fi(H,J),be!=null&&nt.push(Oc(H,be,re))),Kt)break;H=H.return}0<nt.length&&(ue=new ce(ue,at,null,o,_e),Te.push({event:ue,listeners:nt}))}}if((s&7)===0){e:{if(ue=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",ue&&o!==jn&&(at=o.relatedTarget||o.fromElement)&&(ir(at)||at[Ot]))break e;if((ce||ue)&&(ue=_e.window===_e?_e:(ue=_e.ownerDocument)?ue.defaultView||ue.parentWindow:window,ce?(at=o.relatedTarget||o.toElement,ce=se,at=at?ir(at):null,at!==null&&(Kt=u(at),nt=at.tag,at!==Kt||nt!==5&&nt!==27&&nt!==6)&&(at=null)):(ce=null,at=se),ce!==at)){if(nt=or,be="onMouseLeave",J="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(nt=Oa,be="onPointerLeave",J="onPointerEnter",H="pointer"),Kt=ce==null?ue:yr(ce),re=at==null?ue:yr(at),ue=new nt(be,H+"leave",ce,o,_e),ue.target=Kt,ue.relatedTarget=re,be=null,ir(_e)===se&&(nt=new nt(J,H+"enter",at,o,_e),nt.target=re,nt.relatedTarget=Kt,be=nt),Kt=be,ce&&at)t:{for(nt=ce,J=at,H=0,re=nt;re;re=ol(re))H++;for(re=0,be=J;be;be=ol(be))re++;for(;0<H-re;)nt=ol(nt),H--;for(;0<re-H;)J=ol(J),re--;for(;H--;){if(nt===J||J!==null&&nt===J.alternate)break t;nt=ol(nt),J=ol(J)}nt=null}else nt=null;ce!==null&&db(Te,ue,ce,nt,!1),at!==null&&Kt!==null&&db(Te,Kt,at,nt,!0)}}e:{if(ue=se?yr(se):window,ce=ue.nodeName&&ue.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ue.type==="file")var Ge=Bo;else if(sn(ue))if(Ri)Ge=ka;else{Ge=Ks;var yt=ff}else ce=ue.nodeName,!ce||ce.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?se&&Po(se.elementType)&&(Ge=Bo):Ge=rc;if(Ge&&(Ge=Ge(n,se))){Ai(Te,Ge,o,_e);break e}yt&&yt(n,ue,se),n==="focusout"&&se&&ue.type==="number"&&se.memoizedProps.value!=null&&$r(ue,"number",ue.value)}switch(yt=se?yr(se):window,n){case"focusin":(sn(yt)||yt.contentEditable==="true")&&(N=yt,K=se,G=null);break;case"focusout":G=K=N=null;break;case"mousedown":X=!0;break;case"contextmenu":case"mouseup":case"dragend":X=!1,U(Te,o,_e);break;case"selectionchange":if(O)break;case"keydown":case"keyup":U(Te,o,_e)}var Xe;if(Mr)e:{switch(n){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else _t?me(n,o)&&(rt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(w&&o.locale!=="ko"&&(_t||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&_t&&(Xe=Hi()):(Pr=_e,Ki="value"in Pr?Pr.value:Pr.textContent,_t=!0)),yt=Yf(se,rt),0<yt.length&&(rt=new Fs(rt,n,null,o,_e),Te.push({event:rt,listeners:yt}),Xe?rt.data=Xe:(Xe=Ne(o),Xe!==null&&(rt.data=Xe)))),(Xe=b?fn(n,o):wt(n,o))&&(rt=Yf(se,"onBeforeInput"),0<rt.length&&(yt=new Fs("onBeforeInput","beforeinput",null,o,_e),Te.push({event:yt,listeners:rt}),yt.data=Xe)),$I(Te,n,se,o,_e)}hb(Te,s)})}function Oc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Yf(n,s){for(var o=s+"Capture",l=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Fi(n,o),m!=null&&l.unshift(Oc(n,m,y)),m=Fi(n,s),m!=null&&l.push(Oc(n,m,y))),n.tag===3)return l;n=n.return}return[]}function ol(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function db(n,s,o,l,m){for(var y=s._reactName,S=[];o!==null&&o!==l;){var C=o,M=C.alternate,se=C.stateNode;if(C=C.tag,M!==null&&M===l)break;C!==5&&C!==26&&C!==27||se===null||(M=se,m?(se=Fi(o,y),se!=null&&S.unshift(Oc(o,se,M))):m||(se=Fi(o,y),se!=null&&S.push(Oc(o,se,M)))),o=o.return}S.length!==0&&n.push({event:s,listeners:S})}var ZI=/\r\n?/g,eR=/\u0000|\uFFFD/g;function mb(n){return(typeof n=="string"?n:""+n).replace(ZI,`
`).replace(eR,"")}function pb(n,s){return s=mb(s),mb(n)===s}function $f(){}function Ft(n,s,o,l,m,y){switch(o){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Dr(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Dr(n,""+l);break;case"className":_r(n,"class",l);break;case"tabIndex":_r(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(n,o,l);break;case"style":Oo(n,l,y);break;case"data":if(s!=="object"){_r(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=qi(""+l),n.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&Ft(n,s,"name",m.name,m,null),Ft(n,s,"formEncType",m.formEncType,m,null),Ft(n,s,"formMethod",m.formMethod,m,null),Ft(n,s,"formTarget",m.formTarget,m,null)):(Ft(n,s,"encType",m.encType,m,null),Ft(n,s,"method",m.method,m,null),Ft(n,s,"target",m.target,m,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=qi(""+l),n.setAttribute(o,l);break;case"onClick":l!=null&&(n.onclick=$f);break;case"onScroll":l!=null&&Et("scroll",n);break;case"onScrollEnd":l!=null&&Et("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}o=qi(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""+l):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":l===!0?n.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,l):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(o,l):n.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(o):n.setAttribute(o,l);break;case"popover":Et("beforetoggle",n),Et("toggle",n),vr(n,"popover",l);break;case"xlinkActuate":gn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":gn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":gn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":gn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":gn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":gn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":gn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":gn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":gn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":vr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Jn.get(o)||o,vr(n,o,l))}}function ig(n,s,o,l,m,y){switch(o){case"style":Oo(n,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof l=="string"?Dr(n,l):(typeof l=="number"||typeof l=="bigint")&&Dr(n,""+l);break;case"onScroll":l!=null&&Et("scroll",n);break;case"onScrollEnd":l!=null&&Et("scrollend",n);break;case"onClick":l!=null&&(n.onclick=$f);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),y=n[ut]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(s,y,m),typeof l=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,l,m);break e}o in n?n[o]=l:l===!0?n.setAttribute(o,""):vr(n,o,l)}}}function nr(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",n),Et("load",n);var l=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":l=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ft(n,s,y,S,o,null)}}m&&Ft(n,s,"srcSet",o.srcSet,o,null),l&&Ft(n,s,"src",o.src,o,null);return;case"input":Et("invalid",n);var C=y=S=m=null,M=null,se=null;for(l in o)if(o.hasOwnProperty(l)){var _e=o[l];if(_e!=null)switch(l){case"name":m=_e;break;case"type":S=_e;break;case"checked":M=_e;break;case"defaultChecked":se=_e;break;case"value":y=_e;break;case"defaultValue":C=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,s));break;default:Ft(n,s,l,_e,o,null)}}cs(n,y,C,M,se,S,m,!1),vi(n);return;case"select":Et("invalid",n),l=S=y=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":y=C;break;case"defaultValue":S=C;break;case"multiple":l=C;default:Ft(n,s,m,C,o,null)}s=y,o=S,n.multiple=!!l,s!=null?_i(n,!!l,s,!1):o!=null&&_i(n,!!l,o,!0);return;case"textarea":Et("invalid",n),y=m=l=null;for(S in o)if(o.hasOwnProperty(S)&&(C=o[S],C!=null))switch(S){case"value":l=C;break;case"defaultValue":m=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:Ft(n,s,S,C,o,null)}hs(n,l,m,y),vi(n);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(l=o[M],l!=null))switch(M){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(n,s,M,l,o,null)}return;case"dialog":Et("beforetoggle",n),Et("toggle",n),Et("cancel",n),Et("close",n);break;case"iframe":case"object":Et("load",n);break;case"video":case"audio":for(l=0;l<Dc.length;l++)Et(Dc[l],n);break;case"image":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"embed":case"source":case"link":Et("error",n),Et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(l=o[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ft(n,s,se,l,o,null)}return;default:if(Po(s)){for(_e in o)o.hasOwnProperty(_e)&&(l=o[_e],l!==void 0&&ig(n,s,_e,l,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(l=o[C],l!=null&&Ft(n,s,C,l,o,null))}function tR(n,s,o,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,C=null,M=null,se=null,_e=null;for(ce in o){var Te=o[ce];if(o.hasOwnProperty(ce)&&Te!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":M=Te;default:l.hasOwnProperty(ce)||Ft(n,s,ce,null,l,Te)}}for(var ue in l){var ce=l[ue];if(Te=o[ue],l.hasOwnProperty(ue)&&(ce!=null||Te!=null))switch(ue){case"type":y=ce;break;case"name":m=ce;break;case"checked":se=ce;break;case"defaultChecked":_e=ce;break;case"value":S=ce;break;case"defaultValue":C=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,s));break;default:ce!==Te&&Ft(n,s,ue,ce,l,Te)}}zn(n,S,C,M,se,_e,y,m);return;case"select":ce=S=C=ue=null;for(y in o)if(M=o[y],o.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":ce=M;default:l.hasOwnProperty(y)||Ft(n,s,y,null,l,M)}for(m in l)if(y=l[m],M=o[m],l.hasOwnProperty(m)&&(y!=null||M!=null))switch(m){case"value":ue=y;break;case"defaultValue":C=y;break;case"multiple":S=y;default:y!==M&&Ft(n,s,m,y,l,M)}s=C,o=S,l=ce,ue!=null?_i(n,!!o,ue,!1):!!l!=!!o&&(s!=null?_i(n,!!o,s,!0):_i(n,!!o,o?[]:"",!1));return;case"textarea":ce=ue=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!l.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ft(n,s,C,null,l,m)}for(S in l)if(m=l[S],y=o[S],l.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":ue=m;break;case"defaultValue":ce=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Ft(n,s,S,m,l,y)}It(n,ue,ce);return;case"option":for(var at in o)if(ue=o[at],o.hasOwnProperty(at)&&ue!=null&&!l.hasOwnProperty(at))switch(at){case"selected":n.selected=!1;break;default:Ft(n,s,at,null,l,ue)}for(M in l)if(ue=l[M],ce=o[M],l.hasOwnProperty(M)&&ue!==ce&&(ue!=null||ce!=null))switch(M){case"selected":n.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Ft(n,s,M,ue,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in o)ue=o[nt],o.hasOwnProperty(nt)&&ue!=null&&!l.hasOwnProperty(nt)&&Ft(n,s,nt,null,l,ue);for(se in l)if(ue=l[se],ce=o[se],l.hasOwnProperty(se)&&ue!==ce&&(ue!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,s));break;default:Ft(n,s,se,ue,l,ce)}return;default:if(Po(s)){for(var Kt in o)ue=o[Kt],o.hasOwnProperty(Kt)&&ue!==void 0&&!l.hasOwnProperty(Kt)&&ig(n,s,Kt,void 0,l,ue);for(_e in l)ue=l[_e],ce=o[_e],!l.hasOwnProperty(_e)||ue===ce||ue===void 0&&ce===void 0||ig(n,s,_e,ue,l,ce);return}}for(var J in o)ue=o[J],o.hasOwnProperty(J)&&ue!=null&&!l.hasOwnProperty(J)&&Ft(n,s,J,null,l,ue);for(Te in l)ue=l[Te],ce=o[Te],!l.hasOwnProperty(Te)||ue===ce||ue==null&&ce==null||Ft(n,s,Te,ue,l,ce)}var sg=null,ag=null;function Xf(n){return n.nodeType===9?n:n.ownerDocument}function gb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function og(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ug=null;function nR(){var n=window.event;return n&&n.type==="popstate"?n===ug?!1:(ug=n,!0):(ug=null,!1)}var vb=typeof setTimeout=="function"?setTimeout:void 0,rR=typeof clearTimeout=="function"?clearTimeout:void 0,_b=typeof Promise=="function"?Promise:void 0,iR=typeof queueMicrotask=="function"?queueMicrotask:typeof _b<"u"?function(n){return _b.resolve(null).then(n).catch(sR)}:vb;function sR(n){setTimeout(function(){throw n})}function Ja(n){return n==="head"}function bb(n,s){var o=s,l=0,m=0;do{var y=o.nextSibling;if(n.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<l&&8>l){o=l;var S=n.ownerDocument;if(o&1&&Pc(S.documentElement),o&2&&Pc(S.body),o&4)for(o=S.head,Pc(o),S=o.firstChild;S;){var C=S.nextSibling,M=S.nodeName;S[Ls]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=C}}if(m===0){n.removeChild(y),zc(s);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:l=o.charCodeAt(0)-48;else l=0;o=y}while(o);zc(s)}function lg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":lg(o),$n(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function aR(n,s,o,l){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ls])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=es(n.nextSibling),n===null)break}return null}function oR(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=es(n.nextSibling),n===null))return null;return n}function cg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function uR(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var l=function(){s(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function es(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var hg=null;function Eb(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function Tb(n,s,o){switch(s=Xf(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Pc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);$n(n)}var Ni=new Map,wb=new Set;function Wf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ra=Le.d;Le.d={f:lR,r:cR,D:hR,C:fR,L:dR,m:mR,X:gR,S:pR,M:yR};function lR(){var n=ra.f(),s=qf();return n||s}function cR(n){var s=Pn(n);s!==null&&s.tag===5&&s.type==="form"?F_(s):ra.r(n)}var ul=typeof document>"u"?null:document;function Sb(n,s,o){var l=ul;if(l&&typeof s=="string"&&s){var m=en(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),wb.has(m)||(wb.add(m),n={rel:n,crossOrigin:o,href:s},l.querySelector(m)===null&&(s=l.createElement("link"),nr(s,"link",n),Vt(s),l.head.appendChild(s)))}}function hR(n){ra.D(n),Sb("dns-prefetch",n,null)}function fR(n,s){ra.C(n,s),Sb("preconnect",n,s)}function dR(n,s,o){ra.L(n,s,o);var l=ul;if(l&&n&&s){var m='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+en(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+en(o.imageSizes)+'"]')):m+='[href="'+en(n)+'"]';var y=m;switch(s){case"style":y=ll(n);break;case"script":y=cl(n)}Ni.has(y)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Ni.set(y,n),l.querySelector(m)!==null||s==="style"&&l.querySelector(Nc(y))||s==="script"&&l.querySelector(Vc(y))||(s=l.createElement("link"),nr(s,"link",n),Vt(s),l.head.appendChild(s)))}}function mR(n,s){ra.m(n,s);var o=ul;if(o&&n){var l=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+en(l)+'"][href="'+en(n)+'"]',y=m;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=cl(n)}if(!Ni.has(y)&&(n=E({rel:"modulepreload",href:n},s),Ni.set(y,n),o.querySelector(m)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vc(y)))return}l=o.createElement("link"),nr(l,"link",n),Vt(l),o.head.appendChild(l)}}}function pR(n,s,o){ra.S(n,s,o);var l=ul;if(l&&n){var m=Xn(l).hoistableStyles,y=ll(n);s=s||"default";var S=m.get(y);if(!S){var C={loading:0,preload:null};if(S=l.querySelector(Nc(y)))C.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Ni.get(y))&&fg(n,o);var M=S=l.createElement("link");Vt(M),nr(M,"link",n),M._p=new Promise(function(se,_e){M.onload=se,M.onerror=_e}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Jf(S,s,l)}S={type:"stylesheet",instance:S,count:1,state:C},m.set(y,S)}}}function gR(n,s){ra.X(n,s);var o=ul;if(o&&n){var l=Xn(o).hoistableScripts,m=cl(n),y=l.get(m);y||(y=o.querySelector(Vc(m)),y||(n=E({src:n,async:!0},s),(s=Ni.get(m))&&dg(n,s),y=o.createElement("script"),Vt(y),nr(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function yR(n,s){ra.M(n,s);var o=ul;if(o&&n){var l=Xn(o).hoistableScripts,m=cl(n),y=l.get(m);y||(y=o.querySelector(Vc(m)),y||(n=E({src:n,async:!0,type:"module"},s),(s=Ni.get(m))&&dg(n,s),y=o.createElement("script"),Vt(y),nr(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function Ab(n,s,o,l){var m=(m=et.current)?Wf(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ll(o.href),o=Xn(m).hoistableStyles,l=o.get(s),l||(l={type:"style",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ll(o.href);var y=Xn(m).hoistableStyles,S=y.get(n);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=m.querySelector(Nc(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Ni.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ni.set(n,o),y||vR(m,n,o,S.state))),s&&l===null)throw Error(r(528,""));return S}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=cl(o),o=Xn(m).hoistableScripts,l=o.get(s),l||(l={type:"script",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ll(n){return'href="'+en(n)+'"'}function Nc(n){return'link[rel="stylesheet"]['+n+"]"}function Ib(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function vR(n,s,o,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),nr(s,"link",o),Vt(s),n.head.appendChild(s))}function cl(n){return'[src="'+en(n)+'"]'}function Vc(n){return"script[async]"+n}function Rb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+en(o.href)+'"]');if(l)return s.instance=l,Vt(l),l;var m=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Vt(l),nr(l,"style",m),Jf(l,o.precedence,n),s.instance=l;case"stylesheet":m=ll(o.href);var y=n.querySelector(Nc(m));if(y)return s.state.loading|=4,s.instance=y,Vt(y),y;l=Ib(o),(m=Ni.get(m))&&fg(l,m),y=(n.ownerDocument||n).createElement("link"),Vt(y);var S=y;return S._p=new Promise(function(C,M){S.onload=C,S.onerror=M}),nr(y,"link",l),s.state.loading|=4,Jf(y,o.precedence,n),s.instance=y;case"script":return y=cl(o.src),(m=n.querySelector(Vc(y)))?(s.instance=m,Vt(m),m):(l=o,(m=Ni.get(y))&&(l=E({},o),dg(l,m)),n=n.ownerDocument||n,m=n.createElement("script"),Vt(m),nr(m,"link",l),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Jf(l,o.precedence,n));return s.instance}function Jf(n,s,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=l.length?l[l.length-1]:null,y=m,S=0;S<l.length;S++){var C=l[S];if(C.dataset.precedence===s)y=C;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function fg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function dg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Zf=null;function xb(n,s,o){if(Zf===null){var l=new Map,m=Zf=new Map;m.set(o,l)}else m=Zf,l=m.get(o),l||(l=new Map,m.set(o,l));if(l.has(n))return l;for(l.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var y=o[m];if(!(y[Ls]||y[Zt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=n+S;var C=l.get(S);C?C.push(y):l.set(S,[y])}}return l}function Cb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function _R(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Db(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Mc=null;function bR(){}function ER(n,s,o){if(Mc===null)throw Error(r(475));var l=Mc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=ll(o.href),y=n.querySelector(Nc(m));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=ed.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=y,Vt(y);return}y=n.ownerDocument||n,o=Ib(o),(m=Ni.get(m))&&fg(o,m),y=y.createElement("link"),Vt(y);var S=y;S._p=new Promise(function(C,M){S.onload=C,S.onerror=M}),nr(y,"link",o),s.instance=y}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=ed.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function TR(){if(Mc===null)throw Error(r(475));var n=Mc;return n.stylesheets&&n.count===0&&mg(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&mg(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function ed(){if(this.count--,this.count===0){if(this.stylesheets)mg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var td=null;function mg(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,td=new Map,s.forEach(wR,n),td=null,ed.call(n))}function wR(n,s){if(!(s.state.loading&4)){var o=td.get(n);if(o)var l=o.get(null);else{o=new Map,td.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),l=S)}l&&o.set(null,l)}m=s.instance,S=m.getAttribute("data-precedence"),y=o.get(S)||l,y===l&&o.set(null,m),o.set(S,m),this.count++,l=ed.bind(this),m.addEventListener("load",l),m.addEventListener("error",l),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var kc={$$typeof:ae,Provider:null,Consumer:null,_currentValue:Qe,_currentValue2:Qe,_threadCount:0};function SR(n,s,o,l,m,y,S,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=l,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Ob(n,s,o,l,m,y,S,C,M,se,_e,Te){return n=new SR(n,s,o,S,C,M,se,Te),s=1,y===!0&&(s|=24),y=Zr(3,null,null,s),n.current=y,y.stateNode=n,s=$m(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:l,isDehydrated:o,cache:s},Zm(y),n}function Pb(n){return n?(n=ys,n):ys}function Nb(n,s,o,l,m,y){m=Pb(m),l.context===null?l.context=m:l.pendingContext=m,l=Ba(s),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=za(n,l,s),o!==null&&(ii(o,n,s),fc(o,n,s))}function Vb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function pg(n,s){Vb(n,s),(n=n.alternate)&&Vb(n,s)}function Mb(n){if(n.tag===13){var s=Ji(n,67108864);s!==null&&ii(s,n,67108864),pg(n,67108864)}}var nd=!0;function AR(n,s,o,l){var m=ye.T;ye.T=null;var y=Le.p;try{Le.p=2,gg(n,s,o,l)}finally{Le.p=y,ye.T=m}}function IR(n,s,o,l){var m=ye.T;ye.T=null;var y=Le.p;try{Le.p=8,gg(n,s,o,l)}finally{Le.p=y,ye.T=m}}function gg(n,s,o,l){if(nd){var m=yg(l);if(m===null)rg(n,s,l,rd,o),Lb(n,l);else if(xR(m,n,s,o,l))l.stopPropagation();else if(Lb(n,l),s&4&&-1<RR.indexOf(n)){for(;m!==null;){var y=Pn(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=Sn(y.pendingLanes);if(S!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var M=1<<31-hn(S);C.entanglements[1]|=M,S&=~M}Ts(y),(kt&6)===0&&(zf=Ir()+500,Cc(0))}}break;case 13:C=Ji(y,2),C!==null&&ii(C,y,2),qf(),pg(y,2)}if(y=yg(l),y===null&&rg(n,s,l,rd,o),y===m)break;m=y}m!==null&&l.stopPropagation()}else rg(n,s,l,null,o)}}function yg(n){return n=br(n),vg(n)}var rd=null;function vg(n){if(rd=null,n=ir(n),n!==null){var s=u(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return rd=n,null}function kb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nc()){case Ro:return 2;case as:return 8;case Un:case ku:return 32;case fi:return 268435456;default:return 32}default:return 32}}var _g=!1,Za=null,eo=null,to=null,Lc=new Map,Uc=new Map,no=[],RR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lb(n,s){switch(n){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(s.pointerId)}}function Bc(n,s,o,l,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:o,eventSystemFlags:l,nativeEvent:y,targetContainers:[m]},s!==null&&(s=Pn(s),s!==null&&Mb(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function xR(n,s,o,l,m){switch(s){case"focusin":return Za=Bc(Za,n,s,o,l,m),!0;case"dragenter":return eo=Bc(eo,n,s,o,l,m),!0;case"mouseover":return to=Bc(to,n,s,o,l,m),!0;case"pointerover":var y=m.pointerId;return Lc.set(y,Bc(Lc.get(y)||null,n,s,o,l,m)),!0;case"gotpointercapture":return y=m.pointerId,Uc.set(y,Bc(Uc.get(y)||null,n,s,o,l,m)),!0}return!1}function Ub(n){var s=ir(n.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Ui(n.priority,function(){if(o.tag===13){var l=ri();l=ls(l);var m=Ji(o,l);m!==null&&ii(m,o,l),pg(o,l)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function id(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=yg(n.nativeEvent);if(o===null){o=n.nativeEvent;var l=new o.constructor(o.type,o);jn=l,o.target.dispatchEvent(l),jn=null}else return s=Pn(o),s!==null&&Mb(s),n.blockedOn=o,!1;s.shift()}return!0}function Bb(n,s,o){id(n)&&o.delete(s)}function CR(){_g=!1,Za!==null&&id(Za)&&(Za=null),eo!==null&&id(eo)&&(eo=null),to!==null&&id(to)&&(to=null),Lc.forEach(Bb),Uc.forEach(Bb)}function sd(n,s){n.blockedOn===s&&(n.blockedOn=null,_g||(_g=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,CR)))}var ad=null;function zb(n){ad!==n&&(ad=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===n&&(ad=null);for(var s=0;s<n.length;s+=3){var o=n[s],l=n[s+1],m=n[s+2];if(typeof l!="function"){if(vg(l||o)===null)continue;break}var y=Pn(o);y!==null&&(n.splice(s,3),s-=3,vp(y,{pending:!0,data:m,method:o.method,action:l},l,m))}}))}function zc(n){function s(M){return sd(M,n)}Za!==null&&sd(Za,n),eo!==null&&sd(eo,n),to!==null&&sd(to,n),Lc.forEach(s),Uc.forEach(s);for(var o=0;o<no.length;o++){var l=no[o];l.blockedOn===n&&(l.blockedOn=null)}for(;0<no.length&&(o=no[0],o.blockedOn===null);)Ub(o),o.blockedOn===null&&no.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var m=o[l],y=o[l+1],S=m[ut]||null;if(typeof y=="function")S||zb(o);else if(S){var C=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[ut]||null)C=S.formAction;else if(vg(m)!==null)continue}else C=S.action;typeof C=="function"?o[l+1]=C:(o.splice(l,3),l-=3),zb(o)}}}function bg(n){this._internalRoot=n}od.prototype.render=bg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,l=ri();Nb(o,l,n,s,null,null)},od.prototype.unmount=bg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Nb(n.current,2,null,n,null,null),qf(),s[Ot]=null}};function od(n){this._internalRoot=n}od.prototype.unstable_scheduleHydration=function(n){if(n){var s=gr();n={blockedOn:null,target:n,priority:s};for(var o=0;o<no.length&&s!==0&&s<no[o].priority;o++);no.splice(o,0,n),o===0&&Ub(n)}};var jb=e.version;if(jb!=="19.1.0")throw Error(r(527,jb,"19.1.0"));Le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var DR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{Nt=ud.inject(DR),vt=ud}catch{}}return qc.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,l="",m=r0,y=i0,S=s0,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=Ob(n,1,!1,null,null,o,l,m,y,S,C,null),n[Ot]=s.current,ng(n),new bg(s)},qc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var l=!1,m="",y=r0,S=i0,C=s0,M=null,se=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(se=o.formState)),s=Ob(n,1,!0,s,o??null,l,m,y,S,C,M,se),s.context=Pb(null),o=s.current,l=ri(),l=ls(l),m=Ba(l),m.callback=null,za(o,m,l),o=l,s.current.lanes=o,mi(s,o),Ts(s),n[Ot]=s.current,ng(n),new od(s)},qc.version="19.1.0",qc}var Jb;function FR(){if(Jb)return wg.exports;Jb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),wg.exports=qR(),wg.exports}var KR=FR();const Oy=ge.createContext(void 0),HR=()=>{};var Zb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},GR=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[t++];e[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[t++],c=i[t++],d=i[t++],p=((a&7)<<18|(u&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return e.join("")},kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const u=i[a],c=a+1<i.length,d=c?i[a+1]:0,p=a+2<i.length,v=p?i[a+2]:0,E=u>>2,I=(u&3)<<4|d>>4;let x=(d&15)<<2|v>>6,B=v&63;p||(B=64,c||(x=64)),r.push(t[E],t[I],t[x],t[B])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Mw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):GR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const u=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const v=a<i.length?t[i.charAt(a)]:64;++a;const I=a<i.length?t[i.charAt(a)]:64;if(++a,u==null||d==null||v==null||I==null)throw new QR;const x=u<<2|d>>4;if(r.push(x),v!==64){const B=d<<4&240|v>>2;if(r.push(B),I!==64){const z=v<<6&192|I;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class QR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(i){const e=Mw(i);return kw.encodeByteArray(e,!0)},Lw=function(i){return YR(i).replace(/\./g,"")},Uw=function(i){try{return kw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=()=>Bw().__FIREBASE_DEFAULTS__,XR=()=>{if(typeof process>"u"||typeof Zb>"u")return;const i=Zb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},WR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Uw(i[1]);return e&&JSON.parse(e)},fm=()=>{try{return HR()||$R()||XR()||WR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},JR=i=>{var e,t;return(t=(e=fm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},zw=()=>{var i;return(i=fm())===null||i===void 0?void 0:i.config},jw=i=>{var e;return(e=fm())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(i){return i.endsWith(".cloudworkstations.dev")}async function qw(i){return(await fetch(i,{credentials:"include"})).ok}const bh={};function ex(){const i={prod:[],emulator:[]};for(const e of Object.keys(bh))bh[e]?i.emulator.push(e):i.prod.push(e);return i}function tx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let eE=!1;function Py(i,e){if(typeof window>"u"||typeof document>"u"||!Gh(window.location.host)||bh[i]===e||bh[i]||eE)return;bh[i]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=ex().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,B){x.setAttribute("width","24"),x.setAttribute("id",B),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{eE=!0,c()},x}function E(x,B){x.setAttribute("id",B),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=tx(r),B=t("text"),z=document.getElementById(B)||document.createElement("span"),le=t("learnmore"),ie=document.getElementById(le)||document.createElement("a"),pe=t("preprendIcon"),de=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ae=x.element;d(ae),E(ie,le);const Re=v();p(de,pe),ae.append(de,z,ie,Re),document.body.appendChild(ae)}u?(z.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function rx(){var i;const e=(i=fm())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ix(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sx(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function ax(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ox(){const i=kn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Fw(){return!rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kw(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="FirebaseError";class pa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lx,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qh.prototype.create)}}class Qh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],c=u?cx(u,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new pa(a,d,r)}}function cx(i,e){return i.replace(hx,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const hx=/\{\$([^}]+)}/g;function fx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Eu(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const u=i[a],c=e[a];if(tE(u)&&tE(c)){if(!Eu(u,c))return!1}else if(u!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function tE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dx(i,e){const t=new mx(i,e);return t.subscribe.bind(t)}class mx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");px(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Rg),a.error===void 0&&(a.error=Rg),a.complete===void 0&&(a.complete=Rg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function px(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Rg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(i){return i&&i._delegate?i._delegate:i}class Tu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ZR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vx(e))try{this.getOrInitializeService({instanceIdentifier:uu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(e=uu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uu){return this.instances.has(e)}getOptions(e=uu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),u=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(a,u);const c=this.instances.get(a);return c&&e(c,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uu){return this.component?this.component.multipleInstances?e:uu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yx(i){return i===uu?void 0:i}function vx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(St||(St={}));const bx={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},Ex=St.INFO,Tx={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},wx=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=Tx[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ny{constructor(e){this.name=e,this._logLevel=Ex,this._logHandler=wx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const Sx=(i,e)=>e.some(t=>i instanceof t);let nE,rE;function Ax(){return nE||(nE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ix(){return rE||(rE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hw=new WeakMap,Qg=new WeakMap,Gw=new WeakMap,xg=new WeakMap,Vy=new WeakMap;function Rx(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{t(mo(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Hw.set(t,i)}).catch(()=>{}),Vy.set(e,i),e}function xx(i){if(Qg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});Qg.set(i,e)}let Yg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Qg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Gw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mo(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Cx(i){Yg=i(Yg)}function Dx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Cg(this),e,...t);return Gw.set(r,e.sort?e.sort():[e]),mo(r)}:Ix().includes(i)?function(...e){return i.apply(Cg(this),e),mo(Hw.get(this))}:function(...e){return mo(i.apply(Cg(this),e))}}function Ox(i){return typeof i=="function"?Dx(i):(i instanceof IDBTransaction&&xx(i),Sx(i,Ax())?new Proxy(i,Yg):i)}function mo(i){if(i instanceof IDBRequest)return Rx(i);if(xg.has(i))return xg.get(i);const e=Ox(i);return e!==i&&(xg.set(i,e),Vy.set(e,i)),e}const Cg=i=>Vy.get(i);function Px(i,e,{blocked:t,upgrade:r,blocking:a,terminated:u}={}){const c=indexedDB.open(i,e),d=mo(c);return r&&c.addEventListener("upgradeneeded",p=>{r(mo(c.result),p.oldVersion,p.newVersion,mo(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{u&&p.addEventListener("close",()=>u()),a&&p.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const Nx=["get","getKey","getAll","getAllKeys","count"],Vx=["put","add","delete","clear"],Dg=new Map;function iE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=Vx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Nx.includes(t)))return;const u=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),a&&p.done]))[0]};return Dg.set(e,u),u}Cx(i=>({...i,get:(e,t,r)=>iE(e,t)||i.get(e,t,r),has:(e,t)=>!!iE(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function kx(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $g="@firebase/app",sE="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=new Ny("@firebase/app"),Lx="@firebase/app-compat",Ux="@firebase/analytics-compat",Bx="@firebase/analytics",zx="@firebase/app-check-compat",jx="@firebase/app-check",qx="@firebase/auth",Fx="@firebase/auth-compat",Kx="@firebase/database",Hx="@firebase/data-connect",Gx="@firebase/database-compat",Qx="@firebase/functions",Yx="@firebase/functions-compat",$x="@firebase/installations",Xx="@firebase/installations-compat",Wx="@firebase/messaging",Jx="@firebase/messaging-compat",Zx="@firebase/performance",eC="@firebase/performance-compat",tC="@firebase/remote-config",nC="@firebase/remote-config-compat",rC="@firebase/storage",iC="@firebase/storage-compat",sC="@firebase/firestore",aC="@firebase/vertexai",oC="@firebase/firestore-compat",uC="firebase",lC="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="[DEFAULT]",cC={[$g]:"fire-core",[Lx]:"fire-core-compat",[Bx]:"fire-analytics",[Ux]:"fire-analytics-compat",[jx]:"fire-app-check",[zx]:"fire-app-check-compat",[qx]:"fire-auth",[Fx]:"fire-auth-compat",[Kx]:"fire-rtdb",[Hx]:"fire-data-connect",[Gx]:"fire-rtdb-compat",[Qx]:"fire-fn",[Yx]:"fire-fn-compat",[$x]:"fire-iid",[Xx]:"fire-iid-compat",[Wx]:"fire-fcm",[Jx]:"fire-fcm-compat",[Zx]:"fire-perf",[eC]:"fire-perf-compat",[tC]:"fire-rc",[nC]:"fire-rc-compat",[rC]:"fire-gcs",[iC]:"fire-gcs-compat",[sC]:"fire-fst",[oC]:"fire-fst-compat",[aC]:"fire-vertex","fire-js":"fire-js",[uC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,hC=new Map,Wg=new Map;function aE(i,e){try{i.container.addComponent(e)}catch(t){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Il(i){const e=i.name;if(Wg.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,i);for(const t of Md.values())aE(t,i);for(const t of hC.values())aE(t,i);return!0}function My(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ns(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new Qh("app","Firebase",fC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=lC;function Qw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xg,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw po.create("bad-app-name",{appName:String(a)});if(t||(t=zw()),!t)throw po.create("no-options");const u=Md.get(a);if(u){if(Eu(t,u.options)&&Eu(r,u.config))return u;throw po.create("duplicate-app",{appName:a})}const c=new _x(a);for(const p of Wg.values())c.addComponent(p);const d=new dC(t,r,c);return Md.set(a,d),d}function mC(i=Xg){const e=Md.get(i);if(!e&&i===Xg&&zw())return Qw();if(!e)throw po.create("no-app",{appName:i});return e}function go(i,e,t){var r;let a=(r=cC[i])!==null&&r!==void 0?r:i;t&&(a+=`-${t}`);const u=a.match(/\s|\//),c=e.match(/\s|\//);if(u||c){const d=[`Unable to register library "${a}" with version "${e}":`];u&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(d.join(" "));return}Il(new Tu(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebase-heartbeat-database",gC=1,Ch="firebase-heartbeat-store";let Og=null;function Yw(){return Og||(Og=Px(pC,gC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ch)}catch(t){console.warn(t)}}}}).catch(i=>{throw po.create("idb-open",{originalErrorMessage:i.message})})),Og}async function yC(i){try{const t=(await Yw()).transaction(Ch),r=await t.objectStore(Ch).get($w(i));return await t.done,r}catch(e){if(e instanceof pa)ca.warn(e.message);else{const t=po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ca.warn(t.message)}}}async function oE(i,e){try{const r=(await Yw()).transaction(Ch,"readwrite");await r.objectStore(Ch).put(e,$w(i)),await r.done}catch(t){if(t instanceof pa)ca.warn(t.message);else{const r=po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ca.warn(r.message)}}}function $w(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=1024,_C=30;class bC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=uE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>_C){const c=wC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ca.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=uE(),{heartbeatsToSend:r,unsentEntries:a}=EC(this._heartbeatsCache.heartbeats),u=Lw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return ca.warn(t),""}}}function uE(){return new Date().toISOString().substring(0,10)}function EC(i,e=vC){const t=[];let r=i.slice();for(const a of i){const u=t.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),lE(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),lE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class TC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kw()?ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function lE(i){return Lw(JSON.stringify({version:2,heartbeats:i})).length}function wC(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(i){Il(new Tu("platform-logger",e=>new Mx(e),"PRIVATE")),Il(new Tu("heartbeat",e=>new bC(e),"PRIVATE")),go($g,sE,i),go($g,sE,"esm2017"),go("fire-js","")}SC("");function ky(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function Xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AC=Xw,Ww=new Qh("auth","Firebase",Xw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Ny("@firebase/auth");function IC(i,...e){kd.logLevel<=St.WARN&&kd.warn(`Auth (${Ql}): ${i}`,...e)}function vd(i,...e){kd.logLevel<=St.ERROR&&kd.error(`Auth (${Ql}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(i,...e){throw Uy(i,...e)}function is(i,...e){return Uy(i,...e)}function Ly(i,e,t){const r=Object.assign(Object.assign({},AC()),{[e]:t});return new Qh("auth","Firebase",r).create(e,{appName:i.name})}function yu(i){return Ly(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RC(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cs(i,"argument-error"),Ly(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uy(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Ww.create(i,...e)}function ot(i,e,...t){if(!i)throw Uy(e,...t)}function sa(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vd(e),new Error(e)}function ha(i,e){i||sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function xC(){return cE()==="http:"||cE()==="https:"}function cE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||sx()||"connection"in navigator)?navigator.onLine:!0}function DC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.shortDelay=e,this.longDelay=t,ha(t>e,"Short delay should be less than long delay!"),this.isMobile=nx()||ax()}get(){return CC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(i,e){ha(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NC=new $h(3e4,6e4);function zy(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Yl(i,e,t,r,a={}){return Zw(i,a,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const d=Yh(Object.assign({key:i.config.apiKey},c)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const v=Object.assign({method:e,headers:p},u);return ix()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&Gh(i.emulatorConfig.host)&&(v.credentials="include"),Jw.fetch()(await e1(i,i.config.apiHost,t,d),v)})}async function Zw(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},OC),e);try{const a=new MC(i),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw ld(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const d=u.ok?c.errorMessage:c.error.message,[p,v]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ld(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw ld(i,"user-disabled",c);const E=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ly(i,E,v);Cs(i,E)}}catch(a){if(a instanceof pa)throw a;Cs(i,"network-request-failed",{message:String(a)})}}async function VC(i,e,t,r,a={}){const u=await Yl(i,e,t,r,a);return"mfaPendingCredential"in u&&Cs(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function e1(i,e,t,r){const a=`${e}${t}?${r}`,u=i,c=u.config.emulator?By(i.config,a):`${i.config.apiScheme}://${a}`;return PC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class MC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(is(this.auth,"network-request-failed")),NC.get())})}}function ld(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=is(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(i,e){return Yl(i,"POST","/v1/accounts:delete",e)}async function Ld(i,e){return Yl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LC(i,e=!1){const t=ss(i),r=await t.getIdToken(e),a=jy(r);ot(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:a,token:r,authTime:Eh(Pg(a.auth_time)),issuedAtTime:Eh(Pg(a.iat)),expirationTime:Eh(Pg(a.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Pg(i){return Number(i)*1e3}function jy(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Uw(t);return a?JSON.parse(a):(vd("Failed to decode base64 JWT payload"),null)}catch(a){return vd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function hE(i){const e=jy(i);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pa&&UC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function UC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eh(this.lastLoginAt),this.creationTime=Eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(i){var e;const t=i.auth,r=await i.getIdToken(),a=await Dh(i,Ld(t,{idToken:r}));ot(a==null?void 0:a.users.length,t,"internal-error");const u=a.users[0];i._notifyReloadListener(u);const c=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?t1(u.providerUserInfo):[],d=jC(i.providerData,c),p=i.isAnonymous,v=!(i.email&&u.passwordHash)&&!(d!=null&&d.length),E=p?v:!1,I={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new Zg(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,I)}async function zC(i){const e=ss(i);await Ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jC(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function t1(i){return i.map(e=>{var{providerId:t}=e,r=ky(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(i,e){const t=await Zw(i,{},async()=>{const r=Yh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=i.config,c=await e1(i,a,"/v1/token",`key=${u}`),d=await i._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Jw.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FC(i,e){return Yl(i,"POST","/v2/accounts:revokeToken",zy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=hE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:u}=await qC(e,t);this.updateTokensAndExpiration(r,a,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:u}=t,c=new Tl;return r&&(ot(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ot(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),u&&(ot(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(i,e){ot(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class rs{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,u=ky(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Zg(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Dh(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LC(this,e)}reload(){return zC(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject(yu(this.auth));const e=await this.getIdToken();return await Dh(this,kC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,u,c,d,p,v,E;const I=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(a=t.email)!==null&&a!==void 0?a:void 0,B=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,z=(c=t.photoURL)!==null&&c!==void 0?c:void 0,le=(d=t.tenantId)!==null&&d!==void 0?d:void 0,ie=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,pe=(v=t.createdAt)!==null&&v!==void 0?v:void 0,de=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ae,emailVerified:Re,isAnonymous:xe,providerData:Ve,stsTokenManager:L}=t;ot(ae&&L,e,"internal-error");const P=Tl.fromJSON(this.name,L);ot(typeof ae=="string",e,"internal-error"),io(I,e.name),io(x,e.name),ot(typeof Re=="boolean",e,"internal-error"),ot(typeof xe=="boolean",e,"internal-error"),io(B,e.name),io(z,e.name),io(le,e.name),io(ie,e.name),io(pe,e.name),io(de,e.name);const V=new rs({uid:ae,auth:e,email:x,emailVerified:Re,displayName:I,isAnonymous:xe,photoURL:z,phoneNumber:B,tenantId:le,stsTokenManager:P,createdAt:pe,lastLoginAt:de});return Ve&&Array.isArray(Ve)&&(V.providerData=Ve.map(q=>Object.assign({},q))),ie&&(V._redirectEventId=ie),V}static async _fromIdTokenResponse(e,t,r=!1){const a=new Tl;a.updateFromServerResponse(t);const u=new rs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Ud(u),u}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ot(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?t1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(u!=null&&u.length),d=new Tl;d.updateFromIdToken(r);const p=new rs({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Zg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Map;function aa(i){ha(i instanceof Function,"Expected a class definition");let e=fE.get(i);return e?(ha(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,fE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}n1.type="NONE";const dE=n1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(i,e,t){return`firebase:${i}:${e}:${t}`}class wl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:u}=this.auth;this.fullUserKey=_d(this.userKey,a.apiKey,u),this.fullPersistenceKey=_d("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ld(this.auth,{idToken:e}).catch(()=>{});return t?rs._fromGetAccountInfoResponse(this.auth,t,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new wl(aa(dE),e,r);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=a[0]||aa(dE);const c=_d(r,e.config.apiKey,e.name);let d=null;for(const v of t)try{const E=await v._get(c);if(E){let I;if(typeof E=="string"){const x=await Ld(e,{idToken:E}).catch(()=>{});if(!x)break;I=await rs._fromGetAccountInfoResponse(e,x,E)}else I=rs._fromJSON(e,E);v!==u&&(d=I),u=v;break}}catch{}const p=a.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new wl(u,e,r):(u=p[0],d&&await u._set(c,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(c)}catch{}})),new wl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(u1(e))return"Blackberry";if(l1(e))return"Webos";if(i1(e))return"Safari";if((e.includes("chrome/")||s1(e))&&!e.includes("edge/"))return"Chrome";if(o1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function r1(i=kn()){return/firefox\//i.test(i)}function i1(i=kn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s1(i=kn()){return/crios\//i.test(i)}function a1(i=kn()){return/iemobile/i.test(i)}function o1(i=kn()){return/android/i.test(i)}function u1(i=kn()){return/blackberry/i.test(i)}function l1(i=kn()){return/webos/i.test(i)}function qy(i=kn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function KC(i=kn()){var e;return qy(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HC(){return ox()&&document.documentMode===10}function c1(i=kn()){return qy(i)||o1(i)||l1(i)||u1(i)||/windows phone/i.test(i)||a1(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(i,e=[]){let t;switch(i){case"Browser":t=mE(kn());break;case"Worker":t=`${mE(kn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ql}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,d)=>{try{const p=e(u);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(i,e={}){return Yl(i,"GET","/v2/passwordPolicy",zy(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=6;class $C{constructor(e){var t,r,a,u;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:YC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,u,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pE(this),this.idTokenSubscription=new pE(this),this.beforeStateQueue=new GC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=aa(t)),this._initializationPromise=this.queue(async()=>{var r,a,u;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ld(this,{idToken:e}),r=await rs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ns(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ud(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject(yu(this));const t=e?ss(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ns(this.app)?Promise.reject(yu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject(yu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QC(this),t=new $C(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await FC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&aa(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[aa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(d,this,"internal-error"),d.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&IC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function dm(i){return ss(i)}class pE{constructor(e){this.auth=e,this.observer=null,this.addObserver=dx(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WC(i){Fy=i}function JC(i){return Fy.loadJS(i)}function ZC(){return Fy.gapiScript}function e2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(i,e){const t=My(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(Eu(u,e??{}))return a;Cs(a,"already-initialized")}return t.initialize({options:e})}function n2(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(aa);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function r2(i,e,t){const r=dm(i);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,u=f1(e),{host:c,port:d}=i2(e),p=d===null?"":`:${d}`,v={url:`${u}//${c}${p}/`},E=Object.freeze({host:c,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(Eu(v,r.config.emulator)&&Eu(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Gh(c)?(Py("Auth",!0),qw(`${u}//${c}${p}`)):s2()}function f1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function i2(i){const e=f1(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const u=a[1];return{host:u,port:gE(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:gE(c)}}}function gE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function s2(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sa("not implemented")}_getIdTokenResponse(e){return sa("not implemented")}_linkToIdToken(e,t){return sa("not implemented")}_getReauthenticationResolver(e){return sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(i,e){return VC(i,"POST","/v1/accounts:signInWithIdp",zy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="http://localhost";class wu extends d1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,u=ky(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new wu(r,a);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Sl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Sl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sl(e,t)}buildRequest(){const e={requestUri:a2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Ky{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Xh{constructor(){super("facebook.com")}static credential(e){return wu._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wu._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return As.credential(t,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Xh{constructor(){super("github.com")}static credential(e){return wu._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends Xh{constructor(){super("twitter.com")}static credential(e,t){return wu._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return co.credential(t,r)}catch{return null}}}co.TWITTER_SIGN_IN_METHOD="twitter.com";co.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const u=await rs._fromIdTokenResponse(e,r,a),c=yE(r);return new Rl({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=yE(r);return new Rl({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function yE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends pa{constructor(e,t,r,a){var u;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Bd(e,t,r,a)}}function m1(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(i,u,e,r):u})}async function o2(i,e,t=!1){const r=await Dh(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Rl._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(i,e,t=!1){const{auth:r}=i;if(ns(r.app))return Promise.reject(yu(r));const a="reauthenticate";try{const u=await Dh(i,m1(r,a,e,i),t);ot(u.idToken,r,"internal-error");const c=jy(u.idToken);ot(c,r,"internal-error");const{sub:d}=c;return ot(i.uid===d,r,"user-mismatch"),Rl._forOperation(i,a,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Cs(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(i,e,t=!1){if(ns(i.app))return Promise.reject(yu(i));const r="signIn",a=await m1(i,r,e),u=await Rl._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(u.user),u}function c2(i,e,t,r){return ss(i).onIdTokenChanged(e,t,r)}function h2(i,e,t){return ss(i).beforeAuthStateChanged(e,t)}function f2(i){return ss(i).signOut()}const zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=1e3,m2=10;class g1 extends p1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=c1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);HC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,m2):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},d2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}g1.type="LOCAL";const p2=g1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1 extends p1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}y1.type="SESSION";const v1=y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:u}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async v=>v(t.origin,u)),p=await g2(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((d,p)=>{const v=Hy("",20);a.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(I){const x=I;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(x.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function v2(i){xs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function _2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b2(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function E2(){return _1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebaseLocalStorageDb",T2=1,jd="firebaseLocalStorage",E1="fbase_key";class Wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pm(i,e){return i.transaction([jd],e?"readwrite":"readonly").objectStore(jd)}function w2(){const i=indexedDB.deleteDatabase(b1);return new Wh(i).toPromise()}function ey(){const i=indexedDB.open(b1,T2);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(jd,{keyPath:E1})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(jd)?e(r):(r.close(),await w2(),e(await ey()))})})}async function vE(i,e,t){const r=pm(i,!0).put({[E1]:e,value:t});return new Wh(r).toPromise()}async function S2(i,e){const t=pm(i,!1).get(e),r=await new Wh(t).toPromise();return r===void 0?null:r.value}function _E(i,e){const t=pm(i,!0).delete(e);return new Wh(t).toPromise()}const A2=800,I2=3;class T1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ey(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>I2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(E2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _2(),!this.activeServiceWorker)return;this.sender=new y2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ey();return await vE(e,zd,"1"),await _E(e,zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>S2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_E(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=pm(a,!1).getAll();return new Wh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}T1.type="LOCAL";const R2=T1;new $h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(i,e){return e?aa(e):(ot(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends d1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function x2(i){return l2(i.auth,new Gy(i),i.bypassAuthState)}function C2(i){const{auth:e,user:t}=i;return ot(t,e,"internal-error"),u2(t,new Gy(i),i.bypassAuthState)}async function D2(i){const{auth:e,user:t}=i;return ot(t,e,"internal-error"),o2(t,new Gy(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t,r,a,u=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:u,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x2;case"linkViaPopup":case"linkViaRedirect":return D2;case"reauthViaPopup":case"reauthViaRedirect":return C2;default:Cs(this.auth,"internal-error")}}resolve(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new $h(2e3,1e4);async function A1(i,e,t){if(ns(i.app))return Promise.reject(is(i,"operation-not-supported-in-this-environment"));const r=dm(i);RC(i,e,Ky);const a=w1(r,t);return new pu(r,"signInViaPopup",e,a).executeNotNull()}class pu extends S1{constructor(e,t,r,a,u){super(e,t,a,u),this.provider=r,this.authWindow=null,this.pollId=null,pu.currentPopupAction&&pu.currentPopupAction.cancel(),pu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const e=Hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O2.get())};e()}}pu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="pendingRedirect",bd=new Map;class N2 extends S1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const r=await V2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V2(i,e){const t=L2(e),r=k2(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function M2(i,e){bd.set(i._key(),e)}function k2(i){return aa(i._redirectPersistence)}function L2(i){return _d(P2,i.config.apiKey,i.name)}async function U2(i,e,t=!1){if(ns(i.app))return Promise.reject(yu(i));const r=dm(i),a=w1(r,e),c=await new N2(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=10*60*1e3;class z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!I1(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(is(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B2&&this.cachedEventUids.clear(),this.cachedEventUids.has(bE(e))}saveEventToCache(e){this.cachedEventUids.add(bE(e)),this.lastProcessedEventTime=Date.now()}}function bE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function I1({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function j2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return I1(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(i,e={}){return Yl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K2=/^https?/;async function H2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await q2(i);for(const t of e)try{if(G2(t))return}catch{}Cs(i,"unauthorized-domain")}function G2(i){const e=Jg(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!K2.test(t))return!1;if(F2.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new $h(3e4,6e4);function EE(){const i=xs().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function Y2(i){return new Promise((e,t)=>{var r,a,u;function c(){EE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EE(),t(is(i,"network-request-failed"))},timeout:Q2.get()})}if(!((a=(r=xs().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=xs().gapi)===null||u===void 0)&&u.load)c();else{const d=e2("iframefcb");return xs()[d]=()=>{gapi.load?c():t(is(i,"network-request-failed"))},JC(`${ZC()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ed=null,e})}let Ed=null;function $2(i){return Ed=Ed||Y2(i),Ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new $h(5e3,15e3),W2="__/auth/iframe",J2="emulator/auth/iframe",Z2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tD(i){const e=i.config;ot(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?By(e,J2):`https://${i.config.authDomain}/${W2}`,r={apiKey:e.apiKey,appName:i.name,v:Ql},a=eD.get(i.config.apiHost);a&&(r.eid=a);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${Yh(r).slice(1)}`}async function nD(i){const e=await $2(i),t=xs().gapi;return ot(t,i,"internal-error"),e.open({where:document.body,url:tD(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z2,dontclear:!0},r=>new Promise(async(a,u)=>{await r.restyle({setHideOnLeave:!1});const c=is(i,"network-request-failed"),d=xs().setTimeout(()=>{u(c)},X2.get());function p(){xs().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iD=500,sD=600,aD="_blank",oD="http://localhost";class TE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uD(i,e,t,r=iD,a=sD){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},rD),{width:r.toString(),height:a.toString(),top:u,left:c}),v=kn().toLowerCase();t&&(d=s1(v)?aD:t),r1(v)&&(e=e||oD,p.scrollbars="yes");const E=Object.entries(p).reduce((x,[B,z])=>`${x}${B}=${z},`,"");if(KC(v)&&d!=="_self")return lD(e||"",d),new TE(null);const I=window.open(e||"",d,E);ot(I,i,"popup-blocked");try{I.focus()}catch{}return new TE(I)}function lD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="__/auth/handler",hD="emulator/auth/handler",fD=encodeURIComponent("fac");async function wE(i,e,t,r,a,u){ot(i.config.authDomain,i,"auth-domain-config-required"),ot(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Ql,eventId:a};if(e instanceof Ky){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",fx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))c[E]=I}if(e instanceof Xh){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(c.scopes=E.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await i._getAppCheckToken(),v=p?`#${fD}=${encodeURIComponent(p)}`:"";return`${dD(i)}?${Yh(d).slice(1)}${v}`}function dD({config:i}){return i.emulator?By(i,hD):`https://${i.authDomain}/${cD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class mD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v1,this._completeRedirectFn=U2,this._overrideRedirectResult=M2}async _openPopup(e,t,r,a){var u;ha((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await wE(e,t,r,Jg(),a);return uD(e,c,Hy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const u=await wE(e,t,r,Jg(),a);return v2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(ha(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await nD(e),r=new z2(e);return t.register("authEvent",a=>(ot(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ng,{type:Ng},a=>{var u;const c=(u=a==null?void 0:a[0])===null||u===void 0?void 0:u[Ng];c!==void 0&&t(!!c),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=H2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return c1()||i1()||qy()}}const pD=mD;var SE="@firebase/auth",AE="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vD(i){Il(new Tu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ot(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h1(i)},v=new XC(r,a,u,p);return n2(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Il(new Tu("auth-internal",e=>{const t=dm(e.getProvider("auth").getImmediate());return(r=>new gD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(SE,AE,yD(i)),go(SE,AE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=5*60,bD=jw("authIdTokenMaxAge")||_D;let IE=null;const ED=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>bD)return;const a=t==null?void 0:t.token;IE!==a&&(IE=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function TD(i=mC()){const e=My(i,"auth");if(e.isInitialized())return e.getImmediate();const t=t2(i,{popupRedirectResolver:pD,persistence:[R2,p2,v1]}),r=jw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=ED(u.toString());h2(t,c,()=>c(t.currentUser)),c2(t,d=>c(d))}}const a=JR("auth");return a?r2(t,`http://${a}`):Py("Auth",!1),t}function wD(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}WC({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const u=is("internal-error");u.customData=a,t(u)},r.type="text/javascript",r.charset="UTF-8",wD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vD("Browser");var SD="firebase",AD="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go(SD,AD,"app");var RE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,R1;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,P){function V(){}V.prototype=P.prototype,L.D=P.prototype,L.prototype=new V,L.prototype.constructor=L,L.C=function(q,Y,W){for(var k=Array(arguments.length-2),On=2;On<arguments.length;On++)k[On-2]=arguments[On];return P.prototype[Y].apply(q,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,P,V){V||(V=0);var q=Array(16);if(typeof P=="string")for(var Y=0;16>Y;++Y)q[Y]=P.charCodeAt(V++)|P.charCodeAt(V++)<<8|P.charCodeAt(V++)<<16|P.charCodeAt(V++)<<24;else for(Y=0;16>Y;++Y)q[Y]=P[V++]|P[V++]<<8|P[V++]<<16|P[V++]<<24;P=L.g[0],V=L.g[1],Y=L.g[2];var W=L.g[3],k=P+(W^V&(Y^W))+q[0]+3614090360&4294967295;P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[1]+3905402710&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[2]+606105819&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[3]+3250441966&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(W^V&(Y^W))+q[4]+4118548399&4294967295,P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[5]+1200080426&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[6]+2821735955&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[7]+4249261313&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(W^V&(Y^W))+q[8]+1770035416&4294967295,P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[9]+2336552879&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[10]+4294925233&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[11]+2304563134&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(W^V&(Y^W))+q[12]+1804603682&4294967295,P=V+(k<<7&4294967295|k>>>25),k=W+(Y^P&(V^Y))+q[13]+4254626195&4294967295,W=P+(k<<12&4294967295|k>>>20),k=Y+(V^W&(P^V))+q[14]+2792965006&4294967295,Y=W+(k<<17&4294967295|k>>>15),k=V+(P^Y&(W^P))+q[15]+1236535329&4294967295,V=Y+(k<<22&4294967295|k>>>10),k=P+(Y^W&(V^Y))+q[1]+4129170786&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[6]+3225465664&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[11]+643717713&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[0]+3921069994&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(Y^W&(V^Y))+q[5]+3593408605&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[10]+38016083&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[15]+3634488961&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[4]+3889429448&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(Y^W&(V^Y))+q[9]+568446438&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[14]+3275163606&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[3]+4107603335&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[8]+1163531501&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(Y^W&(V^Y))+q[13]+2850285829&4294967295,P=V+(k<<5&4294967295|k>>>27),k=W+(V^Y&(P^V))+q[2]+4243563512&4294967295,W=P+(k<<9&4294967295|k>>>23),k=Y+(P^V&(W^P))+q[7]+1735328473&4294967295,Y=W+(k<<14&4294967295|k>>>18),k=V+(W^P&(Y^W))+q[12]+2368359562&4294967295,V=Y+(k<<20&4294967295|k>>>12),k=P+(V^Y^W)+q[5]+4294588738&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[8]+2272392833&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[11]+1839030562&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[14]+4259657740&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(V^Y^W)+q[1]+2763975236&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[4]+1272893353&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[7]+4139469664&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[10]+3200236656&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(V^Y^W)+q[13]+681279174&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[0]+3936430074&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[3]+3572445317&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[6]+76029189&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(V^Y^W)+q[9]+3654602809&4294967295,P=V+(k<<4&4294967295|k>>>28),k=W+(P^V^Y)+q[12]+3873151461&4294967295,W=P+(k<<11&4294967295|k>>>21),k=Y+(W^P^V)+q[15]+530742520&4294967295,Y=W+(k<<16&4294967295|k>>>16),k=V+(Y^W^P)+q[2]+3299628645&4294967295,V=Y+(k<<23&4294967295|k>>>9),k=P+(Y^(V|~W))+q[0]+4096336452&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[7]+1126891415&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[14]+2878612391&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[5]+4237533241&4294967295,V=Y+(k<<21&4294967295|k>>>11),k=P+(Y^(V|~W))+q[12]+1700485571&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[3]+2399980690&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[10]+4293915773&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[1]+2240044497&4294967295,V=Y+(k<<21&4294967295|k>>>11),k=P+(Y^(V|~W))+q[8]+1873313359&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[15]+4264355552&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[6]+2734768916&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[13]+1309151649&4294967295,V=Y+(k<<21&4294967295|k>>>11),k=P+(Y^(V|~W))+q[4]+4149444226&4294967295,P=V+(k<<6&4294967295|k>>>26),k=W+(V^(P|~Y))+q[11]+3174756917&4294967295,W=P+(k<<10&4294967295|k>>>22),k=Y+(P^(W|~V))+q[2]+718787259&4294967295,Y=W+(k<<15&4294967295|k>>>17),k=V+(W^(Y|~P))+q[9]+3951481745&4294967295,L.g[0]=L.g[0]+P&4294967295,L.g[1]=L.g[1]+(Y+(k<<21&4294967295|k>>>11))&4294967295,L.g[2]=L.g[2]+Y&4294967295,L.g[3]=L.g[3]+W&4294967295}r.prototype.u=function(L,P){P===void 0&&(P=L.length);for(var V=P-this.blockSize,q=this.B,Y=this.h,W=0;W<P;){if(Y==0)for(;W<=V;)a(this,L,W),W+=this.blockSize;if(typeof L=="string"){for(;W<P;)if(q[Y++]=L.charCodeAt(W++),Y==this.blockSize){a(this,q),Y=0;break}}else for(;W<P;)if(q[Y++]=L[W++],Y==this.blockSize){a(this,q),Y=0;break}}this.h=Y,this.o+=P},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var P=1;P<L.length-8;++P)L[P]=0;var V=8*this.o;for(P=L.length-8;P<L.length;++P)L[P]=V&255,V/=256;for(this.u(L),L=Array(16),P=V=0;4>P;++P)for(var q=0;32>q;q+=8)L[V++]=this.g[P]>>>q&255;return L};function u(L,P){var V=d;return Object.prototype.hasOwnProperty.call(V,L)?V[L]:V[L]=P(L)}function c(L,P){this.h=P;for(var V=[],q=!0,Y=L.length-1;0<=Y;Y--){var W=L[Y]|0;q&&W==P||(V[Y]=W,q=!1)}this.g=V}var d={};function p(L){return-128<=L&&128>L?u(L,function(P){return new c([P|0],0>P?-1:0)}):new c([L|0],0>L?-1:0)}function v(L){if(isNaN(L)||!isFinite(L))return I;if(0>L)return ie(v(-L));for(var P=[],V=1,q=0;L>=V;q++)P[q]=L/V|0,V*=4294967296;return new c(P,0)}function E(L,P){if(L.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(L.charAt(0)=="-")return ie(E(L.substring(1),P));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=v(Math.pow(P,8)),q=I,Y=0;Y<L.length;Y+=8){var W=Math.min(8,L.length-Y),k=parseInt(L.substring(Y,Y+W),P);8>W?(W=v(Math.pow(P,W)),q=q.j(W).add(v(k))):(q=q.j(V),q=q.add(v(k)))}return q}var I=p(0),x=p(1),B=p(16777216);i=c.prototype,i.m=function(){if(le(this))return-ie(this).m();for(var L=0,P=1,V=0;V<this.g.length;V++){var q=this.i(V);L+=(0<=q?q:4294967296+q)*P,P*=4294967296}return L},i.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(z(this))return"0";if(le(this))return"-"+ie(this).toString(L);for(var P=v(Math.pow(L,6)),V=this,q="";;){var Y=Re(V,P).g;V=pe(V,Y.j(P));var W=((0<V.g.length?V.g[0]:V.h)>>>0).toString(L);if(V=Y,z(V))return W+q;for(;6>W.length;)W="0"+W;q=W+q}},i.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function z(L){if(L.h!=0)return!1;for(var P=0;P<L.g.length;P++)if(L.g[P]!=0)return!1;return!0}function le(L){return L.h==-1}i.l=function(L){return L=pe(this,L),le(L)?-1:z(L)?0:1};function ie(L){for(var P=L.g.length,V=[],q=0;q<P;q++)V[q]=~L.g[q];return new c(V,~L.h).add(x)}i.abs=function(){return le(this)?ie(this):this},i.add=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0,Y=0;Y<=P;Y++){var W=q+(this.i(Y)&65535)+(L.i(Y)&65535),k=(W>>>16)+(this.i(Y)>>>16)+(L.i(Y)>>>16);q=k>>>16,W&=65535,k&=65535,V[Y]=k<<16|W}return new c(V,V[V.length-1]&-2147483648?-1:0)};function pe(L,P){return L.add(ie(P))}i.j=function(L){if(z(this)||z(L))return I;if(le(this))return le(L)?ie(this).j(ie(L)):ie(ie(this).j(L));if(le(L))return ie(this.j(ie(L)));if(0>this.l(B)&&0>L.l(B))return v(this.m()*L.m());for(var P=this.g.length+L.g.length,V=[],q=0;q<2*P;q++)V[q]=0;for(q=0;q<this.g.length;q++)for(var Y=0;Y<L.g.length;Y++){var W=this.i(q)>>>16,k=this.i(q)&65535,On=L.i(Y)>>>16,Yt=L.i(Y)&65535;V[2*q+2*Y]+=k*Yt,de(V,2*q+2*Y),V[2*q+2*Y+1]+=W*Yt,de(V,2*q+2*Y+1),V[2*q+2*Y+1]+=k*On,de(V,2*q+2*Y+1),V[2*q+2*Y+2]+=W*On,de(V,2*q+2*Y+2)}for(q=0;q<P;q++)V[q]=V[2*q+1]<<16|V[2*q];for(q=P;q<2*P;q++)V[q]=0;return new c(V,0)};function de(L,P){for(;(L[P]&65535)!=L[P];)L[P+1]+=L[P]>>>16,L[P]&=65535,P++}function ae(L,P){this.g=L,this.h=P}function Re(L,P){if(z(P))throw Error("division by zero");if(z(L))return new ae(I,I);if(le(L))return P=Re(ie(L),P),new ae(ie(P.g),ie(P.h));if(le(P))return P=Re(L,ie(P)),new ae(ie(P.g),P.h);if(30<L.g.length){if(le(L)||le(P))throw Error("slowDivide_ only works with positive integers.");for(var V=x,q=P;0>=q.l(L);)V=xe(V),q=xe(q);var Y=Ve(V,1),W=Ve(q,1);for(q=Ve(q,2),V=Ve(V,2);!z(q);){var k=W.add(q);0>=k.l(L)&&(Y=Y.add(V),W=k),q=Ve(q,1),V=Ve(V,1)}return P=pe(L,Y.j(P)),new ae(Y,P)}for(Y=I;0<=L.l(P);){for(V=Math.max(1,Math.floor(L.m()/P.m())),q=Math.ceil(Math.log(V)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),W=v(V),k=W.j(P);le(k)||0<k.l(L);)V-=q,W=v(V),k=W.j(P);z(W)&&(W=x),Y=Y.add(W),L=pe(L,k)}return new ae(Y,L)}i.A=function(L){return Re(this,L).h},i.and=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0;q<P;q++)V[q]=this.i(q)&L.i(q);return new c(V,this.h&L.h)},i.or=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0;q<P;q++)V[q]=this.i(q)|L.i(q);return new c(V,this.h|L.h)},i.xor=function(L){for(var P=Math.max(this.g.length,L.g.length),V=[],q=0;q<P;q++)V[q]=this.i(q)^L.i(q);return new c(V,this.h^L.h)};function xe(L){for(var P=L.g.length+1,V=[],q=0;q<P;q++)V[q]=L.i(q)<<1|L.i(q-1)>>>31;return new c(V,L.h)}function Ve(L,P){var V=P>>5;P%=32;for(var q=L.g.length-V,Y=[],W=0;W<q;W++)Y[W]=0<P?L.i(W+V)>>>P|L.i(W+V+1)<<32-P:L.i(W+V);return new c(Y,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,R1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=E,yo=c}).apply(typeof RE<"u"?RE:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var x1,ph,C1,Td,ty,D1,O1,P1;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,w){return h==Array.prototype||h==Object.prototype||(h[b]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var b=0;b<h.length;++b){var w=h[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var w=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var te=h[D];if(!(te in w))break e;w=w[te]}h=h[h.length-1],D=w[h],b=b(D),b!=D&&b!=null&&e(w,h,{configurable:!0,writable:!0,value:b})}}function u(h,b){h instanceof String&&(h+="");var w=0,D=!1,te={next:function(){if(!D&&w<h.length){var me=w++;return{value:b(me,h[me]),done:!1}}return D=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}a("Array.prototype.values",function(h){return h||function(){return u(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function v(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function E(h,b,w){return h.call.apply(h.bind,arguments)}function I(h,b,w){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,D),h.apply(b,te)}}return function(){return h.apply(b,arguments)}}function x(h,b,w){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,x.apply(null,arguments)}function B(h,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function z(h,b){function w(){}w.prototype=b.prototype,h.aa=b.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(D,te,me){for(var Ne=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)Ne[_t-2]=arguments[_t];return b.prototype[te].apply(D,Ne)}}function le(h){const b=h.length;if(0<b){const w=Array(b);for(let D=0;D<b;D++)w[D]=h[D];return w}return[]}function ie(h,b){for(let w=1;w<arguments.length;w++){const D=arguments[w];if(p(D)){const te=h.length||0,me=D.length||0;h.length=te+me;for(let Ne=0;Ne<me;Ne++)h[te+Ne]=D[Ne]}else h.push(D)}}class pe{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function de(h){return/^[\s\xa0]*$/.test(h)}function ae(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Re(h){return Re[" "](h),h}Re[" "]=function(){};var xe=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function Ve(h,b,w){for(const D in h)b.call(w,h[D],D,h)}function L(h,b){for(const w in h)b.call(void 0,h[w],w,h)}function P(h){const b={};for(const w in h)b[w]=h[w];return b}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(h,b){let w,D;for(let te=1;te<arguments.length;te++){D=arguments[te];for(w in D)h[w]=D[w];for(let me=0;me<V.length;me++)w=V[me],Object.prototype.hasOwnProperty.call(D,w)&&(h[w]=D[w])}}function Y(h){var b=1;h=h.split(":");const w=[];for(;0<b&&h.length;)w.push(h.shift()),b--;return h.length&&w.push(h.join(":")),w}function W(h){d.setTimeout(()=>{throw h},0)}function k(){var h=gt;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class On{constructor(){this.h=this.g=null}add(b,w){const D=Yt.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var Yt=new pe(()=>new ye,h=>h.reset());class ye{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,Qe=!1,gt=new On,j=()=>{const h=d.Promise.resolve(void 0);Le=()=>{h.then(we)}};var we=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(w){W(w)}var b=Yt;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}Qe=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,b),d.removeEventListener("test",w,b)}catch{}return h}();function ct(h,b){if(Ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(xe){e:{try{Re(b.nodeName);var te=!0;break e}catch{}te=!1}te||(b=null)}}else w=="mouseover"?b=h.fromElement:w=="mouseout"&&(b=h.toElement);this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:et[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ct.aa.h.call(this)}}z(ct,Ie);var et={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),Bt=0;function He(h,b,w,D,te){this.listener=h,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=te,this.key=++Bt,this.da=this.fa=!1}function ki(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ar(h){this.src=h,this.g={},this.h=0}Ar.prototype.add=function(h,b,w,D,te){var me=h.toString();h=this.g[me],h||(h=this.g[me]=[],this.h++);var Ne=jr(h,b,D,te);return-1<Ne?(b=h[Ne],w||(b.fa=!1)):(b=new He(b,this.src,me,!!D,te),b.fa=w,h.push(b)),b};function Tt(h,b){var w=b.type;if(w in h.g){var D=h.g[w],te=Array.prototype.indexOf.call(D,b,void 0),me;(me=0<=te)&&Array.prototype.splice.call(D,te,1),me&&(ki(b),h.g[w].length==0&&(delete h.g[w],h.h--))}}function jr(h,b,w,D){for(var te=0;te<h.length;++te){var me=h[te];if(!me.da&&me.listener==b&&me.capture==!!w&&me.ha==D)return te}return-1}var Ns="closure_lm_"+(1e6*Math.random()|0),qr={};function Mu(h,b,w,D,te){if(Array.isArray(b)){for(var me=0;me<b.length;me++)Mu(h,b[me],w,D,te);return null}return w=os(w),h&&h[cn]?h.K(b,w,v(D)?!!D.capture:!1,te):Ir(h,b,w,!1,D,te)}function Ir(h,b,w,D,te,me){if(!b)throw Error("Invalid event type");var Ne=v(te)?!!te.capture:!!te,_t=fi(h);if(_t||(h[Ns]=_t=new Ar(h)),w=_t.add(b,w,D,Ne,me),w.proxy)return w;if(D=nc(),w.proxy=D,D.src=h,D.listener=w,h.addEventListener)We||(te=Ne),te===void 0&&(te=!1),h.addEventListener(b.toString(),D,te);else if(h.attachEvent)h.attachEvent(Un(b.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function nc(){function h(w){return b.call(h.src,h.listener,w)}const b=ku;return h}function Ro(h,b,w,D,te){if(Array.isArray(b))for(var me=0;me<b.length;me++)Ro(h,b[me],w,D,te);else D=v(D)?!!D.capture:!!D,w=os(w),h&&h[cn]?(h=h.i,b=String(b).toString(),b in h.g&&(me=h.g[b],w=jr(me,w,D,te),-1<w&&(ki(me[w]),Array.prototype.splice.call(me,w,1),me.length==0&&(delete h.g[b],h.h--)))):h&&(h=fi(h))&&(b=h.g[b.toString()],h=-1,b&&(h=jr(b,w,D,te)),(w=-1<h?b[h]:null)&&as(w))}function as(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[cn])Tt(b.i,h);else{var w=h.type,D=h.proxy;b.removeEventListener?b.removeEventListener(w,D,h.capture):b.detachEvent?b.detachEvent(Un(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=fi(b))?(Tt(w,h),w.h==0&&(w.src=null,b[Ns]=null)):ki(h)}}}function Un(h){return h in qr?qr[h]:qr[h]="on"+h}function ku(h,b){if(h.da)h=!0;else{b=new ct(b,this);var w=h.listener,D=h.ha||h.src;h.fa&&as(h),h=w.call(D,b)}return h}function fi(h){return h=h[Ns],h instanceof Ar?h:null}var _a="__closure_events_fn_"+(1e9*Math.random()>>>0);function os(h){return typeof h=="function"?h:(h[_a]||(h[_a]=function(b){return h.handleEvent(b)}),h[_a])}function Nt(){Be.call(this),this.i=new Ar(this),this.M=this,this.F=null}z(Nt,Be),Nt.prototype[cn]=!0,Nt.prototype.removeEventListener=function(h,b,w,D){Ro(this,h,b,w,D)};function vt(h,b){var w,D=h.F;if(D)for(w=[];D;D=D.F)w.push(D);if(h=h.M,D=b.type||b,typeof b=="string")b=new Ie(b,h);else if(b instanceof Ie)b.target=b.target||h;else{var te=b;b=new Ie(D,h),q(b,te)}if(te=!0,w)for(var me=w.length-1;0<=me;me--){var Ne=b.g=w[me];te=Yn(Ne,D,!0,b)&&te}if(Ne=b.g=h,te=Yn(Ne,D,!0,b)&&te,te=Yn(Ne,D,!1,b)&&te,w)for(me=0;me<w.length;me++)Ne=b.g=w[me],te=Yn(Ne,D,!1,b)&&te}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var w=h.g[b],D=0;D<w.length;D++)ki(w[D]);delete h.g[b],h.h--}}this.F=null},Nt.prototype.K=function(h,b,w,D){return this.i.add(String(h),b,!1,w,D)},Nt.prototype.L=function(h,b,w,D){return this.i.add(String(h),b,!0,w,D)};function Yn(h,b,w,D){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var te=!0,me=0;me<b.length;++me){var Ne=b[me];if(Ne&&!Ne.da&&Ne.capture==w){var _t=Ne.listener,fn=Ne.ha||Ne.src;Ne.fa&&Tt(h.i,Ne),te=_t.call(fn,D)!==!1&&te}}return te&&!D.defaultPrevented}function hn(h,b,w){if(typeof h=="function")w&&(h=x(h,w));else if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:d.setTimeout(h,b||0)}function ba(h){h.g=hn(()=>{h.g=null,h.i&&(h.i=!1,ba(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Ea extends Be{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(h){Be.call(this),this.h=h,this.g={}}z(pr,Be);var di=[];function Li(h){Ve(h.g,function(b,w){this.g.hasOwnProperty(w)&&as(b)},h),h.g={}}pr.prototype.N=function(){pr.aa.N.call(this),Li(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=d.JSON.stringify,qe=d.JSON.parse,Fr=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Kr(){}Kr.prototype.h=null;function us(h){return h.h||(h.h=h.i())}function Ue(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mi(){Ie.call(this,"d")}z(mi,Ie);function Vs(){Ie.call(this,"c")}z(Vs,Ie);var Gr={},Ms=null;function ls(){return Ms=Ms||new Nt}Gr.La="serverreachability";function Ta(h){Ie.call(this,Gr.La,h)}z(Ta,Ie);function gr(h){const b=ls();vt(b,new Ta(b))}Gr.STAT_EVENT="statevent";function Ui(h,b){Ie.call(this,Gr.STAT_EVENT,h),this.stat=b}z(Ui,Ie);function zt(h){const b=ls();vt(b,new Ui(b,h))}Gr.Ma="timingevent";function Zt(h,b){Ie.call(this,Gr.Ma,h),this.size=b}z(Zt,Ie);function ut(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function xo(h,b,w,D,te,me){h.info(function(){if(h.g)if(me)for(var Ne="",_t=me.split("&"),fn=0;fn<_t.length;fn++){var wt=_t[fn].split("=");if(1<wt.length){var vn=wt[0];wt=wt[1];var sn=vn.split("_");Ne=2<=sn.length&&sn[1]=="type"?Ne+(vn+"="+wt+"&"):Ne+(vn+"=redacted&")}}else Ne=null;else Ne=me;return"XMLHTTP REQ ("+D+") [attempt "+te+"]: "+b+`
`+w+`
`+Ne})}function wa(h,b,w,D,te,me,Ne){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+te+"]: "+b+`
`+w+`
`+me+" "+Ne})}function Qr(h,b,w,D){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ls(h,w)+(D?" "+D:"")})}function ks(h,b){h.info(function(){return"TIMEOUT: "+b})}Ot.prototype.info=function(){};function Ls(h,b){if(!h.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var D=w[h];if(!(2>D.length)){var te=D[1];if(Array.isArray(te)&&!(1>te.length)){var me=te[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Ne=1;Ne<te.length;Ne++)te[Ne]=""}}}}return Sn(w)}catch{return b}}var $n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function yr(){}z(yr,Kr),yr.prototype.g=function(){return new XMLHttpRequest},yr.prototype.i=function(){return{}},Pn=new yr;function Xn(h,b,w,D){this.j=h,this.i=b,this.l=w,this.R=D||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vt}function Vt(){this.i=null,this.g="",this.h=!1}var Sa={},Rr={};function xr(h,b,w){h.L=1,h.v=hs(zn(b)),h.m=w,h.P=!0,Yr(h,null)}function Yr(h,b){h.F=Date.now(),Wn(h),h.A=zn(h.v);var w=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),sr(w.i,"t",D),h.C=0,w=h.j.J,h.h=new Vt,h.g=Na(h.j,w?b:null,!h.m),0<h.O&&(h.M=new Ea(x(h.Y,h,h.g),h.O)),b=h.U,w=h.g,D=h.ca;var te="readystatechange";Array.isArray(te)||(te&&(di[0]=te.toString()),te=di);for(var me=0;me<te.length;me++){var Ne=Mu(w,te[me],D||b.handleEvent,!1,b.h||b);if(!Ne)break;b.g[Ne.key]=Ne}b=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),gr(),xo(h.i,h.u,h.A,h.l,h.R,h.m)}Xn.prototype.ca=function(h){h=h.target;const b=this.M;b&&or(h)==3?b.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)e:{const sn=or(this.g);var b=this.g.Ba();const Ai=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ca(this.g)))){this.J||sn!=4||b==7||(b==8||0>=Ai?gr(3):gr(2)),vr(this);var w=this.g.Z();this.X=w;t:if($t(this)){var D=Ca(this.g);h="";var te=D.length,me=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),_r(this);var Ne="";break t}this.h.i=new d.TextDecoder}for(b=0;b<te;b++)this.h.h=!0,h+=this.h.i.decode(D[b],{stream:!(me&&b==te-1)});D.length=0,this.h.g+=h,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=w==200,wa(this.i,this.u,this.A,this.l,this.R,sn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,fn=this.g;if((_t=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(_t)){var wt=_t;break t}}wt=null}if(w=wt)Qr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bi(this,w);else{this.o=!1,this.s=3,zt(12),gn(this),_r(this);break e}}if(this.P){w=!0;let In;for(;!this.J&&this.C<Ne.length;)if(In=pi(this,Ne),In==Rr){sn==4&&(this.s=4,zt(14),w=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(In==Sa){this.s=4,zt(15),Qr(this.i,this.l,Ne,"[Invalid Chunk]"),w=!1;break}else Qr(this.i,this.l,In,null),Bi(this,In);if($t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||Ne.length!=0||this.h.h||(this.s=1,zt(16),w=!1),this.o=this.o&&w,!w)Qr(this.i,this.l,Ne,"[Invalid Chunked Response]"),gn(this),_r(this);else if(0<Ne.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),Jr(vn),vn.M=!0,zt(11))}}else Qr(this.i,this.l,Ne,null),Bi(this,Ne);sn==4&&gn(this),this.o&&!this.J&&(sn==4?ko(this.j,this):(this.o=!1,Wn(this)))}else Lu(this.g),w==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),gn(this),_r(this)}}}catch{}finally{}};function $t(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function pi(h,b){var w=h.C,D=b.indexOf(`
`,w);return D==-1?Rr:(w=Number(b.substring(w,D)),isNaN(w)?Sa:(D+=1,D+w>b.length?Rr:(b=b.slice(D,D+w),h.C=D+w,b)))}Xn.prototype.cancel=function(){this.J=!0,gn(this)};function Wn(h){h.S=Date.now()+h.I,Co(h,h.I)}function Co(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ut(x(h.ba,h),b)}function vr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Xn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ks(this.i,this.A),this.L!=2&&(gr(),zt(17)),gn(this),this.s=2,_r(this)):Co(this,this.S-h)};function _r(h){h.j.G==0||h.J||ko(h.j,h)}function gn(h){vr(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,Li(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function Bi(h,b){try{var w=h.j;if(w.G!=0&&(w.g==h||ht(w.h,h))){if(!h.K&&ht(w.h,h)&&w.G==3){try{var D=w.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var te=D;if(te[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Xi(w),qs(w);else break e;$i(w),zt(18)}}else w.za=te[1],0<w.za-w.T&&37500>te[2]&&w.F&&w.v==0&&!w.C&&(w.C=ut(x(w.Za,w),6e3));if(1>=Us(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Vr(w,11)}else if((h.K||w.g==h)&&Xi(w),!de(b))for(te=w.Da.g.parse(b),b=0;b<te.length;b++){let wt=te[b];if(w.T=wt[0],wt=wt[1],w.G==2)if(wt[0]=="c"){w.K=wt[1],w.ia=wt[2];const vn=wt[3];vn!=null&&(w.la=vn,w.j.info("VER="+w.la));const sn=wt[4];sn!=null&&(w.Aa=sn,w.j.info("SVER="+w.Aa));const Ai=wt[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(D=1.5*Ai,w.L=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const In=h.g;if(In){const Ii=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var me=D.h;me.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Bs(me,me.h),me.h=null))}if(D.D){const Uo=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(D.ya=Uo,It(D.I,D.D,Uo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),D=w;var Ne=h;if(D.qa=Si(D,D.J?D.ia:null,D.W),Ne.K){Bn(D.h,Ne);var _t=Ne,fn=D.L;fn&&(_t.I=fn),_t.B&&(vr(_t),Wn(_t)),D.g=Ne}else yn(D);0<w.i.length&&Qi(w)}else wt[0]!="stop"&&wt[0]!="close"||Vr(w,7);else w.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Vr(w,7):ps(w):wt[0]!="noop"&&w.l&&w.l.ta(wt),w.v=0)}}gr(4)}catch{}}var gi=class{constructor(h,b){this.g=h,this.map=b}};function yi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Us(h){return h.h?1:h.g?h.g.size:0}function ht(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function Bs(h,b){h.g?h.g.add(b):h.h=b}function Bn(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}yi.prototype.cancel=function(){if(this.i=Aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Aa(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const w of h.g.values())b=b.concat(w.D);return b}return le(h.i)}function Mt(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var b=[],w=h.length,D=0;D<w;D++)b.push(h[D]);return b}b=[],w=0;for(D in h)b[w++]=h[D];return b}function vi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var b=[];h=h.length;for(var w=0;w<h;w++)b.push(w);return b}b=[],w=0;for(const D in h)b[w++]=D;return b}}}function ji(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var w=vi(h),D=Mt(h),te=D.length,me=0;me<te;me++)b.call(void 0,D[me],w&&w[me],h)}var Cr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Do(h,b){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var D=h[w].indexOf("="),te=null;if(0<=D){var me=h[w].substring(0,D);te=h[w].substring(D+1)}else me=h[w];b(me,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function en(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof en){this.h=h.h,cs(this,h.j),this.o=h.o,this.g=h.g,$r(this,h.s),this.l=h.l;var b=h.i,w=new jn;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),_i(this,w),this.m=h.m}else h&&(b=String(h).match(Cr))?(this.h=!1,cs(this,b[1]||"",!0),this.o=Dr(b[2]||""),this.g=Dr(b[3]||"",!0),$r(this,b[4]),this.l=Dr(b[5]||"",!0),_i(this,b[6]||"",!0),this.m=Dr(b[7]||"")):(this.h=!1,this.i=new jn(null,this.h))}en.prototype.toString=function(){var h=[],b=this.j;b&&h.push(dt(b,Oo,!0),":");var w=this.g;return(w||b=="file")&&(h.push("//"),(b=this.o)&&h.push(dt(b,Oo,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(dt(w,w.charAt(0)=="/"?Jn:Po,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",dt(w,qi)),h.join("")};function zn(h){return new en(h)}function cs(h,b,w){h.j=w?Dr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function $r(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function _i(h,b,w){b instanceof jn?(h.i=b,ds(h.i,h.h)):(w||(b=dt(b,fs)),h.i=new jn(b,h.h))}function It(h,b,w){h.i.set(b,w)}function hs(h){return It(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Dr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dt(h,b,w){return typeof h=="string"?(h=encodeURI(h).replace(b,Ia),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ia(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Oo=/[#\/\?@]/g,Po=/[#\?:]/g,Jn=/[#\?]/g,fs=/[#\?@]/g,qi=/#/g;function jn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function br(h){h.g||(h.g=new Map,h.h=0,h.i&&Do(h.i,function(b,w){h.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}i=jn.prototype,i.add=function(h,b){br(this),this.i=null,h=ar(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(b),this.h+=1,this};function bi(h,b){br(h),b=ar(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function jt(h,b){return br(h),b=ar(h,b),h.g.has(b)}i.forEach=function(h,b){br(this),this.g.forEach(function(w,D){w.forEach(function(te){h.call(b,te,D,this)},this)},this)},i.na=function(){br(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let D=0;D<b.length;D++){const te=h[D];for(let me=0;me<te.length;me++)w.push(b[D])}return w},i.V=function(h){br(this);let b=[];if(typeof h=="string")jt(this,h)&&(b=b.concat(this.g.get(ar(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)b=b.concat(h[w])}return b},i.set=function(h,b){return br(this),this.i=null,h=ar(this,h),jt(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},i.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function sr(h,b,w){bi(h,b),0<w.length&&(h.i=null,h.g.set(ar(h,b),le(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var D=b[w];const me=encodeURIComponent(String(D)),Ne=this.V(D);for(D=0;D<Ne.length;D++){var te=me;Ne[D]!==""&&(te+="="+encodeURIComponent(String(Ne[D]))),h.push(te)}}return this.i=h.join("&")};function ar(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function ds(h,b){b&&!h.j&&(br(h),h.i=null,h.g.forEach(function(w,D){var te=D.toLowerCase();D!=te&&(bi(this,D),sr(this,te,w))},h)),h.j=b}function Fi(h,b){const w=new Ot;if(d.Image){const D=new Image;D.onload=B(Or,w,"TestLoadImage: loaded",!0,b,D),D.onerror=B(Or,w,"TestLoadImage: error",!1,b,D),D.onabort=B(Or,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=B(Or,w,"TestLoadImage: timeout",!1,b,D),d.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else b(!1)}function An(h,b){const w=new Ot,D=new AbortController,te=setTimeout(()=>{D.abort(),Or(w,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:D.signal}).then(me=>{clearTimeout(te),me.ok?Or(w,"TestPingServer: ok",!0,b):Or(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(te),Or(w,"TestPingServer: error",!1,b)})}function Or(h,b,w,D,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),D(w)}catch{}}function qn(){this.g=new Fr}function Pr(h,b,w){const D=w||"";try{ji(h,function(te,me){let Ne=te;v(te)&&(Ne=Sn(te)),b.push(D+me+"="+encodeURIComponent(Ne))})}catch(te){throw b.push(D+"type="+encodeURIComponent("_badmap")),te}}function Ki(h){this.l=h.Ub||null,this.j=h.eb||!1}z(Ki,Kr),Ki.prototype.g=function(){return new Xr(this.l,this.j)},Ki.prototype.i=function(h){return function(){return h}}({});function Xr(h,b){Nt.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Xr,Nt),i=Xr.prototype,i.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,Wr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||d).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Nr(this):Wr(this),this.readyState==3&&Hi(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},i.Qa=function(h){this.g&&(this.response=h,Nr(this))},i.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Wr(h)}i.setRequestHeader=function(h,b){this.u.append(h,b)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=b.next();return h.join(`\r
`)};function Wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function No(h){let b="";return Ve(h,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function tn(h,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=No(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):It(h,b,w))}function Ct(h){Nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Ct,Nt);var Ra=/^https?$/i,Ei=["POST","PUT"];i=Ct.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?us(this.o):us(Pn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(me){zs(this,me);return}if(h=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var te in D)w.set(te,D[te]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const me of D.keys())w.set(me,D.get(me));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(me=>me.toLowerCase()=="content-type"),te=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ei,b,void 0))||D||te||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Ne]of w)this.g.setRequestHeader(me,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{js(this),this.u=!0,this.g.send(h),this.u=!1}catch(me){zs(this,me)}};function zs(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,ms(h),Ti(h)}function ms(h){h.A||(h.A=!0,vt(h,"complete"),vt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,vt(this,"complete"),vt(this,"abort"),Ti(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ti(this,!0)),Ct.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},i.bb=function(){xa(this)};function xa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||or(h)!=4||h.Z()!=2)){if(h.u&&or(h)==4)hn(h.Ea,0,h);else if(vt(h,"readystatechange"),or(h)==4){h.h=!1;try{const Ne=h.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=Ne===0){var te=String(h.D).match(Cr)[1]||null;!te&&d.self&&d.self.location&&(te=d.self.location.protocol.slice(0,-1)),D=!Ra.test(te?te.toLowerCase():"")}w=D}if(w)vt(h,"complete"),vt(h,"success");else{h.m=6;try{var me=2<or(h)?h.g.statusText:""}catch{me=""}h.l=me+" ["+h.Z()+"]",ms(h)}}finally{Ti(h)}}}}function Ti(h,b){if(h.g){js(h);const w=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||vt(h,"ready");try{w.onreadystatechange=D}catch{}}}function js(h){h.I&&(d.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),qe(b)}};function Ca(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Lu(h){const b={};h=(h.g&&2<=or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(de(h[D]))continue;var w=Y(h[D]);const te=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const me=b[te]||[];b[te]=me,me.push(w)}L(b,function(D){return D.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(h,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||b}function Gi(h){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wi("baseRetryDelayMs",5e3,h),this.cb=wi("retryDelaySeedMs",1e4,h),this.Wa=wi("forwardChannelMaxRetries",2,h),this.wa=wi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(h&&h.concurrentRequestLimit),this.Da=new qn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Gi.prototype,i.la=8,i.G=1,i.connect=function(h,b,w,D){zt(0),this.W=h,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.I=Si(this,null,this.W),Qi(this)};function ps(h){if(Uu(h),h.G==3){var b=h.U++,w=zn(h.I);if(It(w,"SID",h.K),It(w,"RID",b),It(w,"TYPE","terminate"),Yi(h,w),b=new Xn(h,h.j,b),b.L=2,b.v=hs(zn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=b.v,w=!0),w||(b.g=Na(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Wn(b)}Pa(h)}function qs(h){h.g&&(Jr(h),h.g.cancel(),h.g=null)}function Uu(h){qs(h),h.u&&(d.clearTimeout(h.u),h.u=null),Xi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Qi(h){if(!zi(h.h)&&!h.s){h.s=!0;var b=h.Ga;Le||j(),Qe||(Le(),Qe=!0),gt.add(b,h),h.B=0}}function Vo(h,b){return Us(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ut(x(h.Ga,h,b),Oa(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const te=new Xn(this,this.j,h);let me=this.o;if(this.S&&(me?(me=P(me),q(me,this.S)):me=this.S),this.m!==null||this.O||(te.H=me,me=null),this.P)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,4096<b){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=Da(this,te,b),w=zn(this.I),It(w,"RID",h),It(w,"CVER",22),this.D&&It(w,"X-HTTP-Session-Id",this.D),Yi(this,w),me&&(this.O?b="headers="+encodeURIComponent(String(No(me)))+"&"+b:this.m&&tn(w,this.m,me)),Bs(this.h,te),this.Ua&&It(w,"TYPE","init"),this.P?(It(w,"$req",b),It(w,"SID","null"),te.T=!0,xr(te,w,null)):xr(te,w,b),this.G=2}}else this.G==3&&(h?Fs(this,h):this.i.length==0||zi(this.h)||Fs(this))};function Fs(h,b){var w;b?w=b.l:w=h.U++;const D=zn(h.I);It(D,"SID",h.K),It(D,"RID",w),It(D,"AID",h.T),Yi(h,D),h.m&&h.o&&tn(D,h.m,h.o),w=new Xn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),b&&(h.i=b.D.concat(h.i)),b=Da(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Bs(h.h,w),xr(w,D,b)}function Yi(h,b){h.H&&Ve(h.H,function(w,D){It(b,D,w)}),h.l&&ji({},function(w,D){It(b,D,w)})}function Da(h,b,w){w=Math.min(h.i.length,w);var D=h.l?x(h.l.Na,h.l,h):null;e:{var te=h.i;let me=-1;for(;;){const Ne=["count="+w];me==-1?0<w?(me=te[0].g,Ne.push("ofs="+me)):me=0:Ne.push("ofs="+me);let _t=!0;for(let fn=0;fn<w;fn++){let wt=te[fn].g;const vn=te[fn].map;if(wt-=me,0>wt)me=Math.max(0,te[fn].g-100),_t=!1;else try{Pr(vn,Ne,"req"+wt+"_")}catch{D&&D(vn)}}if(_t){D=Ne.join("&");break e}}}return h=h.i.splice(0,w),b.D=h,D}function yn(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;Le||j(),Qe||(Le(),Qe=!0),gt.add(b,h),h.v=0}}function $i(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ut(x(h.Fa,h),Oa(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,Mo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ut(x(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),qs(this),Mo(this))};function Jr(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Mo(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=zn(h.qa);It(b,"RID","rpc"),It(b,"SID",h.K),It(b,"AID",h.T),It(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&It(b,"TO",h.ja),It(b,"TYPE","xmlhttp"),Yi(h,b),h.m&&h.o&&tn(b,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=hs(zn(b)),w.m=null,w.P=!0,Yr(w,h)}i.Za=function(){this.C!=null&&(this.C=null,qs(this),$i(this),zt(19))};function Xi(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ko(h,b){var w=null;if(h.g==b){Xi(h),Jr(h),h.g=null;var D=2}else if(ht(h.h,b))w=b.D,Bn(h.h,b),D=1;else return;if(h.G!=0){if(b.o)if(D==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var te=h.B;D=ls(),vt(D,new Zt(D,w)),Qi(h)}else yn(h);else if(te=b.s,te==3||te==0&&0<b.X||!(D==1&&Vo(h,b)||D==2&&$i(h)))switch(w&&0<w.length&&(b=h.h,b.i=b.i.concat(w)),te){case 1:Vr(h,5);break;case 4:Vr(h,10);break;case 3:Vr(h,6);break;default:Vr(h,2)}}}function Oa(h,b){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*b}function Vr(h,b){if(h.j.info("Error code "+b),b==2){var w=x(h.fb,h),D=h.Xa;const te=!D;D=new en(D||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||cs(D,"https"),hs(D),te?Fi(D.toString(),w):An(D.toString(),w)}else zt(2);h.G=0,h.l&&h.l.sa(b),Pa(h),Uu(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Pa(h){if(h.G=0,h.ka=[],h.l){const b=Aa(h.h);(b.length!=0||h.i.length!=0)&&(ie(h.ka,b),ie(h.ka,h.i),h.h.i.length=0,le(h.i),h.i.length=0),h.l.ra()}}function Si(h,b,w){var D=w instanceof en?zn(w):new en(w);if(D.g!="")b&&(D.g=b+"."+D.g),$r(D,D.s);else{var te=d.location;D=te.protocol,b=b?b+"."+te.hostname:te.hostname,te=+te.port;var me=new en(null);D&&cs(me,D),b&&(me.g=b),te&&$r(me,te),w&&(me.l=w),D=me}return w=h.D,b=h.ya,w&&b&&It(D,w,b),It(D,"VER",h.la),Yi(h,D),D}function Na(h,b,w){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new Ct(new Ki({eb:w})):new Ct(h.pa),b.Ha(h.J),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Va(){}i=Va.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Wi(){}Wi.prototype.g=function(h,b){return new Nn(h,b)};function Nn(h,b){Nt.call(this),this.g=new Gi(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!de(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!de(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Mr(this)}z(Nn,Nt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){ps(this.g)},Nn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Sn(h),h=w);b.i.push(new gi(b.Ya++,h)),b.G==3&&Qi(b)},Nn.prototype.N=function(){this.g.l=null,delete this.j,ps(this.g),delete this.g,Nn.aa.N.call(this)};function Lo(h){mi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const w in b){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}z(Lo,mi);function Bu(){Vs.call(this),this.status=1}z(Bu,Vs);function Mr(h){this.g=h}z(Mr,Va),Mr.prototype.ua=function(){vt(this.g,"a")},Mr.prototype.ta=function(h){vt(this.g,new Lo(h))},Mr.prototype.sa=function(h){vt(this.g,new Bu)},Mr.prototype.ra=function(){vt(this.g,"b")},Wi.prototype.createWebChannel=Wi.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,P1=function(){return new Wi},O1=function(){return ls()},D1=Gr,ty={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Td=$n,ir.COMPLETE="complete",C1=ir,Ue.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,ph=Ue,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,x1=Ct}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const xE="@firebase/firestore",CE="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Ny("@firebase/firestore");function yl(){return Su.logLevel}function Ae(i,...e){if(Su.logLevel<=St.DEBUG){const t=e.map(Qy);Su.debug(`Firestore (${$l}): ${i}`,...t)}}function Tn(i,...e){if(Su.logLevel<=St.ERROR){const t=e.map(Qy);Su.error(`Firestore (${$l}): ${i}`,...t)}}function Oh(i,...e){if(Su.logLevel<=St.WARN){const t=e.map(Qy);Su.warn(`Firestore (${$l}): ${i}`,...t)}}function Qy(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,N1(i,r,t)}function N1(i,e,t){let r=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tn(r),new Error(r)}function $e(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||N1(e,a,r)}function Ye(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class xD{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let u=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ua,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ua)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new ID(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class CD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new CD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const a=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new DE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new DE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=PD(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<t&&(r+=e.charAt(a[u]%62))}return r}}function it(i,e){return i<e?-1:i>e?1:0}function ny(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return it(r,a);{const u=V1(),c=ND(u.encode(OE(i,t)),u.encode(OE(e,t)));return c!==0?c:it(r,a)}}t+=r>65535?2:1}return it(i.length,e.length)}function OE(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function ND(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return it(i[t],e[t]);return it(i.length,e.length)}function xl(i,e,t){return i.length===e.length&&i.every((r,a)=>t(r,e[a]))}function k1(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,NE=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*NE);return new un(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PE)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NE}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new un(0,0))}static max(){return new Ze(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="__name__";class ws{constructor(e,t,r){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Fe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const u=ws.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return it(e.length,t.length)}static compareSegments(e,t){const r=ws.isNumericId(e),a=ws.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?ws.extractNumericId(e).compare(ws.extractNumericId(t)):ny(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yo.fromString(e.substring(4,e.length-2))}}class Qt extends ws{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ke(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const VD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ws{construct(e,t,r){return new on(e,t,r)}static isValidIdentifier(e){return VD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VE}static keyField(){return new on([VE])}static fromServerFormat(e){const t=[];let r="",a=0;const u=()=>{if(r.length===0)throw new Ke(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ke(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ke(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(u(),a++)}if(u(),c)throw new Ke(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Qt.fromString(e))}static fromName(e){return new ze(Qt.fromString(e).popFirst(5))}static empty(){return new ze(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;class qd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function ry(i){return i.fields.find(e=>e.kind===2)}function lu(i){return i.fields.filter(e=>e.kind!==2)}qd.UNKNOWN_ID=-1;class wd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ph(0,hi.min())}}function L1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ze.fromTimestamp(r===1e9?new un(t+1,0):new un(t,r));return new hi(a,ze.empty(),e)}function U1(i){return new hi(i.readTime,i.key,Cl)}class hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hi(Ze.min(),ze.empty(),Cl)}static max(){return new hi(Ze.max(),ze.empty(),Cl)}}function Yy(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ze.comparator(i.documentKey,e.documentKey),t!==0?t:it(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(i){if(i.code!==Se.FAILED_PRECONDITION||i.message!==B1)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let a=0,u=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++u,c&&u===a&&t()},p=>r(p))}),c=!0,u===a&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(a=>a?ne.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,u)=>{r.push(t.call(this,a,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,a)=>{const u=e.length,c=new Array(u);let d=0;for(let p=0;p<u;p++){const v=p;t(e[v]).next(E=>{c[v]=E,++d,d===u&&r(c)},E=>a(E))}})}static doWhile(e,t){return new ne((r,a)=>{const u=()=>{e()===!0?t().next(()=>{u()},a):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="SimpleDb";class gm{static open(e,t,r,a){try{return new gm(t,e.transaction(a,r))}catch(u){throw new Th(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ua,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Th(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=$y(r.target.error);this.S.reject(new Th(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ae(oi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kD(t)}}class vo{static delete(e){return Ae(oi,"Removing database:",e),hu(Bw().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Kw())return!1;if(vo.F())return!0;const e=kn(),t=vo.M(e),r=0<t&&t<10,a=j1(e),u=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,vo.M(kn())===12.2&&Tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ae(oi,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=u=>{const c=u.target.result;t(c)},a.onblocked=()=>{r(new Th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new Ke(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new Ke(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Th(e,c))},a.onupgradeneeded=u=>{Ae(oi,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;if(this.L!==null&&this.L!==u.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${u.oldVersion}, event.newVersion=${u.newVersion}, db.version=${c.version}`);this.B.q(c,a.transaction,u.oldVersion,this.version).next(()=>{Ae(oi,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=gm.open(this.db,e,u?"readonly":"readwrite",r),p=a(d).next(v=>(d.v(),v)).catch(v=>(d.abort(v),ne.reject(v))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,v=p.name!=="FirebaseError"&&c<3;if(Ae(oi,"Transaction failed with error:",p.message,"Retrying:",v),this.close(),!v)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function j1(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class MD{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return hu(this.K.delete())}}class Th extends Ke{constructor(e,t){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function So(i){return i.name==="IndexedDbTransactionError"}class kD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ae(oi,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae(oi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hu(r)}add(e){return Ae(oi,"ADD",this.store.name,e,e),hu(this.store.add(e))}get(e){return hu(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ae(oi,"GET",this.store.name,e,t),t))}delete(e){return Ae(oi,"DELETE",this.store.name,e),hu(this.store.delete(e))}count(){return Ae(oi,"COUNT",this.store.name),hu(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const u=a.getAll(r.range);return new ne((c,d)=>{u.onerror=p=>{d(p.target.error)},u.onsuccess=p=>{c(p.target.result)}})}{const u=this.cursor(r),c=[];return this.Y(u,(d,p)=>{c.push(p)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ne((a,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}X(e,t){Ae(oi,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const a=this.cursor(r);return this.Y(a,(u,c,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Y(a,t)}ne(e){const t=this.cursor({});return new ne((r,a)=>{t.onerror=u=>{const c=$y(u.target.error);a(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}Y(e,t){const r=[];return new ne((a,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new MD(d),v=t(d.primaryKey,d.value,p);if(v instanceof ne){const E=v.catch(I=>(p.done(),ne.reject(I)));r.push(E)}p.isDone?a():p.j===null?d.continue():d.continue(p.j)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hu(i){return new ne((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=$y(r.target.error);t(a)}})}let ME=!1;function $y(i){const e=vo.M(kn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new Ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ME||(ME=!0,setTimeout(()=>{throw r},0)),r}}return i}const wh="IndexBackfiller";class LD{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Ae(wh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Ae(wh,`Documents written: ${t}`)}catch(t){So(t)?Ae(wh,"Ignoring IndexedDB error during index backfill: ",t):await wo(t)}await this.ie(6e4)})}}class UD{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let a=t,u=!0;return ne.doWhile(()=>u===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Ae(wh,`Processing collection: ${c}`),this._e(e,c,a).next(d=>{a-=d,r.add(c)});u=!1})).next(()=>t-a)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(a,u)).next(d=>(Ae(wh,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((a,u)=>{const c=U1(u);Yy(c,r)>0&&(r=c)}),new hi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}zr.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function ym(i){return i==null}function Nh(i){return i===0&&1/i==-1/0}function q1(i){return typeof i=="number"&&Number.isInteger(i)&&!Nh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="";function mr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=kE(e)),e=BD(i.get(t),e);return kE(e)}function BD(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const u=i.charAt(a);switch(u){case"\0":t+="";break;case Fd:t+="";break;default:t+=u}}return t}function kE(i){return i+Fd+""}function Is(i){const e=i.length;if($e(e>=2,64408,{path:i}),e===2)return $e(i.charAt(0)===Fd&&i.charAt(1)==="",56145,{path:i}),Qt.emptyPath();const t=e-2,r=[];let a="";for(let u=0;u<e;){const c=i.indexOf(Fd,u);switch((c<0||c>t)&&Fe(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(u,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),r.push(p);break;case"":a+=i.substring(u,c),a+="\0";break;case"":a+=i.substring(u,c+1);break;default:Fe(61167,{path:i})}u=c+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="remoteDocuments",Jh="owner",hl="owner",Vh="mutationQueues",zD="userId",ts="mutations",LE="batchId",gu="userMutationsIndex",UE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(i,e){return[i,mr(e)]}function F1(i,e,t){return[i,mr(e),t]}const jD={},Dl="documentMutations",Kd="remoteDocumentsV14",qD=["prefixPath","collectionGroup","readTime","documentId"],Ad="documentKeyIndex",FD=["prefixPath","collectionGroup","documentId"],K1="collectionGroupIndex",KD=["collectionGroup","readTime","prefixPath","documentId"],Mh="remoteDocumentGlobal",iy="remoteDocumentGlobalKey",Ol="targets",H1="queryTargetsIndex",HD=["canonicalId","targetId"],Pl="targetDocuments",GD=["targetId","path"],Xy="documentTargetsIndex",QD=["path","targetId"],Hd="targetGlobalKey",_u="targetGlobal",kh="collectionParents",YD=["collectionId","parent"],Nl="clientMetadata",$D="clientId",vm="bundles",XD="bundleId",_m="namedQueries",WD="name",Wy="indexConfiguration",JD="indexId",sy="collectionGroupIndex",ZD="collectionGroup",Gd="indexState",eO=["indexId","uid"],G1="sequenceNumberIndex",tO=["uid","sequenceNumber"],Qd="indexEntries",nO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Q1="documentKeyIndex",rO=["indexId","uid","orderedDocumentKey"],bm="documentOverlays",iO=["userId","collectionPath","documentId"],ay="collectionPathOverlayIndex",sO=["userId","collectionPath","largestBatchId"],Y1="collectionGroupOverlayIndex",aO=["userId","collectionGroup","largestBatchId"],Jy="globals",oO="name",$1=[Vh,ts,Dl,cu,Ol,Jh,_u,Pl,Nl,Mh,kh,vm,_m],uO=[...$1,bm],X1=[Vh,ts,Dl,Kd,Ol,Jh,_u,Pl,Nl,Mh,kh,vm,_m,bm],W1=X1,Zy=[...W1,Wy,Gd,Qd],lO=Zy,cO=[...Zy,Jy];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends z1{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Ln(i,e){const t=Ye(i);return vo.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ou(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function J1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new Wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,t,r,a,u){this.key=e,this.value=t,this.color=r??rr.RED,this.left=a??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,u){return new rr(e??this.key,t??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const u=r(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,r),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,r,a,u){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zE(this.data.getIterator())}getIteratorFrom(e){return new zE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class zE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new Ut(on.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Z1("Invalid base64 string: "+u):u}}(e);return new wn(t)}static fromUint8Array(e){const t=function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u}(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const hO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(i){if($e(!!i,39018),typeof i=="string"){let e=0;const t=hO.exec(i);if($e(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(i.seconds),nanos:rn(i.nanos)}}function rn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function da(i){return typeof i=="string"?wn.fromBase64String(i):wn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="server_timestamp",tS="__type__",nS="__previous_value__",rS="__local_write_time__";function ev(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[tS])===null||t===void 0?void 0:t.stringValue)===eS}function Em(i){const e=i.mapValue.fields[nS];return ev(e)?Em(e):e}function Lh(i){const e=fa(i.mapValue.fields[rS].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t,r,a,u,c,d,p,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=E}}const Yd="(default)";class Au{constructor(e,t){this.projectId=e,this.database=t||Yd}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__type__",iS="__max__",fo={mapValue:{fields:{__type__:{stringValue:iS}}}},nv="__vector__",Vl="value",Id={nullValue:"NULL_VALUE"};function _o(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ev(i)?4:sS(i)?9007199254740991:Tm(i)?10:11:Fe(28295,{value:i})}function Ds(i,e){if(i===e)return!0;const t=_o(i);if(t!==_o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Lh(i).isEqual(Lh(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=fa(a.timestampValue),d=fa(u.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,u){return da(a.bytesValue).isEqual(da(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,u){return rn(a.geoPointValue.latitude)===rn(u.geoPointValue.latitude)&&rn(a.geoPointValue.longitude)===rn(u.geoPointValue.longitude)}(i,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return rn(a.integerValue)===rn(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=rn(a.doubleValue),d=rn(u.doubleValue);return c===d?Nh(c)===Nh(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return xl(i.arrayValue.values||[],e.arrayValue.values||[],Ds);case 10:case 11:return function(a,u){const c=a.mapValue.fields||{},d=u.mapValue.fields||{};if(BE(c)!==BE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ds(c[p],d[p])))return!1;return!0}(i,e);default:return Fe(52216,{left:i})}}function Uh(i,e){return(i.values||[]).find(t=>Ds(t,e))!==void 0}function bo(i,e){if(i===e)return 0;const t=_o(i),r=_o(e);if(t!==r)return it(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(i.booleanValue,e.booleanValue);case 2:return function(u,c){const d=rn(u.integerValue||u.doubleValue),p=rn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return jE(i.timestampValue,e.timestampValue);case 4:return jE(Lh(i),Lh(e));case 5:return ny(i.stringValue,e.stringValue);case 6:return function(u,c){const d=da(u),p=da(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,c){const d=u.split("/"),p=c.split("/");for(let v=0;v<d.length&&v<p.length;v++){const E=it(d[v],p[v]);if(E!==0)return E}return it(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,c){const d=it(rn(u.latitude),rn(c.latitude));return d!==0?d:it(rn(u.longitude),rn(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return qE(i.arrayValue,e.arrayValue);case 10:return function(u,c){var d,p,v,E;const I=u.fields||{},x=c.fields||{},B=(d=I[Vl])===null||d===void 0?void 0:d.arrayValue,z=(p=x[Vl])===null||p===void 0?void 0:p.arrayValue,le=it(((v=B==null?void 0:B.values)===null||v===void 0?void 0:v.length)||0,((E=z==null?void 0:z.values)===null||E===void 0?void 0:E.length)||0);return le!==0?le:qE(B,z)}(i.mapValue,e.mapValue);case 11:return function(u,c){if(u===fo.mapValue&&c===fo.mapValue)return 0;if(u===fo.mapValue)return 1;if(c===fo.mapValue)return-1;const d=u.fields||{},p=Object.keys(d),v=c.fields||{},E=Object.keys(v);p.sort(),E.sort();for(let I=0;I<p.length&&I<E.length;++I){const x=ny(p[I],E[I]);if(x!==0)return x;const B=bo(d[p[I]],v[E[I]]);if(B!==0)return B}return it(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Fe(23264,{Pe:t})}}function jE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return it(i,e);const t=fa(i),r=fa(e),a=it(t.seconds,r.seconds);return a!==0?a:it(t.nanos,r.nanos)}function qE(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const u=bo(t[a],r[a]);if(u)return u}return it(t.length,r.length)}function Ml(i){return uy(i)}function uy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=fa(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return da(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ze.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",a=!0;for(const u of t.values||[])a?a=!1:r+=",",r+=uy(u);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const c of r)u?u=!1:a+=",",a+=`${c}:${uy(t.fields[c])}`;return a+"}"}(i.mapValue):Fe(61005,{value:i})}function Rd(i){switch(_o(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(i);return e?16+Rd(e):16;case 5:return 2*i.stringValue.length;case 6:return da(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,u)=>a+Rd(u),0)}(i.arrayValue);case 10:case 11:return function(r){let a=0;return Ou(r.fields,(u,c)=>{a+=u.length+Rd(c)}),a}(i.mapValue);default:throw Fe(13486,{value:i})}}function rv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ly(i){return!!i&&"integerValue"in i}function Bh(i){return!!i&&"arrayValue"in i}function FE(i){return!!i&&"nullValue"in i}function KE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xd(i){return!!i&&"mapValue"in i}function Tm(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[tv])===null||t===void 0?void 0:t.stringValue)===nv}function Sh(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ou(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sh(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sh(i.arrayValue.values[t]);return e}return Object.assign({},i)}function sS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===iS}const aS={mapValue:{fields:{[tv]:{stringValue:nv},[Vl]:{arrayValue:{}}}}};function dO(i){return"nullValue"in i?Id:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?rv(Au.empty(),ze.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Tm(i)?aS:{mapValue:{}}:Fe(35942,{value:i})}function mO(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?rv(Au.empty(),ze.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?aS:"mapValue"in i?Tm(i)?{mapValue:{}}:fo:Fe(61959,{value:i})}function HE(i,e){const t=bo(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function GE(i,e){const t=bo(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.value=e}static empty(){return new Br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sh(t)}setAll(e){let t=on.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Sh(c):a.push(d.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,a)}delete(e){const t=this.field(e.popLast());xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ds(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];xd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ou(t,(a,u)=>e[a]=u);for(const a of r)delete e[a]}clone(){return new Br(Sh(this.value))}}function oS(i){const e=[];return Ou(i.fields,(t,r)=>{const a=new on([t]);if(xd(r)){const u=oS(r.mapValue).fields;if(u.length===0)e.push(a);else for(const c of u)e.push(a.child(c))}else e.push(a)}),new Vi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,r,a,u,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=u,this.data=c,this.documentState=d}static newInvalidDocument(e){return new pn(e,0,Ze.min(),Ze.min(),Ze.min(),Br.empty(),0)}static newFoundDocument(e,t,r,a){return new pn(e,1,t,Ze.min(),r,a,0)}static newNoDocument(e,t){return new pn(e,2,t,Ze.min(),Ze.min(),Br.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Ze.min(),Ze.min(),Br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.position=e,this.inclusive=t}}function QE(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const u=e[a],c=i.position[a];if(u.field.isKeyField()?r=ze.comparator(ze.fromName(c.referenceValue),t.key):r=bo(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function YE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ds(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t="asc"){this.field=e,this.dir=t}}function pO(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{}class At extends uS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gO(e,t,r):t==="array-contains"?new _O(e,r):t==="in"?new mS(e,r):t==="not-in"?new bO(e,r):t==="array-contains-any"?new EO(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yO(e,r):new vO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bo(t,this.value)):t!==null&&_o(this.value)===_o(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends uS{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ht(e,t)}matches(e){return Ll(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ll(i){return i.op==="and"}function cy(i){return i.op==="or"}function iv(i){return lS(i)&&Ll(i)}function lS(i){for(const e of i.filters)if(e instanceof Ht)return!1;return!0}function hy(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+Ml(i.value);if(iv(i))return i.filters.map(e=>hy(e)).join(",");{const e=i.filters.map(t=>hy(t)).join(",");return`${i.op}(${e})`}}function cS(i,e){return i instanceof At?function(r,a){return a instanceof At&&r.op===a.op&&r.field.isEqual(a.field)&&Ds(r.value,a.value)}(i,e):i instanceof Ht?function(r,a){return a instanceof Ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((u,c,d)=>u&&cS(c,a.filters[d]),!0):!1}(i,e):void Fe(19439)}function hS(i,e){const t=i.filters.concat(e);return Ht.create(t,i.op)}function fS(i){return i instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${Ml(t.value)}`}(i):i instanceof Ht?function(t){return t.op.toString()+" {"+t.getFilters().map(fS).join(" ,")+"}"}(i):"Filter"}class gO extends At{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class yO extends At{constructor(e,t){super(e,"in",t),this.keys=dS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vO extends At{constructor(e,t){super(e,"not-in",t),this.keys=dS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dS(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class _O extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bh(t)&&Uh(t.arrayValue,this.value)}}class mS extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uh(this.value.arrayValue,t)}}class bO extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uh(this.value.arrayValue,t)}}class EO extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Uh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t=null,r=[],a=[],u=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=c,this.endAt=d,this.Ie=null}}function fy(i,e=null,t=[],r=[],a=null,u=null,c=null){return new TO(i,e,t,r,a,u,c)}function Iu(i){const e=Ye(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),ym(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ml(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ml(r)).join(",")),e.Ie=t}return e.Ie}function Zh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!pO(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!cS(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!YE(i.startAt,e.startAt)&&YE(i.endAt,e.endAt)}function Xd(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Wd(i,e){return i.filters.filter(t=>t instanceof At&&t.field.isEqual(e))}function $E(i,e,t){let r=Id,a=!0;for(const u of Wd(i,e)){let c=Id,d=!0;switch(u.op){case"<":case"<=":c=dO(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,d=!1;break;case"!=":case"not-in":c=Id}HE({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let u=0;u<i.orderBy.length;++u)if(i.orderBy[u].field.isEqual(e)){const c=t.position[u];HE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function XE(i,e,t){let r=fo,a=!0;for(const u of Wd(i,e)){let c=fo,d=!0;switch(u.op){case">=":case">":c=mO(u.value),d=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,d=!1;break;case"!=":case"not-in":c=fo}GE({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let u=0;u<i.orderBy.length;++u)if(i.orderBy[u].field.isEqual(e)){const c=t.position[u];GE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t=null,r=[],a=[],u=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function pS(i,e,t,r,a,u,c,d){return new wm(i,e,t,r,a,u,c,d)}function Sm(i){return new wm(i)}function WE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function wO(i){return i.collectionGroup!==null}function Ah(i){const e=Ye(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ut(on.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(d=d.add(v.field))})}),d})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new $d(u,r))}),t.has(on.keyField().canonicalString())||e.Ee.push(new $d(on.keyField(),r))}return e.Ee}function ci(i){const e=Ye(i);return e.de||(e.de=SO(e,Ah(i))),e.de}function SO(i,e){if(i.limitType==="F")return fy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new $d(a.field,u)});const t=i.endAt?new kl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new kl(i.startAt.position,i.startAt.inclusive):null;return fy(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function dy(i,e,t){return new wm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Am(i,e){return Zh(ci(i),ci(e))&&i.limitType===e.limitType}function gS(i){return`${Iu(ci(i))}|lt:${i.limitType}`}function vl(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>fS(a)).join(", ")}]`),ym(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Ml(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Ml(a)).join(",")),`Target(${r})`}(ci(i))}; limitType=${i.limitType})`}function ef(i,e){return e.isFoundDocument()&&function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ze.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(i,e)&&function(r,a){for(const u of Ah(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(i,e)&&function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0}(i,e)&&function(r,a){return!(r.startAt&&!function(c,d,p){const v=QE(c,d,p);return c.inclusive?v<=0:v<0}(r.startAt,Ah(r),a)||r.endAt&&!function(c,d,p){const v=QE(c,d,p);return c.inclusive?v>=0:v>0}(r.endAt,Ah(r),a))}(i,e)}function yS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function vS(i){return(e,t)=>{let r=!1;for(const a of Ah(i)){const u=AO(a,e,t);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function AO(i,e,t){const r=i.field.isKeyField()?ze.comparator(e.key,t.key):function(u,c,d){const p=c.data.field(u),v=d.data.field(u);return p!==null&&v!==null?bo(p,v):Fe(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(t,r)=>{for(const[a,u]of r)e(a,u)})}isEmpty(){return J1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new Wt(ze.comparator);function ui(){return IO}const _S=new Wt(ze.comparator);function gh(...i){let e=_S;for(const t of i)e=e.insert(t.key,t);return e}function bS(i){let e=_S;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rs(){return Ih()}function ES(){return Ih()}function Ih(){return new ga(i=>i.toString(),(i,e)=>i.isEqual(e))}const RO=new Wt(ze.comparator),xO=new Ut(ze.comparator);function pt(...i){let e=xO;for(const t of i)e=e.add(t);return e}const CO=new Ut(it);function sv(){return CO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nh(e)?"-0":e}}function TS(i){return{integerValue:""+i}}function DO(i,e){return q1(e)?TS(e):av(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this._=void 0}}function OO(i,e,t){return i instanceof zh?function(a,u){const c={fields:{[tS]:{stringValue:eS},[rS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&ev(u)&&(u=Em(u)),u&&(c.fields[nS]=u),{mapValue:c}}(t,e):i instanceof Ul?SS(i,e):i instanceof Bl?AS(i,e):function(a,u){const c=wS(a,u),d=JE(c)+JE(a.Re);return ly(c)&&ly(a.Re)?TS(d):av(a.serializer,d)}(i,e)}function PO(i,e,t){return i instanceof Ul?SS(i,e):i instanceof Bl?AS(i,e):t}function wS(i,e){return i instanceof jh?function(r){return ly(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class zh extends Im{}class Ul extends Im{constructor(e){super(),this.elements=e}}function SS(i,e){const t=IS(e);for(const r of i.elements)t.some(a=>Ds(a,r))||t.push(r);return{arrayValue:{values:t}}}class Bl extends Im{constructor(e){super(),this.elements=e}}function AS(i,e){let t=IS(e);for(const r of i.elements)t=t.filter(a=>!Ds(a,r));return{arrayValue:{values:t}}}class jh extends Im{constructor(e,t){super(),this.serializer=e,this.Re=t}}function JE(i){return rn(i.integerValue||i.doubleValue)}function IS(i){return Bh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t){this.field=e,this.transform=t}}function VO(i,e){return i.field.isEqual(e.field)&&function(r,a){return r instanceof Ul&&a instanceof Ul||r instanceof Bl&&a instanceof Bl?xl(r.elements,a.elements,Ds):r instanceof jh&&a instanceof jh?Ds(r.Re,a.Re):r instanceof zh&&a instanceof zh}(i.transform,e.transform)}class MO{constructor(e,t){this.version=e,this.transformResults=t}}class li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Rm{}function RS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ov(i.key,li.none()):new Xl(i.key,i.data,li.none());{const t=i.data,r=Br.empty();let a=new Ut(on.comparator);for(let u of e.fields)if(!a.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),a=a.add(u)}return new Ao(i.key,r,new Vi(a.toArray()),li.none())}}function kO(i,e,t){i instanceof Xl?function(a,u,c){const d=a.value.clone(),p=eT(a.fieldTransforms,u,c.transformResults);d.setAll(p),u.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Ao?function(a,u,c){if(!Cd(a.precondition,u))return void u.convertToUnknownDocument(c.version);const d=eT(a.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(xS(a)),p.setAll(d),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Rh(i,e,t,r){return i instanceof Xl?function(u,c,d,p){if(!Cd(u.precondition,c))return d;const v=u.value.clone(),E=tT(u.fieldTransforms,p,c);return v.setAll(E),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(i,e,t,r):i instanceof Ao?function(u,c,d,p){if(!Cd(u.precondition,c))return d;const v=tT(u.fieldTransforms,p,c),E=c.data;return E.setAll(xS(u)),E.setAll(v),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(I=>I.field))}(i,e,t,r):function(u,c,d){return Cd(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function LO(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),u=wS(r.transform,a||null);u!=null&&(t===null&&(t=Br.empty()),t.set(r.field,u))}return t||null}function ZE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&xl(r,a,(u,c)=>VO(u,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Xl extends Rm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ao extends Rm{constructor(e,t,r,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function xS(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function eT(i,e,t){const r=new Map;$e(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let a=0;a<t.length;a++){const u=i[a],c=u.transform,d=e.data.field(u.field);r.set(u.field,PO(c,d,t[a]))}return r}function tT(i,e,t){const r=new Map;for(const a of i){const u=a.transform,c=t.data.field(a.field);r.set(a.field,OO(u,c,e))}return r}class ov extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CS extends Rm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&kO(u,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ES();return this.mutations.forEach(a=>{const u=e.get(a.key),c=u.overlayedDocument;let d=this.applyToLocalView(c,u.mutatedFields);d=t.has(a.key)?null:d;const p=RS(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pt())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,(t,r)=>ZE(t,r))&&xl(this.baseMutations,e.baseMutations,(t,r)=>ZE(t,r))}}class lv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){$e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let a=function(){return RO}();const u=e.mutations;for(let c=0;c<u.length;c++)a=a.insert(u[c].key,r[c].version);return new lv(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,xt;function BO(i){switch(i){case Se.OK:return Fe(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return Fe(15467,{code:i})}}function DS(i){if(i===void 0)return Tn("GRPC error has no .code"),Se.UNKNOWN;switch(i){case Dn.OK:return Se.OK;case Dn.CANCELLED:return Se.CANCELLED;case Dn.UNKNOWN:return Se.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return Se.INTERNAL;case Dn.UNAVAILABLE:return Se.UNAVAILABLE;case Dn.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case Dn.NOT_FOUND:return Se.NOT_FOUND;case Dn.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case Dn.ABORTED:return Se.ABORTED;case Dn.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case Dn.DATA_LOSS:return Se.DATA_LOSS;default:return Fe(39323,{code:i})}}(xt=Dn||(Dn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new yo([4294967295,4294967295],0);function nT(i){const e=V1().encode(i),t=new R1;return t.update(e),new Uint8Array(t.digest())}function rT(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new yo([t,r],0),new yo([a,u],0)]}class hv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yh(`Invalid padding: ${t}`);if(r<0)throw new yh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yh(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=yo.fromNumber(this.pe)}we(e,t,r){let a=e.add(t.multiply(yo.fromNumber(r)));return a.compare(zO)===1&&(a=new yo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=nT(e),[r,a]=rT(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);if(!this.be(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new hv(u,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=nT(e),[r,a]=rT(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,r,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,nf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tf(Ze.min(),a,new Wt(it),ui(),pt())}}class nf{constructor(e,t,r,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nf(r,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,r,a){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=a}}class OS{constructor(e,t){this.targetId=e,this.Ce=t}}class PS{constructor(e,t,r=wn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class iT{constructor(){this.Fe=0,this.Me=sT(),this.xe=wn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=pt(),t=pt(),r=pt();return this.Me.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Fe(38017,{changeType:u})}}),new nf(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=sT()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class jO{constructor(e){this.ze=e,this.je=new Map,this.He=ui(),this.Je=fd(),this.Ye=fd(),this.Ze=new Wt(it)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,r=e.Ce.count,a=this._t(t);if(a){const u=a.target;if(Xd(u))if(r===0){const c=new ze(u.path);this.tt(t,c,pn.newNoDocument(c,Ze.min()))}else $e(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=t;let c,d;try{c=da(r).toUint8Array()}catch(p){if(p instanceof Z1)return Oh("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new hv(c,a,u)}catch(p){return Oh(p instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let a=0;return r.forEach(u=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,u,null),a++)}),a}It(e){const t=new Map;this.je.forEach((u,c)=>{const d=this._t(c);if(d){if(u.current&&Xd(d.target)){const p=new ze(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,pn.newNoDocument(p,e))}u.Le&&(t.set(c,u.qe()),u.Qe())}});let r=pt();this.Ye.forEach((u,c)=>{let d=!0;c.forEachWhile(p=>{const v=this._t(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(u))}),this.He.forEach((u,c)=>c.setReadTime(e));const a=new tf(e,t,this.Ze,this.He,r);return this.He=ui(),this.Je=fd(),this.Ye=fd(),this.Ze=new Wt(it),a}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new iT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ut(it),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ut(it),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new iT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function fd(){return new Wt(ze.comparator)}function sT(){return new Wt(ze.comparator)}const qO={asc:"ASCENDING",desc:"DESCENDING"},FO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KO={and:"AND",or:"OR"};class HO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function my(i,e){return i.useProto3Json||ym(e)?e:{value:e}}function zl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function GO(i,e){return zl(i,e.toTimestamp())}function Sr(i){return $e(!!i,49232),Ze.fromTimestamp(function(t){const r=fa(t);return new un(r.seconds,r.nanos)}(i))}function fv(i,e){return py(i,e).canonicalString()}function py(i,e){const t=function(a){return new Qt(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function VS(i){const e=Qt.fromString(i);return $e(FS(e),10190,{key:e.toString()}),e}function Jd(i,e){return fv(i.databaseId,e.path)}function bu(i,e){const t=VS(e);if(t.get(1)!==i.databaseId.projectId)throw new Ke(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Ke(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ze(LS(t))}function MS(i,e){return fv(i.databaseId,e)}function kS(i){const e=VS(i);return e.length===4?Qt.emptyPath():LS(e)}function gy(i){return new Qt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function LS(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function aT(i,e,t){return{name:Jd(i,e),fields:t.value.mapValue.fields}}function QO(i,e,t){const r=bu(i,e.name),a=Sr(e.updateTime),u=e.createTime?Sr(e.createTime):Ze.min(),c=new Br({mapValue:{fields:e.fields}}),d=pn.newFoundDocument(r,a,u,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function YO(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Fe(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(v,E){return v.useProto3Json?($e(E===void 0||typeof E=="string",58123),wn.fromBase64String(E||"")):($e(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),wn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(v){const E=v.code===void 0?Se.UNKNOWN:DS(v.code);return new Ke(E,v.message||"")}(c);t=new PS(r,a,u,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=bu(i,r.document.name),u=Sr(r.document.updateTime),c=r.document.createTime?Sr(r.document.createTime):Ze.min(),d=new Br({mapValue:{fields:r.document.fields}}),p=pn.newFoundDocument(a,u,c,d),v=r.targetIds||[],E=r.removedTargetIds||[];t=new Dd(v,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=bu(i,r.document),u=r.readTime?Sr(r.readTime):Ze.min(),c=pn.newNoDocument(a,u),d=r.removedTargetIds||[];t=new Dd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=bu(i,r.document),u=r.removedTargetIds||[];t=new Dd([],u,a,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,c=new UO(a,u),d=r.targetId;t=new OS(d,c)}}return t}function Zd(i,e){let t;if(e instanceof Xl)t={update:aT(i,e.key,e.value)};else if(e instanceof ov)t={delete:Jd(i,e.key)};else if(e instanceof Ao)t={update:aT(i,e.key,e.data),updateMask:eP(e.fieldMask)};else{if(!(e instanceof CS))return Fe(16599,{ft:e.type});t={verify:Jd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const d=c.transform;if(d instanceof zh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ul)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Bl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof jh)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Fe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:GO(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Fe(27497)}(i,e.precondition)),t}function yy(i,e){const t=e.currentDocument?function(u){return u.updateTime!==void 0?li.updateTime(Sr(u.updateTime)):u.exists!==void 0?li.exists(u.exists):li.none()}(e.currentDocument):li.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let p=null;if("setToServerValue"in d)$e(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new zh;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];p=new Ul(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];p=new Bl(E)}else"increment"in d?p=new jh(c,d.increment):Fe(16584,{proto:d});const v=on.fromServerFormat(d.fieldPath);return new NO(v,p)}(i,a)):[];if(e.update){e.update.name;const a=bu(i,e.update.name),u=new Br({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const v=p.fieldPaths||[];return new Vi(v.map(E=>on.fromServerFormat(E)))}(e.updateMask);return new Ao(a,u,c,t,r)}return new Xl(a,u,t,r)}if(e.delete){const a=bu(i,e.delete);return new ov(a,t)}if(e.verify){const a=bu(i,e.verify);return new CS(a,t)}return Fe(1463,{proto:e})}function $O(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map(t=>function(a,u){let c=a.updateTime?Sr(a.updateTime):Sr(u);return c.isEqual(Ze.min())&&(c=Sr(u)),new MO(c,a.transformResults||[])}(t,e))):[]}function US(i,e){return{documents:[MS(i,e.path)]}}function BS(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MS(i,a);const u=function(v){if(v.length!==0)return qS(Ht.create(v,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const c=function(v){if(v.length!==0)return v.map(E=>function(x){return{field:_l(x.field),direction:WO(x.dir)}}(E))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=my(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:a}}function zS(i){let e=kS(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){$e(r===1,65062);const E=t.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=function(I){const x=jS(I);return x instanceof Ht&&iv(x)?x.getFilters():[x]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(x=>function(z){return new $d(bl(z.field),function(ie){switch(ie){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(x))}(t.orderBy));let d=null;t.limit&&(d=function(I){let x;return x=typeof I=="object"?I.value:I,ym(x)?null:x}(t.limit));let p=null;t.startAt&&(p=function(I){const x=!!I.before,B=I.values||[];return new kl(B,x)}(t.startAt));let v=null;return t.endAt&&(v=function(I){const x=!I.before,B=I.values||[];return new kl(B,x)}(t.endAt)),pS(e,a,c,u,d,"F",p,v)}function XO(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jS(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=bl(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=bl(t.unaryFilter.field);return At.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=bl(t.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bl(t.unaryFilter.field);return At.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}}(i):i.fieldFilter!==void 0?function(t){return At.create(bl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Ht.create(t.compositeFilter.filters.map(r=>jS(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}}(t.compositeFilter.op))}(i):Fe(30097,{filter:i})}function WO(i){return qO[i]}function JO(i){return FO[i]}function ZO(i){return KO[i]}function _l(i){return{fieldPath:i.canonicalString()}}function bl(i){return on.fromServerFormat(i.fieldPath)}function qS(i){return i instanceof At?function(t){if(t.op==="=="){if(KE(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(FE(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KE(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(FE(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:JO(t.op),value:t.value}}}(i):i instanceof Ht?function(t){const r=t.getFilters().map(a=>qS(a));return r.length===1?r[0]:{compositeFilter:{op:ZO(t.op),filters:r}}}(i):Fe(54877,{filter:i})}function eP(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t,r,a,u=Ze.min(),c=Ze.min(),d=wn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.wt=e}}function tP(i,e){let t;if(e.document)t=QO(i.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),a=xu(e.noDocument.readTime);t=pn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=ze.fromSegments(e.unknownDocument.path),a=xu(e.unknownDocument.version);t=pn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const u=new un(a[0],a[1]);return Ze.fromTimestamp(u)}(e.readTime)),t}function oT(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:em(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(u,c){return{name:Jd(u,c.key),fields:c.data.value.mapValue.fields,updateTime:zl(u,c.version.toTimestamp()),createTime:zl(u,c.createTime.toTimestamp())}}(i.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ru(e.version)}}return r}function em(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xu(i){const e=new un(i.seconds,i.nanoseconds);return Ze.fromTimestamp(e)}function fu(i,e){const t=(e.baseMutations||[]).map(u=>yy(i.wt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const d=e.mutations[u+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map(u=>yy(i.wt,u)),a=un.fromMillis(e.localWriteTimeMs);return new uv(e.batchId,a,t,r)}function vh(i){const e=xu(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?xu(i.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=function(u){return u.documents!==void 0}(i.query)?function(u){const c=u.documents.length;return $e(c===1,1966,{count:c}),ci(Sm(kS(u.documents[0])))}(i.query):function(u){return ci(zS(u))}(i.query),new oa(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,wn.fromBase64String(i.resumeToken))}function HS(i,e){const t=Ru(e.snapshotVersion),r=Ru(e.lastLimboFreeSnapshotVersion);let a;a=Xd(e.target)?US(i.wt,e.target):BS(i.wt,e.target).gt;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Iu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function GS(i){const e=zS({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?dy(e,e.limit,"L"):e}function Vg(i,e){return new cv(e.largestBatchId,yy(i.wt,e.overlayMutation))}function uT(i,e){const t=e.path.lastSegment();return[i,mr(e.path.popLast()),t]}function lT(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Ru(r.readTime),documentKey:mr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{getBundleMetadata(e,t){return cT(e).get(t).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:xu(u.createTime),version:u.version}}(r)})}saveBundleMetadata(e,t){return cT(e).put(function(a){return{bundleId:a.id,createTime:Ru(Sr(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return hT(e).get(t).next(r=>{if(r)return function(u){return{name:u.name,query:GS(u.bundledQuery),readTime:xu(u.readTime)}}(r)})}saveNamedQuery(e,t){return hT(e).put(function(a){return{name:a.name,readTime:Ru(Sr(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function cT(i){return Ln(i,vm)}function hT(i){return Ln(i,_m)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new xm(e,r)}getOverlay(e,t){return Fc(e).get(uT(this.userId,t)).next(r=>r?Vg(this.serializer,r):null)}getOverlays(e,t){const r=Rs();return ne.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((u,c)=>{const d=new cv(t,c);a.push(this.St(e,d))}),ne.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(mr(c.getCollectionPath())));const u=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Fc(e).X(ay,d))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const a=Rs(),u=mr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Fc(e).J(ay,c).next(d=>{for(const p of d){const v=Vg(this.serializer,p);a.set(v.getKey(),v)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const u=Rs();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fc(e).te({index:Y1,range:d},(p,v,E)=>{const I=Vg(this.serializer,v);u.size()<a||I.largestBatchId===c?(u.set(I.getKey(),I),c=I.largestBatchId):E.done()}).next(()=>u)}St(e,t){return Fc(e).put(function(a,u,c){const[d,p,v]=uT(u,c.mutation.key);return{userId:u,collectionPath:p,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Zd(a.wt,c.mutation)}}(this.serializer,this.userId,t))}}function Fc(i){return Ln(i,bm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{Dt(e){return Ln(e,Jy)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?wn.fromUint8Array(r):wn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rn(e.integerValue));else if("doubleValue"in e){const r=rn(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Nh(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=fa(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(da(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?sS(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Tm(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Fe(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const a of Object.keys(r))this.Nt(a,t),this.Ct(r[a],t)}qt(e,t){var r,a;const u=e.fields||{};this.Mt(t,53);const c=Vl,d=((a=(r=u[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Mt(t,15),t.xt(rn(d)),this.Nt(c,t),this.Ct(u[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const a of r)this.Ct(a,t)}kt(e,t){this.Mt(t,37),ze.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}du.Wt=new du;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=255;function iP(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function fT(i){const e=64-function(r){let a=0;for(let u=0;u<8;++u){const c=iP(255&r[u]);if(a+=c,c!==8)break}return a}(i);return Math.ceil(e/8)}class sP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const a=t.codePointAt(0);this.zt(240|a>>>18),this.zt(128|63&a>>>12),this.zt(128|63&a>>>6),this.zt(128|63&a)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Yt()}en(e){const t=this.tn(e),r=fT(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}rn(e){const t=this.tn(e),r=fT(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}sn(){this._n(dl),this._n(255)}an(){this.un(dl),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===dl?(this._n(dl),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===dl?(this.un(dl),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class aP{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class oP{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Kc{constructor(){this.ln=new sP,this.hn=new aP(this.ln),this.Pn=new oP(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}In(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mu(this.indexId,this.documentKey,this.arrayValue,r)}}function so(i,e){let t=i.indexId-e.indexId;return t!==0?t:(t=dT(i.arrayValue,e.arrayValue),t!==0?t:(t=dT(i.directionalValue,e.directionalValue),t!==0?t:ze.comparator(i.documentKey,e.documentKey)))}function dT(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.En=new Ut((t,r)=>on.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if($e(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=ry(e);if(t!==void 0&&!this.mn(t))return!1;const r=lu(e);let a=new Set,u=0,c=0;for(;u<r.length&&this.mn(r[u]);++u)a=a.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.En.size>0){const d=this.En.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=r[u];if(!this.fn(d,p)||!this.gn(this.dn[c++],p))return!1}++u}for(;u<r.length;++u){const d=r[u];if(c>=this.dn.length||!this.gn(this.dn[c++],d))return!1}return!0}pn(){if(this.Rn)return null;let e=new Ut(on.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new wd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new wd(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new wd(r.field,r.dir==="asc"?0:1)));return new qd(qd.UNKNOWN_ID,this.collectionId,t,Ph.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(i){var e,t;if($e(i instanceof At||i instanceof Ht,20012),i instanceof At){if(i instanceof mS){const a=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(u=>At.create(i.field,"==",u)))||[];return Ht.create(a,"or")}return i}const r=i.filters.map(a=>QS(a));return Ht.create(r,i.op)}function uP(i){if(i.getFilters().length===0)return[];const e=by(QS(i));return $e(YS(e),7391),vy(e)||_y(e)?[e]:e.getFilters()}function vy(i){return i instanceof At}function _y(i){return i instanceof Ht&&iv(i)}function YS(i){return vy(i)||_y(i)||function(t){if(t instanceof Ht&&cy(t)){for(const r of t.getFilters())if(!vy(r)&&!_y(r))return!1;return!0}return!1}(i)}function by(i){if($e(i instanceof At||i instanceof Ht,34018),i instanceof At)return i;if(i.filters.length===1)return by(i.filters[0]);const e=i.filters.map(r=>by(r));let t=Ht.create(e,i.op);return t=tm(t),YS(t)?t:($e(t instanceof Ht,64498),$e(Ll(t),40251),$e(t.filters.length>1,57927),t.filters.reduce((r,a)=>dv(r,a)))}function dv(i,e){let t;return $e(i instanceof At||i instanceof Ht,38388),$e(e instanceof At||e instanceof Ht,25473),t=i instanceof At?e instanceof At?function(a,u){return Ht.create([a,u],"and")}(i,e):pT(i,e):e instanceof At?pT(e,i):function(a,u){if($e(a.filters.length>0&&u.filters.length>0,48005),Ll(a)&&Ll(u))return hS(a,u.getFilters());const c=cy(a)?a:u,d=cy(a)?u:a,p=c.filters.map(v=>dv(v,d));return Ht.create(p,"or")}(i,e),tm(t)}function pT(i,e){if(Ll(e))return hS(e,i.getFilters());{const t=e.filters.map(r=>dv(i,r));return Ht.create(t,"or")}}function tm(i){if($e(i instanceof At||i instanceof Ht,11850),i instanceof At)return i;const e=i.getFilters();if(e.length===1)return tm(e[0]);if(lS(i))return i;const t=e.map(a=>tm(a)),r=[];return t.forEach(a=>{a instanceof At?r.push(a):a instanceof Ht&&(a.op===i.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Ht.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.yn=new mv}addToCollectionParentIndex(e,t){return this.yn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(hi.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class mv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ut(Qt.comparator),u=!a.has(r);return this.index[t]=a.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ut(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="IndexedDbIndexManager",dd=new Uint8Array(0);class cP{constructor(e,t){this.databaseId=t,this.wn=new mv,this.bn=new ga(r=>Iu(r),(r,a)=>Zh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const u={collectionId:r,parent:mr(a)};return yT(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[k1(t),""],!1,!0);return yT(e).J(a).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Is(c.parent))}return r})}addFieldIndex(e,t){const r=Hc(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete a.indexId;const u=r.add(a);if(t.indexState){const c=pl(e);return u.next(d=>{c.put(lT(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Hc(e),a=pl(e),u=ml(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Hc(e),r=ml(e),a=pl(e);return t.X().next(()=>r.X()).next(()=>a.X())}createTargetIndexes(e,t){return ne.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const u=new mT(r).pn();if(u!=null)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=ml(e);let a=!0;const u=new Map;return ne.forEach(this.Sn(t),c=>this.Dn(e,c).next(d=>{a&&(a=!!d),u.set(c,d)})).next(()=>{if(a){let c=pt();const d=[];return ne.forEach(u,(p,v)=>{Ae(gT,`Using index ${function(ae){return`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`}(p)} to execute ${Iu(t)}`);const E=function(ae,Re){const xe=ry(Re);if(xe===void 0)return null;for(const Ve of Wd(ae,xe.fieldPath))switch(Ve.op){case"array-contains-any":return Ve.value.arrayValue.values||[];case"array-contains":return[Ve.value]}return null}(v,p),I=function(ae,Re){const xe=new Map;for(const Ve of lu(Re))for(const L of Wd(ae,Ve.fieldPath))switch(L.op){case"==":case"in":xe.set(Ve.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return xe.set(Ve.fieldPath.canonicalString(),L.value),Array.from(xe.values())}return null}(v,p),x=function(ae,Re){const xe=[];let Ve=!0;for(const L of lu(Re)){const P=L.kind===0?$E(ae,L.fieldPath,ae.startAt):XE(ae,L.fieldPath,ae.startAt);xe.push(P.value),Ve&&(Ve=P.inclusive)}return new kl(xe,Ve)}(v,p),B=function(ae,Re){const xe=[];let Ve=!0;for(const L of lu(Re)){const P=L.kind===0?XE(ae,L.fieldPath,ae.endAt):$E(ae,L.fieldPath,ae.endAt);xe.push(P.value),Ve&&(Ve=P.inclusive)}return new kl(xe,Ve)}(v,p),z=this.vn(p,v,x),le=this.vn(p,v,B),ie=this.Cn(p,v,I),pe=this.Fn(p.indexId,E,z,x.inclusive,le,B.inclusive,ie);return ne.forEach(pe,de=>r.Z(de,t.limit).next(ae=>{ae.forEach(Re=>{const xe=ze.fromSegments(Re.documentKey);c.has(xe)||(c=c.add(xe),d.push(xe))})}))}).next(()=>d)}return ne.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=uP(Ht.create(e.filters,"and")).map(r=>fy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,a,u,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,u.length),v=p/(t!=null?t.length:1),E=[];for(let I=0;I<p;++I){const x=t?this.Mn(t[I/v]):dd,B=this.xn(e,x,r[I%v],a),z=this.On(e,x,u[I%v],c),le=d.map(ie=>this.xn(e,x,ie,!0));E.push(...this.createRange(B,z,le))}return E}xn(e,t,r,a){const u=new mu(e,ze.empty(),t,r);return a?u:u.In()}On(e,t,r,a){const u=new mu(e,ze.empty(),t,r);return a?u.In():u}Dn(e,t){const r=new mT(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(u=>{let c=null;for(const d of u)r.Vn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.Sn(t);return ne.forEach(a,u=>this.Dn(e,u).next(c=>{c?r!==0&&c.fields.length<function(p){let v=new Ut(on.comparator),E=!1;for(const I of p.filters)for(const x of I.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?E=!0:v=v.add(x.field));for(const I of p.orderBy)I.field.isKeyField()||(v=v.add(I.field));return v.size+(E?1:0)}(u)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}Nn(e,t){const r=new Kc;for(const a of lu(e)){const u=t.data.field(a.fieldPath);if(u==null)return null;const c=r.Tn(a.kind);du.Wt.vt(u,c)}return r.cn()}Mn(e){const t=new Kc;return du.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new Kc;return du.Wt.vt(rv(this.databaseId,t),r.Tn(function(u){const c=lu(u);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let a=[];a.push(new Kc);let u=0;for(const c of lu(e)){const d=r[u++];for(const p of a)if(this.Ln(t,c.fieldPath)&&Bh(d))a=this.kn(a,c,d);else{const v=p.Tn(c.kind);du.Wt.vt(d,v)}}return this.qn(a)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const a=[...e],u=[];for(const c of r.arrayValue.values||[])for(const d of a){const p=new Kc;p.seed(d.cn()),du.Wt.vt(c,p.Tn(t.kind)),u.push(p)}return u}Ln(e,t){return!!e.filters.find(r=>r instanceof At&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Hc(e),a=pl(e);return(t?r.J(sy,IDBKeyRange.bound(t,t)):r.J()).next(u=>{const c=[];return ne.forEach(u,d=>a.get([d.indexId,this.uid]).next(p=>{c.push(function(E,I){const x=I?new Ph(I.sequenceNumber,new hi(xu(I.readTime),new ze(Is(I.documentKey)),I.largestBatchId)):Ph.empty(),B=E.fields.map(([z,le])=>new wd(on.fromServerFormat(z),le));return new qd(E.indexId,E.collectionGroup,B,x)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const u=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return u!==0?u:it(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Hc(e),u=pl(e);return this.Qn(e).next(c=>a.J(sy,IDBKeyRange.bound(t,t)).next(d=>ne.forEach(d,p=>u.put(lT(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(a,u)=>{const c=r.get(a.collectionGroup);return(c?ne.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),ne.forEach(d,p=>this.$n(e,a,p).next(v=>{const E=this.Un(u,p);return v.isEqual(E)?ne.resolve():this.Kn(e,u,p,v,E)}))))})}Wn(e,t,r,a){return ml(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,a){return ml(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const a=ml(e);let u=new Ut(so);return a.te({index:Q1,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(c,d)=>{u=u.add(new mu(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>u)}Un(e,t){let r=new Ut(so);const a=this.Nn(t,e);if(a==null)return r;const u=ry(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Bh(c))for(const d of c.arrayValue.values||[])r=r.add(new mu(t.indexId,e.key,this.Mn(d),a))}else r=r.add(new mu(t.indexId,e.key,dd,a));return r}Kn(e,t,r,a,u){Ae(gT,"Updating index entries for document '%s'",t.key);const c=[];return function(p,v,E,I,x){const B=p.getIterator(),z=v.getIterator();let le=fl(B),ie=fl(z);for(;le||ie;){let pe=!1,de=!1;if(le&&ie){const ae=E(le,ie);ae<0?de=!0:ae>0&&(pe=!0)}else le!=null?de=!0:pe=!0;pe?(I(ie),ie=fl(z)):de?(x(le),le=fl(B)):(le=fl(B),ie=fl(z))}}(a,u,so,d=>{c.push(this.Wn(e,t,r,d))},d=>{c.push(this.Gn(e,t,r,d))}),ne.waitFor(c)}Qn(e){let t=1;return pl(e).te({index:G1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,u)=>{u.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>so(c,d)).filter((c,d,p)=>!d||so(c,p[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=so(c,e),p=so(c,t);if(d===0)a[0]=e.In();else if(d>0&&p<0)a.push(c),a.push(c.In());else if(p>0)break}a.push(t);const u=[];for(let c=0;c<a.length;c+=2){if(this.zn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,dd,[]],p=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,dd,[]];u.push(IDBKeyRange.bound(d,p))}return u}zn(e,t){return so(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vT)}getMinOffset(e,t){return ne.mapArray(this.Sn(t),r=>this.Dn(e,r).next(a=>a||Fe(44426))).next(vT)}}function yT(i){return Ln(i,kh)}function ml(i){return Ln(i,Qd)}function Hc(i){return Ln(i,Wy)}function pl(i){return Ln(i,Gd)}function vT(i){$e(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Yy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new hi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$S=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(i,e,t){const r=i.store(ts),a=i.store(Dl),u=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:c},(E,I,x)=>(d++,x.delete()));u.push(p.next(()=>{$e(d===1,47070,{batchId:t.batchId})}));const v=[];for(const E of t.mutations){const I=F1(e,E.key.path,t.batchId);u.push(a.delete(I)),v.push(E.key)}return ne.waitFor(u).next(()=>v)}function nm(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Fe(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr($S,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class Cm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.jn={}}static bt(e,t,r,a){$e(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new Cm(u,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ao(e).te({index:gu,range:r},(a,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const u=El(e),c=ao(e);return c.add({}).next(d=>{$e(typeof d=="number",49019);const p=new uv(d,t,r,a),v=function(B,z,le){const ie=le.baseMutations.map(de=>Zd(B.wt,de)),pe=le.mutations.map(de=>Zd(B.wt,de));return{userId:z,batchId:le.batchId,localWriteTimeMs:le.localWriteTime.toMillis(),baseMutations:ie,mutations:pe}}(this.serializer,this.userId,p),E=[];let I=new Ut((x,B)=>it(x.canonicalString(),B.canonicalString()));for(const x of a){const B=F1(this.userId,x.key.path,d);I=I.add(x.key.path.popLast()),E.push(c.put(v)),E.push(u.put(B,jD))}return I.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.jn[d]=p.keys()}),ne.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return ao(e).get(t).next(r=>r?($e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),fu(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?ne.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.jn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ao(e).te({index:gu,range:a},(c,d,p)=>{d.userId===this.userId&&($e(d.batchId>=r,47524,{Jn:r}),u=fu(this.serializer,d)),p.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=vu;return ao(e).te({index:gu,range:t,reverse:!0},(a,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vu],[this.userId,Number.POSITIVE_INFINITY]);return ao(e).J(gu,t).next(r=>r.map(a=>fu(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sd(this.userId,t.path),a=IDBKeyRange.lowerBound(r),u=[];return El(e).te({range:a},(c,d,p)=>{const[v,E,I]=c,x=Is(E);if(v===this.userId&&t.path.isEqual(x))return ao(e).get(I).next(B=>{if(!B)throw Fe(61480,{Yn:c,batchId:I});$e(B.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:B.userId,batchId:I}),u.push(fu(this.serializer,B))});p.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(it);const a=[];return t.forEach(u=>{const c=Sd(this.userId,u.path),d=IDBKeyRange.lowerBound(c),p=El(e).te({range:d},(v,E,I)=>{const[x,B,z]=v,le=Is(B);x===this.userId&&u.path.isEqual(le)?r=r.add(z):I.done()});a.push(p)}),ne.waitFor(a).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,u=Sd(this.userId,r),c=IDBKeyRange.lowerBound(u);let d=new Ut(it);return El(e).te({range:c},(p,v,E)=>{const[I,x,B]=p,z=Is(x);I===this.userId&&r.isPrefixOf(z)?z.length===a&&(d=d.add(B)):E.done()}).next(()=>this.Zn(e,d))}Zn(e,t){const r=[],a=[];return t.forEach(u=>{a.push(ao(e).get(u).next(c=>{if(c===null)throw Fe(35274,{batchId:u});$e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(fu(this.serializer,c))}))}),ne.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return XS(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),ne.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return El(e).te({range:r},(u,c,d)=>{if(u[0]===this.userId){const p=Is(u[1]);a.push(p)}else d.done()}).next(()=>{$e(a.length===0,56720,{er:a.map(u=>u.canonicalString())})})})}containsKey(e,t){return WS(e,this.userId,t)}tr(e){return JS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:vu,lastStreamToken:""})}}function WS(i,e,t){const r=Sd(e,t.path),a=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return El(i).te({range:u,ee:!0},(d,p,v)=>{const[E,I,x]=d;E===e&&I===a&&(c=!0),v.done()}).next(()=>c)}function ao(i){return Ln(i,ts)}function El(i){return Ln(i,Dl)}function JS(i){return Ln(i,Vh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Cu(0)}static ir(){return new Cu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new Cu(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>Ze.fromTimestamp(new un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this._r(e,a)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gl(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>($e(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let a=0;const u=[];return gl(e).te((c,d)=>{const p=vh(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,u.push(this.removeTargetData(e,p)))}).next(()=>ne.waitFor(u)).next(()=>a)}forEachTarget(e,t){return gl(e).te((r,a)=>{const u=vh(a);t(u)})}sr(e){return bT(e).get(Hd).next(t=>($e(t!==null,2888),t))}_r(e,t){return bT(e).put(Hd,t)}ar(e,t){return gl(e).put(HS(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Iu(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return gl(e).te({range:a,index:H1},(c,d,p)=>{const v=vh(d);Zh(t,v.target)&&(u=v,p.done())}).next(()=>u)}addMatchingKeys(e,t,r){const a=[],u=ho(e);return t.forEach(c=>{const d=mr(c.path);a.push(u.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),ne.waitFor(a)}removeMatchingKeys(e,t,r){const a=ho(e);return ne.forEach(t,u=>{const c=mr(u.path);return ne.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ho(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=ho(e);let u=pt();return a.te({range:r,ee:!0},(c,d,p)=>{const v=Is(c[1]),E=new ze(v);u=u.add(E)}).next(()=>u)}containsKey(e,t){const r=mr(t.path),a=IDBKeyRange.bound([r],[k1(r)],!1,!0);let u=0;return ho(e).te({index:Xy,ee:!0,range:a},([c,d],p,v)=>{c!==0&&(u++,v.done())}).next(()=>u>0)}Rt(e,t){return gl(e).get(t).next(r=>r?vh(r):null)}}function gl(i){return Ln(i,Ol)}function bT(i){return Ln(i,_u)}function ho(i){return Ln(i,Pl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="LruGarbageCollector",ZS=1048576;function TT([i,e],[t,r]){const a=it(i,t);return a===0?it(e,r):a}class fP{constructor(e){this.cr=e,this.buffer=new Ut(TT),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ae(ET,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){So(t)?Ae(ET,"Ignoring IndexedDB error during garbage collection: ",t):await wo(t)}await this.Ir(3e5)})}}class dP{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(zr.le);const r=new fP(t);return this.Er.forEachTarget(e,a=>r.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>r.Pr(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(_T)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_T):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,a,u,c,d,p,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,c=Date.now(),this.nthSequenceNumber(e,a))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,t))).next(I=>(u=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(v=Date.now(),yl()<=St.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${u} targets in `+(p-d)+`ms
	Removed ${I} documents in `+(v-p)+`ms
Total Duration: ${v-E}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:I})))}}function tA(i,e){return new dP(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.db=e,this.garbageCollector=tA(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,a)=>t(a))}addReference(e,t,r){return md(e,r)}removeReference(e,t,r){return md(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return md(e,t)}gr(e,t){return function(a,u){let c=!1;return JS(a).ne(d=>WS(a,d,u).next(p=>(p&&(c=!0),ne.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let u=0;return this.mr(e,(c,d)=>{if(d<=t){const p=this.gr(e,c).next(v=>{if(!v)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ze.min()),ho(e).delete(function(I){return[0,mr(I.path)]}(c))))});a.push(p)}}).next(()=>ne.waitFor(a)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return md(e,t)}mr(e,t){const r=ho(e);let a,u=zr.le;return r.te({index:Xy},([c,d],{path:p,sequenceNumber:v})=>{c===0?(u!==zr.le&&t(new ze(Is(a)),u),u=v,a=p):u=zr.le}).next(()=>{u!==zr.le&&t(new ze(Is(a)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function md(i,e){return ho(i).put(function(r,a){return{targetId:0,path:mr(r.path),sequenceNumber:a}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.changes=new ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zo(e).put(r)}removeEntry(e,t,r){return Zo(e).delete(function(u,c){const d=u.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],em(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=pn.newInvalidDocument(t);return Zo(e).te({index:Ad,range:IDBKeyRange.only(Gc(t))},(a,u)=>{r=this.yr(t,u)}).next(()=>r)}wr(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return Zo(e).te({index:Ad,range:IDBKeyRange.only(Gc(t))},(a,u)=>{r={document:this.yr(t,u),size:nm(u)}}).next(()=>r)}getEntries(e,t){let r=ui();return this.br(e,t,(a,u)=>{const c=this.yr(a,u);r=r.insert(a,c)}).next(()=>r)}Sr(e,t){let r=ui(),a=new Wt(ze.comparator);return this.br(e,t,(u,c)=>{const d=this.yr(u,c);r=r.insert(u,d),a=a.insert(u,nm(c))}).next(()=>({documents:r,Dr:a}))}br(e,t,r){if(t.isEmpty())return ne.resolve();let a=new Ut(AT);t.forEach(p=>a=a.add(p));const u=IDBKeyRange.bound(Gc(a.first()),Gc(a.last())),c=a.getIterator();let d=c.getNext();return Zo(e).te({index:Ad,range:u},(p,v,E)=>{const I=ze.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&AT(d,I)<0;)r(d,null),d=c.getNext();d&&d.isEqual(I)&&(r(d,v),d=c.hasNext()?c.getNext():null),d?E.H(Gc(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,u){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),em(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zo(e).J(IDBKeyRange.bound(d,p,!0)).next(v=>{u==null||u.incrementDocumentReadCount(v.length);let E=ui();for(const I of v){const x=this.yr(ze.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);x.isFoundDocument()&&(ef(t,x)||a.has(x.key))&&(E=E.insert(x.key,x))}return E})}getAllFromCollectionGroup(e,t,r,a){let u=ui();const c=ST(t,r),d=ST(t,hi.max());return Zo(e).te({index:K1,range:IDBKeyRange.bound(c,d,!0)},(p,v,E)=>{const I=this.yr(ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);u=u.insert(I.key,I),u.size===a&&E.done()}).next(()=>u)}newChangeBuffer(e){return new gP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wT(e).get(iy).next(t=>($e(!!t,20021),t))}pr(e,t){return wT(e).put(iy,t)}yr(e,t){if(t){const r=tP(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ze.min())))return r}return pn.newInvalidDocument(e)}}function rA(i){return new pP(i)}class gP extends nA{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new ga(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Ut((u,c)=>it(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const d=this.Cr.get(u);if(t.push(this.vr.removeEntry(e,u,d.readTime)),c.isValidDocument()){const p=oT(this.vr.serializer,c);a=a.add(u.path.popLast());const v=nm(p);r+=v-d.size,t.push(this.vr.addEntry(e,u,p))}else if(r-=d.size,this.trackRemovals){const p=oT(this.vr.serializer,c.convertToNoDocument(Ze.min()));t.push(this.vr.addEntry(e,u,p))}}),a.forEach(u=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.vr.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:a})=>(a.forEach((u,c)=>{this.Cr.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function wT(i){return Ln(i,Mh)}function Zo(i){return Ln(i,Kd)}function Gc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ST(i,e){const t=e.documentKey.path.toArray();return[i,em(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AT(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(a=it(t[u],r[u]),a)return a;return a=it(t.length,r.length),a||(a=it(t[t.length-2],r[r.length-2]),a||it(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Rh(r.mutation,a,Vi.empty(),un.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pt()){const a=Rs();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(u=>{let c=gh();return u.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Rs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pt()))}populateOverlays(e,t,r){const a=[];return r.forEach(u=>{t.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let u=ui();const c=Ih(),d=function(){return Ih()}();return t.forEach((p,v)=>{const E=r.get(v.key);a.has(v.key)&&(E===void 0||E.mutation instanceof Ao)?u=u.insert(v.key,v):E!==void 0?(c.set(v.key,E.mutation.getFieldMask()),Rh(E.mutation,v,E.mutation.getFieldMask(),un.now())):c.set(v.key,Vi.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((v,E)=>c.set(v,E)),t.forEach((v,E)=>{var I;return d.set(v,new yP(E,(I=c.get(v))!==null&&I!==void 0?I:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Ih();let a=new Wt((c,d)=>c-d),u=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const v=t.get(p);if(v===null)return;let E=r.get(p)||Vi.empty();E=d.applyToLocalView(v,E),r.set(p,E);const I=(a.get(d.batchId)||pt()).add(p);a=a.insert(d.batchId,I)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,E=p.value,I=ES();E.forEach(x=>{if(!u.has(x)){const B=RS(t.get(x),r.get(x));B!==null&&I.set(x,B),u=u.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,I))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ze.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-u.size):ne.resolve(Rs());let d=Cl,p=u;return c.next(v=>ne.forEach(v,(E,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),u.get(E)?ne.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{p=p.insert(E,x)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,p,v,pt())).next(E=>({batchId:d,changes:bS(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let a=gh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const u=t.collectionGroup;let c=gh();return this.indexManager.getCollectionParents(e,u).next(d=>ne.forEach(d,p=>{const v=function(I,x){return new wm(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,r,a).next(E=>{E.forEach((I,x)=>{c=c.insert(I,x)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,a))).next(c=>{u.forEach((p,v)=>{const E=v.getKey();c.get(E)===null&&(c=c.insert(E,pn.newInvalidDocument(E)))});let d=gh();return c.forEach((p,v)=>{const E=u.get(p);E!==void 0&&Rh(E.mutation,v,Vi.empty(),un.now()),ef(t,v)&&(d=d.insert(p,v))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Sr(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:GS(a.bundledQuery),readTime:Sr(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.overlays=new Wt(ze.comparator),this.Or=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rs();return ne.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,u)=>{this.St(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Or.get(r);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Or.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const a=Rs(),u=t.length+1,c=new ze(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&p.largestBatchId>r&&a.set(p.getKey(),p)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let u=new Wt((v,E)=>v-E);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let E=u.get(v.largestBatchId);E===null&&(E=Rs(),u=u.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const d=Rs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,E)=>d.set(v,E)),!(d.size()>=a)););return ne.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(r.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new cv(t,r));let u=this.Or.get(t);u===void 0&&(u=pt(),this.Or.set(t,u)),this.Or.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.Nr=new Ut(Qn.Br),this.Lr=new Ut(Qn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Qn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Qn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new ze(new Qt([])),r=new Qn(t,e),a=new Qn(t,e+1),u=[];return this.Lr.forEachInRange([r,a],c=>{this.Qr(c),u.push(c.key)}),u}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new ze(new Qt([])),r=new Qn(t,e),a=new Qn(t,e+1);let u=pt();return this.Lr.forEachInRange([r,a],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Qn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Qn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return ze.comparator(e.key,t.key)||it(e.Gr,t.Gr)}static kr(e,t){return it(e.Gr,t.Gr)||ze.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ut(Qn.Br)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const u=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new uv(u,t,r,a);this.mutationQueue.push(c);for(const d of a)this.zr=this.zr.add(new Qn(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Hr(r),u=a<0?0:a;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?vu:this.Jn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qn(t,0),a=new Qn(t,Number.POSITIVE_INFINITY),u=[];return this.zr.forEachInRange([r,a],c=>{const d=this.jr(c.Gr);u.push(d)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(it);return t.forEach(a=>{const u=new Qn(a,0),c=new Qn(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([u,c],d=>{r=r.add(d.Gr)})}),ne.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const c=new Qn(new ze(u),0);let d=new Ut(it);return this.zr.forEachWhile(p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===a&&(d=d.add(p.Gr)),!0)},c),ne.resolve(this.Jr(d))}Jr(e){const t=[];return e.forEach(r=>{const a=this.jr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){$e(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return ne.forEach(t.mutations,a=>{const u=new Qn(a.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Qn(t,0),a=this.zr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.Zr=e,this.docs=function(){return new Wt(ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),u=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=ui();return t.forEach(a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():pn.newInvalidDocument(a))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let u=ui();const c=t.path,d=new ze(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:E}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Yy(U1(E),r)<=0||(a.has(E.key)||ef(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,r,a){Fe(9500)}Xr(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wP(this)}getSize(e){return ne.resolve(this.size)}}class wP extends nA{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.persistence=e,this.ei=new ga(t=>Iu(t),Zh),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.ti=0,this.ni=new pv,this.targetCount=0,this.ri=Cu.rr()}forEachTarget(e,t){return this.ei.forEach((r,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),ne.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.ar(t),ne.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let a=0;const u=[];return this.ei.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ei.delete(c),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ne.waitFor(u).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach(c=>{u.push(a.markPotentiallyOrphaned(e,c))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t){this.ii={},this.overlays={},this.si=new zr(0),this.oi=!1,this.oi=!0,this._i=new bP,this.referenceDelegate=e(this),this.ai=new SP(this),this.indexManager=new lP,this.remoteDocumentCache=function(a){return new TP(a)}(r=>this.referenceDelegate.ui(r)),this.serializer=new KS(t),this.ci=new vP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _P,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new EP(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const a=new AP(this.si.next());return this.referenceDelegate.li(),r(a).next(u=>this.referenceDelegate.hi(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Pi(e,t){return ne.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class AP extends z1{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Ti=new pv,this.Ii=null}static Ei(e){return new Dm(e)}get di(){if(this.Ii)return this.Ii;throw Fe(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(u=>this.di.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,r=>{const a=ze.fromPath(r);return this.Ai(e,a).next(u=>{u||t.removeEntry(a,Ze.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return ne.or([()=>ne.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class rm{constructor(e,t){this.persistence=e,this.Ri=new ga(r=>mr(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=tA(this,t)}static Ei(e,t){return new rm(e,t)}li(){}hi(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return ne.forEach(this.Ri,(r,a)=>this.gr(e,r,a).next(u=>u?ne.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(d=>{d||(r++,u.removeEntry(c,Ze.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),ne.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rd(e.data.value)),t}gr(e,t,r){return ne.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return ne.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.serializer=e}q(e,t,r,a){const u=new gm("createOrUpgrade",t);r<1&&a>=1&&(function(p){p.createObjectStore(Jh)}(e),function(p){p.createObjectStore(Vh,{keyPath:zD}),p.createObjectStore(ts,{keyPath:LE,autoIncrement:!0}).createIndex(gu,UE,{unique:!0}),p.createObjectStore(Dl)}(e),IT(e),function(p){p.createObjectStore(cu)}(e));let c=ne.resolve();return r<3&&a>=3&&(r!==0&&(function(p){p.deleteObjectStore(Pl),p.deleteObjectStore(Ol),p.deleteObjectStore(_u)}(e),IT(e)),c=c.next(()=>function(p){const v=p.store(_u),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return v.put(Hd,E)}(u))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(p,v){return v.store(ts).J().next(I=>{p.deleteObjectStore(ts),p.createObjectStore(ts,{keyPath:LE,autoIncrement:!0}).createIndex(gu,UE,{unique:!0});const x=v.store(ts),B=I.map(z=>x.put(z));return ne.waitFor(B)})}(e,u))),c=c.next(()=>{(function(p){p.createObjectStore(Nl,{keyPath:$D})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.Vi(u))),r<6&&a>=6&&(c=c.next(()=>(function(p){p.createObjectStore(Mh)}(e),this.mi(u)))),r<7&&a>=7&&(c=c.next(()=>this.fi(u))),r<8&&a>=8&&(c=c.next(()=>this.gi(e,u))),r<9&&a>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.pi(u))),r<11&&a>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(vm,{keyPath:XD})})(e),function(p){p.createObjectStore(_m,{keyPath:WD})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(p){const v=p.createObjectStore(bm,{keyPath:iO});v.createIndex(ay,sO,{unique:!1}),v.createIndex(Y1,aO,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(p){const v=p.createObjectStore(Kd,{keyPath:qD});v.createIndex(Ad,FD),v.createIndex(K1,KD)}(e)).next(()=>this.yi(e,u)).next(()=>e.deleteObjectStore(cu))),r<14&&a>=14&&(c=c.next(()=>this.wi(e,u))),r<15&&a>=15&&(c=c.next(()=>function(p){p.createObjectStore(Wy,{keyPath:JD,autoIncrement:!0}).createIndex(sy,ZD,{unique:!1}),p.createObjectStore(Gd,{keyPath:eO}).createIndex(G1,tO,{unique:!1}),p.createObjectStore(Qd,{keyPath:nO}).createIndex(Q1,rO,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Gd).clear()}).next(()=>{t.objectStore(Qd).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(Jy,{keyPath:oO})})(e)})),c}mi(e){let t=0;return e.store(cu).te((r,a)=>{t+=nm(a)}).next(()=>{const r={byteSize:t};return e.store(Mh).put(iy,r)})}Vi(e){const t=e.store(Vh),r=e.store(ts);return t.J().next(a=>ne.forEach(a,u=>{const c=IDBKeyRange.bound([u.userId,vu],[u.userId,u.lastAcknowledgedBatchId]);return r.J(gu,c).next(d=>ne.forEach(d,p=>{$e(p.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const v=fu(this.serializer,p);return XS(e,u.userId,v).next(()=>{})}))}))}fi(e){const t=e.store(Pl),r=e.store(cu);return e.store(_u).get(Hd).next(a=>{const u=[];return r.te((c,d)=>{const p=new Qt(c),v=function(I){return[0,mr(I)]}(p);u.push(t.get(v).next(E=>E?ne.resolve():(I=>t.put({targetId:0,path:mr(I),sequenceNumber:a.highestListenSequenceNumber}))(p)))}).next(()=>ne.waitFor(u))})}gi(e,t){e.createObjectStore(kh,{keyPath:YD});const r=t.store(kh),a=new mv,u=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:mr(p)})}};return t.store(cu).te({ee:!0},(c,d)=>{const p=new Qt(c);return u(p.popLast())}).next(()=>t.store(Dl).te({ee:!0},([c,d,p],v)=>{const E=Is(d);return u(E.popLast())}))}pi(e){const t=e.store(Ol);return t.te((r,a)=>{const u=vh(a),c=HS(this.serializer,u);return t.put(c)})}yi(e,t){const r=t.store(cu),a=[];return r.te((u,c)=>{const d=t.store(Kd),p=function(I){return I.document?new ze(Qt.fromString(I.document.name).popFirst(5)):I.noDocument?ze.fromSegments(I.noDocument.path):I.unknownDocument?ze.fromSegments(I.unknownDocument.path):Fe(36783)}(c).path.toArray(),v={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(v))}).next(()=>ne.waitFor(a))}wi(e,t){const r=t.store(ts),a=rA(this.serializer),u=new gv(Dm.Ei,this.serializer.wt);return r.J().next(c=>{const d=new Map;return c.forEach(p=>{var v;let E=(v=d.get(p.userId))!==null&&v!==void 0?v:pt();fu(this.serializer,p).keys().forEach(I=>E=E.add(I)),d.set(p.userId,E)}),ne.forEach(d,(p,v)=>{const E=new fr(v),I=xm.bt(this.serializer,E),x=u.getIndexManager(E),B=Cm.bt(E,this.serializer,x,u.referenceDelegate);return new iA(a,B,I,x).recalculateAndSaveOverlaysForDocumentKeys(new oy(t,zr.le),p).next()})})}}function IT(i){i.createObjectStore(Pl,{keyPath:GD}).createIndex(Xy,QD,{unique:!0}),i.createObjectStore(Ol,{keyPath:"targetId"}).createIndex(H1,HD,{unique:!0}),i.createObjectStore(_u)}const oo="IndexedDbPersistence",Mg=18e5,kg=5e3,Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",RP="main";class yv{constructor(e,t,r,a,u,c,d,p,v,E,I=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=u,this.window=c,this.document=d,this.Si=v,this.Di=E,this.Ci=I,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=x=>Promise.resolve(),!yv.C())throw new Ke(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mP(this,a),this.Bi=t+RP,this.serializer=new KS(p),this.Li=new vo(this.Bi,this.Ci,new IP(this.serializer)),this._i=new rP,this.ai=new hP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rA(this.serializer),this.ci=new nP,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,E===!1&&Tn(oo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ke(Se.FAILED_PRECONDITION,Lg);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new zr(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(async()=>{this.started&&await this.qi()}))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(So(e))return Ae(oo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae(oo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return Qc(e).get(hl).next(t=>ne.resolve(this.Hi(t)))}Ji(e){return pd(e).delete(this.clientId)}async Yi(){if(this.isPrimary&&!this.Zi(this.Oi,Mg)){this.Oi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ln(t,Nl);return r.J().next(a=>{const u=this.Xi(a,Mg),c=a.filter(d=>u.indexOf(d)===-1);return ne.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.ki)for(const t of e)this.ki.removeItem(this.es(t.clientId))}}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?ne.resolve(!0):Qc(e).get(hl).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,kg)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new Ke(Se.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||pd(e).J().next(r=>this.Xi(r,kg).find(a=>{if(this.clientId!==a.clientId){const u=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(u||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Ae(oo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),await this.Li.runTransaction("shutdown","readwrite",[Jh,Nl],e=>{const t=new oy(e,zr.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>pd(e).J().next(t=>this.Xi(t,Mg).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return Cm.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cP(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return xm.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae(oo,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",u=function(p){return p===17?cO:p===16?lO:p===15?Zy:p===14?W1:p===13?X1:p===12?uO:p===11?$1:void Fe(60245)}(this.Ci);let c;return this.Li.runTransaction(e,a,u,d=>(c=new oy(d,this.si?this.si.next():zr.le),t==="readwrite-primary"?this.Wi(c).next(p=>!!p||this.Gi(c)).next(p=>{if(!p)throw Tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new Ke(Se.FAILED_PRECONDITION,B1);return r(c)}).next(p=>this.ji(c).next(()=>p)):this.cs(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}cs(e){return Qc(e).get(hl).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,kg)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ke(Se.FAILED_PRECONDITION,Lg)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qc(e).put(hl,t)}static C(){return vo.C()}zi(e){const t=Qc(e);return t.get(hl).next(r=>this.Hi(r)?(Ae(oo,"Releasing primary lease."),t.delete(hl)):ne.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;Fw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return Ae(oo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tn(oo,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){Tn("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qc(i){return Ln(i,Jh)}function pd(i){return Ln(i,Nl)}function sA(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=a}static Ps(e,t){let r=pt(),a=pt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new vv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Fw()?8:j1(kn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,a){const u={result:null};return this.Rs(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.Vs(e,t,a,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new xP;return this.fs(e,t,c).next(d=>{if(u.result=d,this.Is)return this.gs(e,t,c,d.size)})}).next(()=>u.result)}gs(e,t,r,a){return r.documentReadCount<this.Es?(yl()<=St.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",vl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),ne.resolve()):(yl()<=St.DEBUG&&Ae("QueryEngine","Query:",vl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(yl()<=St.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",vl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(t))):ne.resolve())}Rs(e,t){if(WE(t))return ne.resolve(null);let r=ci(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=dy(t,null,"F"),r=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=pt(...u);return this.As.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const v=this.ps(t,d);return this.ys(t,v,c,p.readTime)?this.Rs(e,dy(t,null,"F")):this.ws(e,v,t,p)}))})))}Vs(e,t,r,a){return WE(t)||a.isEqual(Ze.min())?ne.resolve(null):this.As.getDocuments(e,r).next(u=>{const c=this.ps(t,u);return this.ys(t,c,r,a)?ne.resolve(null):(yl()<=St.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),vl(t)),this.ws(e,c,t,L1(a,Cl)).next(d=>d))})}ps(e,t){let r=new Ut(vS(e));return t.forEach((a,u)=>{ef(e,u)&&(r=r.add(u))}),r}ys(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}fs(e,t,r){return yl()<=St.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",vl(t)),this.As.getDocumentsMatchingQuery(e,t,hi.min(),r)}ws(e,t,r,a){return this.As.getDocumentsMatchingQuery(e,r,a).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="LocalStore",CP=3e8;class DP{constructor(e,t,r,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new Wt(it),this.Ds=new ga(u=>Iu(u),Zh),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iA(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function oA(i,e,t,r){return new DP(i,e,t,r)}async function uA(i,e){const t=Ye(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(u=>(a=u,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],d=[];let p=pt();for(const v of a){c.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}for(const v of u){d.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(v=>({Ms:v,removedBatchIds:c,addedBatchIds:d}))})})}function OP(i,e){const t=Ye(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),u=t.Cs.newChangeBuffer({trackRemovals:!0});return function(d,p,v,E){const I=v.batch,x=I.keys();let B=ne.resolve();return x.forEach(z=>{B=B.next(()=>E.getEntry(p,z)).next(le=>{const ie=v.docVersions.get(z);$e(ie!==null,48541),le.version.compareTo(ie)<0&&(I.applyToRemoteDocument(le,v),le.isValidDocument()&&(le.setReadTime(v.commitVersion),E.addEntry(le)))})}),B.next(()=>d.mutationQueue.removeMutationBatch(p,I))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=pt();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function lA(i){const e=Ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function PP(i,e){const t=Ye(i),r=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const d=[];e.targetChanges.forEach((E,I)=>{const x=a.get(I);if(!x)return;d.push(t.ai.removeMatchingKeys(u,E.removedDocuments,I).next(()=>t.ai.addMatchingKeys(u,E.addedDocuments,I)));let B=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(wn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):E.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(E.resumeToken,r)),a=a.insert(I,B),function(le,ie,pe){return le.resumeToken.approximateByteSize()===0||ie.snapshotVersion.toMicroseconds()-le.snapshotVersion.toMicroseconds()>=CP?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0}(x,B,E)&&d.push(t.ai.updateTargetData(u,B))});let p=ui(),v=pt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))}),d.push(NP(u,c,e.documentUpdates).next(E=>{p=E.xs,v=E.Os})),!r.isEqual(Ze.min())){const E=t.ai.getLastRemoteSnapshotVersion(u).next(I=>t.ai.setTargetsMetadata(u,u.currentSequenceNumber,r));d.push(E)}return ne.waitFor(d).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,p,v)).next(()=>p)}).then(u=>(t.Ss=a,u))}function NP(i,e,t){let r=pt(),a=pt();return t.forEach(u=>r=r.add(u)),e.getEntries(i,r).next(u=>{let c=ui();return t.forEach((d,p)=>{const v=u.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ze.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ae(_v,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)}),{xs:c,Os:a}})}function VP(i,e){const t=Ye(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function im(i,e){const t=Ye(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.ai.getTargetData(r,e).next(u=>u?(a=u,ne.resolve(a)):t.ai.allocateTargetId(r).next(c=>(a=new oa(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ss.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function jl(i,e,t){const r=Ye(i),a=r.Ss.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!So(c))throw c;Ae(_v,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(a.target)}function Ey(i,e,t){const r=Ye(i);let a=Ze.min(),u=pt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,v,E){const I=Ye(p),x=I.Ds.get(E);return x!==void 0?ne.resolve(I.Ss.get(x)):I.ai.getTargetData(v,E)}(r,c,ci(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(c,d.targetId).next(p=>{u=p})}).next(()=>r.bs.getDocumentsMatchingQuery(c,e,t?a:Ze.min(),t?u:pt())).next(d=>(fA(r,yS(e),d),{documents:d,Ns:u})))}function cA(i,e){const t=Ye(i),r=Ye(t.ai),a=t.Ss.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Rt(u,e).next(c=>c?c.target:null))}function hA(i,e){const t=Ye(i),r=t.vs.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Cs.getAllFromCollectionGroup(a,e,L1(r,Cl),Number.MAX_SAFE_INTEGER)).then(a=>(fA(t,e,a),a))}function fA(i,e,t){let r=i.vs.get(e)||Ze.min();t.forEach((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),i.vs.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="firestore_clients";function RT(i,e){return`${dA}_${i}_${e}`}const mA="firestore_mutations";function xT(i,e,t){let r=`${mA}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const pA="firestore_targets";function Ug(i,e){return`${pA}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="SharedClientState";class sm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static qs(e,t,r){const a=JSON.parse(r);let u,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(u=new Ke(a.error.code,a.error.message))),c?new sm(e,t,a.state,u):(Tn(Ss,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){const r=JSON.parse(t);let a,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(a=new Ke(r.error.code,r.error.message))),u?new xh(e,r.state,a):(Tn(Ss,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class am{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,u=sv();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=q1(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return a?new am(e,u):(Tn(Ss,`Failed to parse client data for instance '${e}': ${t}`),null)}}class bv{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new bv(t.clientId,t.onlineState):(Tn(Ss,`Failed to parse online state: ${e}`),null)}}class Ty{constructor(){this.activeTargetIds=sv()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bg{constructor(e,t,r,a,u){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new Wt(it),this.started=!1,this.js=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Hs=RT(this.persistenceKey,this.Ks),this.Js=function(p){return`firestore_sequence_number_${p}`}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new Ty),this.Ys=new RegExp(`^${dA}_${c}_([^_]*)$`),this.Zs=new RegExp(`^${mA}_${c}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${pA}_${c}_(\\d+)$`),this.eo=function(p){return`firestore_online_state_${p}`}(this.persistenceKey),this.no=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.us();for(const r of e){if(r===this.Ks)continue;const a=this.getItem(RT(this.persistenceKey,r));if(a){const u=am.qs(r,a);u&&(this.zs=this.zs.insert(u.clientId,u))}}this.ro();const t=this.storage.getItem(this.eo);if(t){const r=this.io(t);r&&this.so(r)}for(const r of this.js)this.Gs(r);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ug(this.persistenceKey,e));if(a){const u=xh.qs(e,a);u&&(r=u.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ug(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.ao(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae(Ss,"READ",e,t),t}setItem(e,t){Ae(Ss,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae(Ss,"REMOVE",e),this.storage.removeItem(e)}Gs(e){const t=e;if(t.storageArea===this.storage){if(Ae(Ss,"EVENT",t.key,t.newValue),t.key===this.Hs)return void Tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ys.test(t.key)){if(t.newValue==null){const r=this.Po(t.key);return this.To(r,null)}{const r=this.Io(t.key,t.newValue);if(r)return this.To(r.clientId,r)}}else if(this.Zs.test(t.key)){if(t.newValue!==null){const r=this.Eo(t.key,t.newValue);if(r)return this.Ao(r)}}else if(this.Xs.test(t.key)){if(t.newValue!==null){const r=this.Ro(t.key,t.newValue);if(r)return this.Vo(r)}}else if(t.key===this.eo){if(t.newValue!==null){const r=this.io(t.newValue);if(r)return this.so(r)}}else if(t.key===this.Js){const r=function(u){let c=zr.le;if(u!=null)try{const d=JSON.parse(u);$e(typeof d=="number",30636,{mo:u}),c=d}catch(d){Tn(Ss,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==zr.le&&this.sequenceNumberHandler(r)}else if(t.key===this.no){const r=this.fo(t.newValue);await Promise.all(r.map(a=>this.syncEngine.po(a)))}}}else this.js.push(t)})}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){const a=new sm(this.currentUser,e,t,r),u=xT(this.persistenceKey,this.currentUser,e);this.setItem(u,a.Qs())}ao(e){const t=xT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){const t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,r){const a=Ug(this.persistenceKey,e),u=new xh(e,t,r);this.setItem(a,u.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const r=this.Po(e);return am.qs(r,t)}Eo(e,t){const r=this.Zs.exec(e),a=Number(r[1]),u=r[2]!==void 0?r[2]:null;return sm.qs(new fr(u),a,t)}Ro(e,t){const r=this.Xs.exec(e),a=Number(r[1]);return xh.qs(a,t)}io(e){return bv.qs(e)}fo(e){return JSON.parse(e)}async Ao(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);Ae(Ss,`Ignoring mutation for non-active user ${e.user.uid}`)}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const r=t?this.zs.insert(e,t):this.zs.remove(e),a=this.oo(this.zs),u=this.oo(r),c=[],d=[];return u.forEach(p=>{a.has(p)||c.push(p)}),a.forEach(p=>{u.has(p)||d.push(p)}),this.syncEngine.bo(c,d).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=sv();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class gA{constructor(){this.So=new Ty,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Ty,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="ConnectivityMonitor";class DT{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ae(CT,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ae(CT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd=null;function wy(){return gd===null?gd=function(){return 268435456+Math.round(2147483648*Math.random())}():gd++,"0x"+gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="RestConnection",kP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LP{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${a}`,this.qo=this.databaseId.database===Yd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Qo(e,t,r,a,u){const c=wy(),d=this.$o(e,t.toUriEncodedString());Ae(zg,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,a,u);const{host:v}=new URL(d),E=Gh(v);return this.Ko(e,d,p,r,E).then(I=>(Ae(zg,`Received RPC '${e}' ${c}: `,I),I),I=>{throw Oh(zg,`RPC '${e}' ${c} failed with error: `,I,"url: ",d,"request:",r),I})}Wo(e,t,r,a,u,c){return this.Qo(e,t,r,a,u)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$l}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,u)=>e[u]=a),r&&r.headers.forEach((a,u)=>e[u]=a)}$o(e,t){const r=kP[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="WebChannelConnection";class BP extends LP{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,a,u){const c=wy();return new Promise((d,p)=>{const v=new x1;v.setWithCredentials(!0),v.listenOnce(C1.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Td.NO_ERROR:const I=v.getResponseJson();Ae(hr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case Td.TIMEOUT:Ae(hr,`RPC '${e}' ${c} timed out`),p(new Ke(Se.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const x=v.getStatus();if(Ae(hr,`RPC '${e}' ${c} failed with status:`,x,"response text:",v.getResponseText()),x>0){let B=v.getResponseJson();Array.isArray(B)&&(B=B[0]);const z=B==null?void 0:B.error;if(z&&z.status&&z.message){const le=function(pe){const de=pe.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(de)>=0?de:Se.UNKNOWN}(z.status);p(new Ke(le,z.message))}else p(new Ke(Se.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new Ke(Se.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{s_:e,streamId:c,o_:v.getLastErrorCode(),__:v.getLastError()})}}finally{Ae(hr,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);Ae(hr,`RPC '${e}' ${c} sending request:`,a),v.send(t,"POST",E,r,15)})}a_(e,t,r){const a=wy(),u=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=P1(),d=O1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const E=u.join("");Ae(hr,`Creating RPC '${e}' stream ${a}: ${E}`,p);const I=c.createWebChannel(E,p);let x=!1,B=!1;const z=new UP({Go:ie=>{B?Ae(hr,`Not sending because RPC '${e}' stream ${a} is closed:`,ie):(x||(Ae(hr,`Opening RPC '${e}' stream ${a} transport.`),I.open(),x=!0),Ae(hr,`RPC '${e}' stream ${a} sending:`,ie),I.send(ie))},zo:()=>I.close()}),le=(ie,pe,de)=>{ie.listen(pe,ae=>{try{de(ae)}catch(Re){setTimeout(()=>{throw Re},0)}})};return le(I,ph.EventType.OPEN,()=>{B||(Ae(hr,`RPC '${e}' stream ${a} transport opened.`),z.t_())}),le(I,ph.EventType.CLOSE,()=>{B||(B=!0,Ae(hr,`RPC '${e}' stream ${a} transport closed`),z.r_())}),le(I,ph.EventType.ERROR,ie=>{B||(B=!0,Oh(hr,`RPC '${e}' stream ${a} transport errored. Name:`,ie.name,"Message:",ie.message),z.r_(new Ke(Se.UNAVAILABLE,"The operation could not be completed")))}),le(I,ph.EventType.MESSAGE,ie=>{var pe;if(!B){const de=ie.data[0];$e(!!de,16349);const ae=de,Re=(ae==null?void 0:ae.error)||((pe=ae[0])===null||pe===void 0?void 0:pe.error);if(Re){Ae(hr,`RPC '${e}' stream ${a} received error:`,Re);const xe=Re.status;let Ve=function(V){const q=Dn[V];if(q!==void 0)return DS(q)}(xe),L=Re.message;Ve===void 0&&(Ve=Se.INTERNAL,L="Unknown error status: "+xe+" with message "+Re.message),B=!0,z.r_(new Ke(Ve,L)),I.close()}else Ae(hr,`RPC '${e}' stream ${a} received:`,de),z.i_(de)}}),le(d,D1.STAT_EVENT,ie=>{ie.stat===ty.PROXY?Ae(hr,`RPC '${e}' stream ${a} detected buffering proxy`):ie.stat===ty.NOPROXY&&Ae(hr,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{z.n_()},0),z}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof window<"u"?window:null}function Od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(i){return new HO(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t,r=1e3,a=1.5,u=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=a,this.l_=u,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-r);a>0&&Ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="PersistentStream";class _A{constructor(e,t,r,a,u,c,d,p){this.bi=e,this.R_=r,this.V_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new vA(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(Tn(t.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.m_===t&&this.B_(r,a)},r=>{e(()=>{const a=new Ke(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(a)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{r(()=>this.L_(a))}),this.stream.onMessage(a=>{r(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ae(OT,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Ae(OT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zP extends _A{constructor(e,t,r,a,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=YO(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ze.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ze.min():c.readTime?Sr(c.readTime):Ze.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=gy(this.serializer),t.addTarget=function(u,c){let d;const p=c.target;if(d=Xd(p)?{documents:US(u,p)}:{query:BS(u,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=NS(u,c.resumeToken);const v=my(u,c.expectedCount);v!==null&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ze.min())>0){d.readTime=zl(u,c.snapshotVersion.toTimestamp());const v=my(u,c.expectedCount);v!==null&&(d.expectedCount=v)}return d}(this.serializer,e);const r=XO(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=gy(this.serializer),t.removeTarget=e,this.F_(t)}}class jP extends _A{constructor(e,t,r,a,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=$O(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=gy(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Zd(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{}class FP extends qP{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new Ke(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Qo(e,py(t,r),a,u,c)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ke(Se.UNKNOWN,u.toString())})}Wo(e,t,r,a,u){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,py(t,r),a,c,d,u)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ke(Se.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class KP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Tn(t),this.ea=!1):Ae("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du="RemoteStore";class HP{constructor(e,t,r,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=u,this.ca.vo(c=>{r.enqueueAndForget(async()=>{Pu(this)&&(Ae(Du,"Restarting streams for network reachability change."),await async function(p){const v=Ye(p);v.aa.add(4),await rf(v),v.la.set("Unknown"),v.aa.delete(4),await Pm(v)}(this))})}),this.la=new KP(r,a)}}async function Pm(i){if(Pu(i))for(const e of i.ua)await e(!0)}async function rf(i){for(const e of i.ua)await e(!1)}function Nm(i,e){const t=Ye(i);t._a.has(e.targetId)||(t._a.set(e.targetId,e),wv(t)?Tv(t):Jl(t).b_()&&Ev(t,e))}function ql(i,e){const t=Ye(i),r=Jl(t);t._a.delete(e),r.b_()&&bA(t,e),t._a.size===0&&(r.b_()?r.v_():Pu(t)&&t.la.set("Unknown"))}function Ev(i,e){if(i.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jl(i).U_(e)}function bA(i,e){i.ha.Ke(e),Jl(i).K_(e)}function Tv(i){i.ha=new jO({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i._a.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Jl(i).start(),i.la.ta()}function wv(i){return Pu(i)&&!Jl(i).w_()&&i._a.size>0}function Pu(i){return Ye(i).aa.size===0}function EA(i){i.ha=void 0}async function GP(i){i.la.set("Online")}async function QP(i){i._a.forEach((e,t)=>{Ev(i,e)})}async function YP(i,e){EA(i),wv(i)?(i.la.ia(e),Tv(i)):i.la.set("Unknown")}async function $P(i,e,t){if(i.la.set("Online"),e instanceof PS&&e.state===2&&e.cause)try{await async function(a,u){const c=u.cause;for(const d of u.targetIds)a._a.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a._a.delete(d),a.ha.removeTarget(d))}(i,e)}catch(r){Ae(Du,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await om(i,r)}else if(e instanceof Dd?i.ha.Xe(e):e instanceof OS?i.ha.ot(e):i.ha.nt(e),!t.isEqual(Ze.min()))try{const r=await lA(i.localStore);t.compareTo(r)>=0&&await function(u,c){const d=u.ha.It(c);return d.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const E=u._a.get(v);E&&u._a.set(v,E.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,v)=>{const E=u._a.get(p);if(!E)return;u._a.set(p,E.withResumeToken(wn.EMPTY_BYTE_STRING,E.snapshotVersion)),bA(u,p);const I=new oa(E.target,p,v,E.sequenceNumber);Ev(u,I)}),u.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){Ae(Du,"Failed to raise snapshot:",r),await om(i,r)}}async function om(i,e,t){if(!So(e))throw e;i.aa.add(1),await rf(i),i.la.set("Offline"),t||(t=()=>lA(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ae(Du,"Retrying IndexedDB access"),await t(),i.aa.delete(1),await Pm(i)})}function TA(i,e){return e().catch(t=>om(i,t,e))}async function Wl(i){const e=Ye(i),t=Eo(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:vu;for(;XP(e);)try{const a=await VP(e.localStore,r);if(a===null){e.oa.length===0&&t.v_();break}r=a.batchId,WP(e,a)}catch(a){await om(e,a)}wA(e)&&SA(e)}function XP(i){return Pu(i)&&i.oa.length<10}function WP(i,e){i.oa.push(e);const t=Eo(i);t.b_()&&t.W_&&t.G_(e.mutations)}function wA(i){return Pu(i)&&!Eo(i).w_()&&i.oa.length>0}function SA(i){Eo(i).start()}async function JP(i){Eo(i).H_()}async function ZP(i){const e=Eo(i);for(const t of i.oa)e.G_(t.mutations)}async function eN(i,e,t){const r=i.oa.shift(),a=lv.from(r,e,t);await TA(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await Wl(i)}async function tN(i,e){e&&Eo(i).W_&&await async function(r,a){if(function(c){return BO(c)&&c!==Se.ABORTED}(a.code)){const u=r.oa.shift();Eo(r).D_(),await TA(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,a)),await Wl(r)}}(i,e),wA(i)&&SA(i)}async function PT(i,e){const t=Ye(i);t.asyncQueue.verifyOperationInProgress(),Ae(Du,"RemoteStore received new credentials");const r=Pu(t);t.aa.add(3),await rf(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Pm(t)}async function Sy(i,e){const t=Ye(i);e?(t.aa.delete(2),await Pm(t)):e||(t.aa.add(2),await rf(t),t.la.set("Unknown"))}function Jl(i){return i.Pa||(i.Pa=function(t,r,a){const u=Ye(t);return u.Y_(),new zP(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{jo:GP.bind(null,i),Jo:QP.bind(null,i),Zo:YP.bind(null,i),Q_:$P.bind(null,i)}),i.ua.push(async e=>{e?(i.Pa.D_(),wv(i)?Tv(i):i.la.set("Unknown")):(await i.Pa.stop(),EA(i))})),i.Pa}function Eo(i){return i.Ta||(i.Ta=function(t,r,a){const u=Ye(t);return u.Y_(),new jP(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{jo:()=>Promise.resolve(),Jo:JP.bind(null,i),Zo:tN.bind(null,i),z_:ZP.bind(null,i),j_:eN.bind(null,i)}),i.ua.push(async e=>{e?(i.Ta.D_(),await Wl(i)):(await i.Ta.stop(),i.oa.length>0&&(Ae(Du,`Stopping write stream with ${i.oa.length} pending writes`),i.oa=[]))})),i.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,t,r,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,u){const c=Date.now()+r,d=new Sv(e,t,c,a,u);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Av(i,e){if(Tn("AsyncQueue",`${e}: ${i}`),So(i))return new Ke(Se.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=gh(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.Ia=new Wt(ze.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Fe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Fl{constructor(e,t,r,a,u,c,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,a,u){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Fl(e,t,Al.emptySet(t),c,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class rN{constructor(){this.queries=VT(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const a=Ye(t),u=a.queries;a.queries=VT(),u.forEach((c,d)=>{for(const p of d.Ra)p.onError(r)})})(this,new Ke(Se.ABORTED,"Firestore shutting down"))}}function VT(){return new ga(i=>gS(i),Am)}async function iN(i,e){const t=Ye(i);let r=3;const a=e.query;let u=t.queries.get(a);u?!u.Va()&&e.ma()&&(r=2):(u=new nN,r=e.ma()?0:1);try{switch(r){case 0:u.Aa=await t.onListen(a,!0);break;case 1:u.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Av(c,`Initialization of query '${vl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,u),u.Ra.push(e),e.ga(t.onlineState),u.Aa&&e.pa(u.Aa)&&Iv(t)}async function sN(i,e){const t=Ye(i),r=e.query;let a=3;const u=t.queries.get(r);if(u){const c=u.Ra.indexOf(e);c>=0&&(u.Ra.splice(c,1),u.Ra.length===0?a=e.ma()?0:1:!u.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function aN(i,e){const t=Ye(i);let r=!1;for(const a of e){const u=a.query,c=t.queries.get(u);if(c){for(const d of c.Ra)d.pa(a)&&(r=!0);c.Aa=a}}r&&Iv(t)}function oN(i,e,t){const r=Ye(i),a=r.queries.get(e);if(a)for(const u of a.Ra)u.onError(t);r.queries.delete(e)}function Iv(i){i.fa.forEach(e=>{e.next()})}var Ay,MT;(MT=Ay||(Ay={})).ya="default",MT.Cache="cache";class uN{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Fl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.key=e}}class IA{constructor(e){this.key=e}}class lN{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=pt(),this.mutatedKeys=pt(),this.Ua=vS(e),this.Ka=new Al(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new NT,a=t?t.Ka:this.Ka;let u=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((E,I)=>{const x=a.get(E),B=ef(this.query,I)?I:null,z=!!x&&this.mutatedKeys.has(x.key),le=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let ie=!1;x&&B?x.data.isEqual(B.data)?z!==le&&(r.track({type:3,doc:B}),ie=!0):this.ja(x,B)||(r.track({type:2,doc:B}),ie=!0,(p&&this.Ua(B,p)>0||v&&this.Ua(B,v)<0)&&(d=!0)):!x&&B?(r.track({type:0,doc:B}),ie=!0):x&&!B&&(r.track({type:1,doc:x}),ie=!0,(p||v)&&(d=!0)),ie&&(B?(c=c.add(B),u=le?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{Ka:c,za:r,ys:d,mutatedKeys:u}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const u=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((E,I)=>function(B,z){const le=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:ie})}};return le(B)-le(z)}(E.type,I.type)||this.Ua(E.doc,I.doc)),this.Ha(r),a=a!=null&&a;const d=t&&!a?this.Ja():[],p=this.$a.size===0&&this.current&&!a?1:0,v=p!==this.Qa;return this.Qa=p,c.length!==0||v?{snapshot:new Fl(this.query,e.Ka,u,c,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:d}:{Ya:d}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new NT,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=pt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new IA(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new AA(r))}),t}Xa(e){this.qa=e.Ns,this.$a=pt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Fl.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Zl="SyncEngine";class cN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hN{constructor(e){this.key=e,this.tu=!1}}class fN{constructor(e,t,r,a,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new ga(d=>gS(d),Am),this.iu=new Map,this.su=new Set,this.ou=new Wt(ze.comparator),this._u=new Map,this.au=new pv,this.uu={},this.cu=new Map,this.lu=Cu.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function dN(i,e,t=!0){const r=Vm(i);let a;const u=r.ru.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.eu()):a=await RA(r,e,t,!0),a}async function mN(i,e){const t=Vm(i);await RA(t,e,!0,!1)}async function RA(i,e,t,r){const a=await im(i.localStore,ci(e)),u=a.targetId,c=i.sharedClientState.addLocalQueryTarget(u,t);let d;return r&&(d=await Rv(i,e,u,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&Nm(i.remoteStore,a),d}async function Rv(i,e,t,r,a){i.Pu=(I,x,B)=>async function(le,ie,pe,de){let ae=ie.view.Ga(pe);ae.ys&&(ae=await Ey(le.localStore,ie.query,!1).then(({documents:L})=>ie.view.Ga(L,ae)));const Re=de&&de.targetChanges.get(ie.targetId),xe=de&&de.targetMismatches.get(ie.targetId)!=null,Ve=ie.view.applyChanges(ae,le.isPrimaryClient,Re,xe);return Iy(le,ie.targetId,Ve.Ya),Ve.snapshot}(i,I,x,B);const u=await Ey(i.localStore,e,!0),c=new lN(e,u.Ns),d=c.Ga(u.documents),p=nf.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),v=c.applyChanges(d,i.isPrimaryClient,p);Iy(i,t,v.Ya);const E=new cN(e,t,c);return i.ru.set(e,E),i.iu.has(t)?i.iu.get(t).push(e):i.iu.set(t,[e]),v.snapshot}async function pN(i,e,t){const r=Ye(i),a=r.ru.get(e),u=r.iu.get(a.targetId);if(u.length>1)return r.iu.set(a.targetId,u.filter(c=>!Am(c,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await jl(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&ql(r.remoteStore,a.targetId),Kl(r,a.targetId)}).catch(wo)):(Kl(r,a.targetId),await jl(r.localStore,a.targetId,!0))}async function gN(i,e){const t=Ye(i),r=t.ru.get(e),a=t.iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ql(t.remoteStore,r.targetId))}async function yN(i,e,t){const r=Ov(i);try{const a=await function(c,d){const p=Ye(c),v=un.now(),E=d.reduce((B,z)=>B.add(z.key),pt());let I,x;return p.persistence.runTransaction("Locally write mutations","readwrite",B=>{let z=ui(),le=pt();return p.Cs.getEntries(B,E).next(ie=>{z=ie,z.forEach((pe,de)=>{de.isValidDocument()||(le=le.add(pe))})}).next(()=>p.localDocuments.getOverlayedDocuments(B,z)).next(ie=>{I=ie;const pe=[];for(const de of d){const ae=LO(de,I.get(de.key).overlayedDocument);ae!=null&&pe.push(new Ao(de.key,ae,oS(ae.value.mapValue),li.exists(!0)))}return p.mutationQueue.addMutationBatch(B,v,pe,d)}).next(ie=>{x=ie;const pe=ie.applyToLocalDocumentSet(I,le);return p.documentOverlayCache.saveOverlays(B,ie.batchId,pe)})}).then(()=>({batchId:x.batchId,changes:bS(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,p){let v=c.uu[c.currentUser.toKey()];v||(v=new Wt(it)),v=v.insert(d,p),c.uu[c.currentUser.toKey()]=v}(r,a.batchId,t),await Io(r,a.changes),await Wl(r.remoteStore)}catch(a){const u=Av(a,"Failed to persist write");t.reject(u)}}async function xA(i,e){const t=Ye(i);try{const r=await PP(t.localStore,e);e.targetChanges.forEach((a,u)=>{const c=t._u.get(u);c&&($e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?$e(c.tu,14607):a.removedDocuments.size>0&&($e(c.tu,42227),c.tu=!1))}),await Io(t,r,e)}catch(r){await wo(r)}}function kT(i,e,t){const r=Ye(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ru.forEach((u,c)=>{const d=c.view.ga(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const p=Ye(c);p.onlineState=d;let v=!1;p.queries.forEach((E,I)=>{for(const x of I.Ra)x.ga(d)&&(v=!0)}),v&&Iv(p)}(r.eventManager,e),a.length&&r.nu.Q_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vN(i,e,t){const r=Ye(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r._u.get(e),u=a&&a.key;if(u){let c=new Wt(ze.comparator);c=c.insert(u,pn.newNoDocument(u,Ze.min()));const d=pt().add(u),p=new tf(Ze.min(),new Map,new Wt(it),c,d);await xA(r,p),r.ou=r.ou.remove(u),r._u.delete(e),Dv(r)}else await jl(r.localStore,e,!1).then(()=>Kl(r,e,t)).catch(wo)}async function _N(i,e){const t=Ye(i),r=e.batch.batchId;try{const a=await OP(t.localStore,e);Cv(t,r,null),xv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Io(t,a)}catch(a){await wo(a)}}async function bN(i,e,t){const r=Ye(i);try{const a=await function(c,d){const p=Ye(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return p.mutationQueue.lookupMutationBatch(v,d).next(I=>($e(I!==null,37113),E=I.keys(),p.mutationQueue.removeMutationBatch(v,I))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>p.localDocuments.getDocuments(v,E))})}(r.localStore,e);Cv(r,e,t),xv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Io(r,a)}catch(a){await wo(a)}}function xv(i,e){(i.cu.get(e)||[]).forEach(t=>{t.resolve()}),i.cu.delete(e)}function Cv(i,e,t){const r=Ye(i);let a=r.uu[r.currentUser.toKey()];if(a){const u=a.get(e);u&&(t?u.reject(t):u.resolve(),a=a.remove(e)),r.uu[r.currentUser.toKey()]=a}}function Kl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.iu.get(e))i.ru.delete(r),t&&i.nu.Tu(r,t);i.iu.delete(e),i.isPrimaryClient&&i.au.Ur(e).forEach(r=>{i.au.containsKey(r)||CA(i,r)})}function CA(i,e){i.su.delete(e.path.canonicalString());const t=i.ou.get(e);t!==null&&(ql(i.remoteStore,t),i.ou=i.ou.remove(e),i._u.delete(t),Dv(i))}function Iy(i,e,t){for(const r of t)r instanceof AA?(i.au.addReference(r.key,e),EN(i,r)):r instanceof IA?(Ae(Zl,"Document no longer in limbo: "+r.key),i.au.removeReference(r.key,e),i.au.containsKey(r.key)||CA(i,r.key)):Fe(19791,{Iu:r})}function EN(i,e){const t=e.key,r=t.path.canonicalString();i.ou.get(t)||i.su.has(r)||(Ae(Zl,"New document in limbo: "+t),i.su.add(r),Dv(i))}function Dv(i){for(;i.su.size>0&&i.ou.size<i.maxConcurrentLimboResolutions;){const e=i.su.values().next().value;i.su.delete(e);const t=new ze(Qt.fromString(e)),r=i.lu.next();i._u.set(r,new hN(t)),i.ou=i.ou.insert(t,r),Nm(i.remoteStore,new oa(ci(Sm(t.path)),r,"TargetPurposeLimboResolution",zr.le))}}async function Io(i,e,t){const r=Ye(i),a=[],u=[],c=[];r.ru.isEmpty()||(r.ru.forEach((d,p)=>{c.push(r.Pu(p,e,t).then(v=>{var E;if((v||t)&&r.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(v){a.push(v);const I=vv.Ps(p.targetId,v);u.push(I)}}))}),await Promise.all(c),r.nu.Q_(a),await async function(p,v){const E=Ye(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>ne.forEach(v,x=>ne.forEach(x.ls,B=>E.persistence.referenceDelegate.addReference(I,x.targetId,B)).next(()=>ne.forEach(x.hs,B=>E.persistence.referenceDelegate.removeReference(I,x.targetId,B)))))}catch(I){if(!So(I))throw I;Ae(_v,"Failed to update sequence numbers: "+I)}for(const I of v){const x=I.targetId;if(!I.fromCache){const B=E.Ss.get(x),z=B.snapshotVersion,le=B.withLastLimboFreeSnapshotVersion(z);E.Ss=E.Ss.insert(x,le)}}}(r.localStore,u))}async function TN(i,e){const t=Ye(i);if(!t.currentUser.isEqual(e)){Ae(Zl,"User change. New user:",e.toKey());const r=await uA(t.localStore,e);t.currentUser=e,function(u,c){u.cu.forEach(d=>{d.forEach(p=>{p.reject(new Ke(Se.CANCELLED,c))})}),u.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Io(t,r.Ms)}}function wN(i,e){const t=Ye(i),r=t._u.get(e);if(r&&r.tu)return pt().add(r.key);{let a=pt();const u=t.iu.get(e);if(!u)return a;for(const c of u){const d=t.ru.get(c);a=a.unionWith(d.view.Wa)}return a}}async function SN(i,e){const t=Ye(i),r=await Ey(t.localStore,e.query,!0),a=e.view.Xa(r);return t.isPrimaryClient&&Iy(t,e.targetId,a.Ya),a}async function AN(i,e){const t=Ye(i);return hA(t.localStore,e).then(r=>Io(t,r))}async function IN(i,e,t,r){const a=Ye(i),u=await function(d,p){const v=Ye(d),E=Ye(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",I=>E.Hn(I,p).next(x=>x?v.localDocuments.getDocuments(I,x):ne.resolve(null)))}(a.localStore,e);u!==null?(t==="pending"?await Wl(a.remoteStore):t==="acknowledged"||t==="rejected"?(Cv(a,e,r||null),xv(a,e),function(d,p){Ye(Ye(d).mutationQueue).Xn(p)}(a.localStore,e)):Fe(6720,"Unknown batchState",{Eu:t}),await Io(a,u)):Ae(Zl,"Cannot apply mutation batch with id: "+e)}async function RN(i,e){const t=Ye(i);if(Vm(t),Ov(t),e===!0&&t.hu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await LT(t,r.toArray());t.hu=!0,await Sy(t.remoteStore,!0);for(const u of a)Nm(t.remoteStore,u)}else if(e===!1&&t.hu!==!1){const r=[];let a=Promise.resolve();t.iu.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(Kl(t,c),jl(t.localStore,c,!0))),ql(t.remoteStore,c)}),await a,await LT(t,r),function(c){const d=Ye(c);d._u.forEach((p,v)=>{ql(d.remoteStore,v)}),d.au.Kr(),d._u=new Map,d.ou=new Wt(ze.comparator)}(t),t.hu=!1,await Sy(t.remoteStore,!1)}}async function LT(i,e,t){const r=Ye(i),a=[],u=[];for(const c of e){let d;const p=r.iu.get(c);if(p&&p.length!==0){d=await im(r.localStore,ci(p[0]));for(const v of p){const E=r.ru.get(v),I=await SN(r,E);I.snapshot&&u.push(I.snapshot)}}else{const v=await cA(r.localStore,c);d=await im(r.localStore,v),await Rv(r,DA(v),c,!1,d.resumeToken)}a.push(d)}return r.nu.Q_(u),a}function DA(i){return pS(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function xN(i){return function(t){return Ye(Ye(t).persistence).us()}(Ye(i).localStore)}async function CN(i,e,t,r){const a=Ye(i);if(a.hu)return void Ae(Zl,"Ignoring unexpected query state notification.");const u=a.iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await hA(a.localStore,yS(u[0])),d=tf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wn.EMPTY_BYTE_STRING);await Io(a,c,d);break}case"rejected":await jl(a.localStore,e,!0),Kl(a,e,r);break;default:Fe(64155,t)}}async function DN(i,e,t){const r=Vm(i);if(r.hu){for(const a of e){if(r.iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){Ae(Zl,"Adding an already active target "+a);continue}const u=await cA(r.localStore,a),c=await im(r.localStore,u);await Rv(r,DA(u),c.targetId,!1,c.resumeToken),Nm(r.remoteStore,c)}for(const a of t)r.iu.has(a)&&await jl(r.localStore,a,!1).then(()=>{ql(r.remoteStore,a),Kl(r,a)}).catch(wo)}}function Vm(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=xA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vN.bind(null,e),e.nu.Q_=aN.bind(null,e.eventManager),e.nu.Tu=oN.bind(null,e.eventManager),e}function Ov(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bN.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Om(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return oA(this.persistence,new aA,e.initialUser,this.serializer)}Ru(e){return new gv(Dm.Ei,this.serializer)}Au(e){return new gA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class ON extends qh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){$e(this.persistence.referenceDelegate instanceof rm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eA(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new gv(r=>rm.Ei(r,t),this.serializer)}}class OA extends qh{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.gu.initialize(this,e),await Ov(this.gu.syncEngine),await Wl(this.gu.remoteStore),await this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Vu(e){return oA(this.persistence,new aA,e.initialUser,this.serializer)}mu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new eA(r,e.asyncQueue,t)}fu(e,t){const r=new UD(t,this.persistence);return new LD(e.asyncQueue,r)}Ru(e){const t=sA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new yv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yA(),Od(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new gA}}class PN extends OA{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.gu.syncEngine;this.sharedClientState instanceof Bg&&(this.sharedClientState.syncEngine={yo:IN.bind(null,t),wo:CN.bind(null,t),bo:DN.bind(null,t),us:xN.bind(null,t),po:AN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ki(async r=>{await RN(this.gu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Au(e){const t=yA();if(!Bg.C(t))throw new Ke(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TN.bind(null,this.syncEngine),await Sy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rN}()}createDatastore(e){const t=Om(e.databaseInfo.databaseId),r=function(u){return new BP(u)}(e.databaseInfo);return function(u,c,d,p){return new FP(u,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,u,c,d){return new HP(r,a,u,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>kT(this.syncEngine,t,0),function(){return DT.C()?new DT:new MP}())}createSyncEngine(e,t){return function(a,u,c,d,p,v,E){const I=new fN(a,u,c,d,p,v);return E&&(I.hu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const u=Ye(a);Ae(Du,"RemoteStore shutting down."),u.aa.add(5),await rf(u),u.ca.shutdown(),u.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Fh.provider={build:()=>new Fh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="FirestoreClient";class VN{constructor(e,t,r,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=fr.UNAUTHENTICATED,this.clientId=M1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async c=>{Ae(To,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ae(To,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Av(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jg(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(To,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async a=>{r.isEqual(a)||(await uA(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function UT(i,e){i.asyncQueue.verifyOperationInProgress();const t=await MN(i);Ae(To,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>PT(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,a)=>PT(e.remoteStore,a)),i._onlineComponents=e}async function MN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(To,"Using user provided OfflineComponentProvider");try{await jg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Se.FAILED_PRECONDITION||a.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Oh("Error using user provided cache. Falling back to memory cache: "+t),await jg(i,new qh)}}else Ae(To,"Using default OfflineComponentProvider"),await jg(i,new ON(void 0));return i._offlineComponents}async function PA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(To,"Using user provided OnlineComponentProvider"),await UT(i,i._uninitializedComponentsProvider._online)):(Ae(To,"Using default OnlineComponentProvider"),await UT(i,new Fh))),i._onlineComponents}function kN(i){return PA(i).then(e=>e.syncEngine)}async function LN(i){const e=await PA(i),t=e.eventManager;return t.onListen=dN.bind(null,e.syncEngine),t.onUnlisten=pN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gN.bind(null,e.syncEngine),t}function UN(i,e,t={}){const r=new ua;return i.asyncQueue.enqueueAndForget(async()=>function(u,c,d,p,v){const E=new NN({next:x=>{E.yu(),c.enqueueAndForget(()=>sN(u,I));const B=x.docs.has(d);!B&&x.fromCache?v.reject(new Ke(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&x.fromCache&&p&&p.source==="server"?v.reject(new Ke(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),I=new uN(Sm(d.path),E,{includeMetadataChanges:!0,Fa:!0});return iN(u,I)}(await LN(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(i,e,t){if(!t)throw new Ke(Se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zN(i,e,t,r){if(e===!0&&r===!0)throw new Ke(Se.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function zT(i){if(!ze.isDocumentKey(i))throw new Ke(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Pv(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Fe(12329,{type:typeof i})}function um(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ke(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pv(i);throw new Ke(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firestore.googleapis.com",jT=!0;class qT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ke(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jN,this.ssl=jT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:jT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZS)throw new Ke(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ke(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ke(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ke(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VA{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ke(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RD;switch(r.type){case"firstParty":return new DD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ke(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Py("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=BT.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),BT.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nv(this.firestore,e,this._query)}}class Mi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mi(this.firestore,e,this._key)}}class Kh extends Nv{constructor(e,t,r){super(e,t,Sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mi(this.firestore,null,new ze(e))}withConverter(e){return new Kh(this.firestore,e,this._path)}}function Vv(i,e,...t){if(i=ss(i),arguments.length===1&&(e=M1.newId()),BN("doc","path",e),i instanceof VA){const r=Qt.fromString(e,...t);return zT(r),new Mi(i,null,new ze(r))}{if(!(i instanceof Mi||i instanceof Kh))throw new Ke(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Qt.fromString(e,...t));return zT(r),new Mi(i.firestore,i instanceof Kh?i.converter:null,new ze(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="AsyncQueue";class KT{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new vA(this,"async_queue_retry"),this.ju=()=>{const r=Od();r&&Ae(FT,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Od();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Od();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ua;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!So(e))throw e;Ae(FT,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Tn("INTERNAL UNHANDLED ERROR: ",HT(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=Sv.createAndSchedule(this,e,t,r,u=>this.Xu(u));return this.Uu.push(a),a}Ju(){this.Ku&&Fe(47125,{ec:HT(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function HT(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Mv extends VA{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new KT,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KT(e),this._firestoreClient=void 0,await e}}}function qN(i,e,t){t||(t=Yd);const r=My(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),u=r.getOptions(t);if(Eu(u,e))return a;throw new Ke(Se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ke(Se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZS)throw new Ke(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Gh(e.host)&&qw(e.host),r.initialize({options:e,instanceIdentifier:t})}function MA(i){if(i._terminated)throw new Ke(Se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||FN(i),i._firestoreClient}function FN(i){var e,t,r;const a=i._freezeSettings(),u=function(d,p,v,E){return new fO(d,p,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,NA(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new VN(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(wn.fromBase64String(e))}catch(t){throw new Ke(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hl(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ke(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ke(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ke(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^__.*__$/;class HN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xl(e,this.data,t,this.fieldTransforms)}}function LA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{oc:i})}}class Bv{constructor(e,t,r,a,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,u===void 0&&this._c(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Bv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:r,cc:!1});return a.lc(e),a}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ac({path:r,cc:!1});return a._c(),a}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return lm(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(LA(this.oc)&&KN.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class GN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Om(e)}dc(e,t,r,a=!1){return new Bv({oc:e,methodName:t,Ec:r,path:on.emptyPath(),cc:!1,Ic:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QN(i){const e=i._freezeSettings(),t=Om(i._databaseId);return new GN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function YN(i,e,t,r,a,u={}){const c=i.dc(u.merge||u.mergeFields?2:0,e,t,a);jA("Data must be an object, but it was:",c,r);const d=BA(r,c);let p,v;if(u.merge)p=new Vi(c.fieldMask),v=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const I of u.mergeFields){const x=$N(e,I,t);if(!c.contains(x))throw new Ke(Se.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);WN(E,x)||E.push(x)}p=new Vi(E),v=c.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,v=c.fieldTransforms;return new HN(new Br(d),p,v)}function UA(i,e){if(zA(i=ss(i)))return jA("Unsupported field value:",e,i),BA(i,e);if(i instanceof kA)return function(r,a){if(!LA(a.oc))throw a.Tc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Tc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(a);u&&a.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,a){const u=[];let c=0;for(const d of r){let p=UA(d,a.Pc(c));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),c++}return{arrayValue:{values:u}}}(i,e)}return function(r,a){if((r=ss(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DO(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=un.fromDate(r);return{timestampValue:zl(a.serializer,u)}}if(r instanceof un){const u=new un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zl(a.serializer,u)}}if(r instanceof Lv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hl)return{bytesValue:NS(a.serializer,r._byteString)};if(r instanceof Mi){const u=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw a.Tc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:fv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Uv)return function(c,d){return{mapValue:{fields:{[tv]:{stringValue:nv},[Vl]:{arrayValue:{values:c.toArray().map(v=>{if(typeof v!="number")throw d.Tc("VectorValues must only contain numeric values.");return av(d.serializer,v)})}}}}}}(r,a);throw a.Tc(`Unsupported field value: ${Pv(r)}`)}(i,e)}function BA(i,e){const t={};return J1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(i,(r,a)=>{const u=UA(a,e.uc(r));u!=null&&(t[r]=u)}),{mapValue:{fields:t}}}function zA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof un||i instanceof Lv||i instanceof Hl||i instanceof Mi||i instanceof kA||i instanceof Uv)}function jA(i,e,t){if(!zA(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const r=Pv(t);throw r==="an object"?e.Tc(i+" a custom object"):e.Tc(i+" "+r)}}function $N(i,e,t){if((e=ss(e))instanceof kv)return e._internalPath;if(typeof e=="string")return qA(i,e);throw lm("Field path arguments must be of type string or ",i,!1,void 0,t)}const XN=new RegExp("[~\\*/\\[\\]]");function qA(i,e,t){if(e.search(XN)>=0)throw lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new kv(...e.split("."))._internalPath}catch{throw lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function lm(i,e,t,r,a){const u=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(u||c)&&(p+=" (found",u&&(p+=` in field ${r}`),c&&(p+=` in document ${a}`),p+=")"),new Ke(Se.INVALID_ARGUMENT,d+i+p)}function WN(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,r,a,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JN extends FA{data(){return super.data()}}function KA(i,e){return typeof e=="string"?qA(i,e):e instanceof kv?e._internalPath:e._delegate._internalPath}class ZN{convertValue(e,t="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ou(e,(a,u)=>{r[a]=this.convertValue(u,t)}),r}convertVectorValue(e){var t,r,a;const u=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Vl].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>rn(c.doubleValue));return new Uv(u)}convertGeoPoint(e){return new Lv(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Em(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lh(e));default:return null}}convertTimestamp(e){const t=fa(e);return new un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);$e(FS(r),9688,{name:e});const a=new Au(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return a.isEqual(t)||Tn(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(i,e,t){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HA extends FA{constructor(e,t,r,a,u,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nV(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(KA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class nV extends HA{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(i){i=um(i,Mi);const e=um(i.firestore,Mv);return UN(MA(e),i._key).then(t=>aV(e,i,t))}class rV extends ZN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,t)}}function iV(i,e,t){i=um(i,Mi);const r=um(i.firestore,Mv),a=eV(i.converter,e);return sV(r,[YN(QN(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,li.none())])}function sV(i,e){return function(r,a){const u=new ua;return r.asyncQueue.enqueueAndForget(async()=>yN(await kN(r),a,u)),u.promise}(MA(i),e)}function aV(i,e,t){const r=t.docs.get(e._key),a=new rV(i);return new HA(i,a,e._key,r,new tV(t.hasPendingWrites,t.fromCache),e.converter)}class oV{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=hV(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function uV(i){return new oV(i)}class lV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fh.provider,this._offlineComponentProvider={build:t=>new OA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class cV{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fh.provider,this._offlineComponentProvider={build:t=>new PN(t,e==null?void 0:e.cacheSizeBytes)}}}function hV(i){return new lV(void 0)}function fV(){return new cV}(function(e,t=!0){(function(a){$l=a})(Ql),Il(new Tu("firestore",(r,{instanceIdentifier:a,options:u})=>{const c=r.getProvider("app").getImmediate(),d=new Mv(new xD(r.getProvider("auth-internal")),new OD(c,r.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ke(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(v.options.projectId,E)}(c,a),c);return u=Object.assign({useFetchStreams:t},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),go(xE,CE,e),go(xE,CE,"esm2017")})();const dV={apiKey:"AIzaSyBaP9APfVtEPw1sLQgHx26ZEZ7SPfutv28",authDomain:"tell-4f02c.firebaseapp.com",projectId:"tell-4f02c",storageBucket:"tell-4f02c.firebasestorage.app",messagingSenderId:"1032114981963",appId:"1:1032114981963:web:719ae9a5040929b739d1ce"},GA=Qw(dV),Mm=TD(GA),jv=qN(GA,{localCache:uV({tabManager:fV()})});function mV({name:i,imageUrl:e}){const[t,r]=ge.useState(!1),a=()=>{r(!t)};return Ee.jsxs("div",{className:"relative",children:[Ee.jsxs("div",{className:"flex items-center justify-start gap-2 pt-2 pb-2 rounded-md hover:bg-gray-100 cursor-pointer",onClick:a,children:[Ee.jsx("img",{src:e,alt:`${i}'s profile`,className:"w-5 h-5 rounded-sm object-cover"}),Ee.jsx("div",{className:"flex flex-col",children:Ee.jsx("span",{className:"text-base font-medium",children:i})})]}),t&&Ee.jsx("div",{className:"absolute top-full left-0 w-56 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:Ee.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>f2(Mm),children:"Logg ut"})})]})}function pV(){const{user:i}=ge.useContext(Oy);return Ee.jsxs("div",{className:"w-64 bg-white h-screen pl-4 pr-4 pt-2 shadow-md max-md:hidden",children:[i&&Ee.jsx(mV,{name:i.displayName,imageUrl:i.photoURL}),Ee.jsxs("ul",{className:"space-y-2 w-full border-t-1 border-gray-300 pt-3 mt-2",children:[Ee.jsx("li",{className:"w-full",children:Ee.jsx("a",{href:"/",className:"w-full text-left",children:"Hjem"})}),i?null:Ee.jsx("li",{className:"w-full",children:Ee.jsx("a",{href:"/login",className:"w-full text-left",children:"Logg p"})})]})]})}function gV({message:i,onClose:e}){const[t,r]=ge.useState(!0);return ge.useEffect(()=>{const a=setTimeout(()=>{r(!1),e()},4e3);return()=>clearTimeout(a)},[e]),t?Ee.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-gray-50 text-black px-4 py-2 rounded-lg shadow-lg text-sm sm:text-base z-50 animate-fade-in-out",children:i}):null}const yV=[{id:1,name:"Banan",calories:100,fat:.1,protein:1.2,carbs:22.4},{id:2,name:"Eple",calories:52,fat:.2,protein:.3,carbs:14},{id:3,name:"Peanttsmr-brd",calories:280,fat:16,protein:9,carbs:24},{id:4,name:"Egg",calories:93,fat:6.6,protein:7.8,carbs:.7},{id:5,name:"Chocolate Cookie",calories:93.9,fat:4.8,protein:1,carbs:11.4},{id:6,name:"Tosti ham kaas",calories:350,fat:17,protein:19,carbs:30},{id:7,name:"Sultana kjeks (1)",calories:140,fat:4.5,protein:1.5,carbs:22},{id:8,name:"Cola (33cl)",calories:139,fat:0,protein:0,carbs:35},{id:9,name:"Apple Crumble (100g)",calories:170,fat:5,protein:1.5,carbs:30},{id:10,name:"Nudler (1 porsjon, ca. 300 kcal)",calories:300,fat:12,protein:7,carbs:40},{id:11,name:"Spelt Eierkoek (150 kcal)",calories:150,fat:3.5,protein:4,carbs:25},{id:12,name:"Smultring",calories:192,fat:11,protein:2,carbs:22},{id:13,name:"Protein Quark",calories:132,fat:.2,protein:25,carbs:6},{id:14,name:"Choco Mousse",calories:220,fat:13,protein:4,carbs:20},{id:15,name:"Chips",calories:275,fat:17,protein:3,carbs:25},{id:16,name:"Pannenkoek",calories:150,fat:5,protein:5,carbs:20},{id:17,name:"Eplejus (1 glass)",calories:117,fat:.2,protein:.1,carbs:28},{id:18,name:"Protein Shake (1 scoop + 300 ml melk)",calories:298,fat:6,protein:30,carbs:22},{id:19,name:"Drue (1 stk)",calories:3,fat:0,protein:0,carbs:.8},{id:20,name:"Margerhita Pizza",calories:940,fat:34,protein:40,carbs:108},{id:21,name:"KitKat",calories:219,fat:11,protein:2.6,carbs:27},{id:22,name:"Mandarin",calories:21,fat:.1,protein:.3,carbs:5},{id:23,name:"l (1 flaske)",calories:164,fat:0,protein:1.6,carbs:13},{id:24,name:"Croissant",calories:231,fat:12,protein:4.5,carbs:26},{id:25,name:"Hamburger (patty)",calories:250,fat:20,protein:17,carbs:0}];function vV({searchTerm:i,filteredFoods:e,addFood:t,setSearchTerm:r}){return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("input",{type:"text",placeholder:"Sk etter mat...",className:"w-full p-3 sm:p-2 mb-4 border rounded text-gray-900 bg-white text-base sm:text-base",value:i,onChange:a=>r(a.target.value)}),Ee.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i!==""&&e.map(a=>Ee.jsxs("div",{onClick:()=>t(a),className:"p-3 sm:p-2 bg-white rounded shadow cursor-pointer text-gray-900 text-sm sm:text-base",children:[a.name," - ",a.calories," kcal (Fat: ",a.fat,"g, Protein: ",a.protein,"g, Carbs: ",a.carbs,"g)"]},a.id))})]})}function _V({currentDate:i,changeDate:e}){const t=r=>{const a=new Date(r);return`${String(a.getDate()).padStart(2,"0")}-${String(a.getMonth()+1).padStart(2,"0")}-${a.getFullYear()}`};return Ee.jsxs("div",{className:"mb-2 flex justify-center gap-4",children:[Ee.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2  text-white rounded",children:Ee.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ee.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Ee.jsx("span",{className:"text-gray-900 mt-2 cursor-pointer",onClick:()=>e(0),children:t(i)}),Ee.jsx("button",{onClick:()=>e(1),className:"px-4 py-2  text-white rounded ",children:Ee.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Ee.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}function bV({totals:i,goals:e}){const t=Math.min(i.calories/e.calories*100,100),r=45,a=2*Math.PI*r,u=a-t/100*a;function c(d,p){return d>p?d-p:p-d}return Ee.jsxs("div",{className:"flex flex-col items-center mb-2",children:[Ee.jsxs("div",{className:"w-32 h-32 sm:w-32 sm:h-32 relative flex items-center justify-center",children:[Ee.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[Ee.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#e5e7eb",strokeWidth:"1"}),Ee.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#3b82f6",strokeWidth:"1",strokeDasharray:a,strokeDashoffset:u,className:"transition-all duration-500 ease-in-out",transform:"rotate(-90 50 50)"})]}),Ee.jsxs("div",{className:"absolute flex flex-col items-center justify-center text-gray-900",children:[Ee.jsx("span",{className:"text-2xl sm:text-2xl text-center",children:c(i.calories,e.calories)}),Ee.jsx("span",{className:"text-md sm:text-base text-center",children:i.calories>e.calories?"over":"igjen"})]})]}),Ee.jsx("div",{id:"confetti"}),Ee.jsxs("div",{className:"flex flex-row justify-center gap-4 rounded-lg bg-white shadow pl-2 pr-2 sm:p-2 w-full sm:w-auto",children:[Ee.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Ee.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Karbs"}),Ee.jsxs("span",{className:"text-base sm:text-lg",children:[i.carbs.toFixed(0),"/",e.carbs,"g"]})]}),Ee.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Ee.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Proteiner"}),Ee.jsxs("span",{className:"text-base sm:text-lg",children:[i.protein.toFixed(0),"/",e.protein,"g"]})]}),Ee.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Ee.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Fett"}),Ee.jsxs("span",{className:"text-base sm:text-lg",children:[i.fat.toFixed(0),"/",e.fat,"g"]})]})]})]})}function EV({selectedFoods:i,currentDate:e,removeFood:t,updateQuantity:r}){const a=i[e]||[];return Ee.jsxs("div",{className:"mt-4",children:[Ee.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Valgte matvarer"}),a.length===0?Ee.jsx("p",{className:"text-gray-500",children:"Ingen matvarer valgt for denne dagen."}):Ee.jsx("ul",{className:"space-y-2",children:a.map((u,c)=>Ee.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[Ee.jsxs("span",{children:[u.food.name," - ",(u.food.calories*u.quantity).toFixed(0)," kcal"]}),Ee.jsxs("div",{className:"flex items-center space-x-2",children:[Ee.jsx("button",{onClick:()=>r(c,-1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"-"}),Ee.jsx("span",{className:"w-8 text-center",children:u.quantity}),Ee.jsx("button",{onClick:()=>r(c,1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"+"}),Ee.jsx("button",{onClick:()=>t(c),className:"px-2 py-1 border text-sm border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"Fjern"})]})]},`${u.food.id}-${c}`))})]})}function TV(){return Ee.jsx("footer",{className:"p-4 bg-white mt-10",children:Ee.jsxs("div",{className:"mx-auto max-w-screen-xl text-center",children:[Ee.jsx("a",{href:"/",className:"flex justify-center items-center text-2xl font-semibold text-gray-900",children:"Tell"}),Ee.jsx("p",{className:"mb-2 text-gray-500 dark:text-gray-400",children:"En enkel matsporer for deg, uten trbbel."}),Ee.jsxs("ul",{className:"flex flex-wrap justify-center items-center mb-2",children:[Ee.jsx("li",{children:Ee.jsx("a",{href:"/",className:"mr-4 hover:underline md:mr-6 ",children:"Hjem"})}),Ee.jsx("li",{children:Ee.jsx("a",{href:"/login",className:"mr-4 hover:underline md:mr-6",children:"Logg inn"})})]}),Ee.jsxs("span",{className:"text-sm sm:text-center",children:[" ",new Date().getFullYear()," ",Ee.jsx("a",{href:"/",className:"hover:underline",children:"Tell"}),". Alle rettigheter reservert."]})]})})}var Pd={exports:{}},wV=Pd.exports,GT;function SV(){return GT||(GT=1,function(i,e){(function(t,r){i.exports=r()})(wV,function(){var t=function(f,g){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(_[A]=T[A])})(f,g)},r=function(){return(r=Object.assign||function(f){for(var g,_=1,T=arguments.length;_<T;_++)for(var A in g=arguments[_])Object.prototype.hasOwnProperty.call(g,A)&&(f[A]=g[A]);return f}).apply(this,arguments)};function a(f,g,_){for(var T,A=0,R=g.length;A<R;A++)!T&&A in g||((T=T||Array.prototype.slice.call(g,0,A))[A]=g[A]);return f.concat(T||Array.prototype.slice.call(g))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:VR,c=Object.keys,d=Array.isArray;function p(f,g){return typeof g!="object"||c(g).forEach(function(_){f[_]=g[_]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var v=Object.getPrototypeOf,E={}.hasOwnProperty;function I(f,g){return E.call(f,g)}function x(f,g){typeof g=="function"&&(g=g(v(f))),(typeof Reflect>"u"?c:Reflect.ownKeys)(g).forEach(function(_){z(f,_,g[_])})}var B=Object.defineProperty;function z(f,g,_,T){B(f,g,p(_&&I(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},T))}function le(f){return{from:function(g){return f.prototype=Object.create(g.prototype),z(f.prototype,"constructor",f),{extend:x.bind(null,f.prototype)}}}}var ie=Object.getOwnPropertyDescriptor,pe=[].slice;function de(f,g,_){return pe.call(f,g,_)}function ae(f,g){return g(f)}function Re(f){if(!f)throw new Error("Assertion Failed")}function xe(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Ve(f,g){if(typeof g=="string"&&I(f,g))return f[g];if(!g)return f;if(typeof g!="string"){for(var _=[],T=0,A=g.length;T<A;++T){var R=Ve(f,g[T]);_.push(R)}return _}var O=g.indexOf(".");if(O!==-1){var N=f[g.substr(0,O)];return N==null?void 0:Ve(N,g.substr(O+1))}}function L(f,g,_){if(f&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof g!="string"&&"length"in g){Re(typeof _!="string"&&"length"in _);for(var T=0,A=g.length;T<A;++T)L(f,g[T],_[T])}else{var R,O,N=g.indexOf(".");N!==-1?(R=g.substr(0,N),(O=g.substr(N+1))===""?_===void 0?d(f)&&!isNaN(parseInt(R))?f.splice(R,1):delete f[R]:f[R]=_:L(N=!(N=f[R])||!I(f,R)?f[R]={}:N,O,_)):_===void 0?d(f)&&!isNaN(parseInt(g))?f.splice(g,1):delete f[g]:f[g]=_}}function P(f){var g,_={};for(g in f)I(f,g)&&(_[g]=f[g]);return _}var V=[].concat;function q(f){return V.apply([],f)}var Nt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(q([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(g){return g+f+"Array"})}))).filter(function(f){return u[f]}),Y=new Set(Nt.map(function(f){return u[f]})),W=null;function k(f){return W=new WeakMap,f=function g(_){if(!_||typeof _!="object")return _;var T=W.get(_);if(T)return T;if(d(_)){T=[],W.set(_,T);for(var A=0,R=_.length;A<R;++A)T.push(g(_[A]))}else if(Y.has(_.constructor))T=_;else{var O,N=v(_);for(O in T=N===Object.prototype?{}:Object.create(N),W.set(_,T),_)I(_,O)&&(T[O]=g(_[O]))}return T}(f),W=null,f}var On={}.toString;function Yt(f){return On.call(f).slice(8,-1)}var ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Le=typeof ye=="symbol"?function(f){var g;return f!=null&&(g=f[ye])&&g.apply(f)}:function(){return null};function Qe(f,g){return g=f.indexOf(g),0<=g&&f.splice(g,1),0<=g}var gt={};function j(f){var g,_,T,A;if(arguments.length===1){if(d(f))return f.slice();if(this===gt&&typeof f=="string")return[f];if(A=Le(f)){for(_=[];!(T=A.next()).done;)_.push(T.value);return _}if(f==null)return[f];if(typeof(g=f.length)!="number")return[f];for(_=new Array(g);g--;)_[g]=f[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var we=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},os=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(os),Be={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(f,g){this.name=f,this.message=g}function We(f,g){return f+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,T,A){return A.indexOf(_)===T}).join(`
`)}function ct(f,g,_,T){this.failures=g,this.failedKeys=T,this.successCount=_,this.message=We(f,g)}function et(f,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=We(f,this.failures)}le(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),le(ct).from(Ie),le(et).from(Ie);var cn=Er.reduce(function(f,g){return f[g]=g+"Error",f},{}),Bt=Ie,He=Er.reduce(function(f,g){var _=g+"Error";function T(A,R){this.name=_,A?typeof A=="string"?(this.message="".concat(A).concat(R?`
 `+R:""),this.inner=R||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=Be[g]||_,this.inner=null)}return le(T).from(Bt),f[g]=T,f},{});He.Syntax=SyntaxError,He.Type=TypeError,He.Range=RangeError;var ki=os.reduce(function(f,g){return f[g+"Error"]=He[g],f},{}),Ar=Er.reduce(function(f,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(f[g+"Error"]=He[g]),f},{});function Tt(){}function jr(f){return f}function Ns(f,g){return f==null||f===jr?g:function(_){return g(f(_))}}function qr(f,g){return function(){f.apply(this,arguments),g.apply(this,arguments)}}function Mu(f,g){return f===Tt?g:function(){var _=f.apply(this,arguments);_!==void 0&&(arguments[0]=_);var T=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var R=g.apply(this,arguments);return T&&(this.onsuccess=this.onsuccess?qr(T,this.onsuccess):T),A&&(this.onerror=this.onerror?qr(A,this.onerror):A),R!==void 0?R:_}}function Ir(f,g){return f===Tt?g:function(){f.apply(this,arguments);var _=this.onsuccess,T=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?qr(_,this.onsuccess):_),T&&(this.onerror=this.onerror?qr(T,this.onerror):T)}}function nc(f,g){return f===Tt?g:function(_){var T=f.apply(this,arguments);p(_,T);var A=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?qr(A,this.onsuccess):A),R&&(this.onerror=this.onerror?qr(R,this.onerror):R),T===void 0?_===void 0?void 0:_:p(T,_)}}function Ro(f,g){return f===Tt?g:function(){return g.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function as(f,g){return f===Tt?g:function(){var _=f.apply(this,arguments);if(_&&typeof _.then=="function"){for(var T=this,A=arguments.length,R=new Array(A);A--;)R[A]=arguments[A];return _.then(function(){return g.apply(T,R)})}return g.apply(this,arguments)}}Ar.ModifyError=ct,Ar.DexieError=Ie,Ar.BulkError=et;var Un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ku(f){Un=f}var fi={},_a=100,Nt=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,v(f),f];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,v(g),f]}(),os=Nt[0],Er=Nt[1],Nt=Nt[2],Er=Er&&Er.then,vt=os&&os.constructor,Yn=!!Nt,hn=function(f,g){Fr.push([f,g]),Ea&&(queueMicrotask(Ta),Ea=!1)},ba=!0,Ea=!0,pr=[],di=[],Li=jr,Sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Tt,pgp:!1,env:{},finalize:Tt},qe=Sn,Fr=[],Kr=0,us=[];function Ue(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=qe;if(typeof f!="function"){if(f!==fi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Vs(this,this._value))}this._state=null,this._value=null,++g.ref,function _(T,A){try{A(function(R){if(T._state===null){if(R===T)throw new TypeError("A promise cannot be resolved with itself.");var O=T._lib&&gr();R&&typeof R.then=="function"?_(T,function(N,K){R instanceof Ue?R._then(N,K):R.then(N,K)}):(T._state=!0,T._value=R,Gr(T)),O&&Ui()}},Vs.bind(null,T))}catch(R){Vs(T,R)}}(this,f)}var Hr={get:function(){var f=qe,g=ks;function _(T,A){var R=this,O=!f.global&&(f!==qe||g!==ks),N=O&&!Pn(),K=new Ue(function(G,X){Ms(R,new mi(xr(T,f,O,N),xr(A,f,O,N),G,X,f))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return _.prototype=fi,_},set:function(f){z(this,"then",f&&f.prototype===fi?Hr:{get:function(){return f},set:Hr.set})}};function mi(f,g,_,T,A){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=T,this.psd=A}function Vs(f,g){var _,T;di.push(g),f._state===null&&(_=f._lib&&gr(),g=Li(g),f._state=!1,f._value=g,T=f,pr.some(function(A){return A._value===T._value})||pr.push(T),Gr(f),_&&Ui())}function Gr(f){var g=f._listeners;f._listeners=[];for(var _=0,T=g.length;_<T;++_)Ms(f,g[_]);var A=f._PSD;--A.ref||A.finalize(),Kr===0&&(++Kr,hn(function(){--Kr==0&&zt()},[]))}function Ms(f,g){if(f._state!==null){var _=f._state?g.onFulfilled:g.onRejected;if(_===null)return(f._state?g.resolve:g.reject)(f._value);++g.psd.ref,++Kr,hn(ls,[_,f,g])}else f._listeners.push(g)}function ls(f,g,_){try{var T,A=g._value;!g._state&&di.length&&(di=[]),T=Un&&g._consoleTask?g._consoleTask.run(function(){return f(A)}):f(A),g._state||di.indexOf(A)!==-1||function(R){for(var O=pr.length;O;)if(pr[--O]._value===R._value)return pr.splice(O,1)}(g),_.resolve(T)}catch(R){_.reject(R)}finally{--Kr==0&&zt(),--_.psd.ref||_.psd.finalize()}}function Ta(){Rr(Sn,function(){gr()&&Ui()})}function gr(){var f=ba;return Ea=ba=!1,f}function Ui(){var f,g,_;do for(;0<Fr.length;)for(f=Fr,Fr=[],_=f.length,g=0;g<_;++g){var T=f[g];T[0].apply(null,T[1])}while(0<Fr.length);Ea=ba=!0}function zt(){var f=pr;pr=[],f.forEach(function(T){T._PSD.onunhandled.call(null,T._value,T)});for(var g=us.slice(0),_=g.length;_;)g[--_]()}function Zt(f){return new Ue(fi,!1,f)}function ut(f,g){var _=qe;return function(){var T=gr(),A=qe;try{return Vt(_,!0),f.apply(this,arguments)}catch(R){g&&g(R)}finally{Vt(A,!1),T&&Ui()}}}x(Ue.prototype,{then:Hr,_then:function(f,g){Ms(this,new mi(null,null,f,g,qe))},catch:function(f){if(arguments.length===1)return this.then(null,f);var g=f,_=arguments[1];return typeof g=="function"?this.then(null,function(T){return(T instanceof g?_:Zt)(T)}):this.then(null,function(T){return(T&&T.name===g?_:Zt)(T)})},finally:function(f){return this.then(function(g){return Ue.resolve(f()).then(function(){return g})},function(g){return Ue.resolve(f()).then(function(){return Zt(g)})})},timeout:function(f,g){var _=this;return f<1/0?new Ue(function(T,A){var R=setTimeout(function(){return A(new He.Timeout(g))},f);_.then(T,A).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&z(Ue.prototype,Symbol.toStringTag,"Dexie.Promise"),Sn.env=Sa(),x(Ue,{all:function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g,_){f.length===0&&g([]);var T=f.length;f.forEach(function(A,R){return Ue.resolve(A).then(function(O){f[R]=O,--T||g(f)},_)})})},resolve:function(f){return f instanceof Ue?f:f&&typeof f.then=="function"?new Ue(function(g,_){f.then(g,_)}):new Ue(fi,!0,f)},reject:Zt,race:function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g,_){f.map(function(T){return Ue.resolve(T).then(g,_)})})},PSD:{get:function(){return qe},set:function(f){return qe=f}},totalEchoes:{get:function(){return ks}},newPSD:$n,usePSD:Rr,scheduler:{get:function(){return hn},set:function(f){hn=f}},rejectionMapper:{get:function(){return Li},set:function(f){Li=f}},follow:function(f,g){return new Ue(function(_,T){return $n(function(A,R){var O=qe;O.unhandleds=[],O.onunhandled=R,O.finalize=qr(function(){var N,K=this;N=function(){K.unhandleds.length===0?A():R(K.unhandleds[0])},us.push(function G(){N(),us.splice(us.indexOf(G),1)}),++Kr,hn(function(){--Kr==0&&zt()},[])},O.finalize),f()},g,_,T)})}}),vt&&(vt.allSettled&&z(Ue,"allSettled",function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g){f.length===0&&g([]);var _=f.length,T=new Array(_);f.forEach(function(A,R){return Ue.resolve(A).then(function(O){return T[R]={status:"fulfilled",value:O}},function(O){return T[R]={status:"rejected",reason:O}}).then(function(){return--_||g(T)})})})}),vt.any&&typeof AggregateError<"u"&&z(Ue,"any",function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g,_){f.length===0&&_(new AggregateError([]));var T=f.length,A=new Array(T);f.forEach(function(R,O){return Ue.resolve(R).then(function(N){return g(N)},function(N){A[O]=N,--T||_(new AggregateError(A))})})})}),vt.withResolvers&&(Ue.withResolvers=vt.withResolvers));var Ot={awaits:0,echoes:0,id:0},xo=0,wa=[],Qr=0,ks=0,Ls=0;function $n(f,g,_,T){var A=qe,R=Object.create(A);return R.parent=A,R.ref=0,R.global=!1,R.id=++Ls,Sn.env,R.env=Yn?{Promise:Ue,PromiseProp:{value:Ue,configurable:!0,writable:!0},all:Ue.all,race:Ue.race,allSettled:Ue.allSettled,any:Ue.any,resolve:Ue.resolve,reject:Ue.reject}:{},g&&p(R,g),++A.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},T=Rr(R,f,_,T),R.ref===0&&R.finalize(),T}function ir(){return Ot.id||(Ot.id=++xo),++Ot.awaits,Ot.echoes+=_a,Ot.id}function Pn(){return!!Ot.awaits&&(--Ot.awaits==0&&(Ot.id=0),Ot.echoes=Ot.awaits*_a,!0)}function yr(f){return Ot.echoes&&f&&f.constructor===vt?(ir(),f.then(function(g){return Pn(),g},function(g){return Pn(),$t(g)})):f}function Xn(){var f=wa[wa.length-1];wa.pop(),Vt(f,!1)}function Vt(f,g){var _,T=qe;(g?!Ot.echoes||Qr++&&f===qe:!Qr||--Qr&&f===qe)||queueMicrotask(g?(function(A){++ks,Ot.echoes&&--Ot.echoes!=0||(Ot.echoes=Ot.awaits=Ot.id=0),wa.push(qe),Vt(A,!0)}).bind(null,f):Xn),f!==qe&&(qe=f,T===Sn&&(Sn.env=Sa()),Yn&&(_=Sn.env.Promise,g=f.env,(T.global||f.global)&&(Object.defineProperty(u,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function Sa(){var f=u.Promise;return Yn?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Rr(f,g,_,T,A){var R=qe;try{return Vt(f,!0),g(_,T,A)}finally{Vt(R,!1)}}function xr(f,g,_,T){return typeof f!="function"?f:function(){var A=qe;_&&ir(),Vt(g,!0);try{return f.apply(this,arguments)}finally{Vt(A,!1),T&&queueMicrotask(Pn)}}}function Yr(f){Promise===vt&&Ot.echoes===0?Qr===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Er).indexOf("[native code]")===-1&&(ir=Pn=Tt);var $t=Ue.reject,pi="",Wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Co="String expected.",vr=[],_r="__dbnames",gn="readonly",Bi="readwrite";function gi(f,g){return f?g?function(){return f.apply(this,arguments)&&g.apply(this,arguments)}:f:g}var yi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zi(f){return typeof f!="string"||/\./.test(f)?function(g){return g}:function(g){return g[f]===void 0&&f in g&&delete(g=k(g))[f],g}}function Us(){throw He.Type()}function ht(f,g){try{var _=Bs(f),T=Bs(g);if(_!==T)return _==="Array"?1:T==="Array"?-1:_==="binary"?1:T==="binary"?-1:_==="string"?1:T==="string"?-1:_==="Date"?1:T!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<f?1:f<g?-1:0;case"binary":return function(A,R){for(var O=A.length,N=R.length,K=O<N?O:N,G=0;G<K;++G)if(A[G]!==R[G])return A[G]<R[G]?-1:1;return O===N?0:O<N?-1:1}(Bn(f),Bn(g));case"Array":return function(A,R){for(var O=A.length,N=R.length,K=O<N?O:N,G=0;G<K;++G){var X=ht(A[G],R[G]);if(X!==0)return X}return O===N?0:O<N?-1:1}(f,g)}}catch{}return NaN}function Bs(f){var g=typeof f;return g!="object"?g:ArrayBuffer.isView(f)?"binary":(f=Yt(f),f==="ArrayBuffer"?"binary":f)}function Bn(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var Aa=(Mt.prototype._trans=function(f,g,_){var T=this._tx||qe.trans,A=this.name,R=Un&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(G,X,U){if(!U.schema[A])throw new He.NotFound("Table "+A+" not part of transaction");return g(U.idbtrans,U)}var N=gr();try{var K=T&&T.db._novip===this.db._novip?T===qe.trans?T._promise(f,O,_):$n(function(){return T._promise(f,O,_)},{trans:T,transless:qe.transless||qe}):function G(X,U,Z,F){if(X.idbdb&&(X._state.openComplete||qe.letThrough||X._vip)){var $=X._createTransaction(U,Z,X._dbSchema);try{$.create(),X._state.PR1398_maxLoop=3}catch(ee){return ee.name===cn.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,U,Z,F)})):$t(ee)}return $._promise(U,function(ee,Q){return $n(function(){return qe.trans=$,F(ee,Q,$)})}).then(function(ee){if(U==="readwrite")try{$.idbtrans.commit()}catch{}return U==="readonly"?ee:$._completion.then(function(){return ee})})}if(X._state.openComplete)return $t(new He.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return $t(new He.DatabaseClosed);X.open().catch(Tt)}return X._state.dbReadyPromise.then(function(){return G(X,U,Z,F)})}(this.db,f,[this.name],O);return R&&(K._consoleTask=R,K=K.catch(function(G){return console.trace(G),$t(G)})),K}finally{N&&Ui()}},Mt.prototype.get=function(f,g){var _=this;return f&&f.constructor===Object?this.where(f).first(g):f==null?$t(new He.Type("Invalid argument to Table.get()")):this._trans("readonly",function(T){return _.core.get({trans:T,key:f}).then(function(A){return _.hook.reading.fire(A)})}).then(g)},Mt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(d(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var g=c(f);if(g.length===1)return this.where(g[0]).equals(f[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&g.every(function(G){return 0<=N.keyPath.indexOf(G)})){for(var K=0;K<g.length;++K)if(g.indexOf(N.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(N,K){return N.keyPath.length-K.keyPath.length})[0];if(_&&this.db._maxKey!==pi){var R=_.keyPath.slice(0,g.length);return this.where(R).equals(R.map(function(K){return f[K]}))}!_&&Un&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var T=this.schema.idxByName;function A(N,K){return ht(N,K)===0}var O=g.reduce(function(U,K){var G=U[0],X=U[1],U=T[K],Z=f[K];return[G||U,G||!U?gi(X,U&&U.multi?function(F){return F=Ve(F,K),d(F)&&F.some(function($){return A(Z,$)})}:function(F){return A(Z,Ve(F,K))}):X]},[null,null]),R=O[0],O=O[1];return R?this.where(R.name).equals(f[R.keyPath]).filter(O):_?this.filter(O):this.where(g).equals("")},Mt.prototype.filter=function(f){return this.toCollection().and(f)},Mt.prototype.count=function(f){return this.toCollection().count(f)},Mt.prototype.offset=function(f){return this.toCollection().offset(f)},Mt.prototype.limit=function(f){return this.toCollection().limit(f)},Mt.prototype.each=function(f){return this.toCollection().each(f)},Mt.prototype.toArray=function(f){return this.toCollection().toArray(f)},Mt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Mt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,d(f)?"[".concat(f.join("+"),"]"):f))},Mt.prototype.reverse=function(){return this.toCollection().reverse()},Mt.prototype.mapToClass=function(f){var g,_=this.db,T=this.name;function A(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Us&&(function(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function X(){this.constructor=K}t(K,G),K.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}(A,g=f),Object.defineProperty(A.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),A.prototype.table=function(){return T},f=A);for(var R=new Set,O=f.prototype;O;O=v(O))Object.getOwnPropertyNames(O).forEach(function(K){return R.add(K)});function N(K){if(!K)return K;var G,X=Object.create(f.prototype);for(G in K)if(!R.has(G))try{X[G]=K[G]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),f},Mt.prototype.defineClass=function(){return this.mapToClass(function(f){p(this,f)})},Mt.prototype.add=function(f,g){var _=this,T=this.schema.primKey,A=T.auto,R=T.keyPath,O=f;return R&&A&&(O=zi(R)(f)),this._trans("readwrite",function(N){return _.core.mutate({trans:N,type:"add",keys:g!=null?[g]:null,values:[O]})}).then(function(N){return N.numFailures?Ue.reject(N.failures[0]):N.lastResult}).then(function(N){if(R)try{L(f,R,N)}catch{}return N})},Mt.prototype.update=function(f,g){return typeof f!="object"||d(f)?this.where(":id").equals(f).modify(g):(f=Ve(f,this.schema.primKey.keyPath),f===void 0?$t(new He.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(g))},Mt.prototype.put=function(f,g){var _=this,T=this.schema.primKey,A=T.auto,R=T.keyPath,O=f;return R&&A&&(O=zi(R)(f)),this._trans("readwrite",function(N){return _.core.mutate({trans:N,type:"put",values:[O],keys:g!=null?[g]:null})}).then(function(N){return N.numFailures?Ue.reject(N.failures[0]):N.lastResult}).then(function(N){if(R)try{L(f,R,N)}catch{}return N})},Mt.prototype.delete=function(f){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[f]})}).then(function(_){return _.numFailures?Ue.reject(_.failures[0]):void 0})},Mt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"deleteRange",range:yi})}).then(function(g){return g.numFailures?Ue.reject(g.failures[0]):void 0})},Mt.prototype.bulkGet=function(f){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:f,trans:_}).then(function(T){return T.map(function(A){return g.hook.reading.fire(A)})})})},Mt.prototype.bulkAdd=function(f,g,_){var T=this,A=Array.isArray(g)?g:void 0,R=(_=_||(A?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=T.schema.primKey,N=G.auto,G=G.keyPath;if(G&&A)throw new He.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new He.InvalidArgument("Arguments objects and keys must have the same length");var K=f.length,G=G&&N?f.map(zi(G)):f;return T.core.mutate({trans:O,type:"add",keys:A,values:G,wantResults:R}).then(function($){var U=$.numFailures,Z=$.results,F=$.lastResult,$=$.failures;if(U===0)return R?Z:F;throw new et("".concat(T.name,".bulkAdd(): ").concat(U," of ").concat(K," operations failed"),$)})})},Mt.prototype.bulkPut=function(f,g,_){var T=this,A=Array.isArray(g)?g:void 0,R=(_=_||(A?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=T.schema.primKey,N=G.auto,G=G.keyPath;if(G&&A)throw new He.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new He.InvalidArgument("Arguments objects and keys must have the same length");var K=f.length,G=G&&N?f.map(zi(G)):f;return T.core.mutate({trans:O,type:"put",keys:A,values:G,wantResults:R}).then(function($){var U=$.numFailures,Z=$.results,F=$.lastResult,$=$.failures;if(U===0)return R?Z:F;throw new et("".concat(T.name,".bulkPut(): ").concat(U," of ").concat(K," operations failed"),$)})})},Mt.prototype.bulkUpdate=function(f){var g=this,_=this.core,T=f.map(function(O){return O.key}),A=f.map(function(O){return O.changes}),R=[];return this._trans("readwrite",function(O){return _.getMany({trans:O,keys:T,cache:"clone"}).then(function(N){var K=[],G=[];f.forEach(function(U,Z){var F=U.key,$=U.changes,ee=N[Z];if(ee){for(var Q=0,oe=Object.keys($);Q<oe.length;Q++){var he=oe[Q],fe=$[he];if(he===g.schema.primKey.keyPath){if(ht(fe,F)!==0)throw new He.Constraint("Cannot update primary key in bulkUpdate()")}else L(ee,he,fe)}R.push(Z),K.push(F),G.push(ee)}});var X=K.length;return _.mutate({trans:O,type:"put",keys:K,values:G,updates:{keys:T,changeSpecs:A}}).then(function(U){var Z=U.numFailures,F=U.failures;if(Z===0)return X;for(var $=0,ee=Object.keys(F);$<ee.length;$++){var Q,oe=ee[$],he=R[Number(oe)];he!=null&&(Q=F[oe],delete F[oe],F[he]=Q)}throw new et("".concat(g.name,".bulkUpdate(): ").concat(Z," of ").concat(X," operations failed"),F)})})})},Mt.prototype.bulkDelete=function(f){var g=this,_=f.length;return this._trans("readwrite",function(T){return g.core.mutate({trans:T,type:"delete",keys:f})}).then(function(O){var A=O.numFailures,R=O.lastResult,O=O.failures;if(A===0)return R;throw new et("".concat(g.name,".bulkDelete(): ").concat(A," of ").concat(_," operations failed"),O)})},Mt);function Mt(){}function vi(f){function g(O,N){if(N){for(var K=arguments.length,G=new Array(K-1);--K;)G[K-1]=arguments[K];return _[O].subscribe.apply(null,G),f}if(typeof O=="string")return _[O]}var _={};g.addEventType=R;for(var T=1,A=arguments.length;T<A;++T)R(arguments[T]);return g;function R(O,N,K){if(typeof O!="object"){var G;N=N||Ro;var X={subscribers:[],fire:K=K||Tt,subscribe:function(U){X.subscribers.indexOf(U)===-1&&(X.subscribers.push(U),X.fire=N(X.fire,U))},unsubscribe:function(U){X.subscribers=X.subscribers.filter(function(Z){return Z!==U}),X.fire=X.subscribers.reduce(N,K)}};return _[O]=g[O]=X}c(G=O).forEach(function(U){var Z=G[U];if(d(Z))R(U,G[U][0],G[U][1]);else{if(Z!=="asap")throw new He.InvalidArgument("Invalid event config");var F=R(U,jr,function(){for(var $=arguments.length,ee=new Array($);$--;)ee[$]=arguments[$];F.subscribers.forEach(function(Q){xe(function(){Q.apply(null,ee)})})})}})}}function ji(f,g){return le(g).from({prototype:f}),g}function Cr(f,g){return!(f.filter||f.algorithm||f.or)&&(g?f.justLimit:!f.replayFilter)}function Do(f,g){f.filter=gi(f.filter,g)}function en(f,g,_){var T=f.replayFilter;f.replayFilter=T?function(){return gi(T(),g())}:g,f.justLimit=_&&!T}function zn(f,g){if(f.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(f.index);if(!_)throw new He.Schema("KeyPath "+f.index+" on object store "+g.name+" is not indexed");return _}function cs(f,g,_){var T=zn(f,g.schema);return g.openCursor({trans:_,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:T,range:f.range}})}function $r(f,g,_,T){var A=f.replayFilter?gi(f.filter,f.replayFilter()):f.filter;if(f.or){var R={},O=function(N,K,G){var X,U;A&&!A(K,G,function(Z){return K.stop(Z)},function(Z){return K.fail(Z)})||((U=""+(X=K.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(X)),I(R,U)||(R[U]=!0,g(N,K,G)))};return Promise.all([f.or._iterate(O,_),_i(cs(f,T,_),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return _i(cs(f,T,_),gi(f.algorithm,A),g,!f.keysOnly&&f.valueMapper)}function _i(f,g,_,T){var A=ut(T?function(R,O,N){return _(T(R),O,N)}:_);return f.then(function(R){if(R)return R.start(function(){var O=function(){return R.continue()};g&&!g(R,function(N){return O=N},function(N){R.stop(N),O=Tt},function(N){R.fail(N),O=Tt})||A(R.value,R,function(N){return O=N}),O()})})}var It=(hs.prototype.execute=function(f){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(d(_))return a(a([],d(f)?f:[],!0),_).sort();if(typeof _=="number")return(Number(f)||0)+_;if(typeof _=="bigint")try{return BigInt(f)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var T=g.remove;if(d(T))return d(f)?f.filter(function(A){return!T.includes(A)}).sort():[];if(typeof T=="number")return Number(f)-T;if(typeof T=="bigint")try{return BigInt(f)-T}catch{return BigInt(0)-T}throw new TypeError("Invalid subtrahend ".concat(T))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof f=="string"&&f.startsWith(_)?g.replacePrefix[1]+f.substring(_.length):f},hs);function hs(f){this["@@propmod"]=f}var Dr=(dt.prototype._read=function(f,g){var _=this._ctx;return _.error?_.table._trans(null,$t.bind(null,_.error)):_.table._trans("readonly",f).then(g)},dt.prototype._write=function(f){var g=this._ctx;return g.error?g.table._trans(null,$t.bind(null,g.error)):g.table._trans("readwrite",f,"locked")},dt.prototype._addAlgorithm=function(f){var g=this._ctx;g.algorithm=gi(g.algorithm,f)},dt.prototype._iterate=function(f,g){return $r(this._ctx,f,g,this._ctx.table.core)},dt.prototype.clone=function(f){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return f&&p(_,f),g._ctx=_,g},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(f){var g=this._ctx;return this._read(function(_){return $r(g,f,_,g.table.core)})},dt.prototype.count=function(f){var g=this;return this._read(function(_){var T=g._ctx,A=T.table.core;if(Cr(T,!0))return A.count({trans:_,query:{index:zn(T,A.schema),range:T.range}}).then(function(O){return Math.min(O,T.limit)});var R=0;return $r(T,function(){return++R,!1},_,A).then(function(){return R})}).then(f)},dt.prototype.sortBy=function(f,g){var _=f.split(".").reverse(),T=_[0],A=_.length-1;function R(K,G){return G?R(K[_[G]],G-1):K[T]}var O=this._ctx.dir==="next"?1:-1;function N(K,G){return ht(R(K,A),R(G,A))*O}return this.toArray(function(K){return K.sort(N)}).then(g)},dt.prototype.toArray=function(f){var g=this;return this._read(function(_){var T=g._ctx;if(T.dir==="next"&&Cr(T,!0)&&0<T.limit){var A=T.valueMapper,R=zn(T,T.table.core.schema);return T.table.core.query({trans:_,limit:T.limit,values:!0,query:{index:R,range:T.range}}).then(function(N){return N=N.result,A?N.map(A):N})}var O=[];return $r(T,function(N){return O.push(N)},_,T.table.core).then(function(){return O})},f)},dt.prototype.offset=function(f){var g=this._ctx;return f<=0||(g.offset+=f,Cr(g)?en(g,function(){var _=f;return function(T,A){return _===0||(_===1?--_:A(function(){T.advance(_),_=0}),!1)}}):en(g,function(){var _=f;return function(){return--_<0}})),this},dt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),en(this._ctx,function(){var g=f;return function(_,T,A){return--g<=0&&T(A),0<=g}},!0),this},dt.prototype.until=function(f,g){return Do(this._ctx,function(_,T,A){return!f(_.value)||(T(A),g)}),this},dt.prototype.first=function(f){return this.limit(1).toArray(function(g){return g[0]}).then(f)},dt.prototype.last=function(f){return this.reverse().first(f)},dt.prototype.filter=function(f){var g;return Do(this._ctx,function(_){return f(_.value)}),(g=this._ctx).isMatch=gi(g.isMatch,f),this},dt.prototype.and=function(f){return this.filter(f)},dt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(f){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,T){f(T.key,T)})},dt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},dt.prototype.eachPrimaryKey=function(f){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,T){f(T.primaryKey,T)})},dt.prototype.keys=function(f){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(T,A){_.push(A.key)}).then(function(){return _}).then(f)},dt.prototype.primaryKeys=function(f){var g=this._ctx;if(g.dir==="next"&&Cr(g,!0)&&0<g.limit)return this._read(function(T){var A=zn(g,g.table.core.schema);return g.table.core.query({trans:T,values:!1,limit:g.limit,query:{index:A,range:g.range}})}).then(function(T){return T.result}).then(f);g.keysOnly=!g.isMatch;var _=[];return this.each(function(T,A){_.push(A.primaryKey)}).then(function(){return _}).then(f)},dt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},dt.prototype.firstKey=function(f){return this.limit(1).keys(function(g){return g[0]}).then(f)},dt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},dt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var g={};return Do(this._ctx,function(A){var T=A.primaryKey.toString(),A=I(g,T);return g[T]=!0,!A}),this},dt.prototype.modify=function(f){var g=this,_=this._ctx;return this._write(function(T){var A,R,O;O=typeof f=="function"?f:(A=c(f),R=A.length,function(Q){for(var oe=!1,he=0;he<R;++he){var fe=A[he],ve=f[fe],Oe=Ve(Q,fe);ve instanceof It?(L(Q,fe,ve.execute(Oe)),oe=!0):Oe!==ve&&(L(Q,fe,ve),oe=!0)}return oe});var N=_.table.core,U=N.schema.primaryKey,K=U.outbound,G=U.extractKey,X=200,U=g.db._options.modifyChunkSize;U&&(X=typeof U=="object"?U[N.name]||U["*"]||200:U);function Z(Q,fe){var he=fe.failures,fe=fe.numFailures;$+=Q-fe;for(var ve=0,Oe=c(he);ve<Oe.length;ve++){var Me=Oe[ve];F.push(he[Me])}}var F=[],$=0,ee=[];return g.clone().primaryKeys().then(function(Q){function oe(fe){var ve=Math.min(X,Q.length-fe);return N.getMany({trans:T,keys:Q.slice(fe,fe+ve),cache:"immutable"}).then(function(Oe){for(var Me=[],Ce=[],Pe=K?[]:null,ke=[],De=0;De<ve;++De){var je=Oe[De],Je={value:k(je),primKey:Q[fe+De]};O.call(Je,Je.value,Je)!==!1&&(Je.value==null?ke.push(Q[fe+De]):K||ht(G(je),G(Je.value))===0?(Ce.push(Je.value),K&&Pe.push(Q[fe+De])):(ke.push(Q[fe+De]),Me.push(Je.value)))}return Promise.resolve(0<Me.length&&N.mutate({trans:T,type:"add",values:Me}).then(function(tt){for(var lt in tt.failures)ke.splice(parseInt(lt),1);Z(Me.length,tt)})).then(function(){return(0<Ce.length||he&&typeof f=="object")&&N.mutate({trans:T,type:"put",keys:Pe,values:Ce,criteria:he,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<fe}).then(function(tt){return Z(Ce.length,tt)})}).then(function(){return(0<ke.length||he&&f===Ia)&&N.mutate({trans:T,type:"delete",keys:ke,criteria:he,isAdditionalChunk:0<fe}).then(function(tt){return Z(ke.length,tt)})}).then(function(){return Q.length>fe+ve&&oe(fe+X)})})}var he=Cr(_)&&_.limit===1/0&&(typeof f!="function"||f===Ia)&&{index:_.index,range:_.range};return oe(0).then(function(){if(0<F.length)throw new ct("Error modifying one or more objects",F,$,ee);return Q.length})})})},dt.prototype.delete=function(){var f=this._ctx,g=f.range;return Cr(f)&&(f.isPrimKey||g.type===3)?this._write(function(_){var T=f.table.core.schema.primaryKey,A=g;return f.table.core.count({trans:_,query:{index:T,range:A}}).then(function(R){return f.table.core.mutate({trans:_,type:"deleteRange",range:A}).then(function(O){var N=O.failures;if(O.lastResult,O.results,O=O.numFailures,O)throw new ct("Could not delete some values",Object.keys(N).map(function(K){return N[K]}),R-O);return R-O})})}):this.modify(Ia)},dt);function dt(){}var Ia=function(f,g){return g.value=null};function Oo(f,g){return f<g?-1:f===g?0:1}function Po(f,g){return g<f?-1:f===g?0:1}function Jn(f,g,_){return f=f instanceof bi?new f.Collection(f):f,f._ctx.error=new(_||TypeError)(g),f}function fs(f){return new f.Collection(f,function(){return br("")}).limit(0)}function qi(f,g,_,T){var A,R,O,N,K,G,X,U=_.length;if(!_.every(function($){return typeof $=="string"}))return Jn(f,Co);function Z($){A=$==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},R=$==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},O=$==="next"?Oo:Po;var ee=_.map(function(Q){return{lower:R(Q),upper:A(Q)}}).sort(function(Q,oe){return O(Q.lower,oe.lower)});N=ee.map(function(Q){return Q.upper}),K=ee.map(function(Q){return Q.lower}),X=(G=$)==="next"?"":T}Z("next"),f=new f.Collection(f,function(){return jn(N[0],K[U-1]+T)}),f._ondirectionchange=function($){Z($)};var F=0;return f._addAlgorithm(function($,ee,Q){var oe=$.key;if(typeof oe!="string")return!1;var he=R(oe);if(g(he,K,F))return!0;for(var fe=null,ve=F;ve<U;++ve){var Oe=function(Me,Ce,Pe,ke,De,je){for(var Je=Math.min(Me.length,ke.length),tt=-1,lt=0;lt<Je;++lt){var Zn=Ce[lt];if(Zn!==ke[lt])return De(Me[lt],Pe[lt])<0?Me.substr(0,lt)+Pe[lt]+Pe.substr(lt+1):De(Me[lt],ke[lt])<0?Me.substr(0,lt)+ke[lt]+Pe.substr(lt+1):0<=tt?Me.substr(0,tt)+Ce[tt]+Pe.substr(tt+1):null;De(Me[lt],Zn)<0&&(tt=lt)}return Je<ke.length&&je==="next"?Me+Pe.substr(Me.length):Je<Me.length&&je==="prev"?Me.substr(0,Pe.length):tt<0?null:Me.substr(0,tt)+ke[tt]+Pe.substr(tt+1)}(oe,he,N[ve],K[ve],O,G);Oe===null&&fe===null?F=ve+1:(fe===null||0<O(fe,Oe))&&(fe=Oe)}return ee(fe!==null?function(){$.continue(fe+X)}:Q),!1}),f}function jn(f,g,_,T){return{type:2,lower:f,upper:g,lowerOpen:_,upperOpen:T}}function br(f){return{type:1,lower:f,upper:f}}var bi=(Object.defineProperty(jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),jt.prototype.between=function(f,g,_,T){_=_!==!1,T=T===!0;try{return 0<this._cmp(f,g)||this._cmp(f,g)===0&&(_||T)&&(!_||!T)?fs(this):new this.Collection(this,function(){return jn(f,g,!_,!T)})}catch{return Jn(this,Wn)}},jt.prototype.equals=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return br(f)})},jt.prototype.above=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return jn(f,void 0,!0)})},jt.prototype.aboveOrEqual=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return jn(f,void 0,!1)})},jt.prototype.below=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return jn(void 0,f,!1,!0)})},jt.prototype.belowOrEqual=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return jn(void 0,f)})},jt.prototype.startsWith=function(f){return typeof f!="string"?Jn(this,Co):this.between(f,f+pi,!0,!0)},jt.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):qi(this,function(g,_){return g.indexOf(_[0])===0},[f],pi)},jt.prototype.equalsIgnoreCase=function(f){return qi(this,function(g,_){return g===_[0]},[f],"")},jt.prototype.anyOfIgnoreCase=function(){var f=j.apply(gt,arguments);return f.length===0?fs(this):qi(this,function(g,_){return _.indexOf(g)!==-1},f,"")},jt.prototype.startsWithAnyOfIgnoreCase=function(){var f=j.apply(gt,arguments);return f.length===0?fs(this):qi(this,function(g,_){return _.some(function(T){return g.indexOf(T)===0})},f,pi)},jt.prototype.anyOf=function(){var f=this,g=j.apply(gt,arguments),_=this._cmp;try{g.sort(_)}catch{return Jn(this,Wn)}if(g.length===0)return fs(this);var T=new this.Collection(this,function(){return jn(g[0],g[g.length-1])});T._ondirectionchange=function(R){_=R==="next"?f._ascending:f._descending,g.sort(_)};var A=0;return T._addAlgorithm(function(R,O,N){for(var K=R.key;0<_(K,g[A]);)if(++A===g.length)return O(N),!1;return _(K,g[A])===0||(O(function(){R.continue(g[A])}),!1)}),T},jt.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},jt.prototype.noneOf=function(){var f=j.apply(gt,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Jn(this,Wn)}var g=f.reduce(function(_,T){return _?_.concat([[_[_.length-1][1],T]]):[[-1/0,T]]},null);return g.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},jt.prototype.inAnyRange=function(oe,g){var _=this,T=this._cmp,A=this._ascending,R=this._descending,O=this._min,N=this._max;if(oe.length===0)return fs(this);if(!oe.every(function(he){return he[0]!==void 0&&he[1]!==void 0&&A(he[0],he[1])<=0}))return Jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",He.InvalidArgument);var K=!g||g.includeLowers!==!1,G=g&&g.includeUppers===!0,X,U=A;function Z(he,fe){return U(he[0],fe[0])}try{(X=oe.reduce(function(he,fe){for(var ve=0,Oe=he.length;ve<Oe;++ve){var Me=he[ve];if(T(fe[0],Me[1])<0&&0<T(fe[1],Me[0])){Me[0]=O(Me[0],fe[0]),Me[1]=N(Me[1],fe[1]);break}}return ve===Oe&&he.push(fe),he},[])).sort(Z)}catch{return Jn(this,Wn)}var F=0,$=G?function(he){return 0<A(he,X[F][1])}:function(he){return 0<=A(he,X[F][1])},ee=K?function(he){return 0<R(he,X[F][0])}:function(he){return 0<=R(he,X[F][0])},Q=$,oe=new this.Collection(this,function(){return jn(X[0][0],X[X.length-1][1],!K,!G)});return oe._ondirectionchange=function(he){U=he==="next"?(Q=$,A):(Q=ee,R),X.sort(Z)},oe._addAlgorithm(function(he,fe,ve){for(var Oe,Me=he.key;Q(Me);)if(++F===X.length)return fe(ve),!1;return!$(Oe=Me)&&!ee(Oe)||(_._cmp(Me,X[F][1])===0||_._cmp(Me,X[F][0])===0||fe(function(){U===A?he.continue(X[F][0]):he.continue(X[F][1])}),!1)}),oe},jt.prototype.startsWithAnyOf=function(){var f=j.apply(gt,arguments);return f.every(function(g){return typeof g=="string"})?f.length===0?fs(this):this.inAnyRange(f.map(function(g){return[g,g+pi]})):Jn(this,"startsWithAnyOf() only works with strings")},jt);function jt(){}function sr(f){return ut(function(g){return ar(g),f(g.target.error),!1})}function ar(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var ds="storagemutated",Fi="x-storagemutated-1",An=vi(null,ds),Or=(qn.prototype._lock=function(){return Re(!qe.global),++this._reculock,this._reculock!==1||qe.global||(qe.lockOwnerFor=this),this},qn.prototype._unlock=function(){if(Re(!qe.global),--this._reculock==0)for(qe.global||(qe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Rr(f[1],f[0])}catch{}}return this},qn.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},qn.prototype.create=function(f){var g=this;if(!this.mode)return this;var _=this.db.idbdb,T=this.db._state.dbOpenError;if(Re(!this.idbtrans),!f&&!_)switch(T&&T.name){case"DatabaseClosedError":throw new He.DatabaseClosed(T);case"MissingAPIError":throw new He.MissingAPI(T.message,T);default:throw new He.OpenFailed(T)}if(!this.active)throw new He.TransactionInactive;return Re(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(A){ar(A),g._reject(f.error)}),f.onabort=ut(function(A){ar(A),g.active&&g._reject(new He.Abort(f.error)),g.active=!1,g.on("abort").fire(A)}),f.oncomplete=ut(function(){g.active=!1,g._resolve(),"mutatedParts"in f&&An.storagemutated.fire(f.mutatedParts)}),this},qn.prototype._promise=function(f,g,_){var T=this;if(f==="readwrite"&&this.mode!=="readwrite")return $t(new He.ReadOnly("Transaction is readonly"));if(!this.active)return $t(new He.TransactionInactive);if(this._locked())return new Ue(function(R,O){T._blockedFuncs.push([function(){T._promise(f,g,_).then(R,O)},qe])});if(_)return $n(function(){var R=new Ue(function(O,N){T._lock();var K=g(O,N,T);K&&K.then&&K.then(O,N)});return R.finally(function(){return T._unlock()}),R._lib=!0,R});var A=new Ue(function(R,O){var N=g(R,O,T);N&&N.then&&N.then(R,O)});return A._lib=!0,A},qn.prototype._root=function(){return this.parent?this.parent._root():this},qn.prototype.waitFor=function(f){var g,_=this._root(),T=Ue.resolve(f);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return T}):(_._waitingFor=T,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function R(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=R)}());var A=_._waitingFor;return new Ue(function(R,O){T.then(function(N){return _._waitingQueue.push(ut(R.bind(null,N)))},function(N){return _._waitingQueue.push(ut(O.bind(null,N)))}).finally(function(){_._waitingFor===A&&(_._waitingFor=null)})})},qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new He.Abort))},qn.prototype.table=function(f){var g=this._memoizedTables||(this._memoizedTables={});if(I(g,f))return g[f];var _=this.schema[f];if(!_)throw new He.NotFound("Table "+f+" not part of transaction");return _=new this.db.Table(f,_,this),_.core=this.db.core.table(f),g[f]=_},qn);function qn(){}function Pr(f,g,_,T,A,R,O){return{name:f,keyPath:g,unique:_,multi:T,auto:A,compound:R,src:(_&&!O?"&":"")+(T?"*":"")+(A?"++":"")+Ki(g)}}function Ki(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Xr(f,g,_){return{name:f,primKey:g,indexes:_,mappedClass:null,idxByName:(T=function(A){return[A.name,A]},_.reduce(function(A,R,O){return O=T(R,O),O&&(A[O[0]]=O[1]),A},{}))};var T}var Hi=function(f){try{return f.only([[]]),Hi=function(){return[[]]},[[]]}catch{return Hi=function(){return pi},pi}};function Nr(f){return f==null?function(){}:typeof f=="string"?(g=f).split(".").length===1?function(_){return _[g]}:function(_){return Ve(_,g)}:function(_){return Ve(_,f)};var g}function Wr(f){return[].slice.call(f)}var No=0;function tn(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Ct(f,g,K){function T(Q){if(Q.type===3)return null;if(Q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=Q.lower,$=Q.upper,ee=Q.lowerOpen,Q=Q.upperOpen;return F===void 0?$===void 0?null:g.upperBound($,!!Q):$===void 0?g.lowerBound(F,!!ee):g.bound(F,$,!!ee,!!Q)}function A(Z){var F,$=Z.name;return{name:$,schema:Z,mutate:function(ee){var Q=ee.trans,oe=ee.type,he=ee.keys,fe=ee.values,ve=ee.range;return new Promise(function(Oe,Me){Oe=ut(Oe);var Ce=Q.objectStore($),Pe=Ce.keyPath==null,ke=oe==="put"||oe==="add";if(!ke&&oe!=="delete"&&oe!=="deleteRange")throw new Error("Invalid operation type: "+oe);var De,je=(he||fe||{length:1}).length;if(he&&fe&&he.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(Fn){++Zn,ar(Fn)}var tt=[],lt=[],Zn=0;if(oe==="deleteRange"){if(ve.type===4)return Oe({numFailures:Zn,failures:lt,results:[],lastResult:void 0});ve.type===3?tt.push(De=Ce.clear()):tt.push(De=Ce.delete(T(ve)))}else{var Pe=ke?Pe?[fe,he]:[fe,null]:[he,null],st=Pe[0],_n=Pe[1];if(ke)for(var Rn=0;Rn<je;++Rn)tt.push(De=_n&&_n[Rn]!==void 0?Ce[oe](st[Rn],_n[Rn]):Ce[oe](st[Rn])),De.onerror=Je;else for(Rn=0;Rn<je;++Rn)tt.push(De=Ce[oe](st[Rn])),De.onerror=Je}function Ji(Fn){Fn=Fn.target.result,tt.forEach(function(xi,ys){return xi.error!=null&&(lt[ys]=xi.error)}),Oe({numFailures:Zn,failures:lt,results:oe==="delete"?he:tt.map(function(xi){return xi.result}),lastResult:Fn})}De.onerror=function(Fn){Je(Fn),Ji(Fn)},De.onsuccess=Ji})},getMany:function(ee){var Q=ee.trans,oe=ee.keys;return new Promise(function(he,fe){he=ut(he);for(var ve,Oe=Q.objectStore($),Me=oe.length,Ce=new Array(Me),Pe=0,ke=0,De=function(tt){tt=tt.target,Ce[tt._pos]=tt.result,++ke===Pe&&he(Ce)},je=sr(fe),Je=0;Je<Me;++Je)oe[Je]!=null&&((ve=Oe.get(oe[Je]))._pos=Je,ve.onsuccess=De,ve.onerror=je,++Pe);Pe===0&&he(Ce)})},get:function(ee){var Q=ee.trans,oe=ee.key;return new Promise(function(he,fe){he=ut(he);var ve=Q.objectStore($).get(oe);ve.onsuccess=function(Oe){return he(Oe.target.result)},ve.onerror=sr(fe)})},query:(F=G,function(ee){return new Promise(function(Q,oe){Q=ut(Q);var he,fe,ve,Pe=ee.trans,Oe=ee.values,Me=ee.limit,De=ee.query,Ce=Me===1/0?void 0:Me,ke=De.index,De=De.range,Pe=Pe.objectStore($),ke=ke.isPrimaryKey?Pe:Pe.index(ke.name),De=T(De);if(Me===0)return Q({result:[]});F?((Ce=Oe?ke.getAll(De,Ce):ke.getAllKeys(De,Ce)).onsuccess=function(je){return Q({result:je.target.result})},Ce.onerror=sr(oe)):(he=0,fe=!Oe&&"openKeyCursor"in ke?ke.openKeyCursor(De):ke.openCursor(De),ve=[],fe.onsuccess=function(je){var Je=fe.result;return Je?(ve.push(Oe?Je.value:Je.primaryKey),++he===Me?Q({result:ve}):void Je.continue()):Q({result:ve})},fe.onerror=sr(oe))})}),openCursor:function(ee){var Q=ee.trans,oe=ee.values,he=ee.query,fe=ee.reverse,ve=ee.unique;return new Promise(function(Oe,Me){Oe=ut(Oe);var ke=he.index,Ce=he.range,Pe=Q.objectStore($),Pe=ke.isPrimaryKey?Pe:Pe.index(ke.name),ke=fe?ve?"prevunique":"prev":ve?"nextunique":"next",De=!oe&&"openKeyCursor"in Pe?Pe.openKeyCursor(T(Ce),ke):Pe.openCursor(T(Ce),ke);De.onerror=sr(Me),De.onsuccess=ut(function(je){var Je,tt,lt,Zn,st=De.result;st?(st.___id=++No,st.done=!1,Je=st.continue.bind(st),tt=(tt=st.continuePrimaryKey)&&tt.bind(st),lt=st.advance.bind(st),Zn=function(){throw new Error("Cursor not stopped")},st.trans=Q,st.stop=st.continue=st.continuePrimaryKey=st.advance=function(){throw new Error("Cursor not started")},st.fail=ut(Me),st.next=function(){var _n=this,Rn=1;return this.start(function(){return Rn--?_n.continue():_n.stop()}).then(function(){return _n})},st.start=function(_n){function Rn(){if(De.result)try{_n()}catch(Fn){st.fail(Fn)}else st.done=!0,st.start=function(){throw new Error("Cursor behind last entry")},st.stop()}var Ji=new Promise(function(Fn,xi){Fn=ut(Fn),De.onerror=sr(xi),st.fail=xi,st.stop=function(ys){st.stop=st.continue=st.continuePrimaryKey=st.advance=Zn,Fn(ys)}});return De.onsuccess=ut(function(Fn){De.onsuccess=Rn,Rn()}),st.continue=Je,st.continuePrimaryKey=tt,st.advance=lt,Rn(),Ji},Oe(st)):Oe(null)},Me)})},count:function(ee){var Q=ee.query,oe=ee.trans,he=Q.index,fe=Q.range;return new Promise(function(ve,Oe){var Me=oe.objectStore($),Ce=he.isPrimaryKey?Me:Me.index(he.name),Me=T(fe),Ce=Me?Ce.count(Me):Ce.count();Ce.onsuccess=ut(function(Pe){return ve(Pe.target.result)}),Ce.onerror=sr(Oe)})}}}var R,O,N,X=(O=K,N=Wr((R=f).objectStoreNames),{schema:{name:R.name,tables:N.map(function(Z){return O.objectStore(Z)}).map(function(Z){var F=Z.keyPath,Q=Z.autoIncrement,$=d(F),ee={},Q={name:Z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:$,keyPath:F,autoIncrement:Q,unique:!0,extractKey:Nr(F)},indexes:Wr(Z.indexNames).map(function(oe){return Z.index(oe)}).map(function(ve){var he=ve.name,fe=ve.unique,Oe=ve.multiEntry,ve=ve.keyPath,Oe={name:he,compound:d(ve),keyPath:ve,unique:fe,multiEntry:Oe,extractKey:Nr(ve)};return ee[tn(ve)]=Oe}),getIndexByKeyPath:function(oe){return ee[tn(oe)]}};return ee[":id"]=Q.primaryKey,F!=null&&(ee[tn(F)]=Q.primaryKey),Q})},hasGetAll:0<N.length&&"getAll"in O.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=X.schema,G=X.hasGetAll,X=K.tables.map(A),U={};return X.forEach(function(Z){return U[Z.name]=Z}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(Z){if(!U[Z])throw new Error("Table '".concat(Z,"' not found"));return U[Z]},MIN_KEY:-1/0,MAX_KEY:Hi(g),schema:K}}function Ra(f,g,_,T){var A=_.IDBKeyRange;return _.indexedDB,{dbcore:(T=Ct(g,A,T),f.dbcore.reduce(function(R,O){return O=O.create,r(r({},R),O(R))},T))}}function Ei(f,T){var _=T.db,T=Ra(f._middlewares,_,f._deps,T);f.core=T.dbcore,f.tables.forEach(function(A){var R=A.name;f.core.schema.tables.some(function(O){return O.name===R})&&(A.core=f.core.table(R),f[R]instanceof f.Table&&(f[R].core=A.core))})}function zs(f,g,_,T){_.forEach(function(A){var R=T[A];g.forEach(function(O){var N=function K(G,X){return ie(G,X)||(G=v(G))&&K(G,X)}(O,A);(!N||"value"in N&&N.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?z(O,A,{get:function(){return this.table(A)},set:function(K){B(this,A,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):O[A]=new f.Table(A,R))})})}function ms(f,g){g.forEach(function(_){for(var T in _)_[T]instanceof f.Table&&delete _[T]})}function xa(f,g){return f._cfg.version-g._cfg.version}function Ti(f,g,_,T){var A=f._dbSchema;_.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Xr("$meta",qs("")[0],[]),f._storeNames.push("$meta"));var R=f._createTransaction("readwrite",f._storeNames,A);R.create(_),R._completion.catch(T);var O=R._reject.bind(R),N=qe.transless||qe;$n(function(){return qe.trans=R,qe.transless=N,g!==0?(Ei(f,_),G=g,((K=R).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(X){return X??G}):Ue.resolve(G)).then(function(X){return Z=X,F=R,$=_,ee=[],X=(U=f)._versions,Q=U._dbSchema=Gi(0,U.idbdb,$),(X=X.filter(function(oe){return oe._cfg.version>=Z})).length!==0?(X.forEach(function(oe){ee.push(function(){var he=Q,fe=oe._cfg.dbschema;ps(U,he,$),ps(U,fe,$),Q=U._dbSchema=fe;var ve=or(he,fe);ve.add.forEach(function(ke){Ca($,ke[0],ke[1].primKey,ke[1].indexes)}),ve.change.forEach(function(ke){if(ke.recreate)throw new He.Upgrade("Not yet support for changing primary key");var De=$.objectStore(ke.name);ke.add.forEach(function(je){return wi(De,je)}),ke.change.forEach(function(je){De.deleteIndex(je.name),wi(De,je)}),ke.del.forEach(function(je){return De.deleteIndex(je)})});var Oe=oe._cfg.contentUpgrade;if(Oe&&oe._cfg.version>Z){Ei(U,$),F._memoizedTables={};var Me=P(fe);ve.del.forEach(function(ke){Me[ke]=he[ke]}),ms(U,[U.Transaction.prototype]),zs(U,[U.Transaction.prototype],c(Me),Me),F.schema=Me;var Ce,Pe=we(Oe);return Pe&&ir(),ve=Ue.follow(function(){var ke;(Ce=Oe(F))&&Pe&&(ke=Pn.bind(null,null),Ce.then(ke,ke))}),Ce&&typeof Ce.then=="function"?Ue.resolve(Ce):ve.then(function(){return Ce})}}),ee.push(function(he){var fe,ve,Oe=oe._cfg.dbschema;fe=Oe,ve=he,[].slice.call(ve.db.objectStoreNames).forEach(function(Me){return fe[Me]==null&&ve.db.deleteObjectStore(Me)}),ms(U,[U.Transaction.prototype]),zs(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),F.schema=U._dbSchema}),ee.push(function(he){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===oe._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(fe){return fe!=="$meta"})):he.objectStore("$meta").put(oe._cfg.version,"version"))})}),function oe(){return ee.length?Ue.resolve(ee.shift()(F.idbtrans)).then(oe):Ue.resolve()}().then(function(){Lu(Q,$)})):Ue.resolve();var U,Z,F,$,ee,Q}).catch(O)):(c(A).forEach(function(X){Ca(_,X,A[X].primKey,A[X].indexes)}),Ei(f,_),void Ue.follow(function(){return f.on.populate.fire(R)}).catch(O));var K,G})}function js(f,g){Lu(f._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=Gi(0,f.idbdb,g);ps(f,f._dbSchema,g);for(var T=0,A=or(_,f._dbSchema).change;T<A.length;T++){var R=function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=g.objectStore(O.name);O.add.forEach(function(K){Un&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(K.src)),wi(N,K)})}(A[T]);if(typeof R=="object")return R.value}}function or(f,g){var _,T={del:[],add:[],change:[]};for(_ in f)g[_]||T.del.push(_);for(_ in g){var A=f[_],R=g[_];if(A){var O={name:_,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||A.primKey.auto!==R.primKey.auto)O.recreate=!0,T.change.push(O);else{var N=A.idxByName,K=R.idxByName,G=void 0;for(G in N)K[G]||O.del.push(G);for(G in K){var X=N[G],U=K[G];X?X.src!==U.src&&O.change.push(U):O.add.push(U)}(0<O.del.length||0<O.add.length||0<O.change.length)&&T.change.push(O)}}else T.add.push([_,R])}return T}function Ca(f,g,_,T){var A=f.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return T.forEach(function(R){return wi(A,R)}),A}function Lu(f,g){c(f).forEach(function(_){g.db.objectStoreNames.contains(_)||(Un&&console.debug("Dexie: Creating missing table",_),Ca(g,_,f[_].primKey,f[_].indexes))})}function wi(f,g){f.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Gi(f,g,_){var T={};return de(g.objectStoreNames,0).forEach(function(A){for(var R=_.objectStore(A),O=Pr(Ki(G=R.keyPath),G||"",!0,!1,!!R.autoIncrement,G&&typeof G!="string",!0),N=[],K=0;K<R.indexNames.length;++K){var X=R.index(R.indexNames[K]),G=X.keyPath,X=Pr(X.name,G,!!X.unique,!!X.multiEntry,!1,G&&typeof G!="string",!1);N.push(X)}T[A]=Xr(A,O,N)}),T}function ps(f,g,_){for(var T=_.db.objectStoreNames,A=0;A<T.length;++A){var R=T[A],O=_.objectStore(R);f._hasGetAll="getAll"in O;for(var N=0;N<O.indexNames.length;++N){var K=O.indexNames[N],G=O.index(K).keyPath,X=typeof G=="string"?G:"["+de(G).join("+")+"]";!g[R]||(G=g[R].idxByName[X])&&(G.name=K,delete g[R].idxByName[X],g[R].idxByName[K]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function qs(f){return f.split(",").map(function(g,_){var T=(g=g.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(T)?T.match(/^\[(.*)\]$/)[1].split("+"):T;return Pr(T,A||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),d(A),_===0)})}var Uu=(Qi.prototype._parseStoresSpec=function(f,g){c(f).forEach(function(_){if(f[_]!==null){var T=qs(f[_]),A=T.shift();if(A.unique=!0,A.multi)throw new He.Schema("Primary key cannot be multi-valued");T.forEach(function(R){if(R.auto)throw new He.Schema("Only primary key can be marked as autoIncrement (++)");if(!R.keyPath)throw new He.Schema("Index must have a name and cannot be an empty string")}),g[_]=Xr(_,A,T)}})},Qi.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,_):_;var _=g._versions,T={},A={};return _.forEach(function(R){p(T,R._cfg.storesSource),A=R._cfg.dbschema={},R._parseStoresSpec(T,A)}),g._dbSchema=A,ms(g,[g._allTables,g,g.Transaction.prototype]),zs(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],c(A),A),g._storeNames=c(A),this},Qi.prototype.upgrade=function(f){return this._cfg.contentUpgrade=as(this._cfg.contentUpgrade||Tt,f),this},Qi);function Qi(){}function Vo(f,g){var _=f._dbNamesDB;return _||(_=f._dbNamesDB=new Ri(_r,{addons:[],indexedDB:f,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function Fs(f){return f&&typeof f.databases=="function"}function Yi(f){return $n(function(){return qe.letThrough=!0,f()})}function Da(f){return!("from"in f)}var yn=function(f,g){if(!this){var _=new yn;return f&&"d"in f&&p(_,f),_}p(this,arguments.length?{d:1,from:f,to:1<arguments.length?g:f}:{d:0})};function $i(f,g,_){var T=ht(g,_);if(!isNaN(T)){if(0<T)throw RangeError();if(Da(f))return p(f,{from:g,to:_,d:1});var A=f.l,T=f.r;if(ht(_,f.from)<0)return A?$i(A,g,_):f.l={from:g,to:_,d:1,l:null,r:null},ko(f);if(0<ht(g,f.to))return T?$i(T,g,_):f.r={from:g,to:_,d:1,l:null,r:null},ko(f);ht(g,f.from)<0&&(f.from=g,f.l=null,f.d=T?T.d+1:1),0<ht(_,f.to)&&(f.to=_,f.r=null,f.d=f.l?f.l.d+1:1),_=!f.r,A&&!f.l&&Jr(f,A),T&&_&&Jr(f,T)}}function Jr(f,g){Da(g)||function _(T,K){var R=K.from,O=K.to,N=K.l,K=K.r;$i(T,R,O),N&&_(T,N),K&&_(T,K)}(f,g)}function Mo(f,g){var _=Xi(g),T=_.next();if(T.done)return!1;for(var A=T.value,R=Xi(f),O=R.next(A.from),N=O.value;!T.done&&!O.done;){if(ht(N.from,A.to)<=0&&0<=ht(N.to,A.from))return!0;ht(A.from,N.from)<0?A=(T=_.next(N.from)).value:N=(O=R.next(A.from)).value}return!1}function Xi(f){var g=Da(f)?null:{s:0,n:f};return{next:function(_){for(var T=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,T)for(;g.n.l&&ht(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!T||ht(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function ko(f){var g,_,T=(((g=f.r)===null||g===void 0?void 0:g.d)||0)-(((_=f.l)===null||_===void 0?void 0:_.d)||0),A=1<T?"r":T<-1?"l":"";A&&(g=A=="r"?"l":"r",_=r({},f),T=f[A],f.from=T.from,f.to=T.to,f[A]=T[A],_[A]=T[g],(f[g]=_).d=Oa(_)),f.d=Oa(f)}function Oa(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function Vr(f,g){return c(g).forEach(function(_){f[_]?Jr(f[_],g[_]):f[_]=function T(A){var R,O,N={};for(R in A)I(A,R)&&(O=A[R],N[R]=!O||typeof O!="object"||Y.has(O.constructor)?O:T(O));return N}(g[_])}),f}function Pa(f,g){return f.all||g.all||Object.keys(f).some(function(_){return g[_]&&Mo(g[_],f[_])})}x(yn.prototype,((Er={add:function(f){return Jr(this,f),this},addKey:function(f){return $i(this,f,f),this},addKeys:function(f){var g=this;return f.forEach(function(_){return $i(g,_,_)}),this},hasKey:function(f){var g=Xi(this).next(f).value;return g&&ht(g.from,f)<=0&&0<=ht(g.to,f)}})[ye]=function(){return Xi(this)},Er));var Si={},Na={},Va=!1;function Wi(f){Vr(Na,f),Va||(Va=!0,setTimeout(function(){Va=!1,Nn(Na,!(Na={}))},0))}function Nn(f,g){g===void 0&&(g=!1);var _=new Set;if(f.all)for(var T=0,A=Object.values(Si);T<A.length;T++)Lo(O=A[T],f,_,g);else for(var R in f){var O,N=/^idb\:\/\/(.*)\/(.*)\//.exec(R);N&&(R=N[1],N=N[2],(O=Si["idb://".concat(R,"/").concat(N)])&&Lo(O,f,_,g))}_.forEach(function(K){return K()})}function Lo(f,g,_,T){for(var A=[],R=0,O=Object.entries(f.queries.query);R<O.length;R++){for(var N=O[R],K=N[0],G=[],X=0,U=N[1];X<U.length;X++){var Z=U[X];Pa(g,Z.obsSet)?Z.subscribers.forEach(function(Q){return _.add(Q)}):T&&G.push(Z)}T&&A.push([K,G])}if(T)for(var F=0,$=A;F<$.length;F++){var ee=$[F],K=ee[0],G=ee[1];f.queries.query[K]=G}}function Bu(f){var g=f._state,_=f._deps.indexedDB;if(g.isBeingOpened||f.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?$t(g.dbOpenError):f});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var T=g.openCanceller,A=Math.round(10*f.verno),R=!1;function O(){if(g.openCanceller!==T)throw new He.DatabaseClosed("db.open() was cancelled")}function N(){return new Ue(function(Z,F){if(O(),!_)throw new He.MissingAPI;var $=f.name,ee=g.autoSchema||!A?_.open($):_.open($,A);if(!ee)throw new He.MissingAPI;ee.onerror=sr(F),ee.onblocked=ut(f._fireOnBlocked),ee.onupgradeneeded=ut(function(Q){var oe;X=ee.transaction,g.autoSchema&&!f._options.allowEmptyDB?(ee.onerror=ar,X.abort(),ee.result.close(),(oe=_.deleteDatabase($)).onsuccess=oe.onerror=ut(function(){F(new He.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(X.onerror=sr(F),Q=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,U=Q<1,f.idbdb=ee.result,R&&js(f,X),Ti(f,Q/10,X,F))},F),ee.onsuccess=ut(function(){X=null;var Q,oe,he,fe,ve,Oe=f.idbdb=ee.result,Me=de(Oe.objectStoreNames);if(0<Me.length)try{var Ce=Oe.transaction((fe=Me).length===1?fe[0]:fe,"readonly");if(g.autoSchema)oe=Oe,he=Ce,(Q=f).verno=oe.version/10,he=Q._dbSchema=Gi(0,oe,he),Q._storeNames=de(oe.objectStoreNames,0),zs(Q,[Q._allTables],c(he),he);else if(ps(f,f._dbSchema,Ce),((ve=or(Gi(0,(ve=f).idbdb,Ce),ve._dbSchema)).add.length||ve.change.some(function(Pe){return Pe.add.length||Pe.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Oe.close(),A=Oe.version+1,R=!0,Z(N());Ei(f,Ce)}catch{}vr.push(f),Oe.onversionchange=ut(function(Pe){g.vcFired=!0,f.on("versionchange").fire(Pe)}),Oe.onclose=ut(function(Pe){f.on("close").fire(Pe)}),U&&(ve=f._deps,Ce=$,Oe=ve.indexedDB,ve=ve.IDBKeyRange,Fs(Oe)||Ce===_r||Vo(Oe,ve).put({name:Ce}).catch(Tt)),Z()},F)}).catch(function(Z){switch(Z==null?void 0:Z.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(0<A)return A=0,N()}return Ue.reject(Z)})}var K,G=g.dbReadyResolve,X=null,U=!1;return Ue.race([T,(typeof navigator>"u"?Ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Z){function F(){return indexedDB.databases().finally(Z)}K=setInterval(F,100),F()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(N)]).then(function(){return O(),g.onReadyBeingFired=[],Ue.resolve(Yi(function(){return f.on.ready.fire(f.vip)})).then(function Z(){if(0<g.onReadyBeingFired.length){var F=g.onReadyBeingFired.reduce(as,Tt);return g.onReadyBeingFired=[],Ue.resolve(Yi(function(){return F(f.vip)})).then(Z)}})}).finally(function(){g.openCanceller===T&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(Z){g.dbOpenError=Z;try{X&&X.abort()}catch{}return T===g.openCanceller&&f._close(),$t(Z)}).finally(function(){g.openComplete=!0,G()}).then(function(){var Z;return U&&(Z={},f.tables.forEach(function(F){F.schema.indexes.forEach(function($){$.name&&(Z["idb://".concat(f.name,"/").concat(F.name,"/").concat($.name)]=new yn(-1/0,[[[]]]))}),Z["idb://".concat(f.name,"/").concat(F.name,"/")]=Z["idb://".concat(f.name,"/").concat(F.name,"/:dels")]=new yn(-1/0,[[[]]])}),An(ds).fire(Z),Nn(Z,!0)),f})}function Mr(f){function g(R){return f.next(R)}var _=A(g),T=A(function(R){return f.throw(R)});function A(R){return function(K){var N=R(K),K=N.value;return N.done?K:K&&typeof K.then=="function"?K.then(_,T):d(K)?Promise.all(K).then(_,T):_(K)}}return A(g)()}function h(f,g,_){for(var T=d(f)?f.slice():[f],A=0;A<_;++A)T.push(g);return T}var b={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(g){var _=f.table(g),T=_.schema,A={},R=[];function O(U,Z,F){var $=tn(U),ee=A[$]=A[$]||[],Q=U==null?0:typeof U=="string"?1:U.length,oe=0<Z,oe=r(r({},F),{name:oe?"".concat($,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:oe,keyTail:Z,keyLength:Q,extractKey:Nr(U),unique:!oe&&F.unique});return ee.push(oe),oe.isPrimaryKey||R.push(oe),1<Q&&O(Q===2?U[0]:U.slice(0,Q-1),Z+1,F),ee.sort(function(he,fe){return he.keyTail-fe.keyTail}),oe}g=O(T.primaryKey.keyPath,0,T.primaryKey),A[":id"]=[g];for(var N=0,K=T.indexes;N<K.length;N++){var G=K[N];O(G.keyPath,0,G)}function X(U){var Z,F=U.query.index;return F.isVirtual?r(r({},U),{query:{index:F.lowLevelIndex,range:(Z=U.query.range,F=F.keyTail,{type:Z.type===1?2:Z.type,lower:h(Z.lower,Z.lowerOpen?f.MAX_KEY:f.MIN_KEY,F),lowerOpen:!0,upper:h(Z.upper,Z.upperOpen?f.MIN_KEY:f.MAX_KEY,F),upperOpen:!0})}}):U}return r(r({},_),{schema:r(r({},T),{primaryKey:g,indexes:R,getIndexByKeyPath:function(U){return(U=A[tn(U)])&&U[0]}}),count:function(U){return _.count(X(U))},query:function(U){return _.query(X(U))},openCursor:function(U){var Z=U.query.index,F=Z.keyTail,$=Z.isVirtual,ee=Z.keyLength;return $?_.openCursor(X(U)).then(function(oe){return oe&&Q(oe)}):_.openCursor(U);function Q(oe){return Object.create(oe,{continue:{value:function(he){he!=null?oe.continue(h(he,U.reverse?f.MAX_KEY:f.MIN_KEY,F)):U.unique?oe.continue(oe.key.slice(0,ee).concat(U.reverse?f.MIN_KEY:f.MAX_KEY,F)):oe.continue()}},continuePrimaryKey:{value:function(he,fe){oe.continuePrimaryKey(h(he,f.MAX_KEY,F),fe)}},primaryKey:{get:function(){return oe.primaryKey}},key:{get:function(){var he=oe.key;return ee===1?he[0]:he.slice(0,ee)}},value:{get:function(){return oe.value}}})}}})}})}};function w(f,g,_,T){return _=_||{},T=T||"",c(f).forEach(function(A){var R,O,N;I(g,A)?(R=f[A],O=g[A],typeof R=="object"&&typeof O=="object"&&R&&O?(N=Yt(R))!==Yt(O)?_[T+A]=g[A]:N==="Object"?w(R,O,_,T+A+"."):R!==O&&(_[T+A]=g[A]):R!==O&&(_[T+A]=g[A])):_[T+A]=void 0}),c(g).forEach(function(A){I(f,A)||(_[T+A]=g[A])}),_}function D(f,g){return g.type==="delete"?g.keys:g.keys||g.values.map(f.extractKey)}var te={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(g){var _=f.table(g),T=_.schema.primaryKey;return r(r({},_),{mutate:function(A){var R=qe.trans,O=R.table(g).hook,N=O.deleting,K=O.creating,G=O.updating;switch(A.type){case"add":if(K.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"put":if(K.fire===Tt&&G.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"delete":if(N.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"deleteRange":if(N.fire===Tt)break;return R._promise("readwrite",function(){return function U(Z,F,$){return _.query({trans:Z,values:!1,query:{index:T,range:F},limit:$}).then(function(ee){var Q=ee.result;return X({type:"delete",keys:Q,trans:Z}).then(function(oe){return 0<oe.numFailures?Promise.reject(oe.failures[0]):Q.length<$?{failures:[],numFailures:0,lastResult:void 0}:U(Z,r(r({},F),{lower:Q[Q.length-1],lowerOpen:!0}),$)})})}(A.trans,A.range,1e4)},!0)}return _.mutate(A);function X(U){var Z,F,$,ee=qe.trans,Q=U.keys||D(T,U);if(!Q)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?r(r({},U),{keys:Q}):r({},U)).type!=="delete"&&(U.values=a([],U.values)),U.keys&&(U.keys=a([],U.keys)),Z=_,$=Q,((F=U).type==="add"?Promise.resolve([]):Z.getMany({trans:F.trans,keys:$,cache:"immutable"})).then(function(oe){var he=Q.map(function(fe,ve){var Oe,Me,Ce,Pe=oe[ve],ke={onerror:null,onsuccess:null};return U.type==="delete"?N.fire.call(ke,fe,Pe,ee):U.type==="add"||Pe===void 0?(Oe=K.fire.call(ke,fe,U.values[ve],ee),fe==null&&Oe!=null&&(U.keys[ve]=fe=Oe,T.outbound||L(U.values[ve],T.keyPath,fe))):(Oe=w(Pe,U.values[ve]),(Me=G.fire.call(ke,Oe,fe,Pe,ee))&&(Ce=U.values[ve],Object.keys(Me).forEach(function(De){I(Ce,De)?Ce[De]=Me[De]:L(Ce,De,Me[De])}))),ke});return _.mutate(U).then(function(fe){for(var ve=fe.failures,Oe=fe.results,Me=fe.numFailures,fe=fe.lastResult,Ce=0;Ce<Q.length;++Ce){var Pe=(Oe||Q)[Ce],ke=he[Ce];Pe==null?ke.onerror&&ke.onerror(ve[Ce]):ke.onsuccess&&ke.onsuccess(U.type==="put"&&oe[Ce]?U.values[Ce]:Pe)}return{failures:ve,results:Oe,numFailures:Me,lastResult:fe}}).catch(function(fe){return he.forEach(function(ve){return ve.onerror&&ve.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function me(f,g,_){try{if(!g||g.keys.length<f.length)return null;for(var T=[],A=0,R=0;A<g.keys.length&&R<f.length;++A)ht(g.keys[A],f[R])===0&&(T.push(_?k(g.values[A]):g.values[A]),++R);return T.length===f.length?T:null}catch{return null}}var Ne={stack:"dbcore",level:-1,create:function(f){return{table:function(g){var _=f.table(g);return r(r({},_),{getMany:function(T){if(!T.cache)return _.getMany(T);var A=me(T.keys,T.trans._cache,T.cache==="clone");return A?Ue.resolve(A):_.getMany(T).then(function(R){return T.trans._cache={keys:T.keys,values:T.cache==="clone"?k(R):R},R})},mutate:function(T){return T.type!=="add"&&(T.trans._cache=null),_.mutate(T)}})}}}};function _t(f,g){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function fn(f,g){switch(f){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var wt={stack:"dbcore",level:0,name:"Observability",create:function(f){var g=f.schema.name,_=new yn(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(T,A,R){if(qe.subscr&&A!=="readonly")throw new He.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(qe.querier));return f.transaction(T,A,R)},table:function(T){var A=f.table(T),R=A.schema,O=R.primaryKey,U=R.indexes,N=O.extractKey,K=O.outbound,G=O.autoIncrement&&U.filter(function(F){return F.compound&&F.keyPath.includes(O.keyPath)}),X=r(r({},A),{mutate:function(F){function $(De){return De="idb://".concat(g,"/").concat(T,"/").concat(De),fe[De]||(fe[De]=new yn)}var ee,Q,oe,he=F.trans,fe=F.mutatedParts||(F.mutatedParts={}),ve=$(""),Oe=$(":dels"),Me=F.type,ke=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[D(O,F).filter(function(De){return De}),F.values]:[],Ce=ke[0],Pe=ke[1],ke=F.trans._cache;return d(Ce)?(ve.addKeys(Ce),(ke=Me==="delete"||Ce.length===Pe.length?me(Ce,ke):null)||Oe.addKeys(Ce),(ke||Pe)&&(ee=$,Q=ke,oe=Pe,R.indexes.forEach(function(De){var je=ee(De.name||"");function Je(lt){return lt!=null?De.extractKey(lt):null}function tt(lt){return De.multiEntry&&d(lt)?lt.forEach(function(Zn){return je.addKey(Zn)}):je.addKey(lt)}(Q||oe).forEach(function(lt,_n){var st=Q&&Je(Q[_n]),_n=oe&&Je(oe[_n]);ht(st,_n)!==0&&(st!=null&&tt(st),_n!=null&&tt(_n))})}))):Ce?(Pe={from:(Pe=Ce.lower)!==null&&Pe!==void 0?Pe:f.MIN_KEY,to:(Pe=Ce.upper)!==null&&Pe!==void 0?Pe:f.MAX_KEY},Oe.add(Pe),ve.add(Pe)):(ve.add(_),Oe.add(_),R.indexes.forEach(function(De){return $(De.name).add(_)})),A.mutate(F).then(function(De){return!Ce||F.type!=="add"&&F.type!=="put"||(ve.addKeys(De.results),G&&G.forEach(function(je){for(var Je=F.values.map(function(st){return je.extractKey(st)}),tt=je.keyPath.findIndex(function(st){return st===O.keyPath}),lt=0,Zn=De.results.length;lt<Zn;++lt)Je[lt][tt]=De.results[lt];$(je.name).addKeys(Je)})),he.mutatedParts=Vr(he.mutatedParts||{},fe),De})}}),U=function($){var ee=$.query,$=ee.index,ee=ee.range;return[$,new yn(($=ee.lower)!==null&&$!==void 0?$:f.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:f.MAX_KEY)]},Z={get:function(F){return[O,new yn(F.key)]},getMany:function(F){return[O,new yn().addKeys(F.keys)]},count:U,query:U,openCursor:U};return c(Z).forEach(function(F){X[F]=function($){var ee=qe.subscr,Q=!!ee,oe=_t(qe,A)&&fn(F,$)?$.obsSet={}:ee;if(Q){var he=function(Pe){return Pe="idb://".concat(g,"/").concat(T,"/").concat(Pe),oe[Pe]||(oe[Pe]=new yn)},fe=he(""),ve=he(":dels"),ee=Z[F]($),Q=ee[0],ee=ee[1];if((F==="query"&&Q.isPrimaryKey&&!$.values?ve:he(Q.name||"")).add(ee),!Q.isPrimaryKey){if(F!=="count"){var Oe=F==="query"&&K&&$.values&&A.query(r(r({},$),{values:!1}));return A[F].apply(this,arguments).then(function(Pe){if(F==="query"){if(K&&$.values)return Oe.then(function(Je){return Je=Je.result,fe.addKeys(Je),Pe});var ke=$.values?Pe.result.map(N):Pe.result;($.values?fe:ve).addKeys(ke)}else if(F==="openCursor"){var De=Pe,je=$.values;return De&&Object.create(De,{key:{get:function(){return ve.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var Je=De.primaryKey;return ve.addKey(Je),Je}},value:{get:function(){return je&&fe.addKey(De.primaryKey),De.value}}})}return Pe})}ve.add(_)}}return A[F].apply(this,arguments)}}),X}})}};function vn(f,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var T=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===T?null:(g=r({},g),d(g.keys)&&(g.keys=g.keys.filter(function(A,R){return!(R in _.failures)})),"values"in g&&d(g.values)&&(g.values=g.values.filter(function(A,R){return!(R in _.failures)})),g)}function sn(f,g){return _=f,((T=g).lower===void 0||(T.lowerOpen?0<ht(_,T.lower):0<=ht(_,T.lower)))&&(f=f,(g=g).upper===void 0||(g.upperOpen?ht(f,g.upper)<0:ht(f,g.upper)<=0));var _,T}function Ai(f,g,Z,T,A,R){if(!Z||Z.length===0)return f;var O=g.query.index,N=O.multiEntry,K=g.query.range,G=T.schema.primaryKey.extractKey,X=O.extractKey,U=(O.lowLevelIndex||O).extractKey,Z=Z.reduce(function(F,$){var ee=F,Q=[];if($.type==="add"||$.type==="put")for(var oe=new yn,he=$.values.length-1;0<=he;--he){var fe,ve=$.values[he],Oe=G(ve);oe.hasKey(Oe)||(fe=X(ve),(N&&d(fe)?fe.some(function(De){return sn(De,K)}):sn(fe,K))&&(oe.addKey(Oe),Q.push(ve)))}switch($.type){case"add":var Me=new yn().addKeys(g.values?F.map(function(je){return G(je)}):F),ee=F.concat(g.values?Q.filter(function(je){return je=G(je),!Me.hasKey(je)&&(Me.addKey(je),!0)}):Q.map(function(je){return G(je)}).filter(function(je){return!Me.hasKey(je)&&(Me.addKey(je),!0)}));break;case"put":var Ce=new yn().addKeys($.values.map(function(je){return G(je)}));ee=F.filter(function(je){return!Ce.hasKey(g.values?G(je):je)}).concat(g.values?Q:Q.map(function(je){return G(je)}));break;case"delete":var Pe=new yn().addKeys($.keys);ee=F.filter(function(je){return!Pe.hasKey(g.values?G(je):je)});break;case"deleteRange":var ke=$.range;ee=F.filter(function(je){return!sn(G(je),ke)})}return ee},f);return Z===f?f:(Z.sort(function(F,$){return ht(U(F),U($))||ht(G(F),G($))}),g.limit&&g.limit<1/0&&(Z.length>g.limit?Z.length=g.limit:f.length===g.limit&&Z.length<g.limit&&(A.dirty=!0)),R?Object.freeze(Z):Z)}function In(f,g){return ht(f.lower,g.lower)===0&&ht(f.upper,g.upper)===0&&!!f.lowerOpen==!!g.lowerOpen&&!!f.upperOpen==!!g.upperOpen}function Ii(f,g){return function(_,T,A,R){if(_===void 0)return T!==void 0?-1:0;if(T===void 0)return 1;if((T=ht(_,T))===0){if(A&&R)return 0;if(A)return 1;if(R)return-1}return T}(f.lower,g.lower,f.lowerOpen,g.lowerOpen)<=0&&0<=function(_,T,A,R){if(_===void 0)return T!==void 0?1:0;if(T===void 0)return-1;if((T=ht(_,T))===0){if(A&&R)return 0;if(A)return-1;if(R)return 1}return T}(f.upper,g.upper,f.upperOpen,g.upperOpen)}function Uo(f,g,_,T){f.subscribers.add(_),T.addEventListener("abort",function(){var A,R;f.subscribers.delete(_),f.subscribers.size===0&&(A=f,R=g,setTimeout(function(){A.subscribers.size===0&&Qe(R,A)},3e3))})}var zu={stack:"dbcore",level:0,name:"Cache",create:function(f){var g=f.schema.name;return r(r({},f),{transaction:function(_,T,A){var R,O,N=f.transaction(_,T,A);return T==="readwrite"&&(O=(R=new AbortController).signal,A=function(K){return function(){if(R.abort(),T==="readwrite"){for(var G=new Set,X=0,U=_;X<U.length;X++){var Z=U[X],F=Si["idb://".concat(g,"/").concat(Z)];if(F){var $=f.table(Z),ee=F.optimisticOps.filter(function(je){return je.trans===N});if(N._explicit&&K&&N.mutatedParts)for(var Q=0,oe=Object.values(F.queries.query);Q<oe.length;Q++)for(var he=0,fe=(Me=oe[Q]).slice();he<fe.length;he++)Pa((Ce=fe[he]).obsSet,N.mutatedParts)&&(Qe(Me,Ce),Ce.subscribers.forEach(function(je){return G.add(je)}));else if(0<ee.length){F.optimisticOps=F.optimisticOps.filter(function(je){return je.trans!==N});for(var ve=0,Oe=Object.values(F.queries.query);ve<Oe.length;ve++)for(var Me,Ce,Pe,ke=0,De=(Me=Oe[ve]).slice();ke<De.length;ke++)(Ce=De[ke]).res!=null&&N.mutatedParts&&(K&&!Ce.dirty?(Pe=Object.isFrozen(Ce.res),Pe=Ai(Ce.res,Ce.req,ee,$,Ce,Pe),Ce.dirty?(Qe(Me,Ce),Ce.subscribers.forEach(function(je){return G.add(je)})):Pe!==Ce.res&&(Ce.res=Pe,Ce.promise=Ue.resolve({result:Pe}))):(Ce.dirty&&Qe(Me,Ce),Ce.subscribers.forEach(function(je){return G.add(je)})))}}}G.forEach(function(je){return je()})}}},N.addEventListener("abort",A(!1),{signal:O}),N.addEventListener("error",A(!1),{signal:O}),N.addEventListener("complete",A(!0),{signal:O})),N},table:function(_){var T=f.table(_),A=T.schema.primaryKey;return r(r({},T),{mutate:function(R){var O=qe.trans;if(A.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return T.mutate(R);var N=Si["idb://".concat(g,"/").concat(_)];return N?(O=T.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||D(A,R).some(function(K){return K==null}))?(N.optimisticOps.push(R),R.mutatedParts&&Wi(R.mutatedParts),O.then(function(K){0<K.numFailures&&(Qe(N.optimisticOps,R),(K=vn(0,R,K))&&N.optimisticOps.push(K),R.mutatedParts&&Wi(R.mutatedParts))}),O.catch(function(){Qe(N.optimisticOps,R),R.mutatedParts&&Wi(R.mutatedParts)})):O.then(function(K){var G=vn(0,r(r({},R),{values:R.values.map(function(X,U){var Z;return K.failures[U]?X:(X=(Z=A.keyPath)!==null&&Z!==void 0&&Z.includes(".")?k(X):r({},X),L(X,A.keyPath,K.results[U]),X)})}),K);N.optimisticOps.push(G),queueMicrotask(function(){return R.mutatedParts&&Wi(R.mutatedParts)})}),O):T.mutate(R)},query:function(R){if(!_t(qe,T)||!fn("query",R))return T.query(R);var O=((G=qe.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",U=qe,N=U.requery,K=U.signal,G=function($,ee,Q,oe){var he=Si["idb://".concat($,"/").concat(ee)];if(!he)return[];if(!(ee=he.queries[Q]))return[null,!1,he,null];var fe=ee[(oe.query?oe.query.index.name:null)||""];if(!fe)return[null,!1,he,null];switch(Q){case"query":var ve=fe.find(function(Oe){return Oe.req.limit===oe.limit&&Oe.req.values===oe.values&&In(Oe.req.query.range,oe.query.range)});return ve?[ve,!0,he,fe]:[fe.find(function(Oe){return("limit"in Oe.req?Oe.req.limit:1/0)>=oe.limit&&(!oe.values||Oe.req.values)&&Ii(Oe.req.query.range,oe.query.range)}),!1,he,fe];case"count":return ve=fe.find(function(Oe){return In(Oe.req.query.range,oe.query.range)}),[ve,!!ve,he,fe]}}(g,_,"query",R),X=G[0],U=G[1],Z=G[2],F=G[3];return X&&U?X.obsSet=R.obsSet:(U=T.query(R).then(function($){var ee=$.result;if(X&&(X.res=ee),O){for(var Q=0,oe=ee.length;Q<oe;++Q)Object.freeze(ee[Q]);Object.freeze(ee)}else $.result=k(ee);return $}).catch(function($){return F&&X&&Qe(F,X),Promise.reject($)}),X={obsSet:R.obsSet,promise:U,subscribers:new Set,type:"query",req:R,dirty:!1},F?F.push(X):(F=[X],(Z=Z||(Si["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=F)),Uo(X,F,N,K),X.promise.then(function($){return{result:Ai($.result,R,Z==null?void 0:Z.optimisticOps,T,X,O)}})}})}})}};function Bo(f,g){return new Proxy(f,{get:function(_,T,A){return T==="db"?g:Reflect.get(_,T,A)}})}var Ri=(Jt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new He.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new He.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var g=this._versions,_=g.filter(function(T){return T._cfg.version===f})[0];return _||(_=new this.Version(f),g.push(_),g.sort(xa),_.stores({}),this._state.autoSchema=!1,_)},Jt.prototype._whenReady=function(f){var g=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?f():new Ue(function(_,T){if(g._state.openComplete)return T(new He.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void T(new He.DatabaseClosed);g.open().catch(Tt)}g._state.dbReadyPromise.then(_,T)}).then(f)},Jt.prototype.use=function(f){var g=f.stack,_=f.create,T=f.level,A=f.name;return A&&this.unuse({stack:g,name:A}),f=this._middlewares[g]||(this._middlewares[g]=[]),f.push({stack:g,create:_,level:T??10,name:A}),f.sort(function(R,O){return R.level-O.level}),this},Jt.prototype.unuse=function(f){var g=f.stack,_=f.name,T=f.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(A){return T?A.create!==T:!!_&&A.name!==_})),this},Jt.prototype.open=function(){var f=this;return Rr(Sn,function(){return Bu(f)})},Jt.prototype._close=function(){var f=this._state,g=vr.indexOf(this);if(0<=g&&vr.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ue(function(_){f.dbReadyResolve=_}),f.openCanceller=new Ue(function(_,T){f.cancelOpen=T}))},Jt.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new He.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new He.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Jt.prototype.delete=function(f){var g=this;f===void 0&&(f={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",T=this._state;return new Ue(function(A,R){function O(){g.close(f);var N=g._deps.indexedDB.deleteDatabase(g.name);N.onsuccess=ut(function(){var K,G,X;K=g._deps,G=g.name,X=K.indexedDB,K=K.IDBKeyRange,Fs(X)||G===_r||Vo(X,K).delete(G).catch(Tt),A()}),N.onerror=sr(R),N.onblocked=g._fireOnBlocked}if(_)throw new He.InvalidArgument("Invalid closeOptions argument to db.delete()");T.isBeingOpened?T.dbReadyPromise.then(O):O()})},Jt.prototype.backendDB=function(){return this.idbdb},Jt.prototype.isOpen=function(){return this.idbdb!==null},Jt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Jt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jt.prototype,"tables",{get:function(){var f=this;return c(this._allTables).map(function(g){return f._allTables[g]})},enumerable:!1,configurable:!0}),Jt.prototype.transaction=function(){var f=(function(g,_,T){var A=arguments.length;if(A<2)throw new He.InvalidArgument("Too few arguments");for(var R=new Array(A-1);--A;)R[A-1]=arguments[A];return T=R.pop(),[g,q(R),T]}).apply(this,arguments);return this._transaction.apply(this,f)},Jt.prototype._transaction=function(f,g,_){var T=this,A=qe.trans;A&&A.db===this&&f.indexOf("!")===-1||(A=null);var R,O,N=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=g.map(function(G){if(G=G instanceof T.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),f=="r"||f===gn)R=gn;else{if(f!="rw"&&f!=Bi)throw new He.InvalidArgument("Invalid transaction mode: "+f);R=Bi}if(A){if(A.mode===gn&&R===Bi){if(!N)throw new He.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&O.forEach(function(G){if(A&&A.storeNames.indexOf(G)===-1){if(!N)throw new He.SubTransaction("Table "+G+" not included in parent transaction.");A=null}}),N&&A&&!A.active&&(A=null)}}catch(G){return A?A._promise(null,function(X,U){U(G)}):$t(G)}var K=(function G(X,U,Z,F,$){return Ue.resolve().then(function(){var ee=qe.transless||qe,Q=X._createTransaction(U,Z,X._dbSchema,F);if(Q.explicit=!0,ee={trans:Q,transless:ee},F)Q.idbtrans=F.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(fe){return fe.name===cn.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,U,Z,null,$)})):$t(fe)}var oe,he=we($);return he&&ir(),ee=Ue.follow(function(){var fe;(oe=$.call(Q,Q))&&(he?(fe=Pn.bind(null,null),oe.then(fe,fe)):typeof oe.next=="function"&&typeof oe.throw=="function"&&(oe=Mr(oe)))},ee),(oe&&typeof oe.then=="function"?Ue.resolve(oe).then(function(fe){return Q.active?fe:$t(new He.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return oe})).then(function(fe){return F&&Q._resolve(),Q._completion.then(function(){return fe})}).catch(function(fe){return Q._reject(fe),$t(fe)})})}).bind(null,this,R,O,A,_);return A?A._promise(R,K,"lock"):qe.trans?Rr(qe.transless,function(){return T._whenReady(K)}):this._whenReady(K)},Jt.prototype.table=function(f){if(!I(this._allTables,f))throw new He.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Jt);function Jt(f,g){var _=this;this._middlewares={},this.verno=0;var T=Jt.dependencies;this._options=g=r({addons:Jt.addons,autoOpen:!0,indexedDB:T.indexedDB,IDBKeyRange:T.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},T=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,R,O,N,K,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Tt,dbReadyPromise:null,cancelOpen:Tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};G.dbReadyPromise=new Ue(function(U){G.dbReadyResolve=U}),G.openCanceller=new Ue(function(U,Z){G.cancelOpen=Z}),this._state=G,this.name=f,this.on=vi(this,"populate","blocked","versionchange","close",{ready:[as,Tt]}),this.on.ready.subscribe=ae(this.on.ready.subscribe,function(U){return function(Z,F){Jt.vip(function(){var $,ee=_._state;ee.openComplete?(ee.dbOpenError||Ue.resolve().then(Z),F&&U(Z)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(Z),F&&U(Z)):(U(Z),$=_,F||U(function Q(){$.on.ready.unsubscribe(Z),$.on.ready.unsubscribe(Q)}))})}}),this.Collection=(A=this,ji(Dr.prototype,function(oe,Q){this.db=A;var F=yi,$=null;if(Q)try{F=Q()}catch(he){$=he}var ee=oe._ctx,Q=ee.table,oe=Q.hook.reading.fire;this._ctx={table:Q,index:ee.index,isPrimKey:!ee.index||Q.schema.primKey.keyPath&&ee.index===Q.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:ee.or,valueMapper:oe!==jr?oe:null}})),this.Table=(R=this,ji(Aa.prototype,function(U,Z,F){this.db=R,this._tx=F,this.name=U,this.schema=Z,this.hook=R._allTables[U]?R._allTables[U].hook:vi(null,{creating:[Mu,Tt],reading:[Ns,jr],updating:[nc,Tt],deleting:[Ir,Tt]})})),this.Transaction=(O=this,ji(Or.prototype,function(U,Z,F,$,ee){var Q=this;this.db=O,this.mode=U,this.storeNames=Z,this.schema=F,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=vi(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ue(function(oe,he){Q._resolve=oe,Q._reject=he}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(oe){var he=Q.active;return Q.active=!1,Q.on.error.fire(oe),Q.parent?Q.parent._reject(oe):he&&Q.idbtrans&&Q.idbtrans.abort(),$t(oe)})})),this.Version=(N=this,ji(Uu.prototype,function(U){this.db=N,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,ji(bi.prototype,function(U,Z,F){if(this.db=K,this._ctx={table:U,index:Z===":id"?null:Z,or:F},this._cmp=this._ascending=ht,this._descending=function($,ee){return ht(ee,$)},this._max=function($,ee){return 0<ht($,ee)?$:ee},this._min=function($,ee){return ht($,ee)<0?$:ee},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new He.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=Hi(g.IDBKeyRange),this._createTransaction=function(U,Z,F,$){return new _.Transaction(U,Z,F,_._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(U){_.on("blocked").fire(U),vr.filter(function(Z){return Z.name===_.name&&Z!==_&&!Z._state.vcFired}).map(function(Z){return Z.on("versionchange").fire(U)})},this.use(Ne),this.use(zu),this.use(wt),this.use(b),this.use(te);var X=new Proxy(this,{get:function(U,Z,F){if(Z==="_vip")return!0;if(Z==="table")return function(ee){return Bo(_.table(ee),X)};var $=Reflect.get(U,Z,F);return $ instanceof Aa?Bo($,X):Z==="tables"?$.map(function(ee){return Bo(ee,X)}):Z==="_createTransaction"?function(){return Bo($.apply(this,arguments),X)}:$}});this.vip=X,T.forEach(function(U){return U(_)})}var Ma,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hf=(ju.prototype.subscribe=function(f,g,_){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:g,complete:_})},ju.prototype[Er]=function(){return this},ju);function ju(f){this._subscribe=f}try{Ma={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Ma={indexedDB:null,IDBKeyRange:null}}function ff(f){var g,_=!1,T=new hf(function(A){var R=we(f),O,N=!1,K={},G={},X={get closed(){return N},unsubscribe:function(){N||(N=!0,O&&O.abort(),U&&An.storagemutated.unsubscribe(F))}};A.start&&A.start(X);var U=!1,Z=function(){return Yr($)},F=function(ee){Vr(K,ee),Pa(G,K)&&Z()},$=function(){var ee,Q,oe;!N&&Ma.indexedDB&&(K={},ee={},O&&O.abort(),O=new AbortController,oe=function(he){var fe=gr();try{R&&ir();var ve=$n(f,he);return ve=R?ve.finally(Pn):ve}finally{fe&&Ui()}}(Q={subscr:ee,signal:O.signal,requery:Z,querier:f,trans:null}),Promise.resolve(oe).then(function(he){_=!0,g=he,N||Q.signal.aborted||(K={},function(fe){for(var ve in fe)if(I(fe,ve))return;return 1}(G=ee)||U||(An(ds,F),U=!0),Yr(function(){return!N&&A.next&&A.next(he)}))},function(he){_=!1,["DatabaseClosedError","AbortError"].includes(he==null?void 0:he.name)||N||Yr(function(){N||A.error&&A.error(he)})}))};return setTimeout(Z,0),X});return T.hasValue=function(){return _},T.getValue=function(){return g},T}var Ks=Ri;function rc(f){var g=gs;try{gs=!0,An.storagemutated.fire(f),Nn(f,!0)}finally{gs=g}}x(Ks,r(r({},Ar),{delete:function(f){return new Ks(f,{addons:[]}).delete()},exists:function(f){return new Ks(f,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return g=Ks.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(Fs(_)?Promise.resolve(_.databases()).then(function(T){return T.map(function(A){return A.name}).filter(function(A){return A!==_r})}):Vo(_,g).toCollection().primaryKeys()).then(f)}catch{return $t(new He.MissingAPI)}var g,_},defineClass:function(){return function(f){p(this,f)}},ignoreTransaction:function(f){return qe.trans?Rr(qe.transless,f):f()},vip:Yi,async:function(f){return function(){try{var g=Mr(f.apply(this,arguments));return g&&typeof g.then=="function"?g:Ue.resolve(g)}catch(_){return $t(_)}}},spawn:function(f,g,_){try{var T=Mr(f.apply(_,g||[]));return T&&typeof T.then=="function"?T:Ue.resolve(T)}catch(A){return $t(A)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(f,g){return g=Ue.resolve(typeof f=="function"?Ks.ignoreTransaction(f):f).timeout(g||6e4),qe.trans?qe.trans.waitFor(g):g},Promise:Ue,debug:{get:function(){return Un},set:function(f){ku(f)}},derive:le,extend:p,props:x,override:ae,Events:vi,on:An,liveQuery:ff,extendObservabilitySet:Vr,getByKeyPath:Ve,setByKeyPath:L,delByKeyPath:function(f,g){typeof g=="string"?L(f,g,void 0):"length"in g&&[].map.call(g,function(_){L(f,_,void 0)})},shallowClone:P,deepClone:k,getObjectDiff:w,cmp:ht,asap:xe,minKey:-1/0,addons:[],connections:vr,errnames:cn,dependencies:Ma,cache:Si,semVer:"4.0.11",version:"4.0.11".split(".").map(function(f){return parseInt(f)}).reduce(function(f,g,_){return f+g/Math.pow(10,2*_)})})),Ks.maxKey=Hi(Ks.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(An(ds,function(f){gs||(f=new CustomEvent(Fi,{detail:f}),gs=!0,dispatchEvent(f),gs=!1)}),addEventListener(Fi,function(f){f=f.detail,gs||rc(f)}));var ka,gs=!1,ur=function(){};return typeof BroadcastChannel<"u"&&((ur=function(){(ka=new BroadcastChannel(Fi)).onmessage=function(f){return f.data&&rc(f.data)}})(),typeof ka.unref=="function"&&ka.unref(),An(ds,function(f){gs||ka.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Ri.disableBfCache&&f.persisted){Un&&console.debug("Dexie: handling persisted pagehide"),ka!=null&&ka.close();for(var g=0,_=vr;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Ri.disableBfCache&&f.persisted&&(Un&&console.debug("Dexie: handling persisted pageshow"),ur(),rc({all:new yn(-1/0,[[]])}))})),Ue.rejectionMapper=function(f,g){return!f||f instanceof Ie||f instanceof TypeError||f instanceof SyntaxError||!f.name||!ki[f.name]?f:(g=new ki[f.name](g||f.message,f),"stack"in f&&z(g,"stack",{get:function(){return this.inner.stack}}),g)},ku(Un),r(Ri,Object.freeze({__proto__:null,Dexie:Ri,liveQuery:ff,Entity:Us,cmp:ht,PropModification:It,replacePrefix:function(f,g){return new It({replacePrefix:[f,g]})},add:function(f){return new It({add:f})},remove:function(f){return new It({remove:f})},default:Ri,RangeSet:yn,mergeRanges:Jr,rangesOverlap:Mo}),{default:Ri}),Ri})}(Pd)),Pd.exports}var AV=SV();const Ry=Vw(AV),QT=Symbol.for("Dexie"),cm=globalThis[QT]||(globalThis[QT]=Ry);if(Ry.semVer!==cm.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ry.semVer} and ${cm.semVer}`);const{liveQuery:Ck,mergeRanges:Dk,rangesOverlap:Ok,RangeSet:Pk,cmp:Nk,Entity:Vk,PropModification:Mk,replacePrefix:kk,add:Lk,remove:Uk}=cm;class IV extends cm{constructor(){super("FoodTrackerDB");qb(this,"foods");this.version(1).stores({foods:"date"})}}const QA=new IV;async function RV(i,e){await QA.foods.put({date:i,selectedFoods:e})}async function xV(){return await QA.foods.toArray()}var eu={},Yc={},tu={},qg={},$c={},YT;function km(){return YT||(YT=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.settings=void 0,$c.settings={debug:!1,gravity:800,zIndex:99999,respectReducedMotion:!0}),$c}var nu={},Xc={},$T;function qv(){if($T)return Xc;$T=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.overrideDefaults=void 0;function i(e,t){return Object.assign({},e,t)}return Xc.overrideDefaults=i,Xc}var Wc={},ru={},Jc={},XT;function CV(){if(XT)return Jc;XT=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Circle=void 0;var i=function(){function e(t,r,a){a===void 0&&(a=0),this.x=t,this.y=r,this.radius=a}return e.zero=new e(0,0),e}();return Jc.Circle=i,Jc}var Zc={},Fg={},WT;function Nu(){return WT||(WT=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.approximately=i.clamp=i.invlerp=i.slerp=i.lerp=i.epsilon=i.rad2deg=i.deg2rad=void 0,i.deg2rad=Math.PI/180,i.rad2deg=180/Math.PI,i.epsilon=1e-6;function e(c,d,p){return(1-p)*c+p*d}i.lerp=e;function t(c,d,p){return e(c,d,(1-Math.cos(p*Math.PI))/2)}i.slerp=t;function r(c,d,p){return(p-c)/(d-c)}i.invlerp=r;function a(c,d,p){return Math.min(p,Math.max(d,c))}i.clamp=a;function u(c,d){return Math.abs(c-d)<i.epsilon}i.approximately=u}(Fg)),Fg}var JT;function DV(){if(JT)return Zc;JT=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.Color=void 0;var i=Nu(),e=function(){function t(r,a,u){this.values=new Float32Array(3),this.rgb=[r,a,u]}return Object.defineProperty(t.prototype,"r",{get:function(){return this.values[0]},set:function(r){this.values[0]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this.values[1]},set:function(r){this.values[1]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.values[2]},set:function(r){this.values[2]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return[this.r,this.g,this.b]},set:function(r){this.r=r[0],this.g=r[1],this.b=r[2]},enumerable:!1,configurable:!0}),t.prototype.mix=function(r,a){return a===void 0&&(a=.5),new t(i.lerp(this.r,r.r,a),i.lerp(this.g,r.g,a),i.lerp(this.b,r.b,a))},t.prototype.toHex=function(){var r=function(a){return a.toString(16).padStart(2,"0")};return"#"+r(this.r)+r(this.g)+r(this.b)},t.prototype.toString=function(){return"rgb("+this.values.join(", ")+")"},t.fromHex=function(r){return r.startsWith("#")&&(r=r.substr(1)),new t(parseInt(r.substr(0,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(4,2),16))},t.fromHsl=function(r,a,u){if(r/=360,a/=100,u/=100,a===0)return new t(u,u,u);var c=function(E,I,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?E+(I-E)*6*x:x<.5?I:x<.6666666666666666?E+(I-E)*(.6666666666666666-x)*6:E},d=function(E){return Math.min(255,256*E)},p=u<.5?u*(1+a):u+a-u*a,v=2*u-p;return new t(d(c(v,p,r+1/3)),d(c(v,p,r)),d(c(v,p,r-1/3)))},t.white=new t(255,255,255),t.black=new t(0,0,0),t}();return Zc.Color=e,Zc}var ia={},eh={},ZT;function YA(){if(ZT)return eh;ZT=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.Spline=void 0;var i=Nu(),e=function(){function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(r.length===0)throw new Error("Splines require at least one key.");if(Array.isArray(r[0]))throw new Error("You are trying to pass an array to the spline constructor, which is not supported. Try to spread the array into the constructor instead.");this.keys=r}return t.prototype.evaluate=function(r){if(this.keys.length===0)throw new Error("Attempt to evaluate a spline with no keys.");if(this.keys.length===1)return this.keys[0].value;var a=this.keys.sort(function(v,E){return v.time-E.time}),u=a.findIndex(function(v){return v.time>r});if(u===0)return a[0].value;if(u===-1)return a[a.length-1].value;var c=a[u-1],d=a[u],p=i.invlerp(c.time,d.time,r);return this.interpolate(c.value,d.value,p)},t}();return eh.Spline=e,eh}var ew;function OV(){if(ew)return ia;ew=1;var i=ia&&ia.__extends||function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function d(){this.constructor=u}u.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=ia&&ia.__spreadArray||function(a,u){for(var c=0,d=u.length,p=a.length;c<d;c++,p++)a[p]=u[c];return a};Object.defineProperty(ia,"__esModule",{value:!0}),ia.Gradient=void 0;var t=YA(),r=function(a){i(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.interpolate=function(c,d,p){return c.mix(d,p)},u.solid=function(c){return new u({value:c,time:.5})},u.simple=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var p=1/(c.length-1);return new(u.bind.apply(u,e([void 0],c.map(function(v,E){return{value:v,time:E*p}}))))},u}(t.Spline);return ia.Gradient=r,ia}var iu={},tw;function PV(){if(tw)return iu;tw=1;var i=iu&&iu.__extends||function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function d(){this.constructor=u}u.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(iu,"__esModule",{value:!0}),iu.NumericSpline=void 0;var e=Nu(),t=YA(),r=function(a){i(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.interpolate=function(c,d,p){return e.slerp(c,d,p)},u}(t.Spline);return iu.NumericSpline=r,iu}var th={},nw;function NV(){if(nw)return th;nw=1,Object.defineProperty(th,"__esModule",{value:!0}),th.Rect=void 0;var i=function(){function e(t,r,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.x=t,this.y=r,this.width=a,this.height=u}return e.fromScreen=function(){return new e(window.scrollX,window.scrollY,window.innerWidth,window.innerHeight)},e.fromElement=function(t){var r=t.getBoundingClientRect();return new e(window.scrollX+r.x,window.scrollY+r.y,r.width,r.height)},e.zero=new e(0,0),e}();return th.Rect=i,th}var su={},rw;function Fv(){if(rw)return su;rw=1;var i=su&&su.__spreadArray||function(r,a){for(var u=0,c=a.length,d=r.length;u<c;u++,d++)r[d]=a[u];return r};Object.defineProperty(su,"__esModule",{value:!0}),su.Vector=void 0;var e=Nu(),t=function(){function r(a,u,c){a===void 0&&(a=0),u===void 0&&(u=0),c===void 0&&(c=0),this.values=new Float32Array(3),this.xyz=[a,u,c]}return Object.defineProperty(r.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"z",{get:function(){return this.values[2]},set:function(a){this.values[2]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"xyz",{get:function(){return[this.x,this.y,this.z]},set:function(a){this.values[0]=a[0],this.values[1]=a[1],this.values[2]=a[2]},enumerable:!1,configurable:!0}),r.prototype.magnitude=function(){return Math.sqrt(this.sqrMagnitude())},r.prototype.sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},r.prototype.add=function(a){return new r(this.x+a.x,this.y+a.y,this.z+a.z)},r.prototype.subtract=function(a){return new r(this.x-a.x,this.y-a.y,this.z-a.z)},r.prototype.scale=function(a){return typeof a=="number"?new r(this.x*a,this.y*a,this.z*a):new r(this.x*a.x,this.y*a.y,this.z*a.z)},r.prototype.normalized=function(){var a=this.magnitude();return a!==0?this.scale(1/a):new(r.bind.apply(r,i([void 0],this.xyz)))},r.prototype.angle=function(a){return e.rad2deg*Math.acos((this.x*a.x+this.y*a.y+this.z*a.z)/(this.magnitude()*a.magnitude()))},r.prototype.cross=function(a){return new r(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},r.prototype.dot=function(a){return this.magnitude()*a.magnitude()*Math.cos(e.deg2rad*this.angle(a))},r.prototype.toString=function(){return"Vector("+this.values.join(", ")+")"},r.from2dAngle=function(a){return new r(Math.cos(a*e.deg2rad),Math.sin(a*e.deg2rad))},r.zero=new r(0,0,0),r.one=new r(1,1,1),r.right=new r(1,0,0),r.up=new r(0,1,0),r.forward=new r(0,0,1),r}();return su.Vector=t,su}var iw;function ya(){return iw||(iw=1,function(i){var e=ru&&ru.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=ru&&ru.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(CV(),i),t(DV(),i),t(OV(),i),t(PV(),i),t(NV(),i),t(Fv(),i)}(ru)),ru}var sw;function VV(){if(sw)return Wc;sw=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.rotationToNormal=void 0;var i=ya(),e=Nu();function t(r){var a=r.x*e.deg2rad,u=r.y*e.deg2rad,c=new i.Vector(Math.cos(u),0,Math.sin(u)),d=new i.Vector(0,Math.cos(a),Math.sin(a));return c.cross(d)}return Wc.rotationToNormal=t,Wc}var nh={},aw;function $A(){return aw||(aw=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.despawningRules=void 0,nh.despawningRules={lifetime:function(i){return i.lifetime<=0},bounds:function(i){var e=document.documentElement.scrollHeight;return i.location.y>e}}),nh}var rh={},ow;function MV(){if(ow)return rh;ow=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.Lazy=void 0;var i=function(){function e(t,r){r===void 0&&(r=e.defaultExists),this.factory=t,this.exists=r}return Object.defineProperty(e.prototype,"current",{get:function(){return this.exists(this.value)||(this.value=this.factory()),this.value},enumerable:!1,configurable:!0}),e.defaultExists=function(t){return typeof t<"u"},e}();return rh.Lazy=i,rh}var uw;function Gl(){return uw||(uw=1,function(i){var e=nu&&nu.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=nu&&nu.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(qv(),i),t(VV(),i),t($A(),i),t(MV(),i)}(nu)),nu}var lw;function XA(){return lw||(lw=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.particleContainer=i.debugContainer=i.rootContainer=void 0;var e=km(),t=Gl(),r="party-js-";function a(c){return c&&c.isConnected}function u(c,d,p){var v=document.createElement("div");return v.id=r+c,Object.assign(v.style,d),p.appendChild(v)}i.rootContainer=new t.Lazy(function(){return u("container",{position:"fixed",left:"0",top:"0",height:"100vh",width:"100vw",pointerEvents:"none",userSelect:"none",zIndex:e.settings.zIndex.toString()},document.body)},a),i.debugContainer=new t.Lazy(function(){return u("debug",{position:"absolute",top:"0",left:"0",margin:"0.5em",padding:"0.5em 1em",border:"2px solid rgb(0, 0, 0, 0.2)",background:"rgb(0, 0, 0, 0.1)",color:"#555",fontFamily:"monospace"},i.rootContainer.current)},a),i.particleContainer=new t.Lazy(function(){return u("particles",{width:"100%",height:"100%",overflow:"hidden",perspective:"1200px"},i.rootContainer.current)},a)}(qg)),qg}var cw;function kV(){if(cw)return tu;cw=1;var i=tu&&tu.__spreadArray||function(a,u){for(var c=0,d=u.length,p=a.length;c<d;c++,p++)a[p]=u[c];return a};Object.defineProperty(tu,"__esModule",{value:!0}),tu.Debug=void 0;var e=XA(),t=km(),r=function(){function a(u){this.scene=u,this.refreshRate=8,this.refreshTimer=1/this.refreshRate}return a.prototype.tick=function(u){var c=e.debugContainer.current,d=t.settings.debug?"block":"none";c.style.display!==d&&(c.style.display=d),t.settings.debug&&(this.refreshTimer+=u,this.refreshTimer>1/this.refreshRate&&(this.refreshTimer=0,c.innerHTML=this.getDebugInformation(u).join("<br>")))},a.prototype.getDebugInformation=function(u){var c=this.scene.emitters.length,d=this.scene.emitters.reduce(function(E,I){return E+I.particles.length},0),p=["<b>party.js Debug</b>","--------------","FPS: "+Math.round(1/u),"Emitters: "+c,"Particles: "+d],v=this.scene.emitters.map(function(E){return[": "+(E.currentLoop+1)+"/"+(E.options.loops>=0?E.options.loops:""),"p: "+E.particles.length,E.isExpired?"<i>expired</i>":"t: "+E.durationTimer.toFixed(3)+"s"].join(", ")});return p.push.apply(p,i(["--------------"],v)),p},a}();return tu.Debug=r,tu}var ih={},wr={},si={},hw;function sf(){if(hw)return si;hw=1,Object.defineProperty(si,"__esModule",{value:!0}),si.randomInsideCircle=si.randomInsideRect=si.randomUnitVector=si.pick=si.randomRange=void 0;var i=ya(),e=Nu();function t(d,p){return d===void 0&&(d=0),p===void 0&&(p=1),e.lerp(d,p,Math.random())}si.randomRange=t;function r(d){return d.length===0?void 0:d[Math.floor(Math.random()*d.length)]}si.pick=r;function a(){var d=t(0,2*Math.PI),p=t(-1,1);return new i.Vector(Math.sqrt(1-p*p)*Math.cos(d),Math.sqrt(1-p*p)*Math.sin(d),p)}si.randomUnitVector=a;function u(d){return new i.Vector(d.x+t(0,d.width),d.y+t(0,d.height))}si.randomInsideRect=u;function c(d){var p=t(0,2*Math.PI),v=t(0,d.radius);return new i.Vector(d.x+Math.cos(p)*v,d.y+Math.sin(p)*v)}return si.randomInsideCircle=c,si}var fw;function af(){if(fw)return wr;fw=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.gradientSample=wr.splineSample=wr.skewRelative=wr.skew=wr.range=wr.evaluateVariation=void 0;var i=sf();function e(d){return Array.isArray(d)?i.pick(d):typeof d=="function"?d():d}wr.evaluateVariation=e;function t(d,p){return function(){return i.randomRange(d,p)}}wr.range=t;function r(d,p){return function(){return d+i.randomRange(-p,p)}}wr.skew=r;function a(d,p){return function(){return d*(1+i.randomRange(-p,p))}}wr.skewRelative=a;function u(d){return function(){return d.evaluate(Math.random())}}wr.splineSample=u;function c(d){return u(d)}return wr.gradientSample=c,wr}var au={},sh={},dw;function LV(){if(dw)return sh;dw=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.getDefaultEmitterOptions=void 0;var i=$A();function e(){return{duration:5,loops:1,useGravity:!0,maxParticles:300,despawningRules:[i.despawningRules.lifetime,i.despawningRules.bounds],modules:[]}}return sh.getDefaultEmitterOptions=e,sh}var ah={},ai={},mw;function Lm(){if(mw)return ai;mw=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.circleSource=ai.rectSource=ai.mouseSource=ai.elementSource=ai.dynamicSource=void 0;var i=ya(),e=sf();function t(d){if(d instanceof HTMLElement)return r(d);if(d instanceof i.Circle)return c(d);if(d instanceof i.Rect)return u(d);if(d instanceof MouseEvent)return a(d);throw new Error("Cannot infer the source type of '"+d+"'.")}ai.dynamicSource=t;function r(d){return function(){return e.randomInsideRect(i.Rect.fromElement(d))}}ai.elementSource=r;function a(d){return function(){return new i.Vector(window.scrollX+d.clientX,window.scrollY+d.clientY)}}ai.mouseSource=a;function u(d){return function(){return e.randomInsideRect(d)}}ai.rectSource=u;function c(d){return function(){return e.randomInsideCircle(d)}}return ai.circleSource=c,ai}var pw;function UV(){if(pw)return ah;pw=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.getDefaultEmissionOptions=void 0;var i=ya(),e=Lm();function t(){return{rate:10,angle:0,bursts:[],sourceSampler:e.rectSource(i.Rect.zero),initialLifetime:5,initialSpeed:5,initialSize:1,initialRotation:i.Vector.zero,initialColor:i.Color.white}}return ah.getDefaultEmissionOptions=t,ah}var oh={},gw;function BV(){if(gw)return oh;gw=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.getDefaultRendererOptions=void 0;function i(){return{shapeFactory:"square",applyColor:e,applyOpacity:t,applyLighting:r,applyTransform:a}}oh.getDefaultRendererOptions=i;function e(u,c){var d=u.toHex();switch(c.nodeName.toLowerCase()){case"div":c.style.background=d;break;case"svg":c.style.fill=c.style.color=d;break;default:c.style.color=d;break}}function t(u,c){c.style.opacity=u.toString()}function r(u,c){c.style.filter="brightness("+(.5+Math.abs(u))+")"}function a(u,c){c.style.transform="translateX("+(u.location.x-window.scrollX).toFixed(3)+"px) "+("translateY("+(u.location.y-window.scrollY).toFixed(3)+"px) ")+("translateZ("+u.location.z.toFixed(3)+"px) ")+("rotateX("+u.rotation.x.toFixed(3)+"deg) ")+("rotateY("+u.rotation.y.toFixed(3)+"deg) ")+("rotateZ("+u.rotation.z.toFixed(3)+"deg) ")+("scale("+u.size.toFixed(3)+")")}return oh}var yw;function zV(){return yw||(yw=1,function(i){var e=au&&au.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=au&&au.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(LV(),i),t(UV(),i),t(BV(),i)}(au)),au}var uh={},vw;function WA(){if(vw)return uh;vw=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.Particle=void 0;var i=ya(),e=qv(),t=function(){function r(a){var u=e.overrideDefaults({lifetime:0,size:1,location:i.Vector.zero,rotation:i.Vector.zero,velocity:i.Vector.zero,color:i.Color.white,opacity:1},a);this.id=Symbol(),this.size=this.initialSize=u.size,this.lifetime=this.initialLifetime=u.lifetime,this.rotation=this.initialRotation=u.rotation,this.location=u.location,this.velocity=u.velocity,this.color=u.color,this.opacity=u.opacity}return r}();return uh.Particle=t,uh}var _w;function JA(){if(_w)return ih;_w=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.Emitter=void 0;var i=Fv(),e=km(),t=af(),r=qv(),a=zV(),u=WA(),c=function(){function d(p){this.particles=[],this.currentLoop=0,this.durationTimer=0,this.emissionTimer=0,this.attemptedBurstIndices=[],this.options=r.overrideDefaults(a.getDefaultEmitterOptions(),p==null?void 0:p.emitterOptions),this.emission=r.overrideDefaults(a.getDefaultEmissionOptions(),p==null?void 0:p.emissionOptions),this.renderer=r.overrideDefaults(a.getDefaultRendererOptions(),p==null?void 0:p.rendererOptions)}return Object.defineProperty(d.prototype,"isExpired",{get:function(){return this.options.loops>=0&&this.currentLoop>=this.options.loops},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"canRemove",{get:function(){return this.particles.length===0},enumerable:!1,configurable:!0}),d.prototype.clearParticles=function(){return this.particles.splice(0).length},d.prototype.tick=function(p){if(!this.isExpired&&(this.durationTimer+=p,this.durationTimer>=this.options.duration&&(this.currentLoop++,this.durationTimer=0,this.attemptedBurstIndices=[]),!this.isExpired)){for(var v=0,E=0,I=this.emission.bursts;E<I.length;E++){var x=I[E];if(x.time<=this.durationTimer&&!this.attemptedBurstIndices.includes(v)){for(var B=t.evaluateVariation(x.count),z=0;z<B;z++)this.emitParticle();this.attemptedBurstIndices.push(v)}v++}this.emissionTimer+=p;for(var le=1/this.emission.rate;this.emissionTimer>le;)this.emissionTimer-=le,this.emitParticle()}for(var ie=function(de){var ae=pe.particles[de];pe.tickParticle(ae,p),pe.options.despawningRules.some(function(Re){return Re(ae)})&&pe.particles.splice(de,1)},pe=this,z=this.particles.length-1;z>=0;z--)ie(z)},d.prototype.tickParticle=function(p,v){p.lifetime-=v,this.options.useGravity&&(p.velocity=p.velocity.add(i.Vector.up.scale(e.settings.gravity*v))),p.location=p.location.add(p.velocity.scale(v));for(var E=0,I=this.options.modules;E<I.length;E++){var x=I[E];x(p)}},d.prototype.emitParticle=function(){var p=new u.Particle({location:this.emission.sourceSampler(),lifetime:t.evaluateVariation(this.emission.initialLifetime),velocity:i.Vector.from2dAngle(t.evaluateVariation(this.emission.angle)).scale(t.evaluateVariation(this.emission.initialSpeed)),size:t.evaluateVariation(this.emission.initialSize),rotation:t.evaluateVariation(this.emission.initialRotation),color:t.evaluateVariation(this.emission.initialColor)});return this.particles.push(p),this.particles.length>this.options.maxParticles&&this.particles.shift(),p},d}();return ih.Emitter=c,ih}var lh={},Kg={},bw;function ZA(){return bw||(bw=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.resolveShapeFactory=i.resolvableShapes=void 0;var e=af();i.resolvableShapes={square:'<div style="height: 10px; width: 10px;"></div>',rectangle:'<div style="height: 6px; width: 10px;"></div>',circle:'<svg viewBox="0 0 2 2" width="10" height="10"><circle cx="1" cy="1" r="1" fill="currentColor"/></svg>',roundedSquare:'<div style="height: 10px; width: 10px; border-radius: 3px;"></div>',roundedRectangle:'<div style="height: 6px; width: 10px; border-radius: 3px;"></div>',star:'<svg viewBox="0 0 512 512" width="15" height="15"><polygon fill="currentColor" points="512,197.816 325.961,185.585 255.898,9.569 185.835,185.585 0,197.816 142.534,318.842 95.762,502.431 255.898,401.21 416.035,502.431 369.263,318.842"/></svg>'};function t(r){var a=e.evaluateVariation(r);if(typeof a=="string"){var u=i.resolvableShapes[a];if(!u)throw new Error("Failed to resolve shape key '"+a+"'. Did you forget to add it to the 'resolvableShapes' lookup?");var c=document.createElement("div");return c.innerHTML=u,c.firstElementChild}return a}i.resolveShapeFactory=t}(Kg)),Kg}var Ew;function jV(){if(Ew)return lh;Ew=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.Renderer=void 0;var i=of(),e=Fv(),t=XA(),r=ZA(),a=Gl(),u=function(){function c(){this.elements=new Map,this.light=new e.Vector(0,0,1),this.enabled=!0,this.enabled=!i.settings.respectReducedMotion||!window.matchMedia("(prefers-reduced-motion)").matches}return c.prototype.begin=function(){this.renderedParticles=[]},c.prototype.end=function(){for(var d=this.elements.keys(),p=d.next();!p.done;){var v=p.value;this.renderedParticles.includes(v)||(this.elements.get(v).remove(),this.elements.delete(v)),p=d.next()}return this.renderedParticles.length},c.prototype.renderParticle=function(d,p){if(this.enabled){var v=p.renderer,E=this.elements.has(d.id)?this.elements.get(d.id):this.createParticleElement(d,v);if(v.applyColor&&v.applyColor(d.color,E),v.applyOpacity&&v.applyOpacity(d.opacity,E),v.applyLighting){var I=a.rotationToNormal(d.rotation),x=I.dot(this.light);v.applyLighting(x,E)}v.applyTransform&&v.applyTransform(d,E),this.renderedParticles.push(d.id)}},c.prototype.createParticleElement=function(d,p){var v=r.resolveShapeFactory(p.shapeFactory),E=v.cloneNode(!0);return E.style.position="absolute",this.elements.set(d.id,t.particleContainer.current.appendChild(E)),E},c}();return lh.Renderer=u,lh}var Tw;function qV(){if(Tw)return Yc;Tw=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.Scene=void 0;var i=kV(),e=JA(),t=jV(),r=function(){function a(){this.emitters=[],this.debug=new i.Debug(this),this.renderer=new t.Renderer,this.scheduledTickId=void 0,this.lastTickTimestamp=performance.now(),this.tick=this.tick.bind(this),this.scheduleTick()}return a.prototype.createEmitter=function(u){var c=new e.Emitter(u);return this.emitters.push(c),c},a.prototype.clearEmitters=function(){return this.emitters.splice(0).length},a.prototype.clearParticles=function(){return this.emitters.reduce(function(u,c){return u+c.clearParticles()},0)},a.prototype.scheduleTick=function(){this.scheduledTickId=window.requestAnimationFrame(this.tick)},a.prototype.cancelTick=function(){window.cancelAnimationFrame(this.scheduledTickId)},a.prototype.tick=function(u){var c=(u-this.lastTickTimestamp)/1e3;try{for(var d=0;d<this.emitters.length;d++){var p=this.emitters[d];p.tick(c),p.isExpired&&p.canRemove&&this.emitters.splice(d--,1)}}catch(z){console.error(`An error occurred while updating the scene's emitters:
"`+z+'"')}try{this.renderer.begin();for(var v=0,E=this.emitters;v<E.length;v++)for(var p=E[v],I=0,x=p.particles;I<x.length;I++){var B=x[I];this.renderer.renderParticle(B,p)}this.renderer.end()}catch(z){console.error(`An error occurred while rendering the scene's particles:
"`+z+'"')}this.debug.tick(c),this.lastTickTimestamp=u,this.scheduleTick()},a}();return Yc.Scene=r,Yc}var ou={},ch={},hh={},ww;function Kv(){if(ww)return hh;ww=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.ModuleBuilder=void 0;var i=ya(),e=function(){function u(){this.factor="lifetime",this.isRelative=!1}return u.prototype.drive=function(c){return this.driverKey=c,this},u.prototype.through=function(c){return this.factor=c,this},u.prototype.by=function(c){return this.driverValue=c,this},u.prototype.relative=function(c){return c===void 0&&(c=!0),this.isRelative=c,this},u.prototype.build=function(){var c=this;if(typeof this.driverKey>"u")throw new Error("No driving key was provided in the module builder. Did you forget a '.drive()' call?");if(typeof this.driverValue>"u")throw new Error("No driving value was provided in the module builder. Did you forget a '.through()' call?");return function(d){a(d,c.driverKey,t(c.driverValue,r(c.factor,d),d),c.isRelative)}},u}();hh.ModuleBuilder=e;function t(u,c,d){return typeof u=="object"&&"evaluate"in u?u.evaluate(c):typeof u=="function"?u(c,d):u}function r(u,c){switch(u){case"lifetime":return c.initialLifetime-c.lifetime;case"relativeLifetime":return(c.initialLifetime-c.lifetime)/c.initialLifetime;case"size":return c.size;default:throw new Error("Invalid driving factor '"+u+"'.")}}function a(u,c,d,p){if(p===void 0&&(p=!1),!p)u[c]=d;else{var v=u["initial"+c[0].toUpperCase()+c.substr(1)];if(typeof v>"u")throw new Error("Unable to use relative chaining with key '"+c+"'; no initial value exists.");if(d instanceof i.Vector)a(u,c,v.add(d));else if(typeof d=="number")a(u,c,v*d);else throw new Error("Unable to use relative chaining with particle key '"+c+"'; no relative operation for '"+d+"' could be inferred.")}}return hh}var Sw;function FV(){if(Sw)return ch;Sw=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.confetti=void 0;var i=of(),e=ya(),t=Kv(),r=sf(),a=Lm(),u=af(),c=Gl();function d(p,v){var E=c.overrideDefaults({count:u.range(20,40),spread:u.range(35,45),speed:u.range(300,600),size:u.skew(1,.2),rotation:function(){return r.randomUnitVector().scale(180)},color:function(){return e.Color.fromHsl(r.randomRange(0,360),100,70)},modules:[new t.ModuleBuilder().drive("size").by(function(x){return Math.min(1,x*3)}).relative().build(),new t.ModuleBuilder().drive("rotation").by(function(x){return new e.Vector(140,200,260).scale(x)}).relative().build()],shapes:["square","circle"]},v),I=i.scene.current.createEmitter({emitterOptions:{loops:1,duration:8,modules:E.modules},emissionOptions:{rate:0,bursts:[{time:0,count:E.count}],sourceSampler:a.dynamicSource(p),angle:u.skew(-90,u.evaluateVariation(E.spread)),initialLifetime:8,initialSpeed:E.speed,initialSize:E.size,initialRotation:E.rotation,initialColor:E.color},rendererOptions:{shapeFactory:E.shapes}});return I}return ch.confetti=d,ch}var fh={},Aw;function KV(){if(Aw)return fh;Aw=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.sparkles=void 0;var i=of(),e=ya(),t=Kv(),r=sf(),a=Lm(),u=af(),c=Gl();function d(p,v){var E=c.overrideDefaults({lifetime:u.range(1,2),count:u.range(10,20),speed:u.range(100,200),size:u.range(.8,1.8),rotation:function(){return new e.Vector(0,0,r.randomRange(0,360))},color:function(){return e.Color.fromHsl(50,100,r.randomRange(55,85))},modules:[new t.ModuleBuilder().drive("rotation").by(function(x){return new e.Vector(0,0,200).scale(x)}).relative().build(),new t.ModuleBuilder().drive("size").by(new e.NumericSpline({time:0,value:0},{time:.3,value:1},{time:.7,value:1},{time:1,value:0})).through("relativeLifetime").relative().build(),new t.ModuleBuilder().drive("opacity").by(new e.NumericSpline({time:0,value:1},{time:.5,value:1},{time:1,value:0})).through("relativeLifetime").build()],shapes:"star"},v),I=i.scene.current.createEmitter({emitterOptions:{loops:1,duration:3,useGravity:!1,modules:E.modules},emissionOptions:{rate:0,bursts:[{time:0,count:E.count}],sourceSampler:a.dynamicSource(p),angle:u.range(0,360),initialLifetime:E.lifetime,initialSpeed:E.speed,initialSize:E.size,initialRotation:E.rotation,initialColor:E.color},rendererOptions:{applyLighting:void 0,shapeFactory:E.shapes}});return I}return fh.sparkles=d,fh}var Iw;function HV(){return Iw||(Iw=1,function(i){var e=ou&&ou.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=ou&&ou.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(FV(),i),t(KV(),i)}(ou)),ou}var Rw;function of(){return Rw||(Rw=1,function(i){var e=eu&&eu.__createBinding||(Object.create?function(v,E,I,x){x===void 0&&(x=I),Object.defineProperty(v,x,{enumerable:!0,get:function(){return E[I]}})}:function(v,E,I,x){x===void 0&&(x=I),v[x]=E[I]}),t=eu&&eu.__exportStar||function(v,E){for(var I in v)I!=="default"&&!Object.prototype.hasOwnProperty.call(E,I)&&e(E,v,I)};Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.forceInit=i.util=i.math=i.random=i.sources=i.variation=i.Emitter=i.Particle=i.settings=i.scene=void 0;var r=qV(),a=Gl();t(ya(),i),t(HV(),i),t(ZA(),i),t(Kv(),i),i.scene=new a.Lazy(function(){if(typeof document>"u"||typeof window>"u")throw new Error("It seems like you are trying to run party.js in a non-browser-like environment, which is not supported.");return new r.Scene});var u=km();Object.defineProperty(i,"settings",{enumerable:!0,get:function(){return u.settings}});var c=WA();Object.defineProperty(i,"Particle",{enumerable:!0,get:function(){return c.Particle}});var d=JA();Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return d.Emitter}}),i.variation=af(),i.sources=Lm(),i.random=sf(),i.math=Nu(),i.util=Gl();function p(){i.scene.current}i.forceInit=p,i.default=of()}(eu)),eu}var GV=of();const QV=Vw(GV);function YV(){const[i,e]=ge.useState(""),[t,r]=ge.useState({}),[a,u]=ge.useState(new Date().toISOString().split("T")[0]),[c,d]=ge.useState({calories:3e3,fat:75,protein:150,carbs:431}),[p,v]=ge.useState(null),[E,I]=ge.useState(!1),x=(t[a]||[]).reduce((de,ae)=>({calories:de.calories+ae.food.calories*ae.quantity,fat:de.fat+ae.food.fat*ae.quantity,protein:de.protein+ae.food.protein*ae.quantity,carbs:de.carbs+ae.food.carbs*ae.quantity}),{calories:0,fat:0,protein:0,carbs:0});ge.useEffect(()=>{const de=localStorage.getItem("nutritionGoals");de&&d(JSON.parse(de))},[]),ge.useEffect(()=>{localStorage.setItem("nutritionGoals",JSON.stringify(c))},[c]),ge.useEffect(()=>{xV().then(de=>{const ae=de.reduce((Re,{date:xe,selectedFoods:Ve})=>(Re[xe]=Ve,Re),{});r({...ae,[a]:ae[a]||[]})}).catch(de=>{console.error("Error loading all foods:",de),v("Failed to load food data")})},[a]),ge.useEffect(()=>{if(RV(a,t[a]||[]).catch(de=>{console.error("Error saving foods:",de),v("Failed to save food data")}),x.calories>c.calories&&!E){const de=document.querySelector("#confetti");de&&(QV.confetti(de),I(!0))}x.calories<=c.calories&&E&&I(!1)},[t,a,x.calories,c.calories,E]);const B=yV.filter(de=>de.name.toLowerCase().includes(i.toLowerCase())),z=de=>{r(ae=>{const Re=ae[a]||[],xe=Re.findIndex(L=>L.food.id===de.id);let Ve;return xe>=0?(Ve=[...Re],Ve[xe]={...Ve[xe],quantity:Ve[xe].quantity+1}):Ve=[...Re,{food:de,quantity:1}],{...ae,[a]:Ve}}),e(""),v(`${de.name} lagt til`)},le=de=>{r(ae=>({...ae,[a]:ae[a].filter((Re,xe)=>xe!==de)}))},ie=(de,ae)=>{r(Re=>{const Ve=[...Re[a]||[]],L=Ve[de].quantity+ae;return L<=0?{...Re,[a]:Ve.filter((P,V)=>V!==de)}:(Ve[de]={...Ve[de],quantity:L},{...Re,[a]:Ve})}),ae>0&&v(`${t[a][de].food.name} lagt til`)},pe=de=>{if(de===0){u(new Date().toISOString().split("T")[0]),t[new Date().toISOString().split("T")[0]]||r(xe=>({...xe,[Re]:[]})),I(!1);return}const ae=new Date(a);ae.setDate(ae.getDate()+de);const Re=ae.toISOString().split("T")[0];u(Re),t[Re]||r(xe=>({...xe,[Re]:[]})),I(!1)};return Ee.jsxs("div",{className:"flex-1 p-4 sm:p-6 max-w-7xl mx-auto",children:[Ee.jsx(bV,{totals:x,goals:c}),Ee.jsx(_V,{currentDate:a,changeDate:pe}),Ee.jsx(vV,{searchTerm:i,filteredFoods:B,addFood:z,setSearchTerm:e}),Ee.jsx(EV,{selectedFoods:t,currentDate:a,removeFood:le,updateQuantity:ie}),p&&Ee.jsx(gV,{message:p,onClose:()=>v(null)}),Ee.jsx(TV,{})]})}var dh={},xw;function $V(){if(xw)return dh;xw=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.parse=c,dh.serialize=v;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function c(x,B){const z=new u,le=x.length;if(le<2)return z;const ie=(B==null?void 0:B.decode)||E;let pe=0;do{const de=x.indexOf("=",pe);if(de===-1)break;const ae=x.indexOf(";",pe),Re=ae===-1?le:ae;if(de>Re){pe=x.lastIndexOf(";",de-1)+1;continue}const xe=d(x,pe,de),Ve=p(x,de,xe),L=x.slice(xe,Ve);if(z[L]===void 0){let P=d(x,de+1,Re),V=p(x,Re,P);const q=ie(x.slice(P,V));z[L]=q}pe=Re+1}while(pe<le);return z}function d(x,B,z){do{const le=x.charCodeAt(B);if(le!==32&&le!==9)return B}while(++B<z);return z}function p(x,B,z){for(;B>z;){const le=x.charCodeAt(--B);if(le!==32&&le!==9)return B+1}return z}function v(x,B,z){const le=(z==null?void 0:z.encode)||encodeURIComponent;if(!i.test(x))throw new TypeError(`argument name is invalid: ${x}`);const ie=le(B);if(!e.test(ie))throw new TypeError(`argument val is invalid: ${B}`);let pe=x+"="+ie;if(!z)return pe;if(z.maxAge!==void 0){if(!Number.isInteger(z.maxAge))throw new TypeError(`option maxAge is invalid: ${z.maxAge}`);pe+="; Max-Age="+z.maxAge}if(z.domain){if(!t.test(z.domain))throw new TypeError(`option domain is invalid: ${z.domain}`);pe+="; Domain="+z.domain}if(z.path){if(!r.test(z.path))throw new TypeError(`option path is invalid: ${z.path}`);pe+="; Path="+z.path}if(z.expires){if(!I(z.expires)||!Number.isFinite(z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${z.expires}`);pe+="; Expires="+z.expires.toUTCString()}if(z.httpOnly&&(pe+="; HttpOnly"),z.secure&&(pe+="; Secure"),z.partitioned&&(pe+="; Partitioned"),z.priority)switch(typeof z.priority=="string"?z.priority.toLowerCase():void 0){case"low":pe+="; Priority=Low";break;case"medium":pe+="; Priority=Medium";break;case"high":pe+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${z.priority}`)}if(z.sameSite)switch(typeof z.sameSite=="string"?z.sameSite.toLowerCase():z.sameSite){case!0:case"strict":pe+="; SameSite=Strict";break;case"lax":pe+="; SameSite=Lax";break;case"none":pe+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${z.sameSite}`)}return pe}function E(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function I(x){return a.call(x)==="[object Date]"}return dh}$V();var Cw="popstate";function XV(i={}){function e(r,a){let{pathname:u,search:c,hash:d}=r.location;return xy("",{pathname:u,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Hh(a)}return JV(e,t,null,i)}function ln(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Os(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WV(){return Math.random().toString(36).substring(2,10)}function Dw(i,e){return{usr:i.state,key:i.key,idx:e}}function xy(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?ec(e):e,state:t,key:e&&e.key||r||WV()}}function Hh({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function ec(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function JV(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:u=!1}=r,c=a.history,d="POP",p=null,v=E();v==null&&(v=0,c.replaceState({...c.state,idx:v},""));function E(){return(c.state||{idx:null}).idx}function I(){d="POP";let ie=E(),pe=ie==null?null:ie-v;v=ie,p&&p({action:d,location:le.location,delta:pe})}function x(ie,pe){d="PUSH";let de=xy(le.location,ie,pe);v=E()+1;let ae=Dw(de,v),Re=le.createHref(de);try{c.pushState(ae,"",Re)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;a.location.assign(Re)}u&&p&&p({action:d,location:le.location,delta:1})}function B(ie,pe){d="REPLACE";let de=xy(le.location,ie,pe);v=E();let ae=Dw(de,v),Re=le.createHref(de);c.replaceState(ae,"",Re),u&&p&&p({action:d,location:le.location,delta:0})}function z(ie){return ZV(ie)}let le={get action(){return d},get location(){return i(a,c)},listen(ie){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Cw,I),p=ie,()=>{a.removeEventListener(Cw,I),p=null}},createHref(ie){return e(a,ie)},createURL:z,encodeLocation(ie){let pe=z(ie);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:x,replace:B,go(ie){return c.go(ie)}};return le}function ZV(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ln(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Hh(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function eI(i,e,t="/"){return eM(i,e,t,!1)}function eM(i,e,t,r){let a=typeof e=="string"?ec(e):e,u=ma(a.pathname||"/",t);if(u==null)return null;let c=tI(i);tM(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let v=fM(u);d=cM(c[p],v,r)}return d}function tI(i,e=[],t=[],r=""){let a=(u,c,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};p.relativePath.startsWith("/")&&(ln(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let v=la([r,p.relativePath]),E=t.concat(p);u.children&&u.children.length>0&&(ln(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),tI(u.children,e,E,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:uM(v,u.index),routesMeta:E})};return i.forEach((u,c)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,c);else for(let p of nI(u.path))a(u,c,p)}),e}function nI(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return a?[u,""]:[u];let c=nI(r.join("/")),d=[];return d.push(...c.map(p=>p===""?u:[u,p].join("/"))),a&&d.push(...c),d.map(p=>i.startsWith("/")&&p===""?"/":p)}function tM(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:lM(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var nM=/^:[\w-]+$/,rM=3,iM=2,sM=1,aM=10,oM=-2,Ow=i=>i==="*";function uM(i,e){let t=i.split("/"),r=t.length;return t.some(Ow)&&(r+=oM),e&&(r+=iM),t.filter(a=>!Ow(a)).reduce((a,u)=>a+(nM.test(u)?rM:u===""?sM:aM),r)}function lM(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function cM(i,e,t=!1){let{routesMeta:r}=i,a={},u="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],v=d===r.length-1,E=u==="/"?e:e.slice(u.length)||"/",I=hm({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},E),x=p.route;if(!I&&v&&t&&!r[r.length-1].route.index&&(I=hm({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!I)return null;Object.assign(a,I.params),c.push({params:a,pathname:la([u,I.pathname]),pathnameBase:gM(la([u,I.pathnameBase])),route:x}),I.pathnameBase!=="/"&&(u=la([u,I.pathnameBase]))}return c}function hm(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=hM(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((v,{paramName:E,isOptional:I},x)=>{if(E==="*"){let z=d[x]||"";c=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}const B=d[x];return I&&!B?v[E]=void 0:v[E]=(B||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:c,pattern:i}}function hM(i,e=!1,t=!0){Os(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function fM(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Os(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ma(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function dM(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?ec(i):i;return{pathname:t?t.startsWith("/")?t:mM(t,e):e,search:yM(r),hash:vM(a)}}function mM(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Hg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pM(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rI(i){let e=pM(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function iI(i,e,t,r=!1){let a;typeof i=="string"?a=ec(i):(a={...i},ln(!a.pathname||!a.pathname.includes("?"),Hg("?","pathname","search",a)),ln(!a.pathname||!a.pathname.includes("#"),Hg("#","pathname","hash",a)),ln(!a.search||!a.search.includes("#"),Hg("#","search","hash",a)));let u=i===""||a.pathname==="",c=u?"/":a.pathname,d;if(c==null)d=t;else{let I=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),I-=1;a.pathname=x.join("/")}d=I>=0?e[I]:"/"}let p=dM(a,d),v=c&&c!=="/"&&c.endsWith("/"),E=(u||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||E)&&(p.pathname+="/"),p}var la=i=>i.join("/").replace(/\/\/+/g,"/"),gM=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),yM=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,vM=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function _M(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var sI=["POST","PUT","PATCH","DELETE"];new Set(sI);var bM=["GET",...sI];new Set(bM);var tc=ge.createContext(null);tc.displayName="DataRouter";var Um=ge.createContext(null);Um.displayName="DataRouterState";var aI=ge.createContext({isTransitioning:!1});aI.displayName="ViewTransition";var EM=ge.createContext(new Map);EM.displayName="Fetchers";var TM=ge.createContext(null);TM.displayName="Await";var Ps=ge.createContext(null);Ps.displayName="Navigation";var uf=ge.createContext(null);uf.displayName="Location";var va=ge.createContext({outlet:null,matches:[],isDataRoute:!1});va.displayName="Route";var Hv=ge.createContext(null);Hv.displayName="RouteError";function wM(i,{relative:e}={}){ln(lf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ge.useContext(Ps),{hash:a,pathname:u,search:c}=cf(i,{relative:e}),d=u;return t!=="/"&&(d=u==="/"?t:la([t,u])),r.createHref({pathname:d,search:c,hash:a})}function lf(){return ge.useContext(uf)!=null}function Vu(){return ln(lf(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(uf).location}var oI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uI(i){ge.useContext(Ps).static||ge.useLayoutEffect(i)}function SM(){let{isDataRoute:i}=ge.useContext(va);return i?LM():AM()}function AM(){ln(lf(),"useNavigate() may be used only in the context of a <Router> component.");let i=ge.useContext(tc),{basename:e,navigator:t}=ge.useContext(Ps),{matches:r}=ge.useContext(va),{pathname:a}=Vu(),u=JSON.stringify(rI(r)),c=ge.useRef(!1);return uI(()=>{c.current=!0}),ge.useCallback((p,v={})=>{if(Os(c.current,oI),!c.current)return;if(typeof p=="number"){t.go(p);return}let E=iI(p,JSON.parse(u),a,v.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:la([e,E.pathname])),(v.replace?t.replace:t.push)(E,v.state,v)},[e,t,u,a,i])}ge.createContext(null);function cf(i,{relative:e}={}){let{matches:t}=ge.useContext(va),{pathname:r}=Vu(),a=JSON.stringify(rI(t));return ge.useMemo(()=>iI(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function IM(i,e){return lI(i,e)}function lI(i,e,t,r){var de;ln(lf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:u}=ge.useContext(Ps),{matches:c}=ge.useContext(va),d=c[c.length-1],p=d?d.params:{},v=d?d.pathname:"/",E=d?d.pathnameBase:"/",I=d&&d.route;{let ae=I&&I.path||"";cI(v,!I||ae.endsWith("*")||ae.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${ae}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ae}"> to <Route path="${ae==="/"?"*":`${ae}/*`}">.`)}let x=Vu(),B;if(e){let ae=typeof e=="string"?ec(e):e;ln(E==="/"||((de=ae.pathname)==null?void 0:de.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ae.pathname}" was given in the \`location\` prop.`),B=ae}else B=x;let z=B.pathname||"/",le=z;if(E!=="/"){let ae=E.replace(/^\//,"").split("/");le="/"+z.replace(/^\//,"").split("/").slice(ae.length).join("/")}let ie=!u&&t&&t.matches&&t.matches.length>0?t.matches:eI(i,{pathname:le});Os(I||ie!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),Os(ie==null||ie[ie.length-1].route.element!==void 0||ie[ie.length-1].route.Component!==void 0||ie[ie.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let pe=OM(ie&&ie.map(ae=>Object.assign({},ae,{params:Object.assign({},p,ae.params),pathname:la([E,a.encodeLocation?a.encodeLocation(ae.pathname).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?E:la([E,a.encodeLocation?a.encodeLocation(ae.pathnameBase).pathname:ae.pathnameBase])})),c,t,r);return e&&pe?ge.createElement(uf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},pe):pe}function RM(){let i=kM(),e=_M(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=ge.createElement(ge.Fragment,null,ge.createElement("p",null," Hey developer "),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:u},"ErrorBoundary")," or"," ",ge.createElement("code",{style:u},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:a},t):null,c)}var xM=ge.createElement(RM,null),CM=class extends ge.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ge.createElement(va.Provider,{value:this.props.routeContext},ge.createElement(Hv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DM({routeContext:i,match:e,children:t}){let r=ge.useContext(tc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(va.Provider,{value:i},t)}function OM(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,u=t==null?void 0:t.errors;if(u!=null){let p=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);ln(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let v=a[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=p),v.route.id){let{loaderData:E,errors:I}=t,x=v.route.loader&&!E.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||x){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,v,E)=>{let I,x=!1,B=null,z=null;t&&(I=u&&v.route.id?u[v.route.id]:void 0,B=v.route.errorElement||xM,c&&(d<0&&E===0?(cI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,z=null):d===E&&(x=!0,z=v.route.hydrateFallbackElement||null)));let le=e.concat(a.slice(0,E+1)),ie=()=>{let pe;return I?pe=B:x?pe=z:v.route.Component?pe=ge.createElement(v.route.Component,null):v.route.element?pe=v.route.element:pe=p,ge.createElement(DM,{match:v,routeContext:{outlet:p,matches:le,isDataRoute:t!=null},children:pe})};return t&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?ge.createElement(CM,{location:t.location,revalidation:t.revalidation,component:B,error:I,children:ie(),routeContext:{outlet:null,matches:le,isDataRoute:!0}}):ie()},null)}function Gv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PM(i){let e=ge.useContext(tc);return ln(e,Gv(i)),e}function NM(i){let e=ge.useContext(Um);return ln(e,Gv(i)),e}function VM(i){let e=ge.useContext(va);return ln(e,Gv(i)),e}function Qv(i){let e=VM(i),t=e.matches[e.matches.length-1];return ln(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function MM(){return Qv("useRouteId")}function kM(){var r;let i=ge.useContext(Hv),e=NM("useRouteError"),t=Qv("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function LM(){let{router:i}=PM("useNavigate"),e=Qv("useNavigate"),t=ge.useRef(!1);return uI(()=>{t.current=!0}),ge.useCallback(async(a,u={})=>{Os(t.current,oI),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var Pw={};function cI(i,e,t){!e&&!Pw[i]&&(Pw[i]=!0,Os(!1,t))}ge.memo(UM);function UM({routes:i,future:e,state:t}){return lI(i,void 0,t,e)}function _h(i){ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BM({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:u=!1}){ln(!lf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),d=ge.useMemo(()=>({basename:c,navigator:a,static:u,future:{}}),[c,a,u]);typeof t=="string"&&(t=ec(t));let{pathname:p="/",search:v="",hash:E="",state:I=null,key:x="default"}=t,B=ge.useMemo(()=>{let z=ma(p,c);return z==null?null:{location:{pathname:z,search:v,hash:E,state:I,key:x},navigationType:r}},[c,p,v,E,I,x,r]);return Os(B!=null,`<Router basename="${c}"> is not able to match the URL "${p}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:ge.createElement(Ps.Provider,{value:d},ge.createElement(uf.Provider,{children:e,value:B}))}function zM({children:i,location:e}){return IM(Cy(i),e)}function Cy(i,e=[]){let t=[];return ge.Children.forEach(i,(r,a)=>{if(!ge.isValidElement(r))return;let u=[...e,a];if(r.type===ge.Fragment){t.push.apply(t,Cy(r.props.children,u));return}ln(r.type===_h,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ln(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Cy(r.props.children,u)),t.push(c)}),t}var Nd="get",Vd="application/x-www-form-urlencoded";function Bm(i){return i!=null&&typeof i.tagName=="string"}function jM(i){return Bm(i)&&i.tagName.toLowerCase()==="button"}function qM(i){return Bm(i)&&i.tagName.toLowerCase()==="form"}function FM(i){return Bm(i)&&i.tagName.toLowerCase()==="input"}function KM(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function HM(i,e){return i.button===0&&(!e||e==="_self")&&!KM(i)}var yd=null;function GM(){if(yd===null)try{new FormData(document.createElement("form"),0),yd=!1}catch{yd=!0}return yd}var QM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gg(i){return i!=null&&!QM.has(i)?(Os(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vd}"`),null):i}function YM(i,e){let t,r,a,u,c;if(qM(i)){let d=i.getAttribute("action");r=d?ma(d,e):null,t=i.getAttribute("method")||Nd,a=Gg(i.getAttribute("enctype"))||Vd,u=new FormData(i)}else if(jM(i)||FM(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||d.getAttribute("action");if(r=p?ma(p,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||Nd,a=Gg(i.getAttribute("formenctype"))||Gg(d.getAttribute("enctype"))||Vd,u=new FormData(d,i),!GM()){let{name:v,type:E,value:I}=i;if(E==="image"){let x=v?`${v}.`:"";u.append(`${x}x`,"0"),u.append(`${x}y`,"0")}else v&&u.append(v,I)}}else{if(Bm(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Nd,r=null,a=Vd,c=i}return u&&a==="text/plain"&&(c=u,u=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:u,body:c}}function Yv(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function $M(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XM(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function WM(i,e,t){let r=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let c=await $M(u,t);return c.links?c.links():[]}return[]}));return tk(r.flat(1).filter(XM).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Nw(i,e,t,r,a,u){let c=(p,v)=>t[v]?p.route.id!==t[v].route.id:!0,d=(p,v)=>{var E;return t[v].pathname!==p.pathname||((E=t[v].route.path)==null?void 0:E.endsWith("*"))&&t[v].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,v)=>c(p,v)||d(p,v)):u==="data"?e.filter((p,v)=>{var I;let E=r.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(c(p,v)||d(p,v))return!0;if(p.route.shouldRevalidate){let x=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function JM(i,e,{includeHydrateFallback:t}={}){return ZM(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function ZM(i){return[...new Set(i)]}function ek(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function tk(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let u=JSON.stringify(ek(a));return t.has(u)||(t.add(u),r.push({key:u,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nk=new Set([100,101,204,205]);function rk(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&ma(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hI(){let i=ge.useContext(tc);return Yv(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function ik(){let i=ge.useContext(Um);return Yv(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var $v=ge.createContext(void 0);$v.displayName="FrameworkContext";function fI(){let i=ge.useContext($v);return Yv(i,"You must render this element inside a <HydratedRouter> element"),i}function sk(i,e){let t=ge.useContext($v),[r,a]=ge.useState(!1),[u,c]=ge.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:v,onMouseLeave:E,onTouchStart:I}=e,x=ge.useRef(null);ge.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let le=pe=>{pe.forEach(de=>{c(de.isIntersecting)})},ie=new IntersectionObserver(le,{threshold:.5});return x.current&&ie.observe(x.current),()=>{ie.disconnect()}}},[i]),ge.useEffect(()=>{if(r){let le=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(le)}}},[r]);let B=()=>{a(!0)},z=()=>{a(!1),c(!1)};return t?i!=="intent"?[u,x,{}]:[u,x,{onFocus:mh(d,B),onBlur:mh(p,z),onMouseEnter:mh(v,B),onMouseLeave:mh(E,z),onTouchStart:mh(I,B)}]:[!1,x,{}]}function mh(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function ak({page:i,...e}){let{router:t}=hI(),r=ge.useMemo(()=>eI(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?ge.createElement(uk,{page:i,matches:r,...e}):null}function ok(i){let{manifest:e,routeModules:t}=fI(),[r,a]=ge.useState([]);return ge.useEffect(()=>{let u=!1;return WM(i,e,t).then(c=>{u||a(c)}),()=>{u=!0}},[i,e,t]),r}function uk({page:i,matches:e,...t}){let r=Vu(),{manifest:a,routeModules:u}=fI(),{basename:c}=hI(),{loaderData:d,matches:p}=ik(),v=ge.useMemo(()=>Nw(i,e,p,a,r,"data"),[i,e,p,a,r]),E=ge.useMemo(()=>Nw(i,e,p,a,r,"assets"),[i,e,p,a,r]),I=ge.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let z=new Set,le=!1;if(e.forEach(pe=>{var ae;let de=a.routes[pe.route.id];!de||!de.hasLoader||(!v.some(Re=>Re.route.id===pe.route.id)&&pe.route.id in d&&((ae=u[pe.route.id])!=null&&ae.shouldRevalidate)||de.hasClientLoader?le=!0:z.add(pe.route.id))}),z.size===0)return[];let ie=rk(i,c);return le&&z.size>0&&ie.searchParams.set("_routes",e.filter(pe=>z.has(pe.route.id)).map(pe=>pe.route.id).join(",")),[ie.pathname+ie.search]},[c,d,r,a,v,e,i,u]),x=ge.useMemo(()=>JM(E,a),[E,a]),B=ok(E);return ge.createElement(ge.Fragment,null,I.map(z=>ge.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),x.map(z=>ge.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),B.map(({key:z,link:le})=>ge.createElement("link",{key:z,...le})))}function lk(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var dI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dI&&(window.__reactRouterVersion="7.6.0")}catch{}function ck({basename:i,children:e,window:t}){let r=ge.useRef();r.current==null&&(r.current=XV({window:t,v5Compat:!0}));let a=r.current,[u,c]=ge.useState({action:a.action,location:a.location}),d=ge.useCallback(p=>{ge.startTransition(()=>c(p))},[c]);return ge.useLayoutEffect(()=>a.listen(d),[a,d]),ge.createElement(BM,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:a})}var mI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pI=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:u,replace:c,state:d,target:p,to:v,preventScrollReset:E,viewTransition:I,...x},B){let{basename:z}=ge.useContext(Ps),le=typeof v=="string"&&mI.test(v),ie,pe=!1;if(typeof v=="string"&&le&&(ie=v,dI))try{let V=new URL(window.location.href),q=v.startsWith("//")?new URL(V.protocol+v):new URL(v),Y=ma(q.pathname,z);q.origin===V.origin&&Y!=null?v=Y+q.search+q.hash:pe=!0}catch{Os(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let de=wM(v,{relative:a}),[ae,Re,xe]=sk(r,x),Ve=mk(v,{replace:c,state:d,target:p,preventScrollReset:E,relative:a,viewTransition:I});function L(V){e&&e(V),V.defaultPrevented||Ve(V)}let P=ge.createElement("a",{...x,...xe,href:ie||de,onClick:pe||u?e:L,ref:lk(B,Re),target:p,"data-discover":!le&&t==="render"?"true":void 0});return ae&&!le?ge.createElement(ge.Fragment,null,P,ge.createElement(ak,{page:de})):P});pI.displayName="Link";var hk=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:u,to:c,viewTransition:d,children:p,...v},E){let I=cf(c,{relative:v.relative}),x=Vu(),B=ge.useContext(Um),{navigator:z,basename:le}=ge.useContext(Ps),ie=B!=null&&_k(I)&&d===!0,pe=z.encodeLocation?z.encodeLocation(I).pathname:I.pathname,de=x.pathname,ae=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(de=de.toLowerCase(),ae=ae?ae.toLowerCase():null,pe=pe.toLowerCase()),ae&&le&&(ae=ma(ae,le)||ae);const Re=pe!=="/"&&pe.endsWith("/")?pe.length-1:pe.length;let xe=de===pe||!a&&de.startsWith(pe)&&de.charAt(Re)==="/",Ve=ae!=null&&(ae===pe||!a&&ae.startsWith(pe)&&ae.charAt(pe.length)==="/"),L={isActive:xe,isPending:Ve,isTransitioning:ie},P=xe?e:void 0,V;typeof r=="function"?V=r(L):V=[r,xe?"active":null,Ve?"pending":null,ie?"transitioning":null].filter(Boolean).join(" ");let q=typeof u=="function"?u(L):u;return ge.createElement(pI,{...v,"aria-current":P,className:V,ref:E,style:q,to:c,viewTransition:d},typeof p=="function"?p(L):p)});hk.displayName="NavLink";var fk=ge.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:u,method:c=Nd,action:d,onSubmit:p,relative:v,preventScrollReset:E,viewTransition:I,...x},B)=>{let z=yk(),le=vk(d,{relative:v}),ie=c.toLowerCase()==="get"?"get":"post",pe=typeof d=="string"&&mI.test(d),de=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let Re=ae.nativeEvent.submitter,xe=(Re==null?void 0:Re.getAttribute("formmethod"))||c;z(Re||ae.currentTarget,{fetcherKey:e,method:xe,navigate:t,replace:a,state:u,relative:v,preventScrollReset:E,viewTransition:I})};return ge.createElement("form",{ref:B,method:ie,action:le,onSubmit:r?p:de,...x,"data-discover":!pe&&i==="render"?"true":void 0})});fk.displayName="Form";function dk(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gI(i){let e=ge.useContext(tc);return ln(e,dk(i)),e}function mk(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:u,viewTransition:c}={}){let d=SM(),p=Vu(),v=cf(i,{relative:u});return ge.useCallback(E=>{if(HM(E,e)){E.preventDefault();let I=t!==void 0?t:Hh(p)===Hh(v);d(i,{replace:I,state:r,preventScrollReset:a,relative:u,viewTransition:c})}},[p,d,v,t,r,e,i,a,u,c])}var pk=0,gk=()=>`__${String(++pk)}__`;function yk(){let{router:i}=gI("useSubmit"),{basename:e}=ge.useContext(Ps),t=MM();return ge.useCallback(async(r,a={})=>{let{action:u,method:c,encType:d,formData:p,body:v}=YM(r,e);if(a.navigate===!1){let E=a.fetcherKey||gk();await i.fetch(E,t,a.action||u,{preventScrollReset:a.preventScrollReset,formData:p,body:v,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:p,body:v,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function vk(i,{relative:e}={}){let{basename:t}=ge.useContext(Ps),r=ge.useContext(va);ln(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),u={...cf(i||".",{relative:e})},c=Vu();if(i==null){u.search=c.search;let d=new URLSearchParams(u.search),p=d.getAll("index");if(p.some(E=>E==="")){d.delete("index"),p.filter(I=>I).forEach(I=>d.append("index",I));let E=d.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:la([t,u.pathname])),Hh(u)}function _k(i,e={}){let t=ge.useContext(aI);ln(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gI("useViewTransitionState"),a=cf(i,{relative:e.relative});if(!t.isTransitioning)return!1;let u=ma(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=ma(t.nextLocation.pathname,r)||t.nextLocation.pathname;return hm(a.pathname,c)!=null||hm(a.pathname,u)!=null}[...nk];const bk=async()=>{try{const i=new As,t=(await A1(Mm,i)).user,r=Vv(jv,"users",t.email);if(!(await zv(r)).exists())throw new Error("User document doesn't exist");return t}catch(i){throw console.error("Google sign-in error:",i),i}},Ek=async()=>{try{const i=new As,t=(await A1(Mm,i)).user,r=Vv(jv,"users",t.email);if(!(await zv(r)).exists()){const u={email:t.email,role:"user",createdAt:new Date().toISOString(),displayName:t.displayName||void 0};await iV(r,u)}return t}catch(i){throw console.error("Google registration error:",i),i}};function Tk(){const[i,e]=ge.useState(!1),[t,r]=ge.useState(null),a=async()=>{try{e(!0),r(null);const c=await Ek();console.log("Registered user:",c)}catch(c){const d=c.message||"Failed to register with Google";r(d),alert(d)}finally{e(!1)}},u=async()=>{try{e(!0),r(null);const c=await bk();console.log("Signed in user:",c)}catch(c){const d=c.message||"Failed to sign in with Google";r(d),alert(d)}finally{e(!1)}};return Ee.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Ee.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[Ee.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Sign In or Register"}),t&&Ee.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md",children:t}),Ee.jsxs("div",{className:"flex flex-col space-y-4",children:[Ee.jsxs("button",{onClick:u,disabled:i,className:"flex items-center justify-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[Ee.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Ee.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Ee.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Ee.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),Ee.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Signing in...":"Sign in with Google"]}),Ee.jsxs("button",{onClick:a,disabled:i,className:"flex items-center justify-center gap-2 bg-blue-600 text-white rounded-lg px-4 py-2 hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[Ee.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Ee.jsx("path",{fill:"#fff",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Ee.jsx("path",{fill:"#fff",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Ee.jsx("path",{fill:"#fff",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),Ee.jsx("path",{fill:"#fff",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Registering...":"Register with Google"]})]})]})})}function wk(){return Ee.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Ee.jsxs("div",{className:"text-center",children:[Ee.jsx("h1",{className:"text-4xl font-bold text-black mb-4",children:"Det finns inget hr..."}),Ee.jsx("p",{className:"text-black mb-4",children:"Whatever you were looking for is not here..."}),Ee.jsx("a",{href:"/",className:"text-black underline",children:"Go to the main screen"})]})})}function Sk(){return Ee.jsx("h3",{children:"Valkommen"})}function Ak(){const{user:i}=ge.useContext(Oy);return Ee.jsxs("div",{className:"flex min-h-screen",children:[Ee.jsx("div",{className:"fixed top-0 left-0 h-screen w-64 hidden md:block",children:Ee.jsx(pV,{})}),Ee.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:Ee.jsx(ck,{children:Ee.jsxs(zM,{children:[i?Ee.jsx(_h,{path:"/",element:Ee.jsx(YV,{})}):Ee.jsx(_h,{path:"/",element:Ee.jsx(Sk,{})}),Ee.jsx(_h,{path:"/login",element:Ee.jsx(Tk,{})}),Ee.jsx(_h,{path:"*",element:Ee.jsx(wk,{})})]})})})]})}const Ik=({children:i})=>{const[e,t]=ge.useState(null),[r,a]=ge.useState(!0);ge.useEffect(()=>{const c=Mm.onAuthStateChanged(async d=>{try{if(a(!0),d){const p=Vv(jv,"users",d.email);(await zv(p)).exists()?t(d):(console.log("User document doesn't exist in Firestore"),t(null))}else t(null)}catch(p){console.error("Auth state change error:",p),t(null)}finally{a(!1)}});return()=>c()},[]);const u={user:e,isLoading:r};return Ee.jsx(Oy.Provider,{value:u,children:i})};KR.createRoot(document.getElementById("root")).render(Ee.jsx(ge.StrictMode,{children:Ee.jsx(Ik,{children:Ee.jsx(Ak,{})})}));
