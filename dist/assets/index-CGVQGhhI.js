var P1=Object.defineProperty;var V1=(s,e,t)=>e in s?P1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var N0=(s,e,t)=>V1(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}})();var k1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Dp={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function L1(){if(P0)return Ec;P0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var m in a)m!=="key"&&(u[m]=a[m])}else u=a;return a=u.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:u}}return Ec.Fragment=e,Ec.jsx=t,Ec.jsxs=t,Ec}var V0;function U1(){return V0||(V0=1,Dp.exports=L1()),Dp.exports}var Se=U1(),Op={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function B1(){if(k0)return ft;k0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.iterator;function D(B){return B===null||typeof B!="object"?null:(B=R&&B[R]||B["@@iterator"],typeof B=="function"?B:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,he={};function W(B,Te,Ue){this.props=B,this.context=Te,this.refs=he,this.updater=Ue||z}W.prototype.isReactComponent={},W.prototype.setState=function(B,Te){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Te,"setState")},W.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function fe(){}fe.prototype=W.prototype;function Ee(B,Te,Ue){this.props=B,this.context=Te,this.refs=he,this.updater=Ue||z}var me=Ee.prototype=new fe;me.constructor=Ee,H(me,W.prototype),me.isPureReactComponent=!0;var De=Array.isArray,Pe={H:null,A:null,T:null,S:null,V:null},je=Object.prototype.hasOwnProperty;function U(B,Te,Ue,Ie,We,ct){return Ue=ct.ref,{$$typeof:s,type:B,key:Te,ref:Ue!==void 0?Ue:null,props:ct}}function N(B,Te){return U(B.type,Te,void 0,void 0,void 0,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function j(B){var Te={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Ue){return Te[Ue]})}var Y=/\/+/g;function J(B,Te){return typeof B=="object"&&B!==null&&B.key!=null?j(""+B.key):Te.toString(36)}function M(){}function Dn(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(M,M):(B.status="pending",B.then(function(Te){B.status==="pending"&&(B.status="fulfilled",B.value=Te)},function(Te){B.status==="pending"&&(B.status="rejected",B.reason=Te)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Yt(B,Te,Ue,Ie,We){var ct=typeof B;(ct==="undefined"||ct==="boolean")&&(B=null);var et=!1;if(B===null)et=!0;else switch(ct){case"bigint":case"string":case"number":et=!0;break;case"object":switch(B.$$typeof){case s:case e:et=!0;break;case S:return et=B._init,Yt(et(B._payload),Te,Ue,Ie,We)}}if(et)return We=We(B),et=Ie===""?"."+J(B,0):Ie,De(We)?(Ue="",et!=null&&(Ue=et.replace(Y,"$&/")+"/"),Yt(We,Te,Ue,"",function(Fe){return Fe})):We!=null&&(V(We)&&(We=N(We,Ue+(We.key==null||B&&B.key===We.key?"":(""+We.key).replace(Y,"$&/")+"/")+et)),Te.push(We)),1;et=0;var un=Ie===""?".":Ie+":";if(De(B))for(var Bt=0;Bt<B.length;Bt++)Ie=B[Bt],ct=un+J(Ie,Bt),et+=Yt(Ie,Te,Ue,ct,We);else if(Bt=D(B),typeof Bt=="function")for(B=Bt.call(B),Bt=0;!(Ie=B.next()).done;)Ie=Ie.value,ct=un+J(Ie,Bt++),et+=Yt(Ie,Te,Ue,ct,We);else if(ct==="object"){if(typeof B.then=="function")return Yt(Dn(B),Te,Ue,Ie,We);throw Te=String(B),Error("Objects are not valid as a React child (found: "+(Te==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Te)+"). If you meant to render a collection of children, use an array instead.")}return et}function pe(B,Te,Ue){if(B==null)return B;var Ie=[],We=0;return Yt(B,Ie,"","",function(ct){return Te.call(Ue,ct,We++)}),Ie}function Me(B){if(B._status===-1){var Te=B._result;Te=Te(),Te.then(function(Ue){(B._status===0||B._status===-1)&&(B._status=1,B._result=Ue)},function(Ue){(B._status===0||B._status===-1)&&(B._status=2,B._result=Ue)}),B._status===-1&&(B._status=0,B._result=Te)}if(B._status===1)return B._result.default;throw B._result}var Qe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function pt(){}return ft.Children={map:pe,forEach:function(B,Te,Ue){pe(B,function(){Te.apply(this,arguments)},Ue)},count:function(B){var Te=0;return pe(B,function(){Te++}),Te},toArray:function(B){return pe(B,function(Te){return Te})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ft.Component=W,ft.Fragment=t,ft.Profiler=a,ft.PureComponent=Ee,ft.StrictMode=r,ft.Suspense=y,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe,ft.__COMPILER_RUNTIME={__proto__:null,c:function(B){return Pe.H.useMemoCache(B)}},ft.cache=function(B){return function(){return B.apply(null,arguments)}},ft.cloneElement=function(B,Te,Ue){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Ie=H({},B.props),We=B.key,ct=void 0;if(Te!=null)for(et in Te.ref!==void 0&&(ct=void 0),Te.key!==void 0&&(We=""+Te.key),Te)!je.call(Te,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&Te.ref===void 0||(Ie[et]=Te[et]);var et=arguments.length-2;if(et===1)Ie.children=Ue;else if(1<et){for(var un=Array(et),Bt=0;Bt<et;Bt++)un[Bt]=arguments[Bt+2];Ie.children=un}return U(B.type,We,void 0,void 0,ct,Ie)},ft.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},ft.createElement=function(B,Te,Ue){var Ie,We={},ct=null;if(Te!=null)for(Ie in Te.key!==void 0&&(ct=""+Te.key),Te)je.call(Te,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(We[Ie]=Te[Ie]);var et=arguments.length-2;if(et===1)We.children=Ue;else if(1<et){for(var un=Array(et),Bt=0;Bt<et;Bt++)un[Bt]=arguments[Bt+2];We.children=un}if(B&&B.defaultProps)for(Ie in et=B.defaultProps,et)We[Ie]===void 0&&(We[Ie]=et[Ie]);return U(B,ct,void 0,void 0,null,We)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(B){return{$$typeof:m,render:B}},ft.isValidElement=V,ft.lazy=function(B){return{$$typeof:S,_payload:{_status:-1,_result:B},_init:Me}},ft.memo=function(B,Te){return{$$typeof:v,type:B,compare:Te===void 0?null:Te}},ft.startTransition=function(B){var Te=Pe.T,Ue={};Pe.T=Ue;try{var Ie=B(),We=Pe.S;We!==null&&We(Ue,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(pt,Qe)}catch(ct){Qe(ct)}finally{Pe.T=Te}},ft.unstable_useCacheRefresh=function(){return Pe.H.useCacheRefresh()},ft.use=function(B){return Pe.H.use(B)},ft.useActionState=function(B,Te,Ue){return Pe.H.useActionState(B,Te,Ue)},ft.useCallback=function(B,Te){return Pe.H.useCallback(B,Te)},ft.useContext=function(B){return Pe.H.useContext(B)},ft.useDebugValue=function(){},ft.useDeferredValue=function(B,Te){return Pe.H.useDeferredValue(B,Te)},ft.useEffect=function(B,Te,Ue){var Ie=Pe.H;if(typeof Ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ie.useEffect(B,Te)},ft.useId=function(){return Pe.H.useId()},ft.useImperativeHandle=function(B,Te,Ue){return Pe.H.useImperativeHandle(B,Te,Ue)},ft.useInsertionEffect=function(B,Te){return Pe.H.useInsertionEffect(B,Te)},ft.useLayoutEffect=function(B,Te){return Pe.H.useLayoutEffect(B,Te)},ft.useMemo=function(B,Te){return Pe.H.useMemo(B,Te)},ft.useOptimistic=function(B,Te){return Pe.H.useOptimistic(B,Te)},ft.useReducer=function(B,Te,Ue){return Pe.H.useReducer(B,Te,Ue)},ft.useRef=function(B){return Pe.H.useRef(B)},ft.useState=function(B){return Pe.H.useState(B)},ft.useSyncExternalStore=function(B,Te,Ue){return Pe.H.useSyncExternalStore(B,Te,Ue)},ft.useTransition=function(){return Pe.H.useTransition()},ft.version="19.1.0",ft}var M0;function Ug(){return M0||(M0=1,Op.exports=B1()),Op.exports}var ge=Ug(),Np={exports:{}},bc={},Pp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function z1(){return L0||(L0=1,function(s){function e(pe,Me){var Qe=pe.length;pe.push(Me);e:for(;0<Qe;){var pt=Qe-1>>>1,B=pe[pt];if(0<a(B,Me))pe[pt]=Me,pe[Qe]=B,Qe=pt;else break e}}function t(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var Me=pe[0],Qe=pe.pop();if(Qe!==Me){pe[0]=Qe;e:for(var pt=0,B=pe.length,Te=B>>>1;pt<Te;){var Ue=2*(pt+1)-1,Ie=pe[Ue],We=Ue+1,ct=pe[We];if(0>a(Ie,Qe))We<B&&0>a(ct,Ie)?(pe[pt]=ct,pe[We]=Qe,pt=We):(pe[pt]=Ie,pe[Ue]=Qe,pt=Ue);else if(We<B&&0>a(ct,Qe))pe[pt]=ct,pe[We]=Qe,pt=We;else break e}}return Me}function a(pe,Me){var Qe=pe.sortIndex-Me.sortIndex;return Qe!==0?Qe:pe.id-Me.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var y=[],v=[],S=1,R=null,D=3,z=!1,H=!1,he=!1,W=!1,fe=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function De(pe){for(var Me=t(v);Me!==null;){if(Me.callback===null)r(v);else if(Me.startTime<=pe)r(v),Me.sortIndex=Me.expirationTime,e(y,Me);else break;Me=t(v)}}function Pe(pe){if(he=!1,De(pe),!H)if(t(y)!==null)H=!0,je||(je=!0,J());else{var Me=t(v);Me!==null&&Yt(Pe,Me.startTime-pe)}}var je=!1,U=-1,N=5,V=-1;function j(){return W?!0:!(s.unstable_now()-V<N)}function Y(){if(W=!1,je){var pe=s.unstable_now();V=pe;var Me=!0;try{e:{H=!1,he&&(he=!1,Ee(U),U=-1),z=!0;var Qe=D;try{t:{for(De(pe),R=t(y);R!==null&&!(R.expirationTime>pe&&j());){var pt=R.callback;if(typeof pt=="function"){R.callback=null,D=R.priorityLevel;var B=pt(R.expirationTime<=pe);if(pe=s.unstable_now(),typeof B=="function"){R.callback=B,De(pe),Me=!0;break t}R===t(y)&&r(y),De(pe)}else r(y);R=t(y)}if(R!==null)Me=!0;else{var Te=t(v);Te!==null&&Yt(Pe,Te.startTime-pe),Me=!1}}break e}finally{R=null,D=Qe,z=!1}Me=void 0}}finally{Me?J():je=!1}}}var J;if(typeof me=="function")J=function(){me(Y)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Dn=M.port2;M.port1.onmessage=Y,J=function(){Dn.postMessage(null)}}else J=function(){fe(Y,0)};function Yt(pe,Me){U=fe(function(){pe(s.unstable_now())},Me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(pe){pe.callback=null},s.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<pe?Math.floor(1e3/pe):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(pe){switch(D){case 1:case 2:case 3:var Me=3;break;default:Me=D}var Qe=D;D=Me;try{return pe()}finally{D=Qe}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(pe,Me){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Qe=D;D=pe;try{return Me()}finally{D=Qe}},s.unstable_scheduleCallback=function(pe,Me,Qe){var pt=s.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?pt+Qe:pt):Qe=pt,pe){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Qe+B,pe={id:S++,callback:Me,priorityLevel:pe,startTime:Qe,expirationTime:B,sortIndex:-1},Qe>pt?(pe.sortIndex=Qe,e(v,pe),t(y)===null&&pe===t(v)&&(he?(Ee(U),U=-1):he=!0,Yt(Pe,Qe-pt))):(pe.sortIndex=B,e(y,pe),H||z||(H=!0,je||(je=!0,J()))),pe},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(pe){var Me=D;return function(){var Qe=D;D=Me;try{return pe.apply(this,arguments)}finally{D=Qe}}}}(Vp)),Vp}var U0;function j1(){return U0||(U0=1,Pp.exports=z1()),Pp.exports}var kp={exports:{}},cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function q1(){if(B0)return cr;B0=1;var s=Ug();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)v+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(y,v,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:R==null?null:""+R,children:y,containerInfo:v,implementation:S}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cr.createPortal=function(y,v){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(y,v,null,S)},cr.flushSync=function(y){var v=c.T,S=r.p;try{if(c.T=null,r.p=2,y)return y()}finally{c.T=v,r.p=S,r.d.f()}},cr.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(y,v))},cr.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},cr.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var S=v.as,R=m(S,v.crossOrigin),D=typeof v.integrity=="string"?v.integrity:void 0,z=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;S==="style"?r.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:R,integrity:D,fetchPriority:z}):S==="script"&&r.d.X(y,{crossOrigin:R,integrity:D,fetchPriority:z,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},cr.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var S=m(v.as,v.crossOrigin);r.d.M(y,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(y)},cr.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var S=v.as,R=m(S,v.crossOrigin);r.d.L(y,S,{crossOrigin:R,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},cr.preloadModule=function(y,v){if(typeof y=="string")if(v){var S=m(v.as,v.crossOrigin);r.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(y)},cr.requestFormReset=function(y){r.d.r(y)},cr.unstable_batchedUpdates=function(y,v){return y(v)},cr.useFormState=function(y,v,S){return c.H.useFormState(y,v,S)},cr.useFormStatus=function(){return c.H.useHostTransitionStatus()},cr.version="19.1.0",cr}var z0;function F1(){if(z0)return kp.exports;z0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),kp.exports=q1(),kp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function K1(){if(j0)return bc;j0=1;var s=j1(),e=Ug(),t=F1();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,l=i;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(l=d.return,l!==null){o=l;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return m(d),n;if(g===l)return m(d),i;g=g.sibling}throw Error(r(188))}if(o.return!==l.return)o=d,l=g;else{for(var w=!1,x=d.child;x;){if(x===o){w=!0,o=d,l=g;break}if(x===l){w=!0,l=d,o=g;break}x=x.sibling}if(!w){for(x=g.child;x;){if(x===o){w=!0,o=g,l=d;break}if(x===l){w=!0,l=g,o=d;break}x=x.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==l)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var S=Object.assign,R=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),Ee=Symbol.for("react.consumer"),me=Symbol.for("react.context"),De=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function J(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var M=Symbol.for("react.client.reference");function Dn(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===M?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case W:return"Profiler";case he:return"StrictMode";case Pe:return"Suspense";case je:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case me:return(n.displayName||"Context")+".Provider";case Ee:return(n._context.displayName||"Context")+".Consumer";case De:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case U:return i=n.displayName||null,i!==null?i:Dn(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return Dn(n(i))}catch{}}return null}var Yt=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe={pending:!1,data:null,method:null,action:null},pt=[],B=-1;function Te(n){return{current:n}}function Ue(n){0>B||(n.current=pt[B],pt[B]=null,B--)}function Ie(n,i){B++,pt[B]=n.current,n.current=i}var We=Te(null),ct=Te(null),et=Te(null),un=Te(null);function Bt(n,i){switch(Ie(et,i),Ie(ct,n),Ie(We,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?a0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=a0(i),n=o0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Ue(We),Ie(We,n)}function Fe(){Ue(We),Ue(ct),Ue(et)}function Di(n){n.memoizedState!==null&&Ie(un,n);var i=We.current,o=o0(i,n.type);i!==o&&(Ie(ct,n),Ie(We,o))}function Sr(n){ct.current===n&&(Ue(We),Ue(ct)),un.current===n&&(Ue(un),pc._currentValue=Qe)}var Tt=Object.prototype.hasOwnProperty,Br=s.unstable_scheduleCallback,Rs=s.unstable_cancelCallback,zr=s.unstable_shouldYield,_u=s.unstable_requestPaint,Ar=s.unstable_now,kl=s.unstable_getCurrentPriorityLevel,_o=s.unstable_ImmediatePriority,es=s.unstable_UserBlockingPriority,Ln=s.unstable_NormalPriority,Eu=s.unstable_LowPriority,ai=s.unstable_IdlePriority,fa=s.log,ts=s.unstable_setDisableYieldValue,Pt=null,yt=null;function Yn(n){if(typeof fa=="function"&&ts(n),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Pt,n)}catch{}}var ln=Math.clz32?Math.clz32:pr,da=Math.log,ma=Math.LN2;function pr(n){return n>>>=0,n===0?32:31-(da(n)/ma|0)|0}var oi=256,Oi=4194304;function wn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qe(n,i,o){var l=n.pendingLanes;if(l===0)return 0;var d=0,g=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var x=l&134217727;return x!==0?(l=x&~g,l!==0?d=wn(l):(w&=x,w!==0?d=wn(w):o||(o=x&~n,o!==0&&(d=wn(o))))):(x=l&~g,x!==0?d=wn(x):w!==0?d=wn(w):o||(o=l&~n,o!==0&&(d=wn(o)))),d===0?0:i!==0&&i!==d&&(i&g)===0&&(g=d&-d,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:d}function jr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function qr(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ns(){var n=oi;return oi<<=1,(oi&4194048)===0&&(oi=256),n}function Le(){var n=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),n}function Fr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function ui(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xs(n,i,o,l,d,g){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var x=n.entanglements,k=n.expirationTimes,se=n.hiddenUpdates;for(o=w&~o;0<o;){var ve=31-ln(o),be=1<<ve;x[ve]=0,k[ve]=-1;var oe=se[ve];if(oe!==null)for(se[ve]=null,ve=0;ve<oe.length;ve++){var ue=oe[ve];ue!==null&&(ue.lane&=-536870913)}o&=~be}l!==0&&Kr(n,l,0),g!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=g&~(w&~i))}function Kr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-ln(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|o&4194090}function Cs(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var l=31-ln(o),d=1<<l;d&i|n[l]&i&&(n[l]|=i),o&=~d}}function rs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function pa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gr(){var n=Me.p;return n!==0?n:(n=window.event,n===void 0?32:I0(n.type))}function Ni(n,i){var o=Me.p;try{return Me.p=n,i()}finally{Me.p=o}}var zt=Math.random().toString(36).slice(2),Zt="__reactFiber$"+zt,ut="__reactProps$"+zt,Ot="__reactContainer$"+zt,Eo="__reactEvents$"+zt,ga="__reactListeners$"+zt,Hr="__reactHandles$"+zt,Ds="__reactResources$"+zt,Os="__reactMarker$"+zt;function $n(n){delete n[Zt],delete n[ut],delete n[Eo],delete n[ga],delete n[Hr]}function ir(n){var i=n[Zt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Ot]||o[Zt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=h0(n);n!==null;){if(o=n[Zt])return o;n=h0(n)}return i}n=o,o=n.parentNode}return null}function On(n){if(n=n[Zt]||n[Ot]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function yr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Xn(n){var i=n[Ds];return i||(i=n[Ds]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Vt(n){n[Os]=!0}var ya=new Set,Ir={};function Rr(n,i){Gr(n,i),Gr(n+"Capture",i)}function Gr(n,i){for(Ir[n]=i,n=0;n<i.length;n++)ya.add(i[n])}var $t=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),li={},Wn={};function bo(n){return Tt.call(Wn,n)?!0:Tt.call(li,n)?!1:$t.test(n)?Wn[n]=!0:(li[n]=!0,!1)}function vr(n,i,o){if(bo(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function _r(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function mn(n,i,o,l){if(l===null)n.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+l)}}var Pi,ci;function hi(n){if(Pi===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Pi=i&&i[1]||"",ci=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pi+n+ci}var Vi=!1;function Ns(n,i){if(!n||Vi)return"";Vi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(ue){var oe=ue}Reflect.construct(n,[],be)}else{try{be.call()}catch(ue){oe=ue}n.call(be.prototype)}}else{try{throw Error()}catch(ue){oe=ue}(be=n())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(ue){if(ue&&oe&&typeof ue.stack=="string")return[ue.stack,oe.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),w=g[0],x=g[1];if(w&&x){var k=w.split(`
`),se=x.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<se.length&&!se[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===se.length)for(l=k.length-1,d=se.length-1;1<=l&&0<=d&&k[l]!==se[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==se[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==se[d]){var ve=`
`+k[l].replace(" at new "," at ");return n.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",n.displayName)),ve}while(1<=l&&0<=d);break}}}finally{Vi=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?hi(o):""}function ht(n){switch(n.tag){case 26:case 27:case 5:return hi(n.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return Ns(n.type,!1);case 11:return Ns(n.type.render,!1);case 1:return Ns(n.type,!0);case 31:return hi("Activity");default:return""}}function Ps(n){try{var i="";do i+=ht(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function va(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kt(n){var i=va(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){l=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function fi(n){n._valueTracker||(n._valueTracker=kt(n))}function ki(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),l="";return n&&(l=va(n)?n.checked?"true":"false":n.value),n=l,n!==o?(i.setValue(n),!0):!1}function xr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var To=/[\n"\\]/g;function en(n){return n.replace(To,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Bn(n,i,o,l,d,g,w,x){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Un(i)):n.value!==""+Un(i)&&(n.value=""+Un(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?Qr(n,w,Un(i)):o!=null?Qr(n,w,Un(o)):l!=null&&n.removeAttribute("value"),d==null&&g!=null&&(n.defaultChecked=!!g),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+Un(x):n.removeAttribute("name")}function is(n,i,o,l,d,g,w,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+Un(o):"",i=i!=null?""+Un(i):o,x||i===n.value||(n.value=i),n.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=x?n.checked:!!l,n.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w)}function Qr(n,i,o){i==="number"&&xr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function di(n,i,o,l){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&l&&(n[o].defaultSelected=!0)}else{for(o=""+Un(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function It(n,i,o){if(i!=null&&(i=""+Un(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Un(o):""}function ss(n,i,o,l){if(i==null){if(l!=null){if(o!=null)throw Error(r(92));if(Yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),i=o}o=Un(i),n.defaultValue=o,l=n.textContent,l===o&&l!==""&&l!==null&&(n.value=l)}function Cr(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var dt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _a(n,i,o){var l=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,o):typeof o!="number"||o===0||dt.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function wo(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&o[d]!==l&&_a(n,d,l)}else for(var g in i)i.hasOwnProperty(g)&&_a(n,g,i[g])}function So(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),as=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mi(n){return as.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var zn=null;function Er(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mi=null,jt=null;function sr(n){var i=On(n);if(i&&(n=i.stateNode)){var o=n[ut]||null;e:switch(n=i.stateNode,i.type){case"input":if(Bn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+en(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var l=o[i];if(l!==n&&l.form===n.form){var d=l[ut]||null;if(!d)throw Error(r(90));Bn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<o.length;i++)l=o[i],l.form===n.form&&ki(l)}break e;case"textarea":It(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&di(n,!!o.multiple,i,!1)}}}var ar=!1;function os(n,i,o){if(ar)return n(i,o);ar=!0;try{var l=n(i);return l}finally{if(ar=!1,(mi!==null||jt!==null)&&(tf(),mi&&(i=mi,n=jt,jt=mi=null,sr(i),n)))for(i=0;i<n.length;i++)sr(n[i])}}function Li(n,i){var o=n.stateNode;if(o===null)return null;var l=o[ut]||null;if(l===null)return null;o=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dr=!1;if(Sn)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{Dr=!1}var Or=null,Ui=null,Yr=null;function Bi(){if(Yr)return Yr;var n,i=Ui,o=i.length,l,d="value"in Or?Or.value:Or.textContent,g=d.length;for(n=0;n<o&&i[n]===d[n];n++);var w=o-n;for(l=1;l<=w&&i[o-l]===d[g-l];l++);return Yr=d.slice(n,1<l?1-l:void 0)}function Nr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function $r(){return!0}function Ao(){return!1}function tn(n){function i(o,l,d,g,w){this._reactName=o,this._targetInst=d,this.type=l,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(o=n[x],this[x]=o?o(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?$r:Ao,this.isPropagationStopped=Ao,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),i}var Ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=tn(Ct),pi=S({},Ct,{view:0,detail:0}),Vs=tn(pi),us,ba,gi,ks=S({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gi&&(gi&&n.type==="mousemove"?(us=n.screenX-gi.screenX,ba=n.screenY-gi.screenY):ba=us=0,gi=n),us)},movementY:function(n){return"movementY"in n?n.movementY:ba}}),or=tn(ks),Ta=S({},ks,{dataTransfer:0}),bu=tn(Ta),yi=S({},pi,{relatedTarget:0}),zi=tn(yi),ls=S({},Ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Ms=tn(ls),Tu=S({},Ct,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ji=tn(Tu),Io=S({},Ct,{data:0}),Ls=tn(Io),qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fi(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=pn[n])?!!i[n]:!1}function Xr(){return Fi}var Ro=S({},pi,{key:function(n){if(n.key){var i=qi[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Nr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wa[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(n){return n.type==="keypress"?Nr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Nr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ki=tn(Ro),xo=S({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sa=tn(xo),Pr=S({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),Aa=tn(Pr),vi=S({},Ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ia=tn(vi),Ra=S({},ks,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hi=tn(Ra),Nn=S({},Ct,{newState:0,oldState:0}),Co=tn(Nn),wu=[9,13,27,32],Vr=Sn&&"CompositionEvent"in window,h=null;Sn&&"documentMode"in document&&(h=document.documentMode);var E=Sn&&"TextEvent"in window&&!h,T=Sn&&(!Vr||h&&8<h&&11>=h),C=" ",ne=!1;function de(n,i){switch(n){case"keyup":return wu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ne(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vt=!1;function cn(n,i){switch(n){case"compositionend":return Ne(i);case"keypress":return i.which!==32?null:(ne=!0,C);case"textInput":return n=i.data,n===C&&ne?null:n;default:return null}}function wt(n,i){if(vt)return n==="compositionend"||!Vr&&de(n,i)?(n=Bi(),Yr=Ui=Or=null,vt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return T&&i.locale!=="ko"?null:i.data;default:return null}}var gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!gn[n.type]:i==="textarea"}function _i(n,i,o,l){mi?jt?jt.push(l):jt=[l]:mi=l,i=uf(i,"onChange"),0<i.length&&(o=new Ea("onChange","change",null,o,l),n.push({event:o,listeners:i}))}var An=null,Ei=null;function Do(n){t0(n,0)}function Su(n){var i=yr(n);if(ki(i))return n}function Oo(n,i){if(n==="change")return i}var bi=!1;if(Sn){var Wt;if(Sn){var xa="oninput"in document;if(!xa){var br=document.createElement("div");br.setAttribute("oninput","return;"),xa=typeof br.oninput=="function"}Wt=xa}else Wt=!1;bi=Wt&&(!document.documentMode||9<document.documentMode)}function Sh(){An&&(An.detachEvent("onpropertychange",Au),Ei=An=null)}function Au(n){if(n.propertyName==="value"&&Su(Ei)){var i=[];_i(i,Ei,n,Er(n)),os(Do,i)}}function Ah(n,i,o){n==="focusin"?(Sh(),An=i,Ei=o,An.attachEvent("onpropertychange",Au)):n==="focusout"&&Sh()}function Us(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Su(Ei)}function Ml(n,i){if(n==="click")return Su(i)}function Ca(n,i){if(n==="input"||n==="change")return Su(i)}function cs(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ur=typeof Object.is=="function"?Object.is:cs;function f(n,i){if(ur(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),l=Object.keys(i);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var d=o[l];if(!Tt.call(i,d)||!ur(n[d],i[d]))return!1}return!0}function p(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _(n,i){var o=p(n);n=0;for(var l;o;){if(o.nodeType===3){if(l=n+o.textContent.length,n<=i&&l>=i)return{node:o,offset:i-n};n=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=p(o)}}function b(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?b(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function A(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=xr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=xr(n.document)}return i}function I(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var O=Sn&&"documentMode"in document&&11>=document.documentMode,P=null,F=null,G=null,X=!1;function L(n,i,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;X||P==null||P!==xr(l)||(l=P,"selectionStart"in l&&I(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),G&&f(G,l)||(G=l,l=uf(F,"onSelect"),0<l.length&&(i=new Ea("onSelect","select",null,i,o),n.push({event:i,listeners:l}),i.target=P)))}function ee(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var q={animationend:ee("Animation","AnimationEnd"),animationiteration:ee("Animation","AnimationIteration"),animationstart:ee("Animation","AnimationStart"),transitionrun:ee("Transition","TransitionRun"),transitionstart:ee("Transition","TransitionStart"),transitioncancel:ee("Transition","TransitionCancel"),transitionend:ee("Transition","TransitionEnd")},$={},te={};Sn&&(te=document.createElement("div").style,"AnimationEvent"in window||(delete q.animationend.animation,delete q.animationiteration.animation,delete q.animationstart.animation),"TransitionEvent"in window||delete q.transitionend.transition);function Q(n){if($[n])return $[n];if(!q[n])return n;var i=q[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in te)return $[n]=i[o];return n}var ae=Q("animationend"),le=Q("animationiteration"),ce=Q("animationstart"),ye=Q("transitionrun"),Ce=Q("transitionstart"),Ve=Q("transitioncancel"),Re=Q("transitionend"),Oe=new Map,ke="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ke.push("scrollEnd");function xe(n,i){Oe.set(n,i),Rr(i,[n])}var ze=new WeakMap;function Je(n,i){if(typeof n=="object"&&n!==null){var o=ze.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ps(i)},ze.set(n,i),i)}return{value:n,source:i,stack:Ps(i)}}var tt=[],lt=0,Zn=0;function it(){for(var n=lt,i=Zn=lt=0;i<n;){var o=tt[i];tt[i++]=null;var l=tt[i];tt[i++]=null;var d=tt[i];tt[i++]=null;var g=tt[i];if(tt[i++]=null,l!==null&&d!==null){var w=l.pending;w===null?d.next=d:(d.next=w.next,w.next=d),l.pending=d}g!==0&&qn(o,d,g)}}function yn(n,i,o,l){tt[lt++]=n,tt[lt++]=i,tt[lt++]=o,tt[lt++]=l,Zn|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function In(n,i,o,l){return yn(n,i,o,l),Ti(n)}function Gi(n,i){return yn(n,null,null,i),Ti(n)}function qn(n,i,o){n.lanes|=o;var l=n.alternate;l!==null&&(l.lanes|=o);for(var d=!1,g=n.return;g!==null;)g.childLanes|=o,l=g.alternate,l!==null&&(l.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(d=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,d&&i!==null&&(d=31-ln(o),n=g.hiddenUpdates,l=n[d],l===null?n[d]=[i]:l.push(i),i.lane=o|536870912),g):null}function Ti(n){if(50<oc)throw oc=0,ep=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var hs={};function vA(n,i,o,l){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(n,i,o,l){return new vA(n,i,o,l)}function $d(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Bs(n,i){var o=n.alternate;return o===null?(o=Wr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function zy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ih(n,i,o,l,d,g){var w=0;if(l=n,typeof n=="function")$d(n)&&(w=1);else if(typeof n=="string")w=E1(n,o,We.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Wr(31,o,i,d),n.elementType=V,n.lanes=g,n;case H:return No(o.children,d,g,i);case he:w=8,d|=24;break;case W:return n=Wr(12,o,i,d|2),n.elementType=W,n.lanes=g,n;case Pe:return n=Wr(13,o,i,d),n.elementType=Pe,n.lanes=g,n;case je:return n=Wr(19,o,i,d),n.elementType=je,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case fe:case me:w=10;break e;case Ee:w=9;break e;case De:w=11;break e;case U:w=14;break e;case N:w=16,l=null;break e}w=29,o=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Wr(w,o,i,d),i.elementType=n,i.type=l,i.lanes=g,i}function No(n,i,o,l){return n=Wr(7,n,l,i),n.lanes=o,n}function Xd(n,i,o){return n=Wr(6,n,null,i),n.lanes=o,n}function Wd(n,i,o){return i=Wr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Iu=[],Ru=0,Rh=null,xh=0,wi=[],Si=0,Po=null,zs=1,js="";function Vo(n,i){Iu[Ru++]=xh,Iu[Ru++]=Rh,Rh=n,xh=i}function jy(n,i,o){wi[Si++]=zs,wi[Si++]=js,wi[Si++]=Po,Po=n;var l=zs;n=js;var d=32-ln(l)-1;l&=~(1<<d),o+=1;var g=32-ln(i)+d;if(30<g){var w=d-d%5;g=(l&(1<<w)-1).toString(32),l>>=w,d-=w,zs=1<<32-ln(i)+d|o<<d|l,js=g+n}else zs=1<<g|o<<d|l,js=n}function Jd(n){n.return!==null&&(Vo(n,1),jy(n,1,0))}function Zd(n){for(;n===Rh;)Rh=Iu[--Ru],Iu[Ru]=null,xh=Iu[--Ru],Iu[Ru]=null;for(;n===Po;)Po=wi[--Si],wi[Si]=null,js=wi[--Si],wi[Si]=null,zs=wi[--Si],wi[Si]=null}var Tr=null,hn=null,Nt=!1,ko=null,fs=!1,em=Error(r(519));function Mo(n){var i=Error(r(418,""));throw Bl(Je(i,n)),em}function qy(n){var i=n.stateNode,o=n.type,l=n.memoizedProps;switch(i[Zt]=n,i[ut]=l,o){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(o=0;o<lc.length;o++)Et(lc[o],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),is(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),fi(i);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),ss(i,l.value,l.defaultValue,l.children),fi(i)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||l.suppressHydrationWarning===!0||s0(i.textContent,o)?(l.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),l.onScroll!=null&&Et("scroll",i),l.onScrollEnd!=null&&Et("scrollend",i),l.onClick!=null&&(i.onclick=lf),i=!0):i=!1,i||Mo(n)}function Fy(n){for(Tr=n.return;Tr;)switch(Tr.tag){case 5:case 13:fs=!1;return;case 27:case 3:fs=!0;return;default:Tr=Tr.return}}function Ll(n){if(n!==Tr)return!1;if(!Nt)return Fy(n),Nt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||gp(n.type,n.memoizedProps)),o=!o),o&&hn&&Mo(n),Fy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){hn=Yi(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}hn=null}}else i===27?(i=hn,Ha(n.type)?(n=Ep,Ep=null,hn=n):hn=i):hn=Tr?Yi(n.stateNode.nextSibling):null;return!0}function Ul(){hn=Tr=null,Nt=!1}function Ky(){var n=ko;return n!==null&&(Lr===null?Lr=n:Lr.push.apply(Lr,n),ko=null),n}function Bl(n){ko===null?ko=[n]:ko.push(n)}var tm=Te(null),Lo=null,qs=null;function Da(n,i,o){Ie(tm,i._currentValue),i._currentValue=o}function Fs(n){n._currentValue=tm.current,Ue(tm)}function nm(n,i,o){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===o)break;n=n.return}}function rm(n,i,o,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var g=d.dependencies;if(g!==null){var w=d.child;g=g.firstContext;e:for(;g!==null;){var x=g;g=d;for(var k=0;k<i.length;k++)if(x.context===i[k]){g.lanes|=o,x=g.alternate,x!==null&&(x.lanes|=o),nm(g.return,o,n),l||(w=null);break e}g=x.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(r(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),nm(w,o,n),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===n){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function zl(n,i,o,l){n=null;for(var d=i,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var x=d.type;ur(d.pendingProps.value,w.value)||(n!==null?n.push(x):n=[x])}}else if(d===un.current){if(w=d.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(pc):n=[pc])}d=d.return}n!==null&&rm(i,n,o,l),i.flags|=262144}function Ch(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Uo(n){Lo=n,qs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lr(n){return Hy(Lo,n)}function Dh(n,i){return Lo===null&&Uo(n),Hy(n,i)}function Hy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},qs===null){if(n===null)throw Error(r(308));qs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else qs=qs.next=i;return o}var _A=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},EA=s.unstable_scheduleCallback,bA=s.unstable_NormalPriority,Pn={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function im(){return{controller:new _A,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&EA(bA,function(){n.controller.abort()})}var ql=null,sm=0,xu=0,Cu=null;function TA(n,i){if(ql===null){var o=ql=[];sm=0,xu=op(),Cu={status:"pending",value:void 0,then:function(l){o.push(l)}}}return sm++,i.then(Gy,Gy),i}function Gy(){if(--sm===0&&ql!==null){Cu!==null&&(Cu.status="fulfilled");var n=ql;ql=null,xu=0,Cu=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function wA(n,i){var o=[],l={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<o.length;d++)(0,o[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),l}var Qy=pe.S;pe.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&TA(n,i),Qy!==null&&Qy(n,i)};var Bo=Te(null);function am(){var n=Bo.current;return n!==null?n:Xt.pooledCache}function Oh(n,i){i===null?Ie(Bo,Bo.current):Ie(Bo,i.pool)}function Yy(){var n=am();return n===null?null:{parent:Pn._currentValue,pool:n}}var Fl=Error(r(460)),$y=Error(r(474)),Nh=Error(r(542)),om={then:function(){}};function Xy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ph(){}function Wy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Ph,Ph),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Zy(n),n;default:if(typeof i.status=="string")i.then(Ph,Ph);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Zy(n),n}throw Kl=i,Fl}}var Kl=null;function Jy(){if(Kl===null)throw Error(r(459));var n=Kl;return Kl=null,n}function Zy(n){if(n===Fl||n===Nh)throw Error(r(483))}var Oa=!1;function um(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Na(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pa(n,i,o){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Mt&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=Ti(n),qn(n,null,o),i}return yn(n,l,i,o),Ti(n)}function Hl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,o|=l,i.lanes=o,Cs(n,o)}}function cm(n,i){var o=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?d=g=i:g=g.next=i}else d=g=i;o={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var hm=!1;function Gl(){if(hm){var n=Cu;if(n!==null)throw n}}function Ql(n,i,o,l){hm=!1;var d=n.updateQueue;Oa=!1;var g=d.firstBaseUpdate,w=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var k=x,se=k.next;k.next=null,w===null?g=se:w.next=se,w=k;var ve=n.alternate;ve!==null&&(ve=ve.updateQueue,x=ve.lastBaseUpdate,x!==w&&(x===null?ve.firstBaseUpdate=se:x.next=se,ve.lastBaseUpdate=k))}if(g!==null){var be=d.baseState;w=0,ve=se=k=null,x=g;do{var oe=x.lane&-536870913,ue=oe!==x.lane;if(ue?(Rt&oe)===oe:(l&oe)===oe){oe!==0&&oe===xu&&(hm=!0),ve!==null&&(ve=ve.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var st=n,nt=x;oe=i;var Kt=o;switch(nt.tag){case 1:if(st=nt.payload,typeof st=="function"){be=st.call(Kt,be,oe);break e}be=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=nt.payload,oe=typeof st=="function"?st.call(Kt,be,oe):st,oe==null)break e;be=S({},be,oe);break e;case 2:Oa=!0}}oe=x.callback,oe!==null&&(n.flags|=64,ue&&(n.flags|=8192),ue=d.callbacks,ue===null?d.callbacks=[oe]:ue.push(oe))}else ue={lane:oe,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ve===null?(se=ve=ue,k=be):ve=ve.next=ue,w|=oe;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;ue=x,x=ue.next,ue.next=null,d.lastBaseUpdate=ue,d.shared.pending=null}}while(!0);ve===null&&(k=be),d.baseState=k,d.firstBaseUpdate=se,d.lastBaseUpdate=ve,g===null&&(d.shared.lanes=0),ja|=w,n.lanes=w,n.memoizedState=be}}function ev(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function tv(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)ev(o[n],i)}var Du=Te(null),Vh=Te(0);function nv(n,i){n=Xs,Ie(Vh,n),Ie(Du,i),Xs=n|i.baseLanes}function fm(){Ie(Vh,Xs),Ie(Du,Du.current)}function dm(){Xs=Vh.current,Ue(Du),Ue(Vh)}var Va=0,mt=null,qt=null,Rn=null,kh=!1,Ou=!1,zo=!1,Mh=0,Yl=0,Nu=null,SA=0;function vn(){throw Error(r(321))}function mm(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!ur(n[o],i[o]))return!1;return!0}function pm(n,i,o,l,d,g){return Va=g,mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,pe.H=n===null||n.memoizedState===null?Bv:zv,zo=!1,g=o(l,d),zo=!1,Ou&&(g=iv(i,o,l,d)),rv(n),g}function rv(n){pe.H=qh;var i=qt!==null&&qt.next!==null;if(Va=0,Rn=qt=mt=null,kh=!1,Yl=0,Nu=null,i)throw Error(r(300));n===null||Fn||(n=n.dependencies,n!==null&&Ch(n)&&(Fn=!0))}function iv(n,i,o,l){mt=n;var d=0;do{if(Ou&&(Nu=null),Yl=0,Ou=!1,25<=d)throw Error(r(301));if(d+=1,Rn=qt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}pe.H=OA,g=i(o,l)}while(Ou);return g}function AA(){var n=pe.H,i=n.useState()[0];return i=typeof i.then=="function"?$l(i):i,n=n.useState()[0],(qt!==null?qt.memoizedState:null)!==n&&(mt.flags|=1024),i}function gm(){var n=Mh!==0;return Mh=0,n}function ym(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function vm(n){if(kh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kh=!1}Va=0,Rn=qt=mt=null,Ou=!1,Yl=Mh=0,Nu=null}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?mt.memoizedState=Rn=n:Rn=Rn.next=n,Rn}function xn(){if(qt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var i=Rn===null?mt.memoizedState:Rn.next;if(i!==null)Rn=i,qt=n;else{if(n===null)throw mt.alternate===null?Error(r(467)):Error(r(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Rn===null?mt.memoizedState=Rn=n:Rn=Rn.next=n}return Rn}function _m(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(n){var i=Yl;return Yl+=1,Nu===null&&(Nu=[]),n=Wy(Nu,n,i),i=mt,(Rn===null?i.memoizedState:Rn.next)===null&&(i=i.alternate,pe.H=i===null||i.memoizedState===null?Bv:zv),n}function Lh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $l(n);if(n.$$typeof===me)return lr(n)}throw Error(r(438,String(n)))}function Em(n){var i=null,o=mt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var l=mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=_m(),mt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),l=0;l<n;l++)o[l]=j;return i.index++,o}function Ks(n,i){return typeof i=="function"?i(n):i}function Uh(n){var i=xn();return bm(i,qt,n)}function bm(n,i,o){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=o;var d=n.baseQueue,g=l.pending;if(g!==null){if(d!==null){var w=d.next;d.next=g.next,g.next=w}i.baseQueue=d=g,l.pending=null}if(g=n.baseState,d===null)n.memoizedState=g;else{i=d.next;var x=w=null,k=null,se=i,ve=!1;do{var be=se.lane&-536870913;if(be!==se.lane?(Rt&be)===be:(Va&be)===be){var oe=se.revertLane;if(oe===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),be===xu&&(ve=!0);else if((Va&oe)===oe){se=se.next,oe===xu&&(ve=!0);continue}else be={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},k===null?(x=k=be,w=g):k=k.next=be,mt.lanes|=oe,ja|=oe;be=se.action,zo&&o(g,be),g=se.hasEagerState?se.eagerState:o(g,be)}else oe={lane:be,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},k===null?(x=k=oe,w=g):k=k.next=oe,mt.lanes|=be,ja|=be;se=se.next}while(se!==null&&se!==i);if(k===null?w=g:k.next=x,!ur(g,n.memoizedState)&&(Fn=!0,ve&&(o=Cu,o!==null)))throw o;n.memoizedState=g,n.baseState=w,n.baseQueue=k,l.lastRenderedState=g}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Tm(n){var i=xn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var l=o.dispatch,d=o.pending,g=i.memoizedState;if(d!==null){o.pending=null;var w=d=d.next;do g=n(g,w.action),w=w.next;while(w!==d);ur(g,i.memoizedState)||(Fn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,l]}function sv(n,i,o){var l=mt,d=xn(),g=Nt;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var w=!ur((qt||d).memoizedState,o);w&&(d.memoizedState=o,Fn=!0),d=d.queue;var x=uv.bind(null,l,d,n);if(Xl(2048,8,x,[n]),d.getSnapshot!==i||w||Rn!==null&&Rn.memoizedState.tag&1){if(l.flags|=2048,Pu(9,Bh(),ov.bind(null,l,d,o,i),null),Xt===null)throw Error(r(349));g||(Va&124)!==0||av(l,i,o)}return o}function av(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=mt.updateQueue,i===null?(i=_m(),mt.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function ov(n,i,o,l){i.value=o,i.getSnapshot=l,lv(i)&&cv(n)}function uv(n,i,o){return o(function(){lv(i)&&cv(n)})}function lv(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!ur(n,o)}catch{return!0}}function cv(n){var i=Gi(n,2);i!==null&&ni(i,n,2)}function wm(n){var i=kr();if(typeof n=="function"){var o=n;if(n=o(),zo){Yn(!0);try{o()}finally{Yn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:n},i}function hv(n,i,o,l){return n.baseState=o,bm(n,qt,typeof l=="function"?l:Ks)}function IA(n,i,o,l,d){if(jh(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};pe.T!==null?o(!0):g.isTransition=!1,l(g),o=i.pending,o===null?(g.next=i.pending=g,fv(i,g)):(g.next=o.next,i.pending=o.next=g)}}function fv(n,i){var o=i.action,l=i.payload,d=n.state;if(i.isTransition){var g=pe.T,w={};pe.T=w;try{var x=o(d,l),k=pe.S;k!==null&&k(w,x),dv(n,i,x)}catch(se){Sm(n,i,se)}finally{pe.T=g}}else try{g=o(d,l),dv(n,i,g)}catch(se){Sm(n,i,se)}}function dv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){mv(n,i,l)},function(l){return Sm(n,i,l)}):mv(n,i,o)}function mv(n,i,o){i.status="fulfilled",i.value=o,pv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,fv(n,o)))}function Sm(n,i,o){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=o,pv(i),i=i.next;while(i!==l)}n.action=null}function pv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function gv(n,i){return i}function yv(n,i){if(Nt){var o=Xt.formState;if(o!==null){e:{var l=mt;if(Nt){if(hn){t:{for(var d=hn,g=fs;d.nodeType!==8;){if(!g){d=null;break t}if(d=Yi(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){hn=Yi(d.nextSibling),l=d.data==="F!";break e}}Mo(l)}l=!1}l&&(i=o[0])}}return o=kr(),o.memoizedState=o.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gv,lastRenderedState:i},o.queue=l,o=Mv.bind(null,mt,l),l.dispatch=o,l=wm(!1),g=Cm.bind(null,mt,!1,l.queue),l=kr(),d={state:i,dispatch:null,action:n,pending:null},l.queue=d,o=IA.bind(null,mt,d,g,o),d.dispatch=o,l.memoizedState=n,[i,o,!1]}function vv(n){var i=xn();return _v(i,qt,n)}function _v(n,i,o){if(i=bm(n,i,gv)[0],n=Uh(Ks)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$l(i)}catch(w){throw w===Fl?Nh:w}else l=i;i=xn();var d=i.queue,g=d.dispatch;return o!==i.memoizedState&&(mt.flags|=2048,Pu(9,Bh(),RA.bind(null,d,o),null)),[l,g,n]}function RA(n,i){n.action=i}function Ev(n){var i=xn(),o=qt;if(o!==null)return _v(i,o,n);xn(),i=i.memoizedState,o=xn();var l=o.queue.dispatch;return o.memoizedState=n,[i,l,!1]}function Pu(n,i,o,l){return n={tag:n,create:o,deps:l,inst:i,next:null},i=mt.updateQueue,i===null&&(i=_m(),mt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(l=o.next,o.next=n,n.next=l,i.lastEffect=n),n}function Bh(){return{destroy:void 0,resource:void 0}}function bv(){return xn().memoizedState}function zh(n,i,o,l){var d=kr();l=l===void 0?null:l,mt.flags|=n,d.memoizedState=Pu(1|i,Bh(),o,l)}function Xl(n,i,o,l){var d=xn();l=l===void 0?null:l;var g=d.memoizedState.inst;qt!==null&&l!==null&&mm(l,qt.memoizedState.deps)?d.memoizedState=Pu(i,g,o,l):(mt.flags|=n,d.memoizedState=Pu(1|i,g,o,l))}function Tv(n,i){zh(8390656,8,n,i)}function wv(n,i){Xl(2048,8,n,i)}function Sv(n,i){return Xl(4,2,n,i)}function Av(n,i){return Xl(4,4,n,i)}function Iv(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Rv(n,i,o){o=o!=null?o.concat([n]):null,Xl(4,4,Iv.bind(null,i,n),o)}function Am(){}function xv(n,i){var o=xn();i=i===void 0?null:i;var l=o.memoizedState;return i!==null&&mm(i,l[1])?l[0]:(o.memoizedState=[n,i],n)}function Cv(n,i){var o=xn();i=i===void 0?null:i;var l=o.memoizedState;if(i!==null&&mm(i,l[1]))return l[0];if(l=n(),zo){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,i],l}function Im(n,i,o){return o===void 0||(Va&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=N_(),mt.lanes|=n,ja|=n,o)}function Dv(n,i,o,l){return ur(o,i)?o:Du.current!==null?(n=Im(n,o,l),ur(n,i)||(Fn=!0),n):(Va&42)===0?(Fn=!0,n.memoizedState=o):(n=N_(),mt.lanes|=n,ja|=n,i)}function Ov(n,i,o,l,d){var g=Me.p;Me.p=g!==0&&8>g?g:8;var w=pe.T,x={};pe.T=x,Cm(n,!1,i,o);try{var k=d(),se=pe.S;if(se!==null&&se(x,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ve=wA(k,l);Wl(n,i,ve,ti(n))}else Wl(n,i,l,ti(n))}catch(be){Wl(n,i,{then:function(){},status:"rejected",reason:be},ti())}finally{Me.p=g,pe.T=w}}function xA(){}function Rm(n,i,o,l){if(n.tag!==5)throw Error(r(476));var d=Nv(n).queue;Ov(n,d,i,Qe,o===null?xA:function(){return Pv(n),o(l)})}function Nv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Qe,baseState:Qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:Qe},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Pv(n){var i=Nv(n).next.queue;Wl(n,i,{},ti())}function xm(){return lr(pc)}function Vv(){return xn().memoizedState}function kv(){return xn().memoizedState}function CA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=ti();n=Na(o);var l=Pa(i,n,o);l!==null&&(ni(l,i,o),Hl(l,i,o)),i={cache:im()},n.payload=i;return}i=i.return}}function DA(n,i,o){var l=ti();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},jh(n)?Lv(i,o):(o=In(n,i,o,l),o!==null&&(ni(o,n,l),Uv(o,i,l)))}function Mv(n,i,o){var l=ti();Wl(n,i,o,l)}function Wl(n,i,o,l){var d={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(jh(n))Lv(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,x=g(w,o);if(d.hasEagerState=!0,d.eagerState=x,ur(x,w))return yn(n,i,d,0),Xt===null&&it(),!1}catch{}finally{}if(o=In(n,i,d,l),o!==null)return ni(o,n,l),Uv(o,i,l),!0}return!1}function Cm(n,i,o,l){if(l={lane:2,revertLane:op(),action:l,hasEagerState:!1,eagerState:null,next:null},jh(n)){if(i)throw Error(r(479))}else i=In(n,o,l,2),i!==null&&ni(i,n,2)}function jh(n){var i=n.alternate;return n===mt||i!==null&&i===mt}function Lv(n,i){Ou=kh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Uv(n,i,o){if((o&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,o|=l,i.lanes=o,Cs(n,o)}}var qh={readContext:lr,use:Lh,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},Bv={readContext:lr,use:Lh,useCallback:function(n,i){return kr().memoizedState=[n,i===void 0?null:i],n},useContext:lr,useEffect:Tv,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,zh(4194308,4,Iv.bind(null,i,n),o)},useLayoutEffect:function(n,i){return zh(4194308,4,n,i)},useInsertionEffect:function(n,i){zh(4,2,n,i)},useMemo:function(n,i){var o=kr();i=i===void 0?null:i;var l=n();if(zo){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,i],l},useReducer:function(n,i,o){var l=kr();if(o!==void 0){var d=o(i);if(zo){Yn(!0);try{o(i)}finally{Yn(!1)}}}else d=i;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=DA.bind(null,mt,n),[l.memoizedState,n]},useRef:function(n){var i=kr();return n={current:n},i.memoizedState=n},useState:function(n){n=wm(n);var i=n.queue,o=Mv.bind(null,mt,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Am,useDeferredValue:function(n,i){var o=kr();return Im(o,n,i)},useTransition:function(){var n=wm(!1);return n=Ov.bind(null,mt,n.queue,!0,!1),kr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var l=mt,d=kr();if(Nt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Xt===null)throw Error(r(349));(Rt&124)!==0||av(l,i,o)}d.memoizedState=o;var g={value:o,getSnapshot:i};return d.queue=g,Tv(uv.bind(null,l,g,n),[n]),l.flags|=2048,Pu(9,Bh(),ov.bind(null,l,g,o,i),null),o},useId:function(){var n=kr(),i=Xt.identifierPrefix;if(Nt){var o=js,l=zs;o=(l&~(1<<32-ln(l)-1)).toString(32)+o,i=""+i+"R"+o,o=Mh++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=SA++,i=""+i+"r"+o.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:xm,useFormState:yv,useActionState:yv,useOptimistic:function(n){var i=kr();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Cm.bind(null,mt,!0,o),o.dispatch=i,[n,i]},useMemoCache:Em,useCacheRefresh:function(){return kr().memoizedState=CA.bind(null,mt)}},zv={readContext:lr,use:Lh,useCallback:xv,useContext:lr,useEffect:wv,useImperativeHandle:Rv,useInsertionEffect:Sv,useLayoutEffect:Av,useMemo:Cv,useReducer:Uh,useRef:bv,useState:function(){return Uh(Ks)},useDebugValue:Am,useDeferredValue:function(n,i){var o=xn();return Dv(o,qt.memoizedState,n,i)},useTransition:function(){var n=Uh(Ks)[0],i=xn().memoizedState;return[typeof n=="boolean"?n:$l(n),i]},useSyncExternalStore:sv,useId:Vv,useHostTransitionStatus:xm,useFormState:vv,useActionState:vv,useOptimistic:function(n,i){var o=xn();return hv(o,qt,n,i)},useMemoCache:Em,useCacheRefresh:kv},OA={readContext:lr,use:Lh,useCallback:xv,useContext:lr,useEffect:wv,useImperativeHandle:Rv,useInsertionEffect:Sv,useLayoutEffect:Av,useMemo:Cv,useReducer:Tm,useRef:bv,useState:function(){return Tm(Ks)},useDebugValue:Am,useDeferredValue:function(n,i){var o=xn();return qt===null?Im(o,n,i):Dv(o,qt.memoizedState,n,i)},useTransition:function(){var n=Tm(Ks)[0],i=xn().memoizedState;return[typeof n=="boolean"?n:$l(n),i]},useSyncExternalStore:sv,useId:Vv,useHostTransitionStatus:xm,useFormState:Ev,useActionState:Ev,useOptimistic:function(n,i){var o=xn();return qt!==null?hv(o,qt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Em,useCacheRefresh:kv},Vu=null,Jl=0;function Fh(n){var i=Jl;return Jl+=1,Vu===null&&(Vu=[]),Wy(Vu,n,i)}function Zl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Kh(n,i){throw i.$$typeof===R?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function jv(n){var i=n._init;return i(n._payload)}function qv(n){function i(Z,K){if(n){var ie=Z.deletions;ie===null?(Z.deletions=[K],Z.flags|=16):ie.push(K)}}function o(Z,K){if(!n)return null;for(;K!==null;)i(Z,K),K=K.sibling;return null}function l(Z){for(var K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function d(Z,K){return Z=Bs(Z,K),Z.index=0,Z.sibling=null,Z}function g(Z,K,ie){return Z.index=ie,n?(ie=Z.alternate,ie!==null?(ie=ie.index,ie<K?(Z.flags|=67108866,K):ie):(Z.flags|=67108866,K)):(Z.flags|=1048576,K)}function w(Z){return n&&Z.alternate===null&&(Z.flags|=67108866),Z}function x(Z,K,ie,_e){return K===null||K.tag!==6?(K=Xd(ie,Z.mode,_e),K.return=Z,K):(K=d(K,ie),K.return=Z,K)}function k(Z,K,ie,_e){var Ke=ie.type;return Ke===H?ve(Z,K,ie.props.children,_e,ie.key):K!==null&&(K.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&jv(Ke)===K.type)?(K=d(K,ie.props),Zl(K,ie),K.return=Z,K):(K=Ih(ie.type,ie.key,ie.props,null,Z.mode,_e),Zl(K,ie),K.return=Z,K)}function se(Z,K,ie,_e){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=Wd(ie,Z.mode,_e),K.return=Z,K):(K=d(K,ie.children||[]),K.return=Z,K)}function ve(Z,K,ie,_e,Ke){return K===null||K.tag!==7?(K=No(ie,Z.mode,_e,Ke),K.return=Z,K):(K=d(K,ie),K.return=Z,K)}function be(Z,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Xd(""+K,Z.mode,ie),K.return=Z,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return ie=Ih(K.type,K.key,K.props,null,Z.mode,ie),Zl(ie,K),ie.return=Z,ie;case z:return K=Wd(K,Z.mode,ie),K.return=Z,K;case N:var _e=K._init;return K=_e(K._payload),be(Z,K,ie)}if(Yt(K)||J(K))return K=No(K,Z.mode,ie,null),K.return=Z,K;if(typeof K.then=="function")return be(Z,Fh(K),ie);if(K.$$typeof===me)return be(Z,Dh(Z,K),ie);Kh(Z,K)}return null}function oe(Z,K,ie,_e){var Ke=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ke!==null?null:x(Z,K,""+ie,_e);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case D:return ie.key===Ke?k(Z,K,ie,_e):null;case z:return ie.key===Ke?se(Z,K,ie,_e):null;case N:return Ke=ie._init,ie=Ke(ie._payload),oe(Z,K,ie,_e)}if(Yt(ie)||J(ie))return Ke!==null?null:ve(Z,K,ie,_e,null);if(typeof ie.then=="function")return oe(Z,K,Fh(ie),_e);if(ie.$$typeof===me)return oe(Z,K,Dh(Z,ie),_e);Kh(Z,ie)}return null}function ue(Z,K,ie,_e,Ke){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return Z=Z.get(ie)||null,x(K,Z,""+_e,Ke);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case D:return Z=Z.get(_e.key===null?ie:_e.key)||null,k(K,Z,_e,Ke);case z:return Z=Z.get(_e.key===null?ie:_e.key)||null,se(K,Z,_e,Ke);case N:var gt=_e._init;return _e=gt(_e._payload),ue(Z,K,ie,_e,Ke)}if(Yt(_e)||J(_e))return Z=Z.get(ie)||null,ve(K,Z,_e,Ke,null);if(typeof _e.then=="function")return ue(Z,K,ie,Fh(_e),Ke);if(_e.$$typeof===me)return ue(Z,K,ie,Dh(K,_e),Ke);Kh(K,_e)}return null}function st(Z,K,ie,_e){for(var Ke=null,gt=null,Xe=K,rt=K=0,Hn=null;Xe!==null&&rt<ie.length;rt++){Xe.index>rt?(Hn=Xe,Xe=null):Hn=Xe.sibling;var Dt=oe(Z,Xe,ie[rt],_e);if(Dt===null){Xe===null&&(Xe=Hn);break}n&&Xe&&Dt.alternate===null&&i(Z,Xe),K=g(Dt,K,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt,Xe=Hn}if(rt===ie.length)return o(Z,Xe),Nt&&Vo(Z,rt),Ke;if(Xe===null){for(;rt<ie.length;rt++)Xe=be(Z,ie[rt],_e),Xe!==null&&(K=g(Xe,K,rt),gt===null?Ke=Xe:gt.sibling=Xe,gt=Xe);return Nt&&Vo(Z,rt),Ke}for(Xe=l(Xe);rt<ie.length;rt++)Hn=ue(Xe,Z,rt,ie[rt],_e),Hn!==null&&(n&&Hn.alternate!==null&&Xe.delete(Hn.key===null?rt:Hn.key),K=g(Hn,K,rt),gt===null?Ke=Hn:gt.sibling=Hn,gt=Hn);return n&&Xe.forEach(function(Xa){return i(Z,Xa)}),Nt&&Vo(Z,rt),Ke}function nt(Z,K,ie,_e){if(ie==null)throw Error(r(151));for(var Ke=null,gt=null,Xe=K,rt=K=0,Hn=null,Dt=ie.next();Xe!==null&&!Dt.done;rt++,Dt=ie.next()){Xe.index>rt?(Hn=Xe,Xe=null):Hn=Xe.sibling;var Xa=oe(Z,Xe,Dt.value,_e);if(Xa===null){Xe===null&&(Xe=Hn);break}n&&Xe&&Xa.alternate===null&&i(Z,Xe),K=g(Xa,K,rt),gt===null?Ke=Xa:gt.sibling=Xa,gt=Xa,Xe=Hn}if(Dt.done)return o(Z,Xe),Nt&&Vo(Z,rt),Ke;if(Xe===null){for(;!Dt.done;rt++,Dt=ie.next())Dt=be(Z,Dt.value,_e),Dt!==null&&(K=g(Dt,K,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt);return Nt&&Vo(Z,rt),Ke}for(Xe=l(Xe);!Dt.done;rt++,Dt=ie.next())Dt=ue(Xe,Z,rt,Dt.value,_e),Dt!==null&&(n&&Dt.alternate!==null&&Xe.delete(Dt.key===null?rt:Dt.key),K=g(Dt,K,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt);return n&&Xe.forEach(function(N1){return i(Z,N1)}),Nt&&Vo(Z,rt),Ke}function Kt(Z,K,ie,_e){if(typeof ie=="object"&&ie!==null&&ie.type===H&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case D:e:{for(var Ke=ie.key;K!==null;){if(K.key===Ke){if(Ke=ie.type,Ke===H){if(K.tag===7){o(Z,K.sibling),_e=d(K,ie.props.children),_e.return=Z,Z=_e;break e}}else if(K.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&jv(Ke)===K.type){o(Z,K.sibling),_e=d(K,ie.props),Zl(_e,ie),_e.return=Z,Z=_e;break e}o(Z,K);break}else i(Z,K);K=K.sibling}ie.type===H?(_e=No(ie.props.children,Z.mode,_e,ie.key),_e.return=Z,Z=_e):(_e=Ih(ie.type,ie.key,ie.props,null,Z.mode,_e),Zl(_e,ie),_e.return=Z,Z=_e)}return w(Z);case z:e:{for(Ke=ie.key;K!==null;){if(K.key===Ke)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){o(Z,K.sibling),_e=d(K,ie.children||[]),_e.return=Z,Z=_e;break e}else{o(Z,K);break}else i(Z,K);K=K.sibling}_e=Wd(ie,Z.mode,_e),_e.return=Z,Z=_e}return w(Z);case N:return Ke=ie._init,ie=Ke(ie._payload),Kt(Z,K,ie,_e)}if(Yt(ie))return st(Z,K,ie,_e);if(J(ie)){if(Ke=J(ie),typeof Ke!="function")throw Error(r(150));return ie=Ke.call(ie),nt(Z,K,ie,_e)}if(typeof ie.then=="function")return Kt(Z,K,Fh(ie),_e);if(ie.$$typeof===me)return Kt(Z,K,Dh(Z,ie),_e);Kh(Z,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,K!==null&&K.tag===6?(o(Z,K.sibling),_e=d(K,ie),_e.return=Z,Z=_e):(o(Z,K),_e=Xd(ie,Z.mode,_e),_e.return=Z,Z=_e),w(Z)):o(Z,K)}return function(Z,K,ie,_e){try{Jl=0;var Ke=Kt(Z,K,ie,_e);return Vu=null,Ke}catch(Xe){if(Xe===Fl||Xe===Nh)throw Xe;var gt=Wr(29,Xe,null,Z.mode);return gt.lanes=_e,gt.return=Z,gt}finally{}}}var ku=qv(!0),Fv=qv(!1),Ai=Te(null),ds=null;function ka(n){var i=n.alternate;Ie(Vn,Vn.current&1),Ie(Ai,n),ds===null&&(i===null||Du.current!==null||i.memoizedState!==null)&&(ds=n)}function Kv(n){if(n.tag===22){if(Ie(Vn,Vn.current),Ie(Ai,n),ds===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(ds=n)}}else Ma()}function Ma(){Ie(Vn,Vn.current),Ie(Ai,Ai.current)}function Hs(n){Ue(Ai),ds===n&&(ds=null),Ue(Vn)}var Vn=Te(0);function Hh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||_p(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Dm(n,i,o,l){i=n.memoizedState,o=o(l,i),o=o==null?i:S({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Om={enqueueSetState:function(n,i,o){n=n._reactInternals;var l=ti(),d=Na(l);d.payload=i,o!=null&&(d.callback=o),i=Pa(n,d,l),i!==null&&(ni(i,n,l),Hl(i,n,l))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var l=ti(),d=Na(l);d.tag=1,d.payload=i,o!=null&&(d.callback=o),i=Pa(n,d,l),i!==null&&(ni(i,n,l),Hl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=ti(),l=Na(o);l.tag=2,i!=null&&(l.callback=i),i=Pa(n,l,o),i!==null&&(ni(i,n,o),Hl(i,n,o))}};function Hv(n,i,o,l,d,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,g,w):i.prototype&&i.prototype.isPureReactComponent?!f(o,l)||!f(d,g):!0}function Gv(n,i,o,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,l),i.state!==n&&Om.enqueueReplaceState(i,i.state,null)}function jo(n,i){var o=i;if("ref"in i){o={};for(var l in i)l!=="ref"&&(o[l]=i[l])}if(n=n.defaultProps){o===i&&(o=S({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}var Gh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Qv(n){Gh(n)}function Yv(n){console.error(n)}function $v(n){Gh(n)}function Qh(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Xv(n,i,o){try{var l=n.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nm(n,i,o){return o=Na(o),o.tag=3,o.payload={element:null},o.callback=function(){Qh(n,i)},o}function Wv(n){return n=Na(n),n.tag=3,n}function Jv(n,i,o,l){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=l.value;n.payload=function(){return d(g)},n.callback=function(){Xv(i,o,l)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Xv(i,o,l),typeof d!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function NA(n,i,o,l,d){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=o.alternate,i!==null&&zl(i,o,d,!0),o=Ai.current,o!==null){switch(o.tag){case 13:return ds===null?np():o.alternate===null&&fn===0&&(fn=3),o.flags&=-257,o.flags|=65536,o.lanes=d,l===om?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([l]):i.add(l),ip(n,l,d)),!1;case 22:return o.flags|=65536,l===om?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([l]):o.add(l)),ip(n,l,d)),!1}throw Error(r(435,o.tag))}return ip(n,l,d),np(),!1}if(Nt)return i=Ai.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==em&&(n=Error(r(422),{cause:l}),Bl(Je(n,o)))):(l!==em&&(i=Error(r(423),{cause:l}),Bl(Je(i,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=Je(l,o),d=Nm(n.stateNode,l,d),cm(n,d),fn!==4&&(fn=2)),!1;var g=Error(r(520),{cause:l});if(g=Je(g,o),ac===null?ac=[g]:ac.push(g),fn!==4&&(fn=2),i===null)return!0;l=Je(l,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=Nm(o.stateNode,l,n),cm(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(qa===null||!qa.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=Wv(d),Jv(d,n,o,l),cm(o,d),!1}o=o.return}while(o!==null);return!1}var Zv=Error(r(461)),Fn=!1;function er(n,i,o,l){i.child=n===null?Fv(i,null,o,l):ku(i,n.child,o,l)}function e_(n,i,o,l,d){o=o.render;var g=i.ref;if("ref"in l){var w={};for(var x in l)x!=="ref"&&(w[x]=l[x])}else w=l;return Uo(i),l=pm(n,i,o,w,g,d),x=gm(),n!==null&&!Fn?(ym(n,i,d),Gs(n,i,d)):(Nt&&x&&Jd(i),i.flags|=1,er(n,i,l,d),i.child)}function t_(n,i,o,l,d){if(n===null){var g=o.type;return typeof g=="function"&&!$d(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,n_(n,i,g,l,d)):(n=Ih(o.type,null,l,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!zm(n,d)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:f,o(w,l)&&n.ref===i.ref)return Gs(n,i,d)}return i.flags|=1,n=Bs(g,l),n.ref=i.ref,n.return=i,i.child=n}function n_(n,i,o,l,d){if(n!==null){var g=n.memoizedProps;if(f(g,l)&&n.ref===i.ref)if(Fn=!1,i.pendingProps=l=g,zm(n,d))(n.flags&131072)!==0&&(Fn=!0);else return i.lanes=n.lanes,Gs(n,i,d)}return Pm(n,i,o,l,d)}function r_(n,i,o){var l=i.pendingProps,d=l.children,g=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=g!==null?g.baseLanes|o:o,n!==null){for(d=i.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;i.childLanes=g&~l}else i.childLanes=0,i.child=null;return i_(n,i,l,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Oh(i,g!==null?g.cachePool:null),g!==null?nv(i,g):fm(),Kv(i);else return i.lanes=i.childLanes=536870912,i_(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(Oh(i,g.cachePool),nv(i,g),Ma(),i.memoizedState=null):(n!==null&&Oh(i,null),fm(),Ma());return er(n,i,d,o),i.child}function i_(n,i,o,l){var d=am();return d=d===null?null:{parent:Pn._currentValue,pool:d},i.memoizedState={baseLanes:o,cachePool:d},n!==null&&Oh(i,null),fm(),Kv(i),n!==null&&zl(n,i,l,!0),null}function Yh(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Pm(n,i,o,l,d){return Uo(i),o=pm(n,i,o,l,void 0,d),l=gm(),n!==null&&!Fn?(ym(n,i,d),Gs(n,i,d)):(Nt&&l&&Jd(i),i.flags|=1,er(n,i,o,d),i.child)}function s_(n,i,o,l,d,g){return Uo(i),i.updateQueue=null,o=iv(i,l,o,d),rv(n),l=gm(),n!==null&&!Fn?(ym(n,i,g),Gs(n,i,g)):(Nt&&l&&Jd(i),i.flags|=1,er(n,i,o,g),i.child)}function a_(n,i,o,l,d){if(Uo(i),i.stateNode===null){var g=hs,w=o.contextType;typeof w=="object"&&w!==null&&(g=lr(w)),g=new o(l,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Om,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=l,g.state=i.memoizedState,g.refs={},um(i),w=o.contextType,g.context=typeof w=="object"&&w!==null?lr(w):hs,g.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Dm(i,o,w,l),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Om.enqueueReplaceState(g,g.state,null),Ql(i,l,g,d),Gl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){g=i.stateNode;var x=i.memoizedProps,k=jo(o,x);g.props=k;var se=g.context,ve=o.contextType;w=hs,typeof ve=="object"&&ve!==null&&(w=lr(ve));var be=o.getDerivedStateFromProps;ve=typeof be=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,ve||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||se!==w)&&Gv(i,g,l,w),Oa=!1;var oe=i.memoizedState;g.state=oe,Ql(i,l,g,d),Gl(),se=i.memoizedState,x||oe!==se||Oa?(typeof be=="function"&&(Dm(i,o,be,l),se=i.memoizedState),(k=Oa||Hv(i,o,k,l,oe,se,w))?(ve||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=se),g.props=l,g.state=se,g.context=w,l=k):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{g=i.stateNode,lm(n,i),w=i.memoizedProps,ve=jo(o,w),g.props=ve,be=i.pendingProps,oe=g.context,se=o.contextType,k=hs,typeof se=="object"&&se!==null&&(k=lr(se)),x=o.getDerivedStateFromProps,(se=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==be||oe!==k)&&Gv(i,g,l,k),Oa=!1,oe=i.memoizedState,g.state=oe,Ql(i,l,g,d),Gl();var ue=i.memoizedState;w!==be||oe!==ue||Oa||n!==null&&n.dependencies!==null&&Ch(n.dependencies)?(typeof x=="function"&&(Dm(i,o,x,l),ue=i.memoizedState),(ve=Oa||Hv(i,o,ve,l,oe,ue,k)||n!==null&&n.dependencies!==null&&Ch(n.dependencies))?(se||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,ue,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,ue,k)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ue),g.props=l,g.state=ue,g.context=k,l=ve):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&oe===n.memoizedState||(i.flags|=1024),l=!1)}return g=l,Yh(n,i),l=(i.flags&128)!==0,g||l?(g=i.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&l?(i.child=ku(i,n.child,null,d),i.child=ku(i,null,o,d)):er(n,i,o,d),i.memoizedState=g.state,n=i.child):n=Gs(n,i,d),n}function o_(n,i,o,l){return Ul(),i.flags|=256,er(n,i,o,l),i.child}var Vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function km(n){return{baseLanes:n,cachePool:Yy()}}function Mm(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Ii),n}function u_(n,i,o){var l=i.pendingProps,d=!1,g=(i.flags&128)!==0,w;if((w=g)||(w=n!==null&&n.memoizedState===null?!1:(Vn.current&2)!==0),w&&(d=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(Nt){if(d?ka(i):Ma(),Nt){var x=hn,k;if(k=x){e:{for(k=x,x=fs;k.nodeType!==8;){if(!x){x=null;break e}if(k=Yi(k.nextSibling),k===null){x=null;break e}}x=k}x!==null?(i.memoizedState={dehydrated:x,treeContext:Po!==null?{id:zs,overflow:js}:null,retryLane:536870912,hydrationErrors:null},k=Wr(18,null,null,0),k.stateNode=x,k.return=i,i.child=k,Tr=i,hn=null,k=!0):k=!1}k||Mo(i)}if(x=i.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return _p(x)?i.lanes=32:i.lanes=536870912,null;Hs(i)}return x=l.children,l=l.fallback,d?(Ma(),d=i.mode,x=$h({mode:"hidden",children:x},d),l=No(l,d,o,null),x.return=i,l.return=i,x.sibling=l,i.child=x,d=i.child,d.memoizedState=km(o),d.childLanes=Mm(n,w,o),i.memoizedState=Vm,l):(ka(i),Lm(i,x))}if(k=n.memoizedState,k!==null&&(x=k.dehydrated,x!==null)){if(g)i.flags&256?(ka(i),i.flags&=-257,i=Um(n,i,o)):i.memoizedState!==null?(Ma(),i.child=n.child,i.flags|=128,i=null):(Ma(),d=l.fallback,x=i.mode,l=$h({mode:"visible",children:l.children},x),d=No(d,x,o,null),d.flags|=2,l.return=i,d.return=i,l.sibling=d,i.child=l,ku(i,n.child,null,o),l=i.child,l.memoizedState=km(o),l.childLanes=Mm(n,w,o),i.memoizedState=Vm,i=d);else if(ka(i),_p(x)){if(w=x.nextSibling&&x.nextSibling.dataset,w)var se=w.dgst;w=se,l=Error(r(419)),l.stack="",l.digest=w,Bl({value:l,source:null,stack:null}),i=Um(n,i,o)}else if(Fn||zl(n,i,o,!1),w=(o&n.childLanes)!==0,Fn||w){if(w=Xt,w!==null&&(l=o&-o,l=(l&42)!==0?1:rs(l),l=(l&(w.suspendedLanes|o))!==0?0:l,l!==0&&l!==k.retryLane))throw k.retryLane=l,Gi(n,l),ni(w,n,l),Zv;x.data==="$?"||np(),i=Um(n,i,o)}else x.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=k.treeContext,hn=Yi(x.nextSibling),Tr=i,Nt=!0,ko=null,fs=!1,n!==null&&(wi[Si++]=zs,wi[Si++]=js,wi[Si++]=Po,zs=n.id,js=n.overflow,Po=i),i=Lm(i,l.children),i.flags|=4096);return i}return d?(Ma(),d=l.fallback,x=i.mode,k=n.child,se=k.sibling,l=Bs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,se!==null?d=Bs(se,d):(d=No(d,x,o,null),d.flags|=2),d.return=i,l.return=i,l.sibling=d,i.child=l,l=d,d=i.child,x=n.child.memoizedState,x===null?x=km(o):(k=x.cachePool,k!==null?(se=Pn._currentValue,k=k.parent!==se?{parent:se,pool:se}:k):k=Yy(),x={baseLanes:x.baseLanes|o,cachePool:k}),d.memoizedState=x,d.childLanes=Mm(n,w,o),i.memoizedState=Vm,l):(ka(i),o=n.child,n=o.sibling,o=Bs(o,{mode:"visible",children:l.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function Lm(n,i){return i=$h({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function $h(n,i){return n=Wr(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Um(n,i,o){return ku(i,n.child,null,o),n=Lm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function l_(n,i,o){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),nm(n.return,i,o)}function Bm(n,i,o,l,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=o,g.tailMode=d)}function c_(n,i,o){var l=i.pendingProps,d=l.revealOrder,g=l.tail;if(er(n,i,l.children,o),l=Vn.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&l_(n,o,i);else if(n.tag===19)l_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(Ie(Vn,l),d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&Hh(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),Bm(i,!1,d,o,g);break;case"backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Hh(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Bm(i,!0,o,null,g);break;case"together":Bm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Gs(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),ja|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(zl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Bs(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Bs(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function zm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Ch(n)))}function PA(n,i,o){switch(i.tag){case 3:Bt(i,i.stateNode.containerInfo),Da(i,Pn,n.memoizedState.cache),Ul();break;case 27:case 5:Di(i);break;case 4:Bt(i,i.stateNode.containerInfo);break;case 10:Da(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ka(i),i.flags|=128,null):(o&i.child.childLanes)!==0?u_(n,i,o):(ka(i),n=Gs(n,i,o),n!==null?n.sibling:null);ka(i);break;case 19:var d=(n.flags&128)!==0;if(l=(o&i.childLanes)!==0,l||(zl(n,i,o,!1),l=(o&i.childLanes)!==0),d){if(l)return c_(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ie(Vn,Vn.current),l)break;return null;case 22:case 23:return i.lanes=0,r_(n,i,o);case 24:Da(i,Pn,n.memoizedState.cache)}return Gs(n,i,o)}function h_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Fn=!0;else{if(!zm(n,o)&&(i.flags&128)===0)return Fn=!1,PA(n,i,o);Fn=(n.flags&131072)!==0}else Fn=!1,Nt&&(i.flags&1048576)!==0&&jy(i,xh,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var l=i.elementType,d=l._init;if(l=d(l._payload),i.type=l,typeof l=="function")$d(l)?(n=jo(l,n),i.tag=1,i=a_(null,i,l,n,o)):(i.tag=0,i=Pm(null,i,l,n,o));else{if(l!=null){if(d=l.$$typeof,d===De){i.tag=11,i=e_(null,i,l,n,o);break e}else if(d===U){i.tag=14,i=t_(null,i,l,n,o);break e}}throw i=Dn(l)||l,Error(r(306,i,""))}}return i;case 0:return Pm(n,i,i.type,i.pendingProps,o);case 1:return l=i.type,d=jo(l,i.pendingProps),a_(n,i,l,d,o);case 3:e:{if(Bt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var g=i.memoizedState;d=g.element,lm(n,i),Ql(i,l,null,o);var w=i.memoizedState;if(l=w.cache,Da(i,Pn,l),l!==g.cache&&rm(i,[Pn],o,!0),Gl(),l=w.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=o_(n,i,l,o);break e}else if(l!==d){d=Je(Error(r(424)),i),Bl(d),i=o_(n,i,l,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(hn=Yi(n.firstChild),Tr=i,Nt=!0,ko=null,fs=!0,o=Fv(i,null,l,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ul(),l===d){i=Gs(n,i,o);break e}er(n,i,l,o)}i=i.child}return i;case 26:return Yh(n,i),n===null?(o=p0(i.type,null,i.pendingProps,null))?i.memoizedState=o:Nt||(o=i.type,n=i.pendingProps,l=cf(et.current).createElement(o),l[Zt]=i,l[ut]=n,nr(l,o,n),Vt(l),i.stateNode=l):i.memoizedState=p0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Di(i),n===null&&Nt&&(l=i.stateNode=f0(i.type,i.pendingProps,et.current),Tr=i,fs=!0,d=hn,Ha(i.type)?(Ep=d,hn=Yi(l.firstChild)):hn=d),er(n,i,i.pendingProps.children,o),Yh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Nt&&((d=l=hn)&&(l=o1(l,i.type,i.pendingProps,fs),l!==null?(i.stateNode=l,Tr=i,hn=Yi(l.firstChild),fs=!1,d=!0):d=!1),d||Mo(i)),Di(i),d=i.type,g=i.pendingProps,w=n!==null?n.memoizedProps:null,l=g.children,gp(d,g)?l=null:w!==null&&gp(d,w)&&(i.flags|=32),i.memoizedState!==null&&(d=pm(n,i,AA,null,null,o),pc._currentValue=d),Yh(n,i),er(n,i,l,o),i.child;case 6:return n===null&&Nt&&((n=o=hn)&&(o=u1(o,i.pendingProps,fs),o!==null?(i.stateNode=o,Tr=i,hn=null,n=!0):n=!1),n||Mo(i)),null;case 13:return u_(n,i,o);case 4:return Bt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=ku(i,null,l,o):er(n,i,l,o),i.child;case 11:return e_(n,i,i.type,i.pendingProps,o);case 7:return er(n,i,i.pendingProps,o),i.child;case 8:return er(n,i,i.pendingProps.children,o),i.child;case 12:return er(n,i,i.pendingProps.children,o),i.child;case 10:return l=i.pendingProps,Da(i,i.type,l.value),er(n,i,l.children,o),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,Uo(i),d=lr(d),l=l(d),i.flags|=1,er(n,i,l,o),i.child;case 14:return t_(n,i,i.type,i.pendingProps,o);case 15:return n_(n,i,i.type,i.pendingProps,o);case 19:return c_(n,i,o);case 31:return l=i.pendingProps,o=i.mode,l={mode:l.mode,children:l.children},n===null?(o=$h(l,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Bs(n.child,l),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return r_(n,i,o);case 24:return Uo(i),l=lr(Pn),n===null?(d=am(),d===null&&(d=Xt,g=im(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),i.memoizedState={parent:l,cache:d},um(i),Da(i,Pn,d)):((n.lanes&o)!==0&&(lm(n,i),Ql(i,null,null,o),Gl()),d=n.memoizedState,g=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Da(i,Pn,l)):(l=g.cache,Da(i,Pn,l),l!==d.cache&&rm(i,[Pn],o,!0))),er(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Qs(n){n.flags|=4}function f_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!E0(i)){if(i=Ai.current,i!==null&&((Rt&4194048)===Rt?ds!==null:(Rt&62914560)!==Rt&&(Rt&536870912)===0||i!==ds))throw Kl=om,$y;n.flags|=8192}}function Xh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Le():536870912,n.lanes|=i,Bu|=i)}function ec(n,i){if(!Nt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function an(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,l=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=o,i}function VA(n,i,o){var l=i.pendingProps;switch(Zd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(i),null;case 1:return an(i),null;case 3:return o=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Fs(Pn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ll(i)?Qs(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ky())),an(i),null;case 26:return o=i.memoizedState,n===null?(Qs(i),o!==null?(an(i),f_(i,o)):(an(i),i.flags&=-16777217)):o?o!==n.memoizedState?(Qs(i),an(i),f_(i,o)):(an(i),i.flags&=-16777217):(n.memoizedProps!==l&&Qs(i),an(i),i.flags&=-16777217),null;case 27:Sr(i),o=et.current;var d=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Qs(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return an(i),null}n=We.current,Ll(i)?qy(i):(n=f0(d,l,o),i.stateNode=n,Qs(i))}return an(i),null;case 5:if(Sr(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Qs(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return an(i),null}if(n=We.current,Ll(i))qy(i);else{switch(d=cf(et.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?d.createElement(o,{is:l.is}):d.createElement(o)}}n[Zt]=i,n[ut]=l;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=n;e:switch(nr(n,o,l),o){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Qs(i)}}return an(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Qs(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=et.current,Ll(i)){if(n=i.stateNode,o=i.memoizedProps,l=null,d=Tr,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[Zt]=i,n=!!(n.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||s0(n.nodeValue,o)),n||Mo(i)}else n=cf(n).createTextNode(l),n[Zt]=i,i.stateNode=n}return an(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ll(i),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Zt]=i}else Ul(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;an(i),d=!1}else d=Ky(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Hs(i),i):(Hs(i),null)}if(Hs(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=l!==null,n=n!==null&&n.memoizedState!==null,o){l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var g=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),Xh(i,i.updateQueue),an(i),null;case 4:return Fe(),n===null&&hp(i.stateNode.containerInfo),an(i),null;case 10:return Fs(i.type),an(i),null;case 19:if(Ue(Vn),d=i.memoizedState,d===null)return an(i),null;if(l=(i.flags&128)!==0,g=d.rendering,g===null)if(l)ec(d,!1);else{if(fn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Hh(n),g!==null){for(i.flags|=128,ec(d,!1),n=g.updateQueue,i.updateQueue=n,Xh(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)zy(o,n),o=o.sibling;return Ie(Vn,Vn.current&1|2),i.child}n=n.sibling}d.tail!==null&&Ar()>Zh&&(i.flags|=128,l=!0,ec(d,!1),i.lanes=4194304)}else{if(!l)if(n=Hh(g),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,Xh(i,n),ec(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Nt)return an(i),null}else 2*Ar()-d.renderingStartTime>Zh&&o!==536870912&&(i.flags|=128,l=!0,ec(d,!1),i.lanes=4194304);d.isBackwards?(g.sibling=i.child,i.child=g):(n=d.last,n!==null?n.sibling=g:i.child=g,d.last=g)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Ar(),i.sibling=null,n=Vn.current,Ie(Vn,l?n&1|2:n&1),i):(an(i),null);case 22:case 23:return Hs(i),dm(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(o&536870912)!==0&&(i.flags&128)===0&&(an(i),i.subtreeFlags&6&&(i.flags|=8192)):an(i),o=i.updateQueue,o!==null&&Xh(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==o&&(i.flags|=2048),n!==null&&Ue(Bo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Fs(Pn),an(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function kA(n,i){switch(Zd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Fs(Pn),Fe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Sr(i),null;case 13:if(Hs(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ul()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ue(Vn),null;case 4:return Fe(),null;case 10:return Fs(i.type),null;case 22:case 23:return Hs(i),dm(),n!==null&&Ue(Bo),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Fs(Pn),null;case 25:return null;default:return null}}function d_(n,i){switch(Zd(i),i.tag){case 3:Fs(Pn),Fe();break;case 26:case 27:case 5:Sr(i);break;case 4:Fe();break;case 13:Hs(i);break;case 19:Ue(Vn);break;case 10:Fs(i.type);break;case 22:case 23:Hs(i),dm(),n!==null&&Ue(Bo);break;case 24:Fs(Pn)}}function tc(n,i){try{var o=i.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var d=l.next;o=d;do{if((o.tag&n)===n){l=void 0;var g=o.create,w=o.inst;l=g(),w.destroy=l}o=o.next}while(o!==d)}}catch(x){Gt(i,i.return,x)}}function La(n,i,o){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&n)===n){var w=l.inst,x=w.destroy;if(x!==void 0){w.destroy=void 0,d=i;var k=o,se=x;try{se()}catch(ve){Gt(d,k,ve)}}}l=l.next}while(l!==g)}}catch(ve){Gt(i,i.return,ve)}}function m_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{tv(i,o)}catch(l){Gt(n,n.return,l)}}}function p_(n,i,o){o.props=jo(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(l){Gt(n,i,l)}}function nc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof o=="function"?n.refCleanup=o(l):o.current=l}}catch(d){Gt(n,i,d)}}function ms(n,i){var o=n.ref,l=n.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(d){Gt(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Gt(n,i,d)}else o.current=null}function g_(n){var i=n.type,o=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(d){Gt(n,n.return,d)}}function jm(n,i,o){try{var l=n.stateNode;n1(l,n.type,o,i),l[ut]=i}catch(d){Gt(n,n.return,d)}}function y_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ha(n.type)||n.tag===4}function qm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ha(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fm(n,i,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=lf));else if(l!==4&&(l===27&&Ha(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Fm(n,i,o),n=n.sibling;n!==null;)Fm(n,i,o),n=n.sibling}function Wh(n,i,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(l!==4&&(l===27&&Ha(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Wh(n,i,o),n=n.sibling;n!==null;)Wh(n,i,o),n=n.sibling}function v_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var l=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);nr(i,l,o),i[Zt]=n,i[ut]=o}catch(g){Gt(n,n.return,g)}}var Ys=!1,_n=!1,Km=!1,__=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function MA(n,i){if(n=n.containerInfo,mp=gf,n=A(n),I(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var d=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var w=0,x=-1,k=-1,se=0,ve=0,be=n,oe=null;t:for(;;){for(var ue;be!==o||d!==0&&be.nodeType!==3||(x=w+d),be!==g||l!==0&&be.nodeType!==3||(k=w+l),be.nodeType===3&&(w+=be.nodeValue.length),(ue=be.firstChild)!==null;)oe=be,be=ue;for(;;){if(be===n)break t;if(oe===o&&++se===d&&(x=w),oe===g&&++ve===l&&(k=w),(ue=be.nextSibling)!==null)break;be=oe,oe=be.parentNode}be=ue}o=x===-1||k===-1?null:{start:x,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(pp={focusedElem:n,selectionRange:o},gf=!1,Kn=i;Kn!==null;)if(i=Kn,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Kn=n;else for(;Kn!==null;){switch(i=Kn,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,d=g.memoizedProps,g=g.memoizedState,l=o.stateNode;try{var st=jo(o.type,d,o.elementType===o.type);n=l.getSnapshotBeforeUpdate(st,g),l.__reactInternalSnapshotBeforeUpdate=n}catch(nt){Gt(o,o.return,nt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)vp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":vp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Kn=n;break}Kn=i.return}}function E_(n,i,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:Ua(n,o),l&4&&tc(5,o);break;case 1:if(Ua(n,o),l&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){Gt(o,o.return,w)}else{var d=jo(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Gt(o,o.return,w)}}l&64&&m_(o),l&512&&nc(o,o.return);break;case 3:if(Ua(n,o),l&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{tv(n,i)}catch(w){Gt(o,o.return,w)}}break;case 27:i===null&&l&4&&v_(o);case 26:case 5:Ua(n,o),i===null&&l&4&&g_(o),l&512&&nc(o,o.return);break;case 12:Ua(n,o);break;case 13:Ua(n,o),l&4&&w_(n,o),l&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=HA.bind(null,o),l1(n,o))));break;case 22:if(l=o.memoizedState!==null||Ys,!l){i=i!==null&&i.memoizedState!==null||_n,d=Ys;var g=_n;Ys=l,(_n=i)&&!g?Ba(n,o,(o.subtreeFlags&8772)!==0):Ua(n,o),Ys=d,_n=g}break;case 30:break;default:Ua(n,o)}}function b_(n){var i=n.alternate;i!==null&&(n.alternate=null,b_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&$n(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var nn=null,Mr=!1;function $s(n,i,o){for(o=o.child;o!==null;)T_(n,i,o),o=o.sibling}function T_(n,i,o){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Pt,o)}catch{}switch(o.tag){case 26:_n||ms(o,i),$s(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||ms(o,i);var l=nn,d=Mr;Ha(o.type)&&(nn=o.stateNode,Mr=!1),$s(n,i,o),hc(o.stateNode),nn=l,Mr=d;break;case 5:_n||ms(o,i);case 6:if(l=nn,d=Mr,nn=null,$s(n,i,o),nn=l,Mr=d,nn!==null)if(Mr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(o.stateNode)}catch(g){Gt(o,i,g)}else try{nn.removeChild(o.stateNode)}catch(g){Gt(o,i,g)}break;case 18:nn!==null&&(Mr?(n=nn,c0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_c(n)):c0(nn,o.stateNode));break;case 4:l=nn,d=Mr,nn=o.stateNode.containerInfo,Mr=!0,$s(n,i,o),nn=l,Mr=d;break;case 0:case 11:case 14:case 15:_n||La(2,o,i),_n||La(4,o,i),$s(n,i,o);break;case 1:_n||(ms(o,i),l=o.stateNode,typeof l.componentWillUnmount=="function"&&p_(o,i,l)),$s(n,i,o);break;case 21:$s(n,i,o);break;case 22:_n=(l=_n)||o.memoizedState!==null,$s(n,i,o),_n=l;break;default:$s(n,i,o)}}function w_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_c(n)}catch(o){Gt(i,i.return,o)}}function LA(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new __),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new __),i;default:throw Error(r(435,n.tag))}}function Hm(n,i){var o=LA(n);i.forEach(function(l){var d=GA.bind(null,n,l);o.has(l)||(o.add(l),l.then(d,d))})}function Jr(n,i){var o=i.deletions;if(o!==null)for(var l=0;l<o.length;l++){var d=o[l],g=n,w=i,x=w;e:for(;x!==null;){switch(x.tag){case 27:if(Ha(x.type)){nn=x.stateNode,Mr=!1;break e}break;case 5:nn=x.stateNode,Mr=!1;break e;case 3:case 4:nn=x.stateNode.containerInfo,Mr=!0;break e}x=x.return}if(nn===null)throw Error(r(160));T_(g,w,d),nn=null,Mr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)S_(i,n),i=i.sibling}var Qi=null;function S_(n,i){var o=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jr(i,n),Zr(n),l&4&&(La(3,n,n.return),tc(3,n),La(5,n,n.return));break;case 1:Jr(i,n),Zr(n),l&512&&(_n||o===null||ms(o,o.return)),l&64&&Ys&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var d=Qi;if(Jr(i,n),Zr(n),l&512&&(_n||o===null||ms(o,o.return)),l&4){var g=o!==null?o.memoizedState:null;if(l=n.memoizedState,o===null)if(l===null)if(n.stateNode===null){e:{l=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Os]||g[Zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(l),d.head.insertBefore(g,d.querySelector("head > title"))),nr(g,l,o),g[Zt]=n,Vt(g),l=g;break e;case"link":var w=v0("link","href",d).get(l+(o.href||""));if(w){for(var x=0;x<w.length;x++)if(g=w[x],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(x,1);break t}}g=d.createElement(l),nr(g,l,o),d.head.appendChild(g);break;case"meta":if(w=v0("meta","content",d).get(l+(o.content||""))){for(x=0;x<w.length;x++)if(g=w[x],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(x,1);break t}}g=d.createElement(l),nr(g,l,o),d.head.appendChild(g);break;default:throw Error(r(468,l))}g[Zt]=n,Vt(g),l=g}n.stateNode=l}else _0(d,n.type,n.stateNode);else n.stateNode=y0(d,l,n.memoizedProps);else g!==l?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,l===null?_0(d,n.type,n.stateNode):y0(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&jm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Jr(i,n),Zr(n),l&512&&(_n||o===null||ms(o,o.return)),o!==null&&l&4&&jm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Jr(i,n),Zr(n),l&512&&(_n||o===null||ms(o,o.return)),n.flags&32){d=n.stateNode;try{Cr(d,"")}catch(ue){Gt(n,n.return,ue)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,jm(n,d,o!==null?o.memoizedProps:d)),l&1024&&(Km=!0);break;case 6:if(Jr(i,n),Zr(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,o=n.stateNode;try{o.nodeValue=l}catch(ue){Gt(n,n.return,ue)}}break;case 3:if(df=null,d=Qi,Qi=hf(i.containerInfo),Jr(i,n),Qi=d,Zr(n),l&4&&o!==null&&o.memoizedState.isDehydrated)try{_c(i.containerInfo)}catch(ue){Gt(n,n.return,ue)}Km&&(Km=!1,A_(n));break;case 4:l=Qi,Qi=hf(n.stateNode.containerInfo),Jr(i,n),Zr(n),Qi=l;break;case 12:Jr(i,n),Zr(n);break;case 13:Jr(i,n),Zr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Wm=Ar()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Hm(n,l)));break;case 22:d=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,se=Ys,ve=_n;if(Ys=se||d,_n=ve||k,Jr(i,n),_n=ve,Ys=se,Zr(n),l&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(o===null||k||Ys||_n||qo(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(g=k.stateNode,d)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{x=k.stateNode;var be=k.memoizedProps.style,oe=be!=null&&be.hasOwnProperty("display")?be.display:null;x.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ue){Gt(k,k.return,ue)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(ue){Gt(k,k.return,ue)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,Hm(n,o))));break;case 19:Jr(i,n),Zr(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Hm(n,l)));break;case 30:break;case 21:break;default:Jr(i,n),Zr(n)}}function Zr(n){var i=n.flags;if(i&2){try{for(var o,l=n.return;l!==null;){if(y_(l)){o=l;break}l=l.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,g=qm(n);Wh(n,g,d);break;case 5:var w=o.stateNode;o.flags&32&&(Cr(w,""),o.flags&=-33);var x=qm(n);Wh(n,x,w);break;case 3:case 4:var k=o.stateNode.containerInfo,se=qm(n);Fm(n,se,k);break;default:throw Error(r(161))}}catch(ve){Gt(n,n.return,ve)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function A_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;A_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ua(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)E_(n,i.alternate,i),i=i.sibling}function qo(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:La(4,i,i.return),qo(i);break;case 1:ms(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&p_(i,i.return,o),qo(i);break;case 27:hc(i.stateNode);case 26:case 5:ms(i,i.return),qo(i);break;case 22:i.memoizedState===null&&qo(i);break;case 30:qo(i);break;default:qo(i)}n=n.sibling}}function Ba(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=n,g=i,w=g.flags;switch(g.tag){case 0:case 11:case 15:Ba(d,g,o),tc(4,g);break;case 1:if(Ba(d,g,o),l=g,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(se){Gt(l,l.return,se)}if(l=g,d=l.updateQueue,d!==null){var x=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)ev(k[d],x)}catch(se){Gt(l,l.return,se)}}o&&w&64&&m_(g),nc(g,g.return);break;case 27:v_(g);case 26:case 5:Ba(d,g,o),o&&l===null&&w&4&&g_(g),nc(g,g.return);break;case 12:Ba(d,g,o);break;case 13:Ba(d,g,o),o&&w&4&&w_(d,g);break;case 22:g.memoizedState===null&&Ba(d,g,o),nc(g,g.return);break;case 30:break;default:Ba(d,g,o)}i=i.sibling}}function Gm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&jl(o))}function Qm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n))}function ps(n,i,o,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)I_(n,i,o,l),i=i.sibling}function I_(n,i,o,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:ps(n,i,o,l),d&2048&&tc(9,i);break;case 1:ps(n,i,o,l);break;case 3:ps(n,i,o,l),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n)));break;case 12:if(d&2048){ps(n,i,o,l),n=i.stateNode;try{var g=i.memoizedProps,w=g.id,x=g.onPostCommit;typeof x=="function"&&x(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){Gt(i,i.return,k)}}else ps(n,i,o,l);break;case 13:ps(n,i,o,l);break;case 23:break;case 22:g=i.stateNode,w=i.alternate,i.memoizedState!==null?g._visibility&2?ps(n,i,o,l):rc(n,i):g._visibility&2?ps(n,i,o,l):(g._visibility|=2,Mu(n,i,o,l,(i.subtreeFlags&10256)!==0)),d&2048&&Gm(w,i);break;case 24:ps(n,i,o,l),d&2048&&Qm(i.alternate,i);break;default:ps(n,i,o,l)}}function Mu(n,i,o,l,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,w=i,x=o,k=l,se=w.flags;switch(w.tag){case 0:case 11:case 15:Mu(g,w,x,k,d),tc(8,w);break;case 23:break;case 22:var ve=w.stateNode;w.memoizedState!==null?ve._visibility&2?Mu(g,w,x,k,d):rc(g,w):(ve._visibility|=2,Mu(g,w,x,k,d)),d&&se&2048&&Gm(w.alternate,w);break;case 24:Mu(g,w,x,k,d),d&&se&2048&&Qm(w.alternate,w);break;default:Mu(g,w,x,k,d)}i=i.sibling}}function rc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,l=i,d=l.flags;switch(l.tag){case 22:rc(o,l),d&2048&&Gm(l.alternate,l);break;case 24:rc(o,l),d&2048&&Qm(l.alternate,l);break;default:rc(o,l)}i=i.sibling}}var ic=8192;function Lu(n){if(n.subtreeFlags&ic)for(n=n.child;n!==null;)R_(n),n=n.sibling}function R_(n){switch(n.tag){case 26:Lu(n),n.flags&ic&&n.memoizedState!==null&&T1(Qi,n.memoizedState,n.memoizedProps);break;case 5:Lu(n);break;case 3:case 4:var i=Qi;Qi=hf(n.stateNode.containerInfo),Lu(n),Qi=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ic,ic=16777216,Lu(n),ic=i):Lu(n));break;default:Lu(n)}}function x_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function sc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var l=i[o];Kn=l,D_(l,n)}x_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)C_(n),n=n.sibling}function C_(n){switch(n.tag){case 0:case 11:case 15:sc(n),n.flags&2048&&La(9,n,n.return);break;case 3:sc(n);break;case 12:sc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Jh(n)):sc(n);break;default:sc(n)}}function Jh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var l=i[o];Kn=l,D_(l,n)}x_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:La(8,i,i.return),Jh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Jh(i));break;default:Jh(i)}n=n.sibling}}function D_(n,i){for(;Kn!==null;){var o=Kn;switch(o.tag){case 0:case 11:case 15:La(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jl(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,Kn=l;else e:for(o=n;Kn!==null;){l=Kn;var d=l.sibling,g=l.return;if(b_(l),l===o){Kn=null;break e}if(d!==null){d.return=g,Kn=d;break e}Kn=g}}}var UA={getCacheForType:function(n){var i=lr(Pn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},BA=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Xt=null,_t=null,Rt=0,Lt=0,ei=null,za=!1,Uu=!1,Ym=!1,Xs=0,fn=0,ja=0,Fo=0,$m=0,Ii=0,Bu=0,ac=null,Lr=null,Xm=!1,Wm=0,Zh=1/0,ef=null,qa=null,tr=0,Fa=null,zu=null,ju=0,Jm=0,Zm=null,O_=null,oc=0,ep=null;function ti(){if((Mt&2)!==0&&Rt!==0)return Rt&-Rt;if(pe.T!==null){var n=xu;return n!==0?n:op()}return gr()}function N_(){Ii===0&&(Ii=(Rt&536870912)===0||Nt?ns():536870912);var n=Ai.current;return n!==null&&(n.flags|=32),Ii}function ni(n,i,o){(n===Xt&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)&&(qu(n,0),Ka(n,Rt,Ii,!1)),ui(n,o),((Mt&2)===0||n!==Xt)&&(n===Xt&&((Mt&2)===0&&(Fo|=o),fn===4&&Ka(n,Rt,Ii,!1)),gs(n))}function P_(n,i,o){if((Mt&6)!==0)throw Error(r(327));var l=!o&&(i&124)===0&&(i&n.expiredLanes)===0||jr(n,i),d=l?qA(n,i):rp(n,i,!0),g=l;do{if(d===0){Uu&&!l&&Ka(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!zA(o)){d=rp(n,i,!1),g=!1;continue}if(d===2){if(g=i,n.errorRecoveryDisabledLanes&g)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var x=n;d=ac;var k=x.current.memoizedState.isDehydrated;if(k&&(qu(x,w).flags|=256),w=rp(x,w,!1),w!==2){if(Ym&&!k){x.errorRecoveryDisabledLanes|=g,Fo|=g,d=4;break e}g=Lr,Lr=d,g!==null&&(Lr===null?Lr=g:Lr.push.apply(Lr,g))}d=w}if(g=!1,d!==2)continue}}if(d===1){qu(n,0),Ka(n,i,0,!0);break}e:{switch(l=n,g=d,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ka(l,i,Ii,!za);break e;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Wm+300-Ar(),10<d)){if(Ka(l,i,Ii,!za),qe(l,0,!0)!==0)break e;l.timeoutHandle=u0(V_.bind(null,l,o,Lr,ef,Xm,i,Ii,Fo,Bu,za,g,2,-0,0),d);break e}V_(l,o,Lr,ef,Xm,i,Ii,Fo,Bu,za,g,0,-0,0)}}break}while(!0);gs(n)}function V_(n,i,o,l,d,g,w,x,k,se,ve,be,oe,ue){if(n.timeoutHandle=-1,be=i.subtreeFlags,(be&8192||(be&16785408)===16785408)&&(mc={stylesheets:null,count:0,unsuspend:b1},R_(i),be=w1(),be!==null)){n.cancelPendingCommit=be(j_.bind(null,n,i,g,o,l,d,w,x,k,ve,1,oe,ue)),Ka(n,g,w,!se);return}j_(n,i,g,o,l,d,w,x,k)}function zA(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var d=o[l],g=d.getSnapshot;d=d.value;try{if(!ur(g(),d))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ka(n,i,o,l){i&=~$m,i&=~Fo,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var d=i;0<d;){var g=31-ln(d),w=1<<g;l[g]=-1,d&=~w}o!==0&&Kr(n,o,i)}function tf(){return(Mt&6)===0?(uc(0),!1):!0}function tp(){if(_t!==null){if(Lt===0)var n=_t.return;else n=_t,qs=Lo=null,vm(n),Vu=null,Jl=0,n=_t;for(;n!==null;)d_(n.alternate,n),n=n.return;_t=null}}function qu(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,i1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),tp(),Xt=n,_t=o=Bs(n.current,null),Rt=i,Lt=0,ei=null,za=!1,Uu=jr(n,i),Ym=!1,Bu=Ii=$m=Fo=ja=fn=0,Lr=ac=null,Xm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var d=31-ln(l),g=1<<d;i|=n[d],l&=~g}return Xs=i,it(),o}function k_(n,i){mt=null,pe.H=qh,i===Fl||i===Nh?(i=Jy(),Lt=3):i===$y?(i=Jy(),Lt=4):Lt=i===Zv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ei=i,_t===null&&(fn=1,Qh(n,Je(i,n.current)))}function M_(){var n=pe.H;return pe.H=qh,n===null?qh:n}function L_(){var n=pe.A;return pe.A=UA,n}function np(){fn=4,za||(Rt&4194048)!==Rt&&Ai.current!==null||(Uu=!0),(ja&134217727)===0&&(Fo&134217727)===0||Xt===null||Ka(Xt,Rt,Ii,!1)}function rp(n,i,o){var l=Mt;Mt|=2;var d=M_(),g=L_();(Xt!==n||Rt!==i)&&(ef=null,qu(n,i)),i=!1;var w=fn;e:do try{if(Lt!==0&&_t!==null){var x=_t,k=ei;switch(Lt){case 8:tp(),w=6;break e;case 3:case 2:case 9:case 6:Ai.current===null&&(i=!0);var se=Lt;if(Lt=0,ei=null,Fu(n,x,k,se),o&&Uu){w=0;break e}break;default:se=Lt,Lt=0,ei=null,Fu(n,x,k,se)}}jA(),w=fn;break}catch(ve){k_(n,ve)}while(!0);return i&&n.shellSuspendCounter++,qs=Lo=null,Mt=l,pe.H=d,pe.A=g,_t===null&&(Xt=null,Rt=0,it()),w}function jA(){for(;_t!==null;)U_(_t)}function qA(n,i){var o=Mt;Mt|=2;var l=M_(),d=L_();Xt!==n||Rt!==i?(ef=null,Zh=Ar()+500,qu(n,i)):Uu=jr(n,i);e:do try{if(Lt!==0&&_t!==null){i=_t;var g=ei;t:switch(Lt){case 1:Lt=0,ei=null,Fu(n,i,g,1);break;case 2:case 9:if(Xy(g)){Lt=0,ei=null,B_(i);break}i=function(){Lt!==2&&Lt!==9||Xt!==n||(Lt=7),gs(n)},g.then(i,i);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:Xy(g)?(Lt=0,ei=null,B_(i)):(Lt=0,ei=null,Fu(n,i,g,7));break;case 5:var w=null;switch(_t.tag){case 26:w=_t.memoizedState;case 5:case 27:var x=_t;if(!w||E0(w)){Lt=0,ei=null;var k=x.sibling;if(k!==null)_t=k;else{var se=x.return;se!==null?(_t=se,nf(se)):_t=null}break t}}Lt=0,ei=null,Fu(n,i,g,5);break;case 6:Lt=0,ei=null,Fu(n,i,g,6);break;case 8:tp(),fn=6;break e;default:throw Error(r(462))}}FA();break}catch(ve){k_(n,ve)}while(!0);return qs=Lo=null,pe.H=l,pe.A=d,Mt=o,_t!==null?0:(Xt=null,Rt=0,it(),fn)}function FA(){for(;_t!==null&&!zr();)U_(_t)}function U_(n){var i=h_(n.alternate,n,Xs);n.memoizedProps=n.pendingProps,i===null?nf(n):_t=i}function B_(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=s_(o,i,i.pendingProps,i.type,void 0,Rt);break;case 11:i=s_(o,i,i.pendingProps,i.type.render,i.ref,Rt);break;case 5:vm(i);default:d_(o,i),i=_t=zy(i,Xs),i=h_(o,i,Xs)}n.memoizedProps=n.pendingProps,i===null?nf(n):_t=i}function Fu(n,i,o,l){qs=Lo=null,vm(i),Vu=null,Jl=0;var d=i.return;try{if(NA(n,d,i,o,Rt)){fn=1,Qh(n,Je(o,n.current)),_t=null;return}}catch(g){if(d!==null)throw _t=d,g;fn=1,Qh(n,Je(o,n.current)),_t=null;return}i.flags&32768?(Nt||l===1?n=!0:Uu||(Rt&536870912)!==0?n=!1:(za=n=!0,(l===2||l===9||l===3||l===6)&&(l=Ai.current,l!==null&&l.tag===13&&(l.flags|=16384))),z_(i,n)):nf(i)}function nf(n){var i=n;do{if((i.flags&32768)!==0){z_(i,za);return}n=i.return;var o=VA(i.alternate,i,Xs);if(o!==null){_t=o;return}if(i=i.sibling,i!==null){_t=i;return}_t=i=n}while(i!==null);fn===0&&(fn=5)}function z_(n,i){do{var o=kA(n.alternate,n);if(o!==null){o.flags&=32767,_t=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){_t=n;return}_t=n=o}while(n!==null);fn=6,_t=null}function j_(n,i,o,l,d,g,w,x,k){n.cancelPendingCommit=null;do rf();while(tr!==0);if((Mt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Zn,xs(n,o,g,w,x,k),n===Xt&&(_t=Xt=null,Rt=0),zu=i,Fa=n,ju=o,Jm=g,Zm=d,O_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,QA(Ln,function(){return G_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=pe.T,pe.T=null,d=Me.p,Me.p=2,w=Mt,Mt|=4;try{MA(n,i,o)}finally{Mt=w,Me.p=d,pe.T=l}}tr=1,q_(),F_(),K_()}}function q_(){if(tr===1){tr=0;var n=Fa,i=zu,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=pe.T,pe.T=null;var l=Me.p;Me.p=2;var d=Mt;Mt|=4;try{S_(i,n);var g=pp,w=A(n.containerInfo),x=g.focusedElem,k=g.selectionRange;if(w!==x&&x&&x.ownerDocument&&b(x.ownerDocument.documentElement,x)){if(k!==null&&I(x)){var se=k.start,ve=k.end;if(ve===void 0&&(ve=se),"selectionStart"in x)x.selectionStart=se,x.selectionEnd=Math.min(ve,x.value.length);else{var be=x.ownerDocument||document,oe=be&&be.defaultView||window;if(oe.getSelection){var ue=oe.getSelection(),st=x.textContent.length,nt=Math.min(k.start,st),Kt=k.end===void 0?nt:Math.min(k.end,st);!ue.extend&&nt>Kt&&(w=Kt,Kt=nt,nt=w);var Z=_(x,nt),K=_(x,Kt);if(Z&&K&&(ue.rangeCount!==1||ue.anchorNode!==Z.node||ue.anchorOffset!==Z.offset||ue.focusNode!==K.node||ue.focusOffset!==K.offset)){var ie=be.createRange();ie.setStart(Z.node,Z.offset),ue.removeAllRanges(),nt>Kt?(ue.addRange(ie),ue.extend(K.node,K.offset)):(ie.setEnd(K.node,K.offset),ue.addRange(ie))}}}}for(be=[],ue=x;ue=ue.parentNode;)ue.nodeType===1&&be.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<be.length;x++){var _e=be[x];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}gf=!!mp,pp=mp=null}finally{Mt=d,Me.p=l,pe.T=o}}n.current=i,tr=2}}function F_(){if(tr===2){tr=0;var n=Fa,i=zu,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=pe.T,pe.T=null;var l=Me.p;Me.p=2;var d=Mt;Mt|=4;try{E_(n,i.alternate,i)}finally{Mt=d,Me.p=l,pe.T=o}}tr=3}}function K_(){if(tr===4||tr===3){tr=0,_u();var n=Fa,i=zu,o=ju,l=O_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?tr=5:(tr=0,zu=Fa=null,H_(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(qa=null),pa(o),i=i.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Pt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=pe.T,d=Me.p,Me.p=2,pe.T=null;try{for(var g=n.onRecoverableError,w=0;w<l.length;w++){var x=l[w];g(x.value,{componentStack:x.stack})}}finally{pe.T=i,Me.p=d}}(ju&3)!==0&&rf(),gs(n),d=n.pendingLanes,(o&4194090)!==0&&(d&42)!==0?n===ep?oc++:(oc=0,ep=n):oc=0,uc(0)}}function H_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jl(i)))}function rf(n){return q_(),F_(),K_(),G_()}function G_(){if(tr!==5)return!1;var n=Fa,i=Jm;Jm=0;var o=pa(ju),l=pe.T,d=Me.p;try{Me.p=32>o?32:o,pe.T=null,o=Zm,Zm=null;var g=Fa,w=ju;if(tr=0,zu=Fa=null,ju=0,(Mt&6)!==0)throw Error(r(331));var x=Mt;if(Mt|=4,C_(g.current),I_(g,g.current,w,o),Mt=x,uc(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Pt,g)}catch{}return!0}finally{Me.p=d,pe.T=l,H_(n,i)}}function Q_(n,i,o){i=Je(o,i),i=Nm(n.stateNode,i,2),n=Pa(n,i,2),n!==null&&(ui(n,2),gs(n))}function Gt(n,i,o){if(n.tag===3)Q_(n,n,o);else for(;i!==null;){if(i.tag===3){Q_(i,n,o);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(qa===null||!qa.has(l))){n=Je(o,n),o=Wv(2),l=Pa(i,o,2),l!==null&&(Jv(o,l,i,n),ui(l,2),gs(l));break}}i=i.return}}function ip(n,i,o){var l=n.pingCache;if(l===null){l=n.pingCache=new BA;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(o)||(Ym=!0,d.add(o),n=KA.bind(null,n,i,o),i.then(n,n))}function KA(n,i,o){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(Rt&o)===o&&(fn===4||fn===3&&(Rt&62914560)===Rt&&300>Ar()-Wm?(Mt&2)===0&&qu(n,0):$m|=o,Bu===Rt&&(Bu=0)),gs(n)}function Y_(n,i){i===0&&(i=Le()),n=Gi(n,i),n!==null&&(ui(n,i),gs(n))}function HA(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Y_(n,o)}function GA(n,i){var o=0;switch(n.tag){case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Y_(n,o)}function QA(n,i){return Br(n,i)}var sf=null,Ku=null,sp=!1,af=!1,ap=!1,Ko=0;function gs(n){n!==Ku&&n.next===null&&(Ku===null?sf=Ku=n:Ku=Ku.next=n),af=!0,sp||(sp=!0,$A())}function uc(n,i){if(!ap&&af){ap=!0;do for(var o=!1,l=sf;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var g=0;else{var w=l.suspendedLanes,x=l.pingedLanes;g=(1<<31-ln(42|n)+1)-1,g&=d&~(w&~x),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,J_(l,g))}else g=Rt,g=qe(l,l===Xt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||jr(l,g)||(o=!0,J_(l,g));l=l.next}while(o);ap=!1}}function YA(){$_()}function $_(){af=sp=!1;var n=0;Ko!==0&&(r1()&&(n=Ko),Ko=0);for(var i=Ar(),o=null,l=sf;l!==null;){var d=l.next,g=X_(l,i);g===0?(l.next=null,o===null?sf=d:o.next=d,d===null&&(Ku=o)):(o=l,(n!==0||(g&3)!==0)&&(af=!0)),l=d}uc(n)}function X_(n,i){for(var o=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var w=31-ln(g),x=1<<w,k=d[w];k===-1?((x&o)===0||(x&l)!==0)&&(d[w]=qr(x,i)):k<=i&&(n.expiredLanes|=x),g&=~x}if(i=Xt,o=Rt,o=qe(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,o===0||n===i&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Rs(l),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||jr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(l!==null&&Rs(l),pa(o)){case 2:case 8:o=es;break;case 32:o=Ln;break;case 268435456:o=ai;break;default:o=Ln}return l=W_.bind(null,n),o=Br(o,l),n.callbackPriority=i,n.callbackNode=o,i}return l!==null&&l!==null&&Rs(l),n.callbackPriority=2,n.callbackNode=null,2}function W_(n,i){if(tr!==0&&tr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(rf()&&n.callbackNode!==o)return null;var l=Rt;return l=qe(n,n===Xt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(P_(n,l,i),X_(n,Ar()),n.callbackNode!=null&&n.callbackNode===o?W_.bind(null,n):null)}function J_(n,i){if(rf())return null;P_(n,i,!0)}function $A(){s1(function(){(Mt&6)!==0?Br(_o,YA):$_()})}function op(){return Ko===0&&(Ko=ns()),Ko}function Z_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Mi(""+n)}function e0(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function XA(n,i,o,l,d){if(i==="submit"&&o&&o.stateNode===d){var g=Z_((d[ut]||null).action),w=l.submitter;w&&(i=(i=w[ut]||null)?Z_(i.formAction):w.getAttribute("formAction"),i!==null&&(g=i,w=null));var x=new Ea("action","action",null,l,d);n.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ko!==0){var k=w?e0(d,w):new FormData(d);Rm(o,{pending:!0,data:k,method:d.method,action:g},null,k)}}else typeof g=="function"&&(x.preventDefault(),k=w?e0(d,w):new FormData(d),Rm(o,{pending:!0,data:k,method:d.method,action:g},g,k))},currentTarget:d}]})}}for(var up=0;up<ke.length;up++){var lp=ke[up],WA=lp.toLowerCase(),JA=lp[0].toUpperCase()+lp.slice(1);xe(WA,"on"+JA)}xe(ae,"onAnimationEnd"),xe(le,"onAnimationIteration"),xe(ce,"onAnimationStart"),xe("dblclick","onDoubleClick"),xe("focusin","onFocus"),xe("focusout","onBlur"),xe(ye,"onTransitionRun"),xe(Ce,"onTransitionStart"),xe(Ve,"onTransitionCancel"),xe(Re,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function t0(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var l=n[o],d=l.event;l=l.listeners;e:{var g=void 0;if(i)for(var w=l.length-1;0<=w;w--){var x=l[w],k=x.instance,se=x.currentTarget;if(x=x.listener,k!==g&&d.isPropagationStopped())break e;g=x,d.currentTarget=se;try{g(d)}catch(ve){Gh(ve)}d.currentTarget=null,g=k}else for(w=0;w<l.length;w++){if(x=l[w],k=x.instance,se=x.currentTarget,x=x.listener,k!==g&&d.isPropagationStopped())break e;g=x,d.currentTarget=se;try{g(d)}catch(ve){Gh(ve)}d.currentTarget=null,g=k}}}}function Et(n,i){var o=i[Eo];o===void 0&&(o=i[Eo]=new Set);var l=n+"__bubble";o.has(l)||(n0(i,n,2,!1),o.add(l))}function cp(n,i,o){var l=0;i&&(l|=4),n0(o,n,l,i)}var of="_reactListening"+Math.random().toString(36).slice(2);function hp(n){if(!n[of]){n[of]=!0,ya.forEach(function(o){o!=="selectionchange"&&(ZA.has(o)||cp(o,!1,n),cp(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[of]||(i[of]=!0,cp("selectionchange",!1,i))}}function n0(n,i,o,l){switch(I0(i)){case 2:var d=I1;break;case 8:d=R1;break;default:d=Ap}o=d.bind(null,i,o,n),d=void 0,!Dr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function fp(n,i,o,l,d){var g=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var x=l.stateNode.containerInfo;if(x===d)break;if(w===4)for(w=l.return;w!==null;){var k=w.tag;if((k===3||k===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;x!==null;){if(w=ir(x),w===null)return;if(k=w.tag,k===5||k===6||k===26||k===27){l=g=w;continue e}x=x.parentNode}}l=l.return}os(function(){var se=g,ve=Er(o),be=[];e:{var oe=Oe.get(n);if(oe!==void 0){var ue=Ea,st=n;switch(n){case"keypress":if(Nr(o)===0)break e;case"keydown":case"keyup":ue=Ki;break;case"focusin":st="focus",ue=zi;break;case"focusout":st="blur",ue=zi;break;case"beforeblur":case"afterblur":ue=zi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Aa;break;case ae:case le:case ce:ue=Ms;break;case Re:ue=Ia;break;case"scroll":case"scrollend":ue=Vs;break;case"wheel":ue=Hi;break;case"copy":case"cut":case"paste":ue=ji;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Sa;break;case"toggle":case"beforetoggle":ue=Co}var nt=(i&4)!==0,Kt=!nt&&(n==="scroll"||n==="scrollend"),Z=nt?oe!==null?oe+"Capture":null:oe;nt=[];for(var K=se,ie;K!==null;){var _e=K;if(ie=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||ie===null||Z===null||(_e=Li(K,Z),_e!=null&&nt.push(cc(K,_e,ie))),Kt)break;K=K.return}0<nt.length&&(oe=new ue(oe,st,null,o,ve),be.push({event:oe,listeners:nt}))}}if((i&7)===0){e:{if(oe=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",oe&&o!==zn&&(st=o.relatedTarget||o.fromElement)&&(ir(st)||st[Ot]))break e;if((ue||oe)&&(oe=ve.window===ve?ve:(oe=ve.ownerDocument)?oe.defaultView||oe.parentWindow:window,ue?(st=o.relatedTarget||o.toElement,ue=se,st=st?ir(st):null,st!==null&&(Kt=u(st),nt=st.tag,st!==Kt||nt!==5&&nt!==27&&nt!==6)&&(st=null)):(ue=null,st=se),ue!==st)){if(nt=or,_e="onMouseLeave",Z="onMouseEnter",K="mouse",(n==="pointerout"||n==="pointerover")&&(nt=Sa,_e="onPointerLeave",Z="onPointerEnter",K="pointer"),Kt=ue==null?oe:yr(ue),ie=st==null?oe:yr(st),oe=new nt(_e,K+"leave",ue,o,ve),oe.target=Kt,oe.relatedTarget=ie,_e=null,ir(ve)===se&&(nt=new nt(Z,K+"enter",st,o,ve),nt.target=ie,nt.relatedTarget=Kt,_e=nt),Kt=_e,ue&&st)t:{for(nt=ue,Z=st,K=0,ie=nt;ie;ie=Hu(ie))K++;for(ie=0,_e=Z;_e;_e=Hu(_e))ie++;for(;0<K-ie;)nt=Hu(nt),K--;for(;0<ie-K;)Z=Hu(Z),ie--;for(;K--;){if(nt===Z||Z!==null&&nt===Z.alternate)break t;nt=Hu(nt),Z=Hu(Z)}nt=null}else nt=null;ue!==null&&r0(be,oe,ue,nt,!1),st!==null&&Kt!==null&&r0(be,Kt,st,nt,!0)}}e:{if(oe=se?yr(se):window,ue=oe.nodeName&&oe.nodeName.toLowerCase(),ue==="select"||ue==="input"&&oe.type==="file")var Ke=Oo;else if(sn(oe))if(bi)Ke=Ca;else{Ke=Us;var gt=Ah}else ue=oe.nodeName,!ue||ue.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?se&&So(se.elementType)&&(Ke=Oo):Ke=Ml;if(Ke&&(Ke=Ke(n,se))){_i(be,Ke,o,ve);break e}gt&&gt(n,oe,se),n==="focusout"&&se&&oe.type==="number"&&se.memoizedProps.value!=null&&Qr(oe,"number",oe.value)}switch(gt=se?yr(se):window,n){case"focusin":(sn(gt)||gt.contentEditable==="true")&&(P=gt,F=se,G=null);break;case"focusout":G=F=P=null;break;case"mousedown":X=!0;break;case"contextmenu":case"mouseup":case"dragend":X=!1,L(be,o,ve);break;case"selectionchange":if(O)break;case"keydown":case"keyup":L(be,o,ve)}var Xe;if(Vr)e:{switch(n){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else vt?de(n,o)&&(rt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(T&&o.locale!=="ko"&&(vt||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&vt&&(Xe=Bi()):(Or=ve,Ui="value"in Or?Or.value:Or.textContent,vt=!0)),gt=uf(se,rt),0<gt.length&&(rt=new Ls(rt,n,null,o,ve),be.push({event:rt,listeners:gt}),Xe?rt.data=Xe:(Xe=Ne(o),Xe!==null&&(rt.data=Xe)))),(Xe=E?cn(n,o):wt(n,o))&&(rt=uf(se,"onBeforeInput"),0<rt.length&&(gt=new Ls("onBeforeInput","beforeinput",null,o,ve),be.push({event:gt,listeners:rt}),gt.data=Xe)),XA(be,n,se,o,ve)}t0(be,i)})}function cc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function uf(n,i){for(var o=i+"Capture",l=[];n!==null;){var d=n,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Li(n,o),d!=null&&l.unshift(cc(n,d,g)),d=Li(n,i),d!=null&&l.push(cc(n,d,g))),n.tag===3)return l;n=n.return}return[]}function Hu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function r0(n,i,o,l,d){for(var g=i._reactName,w=[];o!==null&&o!==l;){var x=o,k=x.alternate,se=x.stateNode;if(x=x.tag,k!==null&&k===l)break;x!==5&&x!==26&&x!==27||se===null||(k=se,d?(se=Li(o,g),se!=null&&w.unshift(cc(o,se,k))):d||(se=Li(o,g),se!=null&&w.push(cc(o,se,k)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var e1=/\r\n?/g,t1=/\u0000|\uFFFD/g;function i0(n){return(typeof n=="string"?n:""+n).replace(e1,`
`).replace(t1,"")}function s0(n,i){return i=i0(i),i0(n)===i}function lf(){}function Ft(n,i,o,l,d,g){switch(o){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Cr(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Cr(n,""+l);break;case"className":_r(n,"class",l);break;case"tabIndex":_r(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(n,o,l);break;case"style":wo(n,l,g);break;case"data":if(i!=="object"){_r(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=Mi(""+l),n.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&Ft(n,i,"name",d.name,d,null),Ft(n,i,"formEncType",d.formEncType,d,null),Ft(n,i,"formMethod",d.formMethod,d,null),Ft(n,i,"formTarget",d.formTarget,d,null)):(Ft(n,i,"encType",d.encType,d,null),Ft(n,i,"method",d.method,d,null),Ft(n,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=Mi(""+l),n.setAttribute(o,l);break;case"onClick":l!=null&&(n.onclick=lf);break;case"onScroll":l!=null&&Et("scroll",n);break;case"onScrollEnd":l!=null&&Et("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}o=Mi(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""+l):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":l===!0?n.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,l):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(o,l):n.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(o):n.setAttribute(o,l);break;case"popover":Et("beforetoggle",n),Et("toggle",n),vr(n,"popover",l);break;case"xlinkActuate":mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":mn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":mn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":mn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":mn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":vr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Jn.get(o)||o,vr(n,o,l))}}function dp(n,i,o,l,d,g){switch(o){case"style":wo(n,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof l=="string"?Cr(n,l):(typeof l=="number"||typeof l=="bigint")&&Cr(n,""+l);break;case"onScroll":l!=null&&Et("scroll",n);break;case"onScrollEnd":l!=null&&Et("scrollend",n);break;case"onClick":l!=null&&(n.onclick=lf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ir.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),i=o.slice(2,d?o.length-7:void 0),g=n[ut]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,d),typeof l=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,l,d);break e}o in n?n[o]=l:l===!0?n.setAttribute(o,""):vr(n,o,l)}}}function nr(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",n),Et("load",n);var l=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ft(n,i,g,w,o,null)}}d&&Ft(n,i,"srcSet",o.srcSet,o,null),l&&Ft(n,i,"src",o.src,o,null);return;case"input":Et("invalid",n);var x=g=w=d=null,k=null,se=null;for(l in o)if(o.hasOwnProperty(l)){var ve=o[l];if(ve!=null)switch(l){case"name":d=ve;break;case"type":w=ve;break;case"checked":k=ve;break;case"defaultChecked":se=ve;break;case"value":g=ve;break;case"defaultValue":x=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,i));break;default:Ft(n,i,l,ve,o,null)}}is(n,g,x,k,se,w,d,!1),fi(n);return;case"select":Et("invalid",n),l=w=g=null;for(d in o)if(o.hasOwnProperty(d)&&(x=o[d],x!=null))switch(d){case"value":g=x;break;case"defaultValue":w=x;break;case"multiple":l=x;default:Ft(n,i,d,x,o,null)}i=g,o=w,n.multiple=!!l,i!=null?di(n,!!l,i,!1):o!=null&&di(n,!!l,o,!0);return;case"textarea":Et("invalid",n),g=d=l=null;for(w in o)if(o.hasOwnProperty(w)&&(x=o[w],x!=null))switch(w){case"value":l=x;break;case"defaultValue":d=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:Ft(n,i,w,x,o,null)}ss(n,l,d,g),fi(n);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(l=o[k],l!=null))switch(k){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(n,i,k,l,o,null)}return;case"dialog":Et("beforetoggle",n),Et("toggle",n),Et("cancel",n),Et("close",n);break;case"iframe":case"object":Et("load",n);break;case"video":case"audio":for(l=0;l<lc.length;l++)Et(lc[l],n);break;case"image":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"embed":case"source":case"link":Et("error",n),Et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(l=o[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ft(n,i,se,l,o,null)}return;default:if(So(i)){for(ve in o)o.hasOwnProperty(ve)&&(l=o[ve],l!==void 0&&dp(n,i,ve,l,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(l=o[x],l!=null&&Ft(n,i,x,l,o,null))}function n1(n,i,o,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,w=null,x=null,k=null,se=null,ve=null;for(ue in o){var be=o[ue];if(o.hasOwnProperty(ue)&&be!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":k=be;default:l.hasOwnProperty(ue)||Ft(n,i,ue,null,l,be)}}for(var oe in l){var ue=l[oe];if(be=o[oe],l.hasOwnProperty(oe)&&(ue!=null||be!=null))switch(oe){case"type":g=ue;break;case"name":d=ue;break;case"checked":se=ue;break;case"defaultChecked":ve=ue;break;case"value":w=ue;break;case"defaultValue":x=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,i));break;default:ue!==be&&Ft(n,i,oe,ue,l,be)}}Bn(n,w,x,k,se,ve,g,d);return;case"select":ue=w=x=oe=null;for(g in o)if(k=o[g],o.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":ue=k;default:l.hasOwnProperty(g)||Ft(n,i,g,null,l,k)}for(d in l)if(g=l[d],k=o[d],l.hasOwnProperty(d)&&(g!=null||k!=null))switch(d){case"value":oe=g;break;case"defaultValue":x=g;break;case"multiple":w=g;default:g!==k&&Ft(n,i,d,g,l,k)}i=x,o=w,l=ue,oe!=null?di(n,!!o,oe,!1):!!l!=!!o&&(i!=null?di(n,!!o,i,!0):di(n,!!o,o?[]:"",!1));return;case"textarea":ue=oe=null;for(x in o)if(d=o[x],o.hasOwnProperty(x)&&d!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ft(n,i,x,null,l,d)}for(w in l)if(d=l[w],g=o[w],l.hasOwnProperty(w)&&(d!=null||g!=null))switch(w){case"value":oe=d;break;case"defaultValue":ue=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==g&&Ft(n,i,w,d,l,g)}It(n,oe,ue);return;case"option":for(var st in o)if(oe=o[st],o.hasOwnProperty(st)&&oe!=null&&!l.hasOwnProperty(st))switch(st){case"selected":n.selected=!1;break;default:Ft(n,i,st,null,l,oe)}for(k in l)if(oe=l[k],ue=o[k],l.hasOwnProperty(k)&&oe!==ue&&(oe!=null||ue!=null))switch(k){case"selected":n.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Ft(n,i,k,oe,l,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in o)oe=o[nt],o.hasOwnProperty(nt)&&oe!=null&&!l.hasOwnProperty(nt)&&Ft(n,i,nt,null,l,oe);for(se in l)if(oe=l[se],ue=o[se],l.hasOwnProperty(se)&&oe!==ue&&(oe!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,i));break;default:Ft(n,i,se,oe,l,ue)}return;default:if(So(i)){for(var Kt in o)oe=o[Kt],o.hasOwnProperty(Kt)&&oe!==void 0&&!l.hasOwnProperty(Kt)&&dp(n,i,Kt,void 0,l,oe);for(ve in l)oe=l[ve],ue=o[ve],!l.hasOwnProperty(ve)||oe===ue||oe===void 0&&ue===void 0||dp(n,i,ve,oe,l,ue);return}}for(var Z in o)oe=o[Z],o.hasOwnProperty(Z)&&oe!=null&&!l.hasOwnProperty(Z)&&Ft(n,i,Z,null,l,oe);for(be in l)oe=l[be],ue=o[be],!l.hasOwnProperty(be)||oe===ue||oe==null&&ue==null||Ft(n,i,be,oe,l,ue)}var mp=null,pp=null;function cf(n){return n.nodeType===9?n:n.ownerDocument}function a0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function gp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yp=null;function r1(){var n=window.event;return n&&n.type==="popstate"?n===yp?!1:(yp=n,!0):(yp=null,!1)}var u0=typeof setTimeout=="function"?setTimeout:void 0,i1=typeof clearTimeout=="function"?clearTimeout:void 0,l0=typeof Promise=="function"?Promise:void 0,s1=typeof queueMicrotask=="function"?queueMicrotask:typeof l0<"u"?function(n){return l0.resolve(null).then(n).catch(a1)}:u0;function a1(n){setTimeout(function(){throw n})}function Ha(n){return n==="head"}function c0(n,i){var o=i,l=0,d=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<l&&8>l){o=l;var w=n.ownerDocument;if(o&1&&hc(w.documentElement),o&2&&hc(w.body),o&4)for(o=w.head,hc(o),w=o.firstChild;w;){var x=w.nextSibling,k=w.nodeName;w[Os]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=x}}if(d===0){n.removeChild(g),_c(i);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:l=o.charCodeAt(0)-48;else l=0;o=g}while(o);_c(i)}function vp(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":vp(o),$n(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function o1(n,i,o,l){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Os])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Yi(n.nextSibling),n===null)break}return null}function u1(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yi(n.nextSibling),n===null))return null;return n}function _p(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function l1(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var l=function(){i(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Yi(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Ep=null;function h0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function f0(n,i,o){switch(i=cf(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function hc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);$n(n)}var Ri=new Map,d0=new Set;function hf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ws=Me.d;Me.d={f:c1,r:h1,D:f1,C:d1,L:m1,m:p1,X:y1,S:g1,M:v1};function c1(){var n=Ws.f(),i=tf();return n||i}function h1(n){var i=On(n);i!==null&&i.tag===5&&i.type==="form"?Pv(i):Ws.r(n)}var Gu=typeof document>"u"?null:document;function m0(n,i,o){var l=Gu;if(l&&typeof i=="string"&&i){var d=en(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),d0.has(d)||(d0.add(d),n={rel:n,crossOrigin:o,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),nr(i,"link",n),Vt(i),l.head.appendChild(i)))}}function f1(n){Ws.D(n),m0("dns-prefetch",n,null)}function d1(n,i){Ws.C(n,i),m0("preconnect",n,i)}function m1(n,i,o){Ws.L(n,i,o);var l=Gu;if(l&&n&&i){var d='link[rel="preload"][as="'+en(i)+'"]';i==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+en(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+en(o.imageSizes)+'"]')):d+='[href="'+en(n)+'"]';var g=d;switch(i){case"style":g=Qu(n);break;case"script":g=Yu(n)}Ri.has(g)||(n=S({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Ri.set(g,n),l.querySelector(d)!==null||i==="style"&&l.querySelector(fc(g))||i==="script"&&l.querySelector(dc(g))||(i=l.createElement("link"),nr(i,"link",n),Vt(i),l.head.appendChild(i)))}}function p1(n,i){Ws.m(n,i);var o=Gu;if(o&&n){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+en(l)+'"][href="'+en(n)+'"]',g=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Yu(n)}if(!Ri.has(g)&&(n=S({rel:"modulepreload",href:n},i),Ri.set(g,n),o.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(dc(g)))return}l=o.createElement("link"),nr(l,"link",n),Vt(l),o.head.appendChild(l)}}}function g1(n,i,o){Ws.S(n,i,o);var l=Gu;if(l&&n){var d=Xn(l).hoistableStyles,g=Qu(n);i=i||"default";var w=d.get(g);if(!w){var x={loading:0,preload:null};if(w=l.querySelector(fc(g)))x.loading=5;else{n=S({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Ri.get(g))&&bp(n,o);var k=w=l.createElement("link");Vt(k),nr(k,"link",n),k._p=new Promise(function(se,ve){k.onload=se,k.onerror=ve}),k.addEventListener("load",function(){x.loading|=1}),k.addEventListener("error",function(){x.loading|=2}),x.loading|=4,ff(w,i,l)}w={type:"stylesheet",instance:w,count:1,state:x},d.set(g,w)}}}function y1(n,i){Ws.X(n,i);var o=Gu;if(o&&n){var l=Xn(o).hoistableScripts,d=Yu(n),g=l.get(d);g||(g=o.querySelector(dc(d)),g||(n=S({src:n,async:!0},i),(i=Ri.get(d))&&Tp(n,i),g=o.createElement("script"),Vt(g),nr(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function v1(n,i){Ws.M(n,i);var o=Gu;if(o&&n){var l=Xn(o).hoistableScripts,d=Yu(n),g=l.get(d);g||(g=o.querySelector(dc(d)),g||(n=S({src:n,async:!0,type:"module"},i),(i=Ri.get(d))&&Tp(n,i),g=o.createElement("script"),Vt(g),nr(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function p0(n,i,o,l){var d=(d=et.current)?hf(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Qu(o.href),o=Xn(d).hoistableStyles,l=o.get(i),l||(l={type:"style",instance:null,count:0,state:null},o.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Qu(o.href);var g=Xn(d).hoistableStyles,w=g.get(n);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,w),(g=d.querySelector(fc(n)))&&!g._p&&(w.instance=g,w.state.loading=5),Ri.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ri.set(n,o),g||_1(d,n,o,w.state))),i&&l===null)throw Error(r(528,""));return w}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Yu(o),o=Xn(d).hoistableScripts,l=o.get(i),l||(l={type:"script",instance:null,count:0,state:null},o.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Qu(n){return'href="'+en(n)+'"'}function fc(n){return'link[rel="stylesheet"]['+n+"]"}function g0(n){return S({},n,{"data-precedence":n.precedence,precedence:null})}function _1(n,i,o,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),nr(i,"link",o),Vt(i),n.head.appendChild(i))}function Yu(n){return'[src="'+en(n)+'"]'}function dc(n){return"script[async]"+n}function y0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+en(o.href)+'"]');if(l)return i.instance=l,Vt(l),l;var d=S({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Vt(l),nr(l,"style",d),ff(l,o.precedence,n),i.instance=l;case"stylesheet":d=Qu(o.href);var g=n.querySelector(fc(d));if(g)return i.state.loading|=4,i.instance=g,Vt(g),g;l=g0(o),(d=Ri.get(d))&&bp(l,d),g=(n.ownerDocument||n).createElement("link"),Vt(g);var w=g;return w._p=new Promise(function(x,k){w.onload=x,w.onerror=k}),nr(g,"link",l),i.state.loading|=4,ff(g,o.precedence,n),i.instance=g;case"script":return g=Yu(o.src),(d=n.querySelector(dc(g)))?(i.instance=d,Vt(d),d):(l=o,(d=Ri.get(g))&&(l=S({},o),Tp(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),Vt(d),nr(d,"link",l),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,ff(l,o.precedence,n));return i.instance}function ff(n,i,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,g=d,w=0;w<l.length;w++){var x=l[w];if(x.dataset.precedence===i)g=x;else if(g!==d)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function bp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Tp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var df=null;function v0(n,i,o){if(df===null){var l=new Map,d=df=new Map;d.set(o,l)}else d=df,l=d.get(o),l||(l=new Map,d.set(o,l));if(l.has(n))return l;for(l.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var g=o[d];if(!(g[Os]||g[Zt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(i)||"";w=n+w;var x=l.get(w);x?x.push(g):l.set(w,[g])}}return l}function _0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function E1(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function E0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var mc=null;function b1(){}function T1(n,i,o){if(mc===null)throw Error(r(475));var l=mc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Qu(o.href),g=n.querySelector(fc(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=mf.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=g,Vt(g);return}g=n.ownerDocument||n,o=g0(o),(d=Ri.get(d))&&bp(o,d),g=g.createElement("link"),Vt(g);var w=g;w._p=new Promise(function(x,k){w.onload=x,w.onerror=k}),nr(g,"link",o),i.instance=g}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=mf.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function w1(){if(mc===null)throw Error(r(475));var n=mc;return n.stylesheets&&n.count===0&&wp(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&wp(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function mf(){if(this.count--,this.count===0){if(this.stylesheets)wp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pf=null;function wp(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pf=new Map,i.forEach(S1,n),pf=null,mf.call(n))}function S1(n,i){if(!(i.state.loading&4)){var o=pf.get(n);if(o)var l=o.get(null);else{o=new Map,pf.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var w=d[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),l=w)}l&&o.set(null,l)}d=i.instance,w=d.getAttribute("data-precedence"),g=o.get(w)||l,g===l&&o.set(null,d),o.set(w,d),this.count++,l=mf.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),g?g.parentNode.insertBefore(d,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var pc={$$typeof:me,Provider:null,Consumer:null,_currentValue:Qe,_currentValue2:Qe,_threadCount:0};function A1(n,i,o,l,d,g,w,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.hiddenUpdates=Fr(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function b0(n,i,o,l,d,g,w,x,k,se,ve,be){return n=new A1(n,i,o,w,x,k,se,be),i=1,g===!0&&(i|=24),g=Wr(3,null,null,i),n.current=g,g.stateNode=n,i=im(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:l,isDehydrated:o,cache:i},um(g),n}function T0(n){return n?(n=hs,n):hs}function w0(n,i,o,l,d,g){d=T0(d),l.context===null?l.context=d:l.pendingContext=d,l=Na(i),l.payload={element:o},g=g===void 0?null:g,g!==null&&(l.callback=g),o=Pa(n,l,i),o!==null&&(ni(o,n,i),Hl(o,n,i))}function S0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Sp(n,i){S0(n,i),(n=n.alternate)&&S0(n,i)}function A0(n){if(n.tag===13){var i=Gi(n,67108864);i!==null&&ni(i,n,67108864),Sp(n,67108864)}}var gf=!0;function I1(n,i,o,l){var d=pe.T;pe.T=null;var g=Me.p;try{Me.p=2,Ap(n,i,o,l)}finally{Me.p=g,pe.T=d}}function R1(n,i,o,l){var d=pe.T;pe.T=null;var g=Me.p;try{Me.p=8,Ap(n,i,o,l)}finally{Me.p=g,pe.T=d}}function Ap(n,i,o,l){if(gf){var d=Ip(l);if(d===null)fp(n,i,l,yf,o),R0(n,l);else if(C1(d,n,i,o,l))l.stopPropagation();else if(R0(n,l),i&4&&-1<x1.indexOf(n)){for(;d!==null;){var g=On(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=wn(g.pendingLanes);if(w!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;w;){var k=1<<31-ln(w);x.entanglements[1]|=k,w&=~k}gs(g),(Mt&6)===0&&(Zh=Ar()+500,uc(0))}}break;case 13:x=Gi(g,2),x!==null&&ni(x,g,2),tf(),Sp(g,2)}if(g=Ip(l),g===null&&fp(n,i,l,yf,o),g===d)break;d=g}d!==null&&l.stopPropagation()}else fp(n,i,l,null,o)}}function Ip(n){return n=Er(n),Rp(n)}var yf=null;function Rp(n){if(yf=null,n=ir(n),n!==null){var i=u(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return yf=n,null}function I0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kl()){case _o:return 2;case es:return 8;case Ln:case Eu:return 32;case ai:return 268435456;default:return 32}default:return 32}}var xp=!1,Ga=null,Qa=null,Ya=null,gc=new Map,yc=new Map,$a=[],x1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R0(n,i){switch(n){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":gc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(i.pointerId)}}function vc(n,i,o,l,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:l,nativeEvent:g,targetContainers:[d]},i!==null&&(i=On(i),i!==null&&A0(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function C1(n,i,o,l,d){switch(i){case"focusin":return Ga=vc(Ga,n,i,o,l,d),!0;case"dragenter":return Qa=vc(Qa,n,i,o,l,d),!0;case"mouseover":return Ya=vc(Ya,n,i,o,l,d),!0;case"pointerover":var g=d.pointerId;return gc.set(g,vc(gc.get(g)||null,n,i,o,l,d)),!0;case"gotpointercapture":return g=d.pointerId,yc.set(g,vc(yc.get(g)||null,n,i,o,l,d)),!0}return!1}function x0(n){var i=ir(n.target);if(i!==null){var o=u(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Ni(n.priority,function(){if(o.tag===13){var l=ti();l=rs(l);var d=Gi(o,l);d!==null&&ni(d,o,l),Sp(o,l)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vf(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Ip(n.nativeEvent);if(o===null){o=n.nativeEvent;var l=new o.constructor(o.type,o);zn=l,o.target.dispatchEvent(l),zn=null}else return i=On(o),i!==null&&A0(i),n.blockedOn=o,!1;i.shift()}return!0}function C0(n,i,o){vf(n)&&o.delete(i)}function D1(){xp=!1,Ga!==null&&vf(Ga)&&(Ga=null),Qa!==null&&vf(Qa)&&(Qa=null),Ya!==null&&vf(Ya)&&(Ya=null),gc.forEach(C0),yc.forEach(C0)}function _f(n,i){n.blockedOn===i&&(n.blockedOn=null,xp||(xp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,D1)))}var Ef=null;function D0(n){Ef!==n&&(Ef=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ef===n&&(Ef=null);for(var i=0;i<n.length;i+=3){var o=n[i],l=n[i+1],d=n[i+2];if(typeof l!="function"){if(Rp(l||o)===null)continue;break}var g=On(o);g!==null&&(n.splice(i,3),i-=3,Rm(g,{pending:!0,data:d,method:o.method,action:l},l,d))}}))}function _c(n){function i(k){return _f(k,n)}Ga!==null&&_f(Ga,n),Qa!==null&&_f(Qa,n),Ya!==null&&_f(Ya,n),gc.forEach(i),yc.forEach(i);for(var o=0;o<$a.length;o++){var l=$a[o];l.blockedOn===n&&(l.blockedOn=null)}for(;0<$a.length&&(o=$a[0],o.blockedOn===null);)x0(o),o.blockedOn===null&&$a.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var d=o[l],g=o[l+1],w=d[ut]||null;if(typeof g=="function")w||D0(o);else if(w){var x=null;if(g&&g.hasAttribute("formAction")){if(d=g,w=g[ut]||null)x=w.formAction;else if(Rp(d)!==null)continue}else x=w.action;typeof x=="function"?o[l+1]=x:(o.splice(l,3),l-=3),D0(o)}}}function Cp(n){this._internalRoot=n}bf.prototype.render=Cp.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,l=ti();w0(o,l,n,i,null,null)},bf.prototype.unmount=Cp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;w0(n.current,2,null,n,null,null),tf(),i[Ot]=null}};function bf(n){this._internalRoot=n}bf.prototype.unstable_scheduleHydration=function(n){if(n){var i=gr();n={blockedOn:null,target:n,priority:i};for(var o=0;o<$a.length&&i!==0&&i<$a[o].priority;o++);$a.splice(o,0,n),o===0&&x0(n)}};var O0=e.version;if(O0!=="19.1.0")throw Error(r(527,O0,"19.1.0"));Me.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var O1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tf.isDisabled&&Tf.supportsFiber)try{Pt=Tf.inject(O1),yt=Tf}catch{}}return bc.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,l="",d=Qv,g=Yv,w=$v,x=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(x=i.unstable_transitionCallbacks)),i=b0(n,1,!1,null,null,o,l,d,g,w,x,null),n[Ot]=i.current,hp(n),new Cp(i)},bc.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var l=!1,d="",g=Qv,w=Yv,x=$v,k=null,se=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(se=o.formState)),i=b0(n,1,!0,i,o??null,l,d,g,w,x,k,se),i.context=T0(null),o=i.current,l=ti(),l=rs(l),d=Na(l),d.callback=null,Pa(o,d,l),o=l,i.current.lanes=o,ui(i,o),gs(i),n[Ot]=i.current,hp(n),new bf(i)},bc.version="19.1.0",bc}var q0;function H1(){if(q0)return Np.exports;q0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Np.exports=K1(),Np.exports}var G1=H1();const Q1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAKlBMVEVHcEwdTtUeTtMjTsYkT8YkTLsmTcMeTtQfTc4gTs8dTtYhTckfTs8dTtf95L3bAAAADXRSTlMA98E7RwoX2FR06SmP7PIPHQAAAOtJREFUSMdjYGCbJHsXD7iomcDAwGCEVw1QlTIDA3PtXQLgugFD0l2CQI1hImFFkgy6hBVdYpAlrOgiw10iwKgi2iqSqiWoSFzTu5GQIhkzBgZHQoqEGYatoutKStqg7KqkpKSLU9GN0NAAoCLW0NDQXTgVSTDAweBRRIzDkYJAkVBg+o7gpDLUFRkSo2gXIUUiQEU8wFpCFp+iG6BE13PmxER8iu5Ak68hPkXXEyCKHPGWdBOIUSRBjKJb04hQdPf6iW1pmzt1CRTRF5eXLxytyshSRFQzhKgGDVFNI6IaWUQ114hq+BHThAQAqJPZu5Aizg0AAAAASUVORK5CYII=",Gb=ge.createContext(void 0);function Y1(){const{user:s}=ge.useContext(Gb);return console.log(s),Se.jsxs("div",{className:"w-64 bg-white h-screen p-4 shadow-md max-md:hidden",children:[Se.jsxs("div",{className:"flex align-center gap-2",children:[Se.jsx("img",{src:Q1,alt:"Tell logo",className:"w-6 h-6"}),Se.jsx("p",{className:"text-1xl",children:"Tell - Spor mat skikkelig"})]}),Se.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 border-b-1 pb-5 border-gray-200"}),Se.jsxs("ul",{className:"space-y-2 w-full",children:[Se.jsx("li",{className:"w-full",children:Se.jsx("a",{href:"/",className:"w-full text-left p-2 hover:bg-gray-100 rounded text-gray-900",children:"Hjem"})}),s?null:Se.jsx("li",{children:Se.jsx("a",{href:"/login",className:"w-full text-left p-2 hover:bg-gray-100 rounded text-gray-900",children:"Logg p"})}),Se.jsx("li",{children:s})]})]})}function $1({message:s,onClose:e}){const[t,r]=ge.useState(!0);return ge.useEffect(()=>{const a=setTimeout(()=>{r(!1),e()},3e3);return()=>clearTimeout(a)},[e]),t?Se.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-50 text-black px-4 py-2 rounded-lg shadow-lg text-sm sm:text-base z-50 animate-fade-in-out",children:s}):null}const X1=[{id:1,name:"Banan",calories:100,fat:.1,protein:1.2,carbs:22.4},{id:2,name:"Eple",calories:52,fat:.2,protein:.3,carbs:14},{id:3,name:"Peanttsmr-brd",calories:280,fat:16,protein:9,carbs:24},{id:4,name:"Egg",calories:93,fat:6.6,protein:7.8,carbs:.7},{id:5,name:"Chocolate Cookie",calories:93.9,fat:4.8,protein:1,carbs:11.4},{id:6,name:"Tosti ham kaas",calories:350,fat:17,protein:19,carbs:30},{id:7,name:"Sultana kjeks (1)",calories:140,fat:4.5,protein:1.5,carbs:22},{id:8,name:"Cola (33cl)",calories:139,fat:0,protein:0,carbs:35},{id:9,name:"Apple Crumble (100g)",calories:170,fat:5,protein:1.5,carbs:30},{id:10,name:"Nudler (1 porsjon, ca. 300 kcal)",calories:300,fat:12,protein:7,carbs:40},{id:11,name:"Spelt Eierkoek (150 kcal)",calories:150,fat:3.5,protein:4,carbs:25},{id:12,name:"Smultring",calories:192,fat:11,protein:2,carbs:22},{id:13,name:"Protein Quark",calories:132,fat:.2,protein:25,carbs:6},{id:14,name:"Choco Mousse",calories:220,fat:13,protein:4,carbs:20},{id:15,name:"Chips",calories:275,fat:17,protein:3,carbs:25},{id:16,name:"Pannenkoek",calories:150,fat:5,protein:5,carbs:20},{id:17,name:"Eplejus (1 glass)",calories:117,fat:.2,protein:.1,carbs:28},{id:18,name:"Protein Shake (1 scoop + 300 ml melk)",calories:298,fat:6,protein:30,carbs:22},{id:19,name:"Drue (1 stk)",calories:3,fat:0,protein:0,carbs:.8},{id:20,name:"Margerhita Pizza",calories:940,fat:34,protein:40,carbs:108},{id:21,name:"KitKat",calories:219,fat:11,protein:2.6,carbs:27},{id:22,name:"Mandarin",calories:21,fat:.1,protein:.3,carbs:5},{id:23,name:"l (1 flaske)",calories:164,fat:0,protein:1.6,carbs:13},{id:24,name:"Croissant",calories:231,fat:12,protein:4.5,carbs:26},{id:25,name:"Hamburger (patty)",calories:250,fat:20,protein:17,carbs:0}];function W1({searchTerm:s,filteredFoods:e,addFood:t,setSearchTerm:r}){return Se.jsxs(Se.Fragment,{children:[Se.jsx("input",{type:"text",placeholder:"Sk etter mat...",className:"w-full p-3 sm:p-2 mb-4 border rounded text-gray-900 bg-white text-base sm:text-base",value:s,onChange:a=>r(a.target.value)}),Se.jsx("div",{className:"mb-6",children:Se.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s!==""&&e.map(a=>Se.jsxs("div",{onClick:()=>t(a),className:"p-3 sm:p-2 bg-white rounded shadow cursor-pointer text-gray-900 text-sm sm:text-base",children:[a.name," - ",a.calories," kcal (Fat: ",a.fat,"g, Protein: ",a.protein,"g, Carbs: ",a.carbs,"g)"]},a.id))})})]})}function J1({currentDate:s,changeDate:e}){return Se.jsxs("div",{className:"mb-4 flex justify-center gap-4",children:[Se.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2  text-white rounded",children:Se.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Se.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Se.jsx("span",{className:"text-gray-900 mt-2",children:s}),Se.jsx("button",{onClick:()=>e(1),className:"px-4 py-2  text-white rounded ",children:Se.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Se.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}function Z1({totals:s,goals:e}){const t=Math.min(s.calories/e.calories*100,100),r=45,a=2*Math.PI*r,u=a-t/100*a;function c(m,y){return m>y?m-y:y-m}return Se.jsxs("div",{className:"flex flex-col items-center mb-6",children:[Se.jsxs("div",{className:"w-24 h-24 sm:w-32 sm:h-32 relative flex items-center justify-center",children:[Se.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[Se.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#e5e7eb",strokeWidth:"1"}),Se.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#3b82f6",strokeWidth:"1",strokeDasharray:a,strokeDashoffset:u,className:"transition-all duration-500 ease-in-out",transform:"rotate(-90 50 50)"})]}),Se.jsxs("div",{className:"absolute flex flex-col items-center justify-center text-gray-900",children:[Se.jsx("span",{className:"text-lg sm:text-2xl text-center",children:c(s.calories,e.calories)}),Se.jsx("span",{className:"text-sm sm:text-base text-center",children:s.calories>e.calories?"over":"igjen"})]})]}),Se.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mt-4 rounded-lg bg-white shadow p-4 sm:p-6 w-full sm:w-auto",children:[Se.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Se.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Carbs"}),Se.jsxs("span",{className:"text-base sm:text-lg",children:[s.carbs.toFixed(0),"/",e.carbs,"g"]})]}),Se.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Se.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Protein"}),Se.jsxs("span",{className:"text-base sm:text-lg",children:[s.protein.toFixed(0),"/",e.protein,"g"]})]}),Se.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[Se.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Fat"}),Se.jsxs("span",{className:"text-base sm:text-lg",children:[s.fat.toFixed(0),"/",e.fat,"g"]})]})]})]})}function eI({selectedFoods:s,currentDate:e,removeFood:t,updateQuantity:r}){const a=s[e]||[];return Se.jsxs("div",{className:"mt-4",children:[Se.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Valgte matvarer"}),a.length===0?Se.jsx("p",{className:"text-gray-500",children:"Ingen matvarer valgt for denne dagen."}):Se.jsx("ul",{className:"space-y-2",children:a.map((u,c)=>Se.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[Se.jsxs("span",{children:[u.food.name," - ",(u.food.calories*u.quantity).toFixed(0)," kcal"]}),Se.jsxs("div",{className:"flex items-center space-x-2",children:[Se.jsx("button",{onClick:()=>r(c,-1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"-"}),Se.jsx("span",{className:"w-8 text-center",children:u.quantity}),Se.jsx("button",{onClick:()=>r(c,1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"+"}),Se.jsx("button",{onClick:()=>t(c),className:"px-2 py-1 border text-sm border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"Fjern"})]})]},`${u.food.id}-${c}`))})]})}function tI(){return Se.jsx("footer",{className:"p-4 bg-white md:p-8 lg:p-10 dark:bg-gray-800",children:Se.jsxs("div",{className:"mx-auto max-w-screen-xl text-center",children:[Se.jsx("a",{href:"#",className:"flex justify-center items-center text-2xl font-semibold text-gray-900 dark:text-white",children:"Tell"}),Se.jsx("p",{className:"mb-2 text-gray-500 dark:text-gray-400",children:"En enkel matsporer for deg."}),Se.jsxs("ul",{className:"flex flex-wrap justify-center items-center mb-2 text-gray-900 dark:text-white",children:[Se.jsx("li",{children:Se.jsx("a",{href:"/",className:"mr-4 hover:underline md:mr-6 ",children:"Hjem"})}),Se.jsx("li",{children:Se.jsx("a",{href:"/login",className:"mr-4 hover:underline md:mr-6",children:"Logg inn"})})]}),Se.jsxs("span",{className:"text-sm text-gray-500 sm:text-center dark:text-gray-400",children:[" ",new Date().getFullYear()," ",Se.jsx("a",{href:"/",className:"hover:underline",children:"Tell"}),". Alle rettigheter reservert."]})]})})}var Nf={exports:{}},nI=Nf.exports,F0;function rI(){return F0||(F0=1,function(s,e){(function(t,r){s.exports=r()})(nI,function(){var t=function(f,p){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&(_[A]=b[A])})(f,p)},r=function(){return(r=Object.assign||function(f){for(var p,_=1,b=arguments.length;_<b;_++)for(var A in p=arguments[_])Object.prototype.hasOwnProperty.call(p,A)&&(f[A]=p[A]);return f}).apply(this,arguments)};function a(f,p,_){for(var b,A=0,I=p.length;A<I;A++)!b&&A in p||((b=b||Array.prototype.slice.call(p,0,A))[A]=p[A]);return f.concat(b||Array.prototype.slice.call(p))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:k1,c=Object.keys,m=Array.isArray;function y(f,p){return typeof p!="object"||c(p).forEach(function(_){f[_]=p[_]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var v=Object.getPrototypeOf,S={}.hasOwnProperty;function R(f,p){return S.call(f,p)}function D(f,p){typeof p=="function"&&(p=p(v(f))),(typeof Reflect>"u"?c:Reflect.ownKeys)(p).forEach(function(_){H(f,_,p[_])})}var z=Object.defineProperty;function H(f,p,_,b){z(f,p,y(_&&R(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},b))}function he(f){return{from:function(p){return f.prototype=Object.create(p.prototype),H(f.prototype,"constructor",f),{extend:D.bind(null,f.prototype)}}}}var W=Object.getOwnPropertyDescriptor,fe=[].slice;function Ee(f,p,_){return fe.call(f,p,_)}function me(f,p){return p(f)}function De(f){if(!f)throw new Error("Assertion Failed")}function Pe(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function je(f,p){if(typeof p=="string"&&R(f,p))return f[p];if(!p)return f;if(typeof p!="string"){for(var _=[],b=0,A=p.length;b<A;++b){var I=je(f,p[b]);_.push(I)}return _}var O=p.indexOf(".");if(O!==-1){var P=f[p.substr(0,O)];return P==null?void 0:je(P,p.substr(O+1))}}function U(f,p,_){if(f&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof p!="string"&&"length"in p){De(typeof _!="string"&&"length"in _);for(var b=0,A=p.length;b<A;++b)U(f,p[b],_[b])}else{var I,O,P=p.indexOf(".");P!==-1?(I=p.substr(0,P),(O=p.substr(P+1))===""?_===void 0?m(f)&&!isNaN(parseInt(I))?f.splice(I,1):delete f[I]:f[I]=_:U(P=!(P=f[I])||!R(f,I)?f[I]={}:P,O,_)):_===void 0?m(f)&&!isNaN(parseInt(p))?f.splice(p,1):delete f[p]:f[p]=_}}function N(f){var p,_={};for(p in f)R(f,p)&&(_[p]=f[p]);return _}var V=[].concat;function j(f){return V.apply([],f)}var Pt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(p){return p+f+"Array"})}))).filter(function(f){return u[f]}),Y=new Set(Pt.map(function(f){return u[f]})),J=null;function M(f){return J=new WeakMap,f=function p(_){if(!_||typeof _!="object")return _;var b=J.get(_);if(b)return b;if(m(_)){b=[],J.set(_,b);for(var A=0,I=_.length;A<I;++A)b.push(p(_[A]))}else if(Y.has(_.constructor))b=_;else{var O,P=v(_);for(O in b=P===Object.prototype?{}:Object.create(P),J.set(_,b),_)R(_,O)&&(b[O]=p(_[O]))}return b}(f),J=null,f}var Dn={}.toString;function Yt(f){return Dn.call(f).slice(8,-1)}var pe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Me=typeof pe=="symbol"?function(f){var p;return f!=null&&(p=f[pe])&&p.apply(f)}:function(){return null};function Qe(f,p){return p=f.indexOf(p),0<=p&&f.splice(p,1),0<=p}var pt={};function B(f){var p,_,b,A;if(arguments.length===1){if(m(f))return f.slice();if(this===pt&&typeof f=="string")return[f];if(A=Me(f)){for(_=[];!(b=A.next()).done;)_.push(b.value);return _}if(f==null)return[f];if(typeof(p=f.length)!="number")return[f];for(_=new Array(p);p--;)_[p]=f[p];return _}for(p=arguments.length,_=new Array(p);p--;)_[p]=arguments[p];return _}var Te=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ts=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],br=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ts),Ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(f,p){this.name=f,this.message=p}function We(f,p){return f+". Errors: "+Object.keys(p).map(function(_){return p[_].toString()}).filter(function(_,b,A){return A.indexOf(_)===b}).join(`
`)}function ct(f,p,_,b){this.failures=p,this.failedKeys=b,this.successCount=_,this.message=We(f,p)}function et(f,p){this.name="BulkError",this.failures=Object.keys(p).map(function(_){return p[_]}),this.failuresByPos=p,this.message=We(f,this.failures)}he(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),he(ct).from(Ie),he(et).from(Ie);var un=br.reduce(function(f,p){return f[p]=p+"Error",f},{}),Bt=Ie,Fe=br.reduce(function(f,p){var _=p+"Error";function b(A,I){this.name=_,A?typeof A=="string"?(this.message="".concat(A).concat(I?`
 `+I:""),this.inner=I||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=Ue[p]||_,this.inner=null)}return he(b).from(Bt),f[p]=b,f},{});Fe.Syntax=SyntaxError,Fe.Type=TypeError,Fe.Range=RangeError;var Di=ts.reduce(function(f,p){return f[p+"Error"]=Fe[p],f},{}),Sr=br.reduce(function(f,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(f[p+"Error"]=Fe[p]),f},{});function Tt(){}function Br(f){return f}function Rs(f,p){return f==null||f===Br?p:function(_){return p(f(_))}}function zr(f,p){return function(){f.apply(this,arguments),p.apply(this,arguments)}}function _u(f,p){return f===Tt?p:function(){var _=f.apply(this,arguments);_!==void 0&&(arguments[0]=_);var b=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var I=p.apply(this,arguments);return b&&(this.onsuccess=this.onsuccess?zr(b,this.onsuccess):b),A&&(this.onerror=this.onerror?zr(A,this.onerror):A),I!==void 0?I:_}}function Ar(f,p){return f===Tt?p:function(){f.apply(this,arguments);var _=this.onsuccess,b=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?zr(_,this.onsuccess):_),b&&(this.onerror=this.onerror?zr(b,this.onerror):b)}}function kl(f,p){return f===Tt?p:function(_){var b=f.apply(this,arguments);y(_,b);var A=this.onsuccess,I=this.onerror;return this.onsuccess=null,this.onerror=null,_=p.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?zr(A,this.onsuccess):A),I&&(this.onerror=this.onerror?zr(I,this.onerror):I),b===void 0?_===void 0?void 0:_:y(b,_)}}function _o(f,p){return f===Tt?p:function(){return p.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function es(f,p){return f===Tt?p:function(){var _=f.apply(this,arguments);if(_&&typeof _.then=="function"){for(var b=this,A=arguments.length,I=new Array(A);A--;)I[A]=arguments[A];return _.then(function(){return p.apply(b,I)})}return p.apply(this,arguments)}}Sr.ModifyError=ct,Sr.DexieError=Ie,Sr.BulkError=et;var Ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Eu(f){Ln=f}var ai={},fa=100,Pt=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,v(f),f];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,v(p),f]}(),ts=Pt[0],br=Pt[1],Pt=Pt[2],br=br&&br.then,yt=ts&&ts.constructor,Yn=!!Pt,ln=function(f,p){jr.push([f,p]),ma&&(queueMicrotask(pa),ma=!1)},da=!0,ma=!0,pr=[],oi=[],Oi=Br,wn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Tt,pgp:!1,env:{},finalize:Tt},qe=wn,jr=[],qr=0,ns=[];function Le(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=qe;if(typeof f!="function"){if(f!==ai)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xs(this,this._value))}this._state=null,this._value=null,++p.ref,function _(b,A){try{A(function(I){if(b._state===null){if(I===b)throw new TypeError("A promise cannot be resolved with itself.");var O=b._lib&&gr();I&&typeof I.then=="function"?_(b,function(P,F){I instanceof Le?I._then(P,F):I.then(P,F)}):(b._state=!0,b._value=I,Kr(b)),O&&Ni()}},xs.bind(null,b))}catch(I){xs(b,I)}}(this,f)}var Fr={get:function(){var f=qe,p=Ds;function _(b,A){var I=this,O=!f.global&&(f!==qe||p!==Ds),P=O&&!On(),F=new Le(function(G,X){Cs(I,new ui(Rr(b,f,O,P),Rr(A,f,O,P),G,X,f))});return this._consoleTask&&(F._consoleTask=this._consoleTask),F}return _.prototype=ai,_},set:function(f){H(this,"then",f&&f.prototype===ai?Fr:{get:function(){return f},set:Fr.set})}};function ui(f,p,_,b,A){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=_,this.reject=b,this.psd=A}function xs(f,p){var _,b;oi.push(p),f._state===null&&(_=f._lib&&gr(),p=Oi(p),f._state=!1,f._value=p,b=f,pr.some(function(A){return A._value===b._value})||pr.push(b),Kr(f),_&&Ni())}function Kr(f){var p=f._listeners;f._listeners=[];for(var _=0,b=p.length;_<b;++_)Cs(f,p[_]);var A=f._PSD;--A.ref||A.finalize(),qr===0&&(++qr,ln(function(){--qr==0&&zt()},[]))}function Cs(f,p){if(f._state!==null){var _=f._state?p.onFulfilled:p.onRejected;if(_===null)return(f._state?p.resolve:p.reject)(f._value);++p.psd.ref,++qr,ln(rs,[_,f,p])}else f._listeners.push(p)}function rs(f,p,_){try{var b,A=p._value;!p._state&&oi.length&&(oi=[]),b=Ln&&p._consoleTask?p._consoleTask.run(function(){return f(A)}):f(A),p._state||oi.indexOf(A)!==-1||function(I){for(var O=pr.length;O;)if(pr[--O]._value===I._value)return pr.splice(O,1)}(p),_.resolve(b)}catch(I){_.reject(I)}finally{--qr==0&&zt(),--_.psd.ref||_.psd.finalize()}}function pa(){Ir(wn,function(){gr()&&Ni()})}function gr(){var f=da;return ma=da=!1,f}function Ni(){var f,p,_;do for(;0<jr.length;)for(f=jr,jr=[],_=f.length,p=0;p<_;++p){var b=f[p];b[0].apply(null,b[1])}while(0<jr.length);ma=da=!0}function zt(){var f=pr;pr=[],f.forEach(function(b){b._PSD.onunhandled.call(null,b._value,b)});for(var p=ns.slice(0),_=p.length;_;)p[--_]()}function Zt(f){return new Le(ai,!1,f)}function ut(f,p){var _=qe;return function(){var b=gr(),A=qe;try{return Vt(_,!0),f.apply(this,arguments)}catch(I){p&&p(I)}finally{Vt(A,!1),b&&Ni()}}}D(Le.prototype,{then:Fr,_then:function(f,p){Cs(this,new ui(null,null,f,p,qe))},catch:function(f){if(arguments.length===1)return this.then(null,f);var p=f,_=arguments[1];return typeof p=="function"?this.then(null,function(b){return(b instanceof p?_:Zt)(b)}):this.then(null,function(b){return(b&&b.name===p?_:Zt)(b)})},finally:function(f){return this.then(function(p){return Le.resolve(f()).then(function(){return p})},function(p){return Le.resolve(f()).then(function(){return Zt(p)})})},timeout:function(f,p){var _=this;return f<1/0?new Le(function(b,A){var I=setTimeout(function(){return A(new Fe.Timeout(p))},f);_.then(b,A).finally(clearTimeout.bind(null,I))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(Le.prototype,Symbol.toStringTag,"Dexie.Promise"),wn.env=ya(),D(Le,{all:function(){var f=B.apply(null,arguments).map(yr);return new Le(function(p,_){f.length===0&&p([]);var b=f.length;f.forEach(function(A,I){return Le.resolve(A).then(function(O){f[I]=O,--b||p(f)},_)})})},resolve:function(f){return f instanceof Le?f:f&&typeof f.then=="function"?new Le(function(p,_){f.then(p,_)}):new Le(ai,!0,f)},reject:Zt,race:function(){var f=B.apply(null,arguments).map(yr);return new Le(function(p,_){f.map(function(b){return Le.resolve(b).then(p,_)})})},PSD:{get:function(){return qe},set:function(f){return qe=f}},totalEchoes:{get:function(){return Ds}},newPSD:$n,usePSD:Ir,scheduler:{get:function(){return ln},set:function(f){ln=f}},rejectionMapper:{get:function(){return Oi},set:function(f){Oi=f}},follow:function(f,p){return new Le(function(_,b){return $n(function(A,I){var O=qe;O.unhandleds=[],O.onunhandled=I,O.finalize=zr(function(){var P,F=this;P=function(){F.unhandleds.length===0?A():I(F.unhandleds[0])},ns.push(function G(){P(),ns.splice(ns.indexOf(G),1)}),++qr,ln(function(){--qr==0&&zt()},[])},O.finalize),f()},p,_,b)})}}),yt&&(yt.allSettled&&H(Le,"allSettled",function(){var f=B.apply(null,arguments).map(yr);return new Le(function(p){f.length===0&&p([]);var _=f.length,b=new Array(_);f.forEach(function(A,I){return Le.resolve(A).then(function(O){return b[I]={status:"fulfilled",value:O}},function(O){return b[I]={status:"rejected",reason:O}}).then(function(){return--_||p(b)})})})}),yt.any&&typeof AggregateError<"u"&&H(Le,"any",function(){var f=B.apply(null,arguments).map(yr);return new Le(function(p,_){f.length===0&&_(new AggregateError([]));var b=f.length,A=new Array(b);f.forEach(function(I,O){return Le.resolve(I).then(function(P){return p(P)},function(P){A[O]=P,--b||_(new AggregateError(A))})})})}),yt.withResolvers&&(Le.withResolvers=yt.withResolvers));var Ot={awaits:0,echoes:0,id:0},Eo=0,ga=[],Hr=0,Ds=0,Os=0;function $n(f,p,_,b){var A=qe,I=Object.create(A);return I.parent=A,I.ref=0,I.global=!1,I.id=++Os,wn.env,I.env=Yn?{Promise:Le,PromiseProp:{value:Le,configurable:!0,writable:!0},all:Le.all,race:Le.race,allSettled:Le.allSettled,any:Le.any,resolve:Le.resolve,reject:Le.reject}:{},p&&y(I,p),++A.ref,I.finalize=function(){--this.parent.ref||this.parent.finalize()},b=Ir(I,f,_,b),I.ref===0&&I.finalize(),b}function ir(){return Ot.id||(Ot.id=++Eo),++Ot.awaits,Ot.echoes+=fa,Ot.id}function On(){return!!Ot.awaits&&(--Ot.awaits==0&&(Ot.id=0),Ot.echoes=Ot.awaits*fa,!0)}function yr(f){return Ot.echoes&&f&&f.constructor===yt?(ir(),f.then(function(p){return On(),p},function(p){return On(),$t(p)})):f}function Xn(){var f=ga[ga.length-1];ga.pop(),Vt(f,!1)}function Vt(f,p){var _,b=qe;(p?!Ot.echoes||Hr++&&f===qe:!Hr||--Hr&&f===qe)||queueMicrotask(p?(function(A){++Ds,Ot.echoes&&--Ot.echoes!=0||(Ot.echoes=Ot.awaits=Ot.id=0),ga.push(qe),Vt(A,!0)}).bind(null,f):Xn),f!==qe&&(qe=f,b===wn&&(wn.env=ya()),Yn&&(_=wn.env.Promise,p=f.env,(b.global||f.global)&&(Object.defineProperty(u,"Promise",p.PromiseProp),_.all=p.all,_.race=p.race,_.resolve=p.resolve,_.reject=p.reject,p.allSettled&&(_.allSettled=p.allSettled),p.any&&(_.any=p.any))))}function ya(){var f=u.Promise;return Yn?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Ir(f,p,_,b,A){var I=qe;try{return Vt(f,!0),p(_,b,A)}finally{Vt(I,!1)}}function Rr(f,p,_,b){return typeof f!="function"?f:function(){var A=qe;_&&ir(),Vt(p,!0);try{return f.apply(this,arguments)}finally{Vt(A,!1),b&&queueMicrotask(On)}}}function Gr(f){Promise===yt&&Ot.echoes===0?Hr===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+br).indexOf("[native code]")===-1&&(ir=On=Tt);var $t=Le.reject,li="",Wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bo="String expected.",vr=[],_r="__dbnames",mn="readonly",Pi="readwrite";function ci(f,p){return f?p?function(){return f.apply(this,arguments)&&p.apply(this,arguments)}:f:p}var hi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Vi(f){return typeof f!="string"||/\./.test(f)?function(p){return p}:function(p){return p[f]===void 0&&f in p&&delete(p=M(p))[f],p}}function Ns(){throw Fe.Type()}function ht(f,p){try{var _=Ps(f),b=Ps(p);if(_!==b)return _==="Array"?1:b==="Array"?-1:_==="binary"?1:b==="binary"?-1:_==="string"?1:b==="string"?-1:_==="Date"?1:b!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return p<f?1:f<p?-1:0;case"binary":return function(A,I){for(var O=A.length,P=I.length,F=O<P?O:P,G=0;G<F;++G)if(A[G]!==I[G])return A[G]<I[G]?-1:1;return O===P?0:O<P?-1:1}(Un(f),Un(p));case"Array":return function(A,I){for(var O=A.length,P=I.length,F=O<P?O:P,G=0;G<F;++G){var X=ht(A[G],I[G]);if(X!==0)return X}return O===P?0:O<P?-1:1}(f,p)}}catch{}return NaN}function Ps(f){var p=typeof f;return p!="object"?p:ArrayBuffer.isView(f)?"binary":(f=Yt(f),f==="ArrayBuffer"?"binary":f)}function Un(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var va=(kt.prototype._trans=function(f,p,_){var b=this._tx||qe.trans,A=this.name,I=Ln&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(G,X,L){if(!L.schema[A])throw new Fe.NotFound("Table "+A+" not part of transaction");return p(L.idbtrans,L)}var P=gr();try{var F=b&&b.db._novip===this.db._novip?b===qe.trans?b._promise(f,O,_):$n(function(){return b._promise(f,O,_)},{trans:b,transless:qe.transless||qe}):function G(X,L,ee,q){if(X.idbdb&&(X._state.openComplete||qe.letThrough||X._vip)){var $=X._createTransaction(L,ee,X._dbSchema);try{$.create(),X._state.PR1398_maxLoop=3}catch(te){return te.name===un.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,L,ee,q)})):$t(te)}return $._promise(L,function(te,Q){return $n(function(){return qe.trans=$,q(te,Q,$)})}).then(function(te){if(L==="readwrite")try{$.idbtrans.commit()}catch{}return L==="readonly"?te:$._completion.then(function(){return te})})}if(X._state.openComplete)return $t(new Fe.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return $t(new Fe.DatabaseClosed);X.open().catch(Tt)}return X._state.dbReadyPromise.then(function(){return G(X,L,ee,q)})}(this.db,f,[this.name],O);return I&&(F._consoleTask=I,F=F.catch(function(G){return console.trace(G),$t(G)})),F}finally{P&&Ni()}},kt.prototype.get=function(f,p){var _=this;return f&&f.constructor===Object?this.where(f).first(p):f==null?$t(new Fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return _.core.get({trans:b,key:f}).then(function(A){return _.hook.reading.fire(A)})}).then(p)},kt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(m(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var p=c(f);if(p.length===1)return this.where(p[0]).equals(f[p[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&p.every(function(G){return 0<=P.keyPath.indexOf(G)})){for(var F=0;F<p.length;++F)if(p.indexOf(P.keyPath[F])===-1)return!1;return!0}return!1}).sort(function(P,F){return P.keyPath.length-F.keyPath.length})[0];if(_&&this.db._maxKey!==li){var I=_.keyPath.slice(0,p.length);return this.where(I).equals(I.map(function(F){return f[F]}))}!_&&Ln&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var b=this.schema.idxByName;function A(P,F){return ht(P,F)===0}var O=p.reduce(function(L,F){var G=L[0],X=L[1],L=b[F],ee=f[F];return[G||L,G||!L?ci(X,L&&L.multi?function(q){return q=je(q,F),m(q)&&q.some(function($){return A(ee,$)})}:function(q){return A(ee,je(q,F))}):X]},[null,null]),I=O[0],O=O[1];return I?this.where(I.name).equals(f[I.keyPath]).filter(O):_?this.filter(O):this.where(p).equals("")},kt.prototype.filter=function(f){return this.toCollection().and(f)},kt.prototype.count=function(f){return this.toCollection().count(f)},kt.prototype.offset=function(f){return this.toCollection().offset(f)},kt.prototype.limit=function(f){return this.toCollection().limit(f)},kt.prototype.each=function(f){return this.toCollection().each(f)},kt.prototype.toArray=function(f){return this.toCollection().toArray(f)},kt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,m(f)?"[".concat(f.join("+"),"]"):f))},kt.prototype.reverse=function(){return this.toCollection().reverse()},kt.prototype.mapToClass=function(f){var p,_=this.db,b=this.name;function A(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Ns&&(function(F,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function X(){this.constructor=F}t(F,G),F.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}(A,p=f),Object.defineProperty(A.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),A.prototype.table=function(){return b},f=A);for(var I=new Set,O=f.prototype;O;O=v(O))Object.getOwnPropertyNames(O).forEach(function(F){return I.add(F)});function P(F){if(!F)return F;var G,X=Object.create(f.prototype);for(G in F)if(!I.has(G))try{X[G]=F[G]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),f},kt.prototype.defineClass=function(){return this.mapToClass(function(f){y(this,f)})},kt.prototype.add=function(f,p){var _=this,b=this.schema.primKey,A=b.auto,I=b.keyPath,O=f;return I&&A&&(O=Vi(I)(f)),this._trans("readwrite",function(P){return _.core.mutate({trans:P,type:"add",keys:p!=null?[p]:null,values:[O]})}).then(function(P){return P.numFailures?Le.reject(P.failures[0]):P.lastResult}).then(function(P){if(I)try{U(f,I,P)}catch{}return P})},kt.prototype.update=function(f,p){return typeof f!="object"||m(f)?this.where(":id").equals(f).modify(p):(f=je(f,this.schema.primKey.keyPath),f===void 0?$t(new Fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(p))},kt.prototype.put=function(f,p){var _=this,b=this.schema.primKey,A=b.auto,I=b.keyPath,O=f;return I&&A&&(O=Vi(I)(f)),this._trans("readwrite",function(P){return _.core.mutate({trans:P,type:"put",values:[O],keys:p!=null?[p]:null})}).then(function(P){return P.numFailures?Le.reject(P.failures[0]):P.lastResult}).then(function(P){if(I)try{U(f,I,P)}catch{}return P})},kt.prototype.delete=function(f){var p=this;return this._trans("readwrite",function(_){return p.core.mutate({trans:_,type:"delete",keys:[f]})}).then(function(_){return _.numFailures?Le.reject(_.failures[0]):void 0})},kt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"deleteRange",range:hi})}).then(function(p){return p.numFailures?Le.reject(p.failures[0]):void 0})},kt.prototype.bulkGet=function(f){var p=this;return this._trans("readonly",function(_){return p.core.getMany({keys:f,trans:_}).then(function(b){return b.map(function(A){return p.hook.reading.fire(A)})})})},kt.prototype.bulkAdd=function(f,p,_){var b=this,A=Array.isArray(p)?p:void 0,I=(_=_||(A?void 0:p))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=b.schema.primKey,P=G.auto,G=G.keyPath;if(G&&A)throw new Fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var F=f.length,G=G&&P?f.map(Vi(G)):f;return b.core.mutate({trans:O,type:"add",keys:A,values:G,wantResults:I}).then(function($){var L=$.numFailures,ee=$.results,q=$.lastResult,$=$.failures;if(L===0)return I?ee:q;throw new et("".concat(b.name,".bulkAdd(): ").concat(L," of ").concat(F," operations failed"),$)})})},kt.prototype.bulkPut=function(f,p,_){var b=this,A=Array.isArray(p)?p:void 0,I=(_=_||(A?void 0:p))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=b.schema.primKey,P=G.auto,G=G.keyPath;if(G&&A)throw new Fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var F=f.length,G=G&&P?f.map(Vi(G)):f;return b.core.mutate({trans:O,type:"put",keys:A,values:G,wantResults:I}).then(function($){var L=$.numFailures,ee=$.results,q=$.lastResult,$=$.failures;if(L===0)return I?ee:q;throw new et("".concat(b.name,".bulkPut(): ").concat(L," of ").concat(F," operations failed"),$)})})},kt.prototype.bulkUpdate=function(f){var p=this,_=this.core,b=f.map(function(O){return O.key}),A=f.map(function(O){return O.changes}),I=[];return this._trans("readwrite",function(O){return _.getMany({trans:O,keys:b,cache:"clone"}).then(function(P){var F=[],G=[];f.forEach(function(L,ee){var q=L.key,$=L.changes,te=P[ee];if(te){for(var Q=0,ae=Object.keys($);Q<ae.length;Q++){var le=ae[Q],ce=$[le];if(le===p.schema.primKey.keyPath){if(ht(ce,q)!==0)throw new Fe.Constraint("Cannot update primary key in bulkUpdate()")}else U(te,le,ce)}I.push(ee),F.push(q),G.push(te)}});var X=F.length;return _.mutate({trans:O,type:"put",keys:F,values:G,updates:{keys:b,changeSpecs:A}}).then(function(L){var ee=L.numFailures,q=L.failures;if(ee===0)return X;for(var $=0,te=Object.keys(q);$<te.length;$++){var Q,ae=te[$],le=I[Number(ae)];le!=null&&(Q=q[ae],delete q[ae],q[le]=Q)}throw new et("".concat(p.name,".bulkUpdate(): ").concat(ee," of ").concat(X," operations failed"),q)})})})},kt.prototype.bulkDelete=function(f){var p=this,_=f.length;return this._trans("readwrite",function(b){return p.core.mutate({trans:b,type:"delete",keys:f})}).then(function(O){var A=O.numFailures,I=O.lastResult,O=O.failures;if(A===0)return I;throw new et("".concat(p.name,".bulkDelete(): ").concat(A," of ").concat(_," operations failed"),O)})},kt);function kt(){}function fi(f){function p(O,P){if(P){for(var F=arguments.length,G=new Array(F-1);--F;)G[F-1]=arguments[F];return _[O].subscribe.apply(null,G),f}if(typeof O=="string")return _[O]}var _={};p.addEventType=I;for(var b=1,A=arguments.length;b<A;++b)I(arguments[b]);return p;function I(O,P,F){if(typeof O!="object"){var G;P=P||_o;var X={subscribers:[],fire:F=F||Tt,subscribe:function(L){X.subscribers.indexOf(L)===-1&&(X.subscribers.push(L),X.fire=P(X.fire,L))},unsubscribe:function(L){X.subscribers=X.subscribers.filter(function(ee){return ee!==L}),X.fire=X.subscribers.reduce(P,F)}};return _[O]=p[O]=X}c(G=O).forEach(function(L){var ee=G[L];if(m(ee))I(L,G[L][0],G[L][1]);else{if(ee!=="asap")throw new Fe.InvalidArgument("Invalid event config");var q=I(L,Br,function(){for(var $=arguments.length,te=new Array($);$--;)te[$]=arguments[$];q.subscribers.forEach(function(Q){Pe(function(){Q.apply(null,te)})})})}})}}function ki(f,p){return he(p).from({prototype:f}),p}function xr(f,p){return!(f.filter||f.algorithm||f.or)&&(p?f.justLimit:!f.replayFilter)}function To(f,p){f.filter=ci(f.filter,p)}function en(f,p,_){var b=f.replayFilter;f.replayFilter=b?function(){return ci(b(),p())}:p,f.justLimit=_&&!b}function Bn(f,p){if(f.isPrimKey)return p.primaryKey;var _=p.getIndexByKeyPath(f.index);if(!_)throw new Fe.Schema("KeyPath "+f.index+" on object store "+p.name+" is not indexed");return _}function is(f,p,_){var b=Bn(f,p.schema);return p.openCursor({trans:_,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:b,range:f.range}})}function Qr(f,p,_,b){var A=f.replayFilter?ci(f.filter,f.replayFilter()):f.filter;if(f.or){var I={},O=function(P,F,G){var X,L;A&&!A(F,G,function(ee){return F.stop(ee)},function(ee){return F.fail(ee)})||((L=""+(X=F.primaryKey))=="[object ArrayBuffer]"&&(L=""+new Uint8Array(X)),R(I,L)||(I[L]=!0,p(P,F,G)))};return Promise.all([f.or._iterate(O,_),di(is(f,b,_),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return di(is(f,b,_),ci(f.algorithm,A),p,!f.keysOnly&&f.valueMapper)}function di(f,p,_,b){var A=ut(b?function(I,O,P){return _(b(I),O,P)}:_);return f.then(function(I){if(I)return I.start(function(){var O=function(){return I.continue()};p&&!p(I,function(P){return O=P},function(P){I.stop(P),O=Tt},function(P){I.fail(P),O=Tt})||A(I.value,I,function(P){return O=P}),O()})})}var It=(ss.prototype.execute=function(f){var p=this["@@propmod"];if(p.add!==void 0){var _=p.add;if(m(_))return a(a([],m(f)?f:[],!0),_).sort();if(typeof _=="number")return(Number(f)||0)+_;if(typeof _=="bigint")try{return BigInt(f)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(p.remove!==void 0){var b=p.remove;if(m(b))return m(f)?f.filter(function(A){return!b.includes(A)}).sort():[];if(typeof b=="number")return Number(f)-b;if(typeof b=="bigint")try{return BigInt(f)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return _=(_=p.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof f=="string"&&f.startsWith(_)?p.replacePrefix[1]+f.substring(_.length):f},ss);function ss(f){this["@@propmod"]=f}var Cr=(dt.prototype._read=function(f,p){var _=this._ctx;return _.error?_.table._trans(null,$t.bind(null,_.error)):_.table._trans("readonly",f).then(p)},dt.prototype._write=function(f){var p=this._ctx;return p.error?p.table._trans(null,$t.bind(null,p.error)):p.table._trans("readwrite",f,"locked")},dt.prototype._addAlgorithm=function(f){var p=this._ctx;p.algorithm=ci(p.algorithm,f)},dt.prototype._iterate=function(f,p){return Qr(this._ctx,f,p,this._ctx.table.core)},dt.prototype.clone=function(f){var p=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return f&&y(_,f),p._ctx=_,p},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(f){var p=this._ctx;return this._read(function(_){return Qr(p,f,_,p.table.core)})},dt.prototype.count=function(f){var p=this;return this._read(function(_){var b=p._ctx,A=b.table.core;if(xr(b,!0))return A.count({trans:_,query:{index:Bn(b,A.schema),range:b.range}}).then(function(O){return Math.min(O,b.limit)});var I=0;return Qr(b,function(){return++I,!1},_,A).then(function(){return I})}).then(f)},dt.prototype.sortBy=function(f,p){var _=f.split(".").reverse(),b=_[0],A=_.length-1;function I(F,G){return G?I(F[_[G]],G-1):F[b]}var O=this._ctx.dir==="next"?1:-1;function P(F,G){return ht(I(F,A),I(G,A))*O}return this.toArray(function(F){return F.sort(P)}).then(p)},dt.prototype.toArray=function(f){var p=this;return this._read(function(_){var b=p._ctx;if(b.dir==="next"&&xr(b,!0)&&0<b.limit){var A=b.valueMapper,I=Bn(b,b.table.core.schema);return b.table.core.query({trans:_,limit:b.limit,values:!0,query:{index:I,range:b.range}}).then(function(P){return P=P.result,A?P.map(A):P})}var O=[];return Qr(b,function(P){return O.push(P)},_,b.table.core).then(function(){return O})},f)},dt.prototype.offset=function(f){var p=this._ctx;return f<=0||(p.offset+=f,xr(p)?en(p,function(){var _=f;return function(b,A){return _===0||(_===1?--_:A(function(){b.advance(_),_=0}),!1)}}):en(p,function(){var _=f;return function(){return--_<0}})),this},dt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),en(this._ctx,function(){var p=f;return function(_,b,A){return--p<=0&&b(A),0<=p}},!0),this},dt.prototype.until=function(f,p){return To(this._ctx,function(_,b,A){return!f(_.value)||(b(A),p)}),this},dt.prototype.first=function(f){return this.limit(1).toArray(function(p){return p[0]}).then(f)},dt.prototype.last=function(f){return this.reverse().first(f)},dt.prototype.filter=function(f){var p;return To(this._ctx,function(_){return f(_.value)}),(p=this._ctx).isMatch=ci(p.isMatch,f),this},dt.prototype.and=function(f){return this.filter(f)},dt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(_,b){f(b.key,b)})},dt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},dt.prototype.eachPrimaryKey=function(f){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(_,b){f(b.primaryKey,b)})},dt.prototype.keys=function(f){var p=this._ctx;p.keysOnly=!p.isMatch;var _=[];return this.each(function(b,A){_.push(A.key)}).then(function(){return _}).then(f)},dt.prototype.primaryKeys=function(f){var p=this._ctx;if(p.dir==="next"&&xr(p,!0)&&0<p.limit)return this._read(function(b){var A=Bn(p,p.table.core.schema);return p.table.core.query({trans:b,values:!1,limit:p.limit,query:{index:A,range:p.range}})}).then(function(b){return b.result}).then(f);p.keysOnly=!p.isMatch;var _=[];return this.each(function(b,A){_.push(A.primaryKey)}).then(function(){return _}).then(f)},dt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},dt.prototype.firstKey=function(f){return this.limit(1).keys(function(p){return p[0]}).then(f)},dt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},dt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var p={};return To(this._ctx,function(A){var b=A.primaryKey.toString(),A=R(p,b);return p[b]=!0,!A}),this},dt.prototype.modify=function(f){var p=this,_=this._ctx;return this._write(function(b){var A,I,O;O=typeof f=="function"?f:(A=c(f),I=A.length,function(Q){for(var ae=!1,le=0;le<I;++le){var ce=A[le],ye=f[ce],Ce=je(Q,ce);ye instanceof It?(U(Q,ce,ye.execute(Ce)),ae=!0):Ce!==ye&&(U(Q,ce,ye),ae=!0)}return ae});var P=_.table.core,L=P.schema.primaryKey,F=L.outbound,G=L.extractKey,X=200,L=p.db._options.modifyChunkSize;L&&(X=typeof L=="object"?L[P.name]||L["*"]||200:L);function ee(Q,ce){var le=ce.failures,ce=ce.numFailures;$+=Q-ce;for(var ye=0,Ce=c(le);ye<Ce.length;ye++){var Ve=Ce[ye];q.push(le[Ve])}}var q=[],$=0,te=[];return p.clone().primaryKeys().then(function(Q){function ae(ce){var ye=Math.min(X,Q.length-ce);return P.getMany({trans:b,keys:Q.slice(ce,ce+ye),cache:"immutable"}).then(function(Ce){for(var Ve=[],Re=[],Oe=F?[]:null,ke=[],xe=0;xe<ye;++xe){var ze=Ce[xe],Je={value:M(ze),primKey:Q[ce+xe]};O.call(Je,Je.value,Je)!==!1&&(Je.value==null?ke.push(Q[ce+xe]):F||ht(G(ze),G(Je.value))===0?(Re.push(Je.value),F&&Oe.push(Q[ce+xe])):(ke.push(Q[ce+xe]),Ve.push(Je.value)))}return Promise.resolve(0<Ve.length&&P.mutate({trans:b,type:"add",values:Ve}).then(function(tt){for(var lt in tt.failures)ke.splice(parseInt(lt),1);ee(Ve.length,tt)})).then(function(){return(0<Re.length||le&&typeof f=="object")&&P.mutate({trans:b,type:"put",keys:Oe,values:Re,criteria:le,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ce}).then(function(tt){return ee(Re.length,tt)})}).then(function(){return(0<ke.length||le&&f===_a)&&P.mutate({trans:b,type:"delete",keys:ke,criteria:le,isAdditionalChunk:0<ce}).then(function(tt){return ee(ke.length,tt)})}).then(function(){return Q.length>ce+ye&&ae(ce+X)})})}var le=xr(_)&&_.limit===1/0&&(typeof f!="function"||f===_a)&&{index:_.index,range:_.range};return ae(0).then(function(){if(0<q.length)throw new ct("Error modifying one or more objects",q,$,te);return Q.length})})})},dt.prototype.delete=function(){var f=this._ctx,p=f.range;return xr(f)&&(f.isPrimKey||p.type===3)?this._write(function(_){var b=f.table.core.schema.primaryKey,A=p;return f.table.core.count({trans:_,query:{index:b,range:A}}).then(function(I){return f.table.core.mutate({trans:_,type:"deleteRange",range:A}).then(function(O){var P=O.failures;if(O.lastResult,O.results,O=O.numFailures,O)throw new ct("Could not delete some values",Object.keys(P).map(function(F){return P[F]}),I-O);return I-O})})}):this.modify(_a)},dt);function dt(){}var _a=function(f,p){return p.value=null};function wo(f,p){return f<p?-1:f===p?0:1}function So(f,p){return p<f?-1:f===p?0:1}function Jn(f,p,_){return f=f instanceof mi?new f.Collection(f):f,f._ctx.error=new(_||TypeError)(p),f}function as(f){return new f.Collection(f,function(){return Er("")}).limit(0)}function Mi(f,p,_,b){var A,I,O,P,F,G,X,L=_.length;if(!_.every(function($){return typeof $=="string"}))return Jn(f,bo);function ee($){A=$==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},I=$==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},O=$==="next"?wo:So;var te=_.map(function(Q){return{lower:I(Q),upper:A(Q)}}).sort(function(Q,ae){return O(Q.lower,ae.lower)});P=te.map(function(Q){return Q.upper}),F=te.map(function(Q){return Q.lower}),X=(G=$)==="next"?"":b}ee("next"),f=new f.Collection(f,function(){return zn(P[0],F[L-1]+b)}),f._ondirectionchange=function($){ee($)};var q=0;return f._addAlgorithm(function($,te,Q){var ae=$.key;if(typeof ae!="string")return!1;var le=I(ae);if(p(le,F,q))return!0;for(var ce=null,ye=q;ye<L;++ye){var Ce=function(Ve,Re,Oe,ke,xe,ze){for(var Je=Math.min(Ve.length,ke.length),tt=-1,lt=0;lt<Je;++lt){var Zn=Re[lt];if(Zn!==ke[lt])return xe(Ve[lt],Oe[lt])<0?Ve.substr(0,lt)+Oe[lt]+Oe.substr(lt+1):xe(Ve[lt],ke[lt])<0?Ve.substr(0,lt)+ke[lt]+Oe.substr(lt+1):0<=tt?Ve.substr(0,tt)+Re[tt]+Oe.substr(tt+1):null;xe(Ve[lt],Zn)<0&&(tt=lt)}return Je<ke.length&&ze==="next"?Ve+Oe.substr(Ve.length):Je<Ve.length&&ze==="prev"?Ve.substr(0,Oe.length):tt<0?null:Ve.substr(0,tt)+ke[tt]+Oe.substr(tt+1)}(ae,le,P[ye],F[ye],O,G);Ce===null&&ce===null?q=ye+1:(ce===null||0<O(ce,Ce))&&(ce=Ce)}return te(ce!==null?function(){$.continue(ce+X)}:Q),!1}),f}function zn(f,p,_,b){return{type:2,lower:f,upper:p,lowerOpen:_,upperOpen:b}}function Er(f){return{type:1,lower:f,upper:f}}var mi=(Object.defineProperty(jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),jt.prototype.between=function(f,p,_,b){_=_!==!1,b=b===!0;try{return 0<this._cmp(f,p)||this._cmp(f,p)===0&&(_||b)&&(!_||!b)?as(this):new this.Collection(this,function(){return zn(f,p,!_,!b)})}catch{return Jn(this,Wn)}},jt.prototype.equals=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return Er(f)})},jt.prototype.above=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(f,void 0,!0)})},jt.prototype.aboveOrEqual=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(f,void 0,!1)})},jt.prototype.below=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(void 0,f,!1,!0)})},jt.prototype.belowOrEqual=function(f){return f==null?Jn(this,Wn):new this.Collection(this,function(){return zn(void 0,f)})},jt.prototype.startsWith=function(f){return typeof f!="string"?Jn(this,bo):this.between(f,f+li,!0,!0)},jt.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):Mi(this,function(p,_){return p.indexOf(_[0])===0},[f],li)},jt.prototype.equalsIgnoreCase=function(f){return Mi(this,function(p,_){return p===_[0]},[f],"")},jt.prototype.anyOfIgnoreCase=function(){var f=B.apply(pt,arguments);return f.length===0?as(this):Mi(this,function(p,_){return _.indexOf(p)!==-1},f,"")},jt.prototype.startsWithAnyOfIgnoreCase=function(){var f=B.apply(pt,arguments);return f.length===0?as(this):Mi(this,function(p,_){return _.some(function(b){return p.indexOf(b)===0})},f,li)},jt.prototype.anyOf=function(){var f=this,p=B.apply(pt,arguments),_=this._cmp;try{p.sort(_)}catch{return Jn(this,Wn)}if(p.length===0)return as(this);var b=new this.Collection(this,function(){return zn(p[0],p[p.length-1])});b._ondirectionchange=function(I){_=I==="next"?f._ascending:f._descending,p.sort(_)};var A=0;return b._addAlgorithm(function(I,O,P){for(var F=I.key;0<_(F,p[A]);)if(++A===p.length)return O(P),!1;return _(F,p[A])===0||(O(function(){I.continue(p[A])}),!1)}),b},jt.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},jt.prototype.noneOf=function(){var f=B.apply(pt,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Jn(this,Wn)}var p=f.reduce(function(_,b){return _?_.concat([[_[_.length-1][1],b]]):[[-1/0,b]]},null);return p.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},jt.prototype.inAnyRange=function(ae,p){var _=this,b=this._cmp,A=this._ascending,I=this._descending,O=this._min,P=this._max;if(ae.length===0)return as(this);if(!ae.every(function(le){return le[0]!==void 0&&le[1]!==void 0&&A(le[0],le[1])<=0}))return Jn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Fe.InvalidArgument);var F=!p||p.includeLowers!==!1,G=p&&p.includeUppers===!0,X,L=A;function ee(le,ce){return L(le[0],ce[0])}try{(X=ae.reduce(function(le,ce){for(var ye=0,Ce=le.length;ye<Ce;++ye){var Ve=le[ye];if(b(ce[0],Ve[1])<0&&0<b(ce[1],Ve[0])){Ve[0]=O(Ve[0],ce[0]),Ve[1]=P(Ve[1],ce[1]);break}}return ye===Ce&&le.push(ce),le},[])).sort(ee)}catch{return Jn(this,Wn)}var q=0,$=G?function(le){return 0<A(le,X[q][1])}:function(le){return 0<=A(le,X[q][1])},te=F?function(le){return 0<I(le,X[q][0])}:function(le){return 0<=I(le,X[q][0])},Q=$,ae=new this.Collection(this,function(){return zn(X[0][0],X[X.length-1][1],!F,!G)});return ae._ondirectionchange=function(le){L=le==="next"?(Q=$,A):(Q=te,I),X.sort(ee)},ae._addAlgorithm(function(le,ce,ye){for(var Ce,Ve=le.key;Q(Ve);)if(++q===X.length)return ce(ye),!1;return!$(Ce=Ve)&&!te(Ce)||(_._cmp(Ve,X[q][1])===0||_._cmp(Ve,X[q][0])===0||ce(function(){L===A?le.continue(X[q][0]):le.continue(X[q][1])}),!1)}),ae},jt.prototype.startsWithAnyOf=function(){var f=B.apply(pt,arguments);return f.every(function(p){return typeof p=="string"})?f.length===0?as(this):this.inAnyRange(f.map(function(p){return[p,p+li]})):Jn(this,"startsWithAnyOf() only works with strings")},jt);function jt(){}function sr(f){return ut(function(p){return ar(p),f(p.target.error),!1})}function ar(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var os="storagemutated",Li="x-storagemutated-1",Sn=fi(null,os),Dr=(jn.prototype._lock=function(){return De(!qe.global),++this._reculock,this._reculock!==1||qe.global||(qe.lockOwnerFor=this),this},jn.prototype._unlock=function(){if(De(!qe.global),--this._reculock==0)for(qe.global||(qe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Ir(f[1],f[0])}catch{}}return this},jn.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},jn.prototype.create=function(f){var p=this;if(!this.mode)return this;var _=this.db.idbdb,b=this.db._state.dbOpenError;if(De(!this.idbtrans),!f&&!_)switch(b&&b.name){case"DatabaseClosedError":throw new Fe.DatabaseClosed(b);case"MissingAPIError":throw new Fe.MissingAPI(b.message,b);default:throw new Fe.OpenFailed(b)}if(!this.active)throw new Fe.TransactionInactive;return De(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(A){ar(A),p._reject(f.error)}),f.onabort=ut(function(A){ar(A),p.active&&p._reject(new Fe.Abort(f.error)),p.active=!1,p.on("abort").fire(A)}),f.oncomplete=ut(function(){p.active=!1,p._resolve(),"mutatedParts"in f&&Sn.storagemutated.fire(f.mutatedParts)}),this},jn.prototype._promise=function(f,p,_){var b=this;if(f==="readwrite"&&this.mode!=="readwrite")return $t(new Fe.ReadOnly("Transaction is readonly"));if(!this.active)return $t(new Fe.TransactionInactive);if(this._locked())return new Le(function(I,O){b._blockedFuncs.push([function(){b._promise(f,p,_).then(I,O)},qe])});if(_)return $n(function(){var I=new Le(function(O,P){b._lock();var F=p(O,P,b);F&&F.then&&F.then(O,P)});return I.finally(function(){return b._unlock()}),I._lib=!0,I});var A=new Le(function(I,O){var P=p(I,O,b);P&&P.then&&P.then(I,O)});return A._lib=!0,A},jn.prototype._root=function(){return this.parent?this.parent._root():this},jn.prototype.waitFor=function(f){var p,_=this._root(),b=Le.resolve(f);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return b}):(_._waitingFor=b,_._waitingQueue=[],p=_.idbtrans.objectStore(_.storeNames[0]),function I(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(p.get(-1/0).onsuccess=I)}());var A=_._waitingFor;return new Le(function(I,O){b.then(function(P){return _._waitingQueue.push(ut(I.bind(null,P)))},function(P){return _._waitingQueue.push(ut(O.bind(null,P)))}).finally(function(){_._waitingFor===A&&(_._waitingFor=null)})})},jn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Fe.Abort))},jn.prototype.table=function(f){var p=this._memoizedTables||(this._memoizedTables={});if(R(p,f))return p[f];var _=this.schema[f];if(!_)throw new Fe.NotFound("Table "+f+" not part of transaction");return _=new this.db.Table(f,_,this),_.core=this.db.core.table(f),p[f]=_},jn);function jn(){}function Or(f,p,_,b,A,I,O){return{name:f,keyPath:p,unique:_,multi:b,auto:A,compound:I,src:(_&&!O?"&":"")+(b?"*":"")+(A?"++":"")+Ui(p)}}function Ui(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function Yr(f,p,_){return{name:f,primKey:p,indexes:_,mappedClass:null,idxByName:(b=function(A){return[A.name,A]},_.reduce(function(A,I,O){return O=b(I,O),O&&(A[O[0]]=O[1]),A},{}))};var b}var Bi=function(f){try{return f.only([[]]),Bi=function(){return[[]]},[[]]}catch{return Bi=function(){return li},li}};function Nr(f){return f==null?function(){}:typeof f=="string"?(p=f).split(".").length===1?function(_){return _[p]}:function(_){return je(_,p)}:function(_){return je(_,f)};var p}function $r(f){return[].slice.call(f)}var Ao=0;function tn(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Ct(f,p,F){function b(Q){if(Q.type===3)return null;if(Q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var q=Q.lower,$=Q.upper,te=Q.lowerOpen,Q=Q.upperOpen;return q===void 0?$===void 0?null:p.upperBound($,!!Q):$===void 0?p.lowerBound(q,!!te):p.bound(q,$,!!te,!!Q)}function A(ee){var q,$=ee.name;return{name:$,schema:ee,mutate:function(te){var Q=te.trans,ae=te.type,le=te.keys,ce=te.values,ye=te.range;return new Promise(function(Ce,Ve){Ce=ut(Ce);var Re=Q.objectStore($),Oe=Re.keyPath==null,ke=ae==="put"||ae==="add";if(!ke&&ae!=="delete"&&ae!=="deleteRange")throw new Error("Invalid operation type: "+ae);var xe,ze=(le||ce||{length:1}).length;if(le&&ce&&le.length!==ce.length)throw new Error("Given keys array must have same length as given values array.");if(ze===0)return Ce({numFailures:0,failures:{},results:[],lastResult:void 0});function Je(qn){++Zn,ar(qn)}var tt=[],lt=[],Zn=0;if(ae==="deleteRange"){if(ye.type===4)return Ce({numFailures:Zn,failures:lt,results:[],lastResult:void 0});ye.type===3?tt.push(xe=Re.clear()):tt.push(xe=Re.delete(b(ye)))}else{var Oe=ke?Oe?[ce,le]:[ce,null]:[le,null],it=Oe[0],yn=Oe[1];if(ke)for(var In=0;In<ze;++In)tt.push(xe=yn&&yn[In]!==void 0?Re[ae](it[In],yn[In]):Re[ae](it[In])),xe.onerror=Je;else for(In=0;In<ze;++In)tt.push(xe=Re[ae](it[In])),xe.onerror=Je}function Gi(qn){qn=qn.target.result,tt.forEach(function(Ti,hs){return Ti.error!=null&&(lt[hs]=Ti.error)}),Ce({numFailures:Zn,failures:lt,results:ae==="delete"?le:tt.map(function(Ti){return Ti.result}),lastResult:qn})}xe.onerror=function(qn){Je(qn),Gi(qn)},xe.onsuccess=Gi})},getMany:function(te){var Q=te.trans,ae=te.keys;return new Promise(function(le,ce){le=ut(le);for(var ye,Ce=Q.objectStore($),Ve=ae.length,Re=new Array(Ve),Oe=0,ke=0,xe=function(tt){tt=tt.target,Re[tt._pos]=tt.result,++ke===Oe&&le(Re)},ze=sr(ce),Je=0;Je<Ve;++Je)ae[Je]!=null&&((ye=Ce.get(ae[Je]))._pos=Je,ye.onsuccess=xe,ye.onerror=ze,++Oe);Oe===0&&le(Re)})},get:function(te){var Q=te.trans,ae=te.key;return new Promise(function(le,ce){le=ut(le);var ye=Q.objectStore($).get(ae);ye.onsuccess=function(Ce){return le(Ce.target.result)},ye.onerror=sr(ce)})},query:(q=G,function(te){return new Promise(function(Q,ae){Q=ut(Q);var le,ce,ye,Oe=te.trans,Ce=te.values,Ve=te.limit,xe=te.query,Re=Ve===1/0?void 0:Ve,ke=xe.index,xe=xe.range,Oe=Oe.objectStore($),ke=ke.isPrimaryKey?Oe:Oe.index(ke.name),xe=b(xe);if(Ve===0)return Q({result:[]});q?((Re=Ce?ke.getAll(xe,Re):ke.getAllKeys(xe,Re)).onsuccess=function(ze){return Q({result:ze.target.result})},Re.onerror=sr(ae)):(le=0,ce=!Ce&&"openKeyCursor"in ke?ke.openKeyCursor(xe):ke.openCursor(xe),ye=[],ce.onsuccess=function(ze){var Je=ce.result;return Je?(ye.push(Ce?Je.value:Je.primaryKey),++le===Ve?Q({result:ye}):void Je.continue()):Q({result:ye})},ce.onerror=sr(ae))})}),openCursor:function(te){var Q=te.trans,ae=te.values,le=te.query,ce=te.reverse,ye=te.unique;return new Promise(function(Ce,Ve){Ce=ut(Ce);var ke=le.index,Re=le.range,Oe=Q.objectStore($),Oe=ke.isPrimaryKey?Oe:Oe.index(ke.name),ke=ce?ye?"prevunique":"prev":ye?"nextunique":"next",xe=!ae&&"openKeyCursor"in Oe?Oe.openKeyCursor(b(Re),ke):Oe.openCursor(b(Re),ke);xe.onerror=sr(Ve),xe.onsuccess=ut(function(ze){var Je,tt,lt,Zn,it=xe.result;it?(it.___id=++Ao,it.done=!1,Je=it.continue.bind(it),tt=(tt=it.continuePrimaryKey)&&tt.bind(it),lt=it.advance.bind(it),Zn=function(){throw new Error("Cursor not stopped")},it.trans=Q,it.stop=it.continue=it.continuePrimaryKey=it.advance=function(){throw new Error("Cursor not started")},it.fail=ut(Ve),it.next=function(){var yn=this,In=1;return this.start(function(){return In--?yn.continue():yn.stop()}).then(function(){return yn})},it.start=function(yn){function In(){if(xe.result)try{yn()}catch(qn){it.fail(qn)}else it.done=!0,it.start=function(){throw new Error("Cursor behind last entry")},it.stop()}var Gi=new Promise(function(qn,Ti){qn=ut(qn),xe.onerror=sr(Ti),it.fail=Ti,it.stop=function(hs){it.stop=it.continue=it.continuePrimaryKey=it.advance=Zn,qn(hs)}});return xe.onsuccess=ut(function(qn){xe.onsuccess=In,In()}),it.continue=Je,it.continuePrimaryKey=tt,it.advance=lt,In(),Gi},Ce(it)):Ce(null)},Ve)})},count:function(te){var Q=te.query,ae=te.trans,le=Q.index,ce=Q.range;return new Promise(function(ye,Ce){var Ve=ae.objectStore($),Re=le.isPrimaryKey?Ve:Ve.index(le.name),Ve=b(ce),Re=Ve?Re.count(Ve):Re.count();Re.onsuccess=ut(function(Oe){return ye(Oe.target.result)}),Re.onerror=sr(Ce)})}}}var I,O,P,X=(O=F,P=$r((I=f).objectStoreNames),{schema:{name:I.name,tables:P.map(function(ee){return O.objectStore(ee)}).map(function(ee){var q=ee.keyPath,Q=ee.autoIncrement,$=m(q),te={},Q={name:ee.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q==null,compound:$,keyPath:q,autoIncrement:Q,unique:!0,extractKey:Nr(q)},indexes:$r(ee.indexNames).map(function(ae){return ee.index(ae)}).map(function(ye){var le=ye.name,ce=ye.unique,Ce=ye.multiEntry,ye=ye.keyPath,Ce={name:le,compound:m(ye),keyPath:ye,unique:ce,multiEntry:Ce,extractKey:Nr(ye)};return te[tn(ye)]=Ce}),getIndexByKeyPath:function(ae){return te[tn(ae)]}};return te[":id"]=Q.primaryKey,q!=null&&(te[tn(q)]=Q.primaryKey),Q})},hasGetAll:0<P.length&&"getAll"in O.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),F=X.schema,G=X.hasGetAll,X=F.tables.map(A),L={};return X.forEach(function(ee){return L[ee.name]=ee}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(ee){if(!L[ee])throw new Error("Table '".concat(ee,"' not found"));return L[ee]},MIN_KEY:-1/0,MAX_KEY:Bi(p),schema:F}}function Ea(f,p,_,b){var A=_.IDBKeyRange;return _.indexedDB,{dbcore:(b=Ct(p,A,b),f.dbcore.reduce(function(I,O){return O=O.create,r(r({},I),O(I))},b))}}function pi(f,b){var _=b.db,b=Ea(f._middlewares,_,f._deps,b);f.core=b.dbcore,f.tables.forEach(function(A){var I=A.name;f.core.schema.tables.some(function(O){return O.name===I})&&(A.core=f.core.table(I),f[I]instanceof f.Table&&(f[I].core=A.core))})}function Vs(f,p,_,b){_.forEach(function(A){var I=b[A];p.forEach(function(O){var P=function F(G,X){return W(G,X)||(G=v(G))&&F(G,X)}(O,A);(!P||"value"in P&&P.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?H(O,A,{get:function(){return this.table(A)},set:function(F){z(this,A,{value:F,writable:!0,configurable:!0,enumerable:!0})}}):O[A]=new f.Table(A,I))})})}function us(f,p){p.forEach(function(_){for(var b in _)_[b]instanceof f.Table&&delete _[b]})}function ba(f,p){return f._cfg.version-p._cfg.version}function gi(f,p,_,b){var A=f._dbSchema;_.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=Yr("$meta",Ms("")[0],[]),f._storeNames.push("$meta"));var I=f._createTransaction("readwrite",f._storeNames,A);I.create(_),I._completion.catch(b);var O=I._reject.bind(I),P=qe.transless||qe;$n(function(){return qe.trans=I,qe.transless=P,p!==0?(pi(f,_),G=p,((F=I).storeNames.includes("$meta")?F.table("$meta").get("version").then(function(X){return X??G}):Le.resolve(G)).then(function(X){return ee=X,q=I,$=_,te=[],X=(L=f)._versions,Q=L._dbSchema=zi(0,L.idbdb,$),(X=X.filter(function(ae){return ae._cfg.version>=ee})).length!==0?(X.forEach(function(ae){te.push(function(){var le=Q,ce=ae._cfg.dbschema;ls(L,le,$),ls(L,ce,$),Q=L._dbSchema=ce;var ye=or(le,ce);ye.add.forEach(function(ke){Ta($,ke[0],ke[1].primKey,ke[1].indexes)}),ye.change.forEach(function(ke){if(ke.recreate)throw new Fe.Upgrade("Not yet support for changing primary key");var xe=$.objectStore(ke.name);ke.add.forEach(function(ze){return yi(xe,ze)}),ke.change.forEach(function(ze){xe.deleteIndex(ze.name),yi(xe,ze)}),ke.del.forEach(function(ze){return xe.deleteIndex(ze)})});var Ce=ae._cfg.contentUpgrade;if(Ce&&ae._cfg.version>ee){pi(L,$),q._memoizedTables={};var Ve=N(ce);ye.del.forEach(function(ke){Ve[ke]=le[ke]}),us(L,[L.Transaction.prototype]),Vs(L,[L.Transaction.prototype],c(Ve),Ve),q.schema=Ve;var Re,Oe=Te(Ce);return Oe&&ir(),ye=Le.follow(function(){var ke;(Re=Ce(q))&&Oe&&(ke=On.bind(null,null),Re.then(ke,ke))}),Re&&typeof Re.then=="function"?Le.resolve(Re):ye.then(function(){return Re})}}),te.push(function(le){var ce,ye,Ce=ae._cfg.dbschema;ce=Ce,ye=le,[].slice.call(ye.db.objectStoreNames).forEach(function(Ve){return ce[Ve]==null&&ye.db.deleteObjectStore(Ve)}),us(L,[L.Transaction.prototype]),Vs(L,[L.Transaction.prototype],L._storeNames,L._dbSchema),q.schema=L._dbSchema}),te.push(function(le){L.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(L.idbdb.version/10)===ae._cfg.version?(L.idbdb.deleteObjectStore("$meta"),delete L._dbSchema.$meta,L._storeNames=L._storeNames.filter(function(ce){return ce!=="$meta"})):le.objectStore("$meta").put(ae._cfg.version,"version"))})}),function ae(){return te.length?Le.resolve(te.shift()(q.idbtrans)).then(ae):Le.resolve()}().then(function(){bu(Q,$)})):Le.resolve();var L,ee,q,$,te,Q}).catch(O)):(c(A).forEach(function(X){Ta(_,X,A[X].primKey,A[X].indexes)}),pi(f,_),void Le.follow(function(){return f.on.populate.fire(I)}).catch(O));var F,G})}function ks(f,p){bu(f._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var _=zi(0,f.idbdb,p);ls(f,f._dbSchema,p);for(var b=0,A=or(_,f._dbSchema).change;b<A.length;b++){var I=function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=p.objectStore(O.name);O.add.forEach(function(F){Ln&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(F.src)),yi(P,F)})}(A[b]);if(typeof I=="object")return I.value}}function or(f,p){var _,b={del:[],add:[],change:[]};for(_ in f)p[_]||b.del.push(_);for(_ in p){var A=f[_],I=p[_];if(A){var O={name:_,def:I,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(I.primKey.keyPath||"")||A.primKey.auto!==I.primKey.auto)O.recreate=!0,b.change.push(O);else{var P=A.idxByName,F=I.idxByName,G=void 0;for(G in P)F[G]||O.del.push(G);for(G in F){var X=P[G],L=F[G];X?X.src!==L.src&&O.change.push(L):O.add.push(L)}(0<O.del.length||0<O.add.length||0<O.change.length)&&b.change.push(O)}}else b.add.push([_,I])}return b}function Ta(f,p,_,b){var A=f.db.createObjectStore(p,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return b.forEach(function(I){return yi(A,I)}),A}function bu(f,p){c(f).forEach(function(_){p.db.objectStoreNames.contains(_)||(Ln&&console.debug("Dexie: Creating missing table",_),Ta(p,_,f[_].primKey,f[_].indexes))})}function yi(f,p){f.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function zi(f,p,_){var b={};return Ee(p.objectStoreNames,0).forEach(function(A){for(var I=_.objectStore(A),O=Or(Ui(G=I.keyPath),G||"",!0,!1,!!I.autoIncrement,G&&typeof G!="string",!0),P=[],F=0;F<I.indexNames.length;++F){var X=I.index(I.indexNames[F]),G=X.keyPath,X=Or(X.name,G,!!X.unique,!!X.multiEntry,!1,G&&typeof G!="string",!1);P.push(X)}b[A]=Yr(A,O,P)}),b}function ls(f,p,_){for(var b=_.db.objectStoreNames,A=0;A<b.length;++A){var I=b[A],O=_.objectStore(I);f._hasGetAll="getAll"in O;for(var P=0;P<O.indexNames.length;++P){var F=O.indexNames[P],G=O.index(F).keyPath,X=typeof G=="string"?G:"["+Ee(G).join("+")+"]";!p[I]||(G=p[I].idxByName[X])&&(G.name=F,delete p[I].idxByName[X],p[I].idxByName[F]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Ms(f){return f.split(",").map(function(p,_){var b=(p=p.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return Or(b,A||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),m(A),_===0)})}var Tu=(ji.prototype._parseStoresSpec=function(f,p){c(f).forEach(function(_){if(f[_]!==null){var b=Ms(f[_]),A=b.shift();if(A.unique=!0,A.multi)throw new Fe.Schema("Primary key cannot be multi-valued");b.forEach(function(I){if(I.auto)throw new Fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new Fe.Schema("Index must have a name and cannot be an empty string")}),p[_]=Yr(_,A,b)}})},ji.prototype.stores=function(_){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,_):_;var _=p._versions,b={},A={};return _.forEach(function(I){y(b,I._cfg.storesSource),A=I._cfg.dbschema={},I._parseStoresSpec(b,A)}),p._dbSchema=A,us(p,[p._allTables,p,p.Transaction.prototype]),Vs(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],c(A),A),p._storeNames=c(A),this},ji.prototype.upgrade=function(f){return this._cfg.contentUpgrade=es(this._cfg.contentUpgrade||Tt,f),this},ji);function ji(){}function Io(f,p){var _=f._dbNamesDB;return _||(_=f._dbNamesDB=new bi(_r,{addons:[],indexedDB:f,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function Ls(f){return f&&typeof f.databases=="function"}function qi(f){return $n(function(){return qe.letThrough=!0,f()})}function wa(f){return!("from"in f)}var pn=function(f,p){if(!this){var _=new pn;return f&&"d"in f&&y(_,f),_}y(this,arguments.length?{d:1,from:f,to:1<arguments.length?p:f}:{d:0})};function Fi(f,p,_){var b=ht(p,_);if(!isNaN(b)){if(0<b)throw RangeError();if(wa(f))return y(f,{from:p,to:_,d:1});var A=f.l,b=f.r;if(ht(_,f.from)<0)return A?Fi(A,p,_):f.l={from:p,to:_,d:1,l:null,r:null},xo(f);if(0<ht(p,f.to))return b?Fi(b,p,_):f.r={from:p,to:_,d:1,l:null,r:null},xo(f);ht(p,f.from)<0&&(f.from=p,f.l=null,f.d=b?b.d+1:1),0<ht(_,f.to)&&(f.to=_,f.r=null,f.d=f.l?f.l.d+1:1),_=!f.r,A&&!f.l&&Xr(f,A),b&&_&&Xr(f,b)}}function Xr(f,p){wa(p)||function _(b,F){var I=F.from,O=F.to,P=F.l,F=F.r;Fi(b,I,O),P&&_(b,P),F&&_(b,F)}(f,p)}function Ro(f,p){var _=Ki(p),b=_.next();if(b.done)return!1;for(var A=b.value,I=Ki(f),O=I.next(A.from),P=O.value;!b.done&&!O.done;){if(ht(P.from,A.to)<=0&&0<=ht(P.to,A.from))return!0;ht(A.from,P.from)<0?A=(b=_.next(P.from)).value:P=(O=I.next(A.from)).value}return!1}function Ki(f){var p=wa(f)?null:{s:0,n:f};return{next:function(_){for(var b=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,b)for(;p.n.l&&ht(_,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!b||ht(_,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function xo(f){var p,_,b=(((p=f.r)===null||p===void 0?void 0:p.d)||0)-(((_=f.l)===null||_===void 0?void 0:_.d)||0),A=1<b?"r":b<-1?"l":"";A&&(p=A=="r"?"l":"r",_=r({},f),b=f[A],f.from=b.from,f.to=b.to,f[A]=b[A],_[A]=b[p],(f[p]=_).d=Sa(_)),f.d=Sa(f)}function Sa(_){var p=_.r,_=_.l;return(p?_?Math.max(p.d,_.d):p.d:_?_.d:0)+1}function Pr(f,p){return c(p).forEach(function(_){f[_]?Xr(f[_],p[_]):f[_]=function b(A){var I,O,P={};for(I in A)R(A,I)&&(O=A[I],P[I]=!O||typeof O!="object"||Y.has(O.constructor)?O:b(O));return P}(p[_])}),f}function Aa(f,p){return f.all||p.all||Object.keys(f).some(function(_){return p[_]&&Ro(p[_],f[_])})}D(pn.prototype,((br={add:function(f){return Xr(this,f),this},addKey:function(f){return Fi(this,f,f),this},addKeys:function(f){var p=this;return f.forEach(function(_){return Fi(p,_,_)}),this},hasKey:function(f){var p=Ki(this).next(f).value;return p&&ht(p.from,f)<=0&&0<=ht(p.to,f)}})[pe]=function(){return Ki(this)},br));var vi={},Ia={},Ra=!1;function Hi(f){Pr(Ia,f),Ra||(Ra=!0,setTimeout(function(){Ra=!1,Nn(Ia,!(Ia={}))},0))}function Nn(f,p){p===void 0&&(p=!1);var _=new Set;if(f.all)for(var b=0,A=Object.values(vi);b<A.length;b++)Co(O=A[b],f,_,p);else for(var I in f){var O,P=/^idb\:\/\/(.*)\/(.*)\//.exec(I);P&&(I=P[1],P=P[2],(O=vi["idb://".concat(I,"/").concat(P)])&&Co(O,f,_,p))}_.forEach(function(F){return F()})}function Co(f,p,_,b){for(var A=[],I=0,O=Object.entries(f.queries.query);I<O.length;I++){for(var P=O[I],F=P[0],G=[],X=0,L=P[1];X<L.length;X++){var ee=L[X];Aa(p,ee.obsSet)?ee.subscribers.forEach(function(Q){return _.add(Q)}):b&&G.push(ee)}b&&A.push([F,G])}if(b)for(var q=0,$=A;q<$.length;q++){var te=$[q],F=te[0],G=te[1];f.queries.query[F]=G}}function wu(f){var p=f._state,_=f._deps.indexedDB;if(p.isBeingOpened||f.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?$t(p.dbOpenError):f});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var b=p.openCanceller,A=Math.round(10*f.verno),I=!1;function O(){if(p.openCanceller!==b)throw new Fe.DatabaseClosed("db.open() was cancelled")}function P(){return new Le(function(ee,q){if(O(),!_)throw new Fe.MissingAPI;var $=f.name,te=p.autoSchema||!A?_.open($):_.open($,A);if(!te)throw new Fe.MissingAPI;te.onerror=sr(q),te.onblocked=ut(f._fireOnBlocked),te.onupgradeneeded=ut(function(Q){var ae;X=te.transaction,p.autoSchema&&!f._options.allowEmptyDB?(te.onerror=ar,X.abort(),te.result.close(),(ae=_.deleteDatabase($)).onsuccess=ae.onerror=ut(function(){q(new Fe.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(X.onerror=sr(q),Q=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,L=Q<1,f.idbdb=te.result,I&&ks(f,X),gi(f,Q/10,X,q))},q),te.onsuccess=ut(function(){X=null;var Q,ae,le,ce,ye,Ce=f.idbdb=te.result,Ve=Ee(Ce.objectStoreNames);if(0<Ve.length)try{var Re=Ce.transaction((ce=Ve).length===1?ce[0]:ce,"readonly");if(p.autoSchema)ae=Ce,le=Re,(Q=f).verno=ae.version/10,le=Q._dbSchema=zi(0,ae,le),Q._storeNames=Ee(ae.objectStoreNames,0),Vs(Q,[Q._allTables],c(le),le);else if(ls(f,f._dbSchema,Re),((ye=or(zi(0,(ye=f).idbdb,Re),ye._dbSchema)).add.length||ye.change.some(function(Oe){return Oe.add.length||Oe.change.length}))&&!I)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ce.close(),A=Ce.version+1,I=!0,ee(P());pi(f,Re)}catch{}vr.push(f),Ce.onversionchange=ut(function(Oe){p.vcFired=!0,f.on("versionchange").fire(Oe)}),Ce.onclose=ut(function(Oe){f.on("close").fire(Oe)}),L&&(ye=f._deps,Re=$,Ce=ye.indexedDB,ye=ye.IDBKeyRange,Ls(Ce)||Re===_r||Io(Ce,ye).put({name:Re}).catch(Tt)),ee()},q)}).catch(function(ee){switch(ee==null?void 0:ee.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<A)return A=0,P()}return Le.reject(ee)})}var F,G=p.dbReadyResolve,X=null,L=!1;return Le.race([b,(typeof navigator>"u"?Le.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ee){function q(){return indexedDB.databases().finally(ee)}F=setInterval(q,100),q()}).finally(function(){return clearInterval(F)}):Promise.resolve()).then(P)]).then(function(){return O(),p.onReadyBeingFired=[],Le.resolve(qi(function(){return f.on.ready.fire(f.vip)})).then(function ee(){if(0<p.onReadyBeingFired.length){var q=p.onReadyBeingFired.reduce(es,Tt);return p.onReadyBeingFired=[],Le.resolve(qi(function(){return q(f.vip)})).then(ee)}})}).finally(function(){p.openCanceller===b&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(ee){p.dbOpenError=ee;try{X&&X.abort()}catch{}return b===p.openCanceller&&f._close(),$t(ee)}).finally(function(){p.openComplete=!0,G()}).then(function(){var ee;return L&&(ee={},f.tables.forEach(function(q){q.schema.indexes.forEach(function($){$.name&&(ee["idb://".concat(f.name,"/").concat(q.name,"/").concat($.name)]=new pn(-1/0,[[[]]]))}),ee["idb://".concat(f.name,"/").concat(q.name,"/")]=ee["idb://".concat(f.name,"/").concat(q.name,"/:dels")]=new pn(-1/0,[[[]]])}),Sn(os).fire(ee),Nn(ee,!0)),f})}function Vr(f){function p(I){return f.next(I)}var _=A(p),b=A(function(I){return f.throw(I)});function A(I){return function(F){var P=I(F),F=P.value;return P.done?F:F&&typeof F.then=="function"?F.then(_,b):m(F)?Promise.all(F).then(_,b):_(F)}}return A(p)()}function h(f,p,_){for(var b=m(f)?f.slice():[f],A=0;A<_;++A)b.push(p);return b}var E={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(p){var _=f.table(p),b=_.schema,A={},I=[];function O(L,ee,q){var $=tn(L),te=A[$]=A[$]||[],Q=L==null?0:typeof L=="string"?1:L.length,ae=0<ee,ae=r(r({},q),{name:ae?"".concat($,"(virtual-from:").concat(q.name,")"):q.name,lowLevelIndex:q,isVirtual:ae,keyTail:ee,keyLength:Q,extractKey:Nr(L),unique:!ae&&q.unique});return te.push(ae),ae.isPrimaryKey||I.push(ae),1<Q&&O(Q===2?L[0]:L.slice(0,Q-1),ee+1,q),te.sort(function(le,ce){return le.keyTail-ce.keyTail}),ae}p=O(b.primaryKey.keyPath,0,b.primaryKey),A[":id"]=[p];for(var P=0,F=b.indexes;P<F.length;P++){var G=F[P];O(G.keyPath,0,G)}function X(L){var ee,q=L.query.index;return q.isVirtual?r(r({},L),{query:{index:q.lowLevelIndex,range:(ee=L.query.range,q=q.keyTail,{type:ee.type===1?2:ee.type,lower:h(ee.lower,ee.lowerOpen?f.MAX_KEY:f.MIN_KEY,q),lowerOpen:!0,upper:h(ee.upper,ee.upperOpen?f.MIN_KEY:f.MAX_KEY,q),upperOpen:!0})}}):L}return r(r({},_),{schema:r(r({},b),{primaryKey:p,indexes:I,getIndexByKeyPath:function(L){return(L=A[tn(L)])&&L[0]}}),count:function(L){return _.count(X(L))},query:function(L){return _.query(X(L))},openCursor:function(L){var ee=L.query.index,q=ee.keyTail,$=ee.isVirtual,te=ee.keyLength;return $?_.openCursor(X(L)).then(function(ae){return ae&&Q(ae)}):_.openCursor(L);function Q(ae){return Object.create(ae,{continue:{value:function(le){le!=null?ae.continue(h(le,L.reverse?f.MAX_KEY:f.MIN_KEY,q)):L.unique?ae.continue(ae.key.slice(0,te).concat(L.reverse?f.MIN_KEY:f.MAX_KEY,q)):ae.continue()}},continuePrimaryKey:{value:function(le,ce){ae.continuePrimaryKey(h(le,f.MAX_KEY,q),ce)}},primaryKey:{get:function(){return ae.primaryKey}},key:{get:function(){var le=ae.key;return te===1?le[0]:le.slice(0,te)}},value:{get:function(){return ae.value}}})}}})}})}};function T(f,p,_,b){return _=_||{},b=b||"",c(f).forEach(function(A){var I,O,P;R(p,A)?(I=f[A],O=p[A],typeof I=="object"&&typeof O=="object"&&I&&O?(P=Yt(I))!==Yt(O)?_[b+A]=p[A]:P==="Object"?T(I,O,_,b+A+"."):I!==O&&(_[b+A]=p[A]):I!==O&&(_[b+A]=p[A])):_[b+A]=void 0}),c(p).forEach(function(A){R(f,A)||(_[b+A]=p[A])}),_}function C(f,p){return p.type==="delete"?p.keys:p.keys||p.values.map(f.extractKey)}var ne={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(p){var _=f.table(p),b=_.schema.primaryKey;return r(r({},_),{mutate:function(A){var I=qe.trans,O=I.table(p).hook,P=O.deleting,F=O.creating,G=O.updating;switch(A.type){case"add":if(F.fire===Tt)break;return I._promise("readwrite",function(){return X(A)},!0);case"put":if(F.fire===Tt&&G.fire===Tt)break;return I._promise("readwrite",function(){return X(A)},!0);case"delete":if(P.fire===Tt)break;return I._promise("readwrite",function(){return X(A)},!0);case"deleteRange":if(P.fire===Tt)break;return I._promise("readwrite",function(){return function L(ee,q,$){return _.query({trans:ee,values:!1,query:{index:b,range:q},limit:$}).then(function(te){var Q=te.result;return X({type:"delete",keys:Q,trans:ee}).then(function(ae){return 0<ae.numFailures?Promise.reject(ae.failures[0]):Q.length<$?{failures:[],numFailures:0,lastResult:void 0}:L(ee,r(r({},q),{lower:Q[Q.length-1],lowerOpen:!0}),$)})})}(A.trans,A.range,1e4)},!0)}return _.mutate(A);function X(L){var ee,q,$,te=qe.trans,Q=L.keys||C(b,L);if(!Q)throw new Error("Keys missing");return(L=L.type==="add"||L.type==="put"?r(r({},L),{keys:Q}):r({},L)).type!=="delete"&&(L.values=a([],L.values)),L.keys&&(L.keys=a([],L.keys)),ee=_,$=Q,((q=L).type==="add"?Promise.resolve([]):ee.getMany({trans:q.trans,keys:$,cache:"immutable"})).then(function(ae){var le=Q.map(function(ce,ye){var Ce,Ve,Re,Oe=ae[ye],ke={onerror:null,onsuccess:null};return L.type==="delete"?P.fire.call(ke,ce,Oe,te):L.type==="add"||Oe===void 0?(Ce=F.fire.call(ke,ce,L.values[ye],te),ce==null&&Ce!=null&&(L.keys[ye]=ce=Ce,b.outbound||U(L.values[ye],b.keyPath,ce))):(Ce=T(Oe,L.values[ye]),(Ve=G.fire.call(ke,Ce,ce,Oe,te))&&(Re=L.values[ye],Object.keys(Ve).forEach(function(xe){R(Re,xe)?Re[xe]=Ve[xe]:U(Re,xe,Ve[xe])}))),ke});return _.mutate(L).then(function(ce){for(var ye=ce.failures,Ce=ce.results,Ve=ce.numFailures,ce=ce.lastResult,Re=0;Re<Q.length;++Re){var Oe=(Ce||Q)[Re],ke=le[Re];Oe==null?ke.onerror&&ke.onerror(ye[Re]):ke.onsuccess&&ke.onsuccess(L.type==="put"&&ae[Re]?L.values[Re]:Oe)}return{failures:ye,results:Ce,numFailures:Ve,lastResult:ce}}).catch(function(ce){return le.forEach(function(ye){return ye.onerror&&ye.onerror(ce)}),Promise.reject(ce)})})}}})}})}};function de(f,p,_){try{if(!p||p.keys.length<f.length)return null;for(var b=[],A=0,I=0;A<p.keys.length&&I<f.length;++A)ht(p.keys[A],f[I])===0&&(b.push(_?M(p.values[A]):p.values[A]),++I);return b.length===f.length?b:null}catch{return null}}var Ne={stack:"dbcore",level:-1,create:function(f){return{table:function(p){var _=f.table(p);return r(r({},_),{getMany:function(b){if(!b.cache)return _.getMany(b);var A=de(b.keys,b.trans._cache,b.cache==="clone");return A?Le.resolve(A):_.getMany(b).then(function(I){return b.trans._cache={keys:b.keys,values:b.cache==="clone"?M(I):I},I})},mutate:function(b){return b.type!=="add"&&(b.trans._cache=null),_.mutate(b)}})}}}};function vt(f,p){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function cn(f,p){switch(f){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var wt={stack:"dbcore",level:0,name:"Observability",create:function(f){var p=f.schema.name,_=new pn(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(b,A,I){if(qe.subscr&&A!=="readonly")throw new Fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(qe.querier));return f.transaction(b,A,I)},table:function(b){var A=f.table(b),I=A.schema,O=I.primaryKey,L=I.indexes,P=O.extractKey,F=O.outbound,G=O.autoIncrement&&L.filter(function(q){return q.compound&&q.keyPath.includes(O.keyPath)}),X=r(r({},A),{mutate:function(q){function $(xe){return xe="idb://".concat(p,"/").concat(b,"/").concat(xe),ce[xe]||(ce[xe]=new pn)}var te,Q,ae,le=q.trans,ce=q.mutatedParts||(q.mutatedParts={}),ye=$(""),Ce=$(":dels"),Ve=q.type,ke=q.type==="deleteRange"?[q.range]:q.type==="delete"?[q.keys]:q.values.length<50?[C(O,q).filter(function(xe){return xe}),q.values]:[],Re=ke[0],Oe=ke[1],ke=q.trans._cache;return m(Re)?(ye.addKeys(Re),(ke=Ve==="delete"||Re.length===Oe.length?de(Re,ke):null)||Ce.addKeys(Re),(ke||Oe)&&(te=$,Q=ke,ae=Oe,I.indexes.forEach(function(xe){var ze=te(xe.name||"");function Je(lt){return lt!=null?xe.extractKey(lt):null}function tt(lt){return xe.multiEntry&&m(lt)?lt.forEach(function(Zn){return ze.addKey(Zn)}):ze.addKey(lt)}(Q||ae).forEach(function(lt,yn){var it=Q&&Je(Q[yn]),yn=ae&&Je(ae[yn]);ht(it,yn)!==0&&(it!=null&&tt(it),yn!=null&&tt(yn))})}))):Re?(Oe={from:(Oe=Re.lower)!==null&&Oe!==void 0?Oe:f.MIN_KEY,to:(Oe=Re.upper)!==null&&Oe!==void 0?Oe:f.MAX_KEY},Ce.add(Oe),ye.add(Oe)):(ye.add(_),Ce.add(_),I.indexes.forEach(function(xe){return $(xe.name).add(_)})),A.mutate(q).then(function(xe){return!Re||q.type!=="add"&&q.type!=="put"||(ye.addKeys(xe.results),G&&G.forEach(function(ze){for(var Je=q.values.map(function(it){return ze.extractKey(it)}),tt=ze.keyPath.findIndex(function(it){return it===O.keyPath}),lt=0,Zn=xe.results.length;lt<Zn;++lt)Je[lt][tt]=xe.results[lt];$(ze.name).addKeys(Je)})),le.mutatedParts=Pr(le.mutatedParts||{},ce),xe})}}),L=function($){var te=$.query,$=te.index,te=te.range;return[$,new pn(($=te.lower)!==null&&$!==void 0?$:f.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:f.MAX_KEY)]},ee={get:function(q){return[O,new pn(q.key)]},getMany:function(q){return[O,new pn().addKeys(q.keys)]},count:L,query:L,openCursor:L};return c(ee).forEach(function(q){X[q]=function($){var te=qe.subscr,Q=!!te,ae=vt(qe,A)&&cn(q,$)?$.obsSet={}:te;if(Q){var le=function(Oe){return Oe="idb://".concat(p,"/").concat(b,"/").concat(Oe),ae[Oe]||(ae[Oe]=new pn)},ce=le(""),ye=le(":dels"),te=ee[q]($),Q=te[0],te=te[1];if((q==="query"&&Q.isPrimaryKey&&!$.values?ye:le(Q.name||"")).add(te),!Q.isPrimaryKey){if(q!=="count"){var Ce=q==="query"&&F&&$.values&&A.query(r(r({},$),{values:!1}));return A[q].apply(this,arguments).then(function(Oe){if(q==="query"){if(F&&$.values)return Ce.then(function(Je){return Je=Je.result,ce.addKeys(Je),Oe});var ke=$.values?Oe.result.map(P):Oe.result;($.values?ce:ye).addKeys(ke)}else if(q==="openCursor"){var xe=Oe,ze=$.values;return xe&&Object.create(xe,{key:{get:function(){return ye.addKey(xe.primaryKey),xe.key}},primaryKey:{get:function(){var Je=xe.primaryKey;return ye.addKey(Je),Je}},value:{get:function(){return ze&&ce.addKey(xe.primaryKey),xe.value}}})}return Oe})}ye.add(_)}}return A[q].apply(this,arguments)}}),X}})}};function gn(f,p,_){if(_.numFailures===0)return p;if(p.type==="deleteRange")return null;var b=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return _.numFailures===b?null:(p=r({},p),m(p.keys)&&(p.keys=p.keys.filter(function(A,I){return!(I in _.failures)})),"values"in p&&m(p.values)&&(p.values=p.values.filter(function(A,I){return!(I in _.failures)})),p)}function sn(f,p){return _=f,((b=p).lower===void 0||(b.lowerOpen?0<ht(_,b.lower):0<=ht(_,b.lower)))&&(f=f,(p=p).upper===void 0||(p.upperOpen?ht(f,p.upper)<0:ht(f,p.upper)<=0));var _,b}function _i(f,p,ee,b,A,I){if(!ee||ee.length===0)return f;var O=p.query.index,P=O.multiEntry,F=p.query.range,G=b.schema.primaryKey.extractKey,X=O.extractKey,L=(O.lowLevelIndex||O).extractKey,ee=ee.reduce(function(q,$){var te=q,Q=[];if($.type==="add"||$.type==="put")for(var ae=new pn,le=$.values.length-1;0<=le;--le){var ce,ye=$.values[le],Ce=G(ye);ae.hasKey(Ce)||(ce=X(ye),(P&&m(ce)?ce.some(function(xe){return sn(xe,F)}):sn(ce,F))&&(ae.addKey(Ce),Q.push(ye)))}switch($.type){case"add":var Ve=new pn().addKeys(p.values?q.map(function(ze){return G(ze)}):q),te=q.concat(p.values?Q.filter(function(ze){return ze=G(ze),!Ve.hasKey(ze)&&(Ve.addKey(ze),!0)}):Q.map(function(ze){return G(ze)}).filter(function(ze){return!Ve.hasKey(ze)&&(Ve.addKey(ze),!0)}));break;case"put":var Re=new pn().addKeys($.values.map(function(ze){return G(ze)}));te=q.filter(function(ze){return!Re.hasKey(p.values?G(ze):ze)}).concat(p.values?Q:Q.map(function(ze){return G(ze)}));break;case"delete":var Oe=new pn().addKeys($.keys);te=q.filter(function(ze){return!Oe.hasKey(p.values?G(ze):ze)});break;case"deleteRange":var ke=$.range;te=q.filter(function(ze){return!sn(G(ze),ke)})}return te},f);return ee===f?f:(ee.sort(function(q,$){return ht(L(q),L($))||ht(G(q),G($))}),p.limit&&p.limit<1/0&&(ee.length>p.limit?ee.length=p.limit:f.length===p.limit&&ee.length<p.limit&&(A.dirty=!0)),I?Object.freeze(ee):ee)}function An(f,p){return ht(f.lower,p.lower)===0&&ht(f.upper,p.upper)===0&&!!f.lowerOpen==!!p.lowerOpen&&!!f.upperOpen==!!p.upperOpen}function Ei(f,p){return function(_,b,A,I){if(_===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;if((b=ht(_,b))===0){if(A&&I)return 0;if(A)return 1;if(I)return-1}return b}(f.lower,p.lower,f.lowerOpen,p.lowerOpen)<=0&&0<=function(_,b,A,I){if(_===void 0)return b!==void 0?1:0;if(b===void 0)return-1;if((b=ht(_,b))===0){if(A&&I)return 0;if(A)return-1;if(I)return 1}return b}(f.upper,p.upper,f.upperOpen,p.upperOpen)}function Do(f,p,_,b){f.subscribers.add(_),b.addEventListener("abort",function(){var A,I;f.subscribers.delete(_),f.subscribers.size===0&&(A=f,I=p,setTimeout(function(){A.subscribers.size===0&&Qe(I,A)},3e3))})}var Su={stack:"dbcore",level:0,name:"Cache",create:function(f){var p=f.schema.name;return r(r({},f),{transaction:function(_,b,A){var I,O,P=f.transaction(_,b,A);return b==="readwrite"&&(O=(I=new AbortController).signal,A=function(F){return function(){if(I.abort(),b==="readwrite"){for(var G=new Set,X=0,L=_;X<L.length;X++){var ee=L[X],q=vi["idb://".concat(p,"/").concat(ee)];if(q){var $=f.table(ee),te=q.optimisticOps.filter(function(ze){return ze.trans===P});if(P._explicit&&F&&P.mutatedParts)for(var Q=0,ae=Object.values(q.queries.query);Q<ae.length;Q++)for(var le=0,ce=(Ve=ae[Q]).slice();le<ce.length;le++)Aa((Re=ce[le]).obsSet,P.mutatedParts)&&(Qe(Ve,Re),Re.subscribers.forEach(function(ze){return G.add(ze)}));else if(0<te.length){q.optimisticOps=q.optimisticOps.filter(function(ze){return ze.trans!==P});for(var ye=0,Ce=Object.values(q.queries.query);ye<Ce.length;ye++)for(var Ve,Re,Oe,ke=0,xe=(Ve=Ce[ye]).slice();ke<xe.length;ke++)(Re=xe[ke]).res!=null&&P.mutatedParts&&(F&&!Re.dirty?(Oe=Object.isFrozen(Re.res),Oe=_i(Re.res,Re.req,te,$,Re,Oe),Re.dirty?(Qe(Ve,Re),Re.subscribers.forEach(function(ze){return G.add(ze)})):Oe!==Re.res&&(Re.res=Oe,Re.promise=Le.resolve({result:Oe}))):(Re.dirty&&Qe(Ve,Re),Re.subscribers.forEach(function(ze){return G.add(ze)})))}}}G.forEach(function(ze){return ze()})}}},P.addEventListener("abort",A(!1),{signal:O}),P.addEventListener("error",A(!1),{signal:O}),P.addEventListener("complete",A(!0),{signal:O})),P},table:function(_){var b=f.table(_),A=b.schema.primaryKey;return r(r({},b),{mutate:function(I){var O=qe.trans;if(A.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return b.mutate(I);var P=vi["idb://".concat(p,"/").concat(_)];return P?(O=b.mutate(I),I.type!=="add"&&I.type!=="put"||!(50<=I.values.length||C(A,I).some(function(F){return F==null}))?(P.optimisticOps.push(I),I.mutatedParts&&Hi(I.mutatedParts),O.then(function(F){0<F.numFailures&&(Qe(P.optimisticOps,I),(F=gn(0,I,F))&&P.optimisticOps.push(F),I.mutatedParts&&Hi(I.mutatedParts))}),O.catch(function(){Qe(P.optimisticOps,I),I.mutatedParts&&Hi(I.mutatedParts)})):O.then(function(F){var G=gn(0,r(r({},I),{values:I.values.map(function(X,L){var ee;return F.failures[L]?X:(X=(ee=A.keyPath)!==null&&ee!==void 0&&ee.includes(".")?M(X):r({},X),U(X,A.keyPath,F.results[L]),X)})}),F);P.optimisticOps.push(G),queueMicrotask(function(){return I.mutatedParts&&Hi(I.mutatedParts)})}),O):b.mutate(I)},query:function(I){if(!vt(qe,b)||!cn("query",I))return b.query(I);var O=((G=qe.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",L=qe,P=L.requery,F=L.signal,G=function($,te,Q,ae){var le=vi["idb://".concat($,"/").concat(te)];if(!le)return[];if(!(te=le.queries[Q]))return[null,!1,le,null];var ce=te[(ae.query?ae.query.index.name:null)||""];if(!ce)return[null,!1,le,null];switch(Q){case"query":var ye=ce.find(function(Ce){return Ce.req.limit===ae.limit&&Ce.req.values===ae.values&&An(Ce.req.query.range,ae.query.range)});return ye?[ye,!0,le,ce]:[ce.find(function(Ce){return("limit"in Ce.req?Ce.req.limit:1/0)>=ae.limit&&(!ae.values||Ce.req.values)&&Ei(Ce.req.query.range,ae.query.range)}),!1,le,ce];case"count":return ye=ce.find(function(Ce){return An(Ce.req.query.range,ae.query.range)}),[ye,!!ye,le,ce]}}(p,_,"query",I),X=G[0],L=G[1],ee=G[2],q=G[3];return X&&L?X.obsSet=I.obsSet:(L=b.query(I).then(function($){var te=$.result;if(X&&(X.res=te),O){for(var Q=0,ae=te.length;Q<ae;++Q)Object.freeze(te[Q]);Object.freeze(te)}else $.result=M(te);return $}).catch(function($){return q&&X&&Qe(q,X),Promise.reject($)}),X={obsSet:I.obsSet,promise:L,subscribers:new Set,type:"query",req:I,dirty:!1},q?q.push(X):(q=[X],(ee=ee||(vi["idb://".concat(p,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[I.query.index.name||""]=q)),Do(X,q,P,F),X.promise.then(function($){return{result:_i($.result,I,ee==null?void 0:ee.optimisticOps,b,X,O)}})}})}})}};function Oo(f,p){return new Proxy(f,{get:function(_,b,A){return b==="db"?p:Reflect.get(_,b,A)}})}var bi=(Wt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Fe.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var p=this._versions,_=p.filter(function(b){return b._cfg.version===f})[0];return _||(_=new this.Version(f),p.push(_),p.sort(ba),_.stores({}),this._state.autoSchema=!1,_)},Wt.prototype._whenReady=function(f){var p=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?f():new Le(function(_,b){if(p._state.openComplete)return b(new Fe.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void b(new Fe.DatabaseClosed);p.open().catch(Tt)}p._state.dbReadyPromise.then(_,b)}).then(f)},Wt.prototype.use=function(f){var p=f.stack,_=f.create,b=f.level,A=f.name;return A&&this.unuse({stack:p,name:A}),f=this._middlewares[p]||(this._middlewares[p]=[]),f.push({stack:p,create:_,level:b??10,name:A}),f.sort(function(I,O){return I.level-O.level}),this},Wt.prototype.unuse=function(f){var p=f.stack,_=f.name,b=f.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(A){return b?A.create!==b:!!_&&A.name!==_})),this},Wt.prototype.open=function(){var f=this;return Ir(wn,function(){return wu(f)})},Wt.prototype._close=function(){var f=this._state,p=vr.indexOf(this);if(0<=p&&vr.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Le(function(_){f.dbReadyResolve=_}),f.openCanceller=new Le(function(_,b){f.cancelOpen=b}))},Wt.prototype.close=function(_){var p=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;p?(_.isBeingOpened&&_.cancelOpen(new Fe.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Fe.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Wt.prototype.delete=function(f){var p=this;f===void 0&&(f={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",b=this._state;return new Le(function(A,I){function O(){p.close(f);var P=p._deps.indexedDB.deleteDatabase(p.name);P.onsuccess=ut(function(){var F,G,X;F=p._deps,G=p.name,X=F.indexedDB,F=F.IDBKeyRange,Ls(X)||G===_r||Io(X,F).delete(G).catch(Tt),A()}),P.onerror=sr(I),P.onblocked=p._fireOnBlocked}if(_)throw new Fe.InvalidArgument("Invalid closeOptions argument to db.delete()");b.isBeingOpened?b.dbReadyPromise.then(O):O()})},Wt.prototype.backendDB=function(){return this.idbdb},Wt.prototype.isOpen=function(){return this.idbdb!==null},Wt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Wt.prototype,"tables",{get:function(){var f=this;return c(this._allTables).map(function(p){return f._allTables[p]})},enumerable:!1,configurable:!0}),Wt.prototype.transaction=function(){var f=(function(p,_,b){var A=arguments.length;if(A<2)throw new Fe.InvalidArgument("Too few arguments");for(var I=new Array(A-1);--A;)I[A-1]=arguments[A];return b=I.pop(),[p,j(I),b]}).apply(this,arguments);return this._transaction.apply(this,f)},Wt.prototype._transaction=function(f,p,_){var b=this,A=qe.trans;A&&A.db===this&&f.indexOf("!")===-1||(A=null);var I,O,P=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=p.map(function(G){if(G=G instanceof b.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),f=="r"||f===mn)I=mn;else{if(f!="rw"&&f!=Pi)throw new Fe.InvalidArgument("Invalid transaction mode: "+f);I=Pi}if(A){if(A.mode===mn&&I===Pi){if(!P)throw new Fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&O.forEach(function(G){if(A&&A.storeNames.indexOf(G)===-1){if(!P)throw new Fe.SubTransaction("Table "+G+" not included in parent transaction.");A=null}}),P&&A&&!A.active&&(A=null)}}catch(G){return A?A._promise(null,function(X,L){L(G)}):$t(G)}var F=(function G(X,L,ee,q,$){return Le.resolve().then(function(){var te=qe.transless||qe,Q=X._createTransaction(L,ee,X._dbSchema,q);if(Q.explicit=!0,te={trans:Q,transless:te},q)Q.idbtrans=q.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(ce){return ce.name===un.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,L,ee,null,$)})):$t(ce)}var ae,le=Te($);return le&&ir(),te=Le.follow(function(){var ce;(ae=$.call(Q,Q))&&(le?(ce=On.bind(null,null),ae.then(ce,ce)):typeof ae.next=="function"&&typeof ae.throw=="function"&&(ae=Vr(ae)))},te),(ae&&typeof ae.then=="function"?Le.resolve(ae).then(function(ce){return Q.active?ce:$t(new Fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return ae})).then(function(ce){return q&&Q._resolve(),Q._completion.then(function(){return ce})}).catch(function(ce){return Q._reject(ce),$t(ce)})})}).bind(null,this,I,O,A,_);return A?A._promise(I,F,"lock"):qe.trans?Ir(qe.transless,function(){return b._whenReady(F)}):this._whenReady(F)},Wt.prototype.table=function(f){if(!R(this._allTables,f))throw new Fe.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Wt);function Wt(f,p){var _=this;this._middlewares={},this.verno=0;var b=Wt.dependencies;this._options=p=r({addons:Wt.addons,autoOpen:!0,indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},b=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,I,O,P,F,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Tt,dbReadyPromise:null,cancelOpen:Tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};G.dbReadyPromise=new Le(function(L){G.dbReadyResolve=L}),G.openCanceller=new Le(function(L,ee){G.cancelOpen=ee}),this._state=G,this.name=f,this.on=fi(this,"populate","blocked","versionchange","close",{ready:[es,Tt]}),this.on.ready.subscribe=me(this.on.ready.subscribe,function(L){return function(ee,q){Wt.vip(function(){var $,te=_._state;te.openComplete?(te.dbOpenError||Le.resolve().then(ee),q&&L(ee)):te.onReadyBeingFired?(te.onReadyBeingFired.push(ee),q&&L(ee)):(L(ee),$=_,q||L(function Q(){$.on.ready.unsubscribe(ee),$.on.ready.unsubscribe(Q)}))})}}),this.Collection=(A=this,ki(Cr.prototype,function(ae,Q){this.db=A;var q=hi,$=null;if(Q)try{q=Q()}catch(le){$=le}var te=ae._ctx,Q=te.table,ae=Q.hook.reading.fire;this._ctx={table:Q,index:te.index,isPrimKey:!te.index||Q.schema.primKey.keyPath&&te.index===Q.schema.primKey.name,range:q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:te.or,valueMapper:ae!==Br?ae:null}})),this.Table=(I=this,ki(va.prototype,function(L,ee,q){this.db=I,this._tx=q,this.name=L,this.schema=ee,this.hook=I._allTables[L]?I._allTables[L].hook:fi(null,{creating:[_u,Tt],reading:[Rs,Br],updating:[kl,Tt],deleting:[Ar,Tt]})})),this.Transaction=(O=this,ki(Dr.prototype,function(L,ee,q,$,te){var Q=this;this.db=O,this.mode=L,this.storeNames=ee,this.schema=q,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=fi(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Le(function(ae,le){Q._resolve=ae,Q._reject=le}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(ae){var le=Q.active;return Q.active=!1,Q.on.error.fire(ae),Q.parent?Q.parent._reject(ae):le&&Q.idbtrans&&Q.idbtrans.abort(),$t(ae)})})),this.Version=(P=this,ki(Tu.prototype,function(L){this.db=P,this._cfg={version:L,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,ki(mi.prototype,function(L,ee,q){if(this.db=F,this._ctx={table:L,index:ee===":id"?null:ee,or:q},this._cmp=this._ascending=ht,this._descending=function($,te){return ht(te,$)},this._max=function($,te){return 0<ht($,te)?$:te},this._min=function($,te){return ht($,te)<0?$:te},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new Fe.MissingAPI})),this.on("versionchange",function(L){0<L.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(L){!L.newVersion||L.newVersion<L.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(L.oldVersion/10))}),this._maxKey=Bi(p.IDBKeyRange),this._createTransaction=function(L,ee,q,$){return new _.Transaction(L,ee,q,_._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(L){_.on("blocked").fire(L),vr.filter(function(ee){return ee.name===_.name&&ee!==_&&!ee._state.vcFired}).map(function(ee){return ee.on("versionchange").fire(L)})},this.use(Ne),this.use(Su),this.use(wt),this.use(E),this.use(ne);var X=new Proxy(this,{get:function(L,ee,q){if(ee==="_vip")return!0;if(ee==="table")return function(te){return Oo(_.table(te),X)};var $=Reflect.get(L,ee,q);return $ instanceof va?Oo($,X):ee==="tables"?$.map(function(te){return Oo(te,X)}):ee==="_createTransaction"?function(){return Oo($.apply(this,arguments),X)}:$}});this.vip=X,b.forEach(function(L){return L(_)})}var xa,br=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Sh=(Au.prototype.subscribe=function(f,p,_){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:p,complete:_})},Au.prototype[br]=function(){return this},Au);function Au(f){this._subscribe=f}try{xa={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{xa={indexedDB:null,IDBKeyRange:null}}function Ah(f){var p,_=!1,b=new Sh(function(A){var I=Te(f),O,P=!1,F={},G={},X={get closed(){return P},unsubscribe:function(){P||(P=!0,O&&O.abort(),L&&Sn.storagemutated.unsubscribe(q))}};A.start&&A.start(X);var L=!1,ee=function(){return Gr($)},q=function(te){Pr(F,te),Aa(G,F)&&ee()},$=function(){var te,Q,ae;!P&&xa.indexedDB&&(F={},te={},O&&O.abort(),O=new AbortController,ae=function(le){var ce=gr();try{I&&ir();var ye=$n(f,le);return ye=I?ye.finally(On):ye}finally{ce&&Ni()}}(Q={subscr:te,signal:O.signal,requery:ee,querier:f,trans:null}),Promise.resolve(ae).then(function(le){_=!0,p=le,P||Q.signal.aborted||(F={},function(ce){for(var ye in ce)if(R(ce,ye))return;return 1}(G=te)||L||(Sn(os,q),L=!0),Gr(function(){return!P&&A.next&&A.next(le)}))},function(le){_=!1,["DatabaseClosedError","AbortError"].includes(le==null?void 0:le.name)||P||Gr(function(){P||A.error&&A.error(le)})}))};return setTimeout(ee,0),X});return b.hasValue=function(){return _},b.getValue=function(){return p},b}var Us=bi;function Ml(f){var p=cs;try{cs=!0,Sn.storagemutated.fire(f),Nn(f,!0)}finally{cs=p}}D(Us,r(r({},Sr),{delete:function(f){return new Us(f,{addons:[]}).delete()},exists:function(f){return new Us(f,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return p=Us.dependencies,_=p.indexedDB,p=p.IDBKeyRange,(Ls(_)?Promise.resolve(_.databases()).then(function(b){return b.map(function(A){return A.name}).filter(function(A){return A!==_r})}):Io(_,p).toCollection().primaryKeys()).then(f)}catch{return $t(new Fe.MissingAPI)}var p,_},defineClass:function(){return function(f){y(this,f)}},ignoreTransaction:function(f){return qe.trans?Ir(qe.transless,f):f()},vip:qi,async:function(f){return function(){try{var p=Vr(f.apply(this,arguments));return p&&typeof p.then=="function"?p:Le.resolve(p)}catch(_){return $t(_)}}},spawn:function(f,p,_){try{var b=Vr(f.apply(_,p||[]));return b&&typeof b.then=="function"?b:Le.resolve(b)}catch(A){return $t(A)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(f,p){return p=Le.resolve(typeof f=="function"?Us.ignoreTransaction(f):f).timeout(p||6e4),qe.trans?qe.trans.waitFor(p):p},Promise:Le,debug:{get:function(){return Ln},set:function(f){Eu(f)}},derive:he,extend:y,props:D,override:me,Events:fi,on:Sn,liveQuery:Ah,extendObservabilitySet:Pr,getByKeyPath:je,setByKeyPath:U,delByKeyPath:function(f,p){typeof p=="string"?U(f,p,void 0):"length"in p&&[].map.call(p,function(_){U(f,_,void 0)})},shallowClone:N,deepClone:M,getObjectDiff:T,cmp:ht,asap:Pe,minKey:-1/0,addons:[],connections:vr,errnames:un,dependencies:xa,cache:vi,semVer:"4.0.11",version:"4.0.11".split(".").map(function(f){return parseInt(f)}).reduce(function(f,p,_){return f+p/Math.pow(10,2*_)})})),Us.maxKey=Bi(Us.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Sn(os,function(f){cs||(f=new CustomEvent(Li,{detail:f}),cs=!0,dispatchEvent(f),cs=!1)}),addEventListener(Li,function(f){f=f.detail,cs||Ml(f)}));var Ca,cs=!1,ur=function(){};return typeof BroadcastChannel<"u"&&((ur=function(){(Ca=new BroadcastChannel(Li)).onmessage=function(f){return f.data&&Ml(f.data)}})(),typeof Ca.unref=="function"&&Ca.unref(),Sn(os,function(f){cs||Ca.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!bi.disableBfCache&&f.persisted){Ln&&console.debug("Dexie: handling persisted pagehide"),Ca!=null&&Ca.close();for(var p=0,_=vr;p<_.length;p++)_[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!bi.disableBfCache&&f.persisted&&(Ln&&console.debug("Dexie: handling persisted pageshow"),ur(),Ml({all:new pn(-1/0,[[]])}))})),Le.rejectionMapper=function(f,p){return!f||f instanceof Ie||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Di[f.name]?f:(p=new Di[f.name](p||f.message,f),"stack"in f&&H(p,"stack",{get:function(){return this.inner.stack}}),p)},Eu(Ln),r(bi,Object.freeze({__proto__:null,Dexie:bi,liveQuery:Ah,Entity:Ns,cmp:ht,PropModification:It,replacePrefix:function(f,p){return new It({replacePrefix:[f,p]})},add:function(f){return new It({add:f})},remove:function(f){return new It({remove:f})},default:bi,RangeSet:pn,mergeRanges:Xr,rangesOverlap:Ro}),{default:bi}),bi})}(Nf)),Nf.exports}var iI=rI();const eg=M1(iI),K0=Symbol.for("Dexie"),Yf=globalThis[K0]||(globalThis[K0]=eg);if(eg.semVer!==Yf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${eg.semVer} and ${Yf.semVer}`);const{liveQuery:oV,mergeRanges:uV,rangesOverlap:lV,RangeSet:cV,cmp:hV,Entity:fV,PropModification:dV,replacePrefix:mV,add:pV,remove:gV}=Yf;class sI extends Yf{constructor(){super("FoodTrackerDB");N0(this,"foods");this.version(1).stores({foods:"date"})}}const Qb=new sI;async function aI(s,e){await Qb.foods.put({date:s,selectedFoods:e})}async function oI(){return await Qb.foods.toArray()}function uI(){const[s,e]=ge.useState(""),[t,r]=ge.useState({}),[a,u]=ge.useState("2025-05-14"),[c,m]=ge.useState({calories:3e3,fat:75,protein:150,carbs:431}),[y,v]=ge.useState(null),S=(t[a]||[]).reduce((W,fe)=>({calories:W.calories+fe.food.calories*fe.quantity,fat:W.fat+fe.food.fat*fe.quantity,protein:W.protein+fe.food.protein*fe.quantity,carbs:W.carbs+fe.food.carbs*fe.quantity}),{calories:0,fat:0,protein:0,carbs:0});ge.useEffect(()=>{const W=localStorage.getItem("nutritionGoals");W&&m(JSON.parse(W))},[]),ge.useEffect(()=>{localStorage.setItem("nutritionGoals",JSON.stringify(c))},[c]),ge.useEffect(()=>{oI().then(W=>{const fe=W.reduce((Ee,{date:me,selectedFoods:De})=>(Ee[me]=De,Ee),{});r({...fe,[a]:fe[a]||[]})}).catch(W=>{console.error("Error loading all foods:",W),v("Failed to load food data")})},[a]),ge.useEffect(()=>{aI(a,t[a]||[]).catch(W=>{console.error("Error saving foods:",W),v("Failed to save food data")})},[t,a]);const R=X1.filter(W=>W.name.toLowerCase().includes(s.toLowerCase())),D=W=>{r(fe=>{const Ee=fe[a]||[],me=Ee.findIndex(Pe=>Pe.food.id===W.id);let De;return me>=0?(De=[...Ee],De[me]={...De[me],quantity:De[me].quantity+1}):De=[...Ee,{food:W,quantity:1}],{...fe,[a]:De}}),v(`${W.name} lagt til`)},z=W=>{r(fe=>({...fe,[a]:fe[a].filter((Ee,me)=>me!==W)}))},H=(W,fe)=>{r(Ee=>{const De=[...Ee[a]||[]],Pe=De[W].quantity+fe;return Pe<=0?{...Ee,[a]:De.filter((je,U)=>U!==W)}:(De[W]={...De[W],quantity:Pe},{...Ee,[a]:De})}),fe>0&&v(`${t[a][W].food.name} lagt til`)},he=W=>{const fe=new Date(a);fe.setDate(fe.getDate()+W);const Ee=fe.toISOString().split("T")[0];u(Ee),t[Ee]||r(me=>({...me,[Ee]:[]}))};return Se.jsxs("div",{className:"flex-1 p-4 sm:p-6 max-w-7xl mx-auto",children:[Se.jsx(Z1,{totals:S,goals:c}),Se.jsx(J1,{currentDate:a,changeDate:he}),Se.jsx(W1,{searchTerm:s,filteredFoods:R,addFood:D,setSearchTerm:e}),Se.jsx(eI,{selectedFoods:t,currentDate:a,removeFood:z,updateQuantity:H}),y&&Se.jsx($1,{message:y,onClose:()=>v(null)}),Se.jsx(tI,{})]})}var Tc={},H0;function lI(){if(H0)return Tc;H0=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.parse=c,Tc.serialize=v;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const D=function(){};return D.prototype=Object.create(null),D})();function c(D,z){const H=new u,he=D.length;if(he<2)return H;const W=(z==null?void 0:z.decode)||S;let fe=0;do{const Ee=D.indexOf("=",fe);if(Ee===-1)break;const me=D.indexOf(";",fe),De=me===-1?he:me;if(Ee>De){fe=D.lastIndexOf(";",Ee-1)+1;continue}const Pe=m(D,fe,Ee),je=y(D,Ee,Pe),U=D.slice(Pe,je);if(H[U]===void 0){let N=m(D,Ee+1,De),V=y(D,De,N);const j=W(D.slice(N,V));H[U]=j}fe=De+1}while(fe<he);return H}function m(D,z,H){do{const he=D.charCodeAt(z);if(he!==32&&he!==9)return z}while(++z<H);return H}function y(D,z,H){for(;z>H;){const he=D.charCodeAt(--z);if(he!==32&&he!==9)return z+1}return H}function v(D,z,H){const he=(H==null?void 0:H.encode)||encodeURIComponent;if(!s.test(D))throw new TypeError(`argument name is invalid: ${D}`);const W=he(z);if(!e.test(W))throw new TypeError(`argument val is invalid: ${z}`);let fe=D+"="+W;if(!H)return fe;if(H.maxAge!==void 0){if(!Number.isInteger(H.maxAge))throw new TypeError(`option maxAge is invalid: ${H.maxAge}`);fe+="; Max-Age="+H.maxAge}if(H.domain){if(!t.test(H.domain))throw new TypeError(`option domain is invalid: ${H.domain}`);fe+="; Domain="+H.domain}if(H.path){if(!r.test(H.path))throw new TypeError(`option path is invalid: ${H.path}`);fe+="; Path="+H.path}if(H.expires){if(!R(H.expires)||!Number.isFinite(H.expires.valueOf()))throw new TypeError(`option expires is invalid: ${H.expires}`);fe+="; Expires="+H.expires.toUTCString()}if(H.httpOnly&&(fe+="; HttpOnly"),H.secure&&(fe+="; Secure"),H.partitioned&&(fe+="; Partitioned"),H.priority)switch(typeof H.priority=="string"?H.priority.toLowerCase():void 0){case"low":fe+="; Priority=Low";break;case"medium":fe+="; Priority=Medium";break;case"high":fe+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${H.priority}`)}if(H.sameSite)switch(typeof H.sameSite=="string"?H.sameSite.toLowerCase():H.sameSite){case!0:case"strict":fe+="; SameSite=Strict";break;case"lax":fe+="; SameSite=Lax";break;case"none":fe+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${H.sameSite}`)}return fe}function S(D){if(D.indexOf("%")===-1)return D;try{return decodeURIComponent(D)}catch{return D}}function R(D){return a.call(D)==="[object Date]"}return Tc}lI();var G0="popstate";function cI(s={}){function e(r,a){let{pathname:u,search:c,hash:m}=r.location;return tg("",{pathname:u,search:c,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:qc(a)}return fI(e,t,null,s)}function on(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ws(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hI(){return Math.random().toString(36).substring(2,10)}function Q0(s,e){return{usr:s.state,key:s.key,idx:e}}function tg(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Rl(e):e,state:t,key:e&&e.key||r||hI()}}function qc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Rl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function fI(s,e,t,r={}){let{window:a=document.defaultView,v5Compat:u=!1}=r,c=a.history,m="POP",y=null,v=S();v==null&&(v=0,c.replaceState({...c.state,idx:v},""));function S(){return(c.state||{idx:null}).idx}function R(){m="POP";let W=S(),fe=W==null?null:W-v;v=W,y&&y({action:m,location:he.location,delta:fe})}function D(W,fe){m="PUSH";let Ee=tg(he.location,W,fe);v=S()+1;let me=Q0(Ee,v),De=he.createHref(Ee);try{c.pushState(me,"",De)}catch(Pe){if(Pe instanceof DOMException&&Pe.name==="DataCloneError")throw Pe;a.location.assign(De)}u&&y&&y({action:m,location:he.location,delta:1})}function z(W,fe){m="REPLACE";let Ee=tg(he.location,W,fe);v=S();let me=Q0(Ee,v),De=he.createHref(Ee);c.replaceState(me,"",De),u&&y&&y({action:m,location:he.location,delta:0})}function H(W){return dI(W)}let he={get action(){return m},get location(){return s(a,c)},listen(W){if(y)throw new Error("A history only accepts one active listener");return a.addEventListener(G0,R),y=W,()=>{a.removeEventListener(G0,R),y=null}},createHref(W){return e(a,W)},createURL:H,encodeLocation(W){let fe=H(W);return{pathname:fe.pathname,search:fe.search,hash:fe.hash}},push:D,replace:z,go(W){return c.go(W)}};return he}function dI(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),on(t,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:qc(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Yb(s,e,t="/"){return mI(s,e,t,!1)}function mI(s,e,t,r){let a=typeof e=="string"?Rl(e):e,u=ia(a.pathname||"/",t);if(u==null)return null;let c=$b(s);pI(c);let m=null;for(let y=0;m==null&&y<c.length;++y){let v=II(u);m=SI(c[y],v,r)}return m}function $b(s,e=[],t=[],r=""){let a=(u,c,m)=>{let y={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};y.relativePath.startsWith("/")&&(on(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length));let v=na([r,y.relativePath]),S=t.concat(y);u.children&&u.children.length>0&&(on(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),$b(u.children,e,S,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:TI(v,u.index),routesMeta:S})};return s.forEach((u,c)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))a(u,c);else for(let y of Xb(u.path))a(u,c,y)}),e}function Xb(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return a?[u,""]:[u];let c=Xb(r.join("/")),m=[];return m.push(...c.map(y=>y===""?u:[u,y].join("/"))),a&&m.push(...c),m.map(y=>s.startsWith("/")&&y===""?"/":y)}function pI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:wI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var gI=/^:[\w-]+$/,yI=3,vI=2,_I=1,EI=10,bI=-2,Y0=s=>s==="*";function TI(s,e){let t=s.split("/"),r=t.length;return t.some(Y0)&&(r+=bI),e&&(r+=vI),t.filter(a=>!Y0(a)).reduce((a,u)=>a+(gI.test(u)?yI:u===""?_I:EI),r)}function wI(s,e){return s.length===e.length&&s.slice(0,-1).every((r,a)=>r===e[a])?s[s.length-1]-e[e.length-1]:0}function SI(s,e,t=!1){let{routesMeta:r}=s,a={},u="/",c=[];for(let m=0;m<r.length;++m){let y=r[m],v=m===r.length-1,S=u==="/"?e:e.slice(u.length)||"/",R=$f({path:y.relativePath,caseSensitive:y.caseSensitive,end:v},S),D=y.route;if(!R&&v&&t&&!r[r.length-1].route.index&&(R=$f({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},S)),!R)return null;Object.assign(a,R.params),c.push({params:a,pathname:na([u,R.pathname]),pathnameBase:DI(na([u,R.pathnameBase])),route:D}),R.pathnameBase!=="/"&&(u=na([u,R.pathnameBase]))}return c}function $f(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=AI(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:r.reduce((v,{paramName:S,isOptional:R},D)=>{if(S==="*"){let H=m[D]||"";c=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const z=m[D];return R&&!z?v[S]=void 0:v[S]=(z||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:c,pattern:s}}function AI(s,e=!1,t=!0){ws(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,m,y)=>(r.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function II(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ws(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ia(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function RI(s,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof s=="string"?Rl(s):s;return{pathname:t?t.startsWith("/")?t:xI(t,e):e,search:OI(r),hash:NI(a)}}function xI(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Mp(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wb(s){let e=CI(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Jb(s,e,t,r=!1){let a;typeof s=="string"?a=Rl(s):(a={...s},on(!a.pathname||!a.pathname.includes("?"),Mp("?","pathname","search",a)),on(!a.pathname||!a.pathname.includes("#"),Mp("#","pathname","hash",a)),on(!a.search||!a.search.includes("#"),Mp("#","search","hash",a)));let u=s===""||a.pathname==="",c=u?"/":a.pathname,m;if(c==null)m=t;else{let R=e.length-1;if(!r&&c.startsWith("..")){let D=c.split("/");for(;D[0]==="..";)D.shift(),R-=1;a.pathname=D.join("/")}m=R>=0?e[R]:"/"}let y=RI(a,m),v=c&&c!=="/"&&c.endsWith("/"),S=(u||c===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(v||S)&&(y.pathname+="/"),y}var na=s=>s.join("/").replace(/\/\/+/g,"/"),DI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),OI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,NI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function PI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Zb=["POST","PUT","PATCH","DELETE"];new Set(Zb);var VI=["GET",...Zb];new Set(VI);var xl=ge.createContext(null);xl.displayName="DataRouter";var Ad=ge.createContext(null);Ad.displayName="DataRouterState";var eT=ge.createContext({isTransitioning:!1});eT.displayName="ViewTransition";var kI=ge.createContext(new Map);kI.displayName="Fetchers";var MI=ge.createContext(null);MI.displayName="Await";var Is=ge.createContext(null);Is.displayName="Navigation";var ah=ge.createContext(null);ah.displayName="Location";var la=ge.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var Bg=ge.createContext(null);Bg.displayName="RouteError";function LI(s,{relative:e}={}){on(oh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ge.useContext(Is),{hash:a,pathname:u,search:c}=uh(s,{relative:e}),m=u;return t!=="/"&&(m=u==="/"?t:na([t,u])),r.createHref({pathname:m,search:c,hash:a})}function oh(){return ge.useContext(ah)!=null}function pu(){return on(oh(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(ah).location}var tT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nT(s){ge.useContext(Is).static||ge.useLayoutEffect(s)}function UI(){let{isDataRoute:s}=ge.useContext(la);return s?WI():BI()}function BI(){on(oh(),"useNavigate() may be used only in the context of a <Router> component.");let s=ge.useContext(xl),{basename:e,navigator:t}=ge.useContext(Is),{matches:r}=ge.useContext(la),{pathname:a}=pu(),u=JSON.stringify(Wb(r)),c=ge.useRef(!1);return nT(()=>{c.current=!0}),ge.useCallback((y,v={})=>{if(ws(c.current,tT),!c.current)return;if(typeof y=="number"){t.go(y);return}let S=Jb(y,JSON.parse(u),a,v.relative==="path");s==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:na([e,S.pathname])),(v.replace?t.replace:t.push)(S,v.state,v)},[e,t,u,a,s])}ge.createContext(null);function uh(s,{relative:e}={}){let{matches:t}=ge.useContext(la),{pathname:r}=pu(),a=JSON.stringify(Wb(t));return ge.useMemo(()=>Jb(s,JSON.parse(a),r,e==="path"),[s,a,r,e])}function zI(s,e){return rT(s,e)}function rT(s,e,t,r){var Ee;on(oh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:u}=ge.useContext(Is),{matches:c}=ge.useContext(la),m=c[c.length-1],y=m?m.params:{},v=m?m.pathname:"/",S=m?m.pathnameBase:"/",R=m&&m.route;{let me=R&&R.path||"";iT(v,!R||me.endsWith("*")||me.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${me}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${me}"> to <Route path="${me==="/"?"*":`${me}/*`}">.`)}let D=pu(),z;if(e){let me=typeof e=="string"?Rl(e):e;on(S==="/"||((Ee=me.pathname)==null?void 0:Ee.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${me.pathname}" was given in the \`location\` prop.`),z=me}else z=D;let H=z.pathname||"/",he=H;if(S!=="/"){let me=S.replace(/^\//,"").split("/");he="/"+H.replace(/^\//,"").split("/").slice(me.length).join("/")}let W=!u&&t&&t.matches&&t.matches.length>0?t.matches:Yb(s,{pathname:he});ws(R||W!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),ws(W==null||W[W.length-1].route.element!==void 0||W[W.length-1].route.Component!==void 0||W[W.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let fe=HI(W&&W.map(me=>Object.assign({},me,{params:Object.assign({},y,me.params),pathname:na([S,a.encodeLocation?a.encodeLocation(me.pathname).pathname:me.pathname]),pathnameBase:me.pathnameBase==="/"?S:na([S,a.encodeLocation?a.encodeLocation(me.pathnameBase).pathname:me.pathnameBase])})),c,t,r);return e&&fe?ge.createElement(ah.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},fe):fe}function jI(){let s=XI(),e=PI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=ge.createElement(ge.Fragment,null,ge.createElement("p",null," Hey developer "),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:u},"ErrorBoundary")," or"," ",ge.createElement("code",{style:u},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:a},t):null,c)}var qI=ge.createElement(jI,null),FI=class extends ge.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?ge.createElement(la.Provider,{value:this.props.routeContext},ge.createElement(Bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KI({routeContext:s,match:e,children:t}){let r=ge.useContext(xl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(la.Provider,{value:s},t)}function HI(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,u=t==null?void 0:t.errors;if(u!=null){let y=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);on(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,y+1))}let c=!1,m=-1;if(t)for(let y=0;y<a.length;y++){let v=a[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:S,errors:R}=t,D=v.route.loader&&!S.hasOwnProperty(v.route.id)&&(!R||R[v.route.id]===void 0);if(v.route.lazy||D){c=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}return a.reduceRight((y,v,S)=>{let R,D=!1,z=null,H=null;t&&(R=u&&v.route.id?u[v.route.id]:void 0,z=v.route.errorElement||qI,c&&(m<0&&S===0?(iT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,H=null):m===S&&(D=!0,H=v.route.hydrateFallbackElement||null)));let he=e.concat(a.slice(0,S+1)),W=()=>{let fe;return R?fe=z:D?fe=H:v.route.Component?fe=ge.createElement(v.route.Component,null):v.route.element?fe=v.route.element:fe=y,ge.createElement(KI,{match:v,routeContext:{outlet:y,matches:he,isDataRoute:t!=null},children:fe})};return t&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?ge.createElement(FI,{location:t.location,revalidation:t.revalidation,component:z,error:R,children:W(),routeContext:{outlet:null,matches:he,isDataRoute:!0}}):W()},null)}function zg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GI(s){let e=ge.useContext(xl);return on(e,zg(s)),e}function QI(s){let e=ge.useContext(Ad);return on(e,zg(s)),e}function YI(s){let e=ge.useContext(la);return on(e,zg(s)),e}function jg(s){let e=YI(s),t=e.matches[e.matches.length-1];return on(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function $I(){return jg("useRouteId")}function XI(){var r;let s=ge.useContext(Bg),e=QI("useRouteError"),t=jg("useRouteError");return s!==void 0?s:(r=e.errors)==null?void 0:r[t]}function WI(){let{router:s}=GI("useNavigate"),e=jg("useNavigate"),t=ge.useRef(!1);return nT(()=>{t.current=!0}),ge.useCallback(async(a,u={})=>{ws(t.current,tT),t.current&&(typeof a=="number"?s.navigate(a):await s.navigate(a,{fromRouteId:e,...u}))},[s,e])}var $0={};function iT(s,e,t){!e&&!$0[s]&&($0[s]=!0,ws(!1,t))}ge.memo(JI);function JI({routes:s,future:e,state:t}){return rT(s,void 0,t,e)}function ng(s){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZI({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:u=!1}){on(!oh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),m=ge.useMemo(()=>({basename:c,navigator:a,static:u,future:{}}),[c,a,u]);typeof t=="string"&&(t=Rl(t));let{pathname:y="/",search:v="",hash:S="",state:R=null,key:D="default"}=t,z=ge.useMemo(()=>{let H=ia(y,c);return H==null?null:{location:{pathname:H,search:v,hash:S,state:R,key:D},navigationType:r}},[c,y,v,S,R,D,r]);return ws(z!=null,`<Router basename="${c}"> is not able to match the URL "${y}${v}${S}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:ge.createElement(Is.Provider,{value:m},ge.createElement(ah.Provider,{children:e,value:z}))}function eR({children:s,location:e}){return zI(rg(s),e)}function rg(s,e=[]){let t=[];return ge.Children.forEach(s,(r,a)=>{if(!ge.isValidElement(r))return;let u=[...e,a];if(r.type===ge.Fragment){t.push.apply(t,rg(r.props.children,u));return}on(r.type===ng,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=rg(r.props.children,u)),t.push(c)}),t}var Pf="get",Vf="application/x-www-form-urlencoded";function Id(s){return s!=null&&typeof s.tagName=="string"}function tR(s){return Id(s)&&s.tagName.toLowerCase()==="button"}function nR(s){return Id(s)&&s.tagName.toLowerCase()==="form"}function rR(s){return Id(s)&&s.tagName.toLowerCase()==="input"}function iR(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function sR(s,e){return s.button===0&&(!e||e==="_self")&&!iR(s)}var wf=null;function aR(){if(wf===null)try{new FormData(document.createElement("form"),0),wf=!1}catch{wf=!0}return wf}var oR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lp(s){return s!=null&&!oR.has(s)?(ws(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vf}"`),null):s}function uR(s,e){let t,r,a,u,c;if(nR(s)){let m=s.getAttribute("action");r=m?ia(m,e):null,t=s.getAttribute("method")||Pf,a=Lp(s.getAttribute("enctype"))||Vf,u=new FormData(s)}else if(tR(s)||rR(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=s.getAttribute("formaction")||m.getAttribute("action");if(r=y?ia(y,e):null,t=s.getAttribute("formmethod")||m.getAttribute("method")||Pf,a=Lp(s.getAttribute("formenctype"))||Lp(m.getAttribute("enctype"))||Vf,u=new FormData(m,s),!aR()){let{name:v,type:S,value:R}=s;if(S==="image"){let D=v?`${v}.`:"";u.append(`${D}x`,"0"),u.append(`${D}y`,"0")}else v&&u.append(v,R)}}else{if(Id(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Pf,r=null,a=Vf,c=s}return u&&a==="text/plain"&&(c=u,u=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:u,body:c}}function qg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}async function lR(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function hR(s,e,t){let r=await Promise.all(s.map(async a=>{let u=e.routes[a.route.id];if(u){let c=await lR(u,t);return c.links?c.links():[]}return[]}));return pR(r.flat(1).filter(cR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function X0(s,e,t,r,a,u){let c=(y,v)=>t[v]?y.route.id!==t[v].route.id:!0,m=(y,v)=>{var S;return t[v].pathname!==y.pathname||((S=t[v].route.path)==null?void 0:S.endsWith("*"))&&t[v].params["*"]!==y.params["*"]};return u==="assets"?e.filter((y,v)=>c(y,v)||m(y,v)):u==="data"?e.filter((y,v)=>{var R;let S=r.routes[y.route.id];if(!S||!S.hasLoader)return!1;if(c(y,v)||m(y,v))return!0;if(y.route.shouldRevalidate){let D=y.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((R=t[0])==null?void 0:R.params)||{},nextUrl:new URL(s,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof D=="boolean")return D}return!0}):[]}function fR(s,e,{includeHydrateFallback:t}={}){return dR(s.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function dR(s){return[...new Set(s)]}function mR(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function pR(s,e){let t=new Set;return new Set(e),s.reduce((r,a)=>{let u=JSON.stringify(mR(a));return t.has(u)||(t.add(u),r.push({key:u,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gR=new Set([100,101,204,205]);function yR(s,e){let t=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t.pathname==="/"?t.pathname="_root.data":e&&ia(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function sT(){let s=ge.useContext(xl);return qg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function vR(){let s=ge.useContext(Ad);return qg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Fg=ge.createContext(void 0);Fg.displayName="FrameworkContext";function aT(){let s=ge.useContext(Fg);return qg(s,"You must render this element inside a <HydratedRouter> element"),s}function _R(s,e){let t=ge.useContext(Fg),[r,a]=ge.useState(!1),[u,c]=ge.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:v,onMouseLeave:S,onTouchStart:R}=e,D=ge.useRef(null);ge.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let he=fe=>{fe.forEach(Ee=>{c(Ee.isIntersecting)})},W=new IntersectionObserver(he,{threshold:.5});return D.current&&W.observe(D.current),()=>{W.disconnect()}}},[s]),ge.useEffect(()=>{if(r){let he=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(he)}}},[r]);let z=()=>{a(!0)},H=()=>{a(!1),c(!1)};return t?s!=="intent"?[u,D,{}]:[u,D,{onFocus:wc(m,z),onBlur:wc(y,H),onMouseEnter:wc(v,z),onMouseLeave:wc(S,H),onTouchStart:wc(R,z)}]:[!1,D,{}]}function wc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function ER({page:s,...e}){let{router:t}=sT(),r=ge.useMemo(()=>Yb(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?ge.createElement(TR,{page:s,matches:r,...e}):null}function bR(s){let{manifest:e,routeModules:t}=aT(),[r,a]=ge.useState([]);return ge.useEffect(()=>{let u=!1;return hR(s,e,t).then(c=>{u||a(c)}),()=>{u=!0}},[s,e,t]),r}function TR({page:s,matches:e,...t}){let r=pu(),{manifest:a,routeModules:u}=aT(),{basename:c}=sT(),{loaderData:m,matches:y}=vR(),v=ge.useMemo(()=>X0(s,e,y,a,r,"data"),[s,e,y,a,r]),S=ge.useMemo(()=>X0(s,e,y,a,r,"assets"),[s,e,y,a,r]),R=ge.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let H=new Set,he=!1;if(e.forEach(fe=>{var me;let Ee=a.routes[fe.route.id];!Ee||!Ee.hasLoader||(!v.some(De=>De.route.id===fe.route.id)&&fe.route.id in m&&((me=u[fe.route.id])!=null&&me.shouldRevalidate)||Ee.hasClientLoader?he=!0:H.add(fe.route.id))}),H.size===0)return[];let W=yR(s,c);return he&&H.size>0&&W.searchParams.set("_routes",e.filter(fe=>H.has(fe.route.id)).map(fe=>fe.route.id).join(",")),[W.pathname+W.search]},[c,m,r,a,v,e,s,u]),D=ge.useMemo(()=>fR(S,a),[S,a]),z=bR(S);return ge.createElement(ge.Fragment,null,R.map(H=>ge.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...t})),D.map(H=>ge.createElement("link",{key:H,rel:"modulepreload",href:H,...t})),z.map(({key:H,link:he})=>ge.createElement("link",{key:H,...he})))}function wR(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oT&&(window.__reactRouterVersion="7.6.0")}catch{}function SR({basename:s,children:e,window:t}){let r=ge.useRef();r.current==null&&(r.current=cI({window:t,v5Compat:!0}));let a=r.current,[u,c]=ge.useState({action:a.action,location:a.location}),m=ge.useCallback(y=>{ge.startTransition(()=>c(y))},[c]);return ge.useLayoutEffect(()=>a.listen(m),[a,m]),ge.createElement(ZI,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:a})}var uT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lT=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:u,replace:c,state:m,target:y,to:v,preventScrollReset:S,viewTransition:R,...D},z){let{basename:H}=ge.useContext(Is),he=typeof v=="string"&&uT.test(v),W,fe=!1;if(typeof v=="string"&&he&&(W=v,oT))try{let V=new URL(window.location.href),j=v.startsWith("//")?new URL(V.protocol+v):new URL(v),Y=ia(j.pathname,H);j.origin===V.origin&&Y!=null?v=Y+j.search+j.hash:fe=!0}catch{ws(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Ee=LI(v,{relative:a}),[me,De,Pe]=_R(r,D),je=xR(v,{replace:c,state:m,target:y,preventScrollReset:S,relative:a,viewTransition:R});function U(V){e&&e(V),V.defaultPrevented||je(V)}let N=ge.createElement("a",{...D,...Pe,href:W||Ee,onClick:fe||u?e:U,ref:wR(z,De),target:y,"data-discover":!he&&t==="render"?"true":void 0});return me&&!he?ge.createElement(ge.Fragment,null,N,ge.createElement(ER,{page:Ee})):N});lT.displayName="Link";var AR=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:u,to:c,viewTransition:m,children:y,...v},S){let R=uh(c,{relative:v.relative}),D=pu(),z=ge.useContext(Ad),{navigator:H,basename:he}=ge.useContext(Is),W=z!=null&&PR(R)&&m===!0,fe=H.encodeLocation?H.encodeLocation(R).pathname:R.pathname,Ee=D.pathname,me=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;t||(Ee=Ee.toLowerCase(),me=me?me.toLowerCase():null,fe=fe.toLowerCase()),me&&he&&(me=ia(me,he)||me);const De=fe!=="/"&&fe.endsWith("/")?fe.length-1:fe.length;let Pe=Ee===fe||!a&&Ee.startsWith(fe)&&Ee.charAt(De)==="/",je=me!=null&&(me===fe||!a&&me.startsWith(fe)&&me.charAt(fe.length)==="/"),U={isActive:Pe,isPending:je,isTransitioning:W},N=Pe?e:void 0,V;typeof r=="function"?V=r(U):V=[r,Pe?"active":null,je?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(U):u;return ge.createElement(lT,{...v,"aria-current":N,className:V,ref:S,style:j,to:c,viewTransition:m},typeof y=="function"?y(U):y)});AR.displayName="NavLink";var IR=ge.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:u,method:c=Pf,action:m,onSubmit:y,relative:v,preventScrollReset:S,viewTransition:R,...D},z)=>{let H=OR(),he=NR(m,{relative:v}),W=c.toLowerCase()==="get"?"get":"post",fe=typeof m=="string"&&uT.test(m),Ee=me=>{if(y&&y(me),me.defaultPrevented)return;me.preventDefault();let De=me.nativeEvent.submitter,Pe=(De==null?void 0:De.getAttribute("formmethod"))||c;H(De||me.currentTarget,{fetcherKey:e,method:Pe,navigate:t,replace:a,state:u,relative:v,preventScrollReset:S,viewTransition:R})};return ge.createElement("form",{ref:z,method:W,action:he,onSubmit:r?y:Ee,...D,"data-discover":!fe&&s==="render"?"true":void 0})});IR.displayName="Form";function RR(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cT(s){let e=ge.useContext(xl);return on(e,RR(s)),e}function xR(s,{target:e,replace:t,state:r,preventScrollReset:a,relative:u,viewTransition:c}={}){let m=UI(),y=pu(),v=uh(s,{relative:u});return ge.useCallback(S=>{if(sR(S,e)){S.preventDefault();let R=t!==void 0?t:qc(y)===qc(v);m(s,{replace:R,state:r,preventScrollReset:a,relative:u,viewTransition:c})}},[y,m,v,t,r,e,s,a,u,c])}var CR=0,DR=()=>`__${String(++CR)}__`;function OR(){let{router:s}=cT("useSubmit"),{basename:e}=ge.useContext(Is),t=$I();return ge.useCallback(async(r,a={})=>{let{action:u,method:c,encType:m,formData:y,body:v}=uR(r,e);if(a.navigate===!1){let S=a.fetcherKey||DR();await s.fetch(S,t,a.action||u,{preventScrollReset:a.preventScrollReset,formData:y,body:v,formMethod:a.method||c,formEncType:a.encType||m,flushSync:a.flushSync})}else await s.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:y,body:v,formMethod:a.method||c,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[s,e,t])}function NR(s,{relative:e}={}){let{basename:t}=ge.useContext(Is),r=ge.useContext(la);on(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),u={...uh(s||".",{relative:e})},c=pu();if(s==null){u.search=c.search;let m=new URLSearchParams(u.search),y=m.getAll("index");if(y.some(S=>S==="")){m.delete("index"),y.filter(R=>R).forEach(R=>m.append("index",R));let S=m.toString();u.search=S?`?${S}`:""}}return(!s||s===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:na([t,u.pathname])),qc(u)}function PR(s,e={}){let t=ge.useContext(eT);on(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cT("useViewTransitionState"),a=uh(s,{relative:e.relative});if(!t.isTransitioning)return!1;let u=ia(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=ia(t.nextLocation.pathname,r)||t.nextLocation.pathname;return $f(a.pathname,c)!=null||$f(a.pathname,u)!=null}[...gR];const VR=()=>{};var W0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kR=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=s[t++];e[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=s[t++],c=s[t++],m=s[t++],y=((a&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return e.join("")},fT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const u=s[a],c=a+1<s.length,m=c?s[a+1]:0,y=a+2<s.length,v=y?s[a+2]:0,S=u>>2,R=(u&3)<<4|m>>4;let D=(m&15)<<2|v>>6,z=v&63;y||(z=64,c||(D=64)),r.push(t[S],t[R],t[D],t[z])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(hT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):kR(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const u=t[s.charAt(a++)],m=a<s.length?t[s.charAt(a)]:0;++a;const v=a<s.length?t[s.charAt(a)]:64;++a;const R=a<s.length?t[s.charAt(a)]:64;if(++a,u==null||m==null||v==null||R==null)throw new MR;const D=u<<2|m>>4;if(r.push(D),v!==64){const z=m<<4&240|v>>2;if(r.push(z),R!==64){const H=v<<6&192|R;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class MR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LR=function(s){const e=hT(s);return fT.encodeByteArray(e,!0)},dT=function(s){return LR(s).replace(/\./g,"")},mT=function(s){try{return fT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=()=>pT().__FIREBASE_DEFAULTS__,BR=()=>{if(typeof process>"u"||typeof W0>"u")return;const s=W0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&mT(s[1]);return e&&JSON.parse(e)},Rd=()=>{try{return VR()||UR()||BR()||zR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},jR=s=>{var e,t;return(t=(e=Rd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},gT=()=>{var s;return(s=Rd())===null||s===void 0?void 0:s.config},yT=s=>{var e;return(e=Rd())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(s){return s.endsWith(".cloudworkstations.dev")}async function vT(s){return(await fetch(s,{credentials:"include"})).ok}const Pc={};function FR(){const s={prod:[],emulator:[]};for(const e of Object.keys(Pc))Pc[e]?s.emulator.push(e):s.prod.push(e);return s}function KR(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let J0=!1;function Kg(s,e){if(typeof window>"u"||typeof document>"u"||!lh(window.location.host)||Pc[s]===e||Pc[s]||J0)return;Pc[s]=e;function t(D){return`__firebase__banner__${D}`}const r="__firebase__banner",u=FR().prod.length>0;function c(){const D=document.getElementById(r);D&&D.remove()}function m(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,z){D.setAttribute("width","24"),D.setAttribute("id",z),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{J0=!0,c()},D}function S(D,z){D.setAttribute("id",z),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function R(){const D=KR(r),z=t("text"),H=document.getElementById(z)||document.createElement("span"),he=t("learnmore"),W=document.getElementById(he)||document.createElement("a"),fe=t("preprendIcon"),Ee=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const me=D.element;m(me),S(W,he);const De=v();y(Ee,fe),me.append(Ee,H,W,De),document.body.appendChild(me)}u?(H.innerText="Preview backend disconnected.",Ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function GR(){var s;const e=(s=Rd())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XR(){const s=kn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function _T(){return!GR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ET(){try{return typeof indexedDB=="object"}catch{return!1}}function WR(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="FirebaseError";class ca extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JR,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ch.prototype.create)}}class ch{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],c=u?ZR(u,r):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new ca(a,m,r)}}function ZR(s,e){return s.replace(ex,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const ex=/\{\$([^}]+)}/g;function tx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function su(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const u=s[a],c=e[a];if(Z0(u)&&Z0(c)){if(!su(u,c))return!1}else if(u!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Z0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nx(s,e){const t=new rx(s,e);return t.subscribe.bind(t)}class rx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ix(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Up),a.error===void 0&&(a.error=Up),a.complete===void 0&&(a.complete=Up);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ix(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(s){return s&&s._delegate?s._delegate:s}class au{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new qR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ox(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),u=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(a,u);const c=this.instances.get(a);return c&&e(c,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ax(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ax(s){return s===Go?void 0:s}function ox(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(St||(St={}));const lx={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},cx=St.INFO,hx={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},fx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=hx[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=cx,this._logHandler=fx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const dx=(s,e)=>e.some(t=>s instanceof t);let eE,tE;function mx(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function px(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bT=new WeakMap,ig=new WeakMap,TT=new WeakMap,Bp=new WeakMap,Gg=new WeakMap;function gx(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{t(ao(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",u),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bT.set(t,s)}).catch(()=>{}),Gg.set(e,s),e}function yx(s){if(ig.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});ig.set(s,e)}let sg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ig.get(s);if(e==="objectStoreNames")return s.objectStoreNames||TT.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ao(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function vx(s){sg=s(sg)}function _x(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(zp(this),e,...t);return TT.set(r,e.sort?e.sort():[e]),ao(r)}:px().includes(s)?function(...e){return s.apply(zp(this),e),ao(bT.get(this))}:function(...e){return ao(s.apply(zp(this),e))}}function Ex(s){return typeof s=="function"?_x(s):(s instanceof IDBTransaction&&yx(s),dx(s,mx())?new Proxy(s,sg):s)}function ao(s){if(s instanceof IDBRequest)return gx(s);if(Bp.has(s))return Bp.get(s);const e=Ex(s);return e!==s&&(Bp.set(s,e),Gg.set(e,s)),e}const zp=s=>Gg.get(s);function bx(s,e,{blocked:t,upgrade:r,blocking:a,terminated:u}={}){const c=indexedDB.open(s,e),m=ao(c);return r&&c.addEventListener("upgradeneeded",y=>{r(ao(c.result),y.oldVersion,y.newVersion,ao(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Tx=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],jp=new Map;function nE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=wx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Tx.includes(t)))return;const u=async function(c,...m){const y=this.transaction(c,a?"readwrite":"readonly");let v=y.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),a&&y.done]))[0]};return jp.set(e,u),u}vx(s=>({...s,get:(e,t,r)=>nE(e,t)||s.get(e,t,r),has:(e,t)=>!!nE(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ax(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Ax(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ag="@firebase/app",rE="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new Hg("@firebase/app"),Ix="@firebase/app-compat",Rx="@firebase/analytics-compat",xx="@firebase/analytics",Cx="@firebase/app-check-compat",Dx="@firebase/app-check",Ox="@firebase/auth",Nx="@firebase/auth-compat",Px="@firebase/database",Vx="@firebase/data-connect",kx="@firebase/database-compat",Mx="@firebase/functions",Lx="@firebase/functions-compat",Ux="@firebase/installations",Bx="@firebase/installations-compat",zx="@firebase/messaging",jx="@firebase/messaging-compat",qx="@firebase/performance",Fx="@firebase/performance-compat",Kx="@firebase/remote-config",Hx="@firebase/remote-config-compat",Gx="@firebase/storage",Qx="@firebase/storage-compat",Yx="@firebase/firestore",$x="@firebase/vertexai",Xx="@firebase/firestore-compat",Wx="firebase",Jx="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="[DEFAULT]",Zx={[ag]:"fire-core",[Ix]:"fire-core-compat",[xx]:"fire-analytics",[Rx]:"fire-analytics-compat",[Dx]:"fire-app-check",[Cx]:"fire-app-check-compat",[Ox]:"fire-auth",[Nx]:"fire-auth-compat",[Px]:"fire-rtdb",[Vx]:"fire-data-connect",[kx]:"fire-rtdb-compat",[Mx]:"fire-fn",[Lx]:"fire-fn-compat",[Ux]:"fire-iid",[Bx]:"fire-iid-compat",[zx]:"fire-fcm",[jx]:"fire-fcm-compat",[qx]:"fire-perf",[Fx]:"fire-perf-compat",[Kx]:"fire-rc",[Hx]:"fire-rc-compat",[Gx]:"fire-gcs",[Qx]:"fire-gcs-compat",[Yx]:"fire-fst",[Xx]:"fire-fst-compat",[$x]:"fire-vertex","fire-js":"fire-js",[Wx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new Map,eC=new Map,ug=new Map;function iE(s,e){try{s.container.addComponent(e)}catch(t){sa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function cl(s){const e=s.name;if(ug.has(e))return sa.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,s);for(const t of Xf.values())iE(t,s);for(const t of eC.values())iE(t,s);return!0}function Qg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Xi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new ch("app","Firebase",tC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new au("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=Jx;function wT(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:og,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw oo.create("bad-app-name",{appName:String(a)});if(t||(t=gT()),!t)throw oo.create("no-options");const u=Xf.get(a);if(u){if(su(t,u.options)&&su(r,u.config))return u;throw oo.create("duplicate-app",{appName:a})}const c=new ux(a);for(const y of ug.values())c.addComponent(y);const m=new nC(t,r,c);return Xf.set(a,m),m}function rC(s=og){const e=Xf.get(s);if(!e&&s===og&&gT())return wT();if(!e)throw oo.create("no-app",{appName:s});return e}function uo(s,e,t){var r;let a=(r=Zx[s])!==null&&r!==void 0?r:s;t&&(a+=`-${t}`);const u=a.match(/\s|\//),c=e.match(/\s|\//);if(u||c){const m=[`Unable to register library "${a}" with version "${e}":`];u&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sa.warn(m.join(" "));return}cl(new au(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="firebase-heartbeat-database",sC=1,Fc="firebase-heartbeat-store";let qp=null;function ST(){return qp||(qp=bx(iC,sC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Fc)}catch(t){console.warn(t)}}}}).catch(s=>{throw oo.create("idb-open",{originalErrorMessage:s.message})})),qp}async function aC(s){try{const t=(await ST()).transaction(Fc),r=await t.objectStore(Fc).get(AT(s));return await t.done,r}catch(e){if(e instanceof ca)sa.warn(e.message);else{const t=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sa.warn(t.message)}}}async function sE(s,e){try{const r=(await ST()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,AT(s)),await r.done}catch(t){if(t instanceof ca)sa.warn(t.message);else{const r=oo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});sa.warn(r.message)}}}function AT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1024,uC=30;class lC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=aE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>uC){const c=fC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=aE(),{heartbeatsToSend:r,unsentEntries:a}=cC(this._heartbeatsCache.heartbeats),u=dT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return sa.warn(t),""}}}function aE(){return new Date().toISOString().substring(0,10)}function cC(s,e=oC){const t=[];let r=s.slice();for(const a of s){const u=t.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),oE(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),oE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ET()?WR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return sE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return sE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function oE(s){return dT(JSON.stringify({version:2,heartbeats:s})).length}function fC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(s){cl(new au("platform-logger",e=>new Sx(e),"PRIVATE")),cl(new au("heartbeat",e=>new lC(e),"PRIVATE")),uo(ag,rE,s),uo(ag,rE,"esm2017"),uo("fire-js","")}dC("");var mC="firebase",pC="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo(mC,pC,"app");function Yg(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(t[r[a]]=s[r[a]]);return t}function IT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gC=IT,RT=new ch("auth","Firebase",IT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=new Hg("@firebase/auth");function yC(s,...e){Wf.logLevel<=St.WARN&&Wf.warn(`Auth (${Cl}): ${s}`,...e)}function kf(s,...e){Wf.logLevel<=St.ERROR&&Wf.error(`Auth (${Cl}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(s,...e){throw Xg(s,...e)}function Zi(s,...e){return Xg(s,...e)}function $g(s,e,t){const r=Object.assign(Object.assign({},gC()),{[e]:t});return new ch("auth","Firebase",r).create(e,{appName:s.name})}function tu(s){return $g(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vC(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ss(s,"argument-error"),$g(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xg(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return RT.create(s,...e)}function ot(s,e,...t){if(!s)throw Xg(e,...t)}function Js(s){const e="INTERNAL ASSERTION FAILED: "+s;throw kf(e),new Error(e)}function aa(s,e){s||Js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function _C(){return uE()==="http:"||uE()==="https:"}function uE(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_C()||YR()||"connection"in navigator)?navigator.onLine:!0}function bC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.shortDelay=e,this.longDelay=t,aa(t>e,"Short delay should be less than long delay!"),this.isMobile=HR()||$R()}get(){return EC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(s,e){aa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SC=new fh(3e4,6e4);function Jg(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Dl(s,e,t,r,a={}){return CT(s,a,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const m=hh(Object.assign({key:s.config.apiKey},c)).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const v=Object.assign({method:e,headers:y},u);return QR()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&lh(s.emulatorConfig.host)&&(v.credentials="include"),xT.fetch()(await DT(s,s.config.apiHost,t,m),v)})}async function CT(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},TC),e);try{const a=new IC(s),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Sf(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[y,v]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sf(s,"credential-already-in-use",c);if(y==="EMAIL_EXISTS")throw Sf(s,"email-already-in-use",c);if(y==="USER_DISABLED")throw Sf(s,"user-disabled",c);const S=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw $g(s,S,v);Ss(s,S)}}catch(a){if(a instanceof ca)throw a;Ss(s,"network-request-failed",{message:String(a)})}}async function AC(s,e,t,r,a={}){const u=await Dl(s,e,t,r,a);return"mfaPendingCredential"in u&&Ss(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function DT(s,e,t,r){const a=`${e}${t}?${r}`,u=s,c=u.config.emulator?Wg(s.config,a):`${s.config.apiScheme}://${a}`;return wC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class IC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zi(this.auth,"network-request-failed")),SC.get())})}}function Sf(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Zi(s,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(s,e){return Dl(s,"POST","/v1/accounts:delete",e)}async function Jf(s,e){return Dl(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xC(s,e=!1){const t=gu(s),r=await t.getIdToken(e),a=Zg(r);ot(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:a,token:r,authTime:Vc(Fp(a.auth_time)),issuedAtTime:Vc(Fp(a.iat)),expirationTime:Vc(Fp(a.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Fp(s){return Number(s)*1e3}function Zg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{const a=mT(t);return a?JSON.parse(a):(kf("Failed to decode base64 JWT payload"),null)}catch(a){return kf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function lE(s){const e=Zg(s);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ca&&CC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function CC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vc(this.lastLoginAt),this.creationTime=Vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zf(s){var e;const t=s.auth,r=await s.getIdToken(),a=await Kc(s,Jf(t,{idToken:r}));ot(a==null?void 0:a.users.length,t,"internal-error");const u=a.users[0];s._notifyReloadListener(u);const c=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?OT(u.providerUserInfo):[],m=NC(s.providerData,c),y=s.isAnonymous,v=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),S=y?v:!1,R={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new cg(u.createdAt,u.lastLoginAt),isAnonymous:S};Object.assign(s,R)}async function OC(s){const e=gu(s);await Zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NC(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function OT(s){return s.map(e=>{var{providerId:t}=e,r=Yg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(s,e){const t=await CT(s,{},async()=>{const r=hh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=s.config,c=await DT(s,a,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",xT.fetch()(c,{method:"POST",headers:m,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function VC(s,e){return Dl(s,"POST","/v2/accounts:revokeToken",Jg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=lE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:u}=await PC(e,t);this.updateTokensAndExpiration(r,a,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:u}=t,c=new al;return r&&(ot(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ot(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),u&&(ot(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new al,this.toJSON())}_performRefresh(){return Js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(s,e){ot(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Wi{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,u=Yg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new cg(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xC(this,e)}reload(){return OC(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Zf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xi(this.auth.app))return Promise.reject(tu(this.auth));const e=await this.getIdToken();return await Kc(this,RC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,u,c,m,y,v,S;const R=(r=t.displayName)!==null&&r!==void 0?r:void 0,D=(a=t.email)!==null&&a!==void 0?a:void 0,z=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,H=(c=t.photoURL)!==null&&c!==void 0?c:void 0,he=(m=t.tenantId)!==null&&m!==void 0?m:void 0,W=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,fe=(v=t.createdAt)!==null&&v!==void 0?v:void 0,Ee=(S=t.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:me,emailVerified:De,isAnonymous:Pe,providerData:je,stsTokenManager:U}=t;ot(me&&U,e,"internal-error");const N=al.fromJSON(this.name,U);ot(typeof me=="string",e,"internal-error"),Wa(R,e.name),Wa(D,e.name),ot(typeof De=="boolean",e,"internal-error"),ot(typeof Pe=="boolean",e,"internal-error"),Wa(z,e.name),Wa(H,e.name),Wa(he,e.name),Wa(W,e.name),Wa(fe,e.name),Wa(Ee,e.name);const V=new Wi({uid:me,auth:e,email:D,emailVerified:De,displayName:R,isAnonymous:Pe,photoURL:H,phoneNumber:z,tenantId:he,stsTokenManager:N,createdAt:fe,lastLoginAt:Ee});return je&&Array.isArray(je)&&(V.providerData=je.map(j=>Object.assign({},j))),W&&(V._redirectEventId=W),V}static async _fromIdTokenResponse(e,t,r=!1){const a=new al;a.updateFromServerResponse(t);const u=new Wi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Zf(u),u}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ot(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?OT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(u!=null&&u.length),m=new al;m.updateFromIdToken(r);const y=new Wi({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:c}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new cg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;function Zs(s){aa(s instanceof Function,"Expected a class definition");let e=cE.get(s);return e?(aa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,cE.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}NT.type="NONE";const hE=NT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(s,e,t){return`firebase:${s}:${e}:${t}`}class ol{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:u}=this.auth;this.fullUserKey=Mf(this.userKey,a.apiKey,u),this.fullPersistenceKey=Mf("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jf(this.auth,{idToken:e}).catch(()=>{});return t?Wi._fromGetAccountInfoResponse(this.auth,t,e):null}return Wi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ol(Zs(hE),e,r);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=a[0]||Zs(hE);const c=Mf(r,e.config.apiKey,e.name);let m=null;for(const v of t)try{const S=await v._get(c);if(S){let R;if(typeof S=="string"){const D=await Jf(e,{idToken:S}).catch(()=>{});if(!D)break;R=await Wi._fromGetAccountInfoResponse(e,D,S)}else R=Wi._fromJSON(e,S);v!==u&&(m=R),u=v;break}}catch{}const y=a.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new ol(u,e,r):(u=y[0],m&&await u._set(c,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(c)}catch{}})),new ol(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UT(e))return"Blackberry";if(BT(e))return"Webos";if(VT(e))return"Safari";if((e.includes("chrome/")||kT(e))&&!e.includes("edge/"))return"Chrome";if(LT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PT(s=kn()){return/firefox\//i.test(s)}function VT(s=kn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kT(s=kn()){return/crios\//i.test(s)}function MT(s=kn()){return/iemobile/i.test(s)}function LT(s=kn()){return/android/i.test(s)}function UT(s=kn()){return/blackberry/i.test(s)}function BT(s=kn()){return/webos/i.test(s)}function ey(s=kn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function kC(s=kn()){var e;return ey(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MC(){return XR()&&document.documentMode===10}function zT(s=kn()){return ey(s)||LT(s)||BT(s)||UT(s)||/windows phone/i.test(s)||MT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(s,e=[]){let t;switch(s){case"Browser":t=fE(kn());break;case"Worker":t=`${fE(kn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,m)=>{try{const y=e(u);c(y)}catch(y){m(y)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(s,e={}){return Dl(s,"GET","/v2/passwordPolicy",Jg(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=6;class zC{constructor(e){var t,r,a,u;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:BC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,u,c,m;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(r=y.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),y.isValid&&(y.isValid=(a=y.containsLowercaseLetter)!==null&&a!==void 0?a:!0),y.isValid&&(y.isValid=(u=y.containsUppercaseLetter)!==null&&u!==void 0?u:!0),y.isValid&&(y.isValid=(c=y.containsNumericCharacter)!==null&&c!==void 0?c:!0),y.isValid&&(y.isValid=(m=y.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),y}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dE(this),this.idTokenSubscription=new dE(this),this.beforeStateQueue=new LC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zs(t)),this._initializationPromise=this.queue(async()=>{var r,a,u;if(!this._deleted&&(this.persistenceManager=await ol.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jf(this,{idToken:e}),r=await Wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=a==null?void 0:a._redirectEventId,y=await this.tryRedirectSignIn(e);(!c||c===m)&&(y!=null&&y.user)&&(a=y.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xi(this.app))return Promise.reject(tu(this));const t=e?gu(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xi(this.app)?Promise.reject(tu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xi(this.app)?Promise.reject(tu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UC(this),t=new zC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ch("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await VC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zs(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await ol.create(this,[Zs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,r,a);return()=>{c=!0,y()}}else{const y=e.addObserver(t);return()=>{c=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&yC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xd(s){return gu(s)}class dE{constructor(e){this.auth=e,this.observer=null,this.addObserver=nx(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ty={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qC(s){ty=s}function FC(s){return ty.loadJS(s)}function KC(){return ty.gapiScript}function HC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(s,e){const t=Qg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(su(u,e??{}))return a;Ss(a,"already-initialized")}return t.initialize({options:e})}function QC(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Zs);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YC(s,e,t){const r=xd(s);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,u=qT(e),{host:c,port:m}=$C(e),y=m===null?"":`:${m}`,v={url:`${u}//${c}${y}/`},S=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(su(v,r.config.emulator)&&su(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,lh(c)?(Kg("Auth",!0),vT(`${u}//${c}${y}`)):XC()}function qT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function $C(s){const e=qT(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const u=a[1];return{host:u,port:mE(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:mE(c)}}}function mE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function XC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,t){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(s,e){return AC(s,"POST","/v1/accounts:signInWithIdp",Jg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="http://localhost";class ou extends FT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ou(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ss("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,u=Yg(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new ou(r,a);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ul(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:WC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends ny{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends dh{constructor(){super("facebook.com")}static credential(e){return ou._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ou._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _s.credential(t,r)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends dh{constructor(){super("github.com")}static credential(e){return ou._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends dh{constructor(){super("twitter.com")}static credential(e,t){return ou._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ro.credential(t,r)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const u=await Wi._fromIdTokenResponse(e,r,a),c=pE(r);return new hl({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=pE(r);return new hl({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function pE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends ca{constructor(e,t,r,a){var u;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new ed(e,t,r,a)}}function KT(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(s,u,e,r):u})}async function JC(s,e,t=!1){const r=await Kc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return hl._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(s,e,t=!1){const{auth:r}=s;if(Xi(r.app))return Promise.reject(tu(r));const a="reauthenticate";try{const u=await Kc(s,KT(r,a,e,s),t);ot(u.idToken,r,"internal-error");const c=Zg(u.idToken);ot(c,r,"internal-error");const{sub:m}=c;return ot(s.uid===m,r,"user-mismatch"),hl._forOperation(s,a,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ss(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s,e,t=!1){if(Xi(s.app))return Promise.reject(tu(s));const r="signIn",a=await KT(s,r,e),u=await hl._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(u.user),u}function t2(s,e,t,r){return gu(s).onIdTokenChanged(e,t,r)}function n2(s,e,t){return gu(s).beforeAuthStateChanged(e,t)}const td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1e3,i2=10;class GT extends HT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,y)=>{this.notifyListeners(c,y)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);MC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,i2):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},r2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GT.type="LOCAL";const s2=GT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends HT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QT.type="SESSION";const YT=QT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:u}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(c).map(async v=>v(t.origin,u)),y=await a2(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((m,y)=>{const v=ry("",20);a.port1.start();const S=setTimeout(()=>{y(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(R){const D=R;if(D.data.eventId===v)switch(D.data.status){case"ack":clearTimeout(S),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(D.data.response);break;default:clearTimeout(S),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function u2(s){Ts().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function l2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function c2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function h2(){return $T()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firebaseLocalStorageDb",f2=1,nd="firebaseLocalStorage",WT="fbase_key";class mh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dd(s,e){return s.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function d2(){const s=indexedDB.deleteDatabase(XT);return new mh(s).toPromise()}function hg(){const s=indexedDB.open(XT,f2);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(nd,{keyPath:WT})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(nd)?e(r):(r.close(),await d2(),e(await hg()))})})}async function gE(s,e,t){const r=Dd(s,!0).put({[WT]:e,value:t});return new mh(r).toPromise()}async function m2(s,e){const t=Dd(s,!1).get(e),r=await new mh(t).toPromise();return r===void 0?null:r.value}function yE(s,e){const t=Dd(s,!0).delete(e);return new mh(t).toPromise()}const p2=800,g2=3;class JT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>g2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $T()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(h2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await l2(),!this.activeServiceWorker)return;this.sender=new o2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||c2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await gE(e,td,"1"),await yE(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>m2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=Dd(a,!1).getAll();return new mh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JT.type="LOCAL";const y2=JT;new fh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(s,e){return e?Zs(e):(ot(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends FT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function v2(s){return e2(s.auth,new iy(s),s.bypassAuthState)}function _2(s){const{auth:e,user:t}=s;return ot(t,e,"internal-error"),ZC(t,new iy(s),s.bypassAuthState)}async function E2(s){const{auth:e,user:t}=s;return ot(t,e,"internal-error"),JC(t,new iy(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,r,a,u=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:u,error:c,type:m}=e;if(c){this.reject(c);return}const y={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v2;case"linkViaPopup":case"linkViaRedirect":return E2;case"reauthViaPopup":case"reauthViaRedirect":return _2;default:Ss(this.auth,"internal-error")}}resolve(e){aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new fh(2e3,1e4);async function tw(s,e,t){if(Xi(s.app))return Promise.reject(Zi(s,"operation-not-supported-in-this-environment"));const r=xd(s);vC(s,e,ny);const a=ZT(r,t);return new Zo(r,"signInViaPopup",e,a).executeNotNull()}class Zo extends ew{constructor(e,t,r,a,u){super(e,t,a,u),this.provider=r,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){aa(this.filter.length===1,"Popup operations only handle one event");const e=ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b2.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="pendingRedirect",Lf=new Map;class w2 extends ew{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const r=await S2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S2(s,e){const t=R2(e),r=I2(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function A2(s,e){Lf.set(s._key(),e)}function I2(s){return Zs(s._redirectPersistence)}function R2(s){return Mf(T2,s.config.apiKey,s.name)}async function x2(s,e,t=!1){if(Xi(s.app))return Promise.reject(tu(s));const r=xd(s),a=ZT(r,e),c=await new w2(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=10*60*1e3;class D2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!nw(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C2&&this.cachedEventUids.clear(),this.cachedEventUids.has(vE(e))}saveEventToCache(e){this.cachedEventUids.add(vE(e)),this.lastProcessedEventTime=Date.now()}}function vE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function nw({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nw(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(s,e={}){return Dl(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V2=/^https?/;async function k2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await N2(s);for(const t of e)try{if(M2(t))return}catch{}Ss(s,"unauthorized-domain")}function M2(s){const e=lg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!V2.test(t))return!1;if(P2.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new fh(3e4,6e4);function _E(){const s=Ts().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function U2(s){return new Promise((e,t)=>{var r,a,u;function c(){_E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_E(),t(Zi(s,"network-request-failed"))},timeout:L2.get()})}if(!((a=(r=Ts().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=Ts().gapi)===null||u===void 0)&&u.load)c();else{const m=HC("iframefcb");return Ts()[m]=()=>{gapi.load?c():t(Zi(s,"network-request-failed"))},FC(`${KC()}?onload=${m}`).catch(y=>t(y))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function B2(s){return Uf=Uf||U2(s),Uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new fh(5e3,15e3),j2="__/auth/iframe",q2="emulator/auth/iframe",F2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H2(s){const e=s.config;ot(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Wg(e,q2):`https://${s.config.authDomain}/${j2}`,r={apiKey:e.apiKey,appName:s.name,v:Cl},a=K2.get(s.config.apiHost);a&&(r.eid=a);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${hh(r).slice(1)}`}async function G2(s){const e=await B2(s),t=Ts().gapi;return ot(t,s,"internal-error"),e.open({where:document.body,url:H2(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F2,dontclear:!0},r=>new Promise(async(a,u)=>{await r.restyle({setHideOnLeave:!1});const c=Zi(s,"network-request-failed"),m=Ts().setTimeout(()=>{u(c)},z2.get());function y(){Ts().clearTimeout(m),a(r)}r.ping(y).then(y,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y2=500,$2=600,X2="_blank",W2="http://localhost";class EE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J2(s,e,t,r=Y2,a=$2){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const y=Object.assign(Object.assign({},Q2),{width:r.toString(),height:a.toString(),top:u,left:c}),v=kn().toLowerCase();t&&(m=kT(v)?X2:t),PT(v)&&(e=e||W2,y.scrollbars="yes");const S=Object.entries(y).reduce((D,[z,H])=>`${D}${z}=${H},`,"");if(kC(v)&&m!=="_self")return Z2(e||"",m),new EE(null);const R=window.open(e||"",m,S);ot(R,s,"popup-blocked");try{R.focus()}catch{}return new EE(R)}function Z2(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="__/auth/handler",tD="emulator/auth/handler",nD=encodeURIComponent("fac");async function bE(s,e,t,r,a,u){ot(s.config.authDomain,s,"auth-domain-config-required"),ot(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Cl,eventId:a};if(e instanceof ny){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",tx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,R]of Object.entries({}))c[S]=R}if(e instanceof dh){const S=e.getScopes().filter(R=>R!=="");S.length>0&&(c.scopes=S.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const S of Object.keys(m))m[S]===void 0&&delete m[S];const y=await s._getAppCheckToken(),v=y?`#${nD}=${encodeURIComponent(y)}`:"";return`${rD(s)}?${hh(m).slice(1)}${v}`}function rD({config:s}){return s.emulator?Wg(s,tD):`https://${s.authDomain}/${eD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="webStorageSupport";class iD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YT,this._completeRedirectFn=x2,this._overrideRedirectResult=A2}async _openPopup(e,t,r,a){var u;aa((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await bE(e,t,r,lg(),a);return J2(e,c,ry())}async _openRedirect(e,t,r,a){await this._originValidation(e);const u=await bE(e,t,r,lg(),a);return u2(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(aa(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await G2(e),r=new D2(e);return t.register("authEvent",a=>(ot(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kp,{type:Kp},a=>{var u;const c=(u=a==null?void 0:a[0])===null||u===void 0?void 0:u[Kp];c!==void 0&&t(!!c),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=k2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zT()||VT()||ey()}}const sD=iD;var TE="@firebase/auth",wE="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uD(s){cl(new au("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;ot(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jT(s)},v=new jC(r,a,u,y);return QC(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cl(new au("auth-internal",e=>{const t=xd(e.getProvider("auth").getImmediate());return(r=>new aD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),uo(TE,wE,oD(s)),uo(TE,wE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=5*60,cD=yT("authIdTokenMaxAge")||lD;let SE=null;const hD=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cD)return;const a=t==null?void 0:t.token;SE!==a&&(SE=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function fD(s=rC()){const e=Qg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=GC(s,{popupRedirectResolver:sD,persistence:[y2,s2,YT]}),r=yT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=hD(u.toString());n2(t,c,()=>c(t.currentUser)),t2(t,m=>c(m))}}const a=jR("auth");return a?YC(t,`http://${a}`):Kg("Auth",!1),t}function dD(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}qC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const u=Zi("internal-error");u.customData=a,t(u)},r.type="text/javascript",r.charset="UTF-8",dD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uD("Browser");var AE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,rw;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,N){function V(){}V.prototype=N.prototype,U.D=N.prototype,U.prototype=new V,U.prototype.constructor=U,U.C=function(j,Y,J){for(var M=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)M[Dn-2]=arguments[Dn];return N.prototype[Y].apply(j,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(U,N,V){V||(V=0);var j=Array(16);if(typeof N=="string")for(var Y=0;16>Y;++Y)j[Y]=N.charCodeAt(V++)|N.charCodeAt(V++)<<8|N.charCodeAt(V++)<<16|N.charCodeAt(V++)<<24;else for(Y=0;16>Y;++Y)j[Y]=N[V++]|N[V++]<<8|N[V++]<<16|N[V++]<<24;N=U.g[0],V=U.g[1],Y=U.g[2];var J=U.g[3],M=N+(J^V&(Y^J))+j[0]+3614090360&4294967295;N=V+(M<<7&4294967295|M>>>25),M=J+(Y^N&(V^Y))+j[1]+3905402710&4294967295,J=N+(M<<12&4294967295|M>>>20),M=Y+(V^J&(N^V))+j[2]+606105819&4294967295,Y=J+(M<<17&4294967295|M>>>15),M=V+(N^Y&(J^N))+j[3]+3250441966&4294967295,V=Y+(M<<22&4294967295|M>>>10),M=N+(J^V&(Y^J))+j[4]+4118548399&4294967295,N=V+(M<<7&4294967295|M>>>25),M=J+(Y^N&(V^Y))+j[5]+1200080426&4294967295,J=N+(M<<12&4294967295|M>>>20),M=Y+(V^J&(N^V))+j[6]+2821735955&4294967295,Y=J+(M<<17&4294967295|M>>>15),M=V+(N^Y&(J^N))+j[7]+4249261313&4294967295,V=Y+(M<<22&4294967295|M>>>10),M=N+(J^V&(Y^J))+j[8]+1770035416&4294967295,N=V+(M<<7&4294967295|M>>>25),M=J+(Y^N&(V^Y))+j[9]+2336552879&4294967295,J=N+(M<<12&4294967295|M>>>20),M=Y+(V^J&(N^V))+j[10]+4294925233&4294967295,Y=J+(M<<17&4294967295|M>>>15),M=V+(N^Y&(J^N))+j[11]+2304563134&4294967295,V=Y+(M<<22&4294967295|M>>>10),M=N+(J^V&(Y^J))+j[12]+1804603682&4294967295,N=V+(M<<7&4294967295|M>>>25),M=J+(Y^N&(V^Y))+j[13]+4254626195&4294967295,J=N+(M<<12&4294967295|M>>>20),M=Y+(V^J&(N^V))+j[14]+2792965006&4294967295,Y=J+(M<<17&4294967295|M>>>15),M=V+(N^Y&(J^N))+j[15]+1236535329&4294967295,V=Y+(M<<22&4294967295|M>>>10),M=N+(Y^J&(V^Y))+j[1]+4129170786&4294967295,N=V+(M<<5&4294967295|M>>>27),M=J+(V^Y&(N^V))+j[6]+3225465664&4294967295,J=N+(M<<9&4294967295|M>>>23),M=Y+(N^V&(J^N))+j[11]+643717713&4294967295,Y=J+(M<<14&4294967295|M>>>18),M=V+(J^N&(Y^J))+j[0]+3921069994&4294967295,V=Y+(M<<20&4294967295|M>>>12),M=N+(Y^J&(V^Y))+j[5]+3593408605&4294967295,N=V+(M<<5&4294967295|M>>>27),M=J+(V^Y&(N^V))+j[10]+38016083&4294967295,J=N+(M<<9&4294967295|M>>>23),M=Y+(N^V&(J^N))+j[15]+3634488961&4294967295,Y=J+(M<<14&4294967295|M>>>18),M=V+(J^N&(Y^J))+j[4]+3889429448&4294967295,V=Y+(M<<20&4294967295|M>>>12),M=N+(Y^J&(V^Y))+j[9]+568446438&4294967295,N=V+(M<<5&4294967295|M>>>27),M=J+(V^Y&(N^V))+j[14]+3275163606&4294967295,J=N+(M<<9&4294967295|M>>>23),M=Y+(N^V&(J^N))+j[3]+4107603335&4294967295,Y=J+(M<<14&4294967295|M>>>18),M=V+(J^N&(Y^J))+j[8]+1163531501&4294967295,V=Y+(M<<20&4294967295|M>>>12),M=N+(Y^J&(V^Y))+j[13]+2850285829&4294967295,N=V+(M<<5&4294967295|M>>>27),M=J+(V^Y&(N^V))+j[2]+4243563512&4294967295,J=N+(M<<9&4294967295|M>>>23),M=Y+(N^V&(J^N))+j[7]+1735328473&4294967295,Y=J+(M<<14&4294967295|M>>>18),M=V+(J^N&(Y^J))+j[12]+2368359562&4294967295,V=Y+(M<<20&4294967295|M>>>12),M=N+(V^Y^J)+j[5]+4294588738&4294967295,N=V+(M<<4&4294967295|M>>>28),M=J+(N^V^Y)+j[8]+2272392833&4294967295,J=N+(M<<11&4294967295|M>>>21),M=Y+(J^N^V)+j[11]+1839030562&4294967295,Y=J+(M<<16&4294967295|M>>>16),M=V+(Y^J^N)+j[14]+4259657740&4294967295,V=Y+(M<<23&4294967295|M>>>9),M=N+(V^Y^J)+j[1]+2763975236&4294967295,N=V+(M<<4&4294967295|M>>>28),M=J+(N^V^Y)+j[4]+1272893353&4294967295,J=N+(M<<11&4294967295|M>>>21),M=Y+(J^N^V)+j[7]+4139469664&4294967295,Y=J+(M<<16&4294967295|M>>>16),M=V+(Y^J^N)+j[10]+3200236656&4294967295,V=Y+(M<<23&4294967295|M>>>9),M=N+(V^Y^J)+j[13]+681279174&4294967295,N=V+(M<<4&4294967295|M>>>28),M=J+(N^V^Y)+j[0]+3936430074&4294967295,J=N+(M<<11&4294967295|M>>>21),M=Y+(J^N^V)+j[3]+3572445317&4294967295,Y=J+(M<<16&4294967295|M>>>16),M=V+(Y^J^N)+j[6]+76029189&4294967295,V=Y+(M<<23&4294967295|M>>>9),M=N+(V^Y^J)+j[9]+3654602809&4294967295,N=V+(M<<4&4294967295|M>>>28),M=J+(N^V^Y)+j[12]+3873151461&4294967295,J=N+(M<<11&4294967295|M>>>21),M=Y+(J^N^V)+j[15]+530742520&4294967295,Y=J+(M<<16&4294967295|M>>>16),M=V+(Y^J^N)+j[2]+3299628645&4294967295,V=Y+(M<<23&4294967295|M>>>9),M=N+(Y^(V|~J))+j[0]+4096336452&4294967295,N=V+(M<<6&4294967295|M>>>26),M=J+(V^(N|~Y))+j[7]+1126891415&4294967295,J=N+(M<<10&4294967295|M>>>22),M=Y+(N^(J|~V))+j[14]+2878612391&4294967295,Y=J+(M<<15&4294967295|M>>>17),M=V+(J^(Y|~N))+j[5]+4237533241&4294967295,V=Y+(M<<21&4294967295|M>>>11),M=N+(Y^(V|~J))+j[12]+1700485571&4294967295,N=V+(M<<6&4294967295|M>>>26),M=J+(V^(N|~Y))+j[3]+2399980690&4294967295,J=N+(M<<10&4294967295|M>>>22),M=Y+(N^(J|~V))+j[10]+4293915773&4294967295,Y=J+(M<<15&4294967295|M>>>17),M=V+(J^(Y|~N))+j[1]+2240044497&4294967295,V=Y+(M<<21&4294967295|M>>>11),M=N+(Y^(V|~J))+j[8]+1873313359&4294967295,N=V+(M<<6&4294967295|M>>>26),M=J+(V^(N|~Y))+j[15]+4264355552&4294967295,J=N+(M<<10&4294967295|M>>>22),M=Y+(N^(J|~V))+j[6]+2734768916&4294967295,Y=J+(M<<15&4294967295|M>>>17),M=V+(J^(Y|~N))+j[13]+1309151649&4294967295,V=Y+(M<<21&4294967295|M>>>11),M=N+(Y^(V|~J))+j[4]+4149444226&4294967295,N=V+(M<<6&4294967295|M>>>26),M=J+(V^(N|~Y))+j[11]+3174756917&4294967295,J=N+(M<<10&4294967295|M>>>22),M=Y+(N^(J|~V))+j[2]+718787259&4294967295,Y=J+(M<<15&4294967295|M>>>17),M=V+(J^(Y|~N))+j[9]+3951481745&4294967295,U.g[0]=U.g[0]+N&4294967295,U.g[1]=U.g[1]+(Y+(M<<21&4294967295|M>>>11))&4294967295,U.g[2]=U.g[2]+Y&4294967295,U.g[3]=U.g[3]+J&4294967295}r.prototype.u=function(U,N){N===void 0&&(N=U.length);for(var V=N-this.blockSize,j=this.B,Y=this.h,J=0;J<N;){if(Y==0)for(;J<=V;)a(this,U,J),J+=this.blockSize;if(typeof U=="string"){for(;J<N;)if(j[Y++]=U.charCodeAt(J++),Y==this.blockSize){a(this,j),Y=0;break}}else for(;J<N;)if(j[Y++]=U[J++],Y==this.blockSize){a(this,j),Y=0;break}}this.h=Y,this.o+=N},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var N=1;N<U.length-8;++N)U[N]=0;var V=8*this.o;for(N=U.length-8;N<U.length;++N)U[N]=V&255,V/=256;for(this.u(U),U=Array(16),N=V=0;4>N;++N)for(var j=0;32>j;j+=8)U[V++]=this.g[N]>>>j&255;return U};function u(U,N){var V=m;return Object.prototype.hasOwnProperty.call(V,U)?V[U]:V[U]=N(U)}function c(U,N){this.h=N;for(var V=[],j=!0,Y=U.length-1;0<=Y;Y--){var J=U[Y]|0;j&&J==N||(V[Y]=J,j=!1)}this.g=V}var m={};function y(U){return-128<=U&&128>U?u(U,function(N){return new c([N|0],0>N?-1:0)}):new c([U|0],0>U?-1:0)}function v(U){if(isNaN(U)||!isFinite(U))return R;if(0>U)return W(v(-U));for(var N=[],V=1,j=0;U>=V;j++)N[j]=U/V|0,V*=4294967296;return new c(N,0)}function S(U,N){if(U.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(U.charAt(0)=="-")return W(S(U.substring(1),N));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=v(Math.pow(N,8)),j=R,Y=0;Y<U.length;Y+=8){var J=Math.min(8,U.length-Y),M=parseInt(U.substring(Y,Y+J),N);8>J?(J=v(Math.pow(N,J)),j=j.j(J).add(v(M))):(j=j.j(V),j=j.add(v(M)))}return j}var R=y(0),D=y(1),z=y(16777216);s=c.prototype,s.m=function(){if(he(this))return-W(this).m();for(var U=0,N=1,V=0;V<this.g.length;V++){var j=this.i(V);U+=(0<=j?j:4294967296+j)*N,N*=4294967296}return U},s.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(H(this))return"0";if(he(this))return"-"+W(this).toString(U);for(var N=v(Math.pow(U,6)),V=this,j="";;){var Y=De(V,N).g;V=fe(V,Y.j(N));var J=((0<V.g.length?V.g[0]:V.h)>>>0).toString(U);if(V=Y,H(V))return J+j;for(;6>J.length;)J="0"+J;j=J+j}},s.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function H(U){if(U.h!=0)return!1;for(var N=0;N<U.g.length;N++)if(U.g[N]!=0)return!1;return!0}function he(U){return U.h==-1}s.l=function(U){return U=fe(this,U),he(U)?-1:H(U)?0:1};function W(U){for(var N=U.g.length,V=[],j=0;j<N;j++)V[j]=~U.g[j];return new c(V,~U.h).add(D)}s.abs=function(){return he(this)?W(this):this},s.add=function(U){for(var N=Math.max(this.g.length,U.g.length),V=[],j=0,Y=0;Y<=N;Y++){var J=j+(this.i(Y)&65535)+(U.i(Y)&65535),M=(J>>>16)+(this.i(Y)>>>16)+(U.i(Y)>>>16);j=M>>>16,J&=65535,M&=65535,V[Y]=M<<16|J}return new c(V,V[V.length-1]&-2147483648?-1:0)};function fe(U,N){return U.add(W(N))}s.j=function(U){if(H(this)||H(U))return R;if(he(this))return he(U)?W(this).j(W(U)):W(W(this).j(U));if(he(U))return W(this.j(W(U)));if(0>this.l(z)&&0>U.l(z))return v(this.m()*U.m());for(var N=this.g.length+U.g.length,V=[],j=0;j<2*N;j++)V[j]=0;for(j=0;j<this.g.length;j++)for(var Y=0;Y<U.g.length;Y++){var J=this.i(j)>>>16,M=this.i(j)&65535,Dn=U.i(Y)>>>16,Yt=U.i(Y)&65535;V[2*j+2*Y]+=M*Yt,Ee(V,2*j+2*Y),V[2*j+2*Y+1]+=J*Yt,Ee(V,2*j+2*Y+1),V[2*j+2*Y+1]+=M*Dn,Ee(V,2*j+2*Y+1),V[2*j+2*Y+2]+=J*Dn,Ee(V,2*j+2*Y+2)}for(j=0;j<N;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=N;j<2*N;j++)V[j]=0;return new c(V,0)};function Ee(U,N){for(;(U[N]&65535)!=U[N];)U[N+1]+=U[N]>>>16,U[N]&=65535,N++}function me(U,N){this.g=U,this.h=N}function De(U,N){if(H(N))throw Error("division by zero");if(H(U))return new me(R,R);if(he(U))return N=De(W(U),N),new me(W(N.g),W(N.h));if(he(N))return N=De(U,W(N)),new me(W(N.g),N.h);if(30<U.g.length){if(he(U)||he(N))throw Error("slowDivide_ only works with positive integers.");for(var V=D,j=N;0>=j.l(U);)V=Pe(V),j=Pe(j);var Y=je(V,1),J=je(j,1);for(j=je(j,2),V=je(V,2);!H(j);){var M=J.add(j);0>=M.l(U)&&(Y=Y.add(V),J=M),j=je(j,1),V=je(V,1)}return N=fe(U,Y.j(N)),new me(Y,N)}for(Y=R;0<=U.l(N);){for(V=Math.max(1,Math.floor(U.m()/N.m())),j=Math.ceil(Math.log(V)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),J=v(V),M=J.j(N);he(M)||0<M.l(U);)V-=j,J=v(V),M=J.j(N);H(J)&&(J=D),Y=Y.add(J),U=fe(U,M)}return new me(Y,U)}s.A=function(U){return De(this,U).h},s.and=function(U){for(var N=Math.max(this.g.length,U.g.length),V=[],j=0;j<N;j++)V[j]=this.i(j)&U.i(j);return new c(V,this.h&U.h)},s.or=function(U){for(var N=Math.max(this.g.length,U.g.length),V=[],j=0;j<N;j++)V[j]=this.i(j)|U.i(j);return new c(V,this.h|U.h)},s.xor=function(U){for(var N=Math.max(this.g.length,U.g.length),V=[],j=0;j<N;j++)V[j]=this.i(j)^U.i(j);return new c(V,this.h^U.h)};function Pe(U){for(var N=U.g.length+1,V=[],j=0;j<N;j++)V[j]=U.i(j)<<1|U.i(j-1)>>>31;return new c(V,U.h)}function je(U,N){var V=N>>5;N%=32;for(var j=U.g.length-V,Y=[],J=0;J<j;J++)Y[J]=0<N?U.i(J+V)>>>N|U.i(J+V+1)<<32-N:U.i(J+V);return new c(Y,U.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rw=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=S,lo=c}).apply(typeof AE<"u"?AE:typeof self<"u"?self:typeof window<"u"?window:{});var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iw,Cc,sw,Bf,fg,aw,ow,uw;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,T){return h==Array.prototype||h==Object.prototype||(h[E]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Af=="object"&&Af];for(var E=0;E<h.length;++E){var T=h[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,E){if(E)e:{var T=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var ne=h[C];if(!(ne in T))break e;T=T[ne]}h=h[h.length-1],C=T[h],E=E(C),E!=C&&E!=null&&e(T,h,{configurable:!0,writable:!0,value:E})}}function u(h,E){h instanceof String&&(h+="");var T=0,C=!1,ne={next:function(){if(!C&&T<h.length){var de=T++;return{value:E(de,h[de]),done:!1}}return C=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}a("Array.prototype.values",function(h){return h||function(){return u(this,function(E,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function y(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function v(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function S(h,E,T){return h.call.apply(h.bind,arguments)}function R(h,E,T){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,C),h.apply(E,ne)}}return function(){return h.apply(E,arguments)}}function D(h,E,T){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:R,D.apply(null,arguments)}function z(h,E){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function H(h,E){function T(){}T.prototype=E.prototype,h.aa=E.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(C,ne,de){for(var Ne=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Ne[vt-2]=arguments[vt];return E.prototype[ne].apply(C,Ne)}}function he(h){const E=h.length;if(0<E){const T=Array(E);for(let C=0;C<E;C++)T[C]=h[C];return T}return[]}function W(h,E){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(y(C)){const ne=h.length||0,de=C.length||0;h.length=ne+de;for(let Ne=0;Ne<de;Ne++)h[ne+Ne]=C[Ne]}else h.push(C)}}class fe{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function Ee(h){return/^[\s\xa0]*$/.test(h)}function me(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function De(h){return De[" "](h),h}De[" "]=function(){};var Pe=me().indexOf("Gecko")!=-1&&!(me().toLowerCase().indexOf("webkit")!=-1&&me().indexOf("Edge")==-1)&&!(me().indexOf("Trident")!=-1||me().indexOf("MSIE")!=-1)&&me().indexOf("Edge")==-1;function je(h,E,T){for(const C in h)E.call(T,h[C],C,h)}function U(h,E){for(const T in h)E.call(void 0,h[T],T,h)}function N(h){const E={};for(const T in h)E[T]=h[T];return E}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,E){let T,C;for(let ne=1;ne<arguments.length;ne++){C=arguments[ne];for(T in C)h[T]=C[T];for(let de=0;de<V.length;de++)T=V[de],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function Y(h){var E=1;h=h.split(":");const T=[];for(;0<E&&h.length;)T.push(h.shift()),E--;return h.length&&T.push(h.join(":")),T}function J(h){m.setTimeout(()=>{throw h},0)}function M(){var h=pt;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class Dn{constructor(){this.h=this.g=null}add(E,T){const C=Yt.get();C.set(E,T),this.h?this.h.next=C:this.g=C,this.h=C}}var Yt=new fe(()=>new pe,h=>h.reset());class pe{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Qe=!1,pt=new Dn,B=()=>{const h=m.Promise.resolve(void 0);Me=()=>{h.then(Te)}};var Te=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(T){J(T)}var E=Yt;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}Qe=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};m.addEventListener("test",T,E),m.removeEventListener("test",T,E)}catch{}return h}();function ct(h,E){if(Ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(Pe){e:{try{De(E.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(E=null)}}else T=="mouseover"?E=h.fromElement:T=="mouseout"&&(E=h.toElement);this.relatedTarget=E,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:et[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ct.aa.h.call(this)}}H(ct,Ie);var et={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var un="closure_listenable_"+(1e6*Math.random()|0),Bt=0;function Fe(h,E,T,C,ne){this.listener=h,this.proxy=null,this.src=E,this.type=T,this.capture=!!C,this.ha=ne,this.key=++Bt,this.da=this.fa=!1}function Di(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Sr(h){this.src=h,this.g={},this.h=0}Sr.prototype.add=function(h,E,T,C,ne){var de=h.toString();h=this.g[de],h||(h=this.g[de]=[],this.h++);var Ne=Br(h,E,C,ne);return-1<Ne?(E=h[Ne],T||(E.fa=!1)):(E=new Fe(E,this.src,de,!!C,ne),E.fa=T,h.push(E)),E};function Tt(h,E){var T=E.type;if(T in h.g){var C=h.g[T],ne=Array.prototype.indexOf.call(C,E,void 0),de;(de=0<=ne)&&Array.prototype.splice.call(C,ne,1),de&&(Di(E),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Br(h,E,T,C){for(var ne=0;ne<h.length;++ne){var de=h[ne];if(!de.da&&de.listener==E&&de.capture==!!T&&de.ha==C)return ne}return-1}var Rs="closure_lm_"+(1e6*Math.random()|0),zr={};function _u(h,E,T,C,ne){if(Array.isArray(E)){for(var de=0;de<E.length;de++)_u(h,E[de],T,C,ne);return null}return T=ts(T),h&&h[un]?h.K(E,T,v(C)?!!C.capture:!1,ne):Ar(h,E,T,!1,C,ne)}function Ar(h,E,T,C,ne,de){if(!E)throw Error("Invalid event type");var Ne=v(ne)?!!ne.capture:!!ne,vt=ai(h);if(vt||(h[Rs]=vt=new Sr(h)),T=vt.add(E,T,C,Ne,de),T.proxy)return T;if(C=kl(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)We||(ne=Ne),ne===void 0&&(ne=!1),h.addEventListener(E.toString(),C,ne);else if(h.attachEvent)h.attachEvent(Ln(E.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function kl(){function h(T){return E.call(h.src,h.listener,T)}const E=Eu;return h}function _o(h,E,T,C,ne){if(Array.isArray(E))for(var de=0;de<E.length;de++)_o(h,E[de],T,C,ne);else C=v(C)?!!C.capture:!!C,T=ts(T),h&&h[un]?(h=h.i,E=String(E).toString(),E in h.g&&(de=h.g[E],T=Br(de,T,C,ne),-1<T&&(Di(de[T]),Array.prototype.splice.call(de,T,1),de.length==0&&(delete h.g[E],h.h--)))):h&&(h=ai(h))&&(E=h.g[E.toString()],h=-1,E&&(h=Br(E,T,C,ne)),(T=-1<h?E[h]:null)&&es(T))}function es(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[un])Tt(E.i,h);else{var T=h.type,C=h.proxy;E.removeEventListener?E.removeEventListener(T,C,h.capture):E.detachEvent?E.detachEvent(Ln(T),C):E.addListener&&E.removeListener&&E.removeListener(C),(T=ai(E))?(Tt(T,h),T.h==0&&(T.src=null,E[Rs]=null)):Di(h)}}}function Ln(h){return h in zr?zr[h]:zr[h]="on"+h}function Eu(h,E){if(h.da)h=!0;else{E=new ct(E,this);var T=h.listener,C=h.ha||h.src;h.fa&&es(h),h=T.call(C,E)}return h}function ai(h){return h=h[Rs],h instanceof Sr?h:null}var fa="__closure_events_fn_"+(1e9*Math.random()>>>0);function ts(h){return typeof h=="function"?h:(h[fa]||(h[fa]=function(E){return h.handleEvent(E)}),h[fa])}function Pt(){Ue.call(this),this.i=new Sr(this),this.M=this,this.F=null}H(Pt,Ue),Pt.prototype[un]=!0,Pt.prototype.removeEventListener=function(h,E,T,C){_o(this,h,E,T,C)};function yt(h,E){var T,C=h.F;if(C)for(T=[];C;C=C.F)T.push(C);if(h=h.M,C=E.type||E,typeof E=="string")E=new Ie(E,h);else if(E instanceof Ie)E.target=E.target||h;else{var ne=E;E=new Ie(C,h),j(E,ne)}if(ne=!0,T)for(var de=T.length-1;0<=de;de--){var Ne=E.g=T[de];ne=Yn(Ne,C,!0,E)&&ne}if(Ne=E.g=h,ne=Yn(Ne,C,!0,E)&&ne,ne=Yn(Ne,C,!1,E)&&ne,T)for(de=0;de<T.length;de++)Ne=E.g=T[de],ne=Yn(Ne,C,!1,E)&&ne}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var T=h.g[E],C=0;C<T.length;C++)Di(T[C]);delete h.g[E],h.h--}}this.F=null},Pt.prototype.K=function(h,E,T,C){return this.i.add(String(h),E,!1,T,C)},Pt.prototype.L=function(h,E,T,C){return this.i.add(String(h),E,!0,T,C)};function Yn(h,E,T,C){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var ne=!0,de=0;de<E.length;++de){var Ne=E[de];if(Ne&&!Ne.da&&Ne.capture==T){var vt=Ne.listener,cn=Ne.ha||Ne.src;Ne.fa&&Tt(h.i,Ne),ne=vt.call(cn,C)!==!1&&ne}}return ne&&!C.defaultPrevented}function ln(h,E,T){if(typeof h=="function")T&&(h=D(h,T));else if(h&&typeof h.handleEvent=="function")h=D(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:m.setTimeout(h,E||0)}function da(h){h.g=ln(()=>{h.g=null,h.i&&(h.i=!1,da(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class ma extends Ue{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:da(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(h){Ue.call(this),this.h=h,this.g={}}H(pr,Ue);var oi=[];function Oi(h){je(h.g,function(E,T){this.g.hasOwnProperty(T)&&es(E)},h),h.g={}}pr.prototype.N=function(){pr.aa.N.call(this),Oi(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=m.JSON.stringify,qe=m.JSON.parse,jr=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function qr(){}qr.prototype.h=null;function ns(h){return h.h||(h.h=h.i())}function Le(){}var Fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ui(){Ie.call(this,"d")}H(ui,Ie);function xs(){Ie.call(this,"c")}H(xs,Ie);var Kr={},Cs=null;function rs(){return Cs=Cs||new Pt}Kr.La="serverreachability";function pa(h){Ie.call(this,Kr.La,h)}H(pa,Ie);function gr(h){const E=rs();yt(E,new pa(E))}Kr.STAT_EVENT="statevent";function Ni(h,E){Ie.call(this,Kr.STAT_EVENT,h),this.stat=E}H(Ni,Ie);function zt(h){const E=rs();yt(E,new Ni(E,h))}Kr.Ma="timingevent";function Zt(h,E){Ie.call(this,Kr.Ma,h),this.size=E}H(Zt,Ie);function ut(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},E)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function Eo(h,E,T,C,ne,de){h.info(function(){if(h.g)if(de)for(var Ne="",vt=de.split("&"),cn=0;cn<vt.length;cn++){var wt=vt[cn].split("=");if(1<wt.length){var gn=wt[0];wt=wt[1];var sn=gn.split("_");Ne=2<=sn.length&&sn[1]=="type"?Ne+(gn+"="+wt+"&"):Ne+(gn+"=redacted&")}}else Ne=null;else Ne=de;return"XMLHTTP REQ ("+C+") [attempt "+ne+"]: "+E+`
`+T+`
`+Ne})}function ga(h,E,T,C,ne,de,Ne){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+ne+"]: "+E+`
`+T+`
`+de+" "+Ne})}function Hr(h,E,T,C){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Os(h,T)+(C?" "+C:"")})}function Ds(h,E){h.info(function(){return"TIMEOUT: "+E})}Ot.prototype.info=function(){};function Os(h,E){if(!h.g)return E;if(!E)return null;try{var T=JSON.parse(E);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var C=T[h];if(!(2>C.length)){var ne=C[1];if(Array.isArray(ne)&&!(1>ne.length)){var de=ne[0];if(de!="noop"&&de!="stop"&&de!="close")for(var Ne=1;Ne<ne.length;Ne++)ne[Ne]=""}}}}return wn(T)}catch{return E}}var $n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},On;function yr(){}H(yr,qr),yr.prototype.g=function(){return new XMLHttpRequest},yr.prototype.i=function(){return{}},On=new yr;function Xn(h,E,T,C){this.j=h,this.i=E,this.l=T,this.R=C||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vt}function Vt(){this.i=null,this.g="",this.h=!1}var ya={},Ir={};function Rr(h,E,T){h.L=1,h.v=ss(Bn(E)),h.m=T,h.P=!0,Gr(h,null)}function Gr(h,E){h.F=Date.now(),Wn(h),h.A=Bn(h.v);var T=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),sr(T.i,"t",C),h.C=0,T=h.j.J,h.h=new Vt,h.g=Ia(h.j,T?E:null,!h.m),0<h.O&&(h.M=new ma(D(h.Y,h,h.g),h.O)),E=h.U,T=h.g,C=h.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(oi[0]=ne.toString()),ne=oi);for(var de=0;de<ne.length;de++){var Ne=_u(T,ne[de],C||E.handleEvent,!1,E.h||E);if(!Ne)break;E.g[Ne.key]=Ne}E=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),gr(),Eo(h.i,h.u,h.A,h.l,h.R,h.m)}Xn.prototype.ca=function(h){h=h.target;const E=this.M;E&&or(h)==3?E.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)e:{const sn=or(this.g);var E=this.g.Ba();const _i=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ta(this.g)))){this.J||sn!=4||E==7||(E==8||0>=_i?gr(3):gr(2)),vr(this);var T=this.g.Z();this.X=T;t:if($t(this)){var C=Ta(this.g);h="";var ne=C.length,de=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),_r(this);var Ne="";break t}this.h.i=new m.TextDecoder}for(E=0;E<ne;E++)this.h.h=!0,h+=this.h.i.decode(C[E],{stream:!(de&&E==ne-1)});C.length=0,this.h.g+=h,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=T==200,ga(this.i,this.u,this.A,this.l,this.R,sn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,cn=this.g;if((vt=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ee(vt)){var wt=vt;break t}}wt=null}if(T=wt)Hr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pi(this,T);else{this.o=!1,this.s=3,zt(12),mn(this),_r(this);break e}}if(this.P){T=!0;let An;for(;!this.J&&this.C<Ne.length;)if(An=li(this,Ne),An==Ir){sn==4&&(this.s=4,zt(14),T=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(An==ya){this.s=4,zt(15),Hr(this.i,this.l,Ne,"[Invalid Chunk]"),T=!1;break}else Hr(this.i,this.l,An,null),Pi(this,An);if($t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||Ne.length!=0||this.h.h||(this.s=1,zt(16),T=!1),this.o=this.o&&T,!T)Hr(this.i,this.l,Ne,"[Invalid Chunked Response]"),mn(this),_r(this);else if(0<Ne.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),Xr(gn),gn.M=!0,zt(11))}}else Hr(this.i,this.l,Ne,null),Pi(this,Ne);sn==4&&mn(this),this.o&&!this.J&&(sn==4?xo(this.j,this):(this.o=!1,Wn(this)))}else bu(this.g),T==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),mn(this),_r(this)}}}catch{}finally{}};function $t(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function li(h,E){var T=h.C,C=E.indexOf(`
`,T);return C==-1?Ir:(T=Number(E.substring(T,C)),isNaN(T)?ya:(C+=1,C+T>E.length?Ir:(E=E.slice(C,C+T),h.C=C+T,E)))}Xn.prototype.cancel=function(){this.J=!0,mn(this)};function Wn(h){h.S=Date.now()+h.I,bo(h,h.I)}function bo(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ut(D(h.ba,h),E)}function vr(h){h.B&&(m.clearTimeout(h.B),h.B=null)}Xn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ds(this.i,this.A),this.L!=2&&(gr(),zt(17)),mn(this),this.s=2,_r(this)):bo(this,this.S-h)};function _r(h){h.j.G==0||h.J||xo(h.j,h)}function mn(h){vr(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,Oi(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function Pi(h,E){try{var T=h.j;if(T.G!=0&&(T.g==h||ht(T.h,h))){if(!h.K&&ht(T.h,h)&&T.G==3){try{var C=T.Da.g.parse(E)}catch{C=null}if(Array.isArray(C)&&C.length==3){var ne=C;if(ne[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)Ki(T),Ms(T);else break e;Fi(T),zt(18)}}else T.za=ne[1],0<T.za-T.T&&37500>ne[2]&&T.F&&T.v==0&&!T.C&&(T.C=ut(D(T.Za,T),6e3));if(1>=Ns(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Pr(T,11)}else if((h.K||T.g==h)&&Ki(T),!Ee(E))for(ne=T.Da.g.parse(E),E=0;E<ne.length;E++){let wt=ne[E];if(T.T=wt[0],wt=wt[1],T.G==2)if(wt[0]=="c"){T.K=wt[1],T.ia=wt[2];const gn=wt[3];gn!=null&&(T.la=gn,T.j.info("VER="+T.la));const sn=wt[4];sn!=null&&(T.Aa=sn,T.j.info("SVER="+T.Aa));const _i=wt[5];_i!=null&&typeof _i=="number"&&0<_i&&(C=1.5*_i,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const An=h.g;if(An){const Ei=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var de=C.h;de.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Ps(de,de.h),de.h=null))}if(C.D){const Do=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(C.ya=Do,It(C.I,C.D,Do))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var Ne=h;if(C.qa=vi(C,C.J?C.ia:null,C.W),Ne.K){Un(C.h,Ne);var vt=Ne,cn=C.L;cn&&(vt.I=cn),vt.B&&(vr(vt),Wn(vt)),C.g=Ne}else pn(C);0<T.i.length&&ji(T)}else wt[0]!="stop"&&wt[0]!="close"||Pr(T,7);else T.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Pr(T,7):ls(T):wt[0]!="noop"&&T.l&&T.l.ta(wt),T.v=0)}}gr(4)}catch{}}var ci=class{constructor(h,E){this.g=h,this.map=E}};function hi(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ns(h){return h.h?1:h.g?h.g.size:0}function ht(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Ps(h,E){h.g?h.g.add(E):h.h=E}function Un(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}hi.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function va(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const T of h.g.values())E=E.concat(T.D);return E}return he(h.i)}function kt(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var E=[],T=h.length,C=0;C<T;C++)E.push(h[C]);return E}E=[],T=0;for(C in h)E[T++]=h[C];return E}function fi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var E=[];h=h.length;for(var T=0;T<h;T++)E.push(T);return E}E=[],T=0;for(const C in h)E[T++]=C;return E}}}function ki(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var T=fi(h),C=kt(h),ne=C.length,de=0;de<ne;de++)E.call(void 0,C[de],T&&T[de],h)}var xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function To(h,E){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var C=h[T].indexOf("="),ne=null;if(0<=C){var de=h[T].substring(0,C);ne=h[T].substring(C+1)}else de=h[T];E(de,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function en(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof en){this.h=h.h,is(this,h.j),this.o=h.o,this.g=h.g,Qr(this,h.s),this.l=h.l;var E=h.i,T=new zn;T.i=E.i,E.g&&(T.g=new Map(E.g),T.h=E.h),di(this,T),this.m=h.m}else h&&(E=String(h).match(xr))?(this.h=!1,is(this,E[1]||"",!0),this.o=Cr(E[2]||""),this.g=Cr(E[3]||"",!0),Qr(this,E[4]),this.l=Cr(E[5]||"",!0),di(this,E[6]||"",!0),this.m=Cr(E[7]||"")):(this.h=!1,this.i=new zn(null,this.h))}en.prototype.toString=function(){var h=[],E=this.j;E&&h.push(dt(E,wo,!0),":");var T=this.g;return(T||E=="file")&&(h.push("//"),(E=this.o)&&h.push(dt(E,wo,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(dt(T,T.charAt(0)=="/"?Jn:So,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",dt(T,Mi)),h.join("")};function Bn(h){return new en(h)}function is(h,E,T){h.j=T?Cr(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Qr(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function di(h,E,T){E instanceof zn?(h.i=E,os(h.i,h.h)):(T||(E=dt(E,as)),h.i=new zn(E,h.h))}function It(h,E,T){h.i.set(E,T)}function ss(h){return It(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Cr(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dt(h,E,T){return typeof h=="string"?(h=encodeURI(h).replace(E,_a),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _a(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var wo=/[#\/\?@]/g,So=/[#\?:]/g,Jn=/[#\?]/g,as=/[#\?@]/g,Mi=/#/g;function zn(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Er(h){h.g||(h.g=new Map,h.h=0,h.i&&To(h.i,function(E,T){h.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}s=zn.prototype,s.add=function(h,E){Er(this),this.i=null,h=ar(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(E),this.h+=1,this};function mi(h,E){Er(h),E=ar(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function jt(h,E){return Er(h),E=ar(h,E),h.g.has(E)}s.forEach=function(h,E){Er(this),this.g.forEach(function(T,C){T.forEach(function(ne){h.call(E,ne,C,this)},this)},this)},s.na=function(){Er(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),T=[];for(let C=0;C<E.length;C++){const ne=h[C];for(let de=0;de<ne.length;de++)T.push(E[C])}return T},s.V=function(h){Er(this);let E=[];if(typeof h=="string")jt(this,h)&&(E=E.concat(this.g.get(ar(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)E=E.concat(h[T])}return E},s.set=function(h,E){return Er(this),this.i=null,h=ar(this,h),jt(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},s.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function sr(h,E,T){mi(h,E),0<T.length&&(h.i=null,h.g.set(ar(h,E),he(T)),h.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var T=0;T<E.length;T++){var C=E[T];const de=encodeURIComponent(String(C)),Ne=this.V(C);for(C=0;C<Ne.length;C++){var ne=de;Ne[C]!==""&&(ne+="="+encodeURIComponent(String(Ne[C]))),h.push(ne)}}return this.i=h.join("&")};function ar(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function os(h,E){E&&!h.j&&(Er(h),h.i=null,h.g.forEach(function(T,C){var ne=C.toLowerCase();C!=ne&&(mi(this,C),sr(this,ne,T))},h)),h.j=E}function Li(h,E){const T=new Ot;if(m.Image){const C=new Image;C.onload=z(Dr,T,"TestLoadImage: loaded",!0,E,C),C.onerror=z(Dr,T,"TestLoadImage: error",!1,E,C),C.onabort=z(Dr,T,"TestLoadImage: abort",!1,E,C),C.ontimeout=z(Dr,T,"TestLoadImage: timeout",!1,E,C),m.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else E(!1)}function Sn(h,E){const T=new Ot,C=new AbortController,ne=setTimeout(()=>{C.abort(),Dr(T,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:C.signal}).then(de=>{clearTimeout(ne),de.ok?Dr(T,"TestPingServer: ok",!0,E):Dr(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(ne),Dr(T,"TestPingServer: error",!1,E)})}function Dr(h,E,T,C,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),C(T)}catch{}}function jn(){this.g=new jr}function Or(h,E,T){const C=T||"";try{ki(h,function(ne,de){let Ne=ne;v(ne)&&(Ne=wn(ne)),E.push(C+de+"="+encodeURIComponent(Ne))})}catch(ne){throw E.push(C+"type="+encodeURIComponent("_badmap")),ne}}function Ui(h){this.l=h.Ub||null,this.j=h.eb||!1}H(Ui,qr),Ui.prototype.g=function(){return new Yr(this.l,this.j)},Ui.prototype.i=function(h){return function(){return h}}({});function Yr(h,E){Pt.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Yr,Pt),s=Yr.prototype,s.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,$r(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||m).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nr(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Nr(this):$r(this),this.readyState==3&&Bi(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,Nr(this))},s.Qa=function(h){this.g&&(this.response=h,Nr(this))},s.ga=function(){this.g&&Nr(this)};function Nr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,$r(h)}s.setRequestHeader=function(h,E){this.u.append(h,E)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=E.next();return h.join(`\r
`)};function $r(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ao(h){let E="";return je(h,function(T,C){E+=C,E+=":",E+=T,E+=`\r
`}),E}function tn(h,E,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Ao(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):It(h,E,T))}function Ct(h){Pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(Ct,Pt);var Ea=/^https?$/i,pi=["POST","PUT"];s=Ct.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,E,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():On.g(),this.v=this.o?ns(this.o):ns(On),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(de){Vs(this,de);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var ne in C)T.set(ne,C[ne]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const de of C.keys())T.set(de,C.get(de));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(de=>de.toLowerCase()=="content-type"),ne=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(pi,E,void 0))||C||ne||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ne]of T)this.g.setRequestHeader(de,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(h),this.u=!1}catch(de){Vs(this,de)}};function Vs(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,us(h),gi(h)}function us(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,yt(this,"complete"),yt(this,"abort"),gi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),Ct.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ba(this):this.bb())},s.bb=function(){ba(this)};function ba(h){if(h.h&&typeof c<"u"&&(!h.v[1]||or(h)!=4||h.Z()!=2)){if(h.u&&or(h)==4)ln(h.Ea,0,h);else if(yt(h,"readystatechange"),or(h)==4){h.h=!1;try{const Ne=h.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var C;if(C=Ne===0){var ne=String(h.D).match(xr)[1]||null;!ne&&m.self&&m.self.location&&(ne=m.self.location.protocol.slice(0,-1)),C=!Ea.test(ne?ne.toLowerCase():"")}T=C}if(T)yt(h,"complete"),yt(h,"success");else{h.m=6;try{var de=2<or(h)?h.g.statusText:""}catch{de=""}h.l=de+" ["+h.Z()+"]",us(h)}}finally{gi(h)}}}}function gi(h,E){if(h.g){ks(h);const T=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||yt(h,"ready");try{T.onreadystatechange=C}catch{}}}function ks(h){h.I&&(m.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),qe(E)}};function Ta(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function bu(h){const E={};h=(h.g&&2<=or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(Ee(h[C]))continue;var T=Y(h[C]);const ne=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const de=E[ne]||[];E[ne]=de,de.push(T)}U(E,function(C){return C.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(h,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||E}function zi(h){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,h),this.cb=yi("retryDelaySeedMs",1e4,h),this.Wa=yi("forwardChannelMaxRetries",2,h),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new hi(h&&h.concurrentRequestLimit),this.Da=new jn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=zi.prototype,s.la=8,s.G=1,s.connect=function(h,E,T,C){zt(0),this.W=h,this.H=E||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=vi(this,null,this.W),ji(this)};function ls(h){if(Tu(h),h.G==3){var E=h.U++,T=Bn(h.I);if(It(T,"SID",h.K),It(T,"RID",E),It(T,"TYPE","terminate"),qi(h,T),E=new Xn(h,h.j,E),E.L=2,E.v=ss(Bn(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(E.v.toString(),"")}catch{}!T&&m.Image&&(new Image().src=E.v,T=!0),T||(E.g=Ia(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Wn(E)}Aa(h)}function Ms(h){h.g&&(Xr(h),h.g.cancel(),h.g=null)}function Tu(h){Ms(h),h.u&&(m.clearTimeout(h.u),h.u=null),Ki(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function ji(h){if(!Vi(h.h)&&!h.s){h.s=!0;var E=h.Ga;Me||B(),Qe||(Me(),Qe=!0),pt.add(E,h),h.B=0}}function Io(h,E){return Ns(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ut(D(h.Ga,h,E),Sa(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ne=new Xn(this,this.j,h);let de=this.o;if(this.S&&(de?(de=N(de),j(de,this.S)):de=this.S),this.m!==null||this.O||(ne.H=de,de=null),this.P)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(E+=C,4096<E){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=wa(this,ne,E),T=Bn(this.I),It(T,"RID",h),It(T,"CVER",22),this.D&&It(T,"X-HTTP-Session-Id",this.D),qi(this,T),de&&(this.O?E="headers="+encodeURIComponent(String(Ao(de)))+"&"+E:this.m&&tn(T,this.m,de)),Ps(this.h,ne),this.Ua&&It(T,"TYPE","init"),this.P?(It(T,"$req",E),It(T,"SID","null"),ne.T=!0,Rr(ne,T,null)):Rr(ne,T,E),this.G=2}}else this.G==3&&(h?Ls(this,h):this.i.length==0||Vi(this.h)||Ls(this))};function Ls(h,E){var T;E?T=E.l:T=h.U++;const C=Bn(h.I);It(C,"SID",h.K),It(C,"RID",T),It(C,"AID",h.T),qi(h,C),h.m&&h.o&&tn(C,h.m,h.o),T=new Xn(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),E&&(h.i=E.D.concat(h.i)),E=wa(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ps(h.h,T),Rr(T,C,E)}function qi(h,E){h.H&&je(h.H,function(T,C){It(E,C,T)}),h.l&&ki({},function(T,C){It(E,C,T)})}function wa(h,E,T){T=Math.min(h.i.length,T);var C=h.l?D(h.l.Na,h.l,h):null;e:{var ne=h.i;let de=-1;for(;;){const Ne=["count="+T];de==-1?0<T?(de=ne[0].g,Ne.push("ofs="+de)):de=0:Ne.push("ofs="+de);let vt=!0;for(let cn=0;cn<T;cn++){let wt=ne[cn].g;const gn=ne[cn].map;if(wt-=de,0>wt)de=Math.max(0,ne[cn].g-100),vt=!1;else try{Or(gn,Ne,"req"+wt+"_")}catch{C&&C(gn)}}if(vt){C=Ne.join("&");break e}}}return h=h.i.splice(0,T),E.D=h,C}function pn(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;Me||B(),Qe||(Me(),Qe=!0),pt.add(E,h),h.v=0}}function Fi(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ut(D(h.Fa,h),Sa(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Ro(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ut(D(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Ms(this),Ro(this))};function Xr(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function Ro(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=Bn(h.qa);It(E,"RID","rpc"),It(E,"SID",h.K),It(E,"AID",h.T),It(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&It(E,"TO",h.ja),It(E,"TYPE","xmlhttp"),qi(h,E),h.m&&h.o&&tn(E,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=ss(Bn(E)),T.m=null,T.P=!0,Gr(T,h)}s.Za=function(){this.C!=null&&(this.C=null,Ms(this),Fi(this),zt(19))};function Ki(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function xo(h,E){var T=null;if(h.g==E){Ki(h),Xr(h),h.g=null;var C=2}else if(ht(h.h,E))T=E.D,Un(h.h,E),C=1;else return;if(h.G!=0){if(E.o)if(C==1){T=E.m?E.m.length:0,E=Date.now()-E.F;var ne=h.B;C=rs(),yt(C,new Zt(C,T)),ji(h)}else pn(h);else if(ne=E.s,ne==3||ne==0&&0<E.X||!(C==1&&Io(h,E)||C==2&&Fi(h)))switch(T&&0<T.length&&(E=h.h,E.i=E.i.concat(T)),ne){case 1:Pr(h,5);break;case 4:Pr(h,10);break;case 3:Pr(h,6);break;default:Pr(h,2)}}}function Sa(h,E){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*E}function Pr(h,E){if(h.j.info("Error code "+E),E==2){var T=D(h.fb,h),C=h.Xa;const ne=!C;C=new en(C||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||is(C,"https"),ss(C),ne?Li(C.toString(),T):Sn(C.toString(),T)}else zt(2);h.G=0,h.l&&h.l.sa(E),Aa(h),Tu(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Aa(h){if(h.G=0,h.ka=[],h.l){const E=va(h.h);(E.length!=0||h.i.length!=0)&&(W(h.ka,E),W(h.ka,h.i),h.h.i.length=0,he(h.i),h.i.length=0),h.l.ra()}}function vi(h,E,T){var C=T instanceof en?Bn(T):new en(T);if(C.g!="")E&&(C.g=E+"."+C.g),Qr(C,C.s);else{var ne=m.location;C=ne.protocol,E=E?E+"."+ne.hostname:ne.hostname,ne=+ne.port;var de=new en(null);C&&is(de,C),E&&(de.g=E),ne&&Qr(de,ne),T&&(de.l=T),C=de}return T=h.D,E=h.ya,T&&E&&It(C,T,E),It(C,"VER",h.la),qi(h,C),C}function Ia(h,E,T){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new Ct(new Ui({eb:T})):new Ct(h.pa),E.Ha(h.J),E}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ra(){}s=Ra.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Hi(){}Hi.prototype.g=function(h,E){return new Nn(h,E)};function Nn(h,E){Pt.call(this),this.g=new zi(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!Ee(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!Ee(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Vr(this)}H(Nn,Pt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){ls(this.g)},Nn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=wn(h),h=T);E.i.push(new ci(E.Ya++,h)),E.G==3&&ji(E)},Nn.prototype.N=function(){this.g.l=null,delete this.j,ls(this.g),delete this.g,Nn.aa.N.call(this)};function Co(h){ui.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const T in E){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}H(Co,ui);function wu(){xs.call(this),this.status=1}H(wu,xs);function Vr(h){this.g=h}H(Vr,Ra),Vr.prototype.ua=function(){yt(this.g,"a")},Vr.prototype.ta=function(h){yt(this.g,new Co(h))},Vr.prototype.sa=function(h){yt(this.g,new wu)},Vr.prototype.ra=function(){yt(this.g,"b")},Hi.prototype.createWebChannel=Hi.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,uw=function(){return new Hi},ow=function(){return rs()},aw=Kr,fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,Bf=$n,ir.COMPLETE="complete",sw=ir,Le.EventType=Fr,Fr.OPEN="a",Fr.CLOSE="b",Fr.ERROR="c",Fr.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Cc=Le,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,iw=Ct}).apply(typeof Af<"u"?Af:typeof self<"u"?self:typeof window<"u"?window:{});const IE="@firebase/firestore",RE="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Hg("@firebase/firestore");function tl(){return uu.logLevel}function Ae(s,...e){if(uu.logLevel<=St.DEBUG){const t=e.map(sy);uu.debug(`Firestore (${Ol}): ${s}`,...t)}}function En(s,...e){if(uu.logLevel<=St.ERROR){const t=e.map(sy);uu.error(`Firestore (${Ol}): ${s}`,...t)}}function Hc(s,...e){if(uu.logLevel<=St.WARN){const t=e.map(sy);uu.warn(`Firestore (${Ol}): ${s}`,...t)}}function sy(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,lw(s,r,t)}function lw(s,e,t){let r=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw En(r),new Error(r)}function $e(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||lw(e,a,r)}function Ye(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class gD{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const a=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let u=new co;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new co,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new co)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new mD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class yD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _D{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const a=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=ED(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<t&&(r+=e.charAt(a[u]%62))}return r}}function at(s,e){return s<e?-1:s>e?1:0}function dg(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return at(r,a);{const u=cw(),c=bD(u.encode(CE(s,t)),u.encode(CE(e,t)));return c!==0?c:at(r,a)}}t+=r>65535?2:1}return at(s.length,e.length)}function CE(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function bD(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return at(s[t],e[t]);return at(s.length,e.length)}function fl(s,e,t){return s.length===e.length&&s.every((r,a)=>t(r,e[a]))}function fw(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=-62135596800,OE=1e6;class Qn{static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*OE);return new Qn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DE)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OE}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-DE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Qn(0,0))}static max(){return new Ze(new Qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="__name__";class ys{constructor(e,t,r){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&He(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ys?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const u=ys.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return at(e.length,t.length)}static compareSegments(e,t){const r=ys.isNumericId(e),a=ys.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?ys.extractNumericId(e).compare(ys.extractNumericId(t)):dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lo.fromString(e.substring(4,e.length-2))}}class Qt extends ys{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const TD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends ys{construct(e,t,r){return new bn(e,t,r)}static isValidIdentifier(e){return TD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NE}static keyField(){return new bn([NE])}static fromServerFormat(e){const t=[];let r="",a=0;const u=()=>{if(r.length===0)throw new Ge(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new Ge(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ge(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(r+=m,a++):(u(),a++)}if(u(),c)throw new Ge(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(t)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Qt.fromString(e))}static fromName(e){return new Be(Qt.fromString(e).popFirst(5))}static empty(){return new Be(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=-1;class rd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function mg(s){return s.fields.find(e=>e.kind===2)}function Qo(s){return s.fields.filter(e=>e.kind!==2)}rd.UNKNOWN_ID=-1;class zf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gc(0,si.min())}}function dw(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ze.fromTimestamp(r===1e9?new Qn(t+1,0):new Qn(t,r));return new si(a,Be.empty(),e)}function mw(s){return new si(s.readTime,s.key,dl)}class si{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new si(Ze.min(),Be.empty(),dl)}static max(){return new si(Ze.max(),Be.empty(),dl)}}function ay(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(s.documentKey,e.documentKey),t!==0?t:at(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(s){if(s.code!==we.FAILED_PRECONDITION||s.message!==pw)throw s;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let a=0,u=0,c=!1;e.forEach(m=>{++a,m.next(()=>{++u,c&&u===a&&t()},y=>r(y))}),c=!0,u===a&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(a=>a?re.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,u)=>{r.push(t.call(this,a,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,a)=>{const u=e.length,c=new Array(u);let m=0;for(let y=0;y<u;y++){const v=y;t(e[v]).next(S=>{c[v]=S,++m,m===u&&r(c)},S=>a(S))}})}static doWhile(e,t){return new re((r,a)=>{const u=()=>{e()===!0?t().next(()=>{u()},a):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="SimpleDb";class Od{static open(e,t,r,a){try{return new Od(t,e.transaction(a,r))}catch(u){throw new kc(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new co,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new kc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=oy(r.target.error);this.S.reject(new kc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ae(ri,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SD(t)}}class ho{static delete(e){return Ae(ri,"Removing database:",e),$o(pT().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!ET())return!1;if(ho.F())return!0;const e=kn(),t=ho.M(e),r=0<t&&t<10,a=yw(e),u=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,ho.M(kn())===12.2&&En("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ae(ri,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=u=>{const c=u.target.result;t(c)},a.onblocked=()=>{r(new kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new Ge(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new Ge(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new kc(e,c))},a.onupgradeneeded=u=>{Ae(ri,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;if(this.L!==null&&this.L!==u.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${u.oldVersion}, event.newVersion=${u.newVersion}, db.version=${c.version}`);this.B.q(c,a.transaction,u.oldVersion,this.version).next(()=>{Ae(ri,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const m=Od.open(this.db,e,u?"readonly":"readwrite",r),y=a(m).next(v=>(m.v(),v)).catch(v=>(m.abort(v),re.reject(v))).toPromise();return y.catch(()=>{}),await m.D,y}catch(m){const y=m,v=y.name!=="FirebaseError"&&c<3;if(Ae(ri,"Transaction failed with error:",y.message,"Retrying:",v),this.close(),!v)return Promise.reject(y)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yw(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class wD{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return $o(this.K.delete())}}class kc extends Ge{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vo(s){return s.name==="IndexedDbTransactionError"}class SD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ae(ri,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae(ri,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$o(r)}add(e){return Ae(ri,"ADD",this.store.name,e,e),$o(this.store.add(e))}get(e){return $o(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ae(ri,"GET",this.store.name,e,t),t))}delete(e){return Ae(ri,"DELETE",this.store.name,e),$o(this.store.delete(e))}count(){return Ae(ri,"COUNT",this.store.name),$o(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const u=a.getAll(r.range);return new re((c,m)=>{u.onerror=y=>{m(y.target.error)},u.onsuccess=y=>{c(y.target.result)}})}{const u=this.cursor(r),c=[];return this.Y(u,(m,y)=>{c.push(y)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new re((a,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}X(e,t){Ae(ri,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const a=this.cursor(r);return this.Y(a,(u,c,m)=>m.delete())}te(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Y(a,t)}ne(e){const t=this.cursor({});return new re((r,a)=>{t.onerror=u=>{const c=oy(u.target.error);a(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}Y(e,t){const r=[];return new re((a,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void a();const y=new wD(m),v=t(m.primaryKey,m.value,y);if(v instanceof re){const S=v.catch(R=>(y.done(),re.reject(R)));r.push(S)}y.isDone?a():y.j===null?m.continue():m.continue(y.j)}}).next(()=>re.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $o(s){return new re((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=oy(r.target.error);t(a)}})}let PE=!1;function oy(s){const e=ho.M(kn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PE||(PE=!0,setTimeout(()=>{throw r},0)),r}}return s}const Mc="IndexBackfiller";class AD{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Ae(Mc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Ae(Mc,`Documents written: ${t}`)}catch(t){vo(t)?Ae(Mc,"Ignoring IndexedDB error during index backfill: ",t):await yo(t)}await this.ie(6e4)})}}class ID{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let a=t,u=!0;return re.doWhile(()=>u===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Ae(Mc,`Processing collection: ${c}`),this._e(e,c,a).next(m=>{a-=m,r.add(c)});u=!1})).next(()=>t-a)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(a,u)).next(m=>(Ae(Mc,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((a,u)=>{const c=mw(u);ay(c,r)>0&&(r=c)}),new si(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ur.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function Nd(s){return s==null}function Qc(s){return s===0&&1/s==-1/0}function RD(s){return typeof s=="number"&&Number.isInteger(s)&&!Qc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="";function mr(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=VE(e)),e=xD(s.get(t),e);return VE(e)}function xD(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const u=s.charAt(a);switch(u){case"\0":t+="";break;case id:t+="";break;default:t+=u}}return t}function VE(s){return s+id+""}function Es(s){const e=s.length;if($e(e>=2,64408,{path:s}),e===2)return $e(s.charAt(0)===id&&s.charAt(1)==="",56145,{path:s}),Qt.emptyPath();const t=e-2,r=[];let a="";for(let u=0;u<e;){const c=s.indexOf(id,u);switch((c<0||c>t)&&He(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let y;a.length===0?y=m:(a+=m,y=a,a=""),r.push(y);break;case"":a+=s.substring(u,c),a+="\0";break;case"":a+=s.substring(u,c+1);break;default:He(61167,{path:s})}u=c+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="remoteDocuments",ph="owner",$u="owner",Yc="mutationQueues",CD="userId",$i="mutations",kE="batchId",eu="userMutationsIndex",ME=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(s,e){return[s,mr(e)]}function vw(s,e,t){return[s,mr(e),t]}const DD={},ml="documentMutations",sd="remoteDocumentsV14",OD=["prefixPath","collectionGroup","readTime","documentId"],qf="documentKeyIndex",ND=["prefixPath","collectionGroup","documentId"],_w="collectionGroupIndex",PD=["collectionGroup","readTime","prefixPath","documentId"],$c="remoteDocumentGlobal",pg="remoteDocumentGlobalKey",pl="targets",Ew="queryTargetsIndex",VD=["canonicalId","targetId"],gl="targetDocuments",kD=["targetId","path"],uy="documentTargetsIndex",MD=["path","targetId"],ad="targetGlobalKey",ru="targetGlobal",Xc="collectionParents",LD=["collectionId","parent"],yl="clientMetadata",UD="clientId",Pd="bundles",BD="bundleId",Vd="namedQueries",zD="name",ly="indexConfiguration",jD="indexId",gg="collectionGroupIndex",qD="collectionGroup",od="indexState",FD=["indexId","uid"],bw="sequenceNumberIndex",KD=["uid","sequenceNumber"],ud="indexEntries",HD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tw="documentKeyIndex",GD=["indexId","uid","orderedDocumentKey"],kd="documentOverlays",QD=["userId","collectionPath","documentId"],yg="collectionPathOverlayIndex",YD=["userId","collectionPath","largestBatchId"],ww="collectionGroupOverlayIndex",$D=["userId","collectionGroup","largestBatchId"],cy="globals",XD="name",Sw=[Yc,$i,ml,Yo,pl,ph,ru,gl,yl,$c,Xc,Pd,Vd],WD=[...Sw,kd],Aw=[Yc,$i,ml,sd,pl,ph,ru,gl,yl,$c,Xc,Pd,Vd,kd],Iw=Aw,hy=[...Iw,ly,od,ud],JD=hy,ZD=[...hy,cy];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends gw{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Mn(s,e){const t=Ye(s);return ho.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function gh(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function eO(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new Jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new If(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new If(this.root,e,this.comparator,!1)}getReverseIterator(){return new If(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new If(this.root,e,this.comparator,!0)}}class If{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,t,r,a,u){this.key=e,this.value=t,this.color=r??rr.RED,this.left=a??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,u){return new rr(e??this.key,t??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const u=r(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,r),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,r,a,u){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UE(this.data.getIterator())}getIteratorFrom(e){return new UE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class UE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xu(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new ea([])}unionWith(e){let t=new Ut(bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ea(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Rw("Invalid base64 string: "+u):u}}(e);return new Tn(t)}static fromUint8Array(e){const t=function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u}(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const tO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oa(s){if($e(!!s,39018),typeof s=="string"){let e=0;const t=tO.exec(s);if($e(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(s.seconds),nanos:rn(s.nanos)}}function rn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ua(s){return typeof s=="string"?Tn.fromBase64String(s):Tn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="server_timestamp",Cw="__type__",Dw="__previous_value__",Ow="__local_write_time__";function fy(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cw])===null||t===void 0?void 0:t.stringValue)===xw}function Md(s){const e=s.mapValue.fields[Dw];return fy(e)?Md(e):e}function Wc(s){const e=oa(s.mapValue.fields[Ow].timestampValue);return new Qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,t,r,a,u,c,m,y,v,S){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=S}}const ld="(default)";class lu{constructor(e,t){this.projectId=e,this.database=t||ld}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===ld}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="__type__",Pw="__max__",so={mapValue:{fields:{__type__:{stringValue:Pw}}}},Vw="__vector__",Jc="value",Ff={nullValue:"NULL_VALUE"};function fo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?fy(s)?4:kw(s)?9007199254740991:Ld(s)?10:11:He(28295,{value:s})}function As(s,e){if(s===e)return!0;const t=fo(s);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Wc(s).isEqual(Wc(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=oa(a.timestampValue),m=oa(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(a,u){return ua(a.bytesValue).isEqual(ua(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,u){return rn(a.geoPointValue.latitude)===rn(u.geoPointValue.latitude)&&rn(a.geoPointValue.longitude)===rn(u.geoPointValue.longitude)}(s,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return rn(a.integerValue)===rn(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=rn(a.doubleValue),m=rn(u.doubleValue);return c===m?Qc(c)===Qc(m):isNaN(c)&&isNaN(m)}return!1}(s,e);case 9:return fl(s.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return function(a,u){const c=a.mapValue.fields||{},m=u.mapValue.fields||{};if(LE(c)!==LE(m))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(m[y]===void 0||!As(c[y],m[y])))return!1;return!0}(s,e);default:return He(52216,{left:s})}}function Zc(s,e){return(s.values||[]).find(t=>As(t,e))!==void 0}function mo(s,e){if(s===e)return 0;const t=fo(s),r=fo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(s.booleanValue,e.booleanValue);case 2:return function(u,c){const m=rn(u.integerValue||u.doubleValue),y=rn(c.integerValue||c.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(s,e);case 3:return BE(s.timestampValue,e.timestampValue);case 4:return BE(Wc(s),Wc(e));case 5:return dg(s.stringValue,e.stringValue);case 6:return function(u,c){const m=ua(u),y=ua(c);return m.compareTo(y)}(s.bytesValue,e.bytesValue);case 7:return function(u,c){const m=u.split("/"),y=c.split("/");for(let v=0;v<m.length&&v<y.length;v++){const S=at(m[v],y[v]);if(S!==0)return S}return at(m.length,y.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,c){const m=at(rn(u.latitude),rn(c.latitude));return m!==0?m:at(rn(u.longitude),rn(c.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return zE(s.arrayValue,e.arrayValue);case 10:return function(u,c){var m,y,v,S;const R=u.fields||{},D=c.fields||{},z=(m=R[Jc])===null||m===void 0?void 0:m.arrayValue,H=(y=D[Jc])===null||y===void 0?void 0:y.arrayValue,he=at(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((S=H==null?void 0:H.values)===null||S===void 0?void 0:S.length)||0);return he!==0?he:zE(z,H)}(s.mapValue,e.mapValue);case 11:return function(u,c){if(u===so.mapValue&&c===so.mapValue)return 0;if(u===so.mapValue)return 1;if(c===so.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),v=c.fields||{},S=Object.keys(v);y.sort(),S.sort();for(let R=0;R<y.length&&R<S.length;++R){const D=dg(y[R],S[R]);if(D!==0)return D;const z=mo(m[y[R]],v[S[R]]);if(z!==0)return z}return at(y.length,S.length)}(s.mapValue,e.mapValue);default:throw He(23264,{Pe:t})}}function BE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return at(s,e);const t=oa(s),r=oa(e),a=at(t.seconds,r.seconds);return a!==0?a:at(t.nanos,r.nanos)}function zE(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const u=mo(t[a],r[a]);if(u)return u}return at(t.length,r.length)}function vl(s){return _g(s)}function _g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=oa(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return ua(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Be.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",a=!0;for(const u of t.values||[])a?a=!1:r+=",",r+=_g(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const c of r)u?u=!1:a+=",",a+=`${c}:${_g(t.fields[c])}`;return a+"}"}(s.mapValue):He(61005,{value:s})}function Kf(s){switch(fo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Md(s);return e?16+Kf(e):16;case 5:return 2*s.stringValue.length;case 6:return ua(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,u)=>a+Kf(u),0)}(s.arrayValue);case 10:case 11:return function(r){let a=0;return gh(r.fields,(u,c)=>{a+=u.length+Kf(c)}),a}(s.mapValue);default:throw He(13486,{value:s})}}function dy(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Eg(s){return!!s&&"integerValue"in s}function eh(s){return!!s&&"arrayValue"in s}function jE(s){return!!s&&"nullValue"in s}function qE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Hp(s){return!!s&&"mapValue"in s}function Ld(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[Nw])===null||t===void 0?void 0:t.stringValue)===Vw}function Lc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return gh(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lc(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lc(s.arrayValue.values[t]);return e}return Object.assign({},s)}function kw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Pw}const Mw={mapValue:{fields:{[Nw]:{stringValue:Vw},[Jc]:{arrayValue:{}}}}};function rO(s){return"nullValue"in s?Ff:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?dy(lu.empty(),Be.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Ld(s)?Mw:{mapValue:{}}:He(35942,{value:s})}function iO(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?dy(lu.empty(),Be.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?Mw:"mapValue"in s?Ld(s)?{mapValue:{}}:so:He(61959,{value:s})}function FE(s,e){const t=mo(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function KE(s,e){const t=mo(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lc(t)}setAll(e){let t=bn.emptyPath(),r={},a=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,a),r={},a=[],t=m.popLast()}c?r[m.lastSegment()]=Lc(c):a.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,a)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Hp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){gh(t,(a,u)=>e[a]=u);for(const a of r)delete e[a]}clone(){return new xi(Lc(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,a,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new dn(e,0,Ze.min(),Ze.min(),Ze.min(),xi.empty(),0)}static newFoundDocument(e,t,r,a){return new dn(e,1,t,Ze.min(),r,a,0)}static newNoDocument(e,t){return new dn(e,2,t,Ze.min(),Ze.min(),xi.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Ze.min(),Ze.min(),xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.position=e,this.inclusive=t}}function HE(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const u=e[a],c=s.position[a];if(u.field.isKeyField()?r=Be.comparator(Be.fromName(c.referenceValue),t.key):r=mo(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function GE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!As(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function sO(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{}class At extends Lw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new aO(e,t,r):t==="array-contains"?new lO(e,r):t==="in"?new Fw(e,r):t==="not-in"?new cO(e,r):t==="array-contains-any"?new hO(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new oO(e,r):new uO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(mo(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends Lw{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ht(e,t)}matches(e){return El(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function El(s){return s.op==="and"}function bg(s){return s.op==="or"}function my(s){return Uw(s)&&El(s)}function Uw(s){for(const e of s.filters)if(e instanceof Ht)return!1;return!0}function Tg(s){if(s instanceof At)return s.field.canonicalString()+s.op.toString()+vl(s.value);if(my(s))return s.filters.map(e=>Tg(e)).join(",");{const e=s.filters.map(t=>Tg(t)).join(",");return`${s.op}(${e})`}}function Bw(s,e){return s instanceof At?function(r,a){return a instanceof At&&r.op===a.op&&r.field.isEqual(a.field)&&As(r.value,a.value)}(s,e):s instanceof Ht?function(r,a){return a instanceof Ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((u,c,m)=>u&&Bw(c,a.filters[m]),!0):!1}(s,e):void He(19439)}function zw(s,e){const t=s.filters.concat(e);return Ht.create(t,s.op)}function jw(s){return s instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${vl(t.value)}`}(s):s instanceof Ht?function(t){return t.op.toString()+" {"+t.getFilters().map(jw).join(" ,")+"}"}(s):"Filter"}class aO extends At{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class oO extends At{constructor(e,t){super(e,"in",t),this.keys=qw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uO extends At{constructor(e,t){super(e,"not-in",t),this.keys=qw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qw(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class lO extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eh(t)&&Zc(t.arrayValue,this.value)}}class Fw extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zc(this.value.arrayValue,t)}}class cO extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zc(this.value.arrayValue,t)}}class hO extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t=null,r=[],a=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=c,this.endAt=m,this.Ie=null}}function wg(s,e=null,t=[],r=[],a=null,u=null,c=null){return new fO(s,e,t,r,a,u,c)}function cu(s){const e=Ye(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Nd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vl(r)).join(",")),e.Ie=t}return e.Ie}function yh(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!sO(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Bw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!GE(s.startAt,e.startAt)&&GE(s.endAt,e.endAt)}function hd(s){return Be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function fd(s,e){return s.filters.filter(t=>t instanceof At&&t.field.isEqual(e))}function QE(s,e,t){let r=Ff,a=!0;for(const u of fd(s,e)){let c=Ff,m=!0;switch(u.op){case"<":case"<=":c=rO(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=Ff}FE({value:r,inclusive:a},{value:c,inclusive:m})<0&&(r=c,a=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];FE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function YE(s,e,t){let r=so,a=!0;for(const u of fd(s,e)){let c=so,m=!0;switch(u.op){case">=":case">":c=iO(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=so}KE({value:r,inclusive:a},{value:c,inclusive:m})>0&&(r=c,a=m)}if(t!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(e)){const c=t.position[u];KE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t=null,r=[],a=[],u=null,c="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Kw(s,e,t,r,a,u,c,m){return new Ud(s,e,t,r,a,u,c,m)}function Bd(s){return new Ud(s)}function $E(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function dO(s){return s.collectionGroup!==null}function Uc(s){const e=Ye(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Ut(bn.comparator);return c.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new cd(u,r))}),t.has(bn.keyField().canonicalString())||e.Ee.push(new cd(bn.keyField(),r))}return e.Ee}function ii(s){const e=Ye(s);return e.de||(e.de=mO(e,Uc(s))),e.de}function mO(s,e){if(s.limitType==="F")return wg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new cd(a.field,u)});const t=s.endAt?new _l(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new _l(s.startAt.position,s.startAt.inclusive):null;return wg(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Sg(s,e,t){return new Ud(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function zd(s,e){return yh(ii(s),ii(e))&&s.limitType===e.limitType}function Hw(s){return`${cu(ii(s))}|lt:${s.limitType}`}function nl(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>jw(a)).join(", ")}]`),Nd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>vl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>vl(a)).join(",")),`Target(${r})`}(ii(s))}; limitType=${s.limitType})`}function vh(s,e){return e.isFoundDocument()&&function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,e)&&function(r,a){for(const u of Uc(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(s,e)&&function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0}(s,e)&&function(r,a){return!(r.startAt&&!function(c,m,y){const v=HE(c,m,y);return c.inclusive?v<=0:v<0}(r.startAt,Uc(r),a)||r.endAt&&!function(c,m,y){const v=HE(c,m,y);return c.inclusive?v>=0:v>0}(r.endAt,Uc(r),a))}(s,e)}function Gw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Qw(s){return(e,t)=>{let r=!1;for(const a of Uc(s)){const u=pO(a,e,t);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function pO(s,e,t){const r=s.field.isKeyField()?Be.comparator(e.key,t.key):function(u,c,m){const y=c.data.field(u),v=m.data.field(u);return y!==null&&v!==null?mo(y,v):He(42886)}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){gh(this.inner,(t,r)=>{for(const[a,u]of r)e(a,u)})}isEmpty(){return eO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new Jt(Be.comparator);function Ci(){return gO}const Yw=new Jt(Be.comparator);function Dc(...s){let e=Yw;for(const t of s)e=e.insert(t.key,t);return e}function yO(s){let e=Yw;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bs(){return Bc()}function $w(){return Bc()}function Bc(){return new ha(s=>s.toString(),(s,e)=>s.isEqual(e))}const vO=new Jt(Be.comparator),_O=new Ut(Be.comparator);function bt(...s){let e=_O;for(const t of s)e=e.add(t);return e}const EO=new Ut(at);function py(){return EO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function TO(s){return{integerValue:""+s}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this._=void 0}}function wO(s,e,t){return s instanceof th?function(a,u){const c={fields:{[Cw]:{stringValue:xw},[Ow]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&fy(u)&&(u=Md(u)),u&&(c.fields[Dw]=u),{mapValue:c}}(t,e):s instanceof bl?Xw(s,e):s instanceof Tl?Ww(s,e):function(a,u){const c=AO(a,u),m=XE(c)+XE(a.Re);return Eg(c)&&Eg(a.Re)?TO(m):bO(a.serializer,m)}(s,e)}function SO(s,e,t){return s instanceof bl?Xw(s,e):s instanceof Tl?Ww(s,e):t}function AO(s,e){return s instanceof nh?function(r){return Eg(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class th extends jd{}class bl extends jd{constructor(e){super(),this.elements=e}}function Xw(s,e){const t=Jw(e);for(const r of s.elements)t.some(a=>As(a,r))||t.push(r);return{arrayValue:{values:t}}}class Tl extends jd{constructor(e){super(),this.elements=e}}function Ww(s,e){let t=Jw(e);for(const r of s.elements)t=t.filter(a=>!As(a,r));return{arrayValue:{values:t}}}class nh extends jd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function XE(s){return rn(s.integerValue||s.doubleValue)}function Jw(s){return eh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.field=e,this.transform=t}}function RO(s,e){return s.field.isEqual(e.field)&&function(r,a){return r instanceof bl&&a instanceof bl||r instanceof Tl&&a instanceof Tl?fl(r.elements,a.elements,As):r instanceof nh&&a instanceof nh?As(r.Re,a.Re):r instanceof th&&a instanceof th}(s.transform,e.transform)}class xO{constructor(e,t){this.version=e,this.transformResults=t}}class Ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class qd{}function Zw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new gy(s.key,Ji.none()):new _h(s.key,s.data,Ji.none());{const t=s.data,r=xi.empty();let a=new Ut(bn.comparator);for(let u of e.fields)if(!a.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),a=a.add(u)}return new Nl(s.key,r,new ea(a.toArray()),Ji.none())}}function CO(s,e,t){s instanceof _h?function(a,u,c){const m=a.value.clone(),y=JE(a.fieldTransforms,u,c.transformResults);m.setAll(y),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(s,e,t):s instanceof Nl?function(a,u,c){if(!Hf(a.precondition,u))return void u.convertToUnknownDocument(c.version);const m=JE(a.fieldTransforms,u,c.transformResults),y=u.data;y.setAll(eS(a)),y.setAll(m),u.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(s,e,t):function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function zc(s,e,t,r){return s instanceof _h?function(u,c,m,y){if(!Hf(u.precondition,c))return m;const v=u.value.clone(),S=ZE(u.fieldTransforms,y,c);return v.setAll(S),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(s,e,t,r):s instanceof Nl?function(u,c,m,y){if(!Hf(u.precondition,c))return m;const v=ZE(u.fieldTransforms,y,c),S=c.data;return S.setAll(eS(u)),S.setAll(v),c.convertToFoundDocument(c.version,S).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(R=>R.field))}(s,e,t,r):function(u,c,m){return Hf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m}(s,e,t)}function WE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&fl(r,a,(u,c)=>RO(u,c))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class _h extends qd{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Nl extends qd{constructor(e,t,r,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function eS(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function JE(s,e,t){const r=new Map;$e(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let a=0;a<t.length;a++){const u=s[a],c=u.transform,m=e.data.field(u.field);r.set(u.field,SO(c,m,t[a]))}return r}function ZE(s,e,t){const r=new Map;for(const a of s){const u=a.transform,c=t.data.field(a.field);r.set(a.field,wO(u,c,e))}return r}class gy extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tS extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&CO(u,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$w();return this.mutations.forEach(a=>{const u=e.get(a.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(a.key)?null:m;const y=Zw(c,m);y!==null&&r.set(a.key,y),c.isValidDocument()||c.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bt())}isEqual(e){return this.batchId===e.batchId&&fl(this.mutations,e.mutations,(t,r)=>WE(t,r))&&fl(this.baseMutations,e.baseMutations,(t,r)=>WE(t,r))}}class vy{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){$e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let a=function(){return vO}();const u=e.mutations;for(let c=0;c<u.length;c++)a=a.insert(u[c].key,r[c].version);return new vy(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,xt;function OO(s){switch(s){case we.OK:return He(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return He(15467,{code:s})}}function nS(s){if(s===void 0)return En("GRPC error has no .code"),we.UNKNOWN;switch(s){case Cn.OK:return we.OK;case Cn.CANCELLED:return we.CANCELLED;case Cn.UNKNOWN:return we.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return we.INTERNAL;case Cn.UNAVAILABLE:return we.UNAVAILABLE;case Cn.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Cn.NOT_FOUND:return we.NOT_FOUND;case Cn.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Cn.ABORTED:return we.ABORTED;case Cn.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Cn.DATA_LOSS:return we.DATA_LOSS;default:return He(39323,{code:s})}}(xt=Cn||(Cn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new lo([4294967295,4294967295],0);function eb(s){const e=cw().encode(s),t=new rw;return t.update(e),new Uint8Array(t.digest())}function tb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new lo([t,r],0),new lo([a,u],0)]}class Ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=lo.fromNumber(this.pe)}we(e,t,r){let a=e.add(t.multiply(lo.fromNumber(r)));return a.compare(NO)===1&&(a=new lo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=eb(e),[r,a]=tb(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);if(!this.be(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new Ey(u,a,t);return r.forEach(m=>c.insert(m)),c}insert(e){if(this.pe===0)return;const t=eb(e),[r,a]=tb(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,r,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Eh(Ze.min(),a,new Jt(at),Ci(),bt())}}class bh{constructor(e,t,r,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bh(r,t,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,r,a){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=a}}class rS{constructor(e,t){this.targetId=e,this.Ce=t}}class iS{constructor(e,t,r=Tn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class nb{constructor(){this.Fe=0,this.Me=rb(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=bt(),t=bt(),r=bt();return this.Me.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:He(38017,{changeType:u})}}),new bh(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=rb()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class PO{constructor(e){this.ze=e,this.je=new Map,this.He=Ci(),this.Je=Rf(),this.Ye=Rf(),this.Ze=new Jt(at)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:He(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,r=e.Ce.count,a=this._t(t);if(a){const u=a.target;if(hd(u))if(r===0){const c=new Be(u.path);this.tt(t,c,dn.newNoDocument(c,Ze.min()))}else $e(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const m=this.ct(e),y=m?this.lt(m,e,c):1;if(y!==0){this.st(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=t;let c,m;try{c=ua(r).toUint8Array()}catch(y){if(y instanceof Rw)return Hc("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Ey(c,a,u)}catch(y){return Hc(y instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let a=0;return r.forEach(u=>{const c=this.ze.Pt(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,u,null),a++)}),a}It(e){const t=new Map;this.je.forEach((u,c)=>{const m=this._t(c);if(m){if(u.current&&hd(m.target)){const y=new Be(m.target.path);this.Et(y).has(c)||this.dt(c,y)||this.tt(c,y,dn.newNoDocument(y,e))}u.Le&&(t.set(c,u.qe()),u.Qe())}});let r=bt();this.Ye.forEach((u,c)=>{let m=!0;c.forEachWhile(y=>{const v=this._t(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,c)=>c.setReadTime(e));const a=new Eh(e,t,this.Ze,this.He,r);return this.He=Ci(),this.Je=Rf(),this.Ye=Rf(),this.Ze=new Jt(at),a}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new nb,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ut(at),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ut(at),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new nb),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Rf(){return new Jt(Be.comparator)}function rb(){return new Jt(Be.comparator)}const VO={asc:"ASCENDING",desc:"DESCENDING"},kO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MO={and:"AND",or:"OR"};class LO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ag(s,e){return s.useProto3Json||Nd(e)?e:{value:e}}function dd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UO(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function BO(s,e){return dd(s,e.toTimestamp())}function wr(s){return $e(!!s,49232),Ze.fromTimestamp(function(t){const r=oa(t);return new Qn(r.seconds,r.nanos)}(s))}function sS(s,e){return Ig(s,e).canonicalString()}function Ig(s,e){const t=function(a){return new Qt(["projects",a.projectId,"databases",a.database])}(s).child("documents");return e===void 0?t:t.child(e)}function aS(s){const e=Qt.fromString(s);return $e(pS(e),10190,{key:e.toString()}),e}function md(s,e){return sS(s.databaseId,e.path)}function iu(s,e){const t=aS(e);if(t.get(1)!==s.databaseId.projectId)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Be(lS(t))}function oS(s,e){return sS(s.databaseId,e)}function uS(s){const e=aS(s);return e.length===4?Qt.emptyPath():lS(e)}function Rg(s){return new Qt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function lS(s){return $e(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function ib(s,e,t){return{name:md(s,e),fields:t.value.mapValue.fields}}function zO(s,e,t){const r=iu(s,e.name),a=wr(e.updateTime),u=e.createTime?wr(e.createTime):Ze.min(),c=new xi({mapValue:{fields:e.fields}}),m=dn.newFoundDocument(r,a,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function jO(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:He(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(v,S){return v.useProto3Json?($e(S===void 0||typeof S=="string",58123),Tn.fromBase64String(S||"")):($e(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Tn.fromUint8Array(S||new Uint8Array))}(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(v){const S=v.code===void 0?we.UNKNOWN:nS(v.code);return new Ge(S,v.message||"")}(c);t=new iS(r,a,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=iu(s,r.document.name),u=wr(r.document.updateTime),c=r.document.createTime?wr(r.document.createTime):Ze.min(),m=new xi({mapValue:{fields:r.document.fields}}),y=dn.newFoundDocument(a,u,c,m),v=r.targetIds||[],S=r.removedTargetIds||[];t=new Gf(v,S,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=iu(s,r.document),u=r.readTime?wr(r.readTime):Ze.min(),c=dn.newNoDocument(a,u),m=r.removedTargetIds||[];t=new Gf([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=iu(s,r.document),u=r.removedTargetIds||[];t=new Gf([],u,a,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,c=new DO(a,u),m=r.targetId;t=new rS(m,c)}}return t}function pd(s,e){let t;if(e instanceof _h)t={update:ib(s,e.key,e.value)};else if(e instanceof gy)t={delete:md(s,e.key)};else if(e instanceof Nl)t={update:ib(s,e.key,e.data),updateMask:QO(e.fieldMask)};else{if(!(e instanceof tS))return He(16599,{ft:e.type});t={verify:md(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const m=c.transform;if(m instanceof th)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof bl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Tl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof nh)return{fieldPath:c.field.canonicalString(),increment:m.Re};throw He(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:BO(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)}(s,e.precondition)),t}function xg(s,e){const t=e.currentDocument?function(u){return u.updateTime!==void 0?Ji.updateTime(wr(u.updateTime)):u.exists!==void 0?Ji.exists(u.exists):Ji.none()}(e.currentDocument):Ji.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,m){let y=null;if("setToServerValue"in m)$e(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),y=new th;else if("appendMissingElements"in m){const S=m.appendMissingElements.values||[];y=new bl(S)}else if("removeAllFromArray"in m){const S=m.removeAllFromArray.values||[];y=new Tl(S)}else"increment"in m?y=new nh(c,m.increment):He(16584,{proto:m});const v=bn.fromServerFormat(m.fieldPath);return new IO(v,y)}(s,a)):[];if(e.update){e.update.name;const a=iu(s,e.update.name),u=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(y){const v=y.fieldPaths||[];return new ea(v.map(S=>bn.fromServerFormat(S)))}(e.updateMask);return new Nl(a,u,c,t,r)}return new _h(a,u,t,r)}if(e.delete){const a=iu(s,e.delete);return new gy(a,t)}if(e.verify){const a=iu(s,e.verify);return new tS(a,t)}return He(1463,{proto:e})}function qO(s,e){return s&&s.length>0?($e(e!==void 0,14353),s.map(t=>function(a,u){let c=a.updateTime?wr(a.updateTime):wr(u);return c.isEqual(Ze.min())&&(c=wr(u)),new xO(c,a.transformResults||[])}(t,e))):[]}function cS(s,e){return{documents:[oS(s,e.path)]}}function hS(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=oS(s,a);const u=function(v){if(v.length!==0)return mS(Ht.create(v,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const c=function(v){if(v.length!==0)return v.map(S=>function(D){return{field:rl(D.field),direction:KO(D.dir)}}(S))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Ag(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:a}}function fS(s){let e=uS(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){$e(r===1,65062);const S=t.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(R){const D=dS(R);return D instanceof Ht&&my(D)?D.getFilters():[D]}(t.where));let c=[];t.orderBy&&(c=function(R){return R.map(D=>function(H){return new cd(il(H.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(D))}(t.orderBy));let m=null;t.limit&&(m=function(R){let D;return D=typeof R=="object"?R.value:R,Nd(D)?null:D}(t.limit));let y=null;t.startAt&&(y=function(R){const D=!!R.before,z=R.values||[];return new _l(z,D)}(t.startAt));let v=null;return t.endAt&&(v=function(R){const D=!R.before,z=R.values||[];return new _l(z,D)}(t.endAt)),Kw(e,a,c,u,m,"F",y,v)}function FO(s,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dS(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=il(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=il(t.unaryFilter.field);return At.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=il(t.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=il(t.unaryFilter.field);return At.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}}(s):s.fieldFilter!==void 0?function(t){return At.create(il(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Ht.create(t.compositeFilter.filters.map(r=>dS(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He(1026)}}(t.compositeFilter.op))}(s):He(30097,{filter:s})}function KO(s){return VO[s]}function HO(s){return kO[s]}function GO(s){return MO[s]}function rl(s){return{fieldPath:s.canonicalString()}}function il(s){return bn.fromServerFormat(s.fieldPath)}function mS(s){return s instanceof At?function(t){if(t.op==="=="){if(qE(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(jE(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qE(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(jE(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:HO(t.op),value:t.value}}}(s):s instanceof Ht?function(t){const r=t.getFilters().map(a=>mS(a));return r.length===1?r[0]:{compositeFilter:{op:GO(t.op),filters:r}}}(s):He(54877,{filter:s})}function QO(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t,r,a,u=Ze.min(),c=Ze.min(),m=Tn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.wt=e}}function YO(s,e){let t;if(e.document)t=zO(s.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),a=fu(e.noDocument.readTime);t=dn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return He(56709);{const r=Be.fromSegments(e.unknownDocument.path),a=fu(e.unknownDocument.version);t=dn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const u=new Qn(a[0],a[1]);return Ze.fromTimestamp(u)}(e.readTime)),t}function sb(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(u,c){return{name:md(u,c.key),fields:c.data.value.mapValue.fields,updateTime:dd(u,c.version.toTimestamp()),createTime:dd(u,c.createTime.toTimestamp())}}(s.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hu(e.version)};else{if(!e.isUnknownDocument())return He(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:hu(e.version)}}return r}function gd(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function hu(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fu(s){const e=new Qn(s.seconds,s.nanoseconds);return Ze.fromTimestamp(e)}function Xo(s,e){const t=(e.baseMutations||[]).map(u=>xg(s.wt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const m=e.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map(u=>xg(s.wt,u)),a=Qn.fromMillis(e.localWriteTimeMs);return new yy(e.batchId,a,t,r)}function Nc(s){const e=fu(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?fu(s.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=function(u){return u.documents!==void 0}(s.query)?function(u){const c=u.documents.length;return $e(c===1,1966,{count:c}),ii(Bd(uS(u.documents[0])))}(s.query):function(u){return ii(fS(u))}(s.query),new ta(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Tn.fromBase64String(s.resumeToken))}function yS(s,e){const t=hu(e.snapshotVersion),r=hu(e.lastLimboFreeSnapshotVersion);let a;a=hd(e.target)?cS(s.wt,e.target):hS(s.wt,e.target).gt;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function vS(s){const e=fS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Sg(e,e.limit,"L"):e}function Gp(s,e){return new _y(e.largestBatchId,xg(s.wt,e.overlayMutation))}function ab(s,e){const t=e.path.lastSegment();return[s,mr(e.path.popLast()),t]}function ob(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:hu(r.readTime),documentKey:mr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{getBundleMetadata(e,t){return ub(e).get(t).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:fu(u.createTime),version:u.version}}(r)})}saveBundleMetadata(e,t){return ub(e).put(function(a){return{bundleId:a.id,createTime:hu(wr(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return lb(e).get(t).next(r=>{if(r)return function(u){return{name:u.name,query:vS(u.bundledQuery),readTime:fu(u.readTime)}}(r)})}saveNamedQuery(e,t){return lb(e).put(function(a){return{name:a.name,readTime:hu(wr(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function ub(s){return Mn(s,Pd)}function lb(s){return Mn(s,Vd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new Fd(e,r)}getOverlay(e,t){return Sc(e).get(ab(this.userId,t)).next(r=>r?Gp(this.serializer,r):null)}getOverlays(e,t){const r=bs();return re.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((u,c)=>{const m=new _y(t,c);a.push(this.St(e,m))}),re.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(mr(c.getCollectionPath())));const u=[];return a.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Sc(e).X(yg,m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const a=bs(),u=mr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Sc(e).J(yg,c).next(m=>{for(const y of m){const v=Gp(this.serializer,y);a.set(v.getKey(),v)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const u=bs();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sc(e).te({index:ww,range:m},(y,v,S)=>{const R=Gp(this.serializer,v);u.size()<a||R.largestBatchId===c?(u.set(R.getKey(),R),c=R.largestBatchId):S.done()}).next(()=>u)}St(e,t){return Sc(e).put(function(a,u,c){const[m,y,v]=ab(u,c.mutation.key);return{userId:u,collectionPath:y,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:pd(a.wt,c.mutation)}}(this.serializer,this.userId,t))}}function Sc(s){return Mn(s,kd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{Dt(e){return Mn(e,cy)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Tn.fromUint8Array(r):Tn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rn(e.integerValue));else if("doubleValue"in e){const r=rn(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Qc(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=oa(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ua(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?kw(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Ld(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):He(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const a of Object.keys(r))this.Nt(a,t),this.Ct(r[a],t)}qt(e,t){var r,a;const u=e.fields||{};this.Mt(t,53);const c=Jc,m=((a=(r=u[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Mt(t,15),t.xt(rn(m)),this.Nt(c,t),this.Ct(u[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const a of r)this.Ct(a,t)}kt(e,t){this.Mt(t,37),Be.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Wo.Wt=new Wo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=255;function WO(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function cb(s){const e=64-function(r){let a=0;for(let u=0;u<8;++u){const c=WO(255&r[u]);if(a+=c,c!==8)break}return a}(s);return Math.ceil(e/8)}class JO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const a=t.codePointAt(0);this.zt(240|a>>>18),this.zt(128|63&a>>>12),this.zt(128|63&a>>>6),this.zt(128|63&a)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Yt()}en(e){const t=this.tn(e),r=cb(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}rn(e){const t=this.tn(e),r=cb(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}sn(){this._n(Wu),this._n(255)}an(){this.un(Wu),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Wu?(this._n(Wu),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===Wu?(this.un(Wu),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class ZO{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class eN{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Ac{constructor(){this.ln=new JO,this.hn=new ZO(this.ln),this.Pn=new eN(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}In(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Jo(this.indexId,this.documentKey,this.arrayValue,r)}}function Ja(s,e){let t=s.indexId-e.indexId;return t!==0?t:(t=hb(s.arrayValue,e.arrayValue),t!==0?t:(t=hb(s.directionalValue,e.directionalValue),t!==0?t:Be.comparator(s.documentKey,e.documentKey)))}function hb(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.En=new Ut((t,r)=>bn.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if($e(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=mg(e);if(t!==void 0&&!this.mn(t))return!1;const r=Qo(e);let a=new Set,u=0,c=0;for(;u<r.length&&this.mn(r[u]);++u)a=a.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.En.size>0){const m=this.En.getIterator().getNext();if(!a.has(m.field.canonicalString())){const y=r[u];if(!this.fn(m,y)||!this.gn(this.dn[c++],y))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.dn.length||!this.gn(this.dn[c++],m))return!1}return!0}pn(){if(this.Rn)return null;let e=new Ut(bn.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new zf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new zf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new zf(r.field,r.dir==="asc"?0:1)));return new rd(rd.UNKNOWN_ID,this.collectionId,t,Gc.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(s){var e,t;if($e(s instanceof At||s instanceof Ht,20012),s instanceof At){if(s instanceof Fw){const a=((t=(e=s.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(u=>At.create(s.field,"==",u)))||[];return Ht.create(a,"or")}return s}const r=s.filters.map(a=>_S(a));return Ht.create(r,s.op)}function tN(s){if(s.getFilters().length===0)return[];const e=Og(_S(s));return $e(ES(e),7391),Cg(e)||Dg(e)?[e]:e.getFilters()}function Cg(s){return s instanceof At}function Dg(s){return s instanceof Ht&&my(s)}function ES(s){return Cg(s)||Dg(s)||function(t){if(t instanceof Ht&&bg(t)){for(const r of t.getFilters())if(!Cg(r)&&!Dg(r))return!1;return!0}return!1}(s)}function Og(s){if($e(s instanceof At||s instanceof Ht,34018),s instanceof At)return s;if(s.filters.length===1)return Og(s.filters[0]);const e=s.filters.map(r=>Og(r));let t=Ht.create(e,s.op);return t=yd(t),ES(t)?t:($e(t instanceof Ht,64498),$e(El(t),40251),$e(t.filters.length>1,57927),t.filters.reduce((r,a)=>by(r,a)))}function by(s,e){let t;return $e(s instanceof At||s instanceof Ht,38388),$e(e instanceof At||e instanceof Ht,25473),t=s instanceof At?e instanceof At?function(a,u){return Ht.create([a,u],"and")}(s,e):db(s,e):e instanceof At?db(e,s):function(a,u){if($e(a.filters.length>0&&u.filters.length>0,48005),El(a)&&El(u))return zw(a,u.getFilters());const c=bg(a)?a:u,m=bg(a)?u:a,y=c.filters.map(v=>by(v,m));return Ht.create(y,"or")}(s,e),yd(t)}function db(s,e){if(El(e))return zw(e,s.getFilters());{const t=e.filters.map(r=>by(s,r));return Ht.create(t,"or")}}function yd(s){if($e(s instanceof At||s instanceof Ht,11850),s instanceof At)return s;const e=s.getFilters();if(e.length===1)return yd(e[0]);if(Uw(s))return s;const t=e.map(a=>yd(a)),r=[];return t.forEach(a=>{a instanceof At?r.push(a):a instanceof Ht&&(a.op===s.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Ht.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.yn=new Ty}addToCollectionParentIndex(e,t){return this.yn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(si.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Ty{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ut(Qt.comparator),u=!a.has(r);return this.index[t]=a.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ut(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="IndexedDbIndexManager",xf=new Uint8Array(0);class rN{constructor(e,t){this.databaseId=t,this.wn=new Ty,this.bn=new ha(r=>cu(r),(r,a)=>yh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const u={collectionId:r,parent:mr(a)};return pb(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[fw(t),""],!1,!0);return pb(e).J(a).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Es(c.parent))}return r})}addFieldIndex(e,t){const r=Ic(e),a=function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])}}(t);delete a.indexId;const u=r.add(a);if(t.indexState){const c=Zu(e);return u.next(m=>{c.put(ob(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Ic(e),a=Zu(e),u=Ju(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ic(e),r=Ju(e),a=Zu(e);return t.X().next(()=>r.X()).next(()=>a.X())}createTargetIndexes(e,t){return re.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const u=new fb(r).pn();if(u!=null)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=Ju(e);let a=!0;const u=new Map;return re.forEach(this.Sn(t),c=>this.Dn(e,c).next(m=>{a&&(a=!!m),u.set(c,m)})).next(()=>{if(a){let c=bt();const m=[];return re.forEach(u,(y,v)=>{Ae(mb,`Using index ${function(me){return`id=${me.indexId}|cg=${me.collectionGroup}|f=${me.fields.map(De=>`${De.fieldPath}:${De.kind}`).join(",")}`}(y)} to execute ${cu(t)}`);const S=function(me,De){const Pe=mg(De);if(Pe===void 0)return null;for(const je of fd(me,Pe.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(v,y),R=function(me,De){const Pe=new Map;for(const je of Qo(De))for(const U of fd(me,je.fieldPath))switch(U.op){case"==":case"in":Pe.set(je.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return Pe.set(je.fieldPath.canonicalString(),U.value),Array.from(Pe.values())}return null}(v,y),D=function(me,De){const Pe=[];let je=!0;for(const U of Qo(De)){const N=U.kind===0?QE(me,U.fieldPath,me.startAt):YE(me,U.fieldPath,me.startAt);Pe.push(N.value),je&&(je=N.inclusive)}return new _l(Pe,je)}(v,y),z=function(me,De){const Pe=[];let je=!0;for(const U of Qo(De)){const N=U.kind===0?YE(me,U.fieldPath,me.endAt):QE(me,U.fieldPath,me.endAt);Pe.push(N.value),je&&(je=N.inclusive)}return new _l(Pe,je)}(v,y),H=this.vn(y,v,D),he=this.vn(y,v,z),W=this.Cn(y,v,R),fe=this.Fn(y.indexId,S,H,D.inclusive,he,z.inclusive,W);return re.forEach(fe,Ee=>r.Z(Ee,t.limit).next(me=>{me.forEach(De=>{const Pe=Be.fromSegments(De.documentKey);c.has(Pe)||(c=c.add(Pe),m.push(Pe))})}))}).next(()=>m)}return re.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=tN(Ht.create(e.filters,"and")).map(r=>wg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,a,u,c,m){const y=(t!=null?t.length:1)*Math.max(r.length,u.length),v=y/(t!=null?t.length:1),S=[];for(let R=0;R<y;++R){const D=t?this.Mn(t[R/v]):xf,z=this.xn(e,D,r[R%v],a),H=this.On(e,D,u[R%v],c),he=m.map(W=>this.xn(e,D,W,!0));S.push(...this.createRange(z,H,he))}return S}xn(e,t,r,a){const u=new Jo(e,Be.empty(),t,r);return a?u:u.In()}On(e,t,r,a){const u=new Jo(e,Be.empty(),t,r);return a?u.In():u}Dn(e,t){const r=new fb(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(u=>{let c=null;for(const m of u)r.Vn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;const a=this.Sn(t);return re.forEach(a,u=>this.Dn(e,u).next(c=>{c?r!==0&&c.fields.length<function(y){let v=new Ut(bn.comparator),S=!1;for(const R of y.filters)for(const D of R.getFlattenedFilters())D.field.isKeyField()||(D.op==="array-contains"||D.op==="array-contains-any"?S=!0:v=v.add(D.field));for(const R of y.orderBy)R.field.isKeyField()||(v=v.add(R.field));return v.size+(S?1:0)}(u)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}Nn(e,t){const r=new Ac;for(const a of Qo(e)){const u=t.data.field(a.fieldPath);if(u==null)return null;const c=r.Tn(a.kind);Wo.Wt.vt(u,c)}return r.cn()}Mn(e){const t=new Ac;return Wo.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new Ac;return Wo.Wt.vt(dy(this.databaseId,t),r.Tn(function(u){const c=Qo(u);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let a=[];a.push(new Ac);let u=0;for(const c of Qo(e)){const m=r[u++];for(const y of a)if(this.Ln(t,c.fieldPath)&&eh(m))a=this.kn(a,c,m);else{const v=y.Tn(c.kind);Wo.Wt.vt(m,v)}}return this.qn(a)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const a=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of a){const y=new Ac;y.seed(m.cn()),Wo.Wt.vt(c,y.Tn(t.kind)),u.push(y)}return u}Ln(e,t){return!!e.filters.find(r=>r instanceof At&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ic(e),a=Zu(e);return(t?r.J(gg,IDBKeyRange.bound(t,t)):r.J()).next(u=>{const c=[];return re.forEach(u,m=>a.get([m.indexId,this.uid]).next(y=>{c.push(function(S,R){const D=R?new Gc(R.sequenceNumber,new si(fu(R.readTime),new Be(Es(R.documentKey)),R.largestBatchId)):Gc.empty(),z=S.fields.map(([H,he])=>new zf(bn.fromServerFormat(H),he));return new rd(S.indexId,S.collectionGroup,z,D)}(m,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const u=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return u!==0?u:at(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Ic(e),u=Zu(e);return this.Qn(e).next(c=>a.J(gg,IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,y=>u.put(ob(y.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(a,u)=>{const c=r.get(a.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(m=>(r.set(a.collectionGroup,m),re.forEach(m,y=>this.$n(e,a,y).next(v=>{const S=this.Un(u,y);return v.isEqual(S)?re.resolve():this.Kn(e,u,y,v,S)}))))})}Wn(e,t,r,a){return Ju(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,a){return Ju(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const a=Ju(e);let u=new Ut(Ja);return a.te({index:Tw,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(c,m)=>{u=u.add(new Jo(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}Un(e,t){let r=new Ut(Ja);const a=this.Nn(t,e);if(a==null)return r;const u=mg(t);if(u!=null){const c=e.data.field(u.fieldPath);if(eh(c))for(const m of c.arrayValue.values||[])r=r.add(new Jo(t.indexId,e.key,this.Mn(m),a))}else r=r.add(new Jo(t.indexId,e.key,xf,a));return r}Kn(e,t,r,a,u){Ae(mb,"Updating index entries for document '%s'",t.key);const c=[];return function(y,v,S,R,D){const z=y.getIterator(),H=v.getIterator();let he=Xu(z),W=Xu(H);for(;he||W;){let fe=!1,Ee=!1;if(he&&W){const me=S(he,W);me<0?Ee=!0:me>0&&(fe=!0)}else he!=null?Ee=!0:fe=!0;fe?(R(W),W=Xu(H)):Ee?(D(he),he=Xu(z)):(he=Xu(z),W=Xu(H))}}(a,u,Ja,m=>{c.push(this.Wn(e,t,r,m))},m=>{c.push(this.Gn(e,t,r,m))}),re.waitFor(c)}Qn(e){let t=1;return Zu(e).te({index:bw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,u)=>{u.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Ja(c,m)).filter((c,m,y)=>!m||Ja(c,y[m-1])!==0);const a=[];a.push(e);for(const c of r){const m=Ja(c,e),y=Ja(c,t);if(m===0)a[0]=e.In();else if(m>0&&y<0)a.push(c),a.push(c.In());else if(y>0)break}a.push(t);const u=[];for(let c=0;c<a.length;c+=2){if(this.zn(a[c],a[c+1]))return[];const m=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,xf,[]],y=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,xf,[]];u.push(IDBKeyRange.bound(m,y))}return u}zn(e,t){return Ja(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gb)}getMinOffset(e,t){return re.mapArray(this.Sn(t),r=>this.Dn(e,r).next(a=>a||He(44426))).next(gb)}}function pb(s){return Mn(s,Xc)}function Ju(s){return Mn(s,ud)}function Ic(s){return Mn(s,ly)}function Zu(s){return Mn(s,od)}function gb(s){$e(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;ay(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new si(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bS=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(s,e,t){const r=s.store($i),a=s.store(ml),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const y=r.te({range:c},(S,R,D)=>(m++,D.delete()));u.push(y.next(()=>{$e(m===1,47070,{batchId:t.batchId})}));const v=[];for(const S of t.mutations){const R=vw(e,S.key.path,t.batchId);u.push(a.delete(R)),v.push(S.key)}return re.waitFor(u).next(()=>v)}function vd(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw He(14731);e=s.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(bS,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class Kd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.jn={}}static bt(e,t,r,a){$e(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new Kd(u,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).te({index:eu,range:r},(a,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const u=sl(e),c=Za(e);return c.add({}).next(m=>{$e(typeof m=="number",49019);const y=new yy(m,t,r,a),v=function(z,H,he){const W=he.baseMutations.map(Ee=>pd(z.wt,Ee)),fe=he.mutations.map(Ee=>pd(z.wt,Ee));return{userId:H,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:W,mutations:fe}}(this.serializer,this.userId,y),S=[];let R=new Ut((D,z)=>at(D.canonicalString(),z.canonicalString()));for(const D of a){const z=vw(this.userId,D.key.path,m);R=R.add(D.key.path.popLast()),S.push(c.put(v)),S.push(u.put(z,DD))}return R.forEach(D=>{S.push(this.indexManager.addToCollectionParentIndex(e,D))}),e.addOnCommittedListener(()=>{this.jn[m]=y.keys()}),re.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return Za(e).get(t).next(r=>r?($e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Xo(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?re.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.jn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Za(e).te({index:eu,range:a},(c,m,y)=>{m.userId===this.userId&&($e(m.batchId>=r,47524,{Jn:r}),u=Xo(this.serializer,m)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=nu;return Za(e).te({index:eu,range:t,reverse:!0},(a,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,nu],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).J(eu,t).next(r=>r.map(a=>Xo(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),u=[];return sl(e).te({range:a},(c,m,y)=>{const[v,S,R]=c,D=Es(S);if(v===this.userId&&t.path.isEqual(D))return Za(e).get(R).next(z=>{if(!z)throw He(61480,{Yn:c,batchId:R});$e(z.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:z.userId,batchId:R}),u.push(Xo(this.serializer,z))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(at);const a=[];return t.forEach(u=>{const c=jf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),y=sl(e).te({range:m},(v,S,R)=>{const[D,z,H]=v,he=Es(z);D===this.userId&&u.path.isEqual(he)?r=r.add(H):R.done()});a.push(y)}),re.waitFor(a).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,u=jf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Ut(at);return sl(e).te({range:c},(y,v,S)=>{const[R,D,z]=y,H=Es(D);R===this.userId&&r.isPrefixOf(H)?H.length===a&&(m=m.add(z)):S.done()}).next(()=>this.Zn(e,m))}Zn(e,t){const r=[],a=[];return t.forEach(u=>{a.push(Za(e).get(u).next(c=>{if(c===null)throw He(35274,{batchId:u});$e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(Xo(this.serializer,c))}))}),re.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return TS(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),re.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return sl(e).te({range:r},(u,c,m)=>{if(u[0]===this.userId){const y=Es(u[1]);a.push(y)}else m.done()}).next(()=>{$e(a.length===0,56720,{er:a.map(u=>u.canonicalString())})})})}containsKey(e,t){return wS(e,this.userId,t)}tr(e){return SS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:nu,lastStreamToken:""})}}function wS(s,e,t){const r=jf(e,t.path),a=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return sl(s).te({range:u,ee:!0},(m,y,v)=>{const[S,R,D]=m;S===e&&R===a&&(c=!0),v.done()}).next(()=>c)}function Za(s){return Mn(s,$i)}function sl(s){return Mn(s,ml)}function SS(s){return Mn(s,Yc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new du(0)}static ir(){return new du(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new du(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>Ze.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this._r(e,a)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>el(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>($e(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let a=0;const u=[];return el(e).te((c,m)=>{const y=Nc(m);y.sequenceNumber<=t&&r.get(y.targetId)===null&&(a++,u.push(this.removeTargetData(e,y)))}).next(()=>re.waitFor(u)).next(()=>a)}forEachTarget(e,t){return el(e).te((r,a)=>{const u=Nc(a);t(u)})}sr(e){return vb(e).get(ad).next(t=>($e(t!==null,2888),t))}_r(e,t){return vb(e).put(ad,t)}ar(e,t){return el(e).put(yS(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=cu(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return el(e).te({range:a,index:Ew},(c,m,y)=>{const v=Nc(m);yh(t,v.target)&&(u=v,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const a=[],u=io(e);return t.forEach(c=>{const m=mr(c.path);a.push(u.put({targetId:r,path:m})),a.push(this.referenceDelegate.addReference(e,r,c))}),re.waitFor(a)}removeMatchingKeys(e,t,r){const a=io(e);return re.forEach(t,u=>{const c=mr(u.path);return re.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=io(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=io(e);let u=bt();return a.te({range:r,ee:!0},(c,m,y)=>{const v=Es(c[1]),S=new Be(v);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=mr(t.path),a=IDBKeyRange.bound([r],[fw(r)],!1,!0);let u=0;return io(e).te({index:uy,ee:!0,range:a},([c,m],y,v)=>{c!==0&&(u++,v.done())}).next(()=>u>0)}Rt(e,t){return el(e).get(t).next(r=>r?Nc(r):null)}}function el(s){return Mn(s,pl)}function vb(s){return Mn(s,ru)}function io(s){return Mn(s,gl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="LruGarbageCollector",AS=1048576;function Eb([s,e],[t,r]){const a=at(s,t);return a===0?at(e,r):a}class sN{constructor(e){this.cr=e,this.buffer=new Ut(Eb),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Eb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ae(_b,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vo(t)?Ae(_b,"Ignoring IndexedDB error during garbage collection: ",t):await yo(t)}await this.Ir(3e5)})}}class aN{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Ur.le);const r=new sN(t);return this.Er.forEachTarget(e,a=>r.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>r.Pr(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(yb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yb):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,a,u,c,m,y,v;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),a=this.params.maximumSequenceNumbersToCollect):a=R,c=Date.now(),this.nthSequenceNumber(e,a))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(v=Date.now(),tl()<=St.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-S}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${R} documents in `+(v-y)+`ms
Total Duration: ${v-S}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:R})))}}function RS(s,e){return new aN(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t){this.db=e,this.garbageCollector=RS(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,a)=>t(a))}addReference(e,t,r){return Cf(e,r)}removeReference(e,t,r){return Cf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Cf(e,t)}gr(e,t){return function(a,u){let c=!1;return SS(a).ne(m=>wS(a,m,u).next(y=>(y&&(c=!0),re.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let u=0;return this.mr(e,(c,m)=>{if(m<=t){const y=this.gr(e,c).next(v=>{if(!v)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ze.min()),io(e).delete(function(R){return[0,mr(R.path)]}(c))))});a.push(y)}}).next(()=>re.waitFor(a)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Cf(e,t)}mr(e,t){const r=io(e);let a,u=Ur.le;return r.te({index:uy},([c,m],{path:y,sequenceNumber:v})=>{c===0?(u!==Ur.le&&t(new Be(Es(a)),u),u=v,a=y):u=Ur.le}).next(()=>{u!==Ur.le&&t(new Be(Es(a)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cf(s,e){return io(s).put(function(r,a){return{targetId:0,path:mr(r.path),sequenceNumber:a}}(e,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.changes=new ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ho(e).put(r)}removeEntry(e,t,r){return Ho(e).delete(function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],gd(c),m[m.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return Ho(e).te({index:qf,range:IDBKeyRange.only(Rc(t))},(a,u)=>{r=this.yr(t,u)}).next(()=>r)}wr(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return Ho(e).te({index:qf,range:IDBKeyRange.only(Rc(t))},(a,u)=>{r={document:this.yr(t,u),size:vd(u)}}).next(()=>r)}getEntries(e,t){let r=Ci();return this.br(e,t,(a,u)=>{const c=this.yr(a,u);r=r.insert(a,c)}).next(()=>r)}Sr(e,t){let r=Ci(),a=new Jt(Be.comparator);return this.br(e,t,(u,c)=>{const m=this.yr(u,c);r=r.insert(u,m),a=a.insert(u,vd(c))}).next(()=>({documents:r,Dr:a}))}br(e,t,r){if(t.isEmpty())return re.resolve();let a=new Ut(wb);t.forEach(y=>a=a.add(y));const u=IDBKeyRange.bound(Rc(a.first()),Rc(a.last())),c=a.getIterator();let m=c.getNext();return Ho(e).te({index:qf,range:u},(y,v,S)=>{const R=Be.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;m&&wb(m,R)<0;)r(m,null),m=c.getNext();m&&m.isEqual(R)&&(r(m,v),m=c.hasNext()?c.getNext():null),m?S.H(Rc(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,u){const c=t.path,m=[c.popLast().toArray(),c.lastSegment(),gd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],y=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ho(e).J(IDBKeyRange.bound(m,y,!0)).next(v=>{u==null||u.incrementDocumentReadCount(v.length);let S=Ci();for(const R of v){const D=this.yr(Be.fromSegments(R.prefixPath.concat(R.collectionGroup,R.documentId)),R);D.isFoundDocument()&&(vh(t,D)||a.has(D.key))&&(S=S.insert(D.key,D))}return S})}getAllFromCollectionGroup(e,t,r,a){let u=Ci();const c=Tb(t,r),m=Tb(t,si.max());return Ho(e).te({index:_w,range:IDBKeyRange.bound(c,m,!0)},(y,v,S)=>{const R=this.yr(Be.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);u=u.insert(R.key,R),u.size===a&&S.done()}).next(()=>u)}newChangeBuffer(e){return new lN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bb(e).get(pg).next(t=>($e(!!t,20021),t))}pr(e,t){return bb(e).put(pg,t)}yr(e,t){if(t){const r=YO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ze.min())))return r}return dn.newInvalidDocument(e)}}function CS(s){return new uN(s)}class lN extends xS{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new ha(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Ut((u,c)=>at(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.Cr.get(u);if(t.push(this.vr.removeEntry(e,u,m.readTime)),c.isValidDocument()){const y=sb(this.vr.serializer,c);a=a.add(u.path.popLast());const v=vd(y);r+=v-m.size,t.push(this.vr.addEntry(e,u,y))}else if(r-=m.size,this.trackRemovals){const y=sb(this.vr.serializer,c.convertToNoDocument(Ze.min()));t.push(this.vr.addEntry(e,u,y))}}),a.forEach(u=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.vr.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:a})=>(a.forEach((u,c)=>{this.Cr.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function bb(s){return Mn(s,$c)}function Ho(s){return Mn(s,sd)}function Rc(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tb(s,e){const t=e.documentKey.path.toArray();return[s,gd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wb(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(a=at(t[u],r[u]),a)return a;return a=at(t.length,r.length),a||(a=at(t[t.length-2],r[r.length-2]),a||at(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&zc(r.mutation,a,ea.empty(),Qn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=bt()){const a=bs();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(u=>{let c=Dc();return u.forEach((m,y)=>{c=c.insert(m,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=bs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,bt()))}populateOverlays(e,t,r){const a=[];return r.forEach(u=>{t.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,a){let u=Ci();const c=Bc(),m=function(){return Bc()}();return t.forEach((y,v)=>{const S=r.get(v.key);a.has(v.key)&&(S===void 0||S.mutation instanceof Nl)?u=u.insert(v.key,v):S!==void 0?(c.set(v.key,S.mutation.getFieldMask()),zc(S.mutation,v,S.mutation.getFieldMask(),Qn.now())):c.set(v.key,ea.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((v,S)=>c.set(v,S)),t.forEach((v,S)=>{var R;return m.set(v,new cN(S,(R=c.get(v))!==null&&R!==void 0?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Bc();let a=new Jt((c,m)=>c-m),u=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(y=>{const v=t.get(y);if(v===null)return;let S=r.get(y)||ea.empty();S=m.applyToLocalView(v,S),r.set(y,S);const R=(a.get(m.batchId)||bt()).add(y);a=a.insert(m.batchId,R)})}).next(()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,S=y.value,R=$w();S.forEach(D=>{if(!u.has(D)){const z=Zw(t.get(D),r.get(D));z!==null&&R.set(D,z),u=u.add(D)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,R))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return Be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-u.size):re.resolve(bs());let m=dl,y=u;return c.next(v=>re.forEach(v,(S,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(S)?re.resolve():this.remoteDocumentCache.getEntry(e,S).next(D=>{y=y.insert(S,D)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,y,v,bt())).next(S=>({batchId:m,changes:yO(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let a=Dc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const u=t.collectionGroup;let c=Dc();return this.indexManager.getCollectionParents(e,u).next(m=>re.forEach(m,y=>{const v=function(R,D){return new Ud(D,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,r,a).next(S=>{S.forEach((R,D)=>{c=c.insert(R,D)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,a))).next(c=>{u.forEach((y,v)=>{const S=v.getKey();c.get(S)===null&&(c=c.insert(S,dn.newInvalidDocument(S)))});let m=Dc();return c.forEach((y,v)=>{const S=u.get(y);S!==void 0&&zc(S.mutation,v,ea.empty(),Qn.now()),vh(t,v)&&(m=m.insert(y,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return re.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:wr(a.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:vS(a.bundledQuery),readTime:wr(a.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.overlays=new Jt(Be.comparator),this.Or=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bs();return re.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,u)=>{this.St(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Or.get(r);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Or.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const a=bs(),u=t.length+1,c=new Be(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&y.largestBatchId>r&&a.set(y.getKey(),y)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let u=new Jt((v,S)=>v-S);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let S=u.get(v.largestBatchId);S===null&&(S=bs(),u=u.insert(v.largestBatchId,S)),S.set(v.getKey(),v)}}const m=bs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,S)=>m.set(v,S)),!(m.size()>=a)););return re.resolve(m)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(r.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new _y(t,r));let u=this.Or.get(t);u===void 0&&(u=bt(),this.Or.set(t,u)),this.Or.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.Nr=new Ut(Gn.Br),this.Lr=new Ut(Gn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Gn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Gn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Be(new Qt([])),r=new Gn(t,e),a=new Gn(t,e+1),u=[];return this.Lr.forEachInRange([r,a],c=>{this.Qr(c),u.push(c.key)}),u}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Be(new Qt([])),r=new Gn(t,e),a=new Gn(t,e+1);let u=bt();return this.Lr.forEachInRange([r,a],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Gn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Be.comparator(e.key,t.key)||at(e.Gr,t.Gr)}static kr(e,t){return at(e.Gr,t.Gr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ut(Gn.Br)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const u=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new yy(u,t,r,a);this.mutationQueue.push(c);for(const m of a)this.zr=this.zr.add(new Gn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Hr(r),u=a<0?0:a;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?nu:this.Jn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gn(t,0),a=new Gn(t,Number.POSITIVE_INFINITY),u=[];return this.zr.forEachInRange([r,a],c=>{const m=this.jr(c.Gr);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(at);return t.forEach(a=>{const u=new Gn(a,0),c=new Gn(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([u,c],m=>{r=r.add(m.Gr)})}),re.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const c=new Gn(new Be(u),0);let m=new Ut(at);return this.zr.forEachWhile(y=>{const v=y.key.path;return!!r.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.Gr)),!0)},c),re.resolve(this.Jr(m))}Jr(e){const t=[];return e.forEach(r=>{const a=this.jr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){$e(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return re.forEach(t.mutations,a=>{const u=new Gn(a.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Gn(t,0),a=this.zr.firstAfterOrEqual(r);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.Zr=e,this.docs=function(){return new Jt(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),u=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Ci();return t.forEach(a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():dn.newInvalidDocument(a))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let u=Ci();const c=t.path,m=new Be(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:S}}=y.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||ay(mw(S),r)<=0||(a.has(S.key)||vh(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,a){He(9500)}Xr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new gN(this)}getSize(e){return re.resolve(this.size)}}class gN extends xS{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.persistence=e,this.ei=new ha(t=>cu(t),yh),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.ti=0,this.ni=new wy,this.targetCount=0,this.ri=du.rr()}forEachTarget(e,t){return this.ei.forEach((r,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),re.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new du(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.ar(t),re.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let a=0;const u=[];return this.ei.forEach((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ei.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),re.waitFor(u).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach(c=>{u.push(a.markPotentiallyOrphaned(e,c))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t){this.ii={},this.overlays={},this.si=new Ur(0),this.oi=!1,this.oi=!0,this._i=new dN,this.referenceDelegate=e(this),this.ai=new yN(this),this.indexManager=new nN,this.remoteDocumentCache=function(a){return new pN(a)}(r=>this.referenceDelegate.ui(r)),this.serializer=new gS(t),this.ci=new hN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new mN(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const a=new vN(this.si.next());return this.referenceDelegate.li(),r(a).next(u=>this.referenceDelegate.hi(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Pi(e,t){return re.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class vN extends gw{constructor(e){super(),this.currentSequenceNumber=e}}class Hd{constructor(e){this.persistence=e,this.Ti=new wy,this.Ii=null}static Ei(e){return new Hd(e)}get di(){if(this.Ii)return this.Ii;throw He(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(u=>this.di.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,r=>{const a=Be.fromPath(r);return this.Ai(e,a).next(u=>{u||t.removeEntry(a,Ze.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return re.or([()=>re.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class _d{constructor(e,t){this.persistence=e,this.Ri=new ha(r=>mr(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=RS(this,t)}static Ei(e,t){return new _d(e,t)}li(){}hi(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return re.forEach(this.Ri,(r,a)=>this.gr(e,r,a).next(u=>u?re.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(m=>{m||(r++,u.removeEntry(c,Ze.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),re.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kf(e.data.value)),t}gr(e,t,r){return re.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return re.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.serializer=e}q(e,t,r,a){const u=new Od("createOrUpgrade",t);r<1&&a>=1&&(function(y){y.createObjectStore(ph)}(e),function(y){y.createObjectStore(Yc,{keyPath:CD}),y.createObjectStore($i,{keyPath:kE,autoIncrement:!0}).createIndex(eu,ME,{unique:!0}),y.createObjectStore(ml)}(e),Sb(e),function(y){y.createObjectStore(Yo)}(e));let c=re.resolve();return r<3&&a>=3&&(r!==0&&(function(y){y.deleteObjectStore(gl),y.deleteObjectStore(pl),y.deleteObjectStore(ru)}(e),Sb(e)),c=c.next(()=>function(y){const v=y.store(ru),S={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return v.put(ad,S)}(u))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(y,v){return v.store($i).J().next(R=>{y.deleteObjectStore($i),y.createObjectStore($i,{keyPath:kE,autoIncrement:!0}).createIndex(eu,ME,{unique:!0});const D=v.store($i),z=R.map(H=>D.put(H));return re.waitFor(z)})}(e,u))),c=c.next(()=>{(function(y){y.createObjectStore(yl,{keyPath:UD})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.Vi(u))),r<6&&a>=6&&(c=c.next(()=>(function(y){y.createObjectStore($c)}(e),this.mi(u)))),r<7&&a>=7&&(c=c.next(()=>this.fi(u))),r<8&&a>=8&&(c=c.next(()=>this.gi(e,u))),r<9&&a>=9&&(c=c.next(()=>{(function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.pi(u))),r<11&&a>=11&&(c=c.next(()=>{(function(y){y.createObjectStore(Pd,{keyPath:BD})})(e),function(y){y.createObjectStore(Vd,{keyPath:zD})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(y){const v=y.createObjectStore(kd,{keyPath:QD});v.createIndex(yg,YD,{unique:!1}),v.createIndex(ww,$D,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(y){const v=y.createObjectStore(sd,{keyPath:OD});v.createIndex(qf,ND),v.createIndex(_w,PD)}(e)).next(()=>this.yi(e,u)).next(()=>e.deleteObjectStore(Yo))),r<14&&a>=14&&(c=c.next(()=>this.wi(e,u))),r<15&&a>=15&&(c=c.next(()=>function(y){y.createObjectStore(ly,{keyPath:jD,autoIncrement:!0}).createIndex(gg,qD,{unique:!1}),y.createObjectStore(od,{keyPath:FD}).createIndex(bw,KD,{unique:!1}),y.createObjectStore(ud,{keyPath:HD}).createIndex(Tw,GD,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(od).clear()}).next(()=>{t.objectStore(ud).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(y){y.createObjectStore(cy,{keyPath:XD})})(e)})),c}mi(e){let t=0;return e.store(Yo).te((r,a)=>{t+=vd(a)}).next(()=>{const r={byteSize:t};return e.store($c).put(pg,r)})}Vi(e){const t=e.store(Yc),r=e.store($i);return t.J().next(a=>re.forEach(a,u=>{const c=IDBKeyRange.bound([u.userId,nu],[u.userId,u.lastAcknowledgedBatchId]);return r.J(eu,c).next(m=>re.forEach(m,y=>{$e(y.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:y.batchId});const v=Xo(this.serializer,y);return TS(e,u.userId,v).next(()=>{})}))}))}fi(e){const t=e.store(gl),r=e.store(Yo);return e.store(ru).get(ad).next(a=>{const u=[];return r.te((c,m)=>{const y=new Qt(c),v=function(R){return[0,mr(R)]}(y);u.push(t.get(v).next(S=>S?re.resolve():(R=>t.put({targetId:0,path:mr(R),sequenceNumber:a.highestListenSequenceNumber}))(y)))}).next(()=>re.waitFor(u))})}gi(e,t){e.createObjectStore(Xc,{keyPath:LD});const r=t.store(Xc),a=new Ty,u=c=>{if(a.add(c)){const m=c.lastSegment(),y=c.popLast();return r.put({collectionId:m,parent:mr(y)})}};return t.store(Yo).te({ee:!0},(c,m)=>{const y=new Qt(c);return u(y.popLast())}).next(()=>t.store(ml).te({ee:!0},([c,m,y],v)=>{const S=Es(m);return u(S.popLast())}))}pi(e){const t=e.store(pl);return t.te((r,a)=>{const u=Nc(a),c=yS(this.serializer,u);return t.put(c)})}yi(e,t){const r=t.store(Yo),a=[];return r.te((u,c)=>{const m=t.store(sd),y=function(R){return R.document?new Be(Qt.fromString(R.document.name).popFirst(5)):R.noDocument?Be.fromSegments(R.noDocument.path):R.unknownDocument?Be.fromSegments(R.unknownDocument.path):He(36783)}(c).path.toArray(),v={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(m.put(v))}).next(()=>re.waitFor(a))}wi(e,t){const r=t.store($i),a=CS(this.serializer),u=new Sy(Hd.Ei,this.serializer.wt);return r.J().next(c=>{const m=new Map;return c.forEach(y=>{var v;let S=(v=m.get(y.userId))!==null&&v!==void 0?v:bt();Xo(this.serializer,y).keys().forEach(R=>S=S.add(R)),m.set(y.userId,S)}),re.forEach(m,(y,v)=>{const S=new fr(v),R=Fd.bt(this.serializer,S),D=u.getIndexManager(S),z=Kd.bt(S,this.serializer,D,u.referenceDelegate);return new DS(a,z,R,D).recalculateAndSaveOverlaysForDocumentKeys(new vg(t,Ur.le),y).next()})})}}function Sb(s){s.createObjectStore(gl,{keyPath:kD}).createIndex(uy,MD,{unique:!0}),s.createObjectStore(pl,{keyPath:"targetId"}).createIndex(Ew,VD,{unique:!0}),s.createObjectStore(ru)}const eo="IndexedDbPersistence",Qp=18e5,Yp=5e3,$p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EN="main";class Ay{constructor(e,t,r,a,u,c,m,y,v,S,R=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=u,this.window=c,this.document=m,this.Si=v,this.Di=S,this.Ci=R,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=D=>Promise.resolve(),!Ay.C())throw new Ge(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oN(this,a),this.Bi=t+EN,this.serializer=new gS(y),this.Li=new ho(this.Bi,this.Ci,new _N(this.serializer)),this._i=new XO,this.ai=new iN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CS(this.serializer),this.ci=new $O,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,S===!1&&En(eo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(we.FAILED_PRECONDITION,$p);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new Ur(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(async()=>{this.started&&await this.qi()}))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Df(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(vo(e))return Ae(eo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae(eo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return xc(e).get($u).next(t=>re.resolve(this.Hi(t)))}Ji(e){return Df(e).delete(this.clientId)}async Yi(){if(this.isPrimary&&!this.Zi(this.Oi,Qp)){this.Oi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Mn(t,yl);return r.J().next(a=>{const u=this.Xi(a,Qp),c=a.filter(m=>u.indexOf(m)===-1);return re.forEach(c,m=>r.delete(m.clientId)).next(()=>c)})}).catch(()=>[]);if(this.ki)for(const t of e)this.ki.removeItem(this.es(t.clientId))}}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?re.resolve(!0):xc(e).get($u).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,Yp)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new Ge(we.FAILED_PRECONDITION,$p);return!1}}return!(!this.networkEnabled||!this.inForeground)||Df(e).J().next(r=>this.Xi(r,Yp).find(a=>{if(this.clientId!==a.clientId){const u=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(u||c&&m)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Ae(eo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),await this.Li.runTransaction("shutdown","readwrite",[ph,yl],e=>{const t=new vg(e,Ur.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>Df(e).J().next(t=>this.Xi(t,Qp).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return Kd.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rN(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Fd.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae(eo,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",u=function(y){return y===17?ZD:y===16?JD:y===15?hy:y===14?Iw:y===13?Aw:y===12?WD:y===11?Sw:void He(60245)}(this.Ci);let c;return this.Li.runTransaction(e,a,u,m=>(c=new vg(m,this.si?this.si.next():Ur.le),t==="readwrite-primary"?this.Wi(c).next(y=>!!y||this.Gi(c)).next(y=>{if(!y)throw En(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new Ge(we.FAILED_PRECONDITION,pw);return r(c)}).next(y=>this.ji(c).next(()=>y)):this.cs(c).next(()=>r(c)))).then(m=>(c.raiseOnCommittedEvent(),m))}cs(e){return xc(e).get($u).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,Yp)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(we.FAILED_PRECONDITION,$p)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xc(e).put($u,t)}static C(){return ho.C()}zi(e){const t=xc(e);return t.get($u).next(r=>this.Hi(r)?(Ae(eo,"Releasing primary lease."),t.delete($u)):re.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(En(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;_T()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return Ae(eo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return En(eo,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){En("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xc(s){return Mn(s,ph)}function Df(s){return Mn(s,yl)}function OS(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=a}static Ps(e,t){let r=bt(),a=bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new Iy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return _T()?8:yw(kn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,a){const u={result:null};return this.Rs(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.Vs(e,t,a,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new bN;return this.fs(e,t,c).next(m=>{if(u.result=m,this.Is)return this.gs(e,t,c,m.size)})}).next(()=>u.result)}gs(e,t,r,a){return r.documentReadCount<this.Es?(tl()<=St.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),re.resolve()):(tl()<=St.DEBUG&&Ae("QueryEngine","Query:",nl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(tl()<=St.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(t))):re.resolve())}Rs(e,t){if($E(t))return re.resolve(null);let r=ii(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Sg(t,null,"F"),r=ii(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=bt(...u);return this.As.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(y=>{const v=this.ps(t,m);return this.ys(t,v,c,y.readTime)?this.Rs(e,Sg(t,null,"F")):this.ws(e,v,t,y)}))})))}Vs(e,t,r,a){return $E(t)||a.isEqual(Ze.min())?re.resolve(null):this.As.getDocuments(e,r).next(u=>{const c=this.ps(t,u);return this.ys(t,c,r,a)?re.resolve(null):(tl()<=St.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),nl(t)),this.ws(e,c,t,dw(a,dl)).next(m=>m))})}ps(e,t){let r=new Ut(Qw(e));return t.forEach((a,u)=>{vh(e,u)&&(r=r.add(u))}),r}ys(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}fs(e,t,r){return tl()<=St.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",nl(t)),this.As.getDocumentsMatchingQuery(e,t,si.min(),r)}ws(e,t,r,a){return this.As.getDocumentsMatchingQuery(e,r,a).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LocalStore",TN=3e8;class wN{constructor(e,t,r,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new Jt(at),this.Ds=new ha(u=>cu(u),yh),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DS(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function PS(s,e,t,r){return new wN(s,e,t,r)}async function VS(s,e){const t=Ye(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(u=>(a=u,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let y=bt();for(const v of a){c.push(v.batchId);for(const S of v.mutations)y=y.add(S.key)}for(const v of u){m.push(v.batchId);for(const S of v.mutations)y=y.add(S.key)}return t.localDocuments.getDocuments(r,y).next(v=>({Ms:v,removedBatchIds:c,addedBatchIds:m}))})})}function SN(s,e){const t=Ye(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),u=t.Cs.newChangeBuffer({trackRemovals:!0});return function(m,y,v,S){const R=v.batch,D=R.keys();let z=re.resolve();return D.forEach(H=>{z=z.next(()=>S.getEntry(y,H)).next(he=>{const W=v.docVersions.get(H);$e(W!==null,48541),he.version.compareTo(W)<0&&(R.applyToRemoteDocument(he,v),he.isValidDocument()&&(he.setReadTime(v.commitVersion),S.addEntry(he)))})}),z.next(()=>m.mutationQueue.removeMutationBatch(y,R))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=bt();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function kS(s){const e=Ye(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function AN(s,e){const t=Ye(s),r=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const m=[];e.targetChanges.forEach((S,R)=>{const D=a.get(R);if(!D)return;m.push(t.ai.removeMatchingKeys(u,S.removedDocuments,R).next(()=>t.ai.addMatchingKeys(u,S.addedDocuments,R)));let z=D.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(R)!==null?z=z.withResumeToken(Tn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):S.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(S.resumeToken,r)),a=a.insert(R,z),function(he,W,fe){return he.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=TN?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0}(D,z,S)&&m.push(t.ai.updateTargetData(u,z))});let y=Ci(),v=bt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(IN(u,c,e.documentUpdates).next(S=>{y=S.xs,v=S.Os})),!r.isEqual(Ze.min())){const S=t.ai.getLastRemoteSnapshotVersion(u).next(R=>t.ai.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return re.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,v)).next(()=>y)}).then(u=>(t.Ss=a,u))}function IN(s,e,t){let r=bt(),a=bt();return t.forEach(u=>r=r.add(u)),e.getEntries(s,r).next(u=>{let c=Ci();return t.forEach((m,y)=>{const v=u.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Ze.min())?(e.removeEntry(m,y.readTime),c=c.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),c=c.insert(m,y)):Ae(Ry,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)}),{xs:c,Os:a}})}function RN(s,e){const t=Ye(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ed(s,e){const t=Ye(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.ai.getTargetData(r,e).next(u=>u?(a=u,re.resolve(a)):t.ai.allocateTargetId(r).next(c=>(a=new ta(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ss.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function wl(s,e,t){const r=Ye(s),a=r.Ss.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!vo(c))throw c;Ae(Ry,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(a.target)}function Ng(s,e,t){const r=Ye(s);let a=Ze.min(),u=bt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(y,v,S){const R=Ye(y),D=R.Ds.get(S);return D!==void 0?re.resolve(R.Ss.get(D)):R.ai.getTargetData(v,S)}(r,c,ii(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(c,m.targetId).next(y=>{u=y})}).next(()=>r.bs.getDocumentsMatchingQuery(c,e,t?a:Ze.min(),t?u:bt())).next(m=>(US(r,Gw(e),m),{documents:m,Ns:u})))}function MS(s,e){const t=Ye(s),r=Ye(t.ai),a=t.Ss.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Rt(u,e).next(c=>c?c.target:null))}function LS(s,e){const t=Ye(s),r=t.vs.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Cs.getAllFromCollectionGroup(a,e,dw(r,dl),Number.MAX_SAFE_INTEGER)).then(a=>(US(t,e,a),a))}function US(s,e,t){let r=s.vs.get(e)||Ze.min();t.forEach((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.vs.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firestore_clients";function Ab(s,e){return`${BS}_${s}_${e}`}const zS="firestore_mutations";function Ib(s,e,t){let r=`${zS}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const jS="firestore_targets";function Xp(s,e){return`${jS}_${s}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="SharedClientState";class bd{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static qs(e,t,r){const a=JSON.parse(r);let u,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(u=new Ge(a.error.code,a.error.message))),c?new bd(e,t,a.state,u):(En(vs,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){const r=JSON.parse(t);let a,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(a=new Ge(r.error.code,r.error.message))),u?new jc(e,r.state,a):(En(vs,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Td{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,u=py();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=RD(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return a?new Td(e,u):(En(vs,`Failed to parse client data for instance '${e}': ${t}`),null)}}class xy{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new xy(t.clientId,t.onlineState):(En(vs,`Failed to parse online state: ${e}`),null)}}class Pg{constructor(){this.activeTargetIds=py()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wp{constructor(e,t,r,a,u){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new Jt(at),this.started=!1,this.js=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Hs=Ab(this.persistenceKey,this.Ks),this.Js=function(y){return`firestore_sequence_number_${y}`}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new Pg),this.Ys=new RegExp(`^${BS}_${c}_([^_]*)$`),this.Zs=new RegExp(`^${zS}_${c}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${jS}_${c}_(\\d+)$`),this.eo=function(y){return`firestore_online_state_${y}`}(this.persistenceKey),this.no=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.us();for(const r of e){if(r===this.Ks)continue;const a=this.getItem(Ab(this.persistenceKey,r));if(a){const u=Td.qs(r,a);u&&(this.zs=this.zs.insert(u.clientId,u))}}this.ro();const t=this.storage.getItem(this.eo);if(t){const r=this.io(t);r&&this.so(r)}for(const r of this.js)this.Gs(r);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Xp(this.persistenceKey,e));if(a){const u=jc.qs(e,a);u&&(r=u.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xp(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.ao(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae(vs,"READ",e,t),t}setItem(e,t){Ae(vs,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae(vs,"REMOVE",e),this.storage.removeItem(e)}Gs(e){const t=e;if(t.storageArea===this.storage){if(Ae(vs,"EVENT",t.key,t.newValue),t.key===this.Hs)return void En("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ys.test(t.key)){if(t.newValue==null){const r=this.Po(t.key);return this.To(r,null)}{const r=this.Io(t.key,t.newValue);if(r)return this.To(r.clientId,r)}}else if(this.Zs.test(t.key)){if(t.newValue!==null){const r=this.Eo(t.key,t.newValue);if(r)return this.Ao(r)}}else if(this.Xs.test(t.key)){if(t.newValue!==null){const r=this.Ro(t.key,t.newValue);if(r)return this.Vo(r)}}else if(t.key===this.eo){if(t.newValue!==null){const r=this.io(t.newValue);if(r)return this.so(r)}}else if(t.key===this.Js){const r=function(u){let c=Ur.le;if(u!=null)try{const m=JSON.parse(u);$e(typeof m=="number",30636,{mo:u}),c=m}catch(m){En(vs,"Failed to read sequence number from WebStorage",m)}return c}(t.newValue);r!==Ur.le&&this.sequenceNumberHandler(r)}else if(t.key===this.no){const r=this.fo(t.newValue);await Promise.all(r.map(a=>this.syncEngine.po(a)))}}}else this.js.push(t)})}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){const a=new bd(this.currentUser,e,t,r),u=Ib(this.persistenceKey,this.currentUser,e);this.setItem(u,a.Qs())}ao(e){const t=Ib(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){const t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,r){const a=Xp(this.persistenceKey,e),u=new jc(e,t,r);this.setItem(a,u.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const r=this.Po(e);return Td.qs(r,t)}Eo(e,t){const r=this.Zs.exec(e),a=Number(r[1]),u=r[2]!==void 0?r[2]:null;return bd.qs(new fr(u),a,t)}Ro(e,t){const r=this.Xs.exec(e),a=Number(r[1]);return jc.qs(a,t)}io(e){return xy.qs(e)}fo(e){return JSON.parse(e)}async Ao(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);Ae(vs,`Ignoring mutation for non-active user ${e.user.uid}`)}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const r=t?this.zs.insert(e,t):this.zs.remove(e),a=this.oo(this.zs),u=this.oo(r),c=[],m=[];return u.forEach(y=>{a.has(y)||c.push(y)}),a.forEach(y=>{u.has(y)||m.push(y)}),this.syncEngine.bo(c,m).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=py();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class qS{constructor(){this.So=new Pg,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Pg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="ConnectivityMonitor";class xb{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ae(Rb,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ae(Rb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of=null;function Vg(){return Of===null?Of=function(){return 268435456+Math.round(2147483648*Math.random())}():Of++,"0x"+Of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="RestConnection",CN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DN{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${a}`,this.qo=this.databaseId.database===ld?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Qo(e,t,r,a,u){const c=Vg(),m=this.$o(e,t.toUriEncodedString());Ae(Jp,`Sending RPC '${e}' ${c}:`,m,r);const y={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(y,a,u);const{host:v}=new URL(m),S=lh(v);return this.Ko(e,m,y,r,S).then(R=>(Ae(Jp,`Received RPC '${e}' ${c}: `,R),R),R=>{throw Hc(Jp,`RPC '${e}' ${c} failed with error: `,R,"url: ",m,"request:",r),R})}Wo(e,t,r,a,u,c){return this.Qo(e,t,r,a,u)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,u)=>e[u]=a),r&&r.headers.forEach((a,u)=>e[u]=a)}$o(e,t){const r=CN[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="WebChannelConnection";class NN extends DN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,a,u){const c=Vg();return new Promise((m,y)=>{const v=new iw;v.setWithCredentials(!0),v.listenOnce(sw.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Bf.NO_ERROR:const R=v.getResponseJson();Ae(hr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(R)),m(R);break;case Bf.TIMEOUT:Ae(hr,`RPC '${e}' ${c} timed out`),y(new Ge(we.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const D=v.getStatus();if(Ae(hr,`RPC '${e}' ${c} failed with status:`,D,"response text:",v.getResponseText()),D>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const H=z==null?void 0:z.error;if(H&&H.status&&H.message){const he=function(fe){const Ee=fe.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(Ee)>=0?Ee:we.UNKNOWN}(H.status);y(new Ge(he,H.message))}else y(new Ge(we.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new Ge(we.UNAVAILABLE,"Connection failed."));break;default:He(9055,{s_:e,streamId:c,o_:v.getLastErrorCode(),__:v.getLastError()})}}finally{Ae(hr,`RPC '${e}' ${c} completed.`)}});const S=JSON.stringify(a);Ae(hr,`RPC '${e}' ${c} sending request:`,a),v.send(t,"POST",S,r,15)})}a_(e,t,r){const a=Vg(),u=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uw(),m=ow(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Uo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const S=u.join("");Ae(hr,`Creating RPC '${e}' stream ${a}: ${S}`,y);const R=c.createWebChannel(S,y);let D=!1,z=!1;const H=new ON({Go:W=>{z?Ae(hr,`Not sending because RPC '${e}' stream ${a} is closed:`,W):(D||(Ae(hr,`Opening RPC '${e}' stream ${a} transport.`),R.open(),D=!0),Ae(hr,`RPC '${e}' stream ${a} sending:`,W),R.send(W))},zo:()=>R.close()}),he=(W,fe,Ee)=>{W.listen(fe,me=>{try{Ee(me)}catch(De){setTimeout(()=>{throw De},0)}})};return he(R,Cc.EventType.OPEN,()=>{z||(Ae(hr,`RPC '${e}' stream ${a} transport opened.`),H.t_())}),he(R,Cc.EventType.CLOSE,()=>{z||(z=!0,Ae(hr,`RPC '${e}' stream ${a} transport closed`),H.r_())}),he(R,Cc.EventType.ERROR,W=>{z||(z=!0,Hc(hr,`RPC '${e}' stream ${a} transport errored. Name:`,W.name,"Message:",W.message),H.r_(new Ge(we.UNAVAILABLE,"The operation could not be completed")))}),he(R,Cc.EventType.MESSAGE,W=>{var fe;if(!z){const Ee=W.data[0];$e(!!Ee,16349);const me=Ee,De=(me==null?void 0:me.error)||((fe=me[0])===null||fe===void 0?void 0:fe.error);if(De){Ae(hr,`RPC '${e}' stream ${a} received error:`,De);const Pe=De.status;let je=function(V){const j=Cn[V];if(j!==void 0)return nS(j)}(Pe),U=De.message;je===void 0&&(je=we.INTERNAL,U="Unknown error status: "+Pe+" with message "+De.message),z=!0,H.r_(new Ge(je,U)),R.close()}else Ae(hr,`RPC '${e}' stream ${a} received:`,Ee),H.i_(Ee)}}),he(m,aw.STAT_EVENT,W=>{W.stat===fg.PROXY?Ae(hr,`RPC '${e}' stream ${a} detected buffering proxy`):W.stat===fg.NOPROXY&&Ae(hr,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{H.n_()},0),H}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof window<"u"?window:null}function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(s){return new LO(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,r=1e3,a=1.5,u=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=a,this.l_=u,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-r);a>0&&Ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="PersistentStream";class GS{constructor(e,t,r,a,u,c,m,y){this.bi=e,this.R_=r,this.V_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new HS(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(En(t.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.m_===t&&this.B_(r,a)},r=>{e(()=>{const a=new Ge(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(a)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{r(()=>this.L_(a))}),this.stream.onMessage(a=>{r(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ae(Cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Ae(Cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PN extends GS{constructor(e,t,r,a,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=jO(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ze.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ze.min():c.readTime?wr(c.readTime):Ze.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=Rg(this.serializer),t.addTarget=function(u,c){let m;const y=c.target;if(m=hd(y)?{documents:cS(u,y)}:{query:hS(u,y).gt},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=UO(u,c.resumeToken);const v=Ag(u,c.expectedCount);v!==null&&(m.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ze.min())>0){m.readTime=dd(u,c.snapshotVersion.toTimestamp());const v=Ag(u,c.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const r=FO(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=Rg(this.serializer),t.removeTarget=e,this.F_(t)}}class VN extends GS{constructor(e,t,r,a,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=qO(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=Rg(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pd(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{}class MN extends kN{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Qo(e,Ig(t,r),a,u,c)).catch(u=>{throw u.name==="FirebaseError"?(u.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ge(we.UNKNOWN,u.toString())})}Wo(e,t,r,a,u){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,m])=>this.connection.Wo(e,Ig(t,r),a,c,m,u)).catch(c=>{throw c.name==="FirebaseError"?(c.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ge(we.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class LN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(En(t),this.ea=!1):Ae("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu="RemoteStore";class UN{constructor(e,t,r,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=u,this.ca.vo(c=>{r.enqueueAndForget(async()=>{yu(this)&&(Ae(mu,"Restarting streams for network reachability change."),await async function(y){const v=Ye(y);v.aa.add(4),await Th(v),v.la.set("Unknown"),v.aa.delete(4),await Gd(v)}(this))})}),this.la=new LN(r,a)}}async function Gd(s){if(yu(s))for(const e of s.ua)await e(!0)}async function Th(s){for(const e of s.ua)await e(!1)}function Qd(s,e){const t=Ye(s);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Oy(t)?Dy(t):Pl(t).b_()&&Cy(t,e))}function Sl(s,e){const t=Ye(s),r=Pl(t);t._a.delete(e),r.b_()&&QS(t,e),t._a.size===0&&(r.b_()?r.v_():yu(t)&&t.la.set("Unknown"))}function Cy(s,e){if(s.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pl(s).U_(e)}function QS(s,e){s.ha.Ke(e),Pl(s).K_(e)}function Dy(s){s.ha=new PO({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s._a.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Pl(s).start(),s.la.ta()}function Oy(s){return yu(s)&&!Pl(s).w_()&&s._a.size>0}function yu(s){return Ye(s).aa.size===0}function YS(s){s.ha=void 0}async function BN(s){s.la.set("Online")}async function zN(s){s._a.forEach((e,t)=>{Cy(s,e)})}async function jN(s,e){YS(s),Oy(s)?(s.la.ia(e),Dy(s)):s.la.set("Unknown")}async function qN(s,e,t){if(s.la.set("Online"),e instanceof iS&&e.state===2&&e.cause)try{await async function(a,u){const c=u.cause;for(const m of u.targetIds)a._a.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a._a.delete(m),a.ha.removeTarget(m))}(s,e)}catch(r){Ae(mu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wd(s,r)}else if(e instanceof Gf?s.ha.Xe(e):e instanceof rS?s.ha.ot(e):s.ha.nt(e),!t.isEqual(Ze.min()))try{const r=await kS(s.localStore);t.compareTo(r)>=0&&await function(u,c){const m=u.ha.It(c);return m.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const S=u._a.get(v);S&&u._a.set(v,S.withResumeToken(y.resumeToken,c))}}),m.targetMismatches.forEach((y,v)=>{const S=u._a.get(y);if(!S)return;u._a.set(y,S.withResumeToken(Tn.EMPTY_BYTE_STRING,S.snapshotVersion)),QS(u,y);const R=new ta(S.target,y,v,S.sequenceNumber);Cy(u,R)}),u.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(r){Ae(mu,"Failed to raise snapshot:",r),await wd(s,r)}}async function wd(s,e,t){if(!vo(e))throw e;s.aa.add(1),await Th(s),s.la.set("Offline"),t||(t=()=>kS(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Ae(mu,"Retrying IndexedDB access"),await t(),s.aa.delete(1),await Gd(s)})}function $S(s,e){return e().catch(t=>wd(s,t,e))}async function wh(s){const e=Ye(s),t=po(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:nu;for(;FN(e);)try{const a=await RN(e.localStore,r);if(a===null){e.oa.length===0&&t.v_();break}r=a.batchId,KN(e,a)}catch(a){await wd(e,a)}XS(e)&&WS(e)}function FN(s){return yu(s)&&s.oa.length<10}function KN(s,e){s.oa.push(e);const t=po(s);t.b_()&&t.W_&&t.G_(e.mutations)}function XS(s){return yu(s)&&!po(s).w_()&&s.oa.length>0}function WS(s){po(s).start()}async function HN(s){po(s).H_()}async function GN(s){const e=po(s);for(const t of s.oa)e.G_(t.mutations)}async function QN(s,e,t){const r=s.oa.shift(),a=vy.from(r,e,t);await $S(s,()=>s.remoteSyncer.applySuccessfulWrite(a)),await wh(s)}async function YN(s,e){e&&po(s).W_&&await async function(r,a){if(function(c){return OO(c)&&c!==we.ABORTED}(a.code)){const u=r.oa.shift();po(r).D_(),await $S(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,a)),await wh(r)}}(s,e),XS(s)&&WS(s)}async function Db(s,e){const t=Ye(s);t.asyncQueue.verifyOperationInProgress(),Ae(mu,"RemoteStore received new credentials");const r=yu(t);t.aa.add(3),await Th(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Gd(t)}async function kg(s,e){const t=Ye(s);e?(t.aa.delete(2),await Gd(t)):e||(t.aa.add(2),await Th(t),t.la.set("Unknown"))}function Pl(s){return s.Pa||(s.Pa=function(t,r,a){const u=Ye(t);return u.Y_(),new PN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(s.datastore,s.asyncQueue,{jo:BN.bind(null,s),Jo:zN.bind(null,s),Zo:jN.bind(null,s),Q_:qN.bind(null,s)}),s.ua.push(async e=>{e?(s.Pa.D_(),Oy(s)?Dy(s):s.la.set("Unknown")):(await s.Pa.stop(),YS(s))})),s.Pa}function po(s){return s.Ta||(s.Ta=function(t,r,a){const u=Ye(t);return u.Y_(),new VN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(s.datastore,s.asyncQueue,{jo:()=>Promise.resolve(),Jo:HN.bind(null,s),Zo:YN.bind(null,s),z_:GN.bind(null,s),j_:QN.bind(null,s)}),s.ua.push(async e=>{e?(s.Ta.D_(),await wh(s)):(await s.Ta.stop(),s.oa.length>0&&(Ae(mu,`Stopping write stream with ${s.oa.length} pending writes`),s.oa=[]))})),s.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t,r,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,u){const c=Date.now()+r,m=new Ny(e,t,c,a,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JS(s,e){if(En("AsyncQueue",`${e}: ${s}`),vo(s))return new Ge(we.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static emptySet(e){return new ll(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Dc(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.Ia=new Jt(Be.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Al{constructor(e,t,r,a,u,c,m,y,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,a,u){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new Al(e,t,ll.emptySet(t),c,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class XN{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const a=Ye(t),u=a.queries;a.queries=Nb(),u.forEach((c,m)=>{for(const y of m.Ra)y.onError(r)})})(this,new Ge(we.ABORTED,"Firestore shutting down"))}}function Nb(){return new ha(s=>Hw(s),zd)}async function WN(s,e){const t=Ye(s);let r=3;const a=e.query;let u=t.queries.get(a);u?!u.Va()&&e.ma()&&(r=2):(u=new $N,r=e.ma()?0:1);try{switch(r){case 0:u.Aa=await t.onListen(a,!0);break;case 1:u.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const m=JS(c,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,u),u.Ra.push(e),e.ga(t.onlineState),u.Aa&&e.pa(u.Aa)&&Py(t)}async function JN(s,e){const t=Ye(s),r=e.query;let a=3;const u=t.queries.get(r);if(u){const c=u.Ra.indexOf(e);c>=0&&(u.Ra.splice(c,1),u.Ra.length===0?a=e.ma()?0:1:!u.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZN(s,e){const t=Ye(s);let r=!1;for(const a of e){const u=a.query,c=t.queries.get(u);if(c){for(const m of c.Ra)m.pa(a)&&(r=!0);c.Aa=a}}r&&Py(t)}function eP(s,e,t){const r=Ye(s),a=r.queries.get(e);if(a)for(const u of a.Ra)u.onError(t);r.queries.delete(e)}function Py(s){s.fa.forEach(e=>{e.next()})}var Mg,Pb;(Pb=Mg||(Mg={})).ya="default",Pb.Cache="cache";class tP{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.key=e}}class eA{constructor(e){this.key=e}}class nP{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=bt(),this.mutatedKeys=bt(),this.Ua=Qw(e),this.Ka=new ll(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new Ob,a=t?t.Ka:this.Ka;let u=t?t.mutatedKeys:this.mutatedKeys,c=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((S,R)=>{const D=a.get(S),z=vh(this.query,R)?R:null,H=!!D&&this.mutatedKeys.has(D.key),he=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let W=!1;D&&z?D.data.isEqual(z.data)?H!==he&&(r.track({type:3,doc:z}),W=!0):this.ja(D,z)||(r.track({type:2,doc:z}),W=!0,(y&&this.Ua(z,y)>0||v&&this.Ua(z,v)<0)&&(m=!0)):!D&&z?(r.track({type:0,doc:z}),W=!0):D&&!z&&(r.track({type:1,doc:D}),W=!0,(y||v)&&(m=!0)),W&&(z?(c=c.add(z),u=he?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const S=this.query.limitType==="F"?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Ka:c,za:r,ys:m,mutatedKeys:u}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const u=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((S,R)=>function(z,H){const he=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:W})}};return he(z)-he(H)}(S.type,R.type)||this.Ua(S.doc,R.doc)),this.Ha(r),a=a!=null&&a;const m=t&&!a?this.Ja():[],y=this.$a.size===0&&this.current&&!a?1:0,v=y!==this.Qa;return this.Qa=y,c.length!==0||v?{snapshot:new Al(this.query,e.Ka,u,c,e.mutatedKeys,y===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:m}:{Ya:m}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Ob,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=bt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new eA(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new ZS(r))}),t}Xa(e){this.qa=e.Ns,this.$a=bt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Al.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Vl="SyncEngine";class rP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iP{constructor(e){this.key=e,this.tu=!1}}class sP{constructor(e,t,r,a,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new ha(m=>Hw(m),zd),this.iu=new Map,this.su=new Set,this.ou=new Jt(Be.comparator),this._u=new Map,this.au=new wy,this.uu={},this.cu=new Map,this.lu=du.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function aP(s,e,t=!0){const r=Yd(s);let a;const u=r.ru.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.eu()):a=await tA(r,e,t,!0),a}async function oP(s,e){const t=Yd(s);await tA(t,e,!0,!1)}async function tA(s,e,t,r){const a=await Ed(s.localStore,ii(e)),u=a.targetId,c=s.sharedClientState.addLocalQueryTarget(u,t);let m;return r&&(m=await Vy(s,e,u,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&Qd(s.remoteStore,a),m}async function Vy(s,e,t,r,a){s.Pu=(R,D,z)=>async function(he,W,fe,Ee){let me=W.view.Ga(fe);me.ys&&(me=await Ng(he.localStore,W.query,!1).then(({documents:U})=>W.view.Ga(U,me)));const De=Ee&&Ee.targetChanges.get(W.targetId),Pe=Ee&&Ee.targetMismatches.get(W.targetId)!=null,je=W.view.applyChanges(me,he.isPrimaryClient,De,Pe);return Lg(he,W.targetId,je.Ya),je.snapshot}(s,R,D,z);const u=await Ng(s.localStore,e,!0),c=new nP(e,u.Ns),m=c.Ga(u.documents),y=bh.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),v=c.applyChanges(m,s.isPrimaryClient,y);Lg(s,t,v.Ya);const S=new rP(e,t,c);return s.ru.set(e,S),s.iu.has(t)?s.iu.get(t).push(e):s.iu.set(t,[e]),v.snapshot}async function uP(s,e,t){const r=Ye(s),a=r.ru.get(e),u=r.iu.get(a.targetId);if(u.length>1)return r.iu.set(a.targetId,u.filter(c=>!zd(c,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await wl(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Sl(r.remoteStore,a.targetId),Il(r,a.targetId)}).catch(yo)):(Il(r,a.targetId),await wl(r.localStore,a.targetId,!0))}async function lP(s,e){const t=Ye(s),r=t.ru.get(e),a=t.iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sl(t.remoteStore,r.targetId))}async function nA(s,e){const t=Ye(s);try{const r=await AN(t.localStore,e);e.targetChanges.forEach((a,u)=>{const c=t._u.get(u);c&&($e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?$e(c.tu,14607):a.removedDocuments.size>0&&($e(c.tu,42227),c.tu=!1))}),await vu(t,r,e)}catch(r){await yo(r)}}function Vb(s,e,t){const r=Ye(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ru.forEach((u,c)=>{const m=c.view.ga(e);m.snapshot&&a.push(m.snapshot)}),function(c,m){const y=Ye(c);y.onlineState=m;let v=!1;y.queries.forEach((S,R)=>{for(const D of R.Ra)D.ga(m)&&(v=!0)}),v&&Py(y)}(r.eventManager,e),a.length&&r.nu.Q_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cP(s,e,t){const r=Ye(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r._u.get(e),u=a&&a.key;if(u){let c=new Jt(Be.comparator);c=c.insert(u,dn.newNoDocument(u,Ze.min()));const m=bt().add(u),y=new Eh(Ze.min(),new Map,new Jt(at),c,m);await nA(r,y),r.ou=r.ou.remove(u),r._u.delete(e),Ly(r)}else await wl(r.localStore,e,!1).then(()=>Il(r,e,t)).catch(yo)}async function hP(s,e){const t=Ye(s),r=e.batch.batchId;try{const a=await SN(t.localStore,e);My(t,r,null),ky(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vu(t,a)}catch(a){await yo(a)}}async function fP(s,e,t){const r=Ye(s);try{const a=await function(c,m){const y=Ye(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let S;return y.mutationQueue.lookupMutationBatch(v,m).next(R=>($e(R!==null,37113),S=R.keys(),y.mutationQueue.removeMutationBatch(v,R))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,S,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,S)).next(()=>y.localDocuments.getDocuments(v,S))})}(r.localStore,e);My(r,e,t),ky(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vu(r,a)}catch(a){await yo(a)}}function ky(s,e){(s.cu.get(e)||[]).forEach(t=>{t.resolve()}),s.cu.delete(e)}function My(s,e,t){const r=Ye(s);let a=r.uu[r.currentUser.toKey()];if(a){const u=a.get(e);u&&(t?u.reject(t):u.resolve(),a=a.remove(e)),r.uu[r.currentUser.toKey()]=a}}function Il(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.iu.get(e))s.ru.delete(r),t&&s.nu.Tu(r,t);s.iu.delete(e),s.isPrimaryClient&&s.au.Ur(e).forEach(r=>{s.au.containsKey(r)||rA(s,r)})}function rA(s,e){s.su.delete(e.path.canonicalString());const t=s.ou.get(e);t!==null&&(Sl(s.remoteStore,t),s.ou=s.ou.remove(e),s._u.delete(t),Ly(s))}function Lg(s,e,t){for(const r of t)r instanceof ZS?(s.au.addReference(r.key,e),dP(s,r)):r instanceof eA?(Ae(Vl,"Document no longer in limbo: "+r.key),s.au.removeReference(r.key,e),s.au.containsKey(r.key)||rA(s,r.key)):He(19791,{Iu:r})}function dP(s,e){const t=e.key,r=t.path.canonicalString();s.ou.get(t)||s.su.has(r)||(Ae(Vl,"New document in limbo: "+t),s.su.add(r),Ly(s))}function Ly(s){for(;s.su.size>0&&s.ou.size<s.maxConcurrentLimboResolutions;){const e=s.su.values().next().value;s.su.delete(e);const t=new Be(Qt.fromString(e)),r=s.lu.next();s._u.set(r,new iP(t)),s.ou=s.ou.insert(t,r),Qd(s.remoteStore,new ta(ii(Bd(t.path)),r,"TargetPurposeLimboResolution",Ur.le))}}async function vu(s,e,t){const r=Ye(s),a=[],u=[],c=[];r.ru.isEmpty()||(r.ru.forEach((m,y)=>{c.push(r.Pu(y,e,t).then(v=>{var S;if((v||t)&&r.isPrimaryClient){const R=v?!v.fromCache:(S=t==null?void 0:t.targetChanges.get(y.targetId))===null||S===void 0?void 0:S.current;r.sharedClientState.updateQueryState(y.targetId,R?"current":"not-current")}if(v){a.push(v);const R=Iy.Ps(y.targetId,v);u.push(R)}}))}),await Promise.all(c),r.nu.Q_(a),await async function(y,v){const S=Ye(y);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>re.forEach(v,D=>re.forEach(D.ls,z=>S.persistence.referenceDelegate.addReference(R,D.targetId,z)).next(()=>re.forEach(D.hs,z=>S.persistence.referenceDelegate.removeReference(R,D.targetId,z)))))}catch(R){if(!vo(R))throw R;Ae(Ry,"Failed to update sequence numbers: "+R)}for(const R of v){const D=R.targetId;if(!R.fromCache){const z=S.Ss.get(D),H=z.snapshotVersion,he=z.withLastLimboFreeSnapshotVersion(H);S.Ss=S.Ss.insert(D,he)}}}(r.localStore,u))}async function mP(s,e){const t=Ye(s);if(!t.currentUser.isEqual(e)){Ae(Vl,"User change. New user:",e.toKey());const r=await VS(t.localStore,e);t.currentUser=e,function(u,c){u.cu.forEach(m=>{m.forEach(y=>{y.reject(new Ge(we.CANCELLED,c))})}),u.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(t,r.Ms)}}function pP(s,e){const t=Ye(s),r=t._u.get(e);if(r&&r.tu)return bt().add(r.key);{let a=bt();const u=t.iu.get(e);if(!u)return a;for(const c of u){const m=t.ru.get(c);a=a.unionWith(m.view.Wa)}return a}}async function gP(s,e){const t=Ye(s),r=await Ng(t.localStore,e.query,!0),a=e.view.Xa(r);return t.isPrimaryClient&&Lg(t,e.targetId,a.Ya),a}async function yP(s,e){const t=Ye(s);return LS(t.localStore,e).then(r=>vu(t,r))}async function vP(s,e,t,r){const a=Ye(s),u=await function(m,y){const v=Ye(m),S=Ye(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",R=>S.Hn(R,y).next(D=>D?v.localDocuments.getDocuments(R,D):re.resolve(null)))}(a.localStore,e);u!==null?(t==="pending"?await wh(a.remoteStore):t==="acknowledged"||t==="rejected"?(My(a,e,r||null),ky(a,e),function(m,y){Ye(Ye(m).mutationQueue).Xn(y)}(a.localStore,e)):He(6720,"Unknown batchState",{Eu:t}),await vu(a,u)):Ae(Vl,"Cannot apply mutation batch with id: "+e)}async function _P(s,e){const t=Ye(s);if(Yd(t),sA(t),e===!0&&t.hu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await kb(t,r.toArray());t.hu=!0,await kg(t.remoteStore,!0);for(const u of a)Qd(t.remoteStore,u)}else if(e===!1&&t.hu!==!1){const r=[];let a=Promise.resolve();t.iu.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(Il(t,c),wl(t.localStore,c,!0))),Sl(t.remoteStore,c)}),await a,await kb(t,r),function(c){const m=Ye(c);m._u.forEach((y,v)=>{Sl(m.remoteStore,v)}),m.au.Kr(),m._u=new Map,m.ou=new Jt(Be.comparator)}(t),t.hu=!1,await kg(t.remoteStore,!1)}}async function kb(s,e,t){const r=Ye(s),a=[],u=[];for(const c of e){let m;const y=r.iu.get(c);if(y&&y.length!==0){m=await Ed(r.localStore,ii(y[0]));for(const v of y){const S=r.ru.get(v),R=await gP(r,S);R.snapshot&&u.push(R.snapshot)}}else{const v=await MS(r.localStore,c);m=await Ed(r.localStore,v),await Vy(r,iA(v),c,!1,m.resumeToken)}a.push(m)}return r.nu.Q_(u),a}function iA(s){return Kw(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function EP(s){return function(t){return Ye(Ye(t).persistence).us()}(Ye(s).localStore)}async function bP(s,e,t,r){const a=Ye(s);if(a.hu)return void Ae(Vl,"Ignoring unexpected query state notification.");const u=a.iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await LS(a.localStore,Gw(u[0])),m=Eh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tn.EMPTY_BYTE_STRING);await vu(a,c,m);break}case"rejected":await wl(a.localStore,e,!0),Il(a,e,r);break;default:He(64155,t)}}async function TP(s,e,t){const r=Yd(s);if(r.hu){for(const a of e){if(r.iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){Ae(Vl,"Adding an already active target "+a);continue}const u=await MS(r.localStore,a),c=await Ed(r.localStore,u);await Vy(r,iA(u),c.targetId,!1,c.resumeToken),Qd(r.remoteStore,c)}for(const a of t)r.iu.has(a)&&await wl(r.localStore,a,!1).then(()=>{Sl(r.remoteStore,a),Il(r,a)}).catch(yo)}}function Yd(s){const e=Ye(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=nA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cP.bind(null,e),e.nu.Q_=ZN.bind(null,e.eventManager),e.nu.Tu=eP.bind(null,e.eventManager),e}function sA(s){const e=Ye(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}class rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=KS(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return PS(this.persistence,new NS,e.initialUser,this.serializer)}Ru(e){return new Sy(Hd.Ei,this.serializer)}Au(e){return new qS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rh.provider={build:()=>new rh};class wP extends rh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){$e(this.persistence.referenceDelegate instanceof _d,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IS(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Sy(r=>_d.Ei(r,t),this.serializer)}}class aA extends rh{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.gu.initialize(this,e),await sA(this.gu.syncEngine),await wh(this.gu.remoteStore),await this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Vu(e){return PS(this.persistence,new NS,e.initialUser,this.serializer)}mu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new IS(r,e.asyncQueue,t)}fu(e,t){const r=new ID(t,this.persistence);return new AD(e.asyncQueue,r)}Ru(e){const t=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Ay(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FS(),Qf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new qS}}class SP extends aA{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.gu.syncEngine;this.sharedClientState instanceof Wp&&(this.sharedClientState.syncEngine={yo:vP.bind(null,t),wo:bP.bind(null,t),bo:TP.bind(null,t),us:EP.bind(null,t),po:yP.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ki(async r=>{await _P(this.gu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Au(e){const t=FS();if(!Wp.C(t))throw new Ge(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ih{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),await kg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XN}()}createDatastore(e){const t=KS(e.databaseInfo.databaseId),r=function(u){return new NN(u)}(e.databaseInfo);return function(u,c,m,y){return new MN(u,c,m,y)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,u,c,m){return new UN(r,a,u,c,m)}(this.localStore,this.datastore,e.asyncQueue,t=>Vb(this.syncEngine,t,0),function(){return xb.C()?new xb:new xN}())}createSyncEngine(e,t){return function(a,u,c,m,y,v,S){const R=new sP(a,u,c,m,y,v);return S&&(R.hu=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const u=Ye(a);Ae(mu,"RemoteStore shutting down."),u.aa.add(5),await Th(u),u.ca.shutdown(),u.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="FirestoreClient";class IP{constructor(e,t,r,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=fr.UNAUTHENTICATED,this.clientId=hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async c=>{Ae(go,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ae(go,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=JS(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zp(s,e){s.asyncQueue.verifyOperationInProgress(),Ae(go,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async a=>{r.isEqual(a)||(await VS(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function Mb(s,e){s.asyncQueue.verifyOperationInProgress();const t=await RP(s);Ae(go,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>Db(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,a)=>Db(e.remoteStore,a)),s._onlineComponents=e}async function RP(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ae(go,"Using user provided OfflineComponentProvider");try{await Zp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===we.FAILED_PRECONDITION||a.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Hc("Error using user provided cache. Falling back to memory cache: "+t),await Zp(s,new rh)}}else Ae(go,"Using default OfflineComponentProvider"),await Zp(s,new wP(void 0));return s._offlineComponents}async function xP(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ae(go,"Using user provided OnlineComponentProvider"),await Mb(s,s._uninitializedComponentsProvider._online)):(Ae(go,"Using default OnlineComponentProvider"),await Mb(s,new ih))),s._onlineComponents}async function CP(s){const e=await xP(s),t=e.eventManager;return t.onListen=aP.bind(null,e.syncEngine),t.onUnlisten=uP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lP.bind(null,e.syncEngine),t}function DP(s,e,t={}){const r=new co;return s.asyncQueue.enqueueAndForget(async()=>function(u,c,m,y,v){const S=new AP({next:D=>{S.yu(),c.enqueueAndForget(()=>JN(u,R));const z=D.docs.has(m);!z&&D.fromCache?v.reject(new Ge(we.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&D.fromCache&&y&&y.source==="server"?v.reject(new Ge(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(D)},error:D=>v.reject(D)}),R=new tP(Bd(m.path),S,{includeMetadataChanges:!0,Fa:!0});return WN(u,R)}(await CP(s),s.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(s,e,t){if(!t)throw new Ge(we.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function NP(s,e,t,r){if(e===!0&&r===!0)throw new Ge(we.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Ub(s){if(!Be.isDocumentKey(s))throw new Ge(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function PP(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":He(12329,{type:typeof s})}function Bb(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ge(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=PP(s);throw new Ge(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="firestore.googleapis.com",zb=!0;class jb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VP,this.ssl=zb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:zb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AS)throw new Ge(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uA{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pD;switch(r.type){case"firstParty":return new vD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ge(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Kg("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Lb.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),Lb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uy(this.firestore,e,this._query)}}class ra{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ra(this.firestore,e,this._key)}}class sh extends Uy{constructor(e,t,r){super(e,t,Bd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ra(this.firestore,null,new Be(e))}withConverter(e){return new sh(this.firestore,e,this._path)}}function lA(s,e,...t){if(s=gu(s),arguments.length===1&&(e=hw.newId()),OP("doc","path",e),s instanceof uA){const r=Qt.fromString(e,...t);return Ub(r),new ra(s,null,new Be(r))}{if(!(s instanceof ra||s instanceof sh))throw new Ge(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Qt.fromString(e,...t));return Ub(r),new ra(s.firestore,s instanceof sh?s.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="AsyncQueue";class Fb{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new HS(this,"async_queue_retry"),this.ju=()=>{const r=Qf();r&&Ae(qb,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Qf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Qf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new co;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!vo(e))throw e;Ae(qb,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,En("INTERNAL UNHANDLED ERROR: ",Kb(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=Ny.createAndSchedule(this,e,t,r,u=>this.Xu(u));return this.Uu.push(a),a}Ju(){this.Ku&&He(47125,{ec:Kb(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Kb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class cA extends uA{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Fb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fb(e),this._firestoreClient=void 0,await e}}}function kP(s,e,t){t||(t=ld);const r=Qg(s,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),u=r.getOptions(t);if(su(u,e))return a;throw new Ge(we.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ge(we.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AS)throw new Ge(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&lh(e.host)&&vT(e.host),r.initialize({options:e,instanceIdentifier:t})}function MP(s){if(s._terminated)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||LP(s),s._firestoreClient}function LP(s){var e,t,r;const a=s._freezeSettings(),u=function(m,y,v,S){return new nO(m,y,v,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,oA(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,a);s._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),s._firestoreClient=new IP(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sd(Tn.fromBase64String(e))}catch(t){throw new Ge(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sd(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ge(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0}(this._values,e._values)}}const zP=new RegExp("[~\\*/\\[\\]]");function jP(s,e,t){if(e.search(zP)>=0)throw Hb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new hA(...e.split("."))._internalPath}catch{throw Hb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function Hb(s,e,t,r,a){let u=`Function ${e}() called with invalid data`;u+=". ";let c="";return new Ge(we.INVALID_ARGUMENT,u+s+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,r,a,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ra(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qP extends fA{data(){return super.data()}}function dA(s,e){return typeof e=="string"?jP(s,e):e instanceof hA?e._internalPath:e._delegate._internalPath}class FP{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gh(e,(a,u)=>{r[a]=this.convertValue(u,t)}),r}convertVectorValue(e){var t,r,a;const u=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Jc].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>rn(c.doubleValue));return new BP(u)}convertGeoPoint(e){return new UP(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Md(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const t=oa(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);$e(pS(r),9688,{name:e});const a=new lu(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return a.isEqual(t)||En(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mA extends fA{constructor(e,t,r,a,u,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new HP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class HP extends mA{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(s){s=Bb(s,ra);const e=Bb(s.firestore,cA);return DP(MP(e),s._key).then(t=>QP(e,s,t))}class GP extends FP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ra(this.firestore,null,t)}}function QP(s,e,t){const r=t.docs.get(e._key),a=new GP(s);return new mA(s,a,e._key,r,new KP(t.hasPendingWrites,t.fromCache),e.converter)}class YP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=JP(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function $P(s){return new YP(s)}class XP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ih.provider,this._offlineComponentProvider={build:t=>new aA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class WP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ih.provider,this._offlineComponentProvider={build:t=>new SP(t,e==null?void 0:e.cacheSizeBytes)}}}function JP(s){return new XP(void 0)}function ZP(){return new WP}(function(e,t=!0){(function(a){Ol=a})(Cl),cl(new au("firestore",(r,{instanceIdentifier:a,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new cA(new gD(r.getProvider("auth-internal")),new _D(c,r.getProvider("app-check-internal")),function(v,S){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ge(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(v.options.projectId,S)}(c,a),c);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),uo(IE,RE,e),uo(IE,RE,"esm2017")})();const eV={apiKey:"AIzaSyBaP9APfVtEPw1sLQgHx26ZEZ7SPfutv28",authDomain:"tell-4f02c.firebaseapp.com",projectId:"tell-4f02c",storageBucket:"tell-4f02c.firebasestorage.app",messagingSenderId:"1032114981963",appId:"1:1032114981963:web:719ae9a5040929b739d1ce"},gA=wT(eV),By=fD(gA),yA=kP(gA,{localCache:$P({tabManager:ZP()})}),tV=async()=>{var u;const s=new _s,t=(await tw(By,s)).user,r=lA(yA,"users",t.email),a=await pA(r);if(!a.exists()||!((u=a.data())!=null&&u.role))throw window.alert("User doesn't exist"),new Error("User doesn't exist");return t},nV=async()=>{const s=new _s;return(await tw(By,s)).user};function rV(){const s=async()=>{try{const t=await nV();console.log(t)}catch(t){alert(t.message)}},e=async()=>{const t=await tV();console.log(t)};return Se.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:Se.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[Se.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Sign In"}),Se.jsxs("div",{className:"flex justify-center",children:[Se.jsxs("button",{onClick:s,className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:[Se.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Se.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Se.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Se.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),Se.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Register with Google"]}),Se.jsxs("button",{onClick:e,className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors",children:[Se.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Se.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Se.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Se.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),Se.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]})]})})}function iV(){return Se.jsxs("div",{className:"flex min-h-screen",children:[Se.jsx("div",{className:"fixed top-0 left-0 h-screen w-64 bg-gray-800 hidden md:block",children:Se.jsx(Y1,{})}),Se.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:Se.jsx(SR,{children:Se.jsxs(eR,{children:[Se.jsx(ng,{path:"/",element:Se.jsx(uI,{})}),Se.jsx(ng,{path:"/login",element:Se.jsx(rV,{})})]})})})]})}const sV=({children:s})=>{const[e,t]=ge.useState(null);return ge.useEffect(()=>{const r=By.onAuthStateChanged(async a=>{if(a){const u=lA(yA,"users",a.email);(await pA(u)).exists()?t(a):console.log("User doesn't exist")}else t(null)});return()=>r()},[]),Se.jsx(Gb.Provider,{value:{user:e},children:s})};G1.createRoot(document.getElementById("root")).render(Se.jsx(ge.StrictMode,{children:Se.jsx(sV,{children:Se.jsx(iV,{})})}));
