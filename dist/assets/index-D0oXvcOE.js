var hR=Object.defineProperty;var fR=(i,e,t)=>e in i?hR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ab=(i,e,t)=>fR(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=t(a);fetch(a.href,u)}})();var dR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _w(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var yg={exports:{}},Vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function mR(){if(Ib)return Vc;Ib=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var d in a)d!=="key"&&(u[d]=a[d])}else u=a;return a=u.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:u}}return Vc.Fragment=e,Vc.jsx=t,Vc.jsxs=t,Vc}var Rb;function pR(){return Rb||(Rb=1,yg.exports=mR()),yg.exports}var W=pR(),vg={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function gR(){if(xb)return ft;xb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function C(j){return j===null||typeof j!="object"?null:(j=I&&j[I]||j["@@iterator"],typeof j=="function"?j:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,he={};function ue(j,we,je){this.props=j,this.context=we,this.refs=he,this.updater=je||z}ue.prototype.isReactComponent={},ue.prototype.setState=function(j,we){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,we,"setState")},ue.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function ve(){}ve.prototype=ue.prototype;function pe(j,we,je){this.props=j,this.context=we,this.refs=he,this.updater=je||z}var oe=pe.prototype=new ve;oe.constructor=pe,B(oe,ue.prototype),oe.isPureReactComponent=!0;var Re=Array.isArray,xe={H:null,A:null,T:null,S:null,V:null},Me=Object.prototype.hasOwnProperty;function L(j,we,je,Ie,We,ct){return je=ct.ref,{$$typeof:i,type:j,key:we,ref:je!==void 0?je:null,props:ct}}function N(j,we){return L(j.type,we,void 0,void 0,void 0,j.props)}function M(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function q(j){var we={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(je){return we[je]})}var Y=/\/+/g;function Z(j,we){return typeof j=="object"&&j!==null&&j.key!=null?q(""+j.key):we.toString(36)}function V(){}function Dn(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(V,V):(j.status="pending",j.then(function(we){j.status==="pending"&&(j.status="fulfilled",j.value=we)},function(we){j.status==="pending"&&(j.status="rejected",j.reason=we)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Yt(j,we,je,Ie,We){var ct=typeof j;(ct==="undefined"||ct==="boolean")&&(j=null);var et=!1;if(j===null)et=!0;else switch(ct){case"bigint":case"string":case"number":et=!0;break;case"object":switch(j.$$typeof){case i:case e:et=!0;break;case T:return et=j._init,Yt(et(j._payload),we,je,Ie,We)}}if(et)return We=We(j),et=Ie===""?"."+Z(j,0):Ie,Re(We)?(je="",et!=null&&(je=et.replace(Y,"$&/")+"/"),Yt(We,we,je,"",function(Fe){return Fe})):We!=null&&(M(We)&&(We=N(We,je+(We.key==null||j&&j.key===We.key?"":(""+We.key).replace(Y,"$&/")+"/")+et)),we.push(We)),1;et=0;var un=Ie===""?".":Ie+":";if(Re(j))for(var jt=0;jt<j.length;jt++)Ie=j[jt],ct=un+Z(Ie,jt),et+=Yt(Ie,we,je,ct,We);else if(jt=C(j),typeof jt=="function")for(j=jt.call(j),jt=0;!(Ie=j.next()).done;)Ie=Ie.value,ct=un+Z(Ie,jt++),et+=Yt(Ie,we,je,ct,We);else if(ct==="object"){if(typeof j.then=="function")return Yt(Dn(j),we,je,Ie,We);throw we=String(j),Error("Objects are not valid as a React child (found: "+(we==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":we)+"). If you meant to render a collection of children, use an array instead.")}return et}function ye(j,we,je){if(j==null)return j;var Ie=[],We=0;return Yt(j,Ie,"","",function(ct){return we.call(je,ct,We++)}),Ie}function Le(j){if(j._status===-1){var we=j._result;we=we(),we.then(function(je){(j._status===0||j._status===-1)&&(j._status=1,j._result=je)},function(je){(j._status===0||j._status===-1)&&(j._status=2,j._result=je)}),j._status===-1&&(j._status=0,j._result=we)}if(j._status===1)return j._result.default;throw j._result}var Qe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var we=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(we))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function pt(){}return ft.Children={map:ye,forEach:function(j,we,je){ye(j,function(){we.apply(this,arguments)},je)},count:function(j){var we=0;return ye(j,function(){we++}),we},toArray:function(j){return ye(j,function(we){return we})||[]},only:function(j){if(!M(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ft.Component=ue,ft.Fragment=t,ft.Profiler=a,ft.PureComponent=pe,ft.StrictMode=r,ft.Suspense=p,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe,ft.__COMPILER_RUNTIME={__proto__:null,c:function(j){return xe.H.useMemoCache(j)}},ft.cache=function(j){return function(){return j.apply(null,arguments)}},ft.cloneElement=function(j,we,je){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Ie=B({},j.props),We=j.key,ct=void 0;if(we!=null)for(et in we.ref!==void 0&&(ct=void 0),we.key!==void 0&&(We=""+we.key),we)!Me.call(we,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&we.ref===void 0||(Ie[et]=we[et]);var et=arguments.length-2;if(et===1)Ie.children=je;else if(1<et){for(var un=Array(et),jt=0;jt<et;jt++)un[jt]=arguments[jt+2];Ie.children=un}return L(j.type,We,void 0,void 0,ct,Ie)},ft.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},ft.createElement=function(j,we,je){var Ie,We={},ct=null;if(we!=null)for(Ie in we.key!==void 0&&(ct=""+we.key),we)Me.call(we,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(We[Ie]=we[Ie]);var et=arguments.length-2;if(et===1)We.children=je;else if(1<et){for(var un=Array(et),jt=0;jt<et;jt++)un[jt]=arguments[jt+2];We.children=un}if(j&&j.defaultProps)for(Ie in et=j.defaultProps,et)We[Ie]===void 0&&(We[Ie]=et[Ie]);return L(j,ct,void 0,void 0,null,We)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(j){return{$$typeof:d,render:j}},ft.isValidElement=M,ft.lazy=function(j){return{$$typeof:T,_payload:{_status:-1,_result:j},_init:Le}},ft.memo=function(j,we){return{$$typeof:v,type:j,compare:we===void 0?null:we}},ft.startTransition=function(j){var we=xe.T,je={};xe.T=je;try{var Ie=j(),We=xe.S;We!==null&&We(je,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(pt,Qe)}catch(ct){Qe(ct)}finally{xe.T=we}},ft.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()},ft.use=function(j){return xe.H.use(j)},ft.useActionState=function(j,we,je){return xe.H.useActionState(j,we,je)},ft.useCallback=function(j,we){return xe.H.useCallback(j,we)},ft.useContext=function(j){return xe.H.useContext(j)},ft.useDebugValue=function(){},ft.useDeferredValue=function(j,we){return xe.H.useDeferredValue(j,we)},ft.useEffect=function(j,we,je){var Ie=xe.H;if(typeof je=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ie.useEffect(j,we)},ft.useId=function(){return xe.H.useId()},ft.useImperativeHandle=function(j,we,je){return xe.H.useImperativeHandle(j,we,je)},ft.useInsertionEffect=function(j,we){return xe.H.useInsertionEffect(j,we)},ft.useLayoutEffect=function(j,we){return xe.H.useLayoutEffect(j,we)},ft.useMemo=function(j,we){return xe.H.useMemo(j,we)},ft.useOptimistic=function(j,we){return xe.H.useOptimistic(j,we)},ft.useReducer=function(j,we,je){return xe.H.useReducer(j,we,je)},ft.useRef=function(j){return xe.H.useRef(j)},ft.useState=function(j){return xe.H.useState(j)},ft.useSyncExternalStore=function(j,we,je){return xe.H.useSyncExternalStore(j,we,je)},ft.useTransition=function(){return xe.H.useTransition()},ft.version="19.1.0",ft}var Cb;function Ry(){return Cb||(Cb=1,vg.exports=gR()),vg.exports}var ge=Ry(),_g={exports:{}},Lc={},bg={exports:{}},Eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function yR(){return Db||(Db=1,function(i){function e(ye,Le){var Qe=ye.length;ye.push(Le);e:for(;0<Qe;){var pt=Qe-1>>>1,j=ye[pt];if(0<a(j,Le))ye[pt]=Le,ye[Qe]=j,Qe=pt;else break e}}function t(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var Le=ye[0],Qe=ye.pop();if(Qe!==Le){ye[0]=Qe;e:for(var pt=0,j=ye.length,we=j>>>1;pt<we;){var je=2*(pt+1)-1,Ie=ye[je],We=je+1,ct=ye[We];if(0>a(Ie,Qe))We<j&&0>a(ct,Ie)?(ye[pt]=ct,ye[We]=Qe,pt=We):(ye[pt]=Ie,ye[je]=Qe,pt=je);else if(We<j&&0>a(ct,Qe))ye[pt]=ct,ye[We]=Qe,pt=We;else break e}}return Le}function a(ye,Le){var Qe=ye.sortIndex-Le.sortIndex;return Qe!==0?Qe:ye.id-Le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],v=[],T=1,I=null,C=3,z=!1,B=!1,he=!1,ue=!1,ve=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function Re(ye){for(var Le=t(v);Le!==null;){if(Le.callback===null)r(v);else if(Le.startTime<=ye)r(v),Le.sortIndex=Le.expirationTime,e(p,Le);else break;Le=t(v)}}function xe(ye){if(he=!1,Re(ye),!B)if(t(p)!==null)B=!0,Me||(Me=!0,Z());else{var Le=t(v);Le!==null&&Yt(xe,Le.startTime-ye)}}var Me=!1,L=-1,N=5,M=-1;function q(){return ue?!0:!(i.unstable_now()-M<N)}function Y(){if(ue=!1,Me){var ye=i.unstable_now();M=ye;var Le=!0;try{e:{B=!1,he&&(he=!1,pe(L),L=-1),z=!0;var Qe=C;try{t:{for(Re(ye),I=t(p);I!==null&&!(I.expirationTime>ye&&q());){var pt=I.callback;if(typeof pt=="function"){I.callback=null,C=I.priorityLevel;var j=pt(I.expirationTime<=ye);if(ye=i.unstable_now(),typeof j=="function"){I.callback=j,Re(ye),Le=!0;break t}I===t(p)&&r(p),Re(ye)}else r(p);I=t(p)}if(I!==null)Le=!0;else{var we=t(v);we!==null&&Yt(xe,we.startTime-ye),Le=!1}}break e}finally{I=null,C=Qe,z=!1}Le=void 0}}finally{Le?Z():Me=!1}}}var Z;if(typeof oe=="function")Z=function(){oe(Y)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Dn=V.port2;V.port1.onmessage=Y,Z=function(){Dn.postMessage(null)}}else Z=function(){ve(Y,0)};function Yt(ye,Le){L=ve(function(){ye(i.unstable_now())},Le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ye){ye.callback=null},i.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ye?Math.floor(1e3/ye):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_next=function(ye){switch(C){case 1:case 2:case 3:var Le=3;break;default:Le=C}var Qe=C;C=Le;try{return ye()}finally{C=Qe}},i.unstable_requestPaint=function(){ue=!0},i.unstable_runWithPriority=function(ye,Le){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Qe=C;C=ye;try{return Le()}finally{C=Qe}},i.unstable_scheduleCallback=function(ye,Le,Qe){var pt=i.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?pt+Qe:pt):Qe=pt,ye){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Qe+j,ye={id:T++,callback:Le,priorityLevel:ye,startTime:Qe,expirationTime:j,sortIndex:-1},Qe>pt?(ye.sortIndex=Qe,e(v,ye),t(p)===null&&ye===t(v)&&(he?(pe(L),L=-1):he=!0,Yt(xe,Qe-pt))):(ye.sortIndex=j,e(p,ye),B||z||(B=!0,Me||(Me=!0,Z()))),ye},i.unstable_shouldYield=q,i.unstable_wrapCallback=function(ye){var Le=C;return function(){var Qe=C;C=Le;try{return ye.apply(this,arguments)}finally{C=Qe}}}}(Eg)),Eg}var Ob;function vR(){return Ob||(Ob=1,bg.exports=yR()),bg.exports}var Tg={exports:{}},cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nb;function _R(){if(Nb)return cr;Nb=1;var i=Ry();function e(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(p,v,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:I==null?null:""+I,children:p,containerInfo:v,implementation:T}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cr.createPortal=function(p,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(p,v,null,T)},cr.flushSync=function(p){var v=c.T,T=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=v,r.p=T,r.d.f()}},cr.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(p,v))},cr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},cr.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var T=v.as,I=d(T,v.crossOrigin),C=typeof v.integrity=="string"?v.integrity:void 0,z=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?r.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:I,integrity:C,fetchPriority:z}):T==="script"&&r.d.X(p,{crossOrigin:I,integrity:C,fetchPriority:z,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},cr.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=d(v.as,v.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(p)},cr.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,I=d(T,v.crossOrigin);r.d.L(p,T,{crossOrigin:I,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},cr.preloadModule=function(p,v){if(typeof p=="string")if(v){var T=d(v.as,v.crossOrigin);r.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(p)},cr.requestFormReset=function(p){r.d.r(p)},cr.unstable_batchedUpdates=function(p,v){return p(v)},cr.useFormState=function(p,v,T){return c.H.useFormState(p,v,T)},cr.useFormStatus=function(){return c.H.useHostTransitionStatus()},cr.version="19.1.0",cr}var Pb;function bR(){if(Pb)return Tg.exports;Pb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tg.exports=_R(),Tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function ER(){if(Mb)return Lc;Mb=1;var i=vR(),e=Ry(),t=bR();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(u(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,l=s;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(l=m.return,l!==null){o=l;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return d(m),n;if(y===l)return d(m),s;y=y.sibling}throw Error(r(188))}if(o.return!==l.return)o=m,l=y;else{for(var S=!1,x=m.child;x;){if(x===o){S=!0,o=m,l=y;break}if(x===l){S=!0,l=m,o=y;break}x=x.sibling}if(!S){for(x=y.child;x;){if(x===o){S=!0,o=y,l=m;break}if(x===l){S=!0,l=y,o=m;break}x=x.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==l)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),pe=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function Dn(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case ue:return"Profiler";case he:return"StrictMode";case xe:return"Suspense";case Me:return"SuspenseList";case M:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case oe:return(n.displayName||"Context")+".Provider";case pe:return(n._context.displayName||"Context")+".Consumer";case Re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case L:return s=n.displayName||null,s!==null?s:Dn(n.type)||"Memo";case N:s=n._payload,n=n._init;try{return Dn(n(s))}catch{}}return null}var Yt=Array.isArray,ye=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe={pending:!1,data:null,method:null,action:null},pt=[],j=-1;function we(n){return{current:n}}function je(n){0>j||(n.current=pt[j],pt[j]=null,j--)}function Ie(n,s){j++,pt[j]=n.current,n.current=s}var We=we(null),ct=we(null),et=we(null),un=we(null);function jt(n,s){switch(Ie(et,s),Ie(ct,n),Ie(We,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?J0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=J0(s),n=eb(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}je(We),Ie(We,n)}function Fe(){je(We),je(ct),je(et)}function Pi(n){n.memoizedState!==null&&Ie(un,n);var s=We.current,o=eb(s,n.type);s!==o&&(Ie(ct,n),Ie(We,o))}function Ar(n){ct.current===n&&(je(We),je(ct)),un.current===n&&(je(un),Oc._currentValue=Qe)}var Tt=Object.prototype.hasOwnProperty,Br=i.unstable_scheduleCallback,Cs=i.unstable_cancelCallback,zr=i.unstable_shouldYield,Pu=i.unstable_requestPaint,Ir=i.unstable_now,Wl=i.unstable_getCurrentPriorityLevel,Ao=i.unstable_ImmediatePriority,rs=i.unstable_UserBlockingPriority,Ln=i.unstable_NormalPriority,Mu=i.unstable_LowPriority,li=i.unstable_IdlePriority,ya=i.log,is=i.unstable_setDisableYieldValue,Pt=null,yt=null;function Yn(n){if(typeof ya=="function"&&is(n),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Pt,n)}catch{}}var ln=Math.clz32?Math.clz32:pr,va=Math.log,_a=Math.LN2;function pr(n){return n>>>=0,n===0?32:31-(va(n)/_a|0)|0}var ci=256,Mi=4194304;function wn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function qe(n,s,o){var l=n.pendingLanes;if(l===0)return 0;var m=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var x=l&134217727;return x!==0?(l=x&~y,l!==0?m=wn(l):(S&=x,S!==0?m=wn(S):o||(o=x&~n,o!==0&&(m=wn(o))))):(x=l&~y,x!==0?m=wn(x):S!==0?m=wn(S):o||(o=l&~n,o!==0&&(m=wn(o)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:m}function qr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Fr(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(){var n=ci;return ci<<=1,(ci&4194048)===0&&(ci=256),n}function Ue(){var n=Mi;return Mi<<=1,(Mi&62914560)===0&&(Mi=4194304),n}function Kr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function hi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ds(n,s,o,l,m,y){var S=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var x=n.entanglements,k=n.expirationTimes,se=n.hiddenUpdates;for(o=S&~o;0<o;){var be=31-ln(o),Te=1<<be;x[be]=0,k[be]=-1;var le=se[be];if(le!==null)for(se[be]=null,be=0;be<le.length;be++){var ce=le[be];ce!==null&&(ce.lane&=-536870913)}o&=~Te}l!==0&&Hr(n,l,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~s))}function Hr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-ln(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|o&4194090}function Os(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var l=31-ln(o),m=1<<l;m&s|n[l]&s&&(n[l]|=s),o&=~m}}function as(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ba(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gr(){var n=Le.p;return n!==0?n:(n=window.event,n===void 0?32:_b(n.type))}function ki(n,s){var o=Le.p;try{return Le.p=n,s()}finally{Le.p=o}}var Bt=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Bt,ut="__reactProps$"+Bt,Ot="__reactContainer$"+Bt,Io="__reactEvents$"+Bt,Ea="__reactListeners$"+Bt,Gr="__reactHandles$"+Bt,Ns="__reactResources$"+Bt,Ps="__reactMarker$"+Bt;function $n(n){delete n[Jt],delete n[ut],delete n[Io],delete n[Ea],delete n[Gr]}function ir(n){var s=n[Jt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ot]||o[Jt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=ib(n);n!==null;){if(o=n[Jt])return o;n=ib(n)}return s}n=o,o=n.parentNode}return null}function On(n){if(n=n[Jt]||n[Ot]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function yr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Xn(n){var s=n[Ns];return s||(s=n[Ns]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(n){n[Ps]=!0}var Ta=new Set,Rr={};function xr(n,s){Qr(n,s),Qr(n+"Capture",s)}function Qr(n,s){for(Rr[n]=s,n=0;n<s.length;n++)Ta.add(s[n])}var $t=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fi={},Wn={};function Ro(n){return Tt.call(Wn,n)?!0:Tt.call(fi,n)?!1:$t.test(n)?Wn[n]=!0:(fi[n]=!0,!1)}function vr(n,s,o){if(Ro(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function _r(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function mn(n,s,o,l){if(l===null)n.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+l)}}var Vi,di;function mi(n){if(Vi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Vi=s&&s[1]||"",di=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vi+n+di}var Li=!1;function Ms(n,s){if(!n||Li)return"";Li=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ce){var le=ce}Reflect.construct(n,[],Te)}else{try{Te.call()}catch(ce){le=ce}n.call(Te.prototype)}}else{try{throw Error()}catch(ce){le=ce}(Te=n())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ce){if(ce&&le&&typeof ce.stack=="string")return[ce.stack,le.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),S=y[0],x=y[1];if(S&&x){var k=S.split(`
`),se=x.split(`
`);for(m=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;m<se.length&&!se[m].includes("DetermineComponentFrameRoot");)m++;if(l===k.length||m===se.length)for(l=k.length-1,m=se.length-1;1<=l&&0<=m&&k[l]!==se[m];)m--;for(;1<=l&&0<=m;l--,m--)if(k[l]!==se[m]){if(l!==1||m!==1)do if(l--,m--,0>m||k[l]!==se[m]){var be=`
`+k[l].replace(" at new "," at ");return n.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",n.displayName)),be}while(1<=l&&0<=m);break}}}finally{Li=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?mi(o):""}function ht(n){switch(n.tag){case 26:case 27:case 5:return mi(n.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Ms(n.type,!1);case 11:return Ms(n.type.render,!1);case 1:return Ms(n.type,!0);case 31:return mi("Activity");default:return""}}function ks(n){try{var s="";do s+=ht(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function wa(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function kt(n){var s=wa(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,y=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function pi(n){n._valueTracker||(n._valueTracker=kt(n))}function Ui(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),l="";return n&&(l=wa(n)?n.checked?"true":"false":n.value),n=l,n!==o?(s.setValue(n),!0):!1}function Cr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xo=/[\n"\\]/g;function en(n){return n.replace(xo,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function jn(n,s,o,l,m,y,S,x){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Un(s)):n.value!==""+Un(s)&&(n.value=""+Un(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?Yr(n,S,Un(s)):o!=null?Yr(n,S,Un(o)):l!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+Un(x):n.removeAttribute("name")}function os(n,s,o,l,m,y,S,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;o=o!=null?""+Un(o):"",s=s!=null?""+Un(s):o,x||s===n.value||(n.value=s),n.defaultValue=s}l=l??m,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=x?n.checked:!!l,n.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S)}function Yr(n,s,o){s==="number"&&Cr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function gi(n,s,o,l){if(n=n.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=s.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&l&&(n[o].defaultSelected=!0)}else{for(o=""+Un(o),s=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,l&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function It(n,s,o){if(s!=null&&(s=""+Un(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Un(o):""}function us(n,s,o,l){if(s==null){if(l!=null){if(o!=null)throw Error(r(92));if(Yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}o=l}o==null&&(o=""),s=o}o=Un(s),n.defaultValue=o,l=n.textContent,l===o&&l!==""&&l!==null&&(n.value=l)}function Dr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var dt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(n,s,o){var l=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,o):typeof o!="number"||o===0||dt.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Co(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var m in s)l=s[m],s.hasOwnProperty(m)&&o[m]!==l&&Sa(n,m,l)}else for(var y in s)s.hasOwnProperty(y)&&Sa(n,y,s[y])}function Do(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ji(n){return ls.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Bn=null;function br(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yi=null,zt=null;function sr(n){var s=On(n);if(s&&(n=s.stateNode)){var o=n[ut]||null;e:switch(n=s.stateNode,s.type){case"input":if(jn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+en(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var l=o[s];if(l!==n&&l.form===n.form){var m=l[ut]||null;if(!m)throw Error(r(90));jn(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)l=o[s],l.form===n.form&&Ui(l)}break e;case"textarea":It(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&gi(n,!!o.multiple,s,!1)}}}var ar=!1;function cs(n,s,o){if(ar)return n(s,o);ar=!0;try{var l=n(s);return l}finally{if(ar=!1,(yi!==null||zt!==null)&&(Bf(),yi&&(s=yi,n=zt,zt=yi=null,sr(s),n)))for(s=0;s<n.length;s++)sr(n[s])}}function Bi(n,s){var o=n.stateNode;if(o===null)return null;var l=o[ut]||null;if(l===null)return null;o=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Or=!1;if(Sn)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){Or=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{Or=!1}var Nr=null,zi=null,$r=null;function qi(){if($r)return $r;var n,s=zi,o=s.length,l,m="value"in Nr?Nr.value:Nr.textContent,y=m.length;for(n=0;n<o&&s[n]===m[n];n++);var S=o-n;for(l=1;l<=S&&s[o-l]===m[y-l];l++);return $r=m.slice(n,1<l?1-l:void 0)}function Pr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xr(){return!0}function Oo(){return!1}function tn(n){function s(o,l,m,y,S){this._reactName=o,this._targetInst=m,this.type=l,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(o=n[x],this[x]=o?o(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xr:Oo,this.isPropagationStopped=Oo,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),s}var Ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=tn(Ct),vi=T({},Ct,{view:0,detail:0}),Vs=tn(vi),hs,Ia,_i,Ls=T({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_i&&(_i&&n.type==="mousemove"?(hs=n.screenX-_i.screenX,Ia=n.screenY-_i.screenY):Ia=hs=0,_i=n),hs)},movementY:function(n){return"movementY"in n?n.movementY:Ia}}),or=tn(Ls),Ra=T({},Ls,{dataTransfer:0}),ku=tn(Ra),bi=T({},vi,{relatedTarget:0}),Fi=tn(bi),fs=T({},Ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Us=tn(fs),Vu=T({},Ct,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ki=tn(Vu),No=T({},Ct,{data:0}),js=tn(No),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xa={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gi(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=pn[n])?!!s[n]:!1}function Wr(){return Gi}var Po=T({},vi,{key:function(n){if(n.key){var s=Hi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Pr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xa[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(n){return n.type==="keypress"?Pr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qi=tn(Po),Mo=T({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=tn(Mo),Mr=T({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),Da=tn(Mr),Ei=T({},Ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oa=tn(Ei),Na=T({},Ls,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Yi=tn(Na),Nn=T({},Ct,{newState:0,oldState:0}),ko=tn(Nn),Lu=[9,13,27,32],kr=Sn&&"CompositionEvent"in window,h=null;Sn&&"documentMode"in document&&(h=document.documentMode);var b=Sn&&"TextEvent"in window&&!h,w=Sn&&(!kr||h&&8<h&&11>=h),D=" ",ne=!1;function me(n,s){switch(n){case"keyup":return Lu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vt=!1;function cn(n,s){switch(n){case"compositionend":return Pe(s);case"keypress":return s.which!==32?null:(ne=!0,D);case"textInput":return n=s.data,n===D&&ne?null:n;default:return null}}function wt(n,s){if(vt)return n==="compositionend"||!kr&&me(n,s)?(n=qi(),$r=zi=Nr=null,vt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gn[n.type]:s==="textarea"}function Ti(n,s,o,l){yi?zt?zt.push(l):zt=[l]:yi=l,s=Gf(s,"onChange"),0<s.length&&(o=new Aa("onChange","change",null,o,l),n.push({event:o,listeners:s}))}var An=null,wi=null;function Vo(n){Y0(n,0)}function Uu(n){var s=yr(n);if(Ui(s))return n}function Lo(n,s){if(n==="change")return s}var Si=!1;if(Sn){var Wt;if(Sn){var Pa="oninput"in document;if(!Pa){var Er=document.createElement("div");Er.setAttribute("oninput","return;"),Pa=typeof Er.oninput=="function"}Wt=Pa}else Wt=!1;Si=Wt&&(!document.documentMode||9<document.documentMode)}function lf(){An&&(An.detachEvent("onpropertychange",ju),wi=An=null)}function ju(n){if(n.propertyName==="value"&&Uu(wi)){var s=[];Ti(s,wi,n,br(n)),cs(Vo,s)}}function cf(n,s,o){n==="focusin"?(lf(),An=s,wi=o,An.attachEvent("onpropertychange",ju)):n==="focusout"&&lf()}function Bs(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Uu(wi)}function Zl(n,s){if(n==="click")return Uu(s)}function Ma(n,s){if(n==="input"||n==="change")return Uu(s)}function ds(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ur=typeof Object.is=="function"?Object.is:ds;function f(n,s){if(ur(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),l=Object.keys(s);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var m=o[l];if(!Tt.call(s,m)||!ur(n[m],s[m]))return!1}return!0}function g(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _(n,s){var o=g(n);n=0;for(var l;o;){if(o.nodeType===3){if(l=n+o.textContent.length,n<=s&&l>=s)return{node:o,offset:s-n};n=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=g(o)}}function E(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?E(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function A(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Cr(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Cr(n.document)}return s}function R(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var O=Sn&&"documentMode"in document&&11>=document.documentMode,P=null,K=null,G=null,X=!1;function U(n,s,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;X||P==null||P!==Cr(l)||(l=P,"selectionStart"in l&&R(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),G&&f(G,l)||(G=l,l=Gf(K,"onSelect"),0<l.length&&(s=new Aa("onSelect","select",null,s,o),n.push({event:s,listeners:l}),s.target=P)))}function ee(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var F={animationend:ee("Animation","AnimationEnd"),animationiteration:ee("Animation","AnimationIteration"),animationstart:ee("Animation","AnimationStart"),transitionrun:ee("Transition","TransitionRun"),transitionstart:ee("Transition","TransitionStart"),transitioncancel:ee("Transition","TransitionCancel"),transitionend:ee("Transition","TransitionEnd")},$={},te={};Sn&&(te=document.createElement("div").style,"AnimationEvent"in window||(delete F.animationend.animation,delete F.animationiteration.animation,delete F.animationstart.animation),"TransitionEvent"in window||delete F.transitionend.transition);function Q(n){if($[n])return $[n];if(!F[n])return n;var s=F[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in te)return $[n]=s[o];return n}var ae=Q("animationend"),fe=Q("animationiteration"),de=Q("animationstart"),_e=Q("transitionrun"),Oe=Q("transitionstart"),ke=Q("transitioncancel"),Ce=Q("transitionend"),Ne=new Map,Ve="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ve.push("scrollEnd");function De(n,s){Ne.set(n,s),xr(s,[n])}var ze=new WeakMap;function Ze(n,s){if(typeof n=="object"&&n!==null){var o=ze.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ks(s)},ze.set(n,s),s)}return{value:n,source:s,stack:ks(s)}}var tt=[],lt=0,Jn=0;function it(){for(var n=lt,s=Jn=lt=0;s<n;){var o=tt[s];tt[s++]=null;var l=tt[s];tt[s++]=null;var m=tt[s];tt[s++]=null;var y=tt[s];if(tt[s++]=null,l!==null&&m!==null){var S=l.pending;S===null?m.next=m:(m.next=S.next,S.next=m),l.pending=m}y!==0&&qn(o,m,y)}}function yn(n,s,o,l){tt[lt++]=n,tt[lt++]=s,tt[lt++]=o,tt[lt++]=l,Jn|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function In(n,s,o,l){return yn(n,s,o,l),Ai(n)}function $i(n,s){return yn(n,null,null,s),Ai(n)}function qn(n,s,o){n.lanes|=o;var l=n.alternate;l!==null&&(l.lanes|=o);for(var m=!1,y=n.return;y!==null;)y.childLanes|=o,l=y.alternate,l!==null&&(l.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&s!==null&&(m=31-ln(o),n=y.hiddenUpdates,l=n[m],l===null?n[m]=[s]:l.push(s),s.lane=o|536870912),y):null}function Ai(n){if(50<wc)throw wc=0,zp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ms={};function XA(n,s,o,l){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(n,s,o,l){return new XA(n,s,o,l)}function Vm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zs(n,s){var o=n.alternate;return o===null?(o=Zr(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Pv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function hf(n,s,o,l,m,y){var S=0;if(l=n,typeof n=="function")Vm(n)&&(S=1);else if(typeof n=="string")S=ZI(n,o,We.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case M:return n=Zr(31,o,s,m),n.elementType=M,n.lanes=y,n;case B:return Uo(o.children,m,y,s);case he:S=8,m|=24;break;case ue:return n=Zr(12,o,s,m|2),n.elementType=ue,n.lanes=y,n;case xe:return n=Zr(13,o,s,m),n.elementType=xe,n.lanes=y,n;case Me:return n=Zr(19,o,s,m),n.elementType=Me,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ve:case oe:S=10;break e;case pe:S=9;break e;case Re:S=11;break e;case L:S=14;break e;case N:S=16,l=null;break e}S=29,o=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Zr(S,o,s,m),s.elementType=n,s.type=l,s.lanes=y,s}function Uo(n,s,o,l){return n=Zr(7,n,l,s),n.lanes=o,n}function Lm(n,s,o){return n=Zr(6,n,null,s),n.lanes=o,n}function Um(n,s,o){return s=Zr(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Bu=[],zu=0,ff=null,df=0,Ii=[],Ri=0,jo=null,qs=1,Fs="";function Bo(n,s){Bu[zu++]=df,Bu[zu++]=ff,ff=n,df=s}function Mv(n,s,o){Ii[Ri++]=qs,Ii[Ri++]=Fs,Ii[Ri++]=jo,jo=n;var l=qs;n=Fs;var m=32-ln(l)-1;l&=~(1<<m),o+=1;var y=32-ln(s)+m;if(30<y){var S=m-m%5;y=(l&(1<<S)-1).toString(32),l>>=S,m-=S,qs=1<<32-ln(s)+m|o<<m|l,Fs=y+n}else qs=1<<y|o<<m|l,Fs=n}function jm(n){n.return!==null&&(Bo(n,1),Mv(n,1,0))}function Bm(n){for(;n===ff;)ff=Bu[--zu],Bu[zu]=null,df=Bu[--zu],Bu[zu]=null;for(;n===jo;)jo=Ii[--Ri],Ii[Ri]=null,Fs=Ii[--Ri],Ii[Ri]=null,qs=Ii[--Ri],Ii[Ri]=null}var Tr=null,hn=null,Nt=!1,zo=null,ps=!1,zm=Error(r(519));function qo(n){var s=Error(r(418,""));throw tc(Ze(s,n)),zm}function kv(n){var s=n.stateNode,o=n.type,l=n.memoizedProps;switch(s[Jt]=n,s[ut]=l,o){case"dialog":bt("cancel",s),bt("close",s);break;case"iframe":case"object":case"embed":bt("load",s);break;case"video":case"audio":for(o=0;o<Ac.length;o++)bt(Ac[o],s);break;case"source":bt("error",s);break;case"img":case"image":case"link":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"input":bt("invalid",s),os(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),pi(s);break;case"select":bt("invalid",s);break;case"textarea":bt("invalid",s),us(s,l.value,l.defaultValue,l.children),pi(s)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||l.suppressHydrationWarning===!0||Z0(s.textContent,o)?(l.popover!=null&&(bt("beforetoggle",s),bt("toggle",s)),l.onScroll!=null&&bt("scroll",s),l.onScrollEnd!=null&&bt("scrollend",s),l.onClick!=null&&(s.onclick=Qf),s=!0):s=!1,s||qo(n)}function Vv(n){for(Tr=n.return;Tr;)switch(Tr.tag){case 5:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:Tr=Tr.return}}function Jl(n){if(n!==Tr)return!1;if(!Nt)return Vv(n),Nt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||rg(n.type,n.memoizedProps)),o=!o),o&&hn&&qo(n),Vv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){hn=Wi(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}hn=null}}else s===27?(s=hn,Xa(n.type)?(n=og,og=null,hn=n):hn=s):hn=Tr?Wi(n.stateNode.nextSibling):null;return!0}function ec(){hn=Tr=null,Nt=!1}function Lv(){var n=zo;return n!==null&&(Ur===null?Ur=n:Ur.push.apply(Ur,n),zo=null),n}function tc(n){zo===null?zo=[n]:zo.push(n)}var qm=we(null),Fo=null,Ks=null;function ka(n,s,o){Ie(qm,s._currentValue),s._currentValue=o}function Hs(n){n._currentValue=qm.current,je(qm)}function Fm(n,s,o){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===o)break;n=n.return}}function Km(n,s,o,l){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var x=y;y=m;for(var k=0;k<s.length;k++)if(x.context===s[k]){y.lanes|=o,x=y.alternate,x!==null&&(x.lanes|=o),Fm(y.return,o,n),l||(S=null);break e}y=x.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=o,y=S.alternate,y!==null&&(y.lanes|=o),Fm(S,o,n),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===n){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function nc(n,s,o,l){n=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var x=m.type;ur(m.pendingProps.value,S.value)||(n!==null?n.push(x):n=[x])}}else if(m===un.current){if(S=m.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Oc):n=[Oc])}m=m.return}n!==null&&Km(s,n,o,l),s.flags|=262144}function mf(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ko(n){Fo=n,Ks=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lr(n){return Uv(Fo,n)}function pf(n,s){return Fo===null&&Ko(n),Uv(n,s)}function Uv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ks===null){if(n===null)throw Error(r(308));Ks=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ks=Ks.next=s;return o}var WA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},ZA=i.unstable_scheduleCallback,JA=i.unstable_NormalPriority,Pn={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hm(){return{controller:new WA,data:new Map,refCount:0}}function rc(n){n.refCount--,n.refCount===0&&ZA(JA,function(){n.controller.abort()})}var ic=null,Gm=0,qu=0,Fu=null;function eI(n,s){if(ic===null){var o=ic=[];Gm=0,qu=Yp(),Fu={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Gm++,s.then(jv,jv),s}function jv(){if(--Gm===0&&ic!==null){Fu!==null&&(Fu.status="fulfilled");var n=ic;ic=null,qu=0,Fu=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function tI(n,s){var o=[],l={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(l.status="rejected",l.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),l}var Bv=ye.S;ye.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&eI(n,s),Bv!==null&&Bv(n,s)};var Ho=we(null);function Qm(){var n=Ho.current;return n!==null?n:Xt.pooledCache}function gf(n,s){s===null?Ie(Ho,Ho.current):Ie(Ho,s.pool)}function zv(){var n=Qm();return n===null?null:{parent:Pn._currentValue,pool:n}}var sc=Error(r(460)),qv=Error(r(474)),yf=Error(r(542)),Ym={then:function(){}};function Fv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vf(){}function Kv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(vf,vf),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gv(n),n;default:if(typeof s.status=="string")s.then(vf,vf);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=l}},function(l){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Gv(n),n}throw ac=s,sc}}var ac=null;function Hv(){if(ac===null)throw Error(r(459));var n=ac;return ac=null,n}function Gv(n){if(n===sc||n===yf)throw Error(r(483))}var Va=!1;function $m(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function La(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ua(n,s,o){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Vt&2)!==0){var m=l.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),l.pending=s,s=Ai(n),qn(n,null,o),s}return yn(n,l,s,o),Ai(n)}function oc(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,o|=l,s.lanes=o,Os(n,o)}}function Wm(n,s){var o=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?m=y=s:y=y.next=s}else m=y=s;o={baseState:l.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Zm=!1;function uc(){if(Zm){var n=Fu;if(n!==null)throw n}}function lc(n,s,o,l){Zm=!1;var m=n.updateQueue;Va=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,x=m.shared.pending;if(x!==null){m.shared.pending=null;var k=x,se=k.next;k.next=null,S===null?y=se:S.next=se,S=k;var be=n.alternate;be!==null&&(be=be.updateQueue,x=be.lastBaseUpdate,x!==S&&(x===null?be.firstBaseUpdate=se:x.next=se,be.lastBaseUpdate=k))}if(y!==null){var Te=m.baseState;S=0,be=se=k=null,x=y;do{var le=x.lane&-536870913,ce=le!==x.lane;if(ce?(Rt&le)===le:(l&le)===le){le!==0&&le===qu&&(Zm=!0),be!==null&&(be=be.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var st=n,nt=x;le=s;var Kt=o;switch(nt.tag){case 1:if(st=nt.payload,typeof st=="function"){Te=st.call(Kt,Te,le);break e}Te=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=nt.payload,le=typeof st=="function"?st.call(Kt,Te,le):st,le==null)break e;Te=T({},Te,le);break e;case 2:Va=!0}}le=x.callback,le!==null&&(n.flags|=64,ce&&(n.flags|=8192),ce=m.callbacks,ce===null?m.callbacks=[le]:ce.push(le))}else ce={lane:le,tag:x.tag,payload:x.payload,callback:x.callback,next:null},be===null?(se=be=ce,k=Te):be=be.next=ce,S|=le;if(x=x.next,x===null){if(x=m.shared.pending,x===null)break;ce=x,x=ce.next,ce.next=null,m.lastBaseUpdate=ce,m.shared.pending=null}}while(!0);be===null&&(k=Te),m.baseState=k,m.firstBaseUpdate=se,m.lastBaseUpdate=be,y===null&&(m.shared.lanes=0),Ga|=S,n.lanes=S,n.memoizedState=Te}}function Qv(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Yv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Qv(o[n],s)}var Ku=we(null),_f=we(0);function $v(n,s){n=Zs,Ie(_f,n),Ie(Ku,s),Zs=n|s.baseLanes}function Jm(){Ie(_f,Zs),Ie(Ku,Ku.current)}function ep(){Zs=_f.current,je(Ku),je(_f)}var ja=0,mt=null,qt=null,Rn=null,bf=!1,Hu=!1,Go=!1,Ef=0,cc=0,Gu=null,nI=0;function vn(){throw Error(r(321))}function tp(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ur(n[o],s[o]))return!1;return!0}function np(n,s,o,l,m,y){return ja=y,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ye.H=n===null||n.memoizedState===null?N_:P_,Go=!1,y=o(l,m),Go=!1,Hu&&(y=Wv(s,o,l,m)),Xv(n),y}function Xv(n){ye.H=Rf;var s=qt!==null&&qt.next!==null;if(ja=0,Rn=qt=mt=null,bf=!1,cc=0,Gu=null,s)throw Error(r(300));n===null||Fn||(n=n.dependencies,n!==null&&mf(n)&&(Fn=!0))}function Wv(n,s,o,l){mt=n;var m=0;do{if(Hu&&(Gu=null),cc=0,Hu=!1,25<=m)throw Error(r(301));if(m+=1,Rn=qt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ye.H=lI,y=s(o,l)}while(Hu);return y}function rI(){var n=ye.H,s=n.useState()[0];return s=typeof s.then=="function"?hc(s):s,n=n.useState()[0],(qt!==null?qt.memoizedState:null)!==n&&(mt.flags|=1024),s}function rp(){var n=Ef!==0;return Ef=0,n}function ip(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function sp(n){if(bf){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}bf=!1}ja=0,Rn=qt=mt=null,Hu=!1,cc=Ef=0,Gu=null}function Vr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?mt.memoizedState=Rn=n:Rn=Rn.next=n,Rn}function xn(){if(qt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var s=Rn===null?mt.memoizedState:Rn.next;if(s!==null)Rn=s,qt=n;else{if(n===null)throw mt.alternate===null?Error(r(467)):Error(r(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Rn===null?mt.memoizedState=Rn=n:Rn=Rn.next=n}return Rn}function ap(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(n){var s=cc;return cc+=1,Gu===null&&(Gu=[]),n=Kv(Gu,n,s),s=mt,(Rn===null?s.memoizedState:Rn.next)===null&&(s=s.alternate,ye.H=s===null||s.memoizedState===null?N_:P_),n}function Tf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return hc(n);if(n.$$typeof===oe)return lr(n)}throw Error(r(438,String(n)))}function op(n){var s=null,o=mt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var l=mt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ap(),mt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),l=0;l<n;l++)o[l]=q;return s.index++,o}function Gs(n,s){return typeof s=="function"?s(n):s}function wf(n){var s=xn();return up(s,qt,n)}function up(n,s,o){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=o;var m=n.baseQueue,y=l.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}s.baseQueue=m=y,l.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{s=m.next;var x=S=null,k=null,se=s,be=!1;do{var Te=se.lane&-536870913;if(Te!==se.lane?(Rt&Te)===Te:(ja&Te)===Te){var le=se.revertLane;if(le===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Te===qu&&(be=!0);else if((ja&le)===le){se=se.next,le===qu&&(be=!0);continue}else Te={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},k===null?(x=k=Te,S=y):k=k.next=Te,mt.lanes|=le,Ga|=le;Te=se.action,Go&&o(y,Te),y=se.hasEagerState?se.eagerState:o(y,Te)}else le={lane:Te,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},k===null?(x=k=le,S=y):k=k.next=le,mt.lanes|=Te,Ga|=Te;se=se.next}while(se!==null&&se!==s);if(k===null?S=y:k.next=x,!ur(y,n.memoizedState)&&(Fn=!0,be&&(o=Fu,o!==null)))throw o;n.memoizedState=y,n.baseState=S,n.baseQueue=k,l.lastRenderedState=y}return m===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function lp(n){var s=xn(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var l=o.dispatch,m=o.pending,y=s.memoizedState;if(m!==null){o.pending=null;var S=m=m.next;do y=n(y,S.action),S=S.next;while(S!==m);ur(y,s.memoizedState)||(Fn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,l]}function Zv(n,s,o){var l=mt,m=xn(),y=Nt;if(y){if(o===void 0)throw Error(r(407));o=o()}else o=s();var S=!ur((qt||m).memoizedState,o);S&&(m.memoizedState=o,Fn=!0),m=m.queue;var x=t_.bind(null,l,m,n);if(fc(2048,8,x,[n]),m.getSnapshot!==s||S||Rn!==null&&Rn.memoizedState.tag&1){if(l.flags|=2048,Qu(9,Sf(),e_.bind(null,l,m,o,s),null),Xt===null)throw Error(r(349));y||(ja&124)!==0||Jv(l,s,o)}return o}function Jv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=mt.updateQueue,s===null?(s=ap(),mt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function e_(n,s,o,l){s.value=o,s.getSnapshot=l,n_(s)&&r_(n)}function t_(n,s,o){return o(function(){n_(s)&&r_(n)})}function n_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ur(n,o)}catch{return!0}}function r_(n){var s=$i(n,2);s!==null&&ri(s,n,2)}function cp(n){var s=Vr();if(typeof n=="function"){var o=n;if(n=o(),Go){Yn(!0);try{o()}finally{Yn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:n},s}function i_(n,s,o,l){return n.baseState=o,up(n,qt,typeof l=="function"?l:Gs)}function iI(n,s,o,l,m){if(If(n))throw Error(r(485));if(n=s.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};ye.T!==null?o(!0):y.isTransition=!1,l(y),o=s.pending,o===null?(y.next=s.pending=y,s_(s,y)):(y.next=o.next,s.pending=o.next=y)}}function s_(n,s){var o=s.action,l=s.payload,m=n.state;if(s.isTransition){var y=ye.T,S={};ye.T=S;try{var x=o(m,l),k=ye.S;k!==null&&k(S,x),a_(n,s,x)}catch(se){hp(n,s,se)}finally{ye.T=y}}else try{y=o(m,l),a_(n,s,y)}catch(se){hp(n,s,se)}}function a_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){o_(n,s,l)},function(l){return hp(n,s,l)}):o_(n,s,o)}function o_(n,s,o){s.status="fulfilled",s.value=o,u_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,s_(n,o)))}function hp(n,s,o){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=o,u_(s),s=s.next;while(s!==l)}n.action=null}function u_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function l_(n,s){return s}function c_(n,s){if(Nt){var o=Xt.formState;if(o!==null){e:{var l=mt;if(Nt){if(hn){t:{for(var m=hn,y=ps;m.nodeType!==8;){if(!y){m=null;break t}if(m=Wi(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){hn=Wi(m.nextSibling),l=m.data==="F!";break e}}qo(l)}l=!1}l&&(s=o[0])}}return o=Vr(),o.memoizedState=o.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l_,lastRenderedState:s},o.queue=l,o=C_.bind(null,mt,l),l.dispatch=o,l=cp(!1),y=gp.bind(null,mt,!1,l.queue),l=Vr(),m={state:s,dispatch:null,action:n,pending:null},l.queue=m,o=iI.bind(null,mt,m,y,o),m.dispatch=o,l.memoizedState=n,[s,o,!1]}function h_(n){var s=xn();return f_(s,qt,n)}function f_(n,s,o){if(s=up(n,s,l_)[0],n=wf(Gs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=hc(s)}catch(S){throw S===sc?yf:S}else l=s;s=xn();var m=s.queue,y=m.dispatch;return o!==s.memoizedState&&(mt.flags|=2048,Qu(9,Sf(),sI.bind(null,m,o),null)),[l,y,n]}function sI(n,s){n.action=s}function d_(n){var s=xn(),o=qt;if(o!==null)return f_(s,o,n);xn(),s=s.memoizedState,o=xn();var l=o.queue.dispatch;return o.memoizedState=n,[s,l,!1]}function Qu(n,s,o,l){return n={tag:n,create:o,deps:l,inst:s,next:null},s=mt.updateQueue,s===null&&(s=ap(),mt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(l=o.next,o.next=n,n.next=l,s.lastEffect=n),n}function Sf(){return{destroy:void 0,resource:void 0}}function m_(){return xn().memoizedState}function Af(n,s,o,l){var m=Vr();l=l===void 0?null:l,mt.flags|=n,m.memoizedState=Qu(1|s,Sf(),o,l)}function fc(n,s,o,l){var m=xn();l=l===void 0?null:l;var y=m.memoizedState.inst;qt!==null&&l!==null&&tp(l,qt.memoizedState.deps)?m.memoizedState=Qu(s,y,o,l):(mt.flags|=n,m.memoizedState=Qu(1|s,y,o,l))}function p_(n,s){Af(8390656,8,n,s)}function g_(n,s){fc(2048,8,n,s)}function y_(n,s){return fc(4,2,n,s)}function v_(n,s){return fc(4,4,n,s)}function __(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function b_(n,s,o){o=o!=null?o.concat([n]):null,fc(4,4,__.bind(null,s,n),o)}function fp(){}function E_(n,s){var o=xn();s=s===void 0?null:s;var l=o.memoizedState;return s!==null&&tp(s,l[1])?l[0]:(o.memoizedState=[n,s],n)}function T_(n,s){var o=xn();s=s===void 0?null:s;var l=o.memoizedState;if(s!==null&&tp(s,l[1]))return l[0];if(l=n(),Go){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,s],l}function dp(n,s,o){return o===void 0||(ja&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=A0(),mt.lanes|=n,Ga|=n,o)}function w_(n,s,o,l){return ur(o,s)?o:Ku.current!==null?(n=dp(n,o,l),ur(n,s)||(Fn=!0),n):(ja&42)===0?(Fn=!0,n.memoizedState=o):(n=A0(),mt.lanes|=n,Ga|=n,s)}function S_(n,s,o,l,m){var y=Le.p;Le.p=y!==0&&8>y?y:8;var S=ye.T,x={};ye.T=x,gp(n,!1,s,o);try{var k=m(),se=ye.S;if(se!==null&&se(x,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var be=tI(k,l);dc(n,s,be,ni(n))}else dc(n,s,l,ni(n))}catch(Te){dc(n,s,{then:function(){},status:"rejected",reason:Te},ni())}finally{Le.p=y,ye.T=S}}function aI(){}function mp(n,s,o,l){if(n.tag!==5)throw Error(r(476));var m=A_(n).queue;S_(n,m,s,Qe,o===null?aI:function(){return I_(n),o(l)})}function A_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Qe,baseState:Qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:Qe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function I_(n){var s=A_(n).next.queue;dc(n,s,{},ni())}function pp(){return lr(Oc)}function R_(){return xn().memoizedState}function x_(){return xn().memoizedState}function oI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=ni();n=La(o);var l=Ua(s,n,o);l!==null&&(ri(l,s,o),oc(l,s,o)),s={cache:Hm()},n.payload=s;return}s=s.return}}function uI(n,s,o){var l=ni();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},If(n)?D_(s,o):(o=In(n,s,o,l),o!==null&&(ri(o,n,l),O_(o,s,l)))}function C_(n,s,o){var l=ni();dc(n,s,o,l)}function dc(n,s,o,l){var m={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(If(n))D_(s,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,x=y(S,o);if(m.hasEagerState=!0,m.eagerState=x,ur(x,S))return yn(n,s,m,0),Xt===null&&it(),!1}catch{}finally{}if(o=In(n,s,m,l),o!==null)return ri(o,n,l),O_(o,s,l),!0}return!1}function gp(n,s,o,l){if(l={lane:2,revertLane:Yp(),action:l,hasEagerState:!1,eagerState:null,next:null},If(n)){if(s)throw Error(r(479))}else s=In(n,o,l,2),s!==null&&ri(s,n,2)}function If(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function D_(n,s){Hu=bf=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function O_(n,s,o){if((o&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,o|=l,s.lanes=o,Os(n,o)}}var Rf={readContext:lr,use:Tf,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},N_={readContext:lr,use:Tf,useCallback:function(n,s){return Vr().memoizedState=[n,s===void 0?null:s],n},useContext:lr,useEffect:p_,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Af(4194308,4,__.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Af(4194308,4,n,s)},useInsertionEffect:function(n,s){Af(4,2,n,s)},useMemo:function(n,s){var o=Vr();s=s===void 0?null:s;var l=n();if(Go){Yn(!0);try{n()}finally{Yn(!1)}}return o.memoizedState=[l,s],l},useReducer:function(n,s,o){var l=Vr();if(o!==void 0){var m=o(s);if(Go){Yn(!0);try{o(s)}finally{Yn(!1)}}}else m=s;return l.memoizedState=l.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},l.queue=n,n=n.dispatch=uI.bind(null,mt,n),[l.memoizedState,n]},useRef:function(n){var s=Vr();return n={current:n},s.memoizedState=n},useState:function(n){n=cp(n);var s=n.queue,o=C_.bind(null,mt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:fp,useDeferredValue:function(n,s){var o=Vr();return dp(o,n,s)},useTransition:function(){var n=cp(!1);return n=S_.bind(null,mt,n.queue,!0,!1),Vr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var l=mt,m=Vr();if(Nt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),Xt===null)throw Error(r(349));(Rt&124)!==0||Jv(l,s,o)}m.memoizedState=o;var y={value:o,getSnapshot:s};return m.queue=y,p_(t_.bind(null,l,y,n),[n]),l.flags|=2048,Qu(9,Sf(),e_.bind(null,l,y,o,s),null),o},useId:function(){var n=Vr(),s=Xt.identifierPrefix;if(Nt){var o=Fs,l=qs;o=(l&~(1<<32-ln(l)-1)).toString(32)+o,s=""+s+"R"+o,o=Ef++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=nI++,s=""+s+"r"+o.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:pp,useFormState:c_,useActionState:c_,useOptimistic:function(n){var s=Vr();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=gp.bind(null,mt,!0,o),o.dispatch=s,[n,s]},useMemoCache:op,useCacheRefresh:function(){return Vr().memoizedState=oI.bind(null,mt)}},P_={readContext:lr,use:Tf,useCallback:E_,useContext:lr,useEffect:g_,useImperativeHandle:b_,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:T_,useReducer:wf,useRef:m_,useState:function(){return wf(Gs)},useDebugValue:fp,useDeferredValue:function(n,s){var o=xn();return w_(o,qt.memoizedState,n,s)},useTransition:function(){var n=wf(Gs)[0],s=xn().memoizedState;return[typeof n=="boolean"?n:hc(n),s]},useSyncExternalStore:Zv,useId:R_,useHostTransitionStatus:pp,useFormState:h_,useActionState:h_,useOptimistic:function(n,s){var o=xn();return i_(o,qt,n,s)},useMemoCache:op,useCacheRefresh:x_},lI={readContext:lr,use:Tf,useCallback:E_,useContext:lr,useEffect:g_,useImperativeHandle:b_,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:T_,useReducer:lp,useRef:m_,useState:function(){return lp(Gs)},useDebugValue:fp,useDeferredValue:function(n,s){var o=xn();return qt===null?dp(o,n,s):w_(o,qt.memoizedState,n,s)},useTransition:function(){var n=lp(Gs)[0],s=xn().memoizedState;return[typeof n=="boolean"?n:hc(n),s]},useSyncExternalStore:Zv,useId:R_,useHostTransitionStatus:pp,useFormState:d_,useActionState:d_,useOptimistic:function(n,s){var o=xn();return qt!==null?i_(o,qt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:op,useCacheRefresh:x_},Yu=null,mc=0;function xf(n){var s=mc;return mc+=1,Yu===null&&(Yu=[]),Kv(Yu,n,s)}function pc(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Cf(n,s){throw s.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function M_(n){var s=n._init;return s(n._payload)}function k_(n){function s(J,H){if(n){var ie=J.deletions;ie===null?(J.deletions=[H],J.flags|=16):ie.push(H)}}function o(J,H){if(!n)return null;for(;H!==null;)s(J,H),H=H.sibling;return null}function l(J){for(var H=new Map;J!==null;)J.key!==null?H.set(J.key,J):H.set(J.index,J),J=J.sibling;return H}function m(J,H){return J=zs(J,H),J.index=0,J.sibling=null,J}function y(J,H,ie){return J.index=ie,n?(ie=J.alternate,ie!==null?(ie=ie.index,ie<H?(J.flags|=67108866,H):ie):(J.flags|=67108866,H)):(J.flags|=1048576,H)}function S(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function x(J,H,ie,Ee){return H===null||H.tag!==6?(H=Lm(ie,J.mode,Ee),H.return=J,H):(H=m(H,ie),H.return=J,H)}function k(J,H,ie,Ee){var Ke=ie.type;return Ke===B?be(J,H,ie.props.children,Ee,ie.key):H!==null&&(H.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&M_(Ke)===H.type)?(H=m(H,ie.props),pc(H,ie),H.return=J,H):(H=hf(ie.type,ie.key,ie.props,null,J.mode,Ee),pc(H,ie),H.return=J,H)}function se(J,H,ie,Ee){return H===null||H.tag!==4||H.stateNode.containerInfo!==ie.containerInfo||H.stateNode.implementation!==ie.implementation?(H=Um(ie,J.mode,Ee),H.return=J,H):(H=m(H,ie.children||[]),H.return=J,H)}function be(J,H,ie,Ee,Ke){return H===null||H.tag!==7?(H=Uo(ie,J.mode,Ee,Ke),H.return=J,H):(H=m(H,ie),H.return=J,H)}function Te(J,H,ie){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Lm(""+H,J.mode,ie),H.return=J,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return ie=hf(H.type,H.key,H.props,null,J.mode,ie),pc(ie,H),ie.return=J,ie;case z:return H=Um(H,J.mode,ie),H.return=J,H;case N:var Ee=H._init;return H=Ee(H._payload),Te(J,H,ie)}if(Yt(H)||Z(H))return H=Uo(H,J.mode,ie,null),H.return=J,H;if(typeof H.then=="function")return Te(J,xf(H),ie);if(H.$$typeof===oe)return Te(J,pf(J,H),ie);Cf(J,H)}return null}function le(J,H,ie,Ee){var Ke=H!==null?H.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ke!==null?null:x(J,H,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return ie.key===Ke?k(J,H,ie,Ee):null;case z:return ie.key===Ke?se(J,H,ie,Ee):null;case N:return Ke=ie._init,ie=Ke(ie._payload),le(J,H,ie,Ee)}if(Yt(ie)||Z(ie))return Ke!==null?null:be(J,H,ie,Ee,null);if(typeof ie.then=="function")return le(J,H,xf(ie),Ee);if(ie.$$typeof===oe)return le(J,H,pf(J,ie),Ee);Cf(J,ie)}return null}function ce(J,H,ie,Ee,Ke){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return J=J.get(ie)||null,x(H,J,""+Ee,Ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case C:return J=J.get(Ee.key===null?ie:Ee.key)||null,k(H,J,Ee,Ke);case z:return J=J.get(Ee.key===null?ie:Ee.key)||null,se(H,J,Ee,Ke);case N:var gt=Ee._init;return Ee=gt(Ee._payload),ce(J,H,ie,Ee,Ke)}if(Yt(Ee)||Z(Ee))return J=J.get(ie)||null,be(H,J,Ee,Ke,null);if(typeof Ee.then=="function")return ce(J,H,ie,xf(Ee),Ke);if(Ee.$$typeof===oe)return ce(J,H,ie,pf(H,Ee),Ke);Cf(H,Ee)}return null}function st(J,H,ie,Ee){for(var Ke=null,gt=null,Xe=H,rt=H=0,Hn=null;Xe!==null&&rt<ie.length;rt++){Xe.index>rt?(Hn=Xe,Xe=null):Hn=Xe.sibling;var Dt=le(J,Xe,ie[rt],Ee);if(Dt===null){Xe===null&&(Xe=Hn);break}n&&Xe&&Dt.alternate===null&&s(J,Xe),H=y(Dt,H,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt,Xe=Hn}if(rt===ie.length)return o(J,Xe),Nt&&Bo(J,rt),Ke;if(Xe===null){for(;rt<ie.length;rt++)Xe=Te(J,ie[rt],Ee),Xe!==null&&(H=y(Xe,H,rt),gt===null?Ke=Xe:gt.sibling=Xe,gt=Xe);return Nt&&Bo(J,rt),Ke}for(Xe=l(Xe);rt<ie.length;rt++)Hn=ce(Xe,J,rt,ie[rt],Ee),Hn!==null&&(n&&Hn.alternate!==null&&Xe.delete(Hn.key===null?rt:Hn.key),H=y(Hn,H,rt),gt===null?Ke=Hn:gt.sibling=Hn,gt=Hn);return n&&Xe.forEach(function(to){return s(J,to)}),Nt&&Bo(J,rt),Ke}function nt(J,H,ie,Ee){if(ie==null)throw Error(r(151));for(var Ke=null,gt=null,Xe=H,rt=H=0,Hn=null,Dt=ie.next();Xe!==null&&!Dt.done;rt++,Dt=ie.next()){Xe.index>rt?(Hn=Xe,Xe=null):Hn=Xe.sibling;var to=le(J,Xe,Dt.value,Ee);if(to===null){Xe===null&&(Xe=Hn);break}n&&Xe&&to.alternate===null&&s(J,Xe),H=y(to,H,rt),gt===null?Ke=to:gt.sibling=to,gt=to,Xe=Hn}if(Dt.done)return o(J,Xe),Nt&&Bo(J,rt),Ke;if(Xe===null){for(;!Dt.done;rt++,Dt=ie.next())Dt=Te(J,Dt.value,Ee),Dt!==null&&(H=y(Dt,H,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt);return Nt&&Bo(J,rt),Ke}for(Xe=l(Xe);!Dt.done;rt++,Dt=ie.next())Dt=ce(Xe,J,rt,Dt.value,Ee),Dt!==null&&(n&&Dt.alternate!==null&&Xe.delete(Dt.key===null?rt:Dt.key),H=y(Dt,H,rt),gt===null?Ke=Dt:gt.sibling=Dt,gt=Dt);return n&&Xe.forEach(function(cR){return s(J,cR)}),Nt&&Bo(J,rt),Ke}function Kt(J,H,ie,Ee){if(typeof ie=="object"&&ie!==null&&ie.type===B&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:e:{for(var Ke=ie.key;H!==null;){if(H.key===Ke){if(Ke=ie.type,Ke===B){if(H.tag===7){o(J,H.sibling),Ee=m(H,ie.props.children),Ee.return=J,J=Ee;break e}}else if(H.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===N&&M_(Ke)===H.type){o(J,H.sibling),Ee=m(H,ie.props),pc(Ee,ie),Ee.return=J,J=Ee;break e}o(J,H);break}else s(J,H);H=H.sibling}ie.type===B?(Ee=Uo(ie.props.children,J.mode,Ee,ie.key),Ee.return=J,J=Ee):(Ee=hf(ie.type,ie.key,ie.props,null,J.mode,Ee),pc(Ee,ie),Ee.return=J,J=Ee)}return S(J);case z:e:{for(Ke=ie.key;H!==null;){if(H.key===Ke)if(H.tag===4&&H.stateNode.containerInfo===ie.containerInfo&&H.stateNode.implementation===ie.implementation){o(J,H.sibling),Ee=m(H,ie.children||[]),Ee.return=J,J=Ee;break e}else{o(J,H);break}else s(J,H);H=H.sibling}Ee=Um(ie,J.mode,Ee),Ee.return=J,J=Ee}return S(J);case N:return Ke=ie._init,ie=Ke(ie._payload),Kt(J,H,ie,Ee)}if(Yt(ie))return st(J,H,ie,Ee);if(Z(ie)){if(Ke=Z(ie),typeof Ke!="function")throw Error(r(150));return ie=Ke.call(ie),nt(J,H,ie,Ee)}if(typeof ie.then=="function")return Kt(J,H,xf(ie),Ee);if(ie.$$typeof===oe)return Kt(J,H,pf(J,ie),Ee);Cf(J,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,H!==null&&H.tag===6?(o(J,H.sibling),Ee=m(H,ie),Ee.return=J,J=Ee):(o(J,H),Ee=Lm(ie,J.mode,Ee),Ee.return=J,J=Ee),S(J)):o(J,H)}return function(J,H,ie,Ee){try{mc=0;var Ke=Kt(J,H,ie,Ee);return Yu=null,Ke}catch(Xe){if(Xe===sc||Xe===yf)throw Xe;var gt=Zr(29,Xe,null,J.mode);return gt.lanes=Ee,gt.return=J,gt}finally{}}}var $u=k_(!0),V_=k_(!1),xi=we(null),gs=null;function Ba(n){var s=n.alternate;Ie(Mn,Mn.current&1),Ie(xi,n),gs===null&&(s===null||Ku.current!==null||s.memoizedState!==null)&&(gs=n)}function L_(n){if(n.tag===22){if(Ie(Mn,Mn.current),Ie(xi,n),gs===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(gs=n)}}else za()}function za(){Ie(Mn,Mn.current),Ie(xi,xi.current)}function Qs(n){je(xi),gs===n&&(gs=null),je(Mn)}var Mn=we(0);function Df(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ag(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function yp(n,s,o,l){s=n.memoizedState,o=o(l,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var vp={enqueueSetState:function(n,s,o){n=n._reactInternals;var l=ni(),m=La(l);m.payload=s,o!=null&&(m.callback=o),s=Ua(n,m,l),s!==null&&(ri(s,n,l),oc(s,n,l))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var l=ni(),m=La(l);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=Ua(n,m,l),s!==null&&(ri(s,n,l),oc(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=ni(),l=La(o);l.tag=2,s!=null&&(l.callback=s),s=Ua(n,l,o),s!==null&&(ri(s,n,o),oc(s,n,o))}};function U_(n,s,o,l,m,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,y,S):s.prototype&&s.prototype.isPureReactComponent?!f(o,l)||!f(m,y):!0}function j_(n,s,o,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,l),s.state!==n&&vp.enqueueReplaceState(s,s.state,null)}function Qo(n,s){var o=s;if("ref"in s){o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}var Of=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function B_(n){Of(n)}function z_(n){console.error(n)}function q_(n){Of(n)}function Nf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function F_(n,s,o){try{var l=n.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _p(n,s,o){return o=La(o),o.tag=3,o.payload={element:null},o.callback=function(){Nf(n,s)},o}function K_(n){return n=La(n),n.tag=3,n}function H_(n,s,o,l){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=l.value;n.payload=function(){return m(y)},n.callback=function(){F_(s,o,l)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){F_(s,o,l),typeof m!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function cI(n,s,o,l,m){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=o.alternate,s!==null&&nc(s,o,m,!0),o=xi.current,o!==null){switch(o.tag){case 13:return gs===null?Fp():o.alternate===null&&fn===0&&(fn=3),o.flags&=-257,o.flags|=65536,o.lanes=m,l===Ym?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([l]):s.add(l),Hp(n,l,m)),!1;case 22:return o.flags|=65536,l===Ym?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([l]):o.add(l)),Hp(n,l,m)),!1}throw Error(r(435,o.tag))}return Hp(n,l,m),Fp(),!1}if(Nt)return s=xi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,l!==zm&&(n=Error(r(422),{cause:l}),tc(Ze(n,o)))):(l!==zm&&(s=Error(r(423),{cause:l}),tc(Ze(s,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,l=Ze(l,o),m=_p(n.stateNode,l,m),Wm(n,m),fn!==4&&(fn=2)),!1;var y=Error(r(520),{cause:l});if(y=Ze(y,o),Tc===null?Tc=[y]:Tc.push(y),fn!==4&&(fn=2),s===null)return!0;l=Ze(l,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=_p(o.stateNode,l,n),Wm(o,n),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Qa===null||!Qa.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=K_(m),H_(m,n,o,l),Wm(o,m),!1}o=o.return}while(o!==null);return!1}var G_=Error(r(461)),Fn=!1;function er(n,s,o,l){s.child=n===null?V_(s,null,o,l):$u(s,n.child,o,l)}function Q_(n,s,o,l,m){o=o.render;var y=s.ref;if("ref"in l){var S={};for(var x in l)x!=="ref"&&(S[x]=l[x])}else S=l;return Ko(s),l=np(n,s,o,S,y,m),x=rp(),n!==null&&!Fn?(ip(n,s,m),Ys(n,s,m)):(Nt&&x&&jm(s),s.flags|=1,er(n,s,l,m),s.child)}function Y_(n,s,o,l,m){if(n===null){var y=o.type;return typeof y=="function"&&!Vm(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,$_(n,s,y,l,m)):(n=hf(o.type,null,l,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Rp(n,m)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:f,o(S,l)&&n.ref===s.ref)return Ys(n,s,m)}return s.flags|=1,n=zs(y,l),n.ref=s.ref,n.return=s,s.child=n}function $_(n,s,o,l,m){if(n!==null){var y=n.memoizedProps;if(f(y,l)&&n.ref===s.ref)if(Fn=!1,s.pendingProps=l=y,Rp(n,m))(n.flags&131072)!==0&&(Fn=!0);else return s.lanes=n.lanes,Ys(n,s,m)}return bp(n,s,o,l,m)}function X_(n,s,o){var l=s.pendingProps,m=l.children,y=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=y!==null?y.baseLanes|o:o,n!==null){for(m=s.child=n.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;s.childLanes=y&~l}else s.childLanes=0,s.child=null;return W_(n,s,l,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&gf(s,y!==null?y.cachePool:null),y!==null?$v(s,y):Jm(),L_(s);else return s.lanes=s.childLanes=536870912,W_(n,s,y!==null?y.baseLanes|o:o,o)}else y!==null?(gf(s,y.cachePool),$v(s,y),za(),s.memoizedState=null):(n!==null&&gf(s,null),Jm(),za());return er(n,s,m,o),s.child}function W_(n,s,o,l){var m=Qm();return m=m===null?null:{parent:Pn._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&gf(s,null),Jm(),L_(s),n!==null&&nc(n,s,l,!0),null}function Pf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function bp(n,s,o,l,m){return Ko(s),o=np(n,s,o,l,void 0,m),l=rp(),n!==null&&!Fn?(ip(n,s,m),Ys(n,s,m)):(Nt&&l&&jm(s),s.flags|=1,er(n,s,o,m),s.child)}function Z_(n,s,o,l,m,y){return Ko(s),s.updateQueue=null,o=Wv(s,l,o,m),Xv(n),l=rp(),n!==null&&!Fn?(ip(n,s,y),Ys(n,s,y)):(Nt&&l&&jm(s),s.flags|=1,er(n,s,o,y),s.child)}function J_(n,s,o,l,m){if(Ko(s),s.stateNode===null){var y=ms,S=o.contextType;typeof S=="object"&&S!==null&&(y=lr(S)),y=new o(l,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=vp,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=l,y.state=s.memoizedState,y.refs={},$m(s),S=o.contextType,y.context=typeof S=="object"&&S!==null?lr(S):ms,y.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(yp(s,o,S,l),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&vp.enqueueReplaceState(y,y.state,null),lc(s,l,y,m),uc(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){y=s.stateNode;var x=s.memoizedProps,k=Qo(o,x);y.props=k;var se=y.context,be=o.contextType;S=ms,typeof be=="object"&&be!==null&&(S=lr(be));var Te=o.getDerivedStateFromProps;be=typeof Te=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=s.pendingProps!==x,be||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||se!==S)&&j_(s,y,l,S),Va=!1;var le=s.memoizedState;y.state=le,lc(s,l,y,m),uc(),se=s.memoizedState,x||le!==se||Va?(typeof Te=="function"&&(yp(s,o,Te,l),se=s.memoizedState),(k=Va||U_(s,o,k,l,le,se,S))?(be||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=se),y.props=l,y.state=se,y.context=S,l=k):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{y=s.stateNode,Xm(n,s),S=s.memoizedProps,be=Qo(o,S),y.props=be,Te=s.pendingProps,le=y.context,se=o.contextType,k=ms,typeof se=="object"&&se!==null&&(k=lr(se)),x=o.getDerivedStateFromProps,(se=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==Te||le!==k)&&j_(s,y,l,k),Va=!1,le=s.memoizedState,y.state=le,lc(s,l,y,m),uc();var ce=s.memoizedState;S!==Te||le!==ce||Va||n!==null&&n.dependencies!==null&&mf(n.dependencies)?(typeof x=="function"&&(yp(s,o,x,l),ce=s.memoizedState),(be=Va||U_(s,o,be,l,le,ce,k)||n!==null&&n.dependencies!==null&&mf(n.dependencies))?(se||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,ce,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,ce,k)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ce),y.props=l,y.state=ce,y.context=k,l=be):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&le===n.memoizedState||(s.flags|=1024),l=!1)}return y=l,Pf(n,s),l=(s.flags&128)!==0,y||l?(y=s.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&l?(s.child=$u(s,n.child,null,m),s.child=$u(s,null,o,m)):er(n,s,o,m),s.memoizedState=y.state,n=s.child):n=Ys(n,s,m),n}function e0(n,s,o,l){return ec(),s.flags|=256,er(n,s,o,l),s.child}var Ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tp(n){return{baseLanes:n,cachePool:zv()}}function wp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Ci),n}function t0(n,s,o){var l=s.pendingProps,m=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Mn.current&2)!==0),S&&(m=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Nt){if(m?Ba(s):za(),Nt){var x=hn,k;if(k=x){e:{for(k=x,x=ps;k.nodeType!==8;){if(!x){x=null;break e}if(k=Wi(k.nextSibling),k===null){x=null;break e}}x=k}x!==null?(s.memoizedState={dehydrated:x,treeContext:jo!==null?{id:qs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},k=Zr(18,null,null,0),k.stateNode=x,k.return=s,s.child=k,Tr=s,hn=null,k=!0):k=!1}k||qo(s)}if(x=s.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return ag(x)?s.lanes=32:s.lanes=536870912,null;Qs(s)}return x=l.children,l=l.fallback,m?(za(),m=s.mode,x=Mf({mode:"hidden",children:x},m),l=Uo(l,m,o,null),x.return=s,l.return=s,x.sibling=l,s.child=x,m=s.child,m.memoizedState=Tp(o),m.childLanes=wp(n,S,o),s.memoizedState=Ep,l):(Ba(s),Sp(s,x))}if(k=n.memoizedState,k!==null&&(x=k.dehydrated,x!==null)){if(y)s.flags&256?(Ba(s),s.flags&=-257,s=Ap(n,s,o)):s.memoizedState!==null?(za(),s.child=n.child,s.flags|=128,s=null):(za(),m=l.fallback,x=s.mode,l=Mf({mode:"visible",children:l.children},x),m=Uo(m,x,o,null),m.flags|=2,l.return=s,m.return=s,l.sibling=m,s.child=l,$u(s,n.child,null,o),l=s.child,l.memoizedState=Tp(o),l.childLanes=wp(n,S,o),s.memoizedState=Ep,s=m);else if(Ba(s),ag(x)){if(S=x.nextSibling&&x.nextSibling.dataset,S)var se=S.dgst;S=se,l=Error(r(419)),l.stack="",l.digest=S,tc({value:l,source:null,stack:null}),s=Ap(n,s,o)}else if(Fn||nc(n,s,o,!1),S=(o&n.childLanes)!==0,Fn||S){if(S=Xt,S!==null&&(l=o&-o,l=(l&42)!==0?1:as(l),l=(l&(S.suspendedLanes|o))!==0?0:l,l!==0&&l!==k.retryLane))throw k.retryLane=l,$i(n,l),ri(S,n,l),G_;x.data==="$?"||Fp(),s=Ap(n,s,o)}else x.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=k.treeContext,hn=Wi(x.nextSibling),Tr=s,Nt=!0,zo=null,ps=!1,n!==null&&(Ii[Ri++]=qs,Ii[Ri++]=Fs,Ii[Ri++]=jo,qs=n.id,Fs=n.overflow,jo=s),s=Sp(s,l.children),s.flags|=4096);return s}return m?(za(),m=l.fallback,x=s.mode,k=n.child,se=k.sibling,l=zs(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,se!==null?m=zs(se,m):(m=Uo(m,x,o,null),m.flags|=2),m.return=s,l.return=s,l.sibling=m,s.child=l,l=m,m=s.child,x=n.child.memoizedState,x===null?x=Tp(o):(k=x.cachePool,k!==null?(se=Pn._currentValue,k=k.parent!==se?{parent:se,pool:se}:k):k=zv(),x={baseLanes:x.baseLanes|o,cachePool:k}),m.memoizedState=x,m.childLanes=wp(n,S,o),s.memoizedState=Ep,l):(Ba(s),o=n.child,n=o.sibling,o=zs(o,{mode:"visible",children:l.children}),o.return=s,o.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=o,s.memoizedState=null,o)}function Sp(n,s){return s=Mf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Mf(n,s){return n=Zr(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Ap(n,s,o){return $u(s,n.child,null,o),n=Sp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function n0(n,s,o){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Fm(n.return,s,o)}function Ip(n,s,o,l,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=o,y.tailMode=m)}function r0(n,s,o){var l=s.pendingProps,m=l.revealOrder,y=l.tail;if(er(n,s,l.children,o),l=Mn.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&n0(n,o,s);else if(n.tag===19)n0(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(Ie(Mn,l),m){case"forwards":for(o=s.child,m=null;o!==null;)n=o.alternate,n!==null&&Df(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Ip(s,!1,m,o,y);break;case"backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Df(n)===null){s.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}Ip(s,!0,o,null,y);break;case"together":Ip(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ys(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Ga|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(nc(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=zs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=zs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Rp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&mf(n)))}function hI(n,s,o){switch(s.tag){case 3:jt(s,s.stateNode.containerInfo),ka(s,Pn,n.memoizedState.cache),ec();break;case 27:case 5:Pi(s);break;case 4:jt(s,s.stateNode.containerInfo);break;case 10:ka(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ba(s),s.flags|=128,null):(o&s.child.childLanes)!==0?t0(n,s,o):(Ba(s),n=Ys(n,s,o),n!==null?n.sibling:null);Ba(s);break;case 19:var m=(n.flags&128)!==0;if(l=(o&s.childLanes)!==0,l||(nc(n,s,o,!1),l=(o&s.childLanes)!==0),m){if(l)return r0(n,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ie(Mn,Mn.current),l)break;return null;case 22:case 23:return s.lanes=0,X_(n,s,o);case 24:ka(s,Pn,n.memoizedState.cache)}return Ys(n,s,o)}function i0(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Fn=!0;else{if(!Rp(n,o)&&(s.flags&128)===0)return Fn=!1,hI(n,s,o);Fn=(n.flags&131072)!==0}else Fn=!1,Nt&&(s.flags&1048576)!==0&&Mv(s,df,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,m=l._init;if(l=m(l._payload),s.type=l,typeof l=="function")Vm(l)?(n=Qo(l,n),s.tag=1,s=J_(null,s,l,n,o)):(s.tag=0,s=bp(null,s,l,n,o));else{if(l!=null){if(m=l.$$typeof,m===Re){s.tag=11,s=Q_(null,s,l,n,o);break e}else if(m===L){s.tag=14,s=Y_(null,s,l,n,o);break e}}throw s=Dn(l)||l,Error(r(306,s,""))}}return s;case 0:return bp(n,s,s.type,s.pendingProps,o);case 1:return l=s.type,m=Qo(l,s.pendingProps),J_(n,s,l,m,o);case 3:e:{if(jt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var y=s.memoizedState;m=y.element,Xm(n,s),lc(s,l,null,o);var S=s.memoizedState;if(l=S.cache,ka(s,Pn,l),l!==y.cache&&Km(s,[Pn],o,!0),uc(),l=S.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=e0(n,s,l,o);break e}else if(l!==m){m=Ze(Error(r(424)),s),tc(m),s=e0(n,s,l,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(hn=Wi(n.firstChild),Tr=s,Nt=!0,zo=null,ps=!0,o=V_(s,null,l,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ec(),l===m){s=Ys(n,s,o);break e}er(n,s,l,o)}s=s.child}return s;case 26:return Pf(n,s),n===null?(o=ub(s.type,null,s.pendingProps,null))?s.memoizedState=o:Nt||(o=s.type,n=s.pendingProps,l=Yf(et.current).createElement(o),l[Jt]=s,l[ut]=n,nr(l,o,n),Mt(l),s.stateNode=l):s.memoizedState=ub(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Pi(s),n===null&&Nt&&(l=s.stateNode=sb(s.type,s.pendingProps,et.current),Tr=s,ps=!0,m=hn,Xa(s.type)?(og=m,hn=Wi(l.firstChild)):hn=m),er(n,s,s.pendingProps.children,o),Pf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Nt&&((m=l=hn)&&(l=jI(l,s.type,s.pendingProps,ps),l!==null?(s.stateNode=l,Tr=s,hn=Wi(l.firstChild),ps=!1,m=!0):m=!1),m||qo(s)),Pi(s),m=s.type,y=s.pendingProps,S=n!==null?n.memoizedProps:null,l=y.children,rg(m,y)?l=null:S!==null&&rg(m,S)&&(s.flags|=32),s.memoizedState!==null&&(m=np(n,s,rI,null,null,o),Oc._currentValue=m),Pf(n,s),er(n,s,l,o),s.child;case 6:return n===null&&Nt&&((n=o=hn)&&(o=BI(o,s.pendingProps,ps),o!==null?(s.stateNode=o,Tr=s,hn=null,n=!0):n=!1),n||qo(s)),null;case 13:return t0(n,s,o);case 4:return jt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=$u(s,null,l,o):er(n,s,l,o),s.child;case 11:return Q_(n,s,s.type,s.pendingProps,o);case 7:return er(n,s,s.pendingProps,o),s.child;case 8:return er(n,s,s.pendingProps.children,o),s.child;case 12:return er(n,s,s.pendingProps.children,o),s.child;case 10:return l=s.pendingProps,ka(s,s.type,l.value),er(n,s,l.children,o),s.child;case 9:return m=s.type._context,l=s.pendingProps.children,Ko(s),m=lr(m),l=l(m),s.flags|=1,er(n,s,l,o),s.child;case 14:return Y_(n,s,s.type,s.pendingProps,o);case 15:return $_(n,s,s.type,s.pendingProps,o);case 19:return r0(n,s,o);case 31:return l=s.pendingProps,o=s.mode,l={mode:l.mode,children:l.children},n===null?(o=Mf(l,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=zs(n.child,l),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return X_(n,s,o);case 24:return Ko(s),l=lr(Pn),n===null?(m=Qm(),m===null&&(m=Xt,y=Hm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),s.memoizedState={parent:l,cache:m},$m(s),ka(s,Pn,m)):((n.lanes&o)!==0&&(Xm(n,s),lc(s,null,null,o),uc()),m=n.memoizedState,y=s.memoizedState,m.parent!==l?(m={parent:l,cache:l},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),ka(s,Pn,l)):(l=y.cache,ka(s,Pn,l),l!==m.cache&&Km(s,[Pn],o,!0))),er(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function $s(n){n.flags|=4}function s0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!db(s)){if(s=xi.current,s!==null&&((Rt&4194048)===Rt?gs!==null:(Rt&62914560)!==Rt&&(Rt&536870912)===0||s!==gs))throw ac=Ym,qv;n.flags|=8192}}function kf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Ue():536870912,n.lanes|=s,Ju|=s)}function gc(n,s){if(!Nt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function an(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,l=0;if(s)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,l|=m.subtreeFlags&65011712,l|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,l|=m.subtreeFlags,l|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=l,n.childLanes=o,s}function fI(n,s,o){var l=s.pendingProps;switch(Bm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(s),null;case 1:return an(s),null;case 3:return o=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Hs(Pn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Jl(s)?$s(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Lv())),an(s),null;case 26:return o=s.memoizedState,n===null?($s(s),o!==null?(an(s),s0(s,o)):(an(s),s.flags&=-16777217)):o?o!==n.memoizedState?($s(s),an(s),s0(s,o)):(an(s),s.flags&=-16777217):(n.memoizedProps!==l&&$s(s),an(s),s.flags&=-16777217),null;case 27:Ar(s),o=et.current;var m=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&$s(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return an(s),null}n=We.current,Jl(s)?kv(s):(n=sb(m,l,o),s.stateNode=n,$s(s))}return an(s),null;case 5:if(Ar(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&$s(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return an(s),null}if(n=We.current,Jl(s))kv(s);else{switch(m=Yf(et.current),n){case 1:n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=m.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?m.createElement(o,{is:l.is}):m.createElement(o)}}n[Jt]=s,n[ut]=l;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)n.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=n;e:switch(nr(n,o,l),o){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&$s(s)}}return an(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&$s(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=et.current,Jl(s)){if(n=s.stateNode,o=s.memoizedProps,l=null,m=Tr,m!==null)switch(m.tag){case 27:case 5:l=m.memoizedProps}n[Jt]=s,n=!!(n.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||Z0(n.nodeValue,o)),n||qo(s)}else n=Yf(n).createTextNode(l),n[Jt]=s,s.stateNode=n}return an(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Jl(s),l!==null&&l.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Jt]=s}else ec(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),m=!1}else m=Lv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Qs(s),s):(Qs(s),null)}if(Qs(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=l!==null,n=n!==null&&n.memoizedState!==null,o){l=s.child,m=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(m=l.alternate.memoizedState.cachePool.pool);var y=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==m&&(l.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),kf(s,s.updateQueue),an(s),null;case 4:return Fe(),n===null&&Zp(s.stateNode.containerInfo),an(s),null;case 10:return Hs(s.type),an(s),null;case 19:if(je(Mn),m=s.memoizedState,m===null)return an(s),null;if(l=(s.flags&128)!==0,y=m.rendering,y===null)if(l)gc(m,!1);else{if(fn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Df(n),y!==null){for(s.flags|=128,gc(m,!1),n=y.updateQueue,s.updateQueue=n,kf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Pv(o,n),o=o.sibling;return Ie(Mn,Mn.current&1|2),s.child}n=n.sibling}m.tail!==null&&Ir()>Uf&&(s.flags|=128,l=!0,gc(m,!1),s.lanes=4194304)}else{if(!l)if(n=Df(y),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,kf(s,n),gc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Nt)return an(s),null}else 2*Ir()-m.renderingStartTime>Uf&&o!==536870912&&(s.flags|=128,l=!0,gc(m,!1),s.lanes=4194304);m.isBackwards?(y.sibling=s.child,s.child=y):(n=m.last,n!==null?n.sibling=y:s.child=y,m.last=y)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ir(),s.sibling=null,n=Mn.current,Ie(Mn,l?n&1|2:n&1),s):(an(s),null);case 22:case 23:return Qs(s),ep(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(o&536870912)!==0&&(s.flags&128)===0&&(an(s),s.subtreeFlags&6&&(s.flags|=8192)):an(s),o=s.updateQueue,o!==null&&kf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==o&&(s.flags|=2048),n!==null&&je(Ho),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Hs(Pn),an(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function dI(n,s){switch(Bm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Hs(Pn),Fe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ar(s),null;case 13:if(Qs(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ec()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return je(Mn),null;case 4:return Fe(),null;case 10:return Hs(s.type),null;case 22:case 23:return Qs(s),ep(),n!==null&&je(Ho),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Hs(Pn),null;case 25:return null;default:return null}}function a0(n,s){switch(Bm(s),s.tag){case 3:Hs(Pn),Fe();break;case 26:case 27:case 5:Ar(s);break;case 4:Fe();break;case 13:Qs(s);break;case 19:je(Mn);break;case 10:Hs(s.type);break;case 22:case 23:Qs(s),ep(),n!==null&&je(Ho);break;case 24:Hs(Pn)}}function yc(n,s){try{var o=s.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var m=l.next;o=m;do{if((o.tag&n)===n){l=void 0;var y=o.create,S=o.inst;l=y(),S.destroy=l}o=o.next}while(o!==m)}}catch(x){Gt(s,s.return,x)}}function qa(n,s,o){try{var l=s.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var y=m.next;l=y;do{if((l.tag&n)===n){var S=l.inst,x=S.destroy;if(x!==void 0){S.destroy=void 0,m=s;var k=o,se=x;try{se()}catch(be){Gt(m,k,be)}}}l=l.next}while(l!==y)}}catch(be){Gt(s,s.return,be)}}function o0(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Yv(s,o)}catch(l){Gt(n,n.return,l)}}}function u0(n,s,o){o.props=Qo(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(l){Gt(n,s,l)}}function vc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof o=="function"?n.refCleanup=o(l):o.current=l}}catch(m){Gt(n,s,m)}}function ys(n,s){var o=n.ref,l=n.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(m){Gt(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Gt(n,s,m)}else o.current=null}function l0(n){var s=n.type,o=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(m){Gt(n,n.return,m)}}function xp(n,s,o){try{var l=n.stateNode;MI(l,n.type,o,s),l[ut]=s}catch(m){Gt(n,n.return,m)}}function c0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xa(n.type)||n.tag===4}function Cp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||c0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Dp(n,s,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Qf));else if(l!==4&&(l===27&&Xa(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Dp(n,s,o),n=n.sibling;n!==null;)Dp(n,s,o),n=n.sibling}function Vf(n,s,o){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(l!==4&&(l===27&&Xa(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Vf(n,s,o),n=n.sibling;n!==null;)Vf(n,s,o),n=n.sibling}function h0(n){var s=n.stateNode,o=n.memoizedProps;try{for(var l=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);nr(s,l,o),s[Jt]=n,s[ut]=o}catch(y){Gt(n,n.return,y)}}var Xs=!1,_n=!1,Op=!1,f0=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function mI(n,s){if(n=n.containerInfo,tg=ed,n=A(n),R(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var m=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,x=-1,k=-1,se=0,be=0,Te=n,le=null;t:for(;;){for(var ce;Te!==o||m!==0&&Te.nodeType!==3||(x=S+m),Te!==y||l!==0&&Te.nodeType!==3||(k=S+l),Te.nodeType===3&&(S+=Te.nodeValue.length),(ce=Te.firstChild)!==null;)le=Te,Te=ce;for(;;){if(Te===n)break t;if(le===o&&++se===m&&(x=S),le===y&&++be===l&&(k=S),(ce=Te.nextSibling)!==null)break;Te=le,le=Te.parentNode}Te=ce}o=x===-1||k===-1?null:{start:x,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(ng={focusedElem:n,selectionRange:o},ed=!1,Kn=s;Kn!==null;)if(s=Kn,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Kn=n;else for(;Kn!==null;){switch(s=Kn,y=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=s,m=y.memoizedProps,y=y.memoizedState,l=o.stateNode;try{var st=Qo(o.type,m,o.elementType===o.type);n=l.getSnapshotBeforeUpdate(st,y),l.__reactInternalSnapshotBeforeUpdate=n}catch(nt){Gt(o,o.return,nt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)sg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Kn=n;break}Kn=s.return}}function d0(n,s,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:Fa(n,o),l&4&&yc(5,o);break;case 1:if(Fa(n,o),l&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(S){Gt(o,o.return,S)}else{var m=Qo(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Gt(o,o.return,S)}}l&64&&o0(o),l&512&&vc(o,o.return);break;case 3:if(Fa(n,o),l&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Yv(n,s)}catch(S){Gt(o,o.return,S)}}break;case 27:s===null&&l&4&&h0(o);case 26:case 5:Fa(n,o),s===null&&l&4&&l0(o),l&512&&vc(o,o.return);break;case 12:Fa(n,o);break;case 13:Fa(n,o),l&4&&g0(n,o),l&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=wI.bind(null,o),zI(n,o))));break;case 22:if(l=o.memoizedState!==null||Xs,!l){s=s!==null&&s.memoizedState!==null||_n,m=Xs;var y=_n;Xs=l,(_n=s)&&!y?Ka(n,o,(o.subtreeFlags&8772)!==0):Fa(n,o),Xs=m,_n=y}break;case 30:break;default:Fa(n,o)}}function m0(n){var s=n.alternate;s!==null&&(n.alternate=null,m0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&$n(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var nn=null,Lr=!1;function Ws(n,s,o){for(o=o.child;o!==null;)p0(n,s,o),o=o.sibling}function p0(n,s,o){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Pt,o)}catch{}switch(o.tag){case 26:_n||ys(o,s),Ws(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_n||ys(o,s);var l=nn,m=Lr;Xa(o.type)&&(nn=o.stateNode,Lr=!1),Ws(n,s,o),Rc(o.stateNode),nn=l,Lr=m;break;case 5:_n||ys(o,s);case 6:if(l=nn,m=Lr,nn=null,Ws(n,s,o),nn=l,Lr=m,nn!==null)if(Lr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(o.stateNode)}catch(y){Gt(o,s,y)}else try{nn.removeChild(o.stateNode)}catch(y){Gt(o,s,y)}break;case 18:nn!==null&&(Lr?(n=nn,rb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),kc(n)):rb(nn,o.stateNode));break;case 4:l=nn,m=Lr,nn=o.stateNode.containerInfo,Lr=!0,Ws(n,s,o),nn=l,Lr=m;break;case 0:case 11:case 14:case 15:_n||qa(2,o,s),_n||qa(4,o,s),Ws(n,s,o);break;case 1:_n||(ys(o,s),l=o.stateNode,typeof l.componentWillUnmount=="function"&&u0(o,s,l)),Ws(n,s,o);break;case 21:Ws(n,s,o);break;case 22:_n=(l=_n)||o.memoizedState!==null,Ws(n,s,o),_n=l;break;default:Ws(n,s,o)}}function g0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{kc(n)}catch(o){Gt(s,s.return,o)}}function pI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new f0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new f0),s;default:throw Error(r(435,n.tag))}}function Np(n,s){var o=pI(n);s.forEach(function(l){var m=SI.bind(null,n,l);o.has(l)||(o.add(l),l.then(m,m))})}function Jr(n,s){var o=s.deletions;if(o!==null)for(var l=0;l<o.length;l++){var m=o[l],y=n,S=s,x=S;e:for(;x!==null;){switch(x.tag){case 27:if(Xa(x.type)){nn=x.stateNode,Lr=!1;break e}break;case 5:nn=x.stateNode,Lr=!1;break e;case 3:case 4:nn=x.stateNode.containerInfo,Lr=!0;break e}x=x.return}if(nn===null)throw Error(r(160));p0(y,S,m),nn=null,Lr=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)y0(s,n),s=s.sibling}var Xi=null;function y0(n,s){var o=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jr(s,n),ei(n),l&4&&(qa(3,n,n.return),yc(3,n),qa(5,n,n.return));break;case 1:Jr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),l&64&&Xs&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var m=Xi;if(Jr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),l&4){var y=o!==null?o.memoizedState:null;if(l=n.memoizedState,o===null)if(l===null)if(n.stateNode===null){e:{l=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(l){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ps]||y[Jt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(l),m.head.insertBefore(y,m.querySelector("head > title"))),nr(y,l,o),y[Jt]=n,Mt(y),l=y;break e;case"link":var S=hb("link","href",m).get(l+(o.href||""));if(S){for(var x=0;x<S.length;x++)if(y=S[x],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(x,1);break t}}y=m.createElement(l),nr(y,l,o),m.head.appendChild(y);break;case"meta":if(S=hb("meta","content",m).get(l+(o.content||""))){for(x=0;x<S.length;x++)if(y=S[x],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(x,1);break t}}y=m.createElement(l),nr(y,l,o),m.head.appendChild(y);break;default:throw Error(r(468,l))}y[Jt]=n,Mt(y),l=y}n.stateNode=l}else fb(m,n.type,n.stateNode);else n.stateNode=cb(m,l,n.memoizedProps);else y!==l?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,l===null?fb(m,n.type,n.stateNode):cb(m,l,n.memoizedProps)):l===null&&n.stateNode!==null&&xp(n,n.memoizedProps,o.memoizedProps)}break;case 27:Jr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),o!==null&&l&4&&xp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Jr(s,n),ei(n),l&512&&(_n||o===null||ys(o,o.return)),n.flags&32){m=n.stateNode;try{Dr(m,"")}catch(ce){Gt(n,n.return,ce)}}l&4&&n.stateNode!=null&&(m=n.memoizedProps,xp(n,m,o!==null?o.memoizedProps:m)),l&1024&&(Op=!0);break;case 6:if(Jr(s,n),ei(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,o=n.stateNode;try{o.nodeValue=l}catch(ce){Gt(n,n.return,ce)}}break;case 3:if(Wf=null,m=Xi,Xi=$f(s.containerInfo),Jr(s,n),Xi=m,ei(n),l&4&&o!==null&&o.memoizedState.isDehydrated)try{kc(s.containerInfo)}catch(ce){Gt(n,n.return,ce)}Op&&(Op=!1,v0(n));break;case 4:l=Xi,Xi=$f(n.stateNode.containerInfo),Jr(s,n),ei(n),Xi=l;break;case 12:Jr(s,n),ei(n);break;case 13:Jr(s,n),ei(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Up=Ir()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Np(n,l)));break;case 22:m=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,se=Xs,be=_n;if(Xs=se||m,_n=be||k,Jr(s,n),_n=be,Xs=se,ei(n),l&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||k||Xs||_n||Yo(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){k=o=s;try{if(y=k.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{x=k.stateNode;var Te=k.memoizedProps.style,le=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;x.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ce){Gt(k,k.return,ce)}}}else if(s.tag===6){if(o===null){k=s;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(ce){Gt(k,k.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,Np(n,o))));break;case 19:Jr(s,n),ei(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Np(n,l)));break;case 30:break;case 21:break;default:Jr(s,n),ei(n)}}function ei(n){var s=n.flags;if(s&2){try{for(var o,l=n.return;l!==null;){if(c0(l)){o=l;break}l=l.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,y=Cp(n);Vf(n,y,m);break;case 5:var S=o.stateNode;o.flags&32&&(Dr(S,""),o.flags&=-33);var x=Cp(n);Vf(n,x,S);break;case 3:case 4:var k=o.stateNode.containerInfo,se=Cp(n);Dp(n,se,k);break;default:throw Error(r(161))}}catch(be){Gt(n,n.return,be)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function v0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;v0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Fa(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)d0(n,s.alternate,s),s=s.sibling}function Yo(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:qa(4,s,s.return),Yo(s);break;case 1:ys(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&u0(s,s.return,o),Yo(s);break;case 27:Rc(s.stateNode);case 26:case 5:ys(s,s.return),Yo(s);break;case 22:s.memoizedState===null&&Yo(s);break;case 30:Yo(s);break;default:Yo(s)}n=n.sibling}}function Ka(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,m=n,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:Ka(m,y,o),yc(4,y);break;case 1:if(Ka(m,y,o),l=y,m=l.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(se){Gt(l,l.return,se)}if(l=y,m=l.updateQueue,m!==null){var x=l.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)Qv(k[m],x)}catch(se){Gt(l,l.return,se)}}o&&S&64&&o0(y),vc(y,y.return);break;case 27:h0(y);case 26:case 5:Ka(m,y,o),o&&l===null&&S&4&&l0(y),vc(y,y.return);break;case 12:Ka(m,y,o);break;case 13:Ka(m,y,o),o&&S&4&&g0(m,y);break;case 22:y.memoizedState===null&&Ka(m,y,o),vc(y,y.return);break;case 30:break;default:Ka(m,y,o)}s=s.sibling}}function Pp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&rc(o))}function Mp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&rc(n))}function vs(n,s,o,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_0(n,s,o,l),s=s.sibling}function _0(n,s,o,l){var m=s.flags;switch(s.tag){case 0:case 11:case 15:vs(n,s,o,l),m&2048&&yc(9,s);break;case 1:vs(n,s,o,l);break;case 3:vs(n,s,o,l),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&rc(n)));break;case 12:if(m&2048){vs(n,s,o,l),n=s.stateNode;try{var y=s.memoizedProps,S=y.id,x=y.onPostCommit;typeof x=="function"&&x(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){Gt(s,s.return,k)}}else vs(n,s,o,l);break;case 13:vs(n,s,o,l);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?vs(n,s,o,l):_c(n,s):y._visibility&2?vs(n,s,o,l):(y._visibility|=2,Xu(n,s,o,l,(s.subtreeFlags&10256)!==0)),m&2048&&Pp(S,s);break;case 24:vs(n,s,o,l),m&2048&&Mp(s.alternate,s);break;default:vs(n,s,o,l)}}function Xu(n,s,o,l,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=n,S=s,x=o,k=l,se=S.flags;switch(S.tag){case 0:case 11:case 15:Xu(y,S,x,k,m),yc(8,S);break;case 23:break;case 22:var be=S.stateNode;S.memoizedState!==null?be._visibility&2?Xu(y,S,x,k,m):_c(y,S):(be._visibility|=2,Xu(y,S,x,k,m)),m&&se&2048&&Pp(S.alternate,S);break;case 24:Xu(y,S,x,k,m),m&&se&2048&&Mp(S.alternate,S);break;default:Xu(y,S,x,k,m)}s=s.sibling}}function _c(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,l=s,m=l.flags;switch(l.tag){case 22:_c(o,l),m&2048&&Pp(l.alternate,l);break;case 24:_c(o,l),m&2048&&Mp(l.alternate,l);break;default:_c(o,l)}s=s.sibling}}var bc=8192;function Wu(n){if(n.subtreeFlags&bc)for(n=n.child;n!==null;)b0(n),n=n.sibling}function b0(n){switch(n.tag){case 26:Wu(n),n.flags&bc&&n.memoizedState!==null&&eR(Xi,n.memoizedState,n.memoizedProps);break;case 5:Wu(n);break;case 3:case 4:var s=Xi;Xi=$f(n.stateNode.containerInfo),Wu(n),Xi=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=bc,bc=16777216,Wu(n),bc=s):Wu(n));break;default:Wu(n)}}function E0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ec(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Kn=l,w0(l,n)}E0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)T0(n),n=n.sibling}function T0(n){switch(n.tag){case 0:case 11:case 15:Ec(n),n.flags&2048&&qa(9,n,n.return);break;case 3:Ec(n);break;case 12:Ec(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Lf(n)):Ec(n);break;default:Ec(n)}}function Lf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var l=s[o];Kn=l,w0(l,n)}E0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:qa(8,s,s.return),Lf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Lf(s));break;default:Lf(s)}n=n.sibling}}function w0(n,s){for(;Kn!==null;){var o=Kn;switch(o.tag){case 0:case 11:case 15:qa(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rc(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,Kn=l;else e:for(o=n;Kn!==null;){l=Kn;var m=l.sibling,y=l.return;if(m0(l),l===o){Kn=null;break e}if(m!==null){m.return=y,Kn=m;break e}Kn=y}}}var gI={getCacheForType:function(n){var s=lr(Pn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},yI=typeof WeakMap=="function"?WeakMap:Map,Vt=0,Xt=null,_t=null,Rt=0,Lt=0,ti=null,Ha=!1,Zu=!1,kp=!1,Zs=0,fn=0,Ga=0,$o=0,Vp=0,Ci=0,Ju=0,Tc=null,Ur=null,Lp=!1,Up=0,Uf=1/0,jf=null,Qa=null,tr=0,Ya=null,el=null,tl=0,jp=0,Bp=null,S0=null,wc=0,zp=null;function ni(){if((Vt&2)!==0&&Rt!==0)return Rt&-Rt;if(ye.T!==null){var n=qu;return n!==0?n:Yp()}return gr()}function A0(){Ci===0&&(Ci=(Rt&536870912)===0||Nt?ss():536870912);var n=xi.current;return n!==null&&(n.flags|=32),Ci}function ri(n,s,o){(n===Xt&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)&&(nl(n,0),$a(n,Rt,Ci,!1)),hi(n,o),((Vt&2)===0||n!==Xt)&&(n===Xt&&((Vt&2)===0&&($o|=o),fn===4&&$a(n,Rt,Ci,!1)),_s(n))}function I0(n,s,o){if((Vt&6)!==0)throw Error(r(327));var l=!o&&(s&124)===0&&(s&n.expiredLanes)===0||qr(n,s),m=l?bI(n,s):Kp(n,s,!0),y=l;do{if(m===0){Zu&&!l&&$a(n,s,0,!1);break}else{if(o=n.current.alternate,y&&!vI(o)){m=Kp(n,s,!1),y=!1;continue}if(m===2){if(y=s,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var x=n;m=Tc;var k=x.current.memoizedState.isDehydrated;if(k&&(nl(x,S).flags|=256),S=Kp(x,S,!1),S!==2){if(kp&&!k){x.errorRecoveryDisabledLanes|=y,$o|=y,m=4;break e}y=Ur,Ur=m,y!==null&&(Ur===null?Ur=y:Ur.push.apply(Ur,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){nl(n,0),$a(n,s,0,!0);break}e:{switch(l=n,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:$a(l,s,Ci,!Ha);break e;case 2:Ur=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Up+300-Ir(),10<m)){if($a(l,s,Ci,!Ha),qe(l,0,!0)!==0)break e;l.timeoutHandle=tb(R0.bind(null,l,o,Ur,jf,Lp,s,Ci,$o,Ju,Ha,y,2,-0,0),m);break e}R0(l,o,Ur,jf,Lp,s,Ci,$o,Ju,Ha,y,0,-0,0)}}break}while(!0);_s(n)}function R0(n,s,o,l,m,y,S,x,k,se,be,Te,le,ce){if(n.timeoutHandle=-1,Te=s.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(Dc={stylesheets:null,count:0,unsuspend:JI},b0(s),Te=tR(),Te!==null)){n.cancelPendingCommit=Te(M0.bind(null,n,s,y,o,l,m,S,x,k,be,1,le,ce)),$a(n,y,S,!se);return}M0(n,s,y,o,l,m,S,x,k)}function vI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var m=o[l],y=m.getSnapshot;m=m.value;try{if(!ur(y(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $a(n,s,o,l){s&=~Vp,s&=~$o,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var m=s;0<m;){var y=31-ln(m),S=1<<y;l[y]=-1,m&=~S}o!==0&&Hr(n,o,s)}function Bf(){return(Vt&6)===0?(Sc(0),!1):!0}function qp(){if(_t!==null){if(Lt===0)var n=_t.return;else n=_t,Ks=Fo=null,sp(n),Yu=null,mc=0,n=_t;for(;n!==null;)a0(n.alternate,n),n=n.return;_t=null}}function nl(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,VI(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),qp(),Xt=n,_t=o=zs(n.current,null),Rt=s,Lt=0,ti=null,Ha=!1,Zu=qr(n,s),kp=!1,Ju=Ci=Vp=$o=Ga=fn=0,Ur=Tc=null,Lp=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var m=31-ln(l),y=1<<m;s|=n[m],l&=~y}return Zs=s,it(),o}function x0(n,s){mt=null,ye.H=Rf,s===sc||s===yf?(s=Hv(),Lt=3):s===qv?(s=Hv(),Lt=4):Lt=s===G_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ti=s,_t===null&&(fn=1,Nf(n,Ze(s,n.current)))}function C0(){var n=ye.H;return ye.H=Rf,n===null?Rf:n}function D0(){var n=ye.A;return ye.A=gI,n}function Fp(){fn=4,Ha||(Rt&4194048)!==Rt&&xi.current!==null||(Zu=!0),(Ga&134217727)===0&&($o&134217727)===0||Xt===null||$a(Xt,Rt,Ci,!1)}function Kp(n,s,o){var l=Vt;Vt|=2;var m=C0(),y=D0();(Xt!==n||Rt!==s)&&(jf=null,nl(n,s)),s=!1;var S=fn;e:do try{if(Lt!==0&&_t!==null){var x=_t,k=ti;switch(Lt){case 8:qp(),S=6;break e;case 3:case 2:case 9:case 6:xi.current===null&&(s=!0);var se=Lt;if(Lt=0,ti=null,rl(n,x,k,se),o&&Zu){S=0;break e}break;default:se=Lt,Lt=0,ti=null,rl(n,x,k,se)}}_I(),S=fn;break}catch(be){x0(n,be)}while(!0);return s&&n.shellSuspendCounter++,Ks=Fo=null,Vt=l,ye.H=m,ye.A=y,_t===null&&(Xt=null,Rt=0,it()),S}function _I(){for(;_t!==null;)O0(_t)}function bI(n,s){var o=Vt;Vt|=2;var l=C0(),m=D0();Xt!==n||Rt!==s?(jf=null,Uf=Ir()+500,nl(n,s)):Zu=qr(n,s);e:do try{if(Lt!==0&&_t!==null){s=_t;var y=ti;t:switch(Lt){case 1:Lt=0,ti=null,rl(n,s,y,1);break;case 2:case 9:if(Fv(y)){Lt=0,ti=null,N0(s);break}s=function(){Lt!==2&&Lt!==9||Xt!==n||(Lt=7),_s(n)},y.then(s,s);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:Fv(y)?(Lt=0,ti=null,N0(s)):(Lt=0,ti=null,rl(n,s,y,7));break;case 5:var S=null;switch(_t.tag){case 26:S=_t.memoizedState;case 5:case 27:var x=_t;if(!S||db(S)){Lt=0,ti=null;var k=x.sibling;if(k!==null)_t=k;else{var se=x.return;se!==null?(_t=se,zf(se)):_t=null}break t}}Lt=0,ti=null,rl(n,s,y,5);break;case 6:Lt=0,ti=null,rl(n,s,y,6);break;case 8:qp(),fn=6;break e;default:throw Error(r(462))}}EI();break}catch(be){x0(n,be)}while(!0);return Ks=Fo=null,ye.H=l,ye.A=m,Vt=o,_t!==null?0:(Xt=null,Rt=0,it(),fn)}function EI(){for(;_t!==null&&!zr();)O0(_t)}function O0(n){var s=i0(n.alternate,n,Zs);n.memoizedProps=n.pendingProps,s===null?zf(n):_t=s}function N0(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Z_(o,s,s.pendingProps,s.type,void 0,Rt);break;case 11:s=Z_(o,s,s.pendingProps,s.type.render,s.ref,Rt);break;case 5:sp(s);default:a0(o,s),s=_t=Pv(s,Zs),s=i0(o,s,Zs)}n.memoizedProps=n.pendingProps,s===null?zf(n):_t=s}function rl(n,s,o,l){Ks=Fo=null,sp(s),Yu=null,mc=0;var m=s.return;try{if(cI(n,m,s,o,Rt)){fn=1,Nf(n,Ze(o,n.current)),_t=null;return}}catch(y){if(m!==null)throw _t=m,y;fn=1,Nf(n,Ze(o,n.current)),_t=null;return}s.flags&32768?(Nt||l===1?n=!0:Zu||(Rt&536870912)!==0?n=!1:(Ha=n=!0,(l===2||l===9||l===3||l===6)&&(l=xi.current,l!==null&&l.tag===13&&(l.flags|=16384))),P0(s,n)):zf(s)}function zf(n){var s=n;do{if((s.flags&32768)!==0){P0(s,Ha);return}n=s.return;var o=fI(s.alternate,s,Zs);if(o!==null){_t=o;return}if(s=s.sibling,s!==null){_t=s;return}_t=s=n}while(s!==null);fn===0&&(fn=5)}function P0(n,s){do{var o=dI(n.alternate,n);if(o!==null){o.flags&=32767,_t=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){_t=n;return}_t=n=o}while(n!==null);fn=6,_t=null}function M0(n,s,o,l,m,y,S,x,k){n.cancelPendingCommit=null;do qf();while(tr!==0);if((Vt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=Jn,Ds(n,o,y,S,x,k),n===Xt&&(_t=Xt=null,Rt=0),el=s,Ya=n,tl=o,jp=y,Bp=m,S0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AI(Ln,function(){return j0(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ye.T,ye.T=null,m=Le.p,Le.p=2,S=Vt,Vt|=4;try{mI(n,s,o)}finally{Vt=S,Le.p=m,ye.T=l}}tr=1,k0(),V0(),L0()}}function k0(){if(tr===1){tr=0;var n=Ya,s=el,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ye.T,ye.T=null;var l=Le.p;Le.p=2;var m=Vt;Vt|=4;try{y0(s,n);var y=ng,S=A(n.containerInfo),x=y.focusedElem,k=y.selectionRange;if(S!==x&&x&&x.ownerDocument&&E(x.ownerDocument.documentElement,x)){if(k!==null&&R(x)){var se=k.start,be=k.end;if(be===void 0&&(be=se),"selectionStart"in x)x.selectionStart=se,x.selectionEnd=Math.min(be,x.value.length);else{var Te=x.ownerDocument||document,le=Te&&Te.defaultView||window;if(le.getSelection){var ce=le.getSelection(),st=x.textContent.length,nt=Math.min(k.start,st),Kt=k.end===void 0?nt:Math.min(k.end,st);!ce.extend&&nt>Kt&&(S=Kt,Kt=nt,nt=S);var J=_(x,nt),H=_(x,Kt);if(J&&H&&(ce.rangeCount!==1||ce.anchorNode!==J.node||ce.anchorOffset!==J.offset||ce.focusNode!==H.node||ce.focusOffset!==H.offset)){var ie=Te.createRange();ie.setStart(J.node,J.offset),ce.removeAllRanges(),nt>Kt?(ce.addRange(ie),ce.extend(H.node,H.offset)):(ie.setEnd(H.node,H.offset),ce.addRange(ie))}}}}for(Te=[],ce=x;ce=ce.parentNode;)ce.nodeType===1&&Te.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<Te.length;x++){var Ee=Te[x];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}ed=!!tg,ng=tg=null}finally{Vt=m,Le.p=l,ye.T=o}}n.current=s,tr=2}}function V0(){if(tr===2){tr=0;var n=Ya,s=el,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ye.T,ye.T=null;var l=Le.p;Le.p=2;var m=Vt;Vt|=4;try{d0(n,s.alternate,s)}finally{Vt=m,Le.p=l,ye.T=o}}tr=3}}function L0(){if(tr===4||tr===3){tr=0,Pu();var n=Ya,s=el,o=tl,l=S0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tr=5:(tr=0,el=Ya=null,U0(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Qa=null),ba(o),s=s.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Pt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ye.T,m=Le.p,Le.p=2,ye.T=null;try{for(var y=n.onRecoverableError,S=0;S<l.length;S++){var x=l[S];y(x.value,{componentStack:x.stack})}}finally{ye.T=s,Le.p=m}}(tl&3)!==0&&qf(),_s(n),m=n.pendingLanes,(o&4194090)!==0&&(m&42)!==0?n===zp?wc++:(wc=0,zp=n):wc=0,Sc(0)}}function U0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,rc(s)))}function qf(n){return k0(),V0(),L0(),j0()}function j0(){if(tr!==5)return!1;var n=Ya,s=jp;jp=0;var o=ba(tl),l=ye.T,m=Le.p;try{Le.p=32>o?32:o,ye.T=null,o=Bp,Bp=null;var y=Ya,S=tl;if(tr=0,el=Ya=null,tl=0,(Vt&6)!==0)throw Error(r(331));var x=Vt;if(Vt|=4,T0(y.current),_0(y,y.current,S,o),Vt=x,Sc(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Pt,y)}catch{}return!0}finally{Le.p=m,ye.T=l,U0(n,s)}}function B0(n,s,o){s=Ze(o,s),s=_p(n.stateNode,s,2),n=Ua(n,s,2),n!==null&&(hi(n,2),_s(n))}function Gt(n,s,o){if(n.tag===3)B0(n,n,o);else for(;s!==null;){if(s.tag===3){B0(s,n,o);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qa===null||!Qa.has(l))){n=Ze(o,n),o=K_(2),l=Ua(s,o,2),l!==null&&(H_(o,l,s,n),hi(l,2),_s(l));break}}s=s.return}}function Hp(n,s,o){var l=n.pingCache;if(l===null){l=n.pingCache=new yI;var m=new Set;l.set(s,m)}else m=l.get(s),m===void 0&&(m=new Set,l.set(s,m));m.has(o)||(kp=!0,m.add(o),n=TI.bind(null,n,s,o),s.then(n,n))}function TI(n,s,o){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(Rt&o)===o&&(fn===4||fn===3&&(Rt&62914560)===Rt&&300>Ir()-Up?(Vt&2)===0&&nl(n,0):Vp|=o,Ju===Rt&&(Ju=0)),_s(n)}function z0(n,s){s===0&&(s=Ue()),n=$i(n,s),n!==null&&(hi(n,s),_s(n))}function wI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),z0(n,o)}function SI(n,s){var o=0;switch(n.tag){case 13:var l=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),z0(n,o)}function AI(n,s){return Br(n,s)}var Ff=null,il=null,Gp=!1,Kf=!1,Qp=!1,Xo=0;function _s(n){n!==il&&n.next===null&&(il===null?Ff=il=n:il=il.next=n),Kf=!0,Gp||(Gp=!0,RI())}function Sc(n,s){if(!Qp&&Kf){Qp=!0;do for(var o=!1,l=Ff;l!==null;){if(n!==0){var m=l.pendingLanes;if(m===0)var y=0;else{var S=l.suspendedLanes,x=l.pingedLanes;y=(1<<31-ln(42|n)+1)-1,y&=m&~(S&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,H0(l,y))}else y=Rt,y=qe(l,l===Xt?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||qr(l,y)||(o=!0,H0(l,y));l=l.next}while(o);Qp=!1}}function II(){q0()}function q0(){Kf=Gp=!1;var n=0;Xo!==0&&(kI()&&(n=Xo),Xo=0);for(var s=Ir(),o=null,l=Ff;l!==null;){var m=l.next,y=F0(l,s);y===0?(l.next=null,o===null?Ff=m:o.next=m,m===null&&(il=o)):(o=l,(n!==0||(y&3)!==0)&&(Kf=!0)),l=m}Sc(n)}function F0(n,s){for(var o=n.suspendedLanes,l=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-ln(y),x=1<<S,k=m[S];k===-1?((x&o)===0||(x&l)!==0)&&(m[S]=Fr(x,s)):k<=s&&(n.expiredLanes|=x),y&=~x}if(s=Xt,o=Rt,o=qe(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,o===0||n===s&&(Lt===2||Lt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Cs(l),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||qr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(l!==null&&Cs(l),ba(o)){case 2:case 8:o=rs;break;case 32:o=Ln;break;case 268435456:o=li;break;default:o=Ln}return l=K0.bind(null,n),o=Br(o,l),n.callbackPriority=s,n.callbackNode=o,s}return l!==null&&l!==null&&Cs(l),n.callbackPriority=2,n.callbackNode=null,2}function K0(n,s){if(tr!==0&&tr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(qf()&&n.callbackNode!==o)return null;var l=Rt;return l=qe(n,n===Xt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(I0(n,l,s),F0(n,Ir()),n.callbackNode!=null&&n.callbackNode===o?K0.bind(null,n):null)}function H0(n,s){if(qf())return null;I0(n,s,!0)}function RI(){LI(function(){(Vt&6)!==0?Br(Ao,II):q0()})}function Yp(){return Xo===0&&(Xo=ss()),Xo}function G0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ji(""+n)}function Q0(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function xI(n,s,o,l,m){if(s==="submit"&&o&&o.stateNode===m){var y=G0((m[ut]||null).action),S=l.submitter;S&&(s=(s=S[ut]||null)?G0(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var x=new Aa("action","action",null,l,m);n.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Xo!==0){var k=S?Q0(m,S):new FormData(m);mp(o,{pending:!0,data:k,method:m.method,action:y},null,k)}}else typeof y=="function"&&(x.preventDefault(),k=S?Q0(m,S):new FormData(m),mp(o,{pending:!0,data:k,method:m.method,action:y},y,k))},currentTarget:m}]})}}for(var $p=0;$p<Ve.length;$p++){var Xp=Ve[$p],CI=Xp.toLowerCase(),DI=Xp[0].toUpperCase()+Xp.slice(1);De(CI,"on"+DI)}De(ae,"onAnimationEnd"),De(fe,"onAnimationIteration"),De(de,"onAnimationStart"),De("dblclick","onDoubleClick"),De("focusin","onFocus"),De("focusout","onBlur"),De(_e,"onTransitionRun"),De(Oe,"onTransitionStart"),De(ke,"onTransitionCancel"),De(Ce,"onTransitionEnd"),Qr("onMouseEnter",["mouseout","mouseover"]),Qr("onMouseLeave",["mouseout","mouseover"]),Qr("onPointerEnter",["pointerout","pointerover"]),Qr("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ac));function Y0(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var l=n[o],m=l.event;l=l.listeners;e:{var y=void 0;if(s)for(var S=l.length-1;0<=S;S--){var x=l[S],k=x.instance,se=x.currentTarget;if(x=x.listener,k!==y&&m.isPropagationStopped())break e;y=x,m.currentTarget=se;try{y(m)}catch(be){Of(be)}m.currentTarget=null,y=k}else for(S=0;S<l.length;S++){if(x=l[S],k=x.instance,se=x.currentTarget,x=x.listener,k!==y&&m.isPropagationStopped())break e;y=x,m.currentTarget=se;try{y(m)}catch(be){Of(be)}m.currentTarget=null,y=k}}}}function bt(n,s){var o=s[Io];o===void 0&&(o=s[Io]=new Set);var l=n+"__bubble";o.has(l)||($0(s,n,2,!1),o.add(l))}function Wp(n,s,o){var l=0;s&&(l|=4),$0(o,n,l,s)}var Hf="_reactListening"+Math.random().toString(36).slice(2);function Zp(n){if(!n[Hf]){n[Hf]=!0,Ta.forEach(function(o){o!=="selectionchange"&&(OI.has(o)||Wp(o,!1,n),Wp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Hf]||(s[Hf]=!0,Wp("selectionchange",!1,s))}}function $0(n,s,o,l){switch(_b(s)){case 2:var m=iR;break;case 8:m=sR;break;default:m=fg}o=m.bind(null,s,o,n),m=void 0,!Or||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),l?m!==void 0?n.addEventListener(s,o,{capture:!0,passive:m}):n.addEventListener(s,o,!0):m!==void 0?n.addEventListener(s,o,{passive:m}):n.addEventListener(s,o,!1)}function Jp(n,s,o,l,m){var y=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var x=l.stateNode.containerInfo;if(x===m)break;if(S===4)for(S=l.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;x!==null;){if(S=ir(x),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){l=y=S;continue e}x=x.parentNode}}l=l.return}cs(function(){var se=y,be=br(o),Te=[];e:{var le=Ne.get(n);if(le!==void 0){var ce=Aa,st=n;switch(n){case"keypress":if(Pr(o)===0)break e;case"keydown":case"keyup":ce=Qi;break;case"focusin":st="focus",ce=Fi;break;case"focusout":st="blur",ce=Fi;break;case"beforeblur":case"afterblur":ce=Fi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Da;break;case ae:case fe:case de:ce=Us;break;case Ce:ce=Oa;break;case"scroll":case"scrollend":ce=Vs;break;case"wheel":ce=Yi;break;case"copy":case"cut":case"paste":ce=Ki;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Ca;break;case"toggle":case"beforetoggle":ce=ko}var nt=(s&4)!==0,Kt=!nt&&(n==="scroll"||n==="scrollend"),J=nt?le!==null?le+"Capture":null:le;nt=[];for(var H=se,ie;H!==null;){var Ee=H;if(ie=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ie===null||J===null||(Ee=Bi(H,J),Ee!=null&&nt.push(Ic(H,Ee,ie))),Kt)break;H=H.return}0<nt.length&&(le=new ce(le,st,null,o,be),Te.push({event:le,listeners:nt}))}}if((s&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",le&&o!==Bn&&(st=o.relatedTarget||o.fromElement)&&(ir(st)||st[Ot]))break e;if((ce||le)&&(le=be.window===be?be:(le=be.ownerDocument)?le.defaultView||le.parentWindow:window,ce?(st=o.relatedTarget||o.toElement,ce=se,st=st?ir(st):null,st!==null&&(Kt=u(st),nt=st.tag,st!==Kt||nt!==5&&nt!==27&&nt!==6)&&(st=null)):(ce=null,st=se),ce!==st)){if(nt=or,Ee="onMouseLeave",J="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(nt=Ca,Ee="onPointerLeave",J="onPointerEnter",H="pointer"),Kt=ce==null?le:yr(ce),ie=st==null?le:yr(st),le=new nt(Ee,H+"leave",ce,o,be),le.target=Kt,le.relatedTarget=ie,Ee=null,ir(be)===se&&(nt=new nt(J,H+"enter",st,o,be),nt.target=ie,nt.relatedTarget=Kt,Ee=nt),Kt=Ee,ce&&st)t:{for(nt=ce,J=st,H=0,ie=nt;ie;ie=sl(ie))H++;for(ie=0,Ee=J;Ee;Ee=sl(Ee))ie++;for(;0<H-ie;)nt=sl(nt),H--;for(;0<ie-H;)J=sl(J),ie--;for(;H--;){if(nt===J||J!==null&&nt===J.alternate)break t;nt=sl(nt),J=sl(J)}nt=null}else nt=null;ce!==null&&X0(Te,le,ce,nt,!1),st!==null&&Kt!==null&&X0(Te,Kt,st,nt,!0)}}e:{if(le=se?yr(se):window,ce=le.nodeName&&le.nodeName.toLowerCase(),ce==="select"||ce==="input"&&le.type==="file")var Ke=Lo;else if(sn(le))if(Si)Ke=Ma;else{Ke=Bs;var gt=cf}else ce=le.nodeName,!ce||ce.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?se&&Do(se.elementType)&&(Ke=Lo):Ke=Zl;if(Ke&&(Ke=Ke(n,se))){Ti(Te,Ke,o,be);break e}gt&&gt(n,le,se),n==="focusout"&&se&&le.type==="number"&&se.memoizedProps.value!=null&&Yr(le,"number",le.value)}switch(gt=se?yr(se):window,n){case"focusin":(sn(gt)||gt.contentEditable==="true")&&(P=gt,K=se,G=null);break;case"focusout":G=K=P=null;break;case"mousedown":X=!0;break;case"contextmenu":case"mouseup":case"dragend":X=!1,U(Te,o,be);break;case"selectionchange":if(O)break;case"keydown":case"keyup":U(Te,o,be)}var Xe;if(kr)e:{switch(n){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else vt?me(n,o)&&(rt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(w&&o.locale!=="ko"&&(vt||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&vt&&(Xe=qi()):(Nr=be,zi="value"in Nr?Nr.value:Nr.textContent,vt=!0)),gt=Gf(se,rt),0<gt.length&&(rt=new js(rt,n,null,o,be),Te.push({event:rt,listeners:gt}),Xe?rt.data=Xe:(Xe=Pe(o),Xe!==null&&(rt.data=Xe)))),(Xe=b?cn(n,o):wt(n,o))&&(rt=Gf(se,"onBeforeInput"),0<rt.length&&(gt=new js("onBeforeInput","beforeinput",null,o,be),Te.push({event:gt,listeners:rt}),gt.data=Xe)),xI(Te,n,se,o,be)}Y0(Te,s)})}function Ic(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Gf(n,s){for(var o=s+"Capture",l=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Bi(n,o),m!=null&&l.unshift(Ic(n,m,y)),m=Bi(n,s),m!=null&&l.push(Ic(n,m,y))),n.tag===3)return l;n=n.return}return[]}function sl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function X0(n,s,o,l,m){for(var y=s._reactName,S=[];o!==null&&o!==l;){var x=o,k=x.alternate,se=x.stateNode;if(x=x.tag,k!==null&&k===l)break;x!==5&&x!==26&&x!==27||se===null||(k=se,m?(se=Bi(o,y),se!=null&&S.unshift(Ic(o,se,k))):m||(se=Bi(o,y),se!=null&&S.push(Ic(o,se,k)))),o=o.return}S.length!==0&&n.push({event:s,listeners:S})}var NI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function W0(n){return(typeof n=="string"?n:""+n).replace(NI,`
`).replace(PI,"")}function Z0(n,s){return s=W0(s),W0(n)===s}function Qf(){}function Ft(n,s,o,l,m,y){switch(o){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Dr(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Dr(n,""+l);break;case"className":_r(n,"class",l);break;case"tabIndex":_r(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(n,o,l);break;case"style":Co(n,l,y);break;case"data":if(s!=="object"){_r(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=ji(""+l),n.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&Ft(n,s,"name",m.name,m,null),Ft(n,s,"formEncType",m.formEncType,m,null),Ft(n,s,"formMethod",m.formMethod,m,null),Ft(n,s,"formTarget",m.formTarget,m,null)):(Ft(n,s,"encType",m.encType,m,null),Ft(n,s,"method",m.method,m,null),Ft(n,s,"target",m.target,m,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(o);break}l=ji(""+l),n.setAttribute(o,l);break;case"onClick":l!=null&&(n.onclick=Qf);break;case"onScroll":l!=null&&bt("scroll",n);break;case"onScrollEnd":l!=null&&bt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}o=ji(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""+l):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":l===!0?n.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(o,l):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(o,l):n.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(o):n.setAttribute(o,l);break;case"popover":bt("beforetoggle",n),bt("toggle",n),vr(n,"popover",l);break;case"xlinkActuate":mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":mn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":mn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":mn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":mn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":vr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Zn.get(o)||o,vr(n,o,l))}}function eg(n,s,o,l,m,y){switch(o){case"style":Co(n,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(o=l.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof l=="string"?Dr(n,l):(typeof l=="number"||typeof l=="bigint")&&Dr(n,""+l);break;case"onScroll":l!=null&&bt("scroll",n);break;case"onScrollEnd":l!=null&&bt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),y=n[ut]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(s,y,m),typeof l=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,l,m);break e}o in n?n[o]=l:l===!0?n.setAttribute(o,""):vr(n,o,l)}}}function nr(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",n),bt("load",n);var l=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var S=o[y];if(S!=null)switch(y){case"src":l=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ft(n,s,y,S,o,null)}}m&&Ft(n,s,"srcSet",o.srcSet,o,null),l&&Ft(n,s,"src",o.src,o,null);return;case"input":bt("invalid",n);var x=y=S=m=null,k=null,se=null;for(l in o)if(o.hasOwnProperty(l)){var be=o[l];if(be!=null)switch(l){case"name":m=be;break;case"type":S=be;break;case"checked":k=be;break;case"defaultChecked":se=be;break;case"value":y=be;break;case"defaultValue":x=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,s));break;default:Ft(n,s,l,be,o,null)}}os(n,y,x,k,se,S,m,!1),pi(n);return;case"select":bt("invalid",n),l=S=y=null;for(m in o)if(o.hasOwnProperty(m)&&(x=o[m],x!=null))switch(m){case"value":y=x;break;case"defaultValue":S=x;break;case"multiple":l=x;default:Ft(n,s,m,x,o,null)}s=y,o=S,n.multiple=!!l,s!=null?gi(n,!!l,s,!1):o!=null&&gi(n,!!l,o,!0);return;case"textarea":bt("invalid",n),y=m=l=null;for(S in o)if(o.hasOwnProperty(S)&&(x=o[S],x!=null))switch(S){case"value":l=x;break;case"defaultValue":m=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:Ft(n,s,S,x,o,null)}us(n,l,m,y),pi(n);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(l=o[k],l!=null))switch(k){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(n,s,k,l,o,null)}return;case"dialog":bt("beforetoggle",n),bt("toggle",n),bt("cancel",n),bt("close",n);break;case"iframe":case"object":bt("load",n);break;case"video":case"audio":for(l=0;l<Ac.length;l++)bt(Ac[l],n);break;case"image":bt("error",n),bt("load",n);break;case"details":bt("toggle",n);break;case"embed":case"source":case"link":bt("error",n),bt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(l=o[se],l!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ft(n,s,se,l,o,null)}return;default:if(Do(s)){for(be in o)o.hasOwnProperty(be)&&(l=o[be],l!==void 0&&eg(n,s,be,l,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(l=o[x],l!=null&&Ft(n,s,x,l,o,null))}function MI(n,s,o,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,x=null,k=null,se=null,be=null;for(ce in o){var Te=o[ce];if(o.hasOwnProperty(ce)&&Te!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":k=Te;default:l.hasOwnProperty(ce)||Ft(n,s,ce,null,l,Te)}}for(var le in l){var ce=l[le];if(Te=o[le],l.hasOwnProperty(le)&&(ce!=null||Te!=null))switch(le){case"type":y=ce;break;case"name":m=ce;break;case"checked":se=ce;break;case"defaultChecked":be=ce;break;case"value":S=ce;break;case"defaultValue":x=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,s));break;default:ce!==Te&&Ft(n,s,le,ce,l,Te)}}jn(n,S,x,k,se,be,y,m);return;case"select":ce=S=x=le=null;for(y in o)if(k=o[y],o.hasOwnProperty(y)&&k!=null)switch(y){case"value":break;case"multiple":ce=k;default:l.hasOwnProperty(y)||Ft(n,s,y,null,l,k)}for(m in l)if(y=l[m],k=o[m],l.hasOwnProperty(m)&&(y!=null||k!=null))switch(m){case"value":le=y;break;case"defaultValue":x=y;break;case"multiple":S=y;default:y!==k&&Ft(n,s,m,y,l,k)}s=x,o=S,l=ce,le!=null?gi(n,!!o,le,!1):!!l!=!!o&&(s!=null?gi(n,!!o,s,!0):gi(n,!!o,o?[]:"",!1));return;case"textarea":ce=le=null;for(x in o)if(m=o[x],o.hasOwnProperty(x)&&m!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ft(n,s,x,null,l,m)}for(S in l)if(m=l[S],y=o[S],l.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":le=m;break;case"defaultValue":ce=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Ft(n,s,S,m,l,y)}It(n,le,ce);return;case"option":for(var st in o)if(le=o[st],o.hasOwnProperty(st)&&le!=null&&!l.hasOwnProperty(st))switch(st){case"selected":n.selected=!1;break;default:Ft(n,s,st,null,l,le)}for(k in l)if(le=l[k],ce=o[k],l.hasOwnProperty(k)&&le!==ce&&(le!=null||ce!=null))switch(k){case"selected":n.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Ft(n,s,k,le,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in o)le=o[nt],o.hasOwnProperty(nt)&&le!=null&&!l.hasOwnProperty(nt)&&Ft(n,s,nt,null,l,le);for(se in l)if(le=l[se],ce=o[se],l.hasOwnProperty(se)&&le!==ce&&(le!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:Ft(n,s,se,le,l,ce)}return;default:if(Do(s)){for(var Kt in o)le=o[Kt],o.hasOwnProperty(Kt)&&le!==void 0&&!l.hasOwnProperty(Kt)&&eg(n,s,Kt,void 0,l,le);for(be in l)le=l[be],ce=o[be],!l.hasOwnProperty(be)||le===ce||le===void 0&&ce===void 0||eg(n,s,be,le,l,ce);return}}for(var J in o)le=o[J],o.hasOwnProperty(J)&&le!=null&&!l.hasOwnProperty(J)&&Ft(n,s,J,null,l,le);for(Te in l)le=l[Te],ce=o[Te],!l.hasOwnProperty(Te)||le===ce||le==null&&ce==null||Ft(n,s,Te,le,l,ce)}var tg=null,ng=null;function Yf(n){return n.nodeType===9?n:n.ownerDocument}function J0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eb(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function rg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ig=null;function kI(){var n=window.event;return n&&n.type==="popstate"?n===ig?!1:(ig=n,!0):(ig=null,!1)}var tb=typeof setTimeout=="function"?setTimeout:void 0,VI=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,LI=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(n){return nb.resolve(null).then(n).catch(UI)}:tb;function UI(n){setTimeout(function(){throw n})}function Xa(n){return n==="head"}function rb(n,s){var o=s,l=0,m=0;do{var y=o.nextSibling;if(n.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<l&&8>l){o=l;var S=n.ownerDocument;if(o&1&&Rc(S.documentElement),o&2&&Rc(S.body),o&4)for(o=S.head,Rc(o),S=o.firstChild;S;){var x=S.nextSibling,k=S.nodeName;S[Ps]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=x}}if(m===0){n.removeChild(y),kc(s);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:l=o.charCodeAt(0)-48;else l=0;o=y}while(o);kc(s)}function sg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sg(o),$n(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function jI(n,s,o,l){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ps])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Wi(n.nextSibling),n===null)break}return null}function BI(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Wi(n.nextSibling),n===null))return null;return n}function ag(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function zI(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var l=function(){s(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Wi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var og=null;function ib(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function sb(n,s,o){switch(s=Yf(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Rc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);$n(n)}var Di=new Map,ab=new Set;function $f(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Js=Le.d;Le.d={f:qI,r:FI,D:KI,C:HI,L:GI,m:QI,X:$I,S:YI,M:XI};function qI(){var n=Js.f(),s=Bf();return n||s}function FI(n){var s=On(n);s!==null&&s.tag===5&&s.type==="form"?I_(s):Js.r(n)}var al=typeof document>"u"?null:document;function ob(n,s,o){var l=al;if(l&&typeof s=="string"&&s){var m=en(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),ab.has(m)||(ab.add(m),n={rel:n,crossOrigin:o,href:s},l.querySelector(m)===null&&(s=l.createElement("link"),nr(s,"link",n),Mt(s),l.head.appendChild(s)))}}function KI(n){Js.D(n),ob("dns-prefetch",n,null)}function HI(n,s){Js.C(n,s),ob("preconnect",n,s)}function GI(n,s,o){Js.L(n,s,o);var l=al;if(l&&n&&s){var m='link[rel="preload"][as="'+en(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+en(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+en(o.imageSizes)+'"]')):m+='[href="'+en(n)+'"]';var y=m;switch(s){case"style":y=ol(n);break;case"script":y=ul(n)}Di.has(y)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Di.set(y,n),l.querySelector(m)!==null||s==="style"&&l.querySelector(xc(y))||s==="script"&&l.querySelector(Cc(y))||(s=l.createElement("link"),nr(s,"link",n),Mt(s),l.head.appendChild(s)))}}function QI(n,s){Js.m(n,s);var o=al;if(o&&n){var l=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+en(l)+'"][href="'+en(n)+'"]',y=m;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ul(n)}if(!Di.has(y)&&(n=T({rel:"modulepreload",href:n},s),Di.set(y,n),o.querySelector(m)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cc(y)))return}l=o.createElement("link"),nr(l,"link",n),Mt(l),o.head.appendChild(l)}}}function YI(n,s,o){Js.S(n,s,o);var l=al;if(l&&n){var m=Xn(l).hoistableStyles,y=ol(n);s=s||"default";var S=m.get(y);if(!S){var x={loading:0,preload:null};if(S=l.querySelector(xc(y)))x.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Di.get(y))&&ug(n,o);var k=S=l.createElement("link");Mt(k),nr(k,"link",n),k._p=new Promise(function(se,be){k.onload=se,k.onerror=be}),k.addEventListener("load",function(){x.loading|=1}),k.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Xf(S,s,l)}S={type:"stylesheet",instance:S,count:1,state:x},m.set(y,S)}}}function $I(n,s){Js.X(n,s);var o=al;if(o&&n){var l=Xn(o).hoistableScripts,m=ul(n),y=l.get(m);y||(y=o.querySelector(Cc(m)),y||(n=T({src:n,async:!0},s),(s=Di.get(m))&&lg(n,s),y=o.createElement("script"),Mt(y),nr(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function XI(n,s){Js.M(n,s);var o=al;if(o&&n){var l=Xn(o).hoistableScripts,m=ul(n),y=l.get(m);y||(y=o.querySelector(Cc(m)),y||(n=T({src:n,async:!0,type:"module"},s),(s=Di.get(m))&&lg(n,s),y=o.createElement("script"),Mt(y),nr(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(m,y))}}function ub(n,s,o,l){var m=(m=et.current)?$f(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ol(o.href),o=Xn(m).hoistableStyles,l=o.get(s),l||(l={type:"style",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ol(o.href);var y=Xn(m).hoistableStyles,S=y.get(n);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=m.querySelector(xc(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Di.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Di.set(n,o),y||WI(m,n,o,S.state))),s&&l===null)throw Error(r(528,""));return S}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ul(o),o=Xn(m).hoistableScripts,l=o.get(s),l||(l={type:"script",instance:null,count:0,state:null},o.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ol(n){return'href="'+en(n)+'"'}function xc(n){return'link[rel="stylesheet"]['+n+"]"}function lb(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function WI(n,s,o,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),nr(s,"link",o),Mt(s),n.head.appendChild(s))}function ul(n){return'[src="'+en(n)+'"]'}function Cc(n){return"script[async]"+n}function cb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+en(o.href)+'"]');if(l)return s.instance=l,Mt(l),l;var m=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Mt(l),nr(l,"style",m),Xf(l,o.precedence,n),s.instance=l;case"stylesheet":m=ol(o.href);var y=n.querySelector(xc(m));if(y)return s.state.loading|=4,s.instance=y,Mt(y),y;l=lb(o),(m=Di.get(m))&&ug(l,m),y=(n.ownerDocument||n).createElement("link"),Mt(y);var S=y;return S._p=new Promise(function(x,k){S.onload=x,S.onerror=k}),nr(y,"link",l),s.state.loading|=4,Xf(y,o.precedence,n),s.instance=y;case"script":return y=ul(o.src),(m=n.querySelector(Cc(y)))?(s.instance=m,Mt(m),m):(l=o,(m=Di.get(y))&&(l=T({},o),lg(l,m)),n=n.ownerDocument||n,m=n.createElement("script"),Mt(m),nr(m,"link",l),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Xf(l,o.precedence,n));return s.instance}function Xf(n,s,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=l.length?l[l.length-1]:null,y=m,S=0;S<l.length;S++){var x=l[S];if(x.dataset.precedence===s)y=x;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function ug(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function lg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Wf=null;function hb(n,s,o){if(Wf===null){var l=new Map,m=Wf=new Map;m.set(o,l)}else m=Wf,l=m.get(o),l||(l=new Map,m.set(o,l));if(l.has(n))return l;for(l.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var y=o[m];if(!(y[Ps]||y[Jt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=n+S;var x=l.get(S);x?x.push(y):l.set(S,[y])}}return l}function fb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function ZI(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function db(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Dc=null;function JI(){}function eR(n,s,o){if(Dc===null)throw Error(r(475));var l=Dc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=ol(o.href),y=n.querySelector(xc(m));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Zf.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=y,Mt(y);return}y=n.ownerDocument||n,o=lb(o),(m=Di.get(m))&&ug(o,m),y=y.createElement("link"),Mt(y);var S=y;S._p=new Promise(function(x,k){S.onload=x,S.onerror=k}),nr(y,"link",o),s.instance=y}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Zf.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function tR(){if(Dc===null)throw Error(r(475));var n=Dc;return n.stylesheets&&n.count===0&&cg(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&cg(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Zf(){if(this.count--,this.count===0){if(this.stylesheets)cg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jf=null;function cg(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jf=new Map,s.forEach(nR,n),Jf=null,Zf.call(n))}function nR(n,s){if(!(s.state.loading&4)){var o=Jf.get(n);if(o)var l=o.get(null);else{o=new Map,Jf.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),l=S)}l&&o.set(null,l)}m=s.instance,S=m.getAttribute("data-precedence"),y=o.get(S)||l,y===l&&o.set(null,m),o.set(S,m),this.count++,l=Zf.bind(this),m.addEventListener("load",l),m.addEventListener("error",l),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var Oc={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Qe,_currentValue2:Qe,_threadCount:0};function rR(n,s,o,l,m,y,S,x){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=l,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function mb(n,s,o,l,m,y,S,x,k,se,be,Te){return n=new rR(n,s,o,S,x,k,se,Te),s=1,y===!0&&(s|=24),y=Zr(3,null,null,s),n.current=y,y.stateNode=n,s=Hm(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:l,isDehydrated:o,cache:s},$m(y),n}function pb(n){return n?(n=ms,n):ms}function gb(n,s,o,l,m,y){m=pb(m),l.context===null?l.context=m:l.pendingContext=m,l=La(s),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=Ua(n,l,s),o!==null&&(ri(o,n,s),oc(o,n,s))}function yb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function hg(n,s){yb(n,s),(n=n.alternate)&&yb(n,s)}function vb(n){if(n.tag===13){var s=$i(n,67108864);s!==null&&ri(s,n,67108864),hg(n,67108864)}}var ed=!0;function iR(n,s,o,l){var m=ye.T;ye.T=null;var y=Le.p;try{Le.p=2,fg(n,s,o,l)}finally{Le.p=y,ye.T=m}}function sR(n,s,o,l){var m=ye.T;ye.T=null;var y=Le.p;try{Le.p=8,fg(n,s,o,l)}finally{Le.p=y,ye.T=m}}function fg(n,s,o,l){if(ed){var m=dg(l);if(m===null)Jp(n,s,l,td,o),bb(n,l);else if(oR(m,n,s,o,l))l.stopPropagation();else if(bb(n,l),s&4&&-1<aR.indexOf(n)){for(;m!==null;){var y=On(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=wn(y.pendingLanes);if(S!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;S;){var k=1<<31-ln(S);x.entanglements[1]|=k,S&=~k}_s(y),(Vt&6)===0&&(Uf=Ir()+500,Sc(0))}}break;case 13:x=$i(y,2),x!==null&&ri(x,y,2),Bf(),hg(y,2)}if(y=dg(l),y===null&&Jp(n,s,l,td,o),y===m)break;m=y}m!==null&&l.stopPropagation()}else Jp(n,s,l,null,o)}}function dg(n){return n=br(n),mg(n)}var td=null;function mg(n){if(td=null,n=ir(n),n!==null){var s=u(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return td=n,null}function _b(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wl()){case Ao:return 2;case rs:return 8;case Ln:case Mu:return 32;case li:return 268435456;default:return 32}default:return 32}}var pg=!1,Wa=null,Za=null,Ja=null,Nc=new Map,Pc=new Map,eo=[],aR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bb(n,s){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Nc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Mc(n,s,o,l,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:o,eventSystemFlags:l,nativeEvent:y,targetContainers:[m]},s!==null&&(s=On(s),s!==null&&vb(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function oR(n,s,o,l,m){switch(s){case"focusin":return Wa=Mc(Wa,n,s,o,l,m),!0;case"dragenter":return Za=Mc(Za,n,s,o,l,m),!0;case"mouseover":return Ja=Mc(Ja,n,s,o,l,m),!0;case"pointerover":var y=m.pointerId;return Nc.set(y,Mc(Nc.get(y)||null,n,s,o,l,m)),!0;case"gotpointercapture":return y=m.pointerId,Pc.set(y,Mc(Pc.get(y)||null,n,s,o,l,m)),!0}return!1}function Eb(n){var s=ir(n.target);if(s!==null){var o=u(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,ki(n.priority,function(){if(o.tag===13){var l=ni();l=as(l);var m=$i(o,l);m!==null&&ri(m,o,l),hg(o,l)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=dg(n.nativeEvent);if(o===null){o=n.nativeEvent;var l=new o.constructor(o.type,o);Bn=l,o.target.dispatchEvent(l),Bn=null}else return s=On(o),s!==null&&vb(s),n.blockedOn=o,!1;s.shift()}return!0}function Tb(n,s,o){nd(n)&&o.delete(s)}function uR(){pg=!1,Wa!==null&&nd(Wa)&&(Wa=null),Za!==null&&nd(Za)&&(Za=null),Ja!==null&&nd(Ja)&&(Ja=null),Nc.forEach(Tb),Pc.forEach(Tb)}function rd(n,s){n.blockedOn===s&&(n.blockedOn=null,pg||(pg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,uR)))}var id=null;function wb(n){id!==n&&(id=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){id===n&&(id=null);for(var s=0;s<n.length;s+=3){var o=n[s],l=n[s+1],m=n[s+2];if(typeof l!="function"){if(mg(l||o)===null)continue;break}var y=On(o);y!==null&&(n.splice(s,3),s-=3,mp(y,{pending:!0,data:m,method:o.method,action:l},l,m))}}))}function kc(n){function s(k){return rd(k,n)}Wa!==null&&rd(Wa,n),Za!==null&&rd(Za,n),Ja!==null&&rd(Ja,n),Nc.forEach(s),Pc.forEach(s);for(var o=0;o<eo.length;o++){var l=eo[o];l.blockedOn===n&&(l.blockedOn=null)}for(;0<eo.length&&(o=eo[0],o.blockedOn===null);)Eb(o),o.blockedOn===null&&eo.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var m=o[l],y=o[l+1],S=m[ut]||null;if(typeof y=="function")S||wb(o);else if(S){var x=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[ut]||null)x=S.formAction;else if(mg(m)!==null)continue}else x=S.action;typeof x=="function"?o[l+1]=x:(o.splice(l,3),l-=3),wb(o)}}}function gg(n){this._internalRoot=n}sd.prototype.render=gg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,l=ni();gb(o,l,n,s,null,null)},sd.prototype.unmount=gg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;gb(n.current,2,null,n,null,null),Bf(),s[Ot]=null}};function sd(n){this._internalRoot=n}sd.prototype.unstable_scheduleHydration=function(n){if(n){var s=gr();n={blockedOn:null,target:n,priority:s};for(var o=0;o<eo.length&&s!==0&&s<eo[o].priority;o++);eo.splice(o,0,n),o===0&&Eb(n)}};var Sb=e.version;if(Sb!=="19.1.0")throw Error(r(527,Sb,"19.1.0"));Le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var lR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{Pt=ad.inject(lR),yt=ad}catch{}}return Lc.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,l="",m=B_,y=z_,S=q_,x=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(x=s.unstable_transitionCallbacks)),s=mb(n,1,!1,null,null,o,l,m,y,S,x,null),n[Ot]=s.current,Zp(n),new gg(s)},Lc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var l=!1,m="",y=B_,S=z_,x=q_,k=null,se=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(se=o.formState)),s=mb(n,1,!0,s,o??null,l,m,y,S,x,k,se),s.context=pb(null),o=s.current,l=ni(),l=as(l),m=La(l),m.callback=null,Ua(o,m,l),o=l,s.current.lanes=o,hi(s,o),_s(s),n[Ot]=s.current,Zp(n),new sd(s)},Lc.version="19.1.0",Lc}var kb;function TR(){if(kb)return _g.exports;kb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_g.exports=ER(),_g.exports}var wR=TR();const lm=ge.createContext(void 0),SR=()=>{};var Vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},AR=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[t++];e[r++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[t++],c=i[t++],d=i[t++],p=((a&7)<<18|(u&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return e.join("")},Ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const u=i[a],c=a+1<i.length,d=c?i[a+1]:0,p=a+2<i.length,v=p?i[a+2]:0,T=u>>2,I=(u&3)<<4|d>>4;let C=(d&15)<<2|v>>6,z=v&63;p||(z=64,c||(C=64)),r.push(t[T],t[I],t[C],t[z])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(bw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):AR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const u=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const v=a<i.length?t[i.charAt(a)]:64;++a;const I=a<i.length?t[i.charAt(a)]:64;if(++a,u==null||d==null||v==null||I==null)throw new IR;const C=u<<2|d>>4;if(r.push(C),v!==64){const z=d<<4&240|v>>2;if(r.push(z),I!==64){const B=v<<6&192|I;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class IR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RR=function(i){const e=bw(i);return Ew.encodeByteArray(e,!0)},Tw=function(i){return RR(i).replace(/\./g,"")},ww=function(i){try{return Ew.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=()=>Sw().__FIREBASE_DEFAULTS__,CR=()=>{if(typeof process>"u"||typeof Vb>"u")return;const i=Vb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},DR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ww(i[1]);return e&&JSON.parse(e)},cm=()=>{try{return SR()||xR()||CR()||DR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},OR=i=>{var e,t;return(t=(e=cm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Aw=()=>{var i;return(i=cm())===null||i===void 0?void 0:i.config},Iw=i=>{var e;return(e=cm())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(i){return i.endsWith(".cloudworkstations.dev")}async function Rw(i){return(await fetch(i,{credentials:"include"})).ok}const mh={};function PR(){const i={prod:[],emulator:[]};for(const e of Object.keys(mh))mh[e]?i.emulator.push(e):i.prod.push(e);return i}function MR(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Lb=!1;function xy(i,e){if(typeof window>"u"||typeof document>"u"||!zh(window.location.host)||mh[i]===e||mh[i]||Lb)return;mh[i]=e;function t(C){return`__firebase__banner__${C}`}const r="__firebase__banner",u=PR().prod.length>0;function c(){const C=document.getElementById(r);C&&C.remove()}function d(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,z){C.setAttribute("width","24"),C.setAttribute("id",z),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Lb=!0,c()},C}function T(C,z){C.setAttribute("id",z),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function I(){const C=MR(r),z=t("text"),B=document.getElementById(z)||document.createElement("span"),he=t("learnmore"),ue=document.getElementById(he)||document.createElement("a"),ve=t("preprendIcon"),pe=document.getElementById(ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const oe=C.element;d(oe),T(ue,he);const Re=v();p(pe,ve),oe.append(pe,B,ue,Re),document.body.appendChild(oe)}u?(B.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function VR(){var i;const e=(i=cm())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function jR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BR(){const i=kn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function xw(){return!VR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cw(){try{return typeof indexedDB=="object"}catch{return!1}}function zR(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="FirebaseError";class da extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qR,Object.setPrototypeOf(this,da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qh.prototype.create)}}class qh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,u=this.errors[e],c=u?FR(u,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new da(a,d,r)}}function FR(i,e){return i.replace(KR,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const KR=/\{\$([^}]+)}/g;function HR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function _u(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const u=i[a],c=e[a];if(Ub(u)&&Ub(c)){if(!_u(u,c))return!1}else if(u!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Ub(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GR(i,e){const t=new QR(i,e);return t.subscribe.bind(t)}class QR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=wg),a.error===void 0&&(a.error=wg),a.complete===void 0&&(a.complete=wg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YR(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function wg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(i){return i&&i._delegate?i._delegate:i}class bu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new NR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WR(e))try{this.getOrInitializeService({instanceIdentifier:au})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:a});r.resolve(u)}catch{}}}}clearInstance(e=au){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=au){return this.instances.has(e)}getOptions(e=au){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);r===d&&c.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),u=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(a,u);const c=this.instances.get(a);return c&&e(c,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=au){return this.component?this.component.multipleInstances?e:au:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XR(i){return i===au?void 0:i}function WR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(St||(St={}));const JR={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},ex=St.INFO,tx={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},nx=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=tx[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cy{constructor(e){this.name=e,this._logLevel=ex,this._logHandler=nx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const rx=(i,e)=>e.some(t=>i instanceof t);let jb,Bb;function ix(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sx(){return Bb||(Bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dw=new WeakMap,Kg=new WeakMap,Ow=new WeakMap,Sg=new WeakMap,Dy=new WeakMap;function ax(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",c)},u=()=>{t(ho(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Dw.set(t,i)}).catch(()=>{}),Dy.set(e,i),e}function ox(i){if(Kg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",c),i.removeEventListener("abort",c)},u=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",c),i.addEventListener("abort",c)});Kg.set(i,e)}let Hg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Kg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Ow.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ho(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function ux(i){Hg=i(Hg)}function lx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Ag(this),e,...t);return Ow.set(r,e.sort?e.sort():[e]),ho(r)}:sx().includes(i)?function(...e){return i.apply(Ag(this),e),ho(Dw.get(this))}:function(...e){return ho(i.apply(Ag(this),e))}}function cx(i){return typeof i=="function"?lx(i):(i instanceof IDBTransaction&&ox(i),rx(i,ix())?new Proxy(i,Hg):i)}function ho(i){if(i instanceof IDBRequest)return ax(i);if(Sg.has(i))return Sg.get(i);const e=cx(i);return e!==i&&(Sg.set(i,e),Dy.set(e,i)),e}const Ag=i=>Dy.get(i);function hx(i,e,{blocked:t,upgrade:r,blocking:a,terminated:u}={}){const c=indexedDB.open(i,e),d=ho(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ho(c.result),p.oldVersion,p.newVersion,ho(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{u&&p.addEventListener("close",()=>u()),a&&p.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}const fx=["get","getKey","getAll","getAllKeys","count"],dx=["put","add","delete","clear"],Ig=new Map;function zb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=dx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||fx.includes(t)))return;const u=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),a&&p.done]))[0]};return Ig.set(e,u),u}ux(i=>({...i,get:(e,t,r)=>zb(e,t)||i.get(e,t,r),has:(e,t)=>!!zb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(px(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function px(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gg="@firebase/app",qb="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Cy("@firebase/app"),gx="@firebase/app-compat",yx="@firebase/analytics-compat",vx="@firebase/analytics",_x="@firebase/app-check-compat",bx="@firebase/app-check",Ex="@firebase/auth",Tx="@firebase/auth-compat",wx="@firebase/database",Sx="@firebase/data-connect",Ax="@firebase/database-compat",Ix="@firebase/functions",Rx="@firebase/functions-compat",xx="@firebase/installations",Cx="@firebase/installations-compat",Dx="@firebase/messaging",Ox="@firebase/messaging-compat",Nx="@firebase/performance",Px="@firebase/performance-compat",Mx="@firebase/remote-config",kx="@firebase/remote-config-compat",Vx="@firebase/storage",Lx="@firebase/storage-compat",Ux="@firebase/firestore",jx="@firebase/vertexai",Bx="@firebase/firestore-compat",zx="firebase",qx="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="[DEFAULT]",Fx={[Gg]:"fire-core",[gx]:"fire-core-compat",[vx]:"fire-analytics",[yx]:"fire-analytics-compat",[bx]:"fire-app-check",[_x]:"fire-app-check-compat",[Ex]:"fire-auth",[Tx]:"fire-auth-compat",[wx]:"fire-rtdb",[Sx]:"fire-data-connect",[Ax]:"fire-rtdb-compat",[Ix]:"fire-fn",[Rx]:"fire-fn-compat",[xx]:"fire-iid",[Cx]:"fire-iid-compat",[Dx]:"fire-fcm",[Ox]:"fire-fcm-compat",[Nx]:"fire-perf",[Px]:"fire-perf-compat",[Mx]:"fire-rc",[kx]:"fire-rc-compat",[Vx]:"fire-gcs",[Lx]:"fire-gcs-compat",[Ux]:"fire-fst",[Bx]:"fire-fst-compat",[jx]:"fire-vertex","fire-js":"fire-js",[zx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,Kx=new Map,Yg=new Map;function Fb(i,e){try{i.container.addComponent(e)}catch(t){ua.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Al(i){const e=i.name;if(Yg.has(e))return ua.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,i);for(const t of Nd.values())Fb(t,i);for(const t of Kx.values())Fb(t,i);return!0}function Oy(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ji(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new qh("app","Firebase",Hx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=qx;function Nw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qg,automaticDataCollectionEnabled:!1},e),a=r.name;if(typeof a!="string"||!a)throw fo.create("bad-app-name",{appName:String(a)});if(t||(t=Aw()),!t)throw fo.create("no-options");const u=Nd.get(a);if(u){if(_u(t,u.options)&&_u(r,u.config))return u;throw fo.create("duplicate-app",{appName:a})}const c=new ZR(a);for(const p of Yg.values())c.addComponent(p);const d=new Gx(t,r,c);return Nd.set(a,d),d}function Qx(i=Qg){const e=Nd.get(i);if(!e&&i===Qg&&Aw())return Nw();if(!e)throw fo.create("no-app",{appName:i});return e}function mo(i,e,t){var r;let a=(r=Fx[i])!==null&&r!==void 0?r:i;t&&(a+=`-${t}`);const u=a.match(/\s|\//),c=e.match(/\s|\//);if(u||c){const d=[`Unable to register library "${a}" with version "${e}":`];u&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ua.warn(d.join(" "));return}Al(new bu(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="firebase-heartbeat-database",$x=1,wh="firebase-heartbeat-store";let Rg=null;function Pw(){return Rg||(Rg=hx(Yx,$x,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wh)}catch(t){console.warn(t)}}}}).catch(i=>{throw fo.create("idb-open",{originalErrorMessage:i.message})})),Rg}async function Xx(i){try{const t=(await Pw()).transaction(wh),r=await t.objectStore(wh).get(Mw(i));return await t.done,r}catch(e){if(e instanceof da)ua.warn(e.message);else{const t=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ua.warn(t.message)}}}async function Kb(i,e){try{const r=(await Pw()).transaction(wh,"readwrite");await r.objectStore(wh).put(e,Mw(i)),await r.done}catch(t){if(t instanceof da)ua.warn(t.message);else{const r=fo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ua.warn(r.message)}}}function Mw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=1024,Zx=30;class Jx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Hb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(c=>c.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats.length>Zx){const c=nC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ua.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hb(),{heartbeatsToSend:r,unsentEntries:a}=eC(this._heartbeatsCache.heartbeats),u=Tw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return ua.warn(t),""}}}function Hb(){return new Date().toISOString().substring(0,10)}function eC(i,e=Wx){const t=[];let r=i.slice();for(const a of i){const u=t.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),Gb(t)>e){u.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Gb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class tC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cw()?zR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Xx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Gb(i){return Tw(JSON.stringify({version:2,heartbeats:i})).length}function nC(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(i){Al(new bu("platform-logger",e=>new mx(e),"PRIVATE")),Al(new bu("heartbeat",e=>new Jx(e),"PRIVATE")),mo(Gg,qb,i),mo(Gg,qb,"esm2017"),mo("fire-js","")}rC("");function Ny(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iC=kw,Vw=new qh("auth","Firebase",kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Cy("@firebase/auth");function sC(i,...e){Pd.logLevel<=St.WARN&&Pd.warn(`Auth (${Fl}): ${i}`,...e)}function gd(i,...e){Pd.logLevel<=St.ERROR&&Pd.error(`Auth (${Fl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(i,...e){throw My(i,...e)}function ns(i,...e){return My(i,...e)}function Py(i,e,t){const r=Object.assign(Object.assign({},iC()),{[e]:t});return new qh("auth","Firebase",r).create(e,{appName:i.name})}function pu(i){return Py(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aC(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&As(i,"argument-error"),Py(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function My(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Vw.create(i,...e)}function ot(i,e,...t){if(!i)throw My(e,...t)}function na(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gd(e),new Error(e)}function la(i,e){i||na(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function oC(){return Qb()==="http:"||Qb()==="https:"}function Qb(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oC()||UR()||"connection"in navigator)?navigator.onLine:!0}function lC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.shortDelay=e,this.longDelay=t,la(t>e,"Short delay should be less than long delay!"),this.isMobile=kR()||jR()}get(){return uC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(i,e){la(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;na("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;na("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;na("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fC=new Kh(3e4,6e4);function Vy(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Kl(i,e,t,r,a={}){return Uw(i,a,async()=>{let u={},c={};r&&(e==="GET"?c=r:u={body:JSON.stringify(r)});const d=Fh(Object.assign({key:i.config.apiKey},c)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const v=Object.assign({method:e,headers:p},u);return LR()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&zh(i.emulatorConfig.host)&&(v.credentials="include"),Lw.fetch()(await jw(i,i.config.apiHost,t,d),v)})}async function Uw(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},cC),e);try{const a=new mC(i),u=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw od(i,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const d=u.ok?c.errorMessage:c.error.message,[p,v]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw od(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw od(i,"user-disabled",c);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Py(i,T,v);As(i,T)}}catch(a){if(a instanceof da)throw a;As(i,"network-request-failed",{message:String(a)})}}async function dC(i,e,t,r,a={}){const u=await Kl(i,e,t,r,a);return"mfaPendingCredential"in u&&As(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function jw(i,e,t,r){const a=`${e}${t}?${r}`,u=i,c=u.config.emulator?ky(i.config,a):`${i.config.apiScheme}://${a}`;return hC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class mC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),fC.get())})}}function od(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=ns(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(i,e){return Kl(i,"POST","/v1/accounts:delete",e)}async function Md(i,e){return Kl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gC(i,e=!1){const t=To(i),r=await t.getIdToken(e),a=Ly(r);ot(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,c=u==null?void 0:u.sign_in_provider;return{claims:a,token:r,authTime:ph(xg(a.auth_time)),issuedAtTime:ph(xg(a.iat)),expirationTime:ph(xg(a.exp)),signInProvider:c||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function xg(i){return Number(i)*1e3}function Ly(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const a=ww(t);return a?JSON.parse(a):(gd("Failed to decode base64 JWT payload"),null)}catch(a){return gd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Yb(i){const e=Ly(i);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof da&&yC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function yC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ph(this.lastLoginAt),this.creationTime=ph(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(i){var e;const t=i.auth,r=await i.getIdToken(),a=await Sh(i,Md(t,{idToken:r}));ot(a==null?void 0:a.users.length,t,"internal-error");const u=a.users[0];i._notifyReloadListener(u);const c=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Bw(u.providerUserInfo):[],d=bC(i.providerData,c),p=i.isAnonymous,v=!(i.email&&u.passwordHash)&&!(d!=null&&d.length),T=p?v:!1,I={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new Xg(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(i,I)}async function _C(i){const e=To(i);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bC(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function Bw(i){return i.map(e=>{var{providerId:t}=e,r=Ny(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(i,e){const t=await Uw(i,{},async()=>{const r=Fh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=i.config,c=await jw(i,a,"/v1/token",`key=${u}`),d=await i._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Lw.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TC(i,e){return Kl(i,"POST","/v2/accounts:revokeToken",Vy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=Yb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:u}=await EC(e,t);this.updateTokensAndExpiration(r,a,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:u}=t,c=new El;return r&&(ot(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(ot(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),u&&(ot(typeof u=="number","internal-error",{appName:e}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(i,e){ot(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class es{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,u=Ny(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Xg(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Sh(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gC(this,e)}reload(){return _C(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ji(this.auth.app))return Promise.reject(pu(this.auth));const e=await this.getIdToken();return await Sh(this,pC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,u,c,d,p,v,T;const I=(r=t.displayName)!==null&&r!==void 0?r:void 0,C=(a=t.email)!==null&&a!==void 0?a:void 0,z=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,B=(c=t.photoURL)!==null&&c!==void 0?c:void 0,he=(d=t.tenantId)!==null&&d!==void 0?d:void 0,ue=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ve=(v=t.createdAt)!==null&&v!==void 0?v:void 0,pe=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:oe,emailVerified:Re,isAnonymous:xe,providerData:Me,stsTokenManager:L}=t;ot(oe&&L,e,"internal-error");const N=El.fromJSON(this.name,L);ot(typeof oe=="string",e,"internal-error"),no(I,e.name),no(C,e.name),ot(typeof Re=="boolean",e,"internal-error"),ot(typeof xe=="boolean",e,"internal-error"),no(z,e.name),no(B,e.name),no(he,e.name),no(ue,e.name),no(ve,e.name),no(pe,e.name);const M=new es({uid:oe,auth:e,email:C,emailVerified:Re,displayName:I,isAnonymous:xe,photoURL:B,phoneNumber:z,tenantId:he,stsTokenManager:N,createdAt:ve,lastLoginAt:pe});return Me&&Array.isArray(Me)&&(M.providerData=Me.map(q=>Object.assign({},q))),ue&&(M._redirectEventId=ue),M}static async _fromIdTokenResponse(e,t,r=!1){const a=new El;a.updateFromServerResponse(t);const u=new es({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await kd(u),u}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];ot(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?Bw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(u!=null&&u.length),d=new El;d.updateFromIdToken(r);const p=new es({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Xg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Map;function ra(i){la(i instanceof Function,"Expected a class definition");let e=$b.get(i);return e?(la(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,$b.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zw.type="NONE";const Xb=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(i,e,t){return`firebase:${i}:${e}:${t}`}class Tl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:u}=this.auth;this.fullUserKey=yd(this.userKey,a.apiKey,u),this.fullPersistenceKey=yd("persistence",a.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Md(this.auth,{idToken:e}).catch(()=>{});return t?es._fromGetAccountInfoResponse(this.auth,t,e):null}return es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Tl(ra(Xb),e,r);const a=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=a[0]||ra(Xb);const c=yd(r,e.config.apiKey,e.name);let d=null;for(const v of t)try{const T=await v._get(c);if(T){let I;if(typeof T=="string"){const C=await Md(e,{idToken:T}).catch(()=>{});if(!C)break;I=await es._fromGetAccountInfoResponse(e,C,T)}else I=es._fromJSON(e,T);v!==u&&(d=I),u=v;break}}catch{}const p=a.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Tl(u,e,r):(u=p[0],d&&await u._set(c,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==u)try{await v._remove(c)}catch{}})),new Tl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Qw(e))return"Blackberry";if(Yw(e))return"Webos";if(Fw(e))return"Safari";if((e.includes("chrome/")||Kw(e))&&!e.includes("edge/"))return"Chrome";if(Gw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qw(i=kn()){return/firefox\//i.test(i)}function Fw(i=kn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kw(i=kn()){return/crios\//i.test(i)}function Hw(i=kn()){return/iemobile/i.test(i)}function Gw(i=kn()){return/android/i.test(i)}function Qw(i=kn()){return/blackberry/i.test(i)}function Yw(i=kn()){return/webos/i.test(i)}function Uy(i=kn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function wC(i=kn()){var e;return Uy(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SC(){return BR()&&document.documentMode===10}function $w(i=kn()){return Uy(i)||Gw(i)||Yw(i)||Qw(i)||/windows phone/i.test(i)||Hw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(i,e=[]){let t;switch(i){case"Browser":t=Wb(kn());break;case"Worker":t=`${Wb(kn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((c,d)=>{try{const p=e(u);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(i,e={}){return Kl(i,"GET","/v2/passwordPolicy",Vy(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=6;class xC{constructor(e){var t,r,a,u;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:RC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,u,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zb(this),this.idTokenSubscription=new Zb(this),this.beforeStateQueue=new AC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ra(t)),this._initializationPromise=this.queue(async()=>{var r,a,u;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Md(this,{idToken:e}),r=await es._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ji(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ji(this.app))return Promise.reject(pu(this));const t=e?To(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ji(this.app)?Promise.reject(pu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ji(this.app)?Promise.reject(pu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IC(this),t=new xC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await TC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ra(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(d,this,"internal-error"),d.then(()=>{c||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&sC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function hm(i){return To(i)}class Zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=GR(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DC(i){jy=i}function OC(i){return jy.loadJS(i)}function NC(){return jy.gapiScript}function PC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i,e){const t=Oy(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),u=t.getOptions();if(_u(u,e??{}))return a;As(a,"already-initialized")}return t.initialize({options:e})}function kC(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ra);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VC(i,e,t){const r=hm(i);ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,u=Ww(e),{host:c,port:d}=LC(e),p=d===null?"":`:${d}`,v={url:`${u}//${c}${p}/`},T=Object.freeze({host:c,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){ot(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ot(_u(v,r.config.emulator)&&_u(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,zh(c)?(xy("Auth",!0),Rw(`${u}//${c}${p}`)):UC()}function Ww(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function LC(i){const e=Ww(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const u=a[1];return{host:u,port:Jb(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:Jb(c)}}}function Jb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function UC(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return na("not implemented")}_getIdTokenResponse(e){return na("not implemented")}_linkToIdToken(e,t){return na("not implemented")}_getReauthenticationResolver(e){return na("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(i,e){return dC(i,"POST","/v1/accounts:signInWithIdp",Vy(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="http://localhost";class Eu extends Zw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):As("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,u=Ny(t,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Eu(r,a);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return wl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wl(e,t)}buildRequest(){const e={requestUri:jC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends By{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Hh{constructor(){super("facebook.com")}static credential(e){return Eu._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eu._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ta.credential(t,r)}catch{return null}}}ta.GOOGLE_SIGN_IN_METHOD="google.com";ta.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Hh{constructor(){super("github.com")}static credential(e){return Eu._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Hh{constructor(){super("twitter.com")}static credential(e,t){return Eu._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return uo.credential(t,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const u=await es._fromIdTokenResponse(e,r,a),c=eE(r);return new Il({user:u,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=eE(r);return new Il({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function eE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends da{constructor(e,t,r,a){var u;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Vd(e,t,r,a)}}function Jw(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(i,u,e,r):u})}async function BC(i,e,t=!1){const r=await Sh(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Il._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(i,e,t=!1){const{auth:r}=i;if(Ji(r.app))return Promise.reject(pu(r));const a="reauthenticate";try{const u=await Sh(i,Jw(r,a,e,i),t);ot(u.idToken,r,"internal-error");const c=Ly(u.idToken);ot(c,r,"internal-error");const{sub:d}=c;return ot(i.uid===d,r,"user-mismatch"),Il._forOperation(i,a,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&As(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(i,e,t=!1){if(Ji(i.app))return Promise.reject(pu(i));const r="signIn",a=await Jw(i,r,e),u=await Il._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(u.user),u}function FC(i,e,t,r){return To(i).onIdTokenChanged(e,t,r)}function KC(i,e,t){return To(i).beforeAuthStateChanged(e,t)}function HC(i){return To(i).signOut()}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=1e3,QC=10;class t1 extends e1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$w(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);SC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,QC):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},GC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}t1.type="LOCAL";const YC=t1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends e1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}n1.type="SESSION";const r1=n1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:u}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async v=>v(t.origin,u)),p=await $C(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((d,p)=>{const v=zy("",20);a.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(I){const C=I;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(C.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function WC(i){Ss().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function ZC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function e2(){return i1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firebaseLocalStorageDb",t2=1,Ud="firebaseLocalStorage",a1="fbase_key";class Gh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dm(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function n2(){const i=indexedDB.deleteDatabase(s1);return new Gh(i).toPromise()}function Wg(){const i=indexedDB.open(s1,t2);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ud,{keyPath:a1})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await n2(),e(await Wg()))})})}async function tE(i,e,t){const r=dm(i,!0).put({[a1]:e,value:t});return new Gh(r).toPromise()}async function r2(i,e){const t=dm(i,!1).get(e),r=await new Gh(t).toPromise();return r===void 0?null:r.value}function nE(i,e){const t=dm(i,!0).delete(e);return new Gh(t).toPromise()}const i2=800,s2=3;class o1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>s2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fm._getInstance(e2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZC(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wg();return await tE(e,Ld,"1"),await nE(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>r2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const u=dm(a,!1).getAll();return new Gh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:u}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o1.type="LOCAL";const a2=o1;new Kh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(i,e){return e?ra(e):(ot(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends Zw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function o2(i){return qC(i.auth,new qy(i),i.bypassAuthState)}function u2(i){const{auth:e,user:t}=i;return ot(t,e,"internal-error"),zC(t,new qy(i),i.bypassAuthState)}async function l2(i){const{auth:e,user:t}=i;return ot(t,e,"internal-error"),BC(t,new qy(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,r,a,u=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:u,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o2;case"linkViaPopup":case"linkViaRedirect":return l2;case"reauthViaPopup":case"reauthViaRedirect":return u2;default:As(this.auth,"internal-error")}}resolve(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Kh(2e3,1e4);async function h2(i,e,t){if(Ji(i.app))return Promise.reject(ns(i,"operation-not-supported-in-this-environment"));const r=hm(i);aC(i,e,By);const a=u1(r,t);return new du(r,"signInViaPopup",e,a).executeNotNull()}class du extends l1{constructor(e,t,r,a,u){super(e,t,a,u),this.provider=r,this.authWindow=null,this.pollId=null,du.currentPopupAction&&du.currentPopupAction.cancel(),du.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){la(this.filter.length===1,"Popup operations only handle one event");const e=zy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,du.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c2.get())};e()}}du.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="pendingRedirect",vd=new Map;class d2 extends l1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vd.get(this.auth._key());if(!e){try{const r=await m2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m2(i,e){const t=y2(e),r=g2(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function p2(i,e){vd.set(i._key(),e)}function g2(i){return ra(i._redirectPersistence)}function y2(i){return yd(f2,i.config.apiKey,i.name)}async function v2(i,e,t=!1){if(Ji(i.app))return Promise.reject(pu(i));const r=hm(i),a=u1(r,e),c=await new d2(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=10*60*1e3;class b2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!c1(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ns(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_2&&this.cachedEventUids.clear(),this.cachedEventUids.has(rE(e))}saveEventToCache(e){this.cachedEventUids.add(rE(e)),this.lastProcessedEventTime=Date.now()}}function rE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function c1({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c1(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(i,e={}){return Kl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S2=/^https?/;async function A2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await T2(i);for(const t of e)try{if(I2(t))return}catch{}As(i,"unauthorized-domain")}function I2(i){const e=$g(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!S2.test(t))return!1;if(w2.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Kh(3e4,6e4);function iE(){const i=Ss().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function x2(i){return new Promise((e,t)=>{var r,a,u;function c(){iE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iE(),t(ns(i,"network-request-failed"))},timeout:R2.get()})}if(!((a=(r=Ss().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((u=Ss().gapi)===null||u===void 0)&&u.load)c();else{const d=PC("iframefcb");return Ss()[d]=()=>{gapi.load?c():t(ns(i,"network-request-failed"))},OC(`${NC()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw _d=null,e})}let _d=null;function C2(i){return _d=_d||x2(i),_d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new Kh(5e3,15e3),O2="__/auth/iframe",N2="emulator/auth/iframe",P2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k2(i){const e=i.config;ot(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?ky(e,N2):`https://${i.config.authDomain}/${O2}`,r={apiKey:e.apiKey,appName:i.name,v:Fl},a=M2.get(i.config.apiHost);a&&(r.eid=a);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${Fh(r).slice(1)}`}async function V2(i){const e=await C2(i),t=Ss().gapi;return ot(t,i,"internal-error"),e.open({where:document.body,url:k2(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P2,dontclear:!0},r=>new Promise(async(a,u)=>{await r.restyle({setHideOnLeave:!1});const c=ns(i,"network-request-failed"),d=Ss().setTimeout(()=>{u(c)},D2.get());function p(){Ss().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U2=500,j2=600,B2="_blank",z2="http://localhost";class sE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q2(i,e,t,r=U2,a=j2){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},L2),{width:r.toString(),height:a.toString(),top:u,left:c}),v=kn().toLowerCase();t&&(d=Kw(v)?B2:t),qw(v)&&(e=e||z2,p.scrollbars="yes");const T=Object.entries(p).reduce((C,[z,B])=>`${C}${z}=${B},`,"");if(wC(v)&&d!=="_self")return F2(e||"",d),new sE(null);const I=window.open(e||"",d,T);ot(I,i,"popup-blocked");try{I.focus()}catch{}return new sE(I)}function F2(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="__/auth/handler",H2="emulator/auth/handler",G2=encodeURIComponent("fac");async function aE(i,e,t,r,a,u){ot(i.config.authDomain,i,"auth-domain-config-required"),ot(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Fl,eventId:a};if(e instanceof By){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",HR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))c[T]=I}if(e instanceof Hh){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(c.scopes=T.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const T of Object.keys(d))d[T]===void 0&&delete d[T];const p=await i._getAppCheckToken(),v=p?`#${G2}=${encodeURIComponent(p)}`:"";return`${Q2(i)}?${Fh(d).slice(1)}${v}`}function Q2({config:i}){return i.emulator?ky(i,H2):`https://${i.authDomain}/${K2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="webStorageSupport";class Y2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r1,this._completeRedirectFn=v2,this._overrideRedirectResult=p2}async _openPopup(e,t,r,a){var u;la((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await aE(e,t,r,$g(),a);return q2(e,c,zy())}async _openRedirect(e,t,r,a){await this._originValidation(e);const u=await aE(e,t,r,$g(),a);return WC(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:u}=this.eventManagers[t];return a?Promise.resolve(a):(la(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await V2(e),r=new b2(e);return t.register("authEvent",a=>(ot(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cg,{type:Cg},a=>{var u;const c=(u=a==null?void 0:a[0])===null||u===void 0?void 0:u[Cg];c!==void 0&&t(!!c),As(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $w()||Fw()||Uy()}}const $2=Y2;var oE="@firebase/auth",uE="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z2(i){Al(new bu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;ot(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xw(i)},v=new CC(r,a,u,p);return kC(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Al(new bu("auth-internal",e=>{const t=hm(e.getProvider("auth").getImmediate());return(r=>new X2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mo(oE,uE,W2(i)),mo(oE,uE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=5*60,eD=Iw("authIdTokenMaxAge")||J2;let lE=null;const tD=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>eD)return;const a=t==null?void 0:t.token;lE!==a&&(lE=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function nD(i=Qx()){const e=Oy(i,"auth");if(e.isInitialized())return e.getImmediate();const t=MC(i,{popupRedirectResolver:$2,persistence:[a2,YC,r1]}),r=Iw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=tD(u.toString());KC(t,c,()=>c(t.currentUser)),FC(t,d=>c(d))}}const a=OR("auth");return a?VC(t,`http://${a}`):xy("Auth",!1),t}function rD(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}DC({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const u=ns("internal-error");u.customData=a,t(u)},r.type="text/javascript",r.charset="UTF-8",rD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z2("Browser");var iD="firebase",sD="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mo(iD,sD,"app");var cE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,h1;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,N){function M(){}M.prototype=N.prototype,L.D=N.prototype,L.prototype=new M,L.prototype.constructor=L,L.C=function(q,Y,Z){for(var V=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)V[Dn-2]=arguments[Dn];return N.prototype[Y].apply(q,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,N,M){M||(M=0);var q=Array(16);if(typeof N=="string")for(var Y=0;16>Y;++Y)q[Y]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(Y=0;16>Y;++Y)q[Y]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=L.g[0],M=L.g[1],Y=L.g[2];var Z=L.g[3],V=N+(Z^M&(Y^Z))+q[0]+3614090360&4294967295;N=M+(V<<7&4294967295|V>>>25),V=Z+(Y^N&(M^Y))+q[1]+3905402710&4294967295,Z=N+(V<<12&4294967295|V>>>20),V=Y+(M^Z&(N^M))+q[2]+606105819&4294967295,Y=Z+(V<<17&4294967295|V>>>15),V=M+(N^Y&(Z^N))+q[3]+3250441966&4294967295,M=Y+(V<<22&4294967295|V>>>10),V=N+(Z^M&(Y^Z))+q[4]+4118548399&4294967295,N=M+(V<<7&4294967295|V>>>25),V=Z+(Y^N&(M^Y))+q[5]+1200080426&4294967295,Z=N+(V<<12&4294967295|V>>>20),V=Y+(M^Z&(N^M))+q[6]+2821735955&4294967295,Y=Z+(V<<17&4294967295|V>>>15),V=M+(N^Y&(Z^N))+q[7]+4249261313&4294967295,M=Y+(V<<22&4294967295|V>>>10),V=N+(Z^M&(Y^Z))+q[8]+1770035416&4294967295,N=M+(V<<7&4294967295|V>>>25),V=Z+(Y^N&(M^Y))+q[9]+2336552879&4294967295,Z=N+(V<<12&4294967295|V>>>20),V=Y+(M^Z&(N^M))+q[10]+4294925233&4294967295,Y=Z+(V<<17&4294967295|V>>>15),V=M+(N^Y&(Z^N))+q[11]+2304563134&4294967295,M=Y+(V<<22&4294967295|V>>>10),V=N+(Z^M&(Y^Z))+q[12]+1804603682&4294967295,N=M+(V<<7&4294967295|V>>>25),V=Z+(Y^N&(M^Y))+q[13]+4254626195&4294967295,Z=N+(V<<12&4294967295|V>>>20),V=Y+(M^Z&(N^M))+q[14]+2792965006&4294967295,Y=Z+(V<<17&4294967295|V>>>15),V=M+(N^Y&(Z^N))+q[15]+1236535329&4294967295,M=Y+(V<<22&4294967295|V>>>10),V=N+(Y^Z&(M^Y))+q[1]+4129170786&4294967295,N=M+(V<<5&4294967295|V>>>27),V=Z+(M^Y&(N^M))+q[6]+3225465664&4294967295,Z=N+(V<<9&4294967295|V>>>23),V=Y+(N^M&(Z^N))+q[11]+643717713&4294967295,Y=Z+(V<<14&4294967295|V>>>18),V=M+(Z^N&(Y^Z))+q[0]+3921069994&4294967295,M=Y+(V<<20&4294967295|V>>>12),V=N+(Y^Z&(M^Y))+q[5]+3593408605&4294967295,N=M+(V<<5&4294967295|V>>>27),V=Z+(M^Y&(N^M))+q[10]+38016083&4294967295,Z=N+(V<<9&4294967295|V>>>23),V=Y+(N^M&(Z^N))+q[15]+3634488961&4294967295,Y=Z+(V<<14&4294967295|V>>>18),V=M+(Z^N&(Y^Z))+q[4]+3889429448&4294967295,M=Y+(V<<20&4294967295|V>>>12),V=N+(Y^Z&(M^Y))+q[9]+568446438&4294967295,N=M+(V<<5&4294967295|V>>>27),V=Z+(M^Y&(N^M))+q[14]+3275163606&4294967295,Z=N+(V<<9&4294967295|V>>>23),V=Y+(N^M&(Z^N))+q[3]+4107603335&4294967295,Y=Z+(V<<14&4294967295|V>>>18),V=M+(Z^N&(Y^Z))+q[8]+1163531501&4294967295,M=Y+(V<<20&4294967295|V>>>12),V=N+(Y^Z&(M^Y))+q[13]+2850285829&4294967295,N=M+(V<<5&4294967295|V>>>27),V=Z+(M^Y&(N^M))+q[2]+4243563512&4294967295,Z=N+(V<<9&4294967295|V>>>23),V=Y+(N^M&(Z^N))+q[7]+1735328473&4294967295,Y=Z+(V<<14&4294967295|V>>>18),V=M+(Z^N&(Y^Z))+q[12]+2368359562&4294967295,M=Y+(V<<20&4294967295|V>>>12),V=N+(M^Y^Z)+q[5]+4294588738&4294967295,N=M+(V<<4&4294967295|V>>>28),V=Z+(N^M^Y)+q[8]+2272392833&4294967295,Z=N+(V<<11&4294967295|V>>>21),V=Y+(Z^N^M)+q[11]+1839030562&4294967295,Y=Z+(V<<16&4294967295|V>>>16),V=M+(Y^Z^N)+q[14]+4259657740&4294967295,M=Y+(V<<23&4294967295|V>>>9),V=N+(M^Y^Z)+q[1]+2763975236&4294967295,N=M+(V<<4&4294967295|V>>>28),V=Z+(N^M^Y)+q[4]+1272893353&4294967295,Z=N+(V<<11&4294967295|V>>>21),V=Y+(Z^N^M)+q[7]+4139469664&4294967295,Y=Z+(V<<16&4294967295|V>>>16),V=M+(Y^Z^N)+q[10]+3200236656&4294967295,M=Y+(V<<23&4294967295|V>>>9),V=N+(M^Y^Z)+q[13]+681279174&4294967295,N=M+(V<<4&4294967295|V>>>28),V=Z+(N^M^Y)+q[0]+3936430074&4294967295,Z=N+(V<<11&4294967295|V>>>21),V=Y+(Z^N^M)+q[3]+3572445317&4294967295,Y=Z+(V<<16&4294967295|V>>>16),V=M+(Y^Z^N)+q[6]+76029189&4294967295,M=Y+(V<<23&4294967295|V>>>9),V=N+(M^Y^Z)+q[9]+3654602809&4294967295,N=M+(V<<4&4294967295|V>>>28),V=Z+(N^M^Y)+q[12]+3873151461&4294967295,Z=N+(V<<11&4294967295|V>>>21),V=Y+(Z^N^M)+q[15]+530742520&4294967295,Y=Z+(V<<16&4294967295|V>>>16),V=M+(Y^Z^N)+q[2]+3299628645&4294967295,M=Y+(V<<23&4294967295|V>>>9),V=N+(Y^(M|~Z))+q[0]+4096336452&4294967295,N=M+(V<<6&4294967295|V>>>26),V=Z+(M^(N|~Y))+q[7]+1126891415&4294967295,Z=N+(V<<10&4294967295|V>>>22),V=Y+(N^(Z|~M))+q[14]+2878612391&4294967295,Y=Z+(V<<15&4294967295|V>>>17),V=M+(Z^(Y|~N))+q[5]+4237533241&4294967295,M=Y+(V<<21&4294967295|V>>>11),V=N+(Y^(M|~Z))+q[12]+1700485571&4294967295,N=M+(V<<6&4294967295|V>>>26),V=Z+(M^(N|~Y))+q[3]+2399980690&4294967295,Z=N+(V<<10&4294967295|V>>>22),V=Y+(N^(Z|~M))+q[10]+4293915773&4294967295,Y=Z+(V<<15&4294967295|V>>>17),V=M+(Z^(Y|~N))+q[1]+2240044497&4294967295,M=Y+(V<<21&4294967295|V>>>11),V=N+(Y^(M|~Z))+q[8]+1873313359&4294967295,N=M+(V<<6&4294967295|V>>>26),V=Z+(M^(N|~Y))+q[15]+4264355552&4294967295,Z=N+(V<<10&4294967295|V>>>22),V=Y+(N^(Z|~M))+q[6]+2734768916&4294967295,Y=Z+(V<<15&4294967295|V>>>17),V=M+(Z^(Y|~N))+q[13]+1309151649&4294967295,M=Y+(V<<21&4294967295|V>>>11),V=N+(Y^(M|~Z))+q[4]+4149444226&4294967295,N=M+(V<<6&4294967295|V>>>26),V=Z+(M^(N|~Y))+q[11]+3174756917&4294967295,Z=N+(V<<10&4294967295|V>>>22),V=Y+(N^(Z|~M))+q[2]+718787259&4294967295,Y=Z+(V<<15&4294967295|V>>>17),V=M+(Z^(Y|~N))+q[9]+3951481745&4294967295,L.g[0]=L.g[0]+N&4294967295,L.g[1]=L.g[1]+(Y+(V<<21&4294967295|V>>>11))&4294967295,L.g[2]=L.g[2]+Y&4294967295,L.g[3]=L.g[3]+Z&4294967295}r.prototype.u=function(L,N){N===void 0&&(N=L.length);for(var M=N-this.blockSize,q=this.B,Y=this.h,Z=0;Z<N;){if(Y==0)for(;Z<=M;)a(this,L,Z),Z+=this.blockSize;if(typeof L=="string"){for(;Z<N;)if(q[Y++]=L.charCodeAt(Z++),Y==this.blockSize){a(this,q),Y=0;break}}else for(;Z<N;)if(q[Y++]=L[Z++],Y==this.blockSize){a(this,q),Y=0;break}}this.h=Y,this.o+=N},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var N=1;N<L.length-8;++N)L[N]=0;var M=8*this.o;for(N=L.length-8;N<L.length;++N)L[N]=M&255,M/=256;for(this.u(L),L=Array(16),N=M=0;4>N;++N)for(var q=0;32>q;q+=8)L[M++]=this.g[N]>>>q&255;return L};function u(L,N){var M=d;return Object.prototype.hasOwnProperty.call(M,L)?M[L]:M[L]=N(L)}function c(L,N){this.h=N;for(var M=[],q=!0,Y=L.length-1;0<=Y;Y--){var Z=L[Y]|0;q&&Z==N||(M[Y]=Z,q=!1)}this.g=M}var d={};function p(L){return-128<=L&&128>L?u(L,function(N){return new c([N|0],0>N?-1:0)}):new c([L|0],0>L?-1:0)}function v(L){if(isNaN(L)||!isFinite(L))return I;if(0>L)return ue(v(-L));for(var N=[],M=1,q=0;L>=M;q++)N[q]=L/M|0,M*=4294967296;return new c(N,0)}function T(L,N){if(L.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(L.charAt(0)=="-")return ue(T(L.substring(1),N));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=v(Math.pow(N,8)),q=I,Y=0;Y<L.length;Y+=8){var Z=Math.min(8,L.length-Y),V=parseInt(L.substring(Y,Y+Z),N);8>Z?(Z=v(Math.pow(N,Z)),q=q.j(Z).add(v(V))):(q=q.j(M),q=q.add(v(V)))}return q}var I=p(0),C=p(1),z=p(16777216);i=c.prototype,i.m=function(){if(he(this))return-ue(this).m();for(var L=0,N=1,M=0;M<this.g.length;M++){var q=this.i(M);L+=(0<=q?q:4294967296+q)*N,N*=4294967296}return L},i.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(B(this))return"0";if(he(this))return"-"+ue(this).toString(L);for(var N=v(Math.pow(L,6)),M=this,q="";;){var Y=Re(M,N).g;M=ve(M,Y.j(N));var Z=((0<M.g.length?M.g[0]:M.h)>>>0).toString(L);if(M=Y,B(M))return Z+q;for(;6>Z.length;)Z="0"+Z;q=Z+q}},i.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function B(L){if(L.h!=0)return!1;for(var N=0;N<L.g.length;N++)if(L.g[N]!=0)return!1;return!0}function he(L){return L.h==-1}i.l=function(L){return L=ve(this,L),he(L)?-1:B(L)?0:1};function ue(L){for(var N=L.g.length,M=[],q=0;q<N;q++)M[q]=~L.g[q];return new c(M,~L.h).add(C)}i.abs=function(){return he(this)?ue(this):this},i.add=function(L){for(var N=Math.max(this.g.length,L.g.length),M=[],q=0,Y=0;Y<=N;Y++){var Z=q+(this.i(Y)&65535)+(L.i(Y)&65535),V=(Z>>>16)+(this.i(Y)>>>16)+(L.i(Y)>>>16);q=V>>>16,Z&=65535,V&=65535,M[Y]=V<<16|Z}return new c(M,M[M.length-1]&-2147483648?-1:0)};function ve(L,N){return L.add(ue(N))}i.j=function(L){if(B(this)||B(L))return I;if(he(this))return he(L)?ue(this).j(ue(L)):ue(ue(this).j(L));if(he(L))return ue(this.j(ue(L)));if(0>this.l(z)&&0>L.l(z))return v(this.m()*L.m());for(var N=this.g.length+L.g.length,M=[],q=0;q<2*N;q++)M[q]=0;for(q=0;q<this.g.length;q++)for(var Y=0;Y<L.g.length;Y++){var Z=this.i(q)>>>16,V=this.i(q)&65535,Dn=L.i(Y)>>>16,Yt=L.i(Y)&65535;M[2*q+2*Y]+=V*Yt,pe(M,2*q+2*Y),M[2*q+2*Y+1]+=Z*Yt,pe(M,2*q+2*Y+1),M[2*q+2*Y+1]+=V*Dn,pe(M,2*q+2*Y+1),M[2*q+2*Y+2]+=Z*Dn,pe(M,2*q+2*Y+2)}for(q=0;q<N;q++)M[q]=M[2*q+1]<<16|M[2*q];for(q=N;q<2*N;q++)M[q]=0;return new c(M,0)};function pe(L,N){for(;(L[N]&65535)!=L[N];)L[N+1]+=L[N]>>>16,L[N]&=65535,N++}function oe(L,N){this.g=L,this.h=N}function Re(L,N){if(B(N))throw Error("division by zero");if(B(L))return new oe(I,I);if(he(L))return N=Re(ue(L),N),new oe(ue(N.g),ue(N.h));if(he(N))return N=Re(L,ue(N)),new oe(ue(N.g),N.h);if(30<L.g.length){if(he(L)||he(N))throw Error("slowDivide_ only works with positive integers.");for(var M=C,q=N;0>=q.l(L);)M=xe(M),q=xe(q);var Y=Me(M,1),Z=Me(q,1);for(q=Me(q,2),M=Me(M,2);!B(q);){var V=Z.add(q);0>=V.l(L)&&(Y=Y.add(M),Z=V),q=Me(q,1),M=Me(M,1)}return N=ve(L,Y.j(N)),new oe(Y,N)}for(Y=I;0<=L.l(N);){for(M=Math.max(1,Math.floor(L.m()/N.m())),q=Math.ceil(Math.log(M)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),Z=v(M),V=Z.j(N);he(V)||0<V.l(L);)M-=q,Z=v(M),V=Z.j(N);B(Z)&&(Z=C),Y=Y.add(Z),L=ve(L,V)}return new oe(Y,L)}i.A=function(L){return Re(this,L).h},i.and=function(L){for(var N=Math.max(this.g.length,L.g.length),M=[],q=0;q<N;q++)M[q]=this.i(q)&L.i(q);return new c(M,this.h&L.h)},i.or=function(L){for(var N=Math.max(this.g.length,L.g.length),M=[],q=0;q<N;q++)M[q]=this.i(q)|L.i(q);return new c(M,this.h|L.h)},i.xor=function(L){for(var N=Math.max(this.g.length,L.g.length),M=[],q=0;q<N;q++)M[q]=this.i(q)^L.i(q);return new c(M,this.h^L.h)};function xe(L){for(var N=L.g.length+1,M=[],q=0;q<N;q++)M[q]=L.i(q)<<1|L.i(q-1)>>>31;return new c(M,L.h)}function Me(L,N){var M=N>>5;N%=32;for(var q=L.g.length-M,Y=[],Z=0;Z<q;Z++)Y[Z]=0<N?L.i(Z+M)>>>N|L.i(Z+M+1)<<32-N:L.i(Z+M);return new c(Y,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=T,po=c}).apply(typeof cE<"u"?cE:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f1,ch,d1,bd,Zg,m1,p1,g1;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,w){return h==Array.prototype||h==Object.prototype||(h[b]=w.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var b=0;b<h.length;++b){var w=h[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var w=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var ne=h[D];if(!(ne in w))break e;w=w[ne]}h=h[h.length-1],D=w[h],b=b(D),b!=D&&b!=null&&e(w,h,{configurable:!0,writable:!0,value:b})}}function u(h,b){h instanceof String&&(h+="");var w=0,D=!1,ne={next:function(){if(!D&&w<h.length){var me=w++;return{value:b(me,h[me]),done:!1}}return D=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}a("Array.prototype.values",function(h){return h||function(){return u(this,function(b,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function v(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function T(h,b,w){return h.call.apply(h.bind,arguments)}function I(h,b,w){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,D),h.apply(b,ne)}}return function(){return h.apply(b,arguments)}}function C(h,b,w){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,C.apply(null,arguments)}function z(h,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function B(h,b){function w(){}w.prototype=b.prototype,h.aa=b.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(D,ne,me){for(var Pe=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Pe[vt-2]=arguments[vt];return b.prototype[ne].apply(D,Pe)}}function he(h){const b=h.length;if(0<b){const w=Array(b);for(let D=0;D<b;D++)w[D]=h[D];return w}return[]}function ue(h,b){for(let w=1;w<arguments.length;w++){const D=arguments[w];if(p(D)){const ne=h.length||0,me=D.length||0;h.length=ne+me;for(let Pe=0;Pe<me;Pe++)h[ne+Pe]=D[Pe]}else h.push(D)}}class ve{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function pe(h){return/^[\s\xa0]*$/.test(h)}function oe(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Re(h){return Re[" "](h),h}Re[" "]=function(){};var xe=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function Me(h,b,w){for(const D in h)b.call(w,h[D],D,h)}function L(h,b){for(const w in h)b.call(void 0,h[w],w,h)}function N(h){const b={};for(const w in h)b[w]=h[w];return b}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(h,b){let w,D;for(let ne=1;ne<arguments.length;ne++){D=arguments[ne];for(w in D)h[w]=D[w];for(let me=0;me<M.length;me++)w=M[me],Object.prototype.hasOwnProperty.call(D,w)&&(h[w]=D[w])}}function Y(h){var b=1;h=h.split(":");const w=[];for(;0<b&&h.length;)w.push(h.shift()),b--;return h.length&&w.push(h.join(":")),w}function Z(h){d.setTimeout(()=>{throw h},0)}function V(){var h=pt;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class Dn{constructor(){this.h=this.g=null}add(b,w){const D=Yt.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var Yt=new ve(()=>new ye,h=>h.reset());class ye{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,Qe=!1,pt=new Dn,j=()=>{const h=d.Promise.resolve(void 0);Le=()=>{h.then(we)}};var we=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(w){Z(w)}var b=Yt;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}Qe=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,b),d.removeEventListener("test",w,b)}catch{}return h}();function ct(h,b){if(Ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(xe){e:{try{Re(b.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(b=null)}}else w=="mouseover"?b=h.fromElement:w=="mouseout"&&(b=h.toElement);this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:et[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ct.aa.h.call(this)}}B(ct,Ie);var et={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var un="closure_listenable_"+(1e6*Math.random()|0),jt=0;function Fe(h,b,w,D,ne){this.listener=h,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=ne,this.key=++jt,this.da=this.fa=!1}function Pi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ar(h){this.src=h,this.g={},this.h=0}Ar.prototype.add=function(h,b,w,D,ne){var me=h.toString();h=this.g[me],h||(h=this.g[me]=[],this.h++);var Pe=Br(h,b,D,ne);return-1<Pe?(b=h[Pe],w||(b.fa=!1)):(b=new Fe(b,this.src,me,!!D,ne),b.fa=w,h.push(b)),b};function Tt(h,b){var w=b.type;if(w in h.g){var D=h.g[w],ne=Array.prototype.indexOf.call(D,b,void 0),me;(me=0<=ne)&&Array.prototype.splice.call(D,ne,1),me&&(Pi(b),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Br(h,b,w,D){for(var ne=0;ne<h.length;++ne){var me=h[ne];if(!me.da&&me.listener==b&&me.capture==!!w&&me.ha==D)return ne}return-1}var Cs="closure_lm_"+(1e6*Math.random()|0),zr={};function Pu(h,b,w,D,ne){if(Array.isArray(b)){for(var me=0;me<b.length;me++)Pu(h,b[me],w,D,ne);return null}return w=is(w),h&&h[un]?h.K(b,w,v(D)?!!D.capture:!1,ne):Ir(h,b,w,!1,D,ne)}function Ir(h,b,w,D,ne,me){if(!b)throw Error("Invalid event type");var Pe=v(ne)?!!ne.capture:!!ne,vt=li(h);if(vt||(h[Cs]=vt=new Ar(h)),w=vt.add(b,w,D,Pe,me),w.proxy)return w;if(D=Wl(),w.proxy=D,D.src=h,D.listener=w,h.addEventListener)We||(ne=Pe),ne===void 0&&(ne=!1),h.addEventListener(b.toString(),D,ne);else if(h.attachEvent)h.attachEvent(Ln(b.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Wl(){function h(w){return b.call(h.src,h.listener,w)}const b=Mu;return h}function Ao(h,b,w,D,ne){if(Array.isArray(b))for(var me=0;me<b.length;me++)Ao(h,b[me],w,D,ne);else D=v(D)?!!D.capture:!!D,w=is(w),h&&h[un]?(h=h.i,b=String(b).toString(),b in h.g&&(me=h.g[b],w=Br(me,w,D,ne),-1<w&&(Pi(me[w]),Array.prototype.splice.call(me,w,1),me.length==0&&(delete h.g[b],h.h--)))):h&&(h=li(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Br(b,w,D,ne)),(w=-1<h?b[h]:null)&&rs(w))}function rs(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[un])Tt(b.i,h);else{var w=h.type,D=h.proxy;b.removeEventListener?b.removeEventListener(w,D,h.capture):b.detachEvent?b.detachEvent(Ln(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=li(b))?(Tt(w,h),w.h==0&&(w.src=null,b[Cs]=null)):Pi(h)}}}function Ln(h){return h in zr?zr[h]:zr[h]="on"+h}function Mu(h,b){if(h.da)h=!0;else{b=new ct(b,this);var w=h.listener,D=h.ha||h.src;h.fa&&rs(h),h=w.call(D,b)}return h}function li(h){return h=h[Cs],h instanceof Ar?h:null}var ya="__closure_events_fn_"+(1e9*Math.random()>>>0);function is(h){return typeof h=="function"?h:(h[ya]||(h[ya]=function(b){return h.handleEvent(b)}),h[ya])}function Pt(){je.call(this),this.i=new Ar(this),this.M=this,this.F=null}B(Pt,je),Pt.prototype[un]=!0,Pt.prototype.removeEventListener=function(h,b,w,D){Ao(this,h,b,w,D)};function yt(h,b){var w,D=h.F;if(D)for(w=[];D;D=D.F)w.push(D);if(h=h.M,D=b.type||b,typeof b=="string")b=new Ie(b,h);else if(b instanceof Ie)b.target=b.target||h;else{var ne=b;b=new Ie(D,h),q(b,ne)}if(ne=!0,w)for(var me=w.length-1;0<=me;me--){var Pe=b.g=w[me];ne=Yn(Pe,D,!0,b)&&ne}if(Pe=b.g=h,ne=Yn(Pe,D,!0,b)&&ne,ne=Yn(Pe,D,!1,b)&&ne,w)for(me=0;me<w.length;me++)Pe=b.g=w[me],ne=Yn(Pe,D,!1,b)&&ne}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var w=h.g[b],D=0;D<w.length;D++)Pi(w[D]);delete h.g[b],h.h--}}this.F=null},Pt.prototype.K=function(h,b,w,D){return this.i.add(String(h),b,!1,w,D)},Pt.prototype.L=function(h,b,w,D){return this.i.add(String(h),b,!0,w,D)};function Yn(h,b,w,D){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var ne=!0,me=0;me<b.length;++me){var Pe=b[me];if(Pe&&!Pe.da&&Pe.capture==w){var vt=Pe.listener,cn=Pe.ha||Pe.src;Pe.fa&&Tt(h.i,Pe),ne=vt.call(cn,D)!==!1&&ne}}return ne&&!D.defaultPrevented}function ln(h,b,w){if(typeof h=="function")w&&(h=C(h,w));else if(h&&typeof h.handleEvent=="function")h=C(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:d.setTimeout(h,b||0)}function va(h){h.g=ln(()=>{h.g=null,h.i&&(h.i=!1,va(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class _a extends je{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:va(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(h){je.call(this),this.h=h,this.g={}}B(pr,je);var ci=[];function Mi(h){Me(h.g,function(b,w){this.g.hasOwnProperty(w)&&rs(b)},h),h.g={}}pr.prototype.N=function(){pr.aa.N.call(this),Mi(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=d.JSON.stringify,qe=d.JSON.parse,qr=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Fr(){}Fr.prototype.h=null;function ss(h){return h.h||(h.h=h.i())}function Ue(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){Ie.call(this,"d")}B(hi,Ie);function Ds(){Ie.call(this,"c")}B(Ds,Ie);var Hr={},Os=null;function as(){return Os=Os||new Pt}Hr.La="serverreachability";function ba(h){Ie.call(this,Hr.La,h)}B(ba,Ie);function gr(h){const b=as();yt(b,new ba(b))}Hr.STAT_EVENT="statevent";function ki(h,b){Ie.call(this,Hr.STAT_EVENT,h),this.stat=b}B(ki,Ie);function Bt(h){const b=as();yt(b,new ki(b,h))}Hr.Ma="timingevent";function Jt(h,b){Ie.call(this,Hr.Ma,h),this.size=b}B(Jt,Ie);function ut(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function Io(h,b,w,D,ne,me){h.info(function(){if(h.g)if(me)for(var Pe="",vt=me.split("&"),cn=0;cn<vt.length;cn++){var wt=vt[cn].split("=");if(1<wt.length){var gn=wt[0];wt=wt[1];var sn=gn.split("_");Pe=2<=sn.length&&sn[1]=="type"?Pe+(gn+"="+wt+"&"):Pe+(gn+"=redacted&")}}else Pe=null;else Pe=me;return"XMLHTTP REQ ("+D+") [attempt "+ne+"]: "+b+`
`+w+`
`+Pe})}function Ea(h,b,w,D,ne,me,Pe){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+ne+"]: "+b+`
`+w+`
`+me+" "+Pe})}function Gr(h,b,w,D){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ps(h,w)+(D?" "+D:"")})}function Ns(h,b){h.info(function(){return"TIMEOUT: "+b})}Ot.prototype.info=function(){};function Ps(h,b){if(!h.g)return b;if(!b)return null;try{var w=JSON.parse(b);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var D=w[h];if(!(2>D.length)){var ne=D[1];if(Array.isArray(ne)&&!(1>ne.length)){var me=ne[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Pe=1;Pe<ne.length;Pe++)ne[Pe]=""}}}}return wn(w)}catch{return b}}var $n={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},On;function yr(){}B(yr,Fr),yr.prototype.g=function(){return new XMLHttpRequest},yr.prototype.i=function(){return{}},On=new yr;function Xn(h,b,w,D){this.j=h,this.i=b,this.l=w,this.R=D||1,this.U=new pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mt}function Mt(){this.i=null,this.g="",this.h=!1}var Ta={},Rr={};function xr(h,b,w){h.L=1,h.v=us(jn(b)),h.m=w,h.P=!0,Qr(h,null)}function Qr(h,b){h.F=Date.now(),Wn(h),h.A=jn(h.v);var w=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),sr(w.i,"t",D),h.C=0,w=h.j.J,h.h=new Mt,h.g=Oa(h.j,w?b:null,!h.m),0<h.O&&(h.M=new _a(C(h.Y,h,h.g),h.O)),b=h.U,w=h.g,D=h.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(ci[0]=ne.toString()),ne=ci);for(var me=0;me<ne.length;me++){var Pe=Pu(w,ne[me],D||b.handleEvent,!1,b.h||b);if(!Pe)break;b.g[Pe.key]=Pe}b=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),gr(),Io(h.i,h.u,h.A,h.l,h.R,h.m)}Xn.prototype.ca=function(h){h=h.target;const b=this.M;b&&or(h)==3?b.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)e:{const sn=or(this.g);var b=this.g.Ba();const Ti=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||sn!=4||b==7||(b==8||0>=Ti?gr(3):gr(2)),vr(this);var w=this.g.Z();this.X=w;t:if($t(this)){var D=Ra(this.g);h="";var ne=D.length,me=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),_r(this);var Pe="";break t}this.h.i=new d.TextDecoder}for(b=0;b<ne;b++)this.h.h=!0,h+=this.h.i.decode(D[b],{stream:!(me&&b==ne-1)});D.length=0,this.h.g+=h,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=w==200,Ea(this.i,this.u,this.A,this.l,this.R,sn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,cn=this.g;if((vt=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(vt)){var wt=vt;break t}}wt=null}if(w=wt)Gr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vi(this,w);else{this.o=!1,this.s=3,Bt(12),mn(this),_r(this);break e}}if(this.P){w=!0;let An;for(;!this.J&&this.C<Pe.length;)if(An=fi(this,Pe),An==Rr){sn==4&&(this.s=4,Bt(14),w=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Ta){this.s=4,Bt(15),Gr(this.i,this.l,Pe,"[Invalid Chunk]"),w=!1;break}else Gr(this.i,this.l,An,null),Vi(this,An);if($t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||Pe.length!=0||this.h.h||(this.s=1,Bt(16),w=!1),this.o=this.o&&w,!w)Gr(this.i,this.l,Pe,"[Invalid Chunked Response]"),mn(this),_r(this);else if(0<Pe.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),Wr(gn),gn.M=!0,Bt(11))}}else Gr(this.i,this.l,Pe,null),Vi(this,Pe);sn==4&&mn(this),this.o&&!this.J&&(sn==4?Mo(this.j,this):(this.o=!1,Wn(this)))}else ku(this.g),w==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),mn(this),_r(this)}}}catch{}finally{}};function $t(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function fi(h,b){var w=h.C,D=b.indexOf(`
`,w);return D==-1?Rr:(w=Number(b.substring(w,D)),isNaN(w)?Ta:(D+=1,D+w>b.length?Rr:(b=b.slice(D,D+w),h.C=D+w,b)))}Xn.prototype.cancel=function(){this.J=!0,mn(this)};function Wn(h){h.S=Date.now()+h.I,Ro(h,h.I)}function Ro(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ut(C(h.ba,h),b)}function vr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Xn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ns(this.i,this.A),this.L!=2&&(gr(),Bt(17)),mn(this),this.s=2,_r(this)):Ro(this,this.S-h)};function _r(h){h.j.G==0||h.J||Mo(h.j,h)}function mn(h){vr(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,Mi(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function Vi(h,b){try{var w=h.j;if(w.G!=0&&(w.g==h||ht(w.h,h))){if(!h.K&&ht(w.h,h)&&w.G==3){try{var D=w.Da.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var ne=D;if(ne[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)Qi(w),Us(w);else break e;Gi(w),Bt(18)}}else w.za=ne[1],0<w.za-w.T&&37500>ne[2]&&w.F&&w.v==0&&!w.C&&(w.C=ut(C(w.Za,w),6e3));if(1>=Ms(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Mr(w,11)}else if((h.K||w.g==h)&&Qi(w),!pe(b))for(ne=w.Da.g.parse(b),b=0;b<ne.length;b++){let wt=ne[b];if(w.T=wt[0],wt=wt[1],w.G==2)if(wt[0]=="c"){w.K=wt[1],w.ia=wt[2];const gn=wt[3];gn!=null&&(w.la=gn,w.j.info("VER="+w.la));const sn=wt[4];sn!=null&&(w.Aa=sn,w.j.info("SVER="+w.Aa));const Ti=wt[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(D=1.5*Ti,w.L=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const An=h.g;if(An){const wi=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var me=D.h;me.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(ks(me,me.h),me.h=null))}if(D.D){const Vo=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(D.ya=Vo,It(D.I,D.D,Vo))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),D=w;var Pe=h;if(D.qa=Ei(D,D.J?D.ia:null,D.W),Pe.K){Un(D.h,Pe);var vt=Pe,cn=D.L;cn&&(vt.I=cn),vt.B&&(vr(vt),Wn(vt)),D.g=Pe}else pn(D);0<w.i.length&&Ki(w)}else wt[0]!="stop"&&wt[0]!="close"||Mr(w,7);else w.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Mr(w,7):fs(w):wt[0]!="noop"&&w.l&&w.l.ta(wt),w.v=0)}}gr(4)}catch{}}var di=class{constructor(h,b){this.g=h,this.map=b}};function mi(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Li(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ms(h){return h.h?1:h.g?h.g.size:0}function ht(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function ks(h,b){h.g?h.g.add(b):h.h=b}function Un(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}mi.prototype.cancel=function(){if(this.i=wa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wa(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const w of h.g.values())b=b.concat(w.D);return b}return he(h.i)}function kt(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var b=[],w=h.length,D=0;D<w;D++)b.push(h[D]);return b}b=[],w=0;for(D in h)b[w++]=h[D];return b}function pi(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var b=[];h=h.length;for(var w=0;w<h;w++)b.push(w);return b}b=[],w=0;for(const D in h)b[w++]=D;return b}}}function Ui(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var w=pi(h),D=kt(h),ne=D.length,me=0;me<ne;me++)b.call(void 0,D[me],w&&w[me],h)}var Cr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xo(h,b){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var D=h[w].indexOf("="),ne=null;if(0<=D){var me=h[w].substring(0,D);ne=h[w].substring(D+1)}else me=h[w];b(me,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function en(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof en){this.h=h.h,os(this,h.j),this.o=h.o,this.g=h.g,Yr(this,h.s),this.l=h.l;var b=h.i,w=new Bn;w.i=b.i,b.g&&(w.g=new Map(b.g),w.h=b.h),gi(this,w),this.m=h.m}else h&&(b=String(h).match(Cr))?(this.h=!1,os(this,b[1]||"",!0),this.o=Dr(b[2]||""),this.g=Dr(b[3]||"",!0),Yr(this,b[4]),this.l=Dr(b[5]||"",!0),gi(this,b[6]||"",!0),this.m=Dr(b[7]||"")):(this.h=!1,this.i=new Bn(null,this.h))}en.prototype.toString=function(){var h=[],b=this.j;b&&h.push(dt(b,Co,!0),":");var w=this.g;return(w||b=="file")&&(h.push("//"),(b=this.o)&&h.push(dt(b,Co,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(dt(w,w.charAt(0)=="/"?Zn:Do,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",dt(w,ji)),h.join("")};function jn(h){return new en(h)}function os(h,b,w){h.j=w?Dr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Yr(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function gi(h,b,w){b instanceof Bn?(h.i=b,cs(h.i,h.h)):(w||(b=dt(b,ls)),h.i=new Bn(b,h.h))}function It(h,b,w){h.i.set(b,w)}function us(h){return It(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Dr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dt(h,b,w){return typeof h=="string"?(h=encodeURI(h).replace(b,Sa),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sa(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Co=/[#\/\?@]/g,Do=/[#\?:]/g,Zn=/[#\?]/g,ls=/[#\?@]/g,ji=/#/g;function Bn(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function br(h){h.g||(h.g=new Map,h.h=0,h.i&&xo(h.i,function(b,w){h.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}i=Bn.prototype,i.add=function(h,b){br(this),this.i=null,h=ar(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(b),this.h+=1,this};function yi(h,b){br(h),b=ar(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function zt(h,b){return br(h),b=ar(h,b),h.g.has(b)}i.forEach=function(h,b){br(this),this.g.forEach(function(w,D){w.forEach(function(ne){h.call(b,ne,D,this)},this)},this)},i.na=function(){br(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),w=[];for(let D=0;D<b.length;D++){const ne=h[D];for(let me=0;me<ne.length;me++)w.push(b[D])}return w},i.V=function(h){br(this);let b=[];if(typeof h=="string")zt(this,h)&&(b=b.concat(this.g.get(ar(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)b=b.concat(h[w])}return b},i.set=function(h,b){return br(this),this.i=null,h=ar(this,h),zt(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},i.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function sr(h,b,w){yi(h,b),0<w.length&&(h.i=null,h.g.set(ar(h,b),he(w)),h.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var w=0;w<b.length;w++){var D=b[w];const me=encodeURIComponent(String(D)),Pe=this.V(D);for(D=0;D<Pe.length;D++){var ne=me;Pe[D]!==""&&(ne+="="+encodeURIComponent(String(Pe[D]))),h.push(ne)}}return this.i=h.join("&")};function ar(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function cs(h,b){b&&!h.j&&(br(h),h.i=null,h.g.forEach(function(w,D){var ne=D.toLowerCase();D!=ne&&(yi(this,D),sr(this,ne,w))},h)),h.j=b}function Bi(h,b){const w=new Ot;if(d.Image){const D=new Image;D.onload=z(Or,w,"TestLoadImage: loaded",!0,b,D),D.onerror=z(Or,w,"TestLoadImage: error",!1,b,D),D.onabort=z(Or,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=z(Or,w,"TestLoadImage: timeout",!1,b,D),d.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else b(!1)}function Sn(h,b){const w=new Ot,D=new AbortController,ne=setTimeout(()=>{D.abort(),Or(w,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:D.signal}).then(me=>{clearTimeout(ne),me.ok?Or(w,"TestPingServer: ok",!0,b):Or(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ne),Or(w,"TestPingServer: error",!1,b)})}function Or(h,b,w,D,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),D(w)}catch{}}function zn(){this.g=new qr}function Nr(h,b,w){const D=w||"";try{Ui(h,function(ne,me){let Pe=ne;v(ne)&&(Pe=wn(ne)),b.push(D+me+"="+encodeURIComponent(Pe))})}catch(ne){throw b.push(D+"type="+encodeURIComponent("_badmap")),ne}}function zi(h){this.l=h.Ub||null,this.j=h.eb||!1}B(zi,Fr),zi.prototype.g=function(){return new $r(this.l,this.j)},zi.prototype.i=function(h){return function(){return h}}({});function $r(h,b){Pt.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B($r,Pt),i=$r.prototype,i.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,Xr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||d).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Pr(this):Xr(this),this.readyState==3&&qi(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Pr(this))},i.Qa=function(h){this.g&&(this.response=h,Pr(this))},i.ga=function(){this.g&&Pr(this)};function Pr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Xr(h)}i.setRequestHeader=function(h,b){this.u.append(h,b)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=b.next();return h.join(`\r
`)};function Xr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Oo(h){let b="";return Me(h,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function tn(h,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=Oo(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):It(h,b,w))}function Ct(h){Pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Ct,Pt);var Aa=/^https?$/i,vi=["POST","PUT"];i=Ct.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():On.g(),this.v=this.o?ss(this.o):ss(On),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(me){Vs(this,me);return}if(h=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var ne in D)w.set(ne,D[ne]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const me of D.keys())w.set(me,D.get(me));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(me=>me.toLowerCase()=="content-type"),ne=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(vi,b,void 0))||D||ne||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Pe]of w)this.g.setRequestHeader(me,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ls(this),this.u=!0,this.g.send(h),this.u=!1}catch(me){Vs(this,me)}};function Vs(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,hs(h),_i(h)}function hs(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,yt(this,"complete"),yt(this,"abort"),_i(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),Ct.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},i.bb=function(){Ia(this)};function Ia(h){if(h.h&&typeof c<"u"&&(!h.v[1]||or(h)!=4||h.Z()!=2)){if(h.u&&or(h)==4)ln(h.Ea,0,h);else if(yt(h,"readystatechange"),or(h)==4){h.h=!1;try{const Pe=h.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=Pe===0){var ne=String(h.D).match(Cr)[1]||null;!ne&&d.self&&d.self.location&&(ne=d.self.location.protocol.slice(0,-1)),D=!Aa.test(ne?ne.toLowerCase():"")}w=D}if(w)yt(h,"complete"),yt(h,"success");else{h.m=6;try{var me=2<or(h)?h.g.statusText:""}catch{me=""}h.l=me+" ["+h.Z()+"]",hs(h)}}finally{_i(h)}}}}function _i(h,b){if(h.g){Ls(h);const w=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||yt(h,"ready");try{w.onreadystatechange=D}catch{}}}function Ls(h){h.I&&(d.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function or(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),qe(b)}};function Ra(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ku(h){const b={};h=(h.g&&2<=or(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(pe(h[D]))continue;var w=Y(h[D]);const ne=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const me=b[ne]||[];b[ne]=me,me.push(w)}L(b,function(D){return D.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(h,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||b}function Fi(h){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,h),this.cb=bi("retryDelaySeedMs",1e4,h),this.Wa=bi("forwardChannelMaxRetries",2,h),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(h&&h.concurrentRequestLimit),this.Da=new zn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Fi.prototype,i.la=8,i.G=1,i.connect=function(h,b,w,D){Bt(0),this.W=h,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.I=Ei(this,null,this.W),Ki(this)};function fs(h){if(Vu(h),h.G==3){var b=h.U++,w=jn(h.I);if(It(w,"SID",h.K),It(w,"RID",b),It(w,"TYPE","terminate"),Hi(h,w),b=new Xn(h,h.j,b),b.L=2,b.v=us(jn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(b.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=b.v,w=!0),w||(b.g=Oa(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Wn(b)}Da(h)}function Us(h){h.g&&(Wr(h),h.g.cancel(),h.g=null)}function Vu(h){Us(h),h.u&&(d.clearTimeout(h.u),h.u=null),Qi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ki(h){if(!Li(h.h)&&!h.s){h.s=!0;var b=h.Ga;Le||j(),Qe||(Le(),Qe=!0),pt.add(b,h),h.B=0}}function No(h,b){return Ms(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ut(C(h.Ga,h,b),Ca(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ne=new Xn(this,this.j,h);let me=this.o;if(this.S&&(me?(me=N(me),q(me,this.S)):me=this.S),this.m!==null||this.O||(ne.H=me,me=null),this.P)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,4096<b){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=xa(this,ne,b),w=jn(this.I),It(w,"RID",h),It(w,"CVER",22),this.D&&It(w,"X-HTTP-Session-Id",this.D),Hi(this,w),me&&(this.O?b="headers="+encodeURIComponent(String(Oo(me)))+"&"+b:this.m&&tn(w,this.m,me)),ks(this.h,ne),this.Ua&&It(w,"TYPE","init"),this.P?(It(w,"$req",b),It(w,"SID","null"),ne.T=!0,xr(ne,w,null)):xr(ne,w,b),this.G=2}}else this.G==3&&(h?js(this,h):this.i.length==0||Li(this.h)||js(this))};function js(h,b){var w;b?w=b.l:w=h.U++;const D=jn(h.I);It(D,"SID",h.K),It(D,"RID",w),It(D,"AID",h.T),Hi(h,D),h.m&&h.o&&tn(D,h.m,h.o),w=new Xn(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),b&&(h.i=b.D.concat(h.i)),b=xa(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ks(h.h,w),xr(w,D,b)}function Hi(h,b){h.H&&Me(h.H,function(w,D){It(b,D,w)}),h.l&&Ui({},function(w,D){It(b,D,w)})}function xa(h,b,w){w=Math.min(h.i.length,w);var D=h.l?C(h.l.Na,h.l,h):null;e:{var ne=h.i;let me=-1;for(;;){const Pe=["count="+w];me==-1?0<w?(me=ne[0].g,Pe.push("ofs="+me)):me=0:Pe.push("ofs="+me);let vt=!0;for(let cn=0;cn<w;cn++){let wt=ne[cn].g;const gn=ne[cn].map;if(wt-=me,0>wt)me=Math.max(0,ne[cn].g-100),vt=!1;else try{Nr(gn,Pe,"req"+wt+"_")}catch{D&&D(gn)}}if(vt){D=Pe.join("&");break e}}}return h=h.i.splice(0,w),b.D=h,D}function pn(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;Le||j(),Qe||(Le(),Qe=!0),pt.add(b,h),h.v=0}}function Gi(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ut(C(h.Fa,h),Ca(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,Po(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ut(C(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Us(this),Po(this))};function Wr(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Po(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=jn(h.qa);It(b,"RID","rpc"),It(b,"SID",h.K),It(b,"AID",h.T),It(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&It(b,"TO",h.ja),It(b,"TYPE","xmlhttp"),Hi(h,b),h.m&&h.o&&tn(b,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=us(jn(b)),w.m=null,w.P=!0,Qr(w,h)}i.Za=function(){this.C!=null&&(this.C=null,Us(this),Gi(this),Bt(19))};function Qi(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Mo(h,b){var w=null;if(h.g==b){Qi(h),Wr(h),h.g=null;var D=2}else if(ht(h.h,b))w=b.D,Un(h.h,b),D=1;else return;if(h.G!=0){if(b.o)if(D==1){w=b.m?b.m.length:0,b=Date.now()-b.F;var ne=h.B;D=as(),yt(D,new Jt(D,w)),Ki(h)}else pn(h);else if(ne=b.s,ne==3||ne==0&&0<b.X||!(D==1&&No(h,b)||D==2&&Gi(h)))switch(w&&0<w.length&&(b=h.h,b.i=b.i.concat(w)),ne){case 1:Mr(h,5);break;case 4:Mr(h,10);break;case 3:Mr(h,6);break;default:Mr(h,2)}}}function Ca(h,b){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*b}function Mr(h,b){if(h.j.info("Error code "+b),b==2){var w=C(h.fb,h),D=h.Xa;const ne=!D;D=new en(D||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||os(D,"https"),us(D),ne?Bi(D.toString(),w):Sn(D.toString(),w)}else Bt(2);h.G=0,h.l&&h.l.sa(b),Da(h),Vu(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Da(h){if(h.G=0,h.ka=[],h.l){const b=wa(h.h);(b.length!=0||h.i.length!=0)&&(ue(h.ka,b),ue(h.ka,h.i),h.h.i.length=0,he(h.i),h.i.length=0),h.l.ra()}}function Ei(h,b,w){var D=w instanceof en?jn(w):new en(w);if(D.g!="")b&&(D.g=b+"."+D.g),Yr(D,D.s);else{var ne=d.location;D=ne.protocol,b=b?b+"."+ne.hostname:ne.hostname,ne=+ne.port;var me=new en(null);D&&os(me,D),b&&(me.g=b),ne&&Yr(me,ne),w&&(me.l=w),D=me}return w=h.D,b=h.ya,w&&b&&It(D,w,b),It(D,"VER",h.la),Hi(h,D),D}function Oa(h,b,w){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new Ct(new zi({eb:w})):new Ct(h.pa),b.Ha(h.J),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Na(){}i=Na.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Yi(){}Yi.prototype.g=function(h,b){return new Nn(h,b)};function Nn(h,b){Pt.call(this),this.g=new Fi(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!pe(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!pe(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new kr(this)}B(Nn,Pt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){fs(this.g)},Nn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=wn(h),h=w);b.i.push(new di(b.Ya++,h)),b.G==3&&Ki(b)},Nn.prototype.N=function(){this.g.l=null,delete this.j,fs(this.g),delete this.g,Nn.aa.N.call(this)};function ko(h){hi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const w in b){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}B(ko,hi);function Lu(){Ds.call(this),this.status=1}B(Lu,Ds);function kr(h){this.g=h}B(kr,Na),kr.prototype.ua=function(){yt(this.g,"a")},kr.prototype.ta=function(h){yt(this.g,new ko(h))},kr.prototype.sa=function(h){yt(this.g,new Lu)},kr.prototype.ra=function(){yt(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,g1=function(){return new Yi},p1=function(){return as()},m1=Hr,Zg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,bd=$n,ir.COMPLETE="complete",d1=ir,Ue.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,ch=Ue,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,f1=Ct}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const hE="@firebase/firestore",fE="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Cy("@firebase/firestore");function pl(){return Tu.logLevel}function Ae(i,...e){if(Tu.logLevel<=St.DEBUG){const t=e.map(Fy);Tu.debug(`Firestore (${Hl}): ${i}`,...t)}}function bn(i,...e){if(Tu.logLevel<=St.ERROR){const t=e.map(Fy);Tu.error(`Firestore (${Hl}): ${i}`,...t)}}function Ah(i,...e){if(Tu.logLevel<=St.WARN){const t=e.map(Fy);Tu.warn(`Firestore (${Hl}): ${i}`,...t)}}function Fy(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,y1(i,r,t)}function y1(i,e,t){let r=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bn(r),new Error(r)}function $e(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||y1(e,a,r)}function Ye(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends da{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class uD{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let u=new go;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new go,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new go)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new aD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class lD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ji(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const a=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=fD(40);for(let u=0;u<a.length;++u)r.length<20&&a[u]<t&&(r+=e.charAt(a[u]%62))}return r}}function at(i,e){return i<e?-1:i>e?1:0}function Jg(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return at(r,a);{const u=v1(),c=dD(u.encode(mE(i,t)),u.encode(mE(e,t)));return c!==0?c:at(r,a)}}t+=r>65535?2:1}return at(i.length,e.length)}function mE(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function dD(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return at(i[t],e[t]);return at(i.length,e.length)}function Rl(i,e,t){return i.length===e.length&&i.every((r,a)=>t(r,e[a]))}function b1(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=-62135596800,gE=1e6;class Qn{static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gE);return new Qn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pE)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gE}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-pE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Qn(0,0))}static max(){return new Je(new Qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="__name__";class bs{constructor(e,t,r){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&He(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const u=bs.compareSegments(e.get(a),t.get(a));if(u!==0)return u}return at(e.length,t.length)}static compareSegments(e,t){const r=bs.isNumericId(e),a=bs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?bs.extractNumericId(e).compare(bs.extractNumericId(t)):Jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class Qt extends bs{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const mD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends bs{construct(e,t,r){return new En(e,t,r)}static isValidIdentifier(e){return mD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yE}static keyField(){return new En([yE])}static fromServerFormat(e){const t=[];let r="",a=0;const u=()=>{if(r.length===0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new Ge(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ge(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(u(),a++)}if(u(),c)throw new Ge(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Qt.fromString(e))}static fromName(e){return new Be(Qt.fromString(e).popFirst(5))}static empty(){return new Be(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;class jd{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function ey(i){return i.fields.find(e=>e.kind===2)}function ou(i){return i.fields.filter(e=>e.kind!==2)}jd.UNKNOWN_ID=-1;class Ed{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ih(0,ui.min())}}function E1(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Je.fromTimestamp(r===1e9?new Qn(t+1,0):new Qn(t,r));return new ui(a,Be.empty(),e)}function T1(i){return new ui(i.readTime,i.key,xl)}class ui{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ui(Je.min(),Be.empty(),xl)}static max(){return new ui(Je.max(),Be.empty(),xl)}}function Ky(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(i.documentKey,e.documentKey),t!==0?t:at(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(i){if(i.code!==Se.FAILED_PRECONDITION||i.message!==w1)throw i;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,a)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let a=0,u=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++u,c&&u===a&&t()},p=>r(p))}),c=!0,u===a&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(a=>a?re.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,u)=>{r.push(t.call(this,a,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,a)=>{const u=e.length,c=new Array(u);let d=0;for(let p=0;p<u;p++){const v=p;t(e[v]).next(T=>{c[v]=T,++d,d===u&&r(c)},T=>a(T))}})}static doWhile(e,t){return new re((r,a)=>{const u=()=>{e()===!0?t().next(()=>{u()},a):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="SimpleDb";class mm{static open(e,t,r,a){try{return new mm(t,e.transaction(a,r))}catch(u){throw new gh(t,u)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new go,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new gh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Hy(r.target.error);this.S.reject(new gh(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ae(ai,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gD(t)}}class yo{static delete(e){return Ae(ai,"Removing database:",e),lu(Sw().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Cw())return!1;if(yo.F())return!0;const e=kn(),t=yo.M(e),r=0<t&&t<10,a=A1(e),u=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,yo.M(kn())===12.2&&bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ae(ai,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=u=>{const c=u.target.result;t(c)},a.onblocked=()=>{r(new gh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new Ge(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new Ge(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new gh(e,c))},a.onupgradeneeded=u=>{Ae(ai,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;if(this.L!==null&&this.L!==u.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${u.oldVersion}, event.newVersion=${u.newVersion}, db.version=${c.version}`);this.B.q(c,a.transaction,u.oldVersion,this.version).next(()=>{Ae(ai,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const u=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=mm.open(this.db,e,u?"readonly":"readwrite",r),p=a(d).next(v=>(d.v(),v)).catch(v=>(d.abort(v),re.reject(v))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,v=p.name!=="FirebaseError"&&c<3;if(Ae(ai,"Transaction failed with error:",p.message,"Retrying:",v),this.close(),!v)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function A1(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pD{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return lu(this.K.delete())}}class gh extends Ge{constructor(e,t){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function So(i){return i.name==="IndexedDbTransactionError"}class gD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ae(ai,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae(ai,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lu(r)}add(e){return Ae(ai,"ADD",this.store.name,e,e),lu(this.store.add(e))}get(e){return lu(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ae(ai,"GET",this.store.name,e,t),t))}delete(e){return Ae(ai,"DELETE",this.store.name,e),lu(this.store.delete(e))}count(){return Ae(ai,"COUNT",this.store.name),lu(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const u=a.getAll(r.range);return new re((c,d)=>{u.onerror=p=>{d(p.target.error)},u.onsuccess=p=>{c(p.target.result)}})}{const u=this.cursor(r),c=[];return this.Y(u,(d,p)=>{c.push(p)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new re((a,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}X(e,t){Ae(ai,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const a=this.cursor(r);return this.Y(a,(u,c,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.Y(a,t)}ne(e){const t=this.cursor({});return new re((r,a)=>{t.onerror=u=>{const c=Hy(u.target.error);a(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}Y(e,t){const r=[];return new re((a,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new pD(d),v=t(d.primaryKey,d.value,p);if(v instanceof re){const T=v.catch(I=>(p.done(),re.reject(I)));r.push(T)}p.isDone?a():p.j===null?d.continue():d.continue(p.j)}}).next(()=>re.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lu(i){return new re((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=Hy(r.target.error);t(a)}})}let vE=!1;function Hy(i){const e=yo.M(kn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vE||(vE=!0,setTimeout(()=>{throw r},0)),r}}return i}const yh="IndexBackfiller";class yD{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Ae(yh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Ae(yh,`Documents written: ${t}`)}catch(t){So(t)?Ae(yh,"Ignoring IndexedDB error during index backfill: ",t):await wo(t)}await this.ie(6e4)})}}class vD{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let a=t,u=!0;return re.doWhile(()=>u===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Ae(yh,`Processing collection: ${c}`),this._e(e,c,a).next(d=>{a-=d,r.add(c)});u=!1})).next(()=>t-a)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(a,u)).next(d=>(Ae(yh,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((a,u)=>{const c=T1(u);Ky(c,r)>0&&(r=c)}),new ui(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}jr.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function pm(i){return i==null}function Rh(i){return i===0&&1/i==-1/0}function _D(i){return typeof i=="number"&&Number.isInteger(i)&&!Rh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="";function mr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=_E(e)),e=bD(i.get(t),e);return _E(e)}function bD(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const u=i.charAt(a);switch(u){case"\0":t+="";break;case Bd:t+="";break;default:t+=u}}return t}function _E(i){return i+Bd+""}function Ts(i){const e=i.length;if($e(e>=2,64408,{path:i}),e===2)return $e(i.charAt(0)===Bd&&i.charAt(1)==="",56145,{path:i}),Qt.emptyPath();const t=e-2,r=[];let a="";for(let u=0;u<e;){const c=i.indexOf(Bd,u);switch((c<0||c>t)&&He(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(u,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),r.push(p);break;case"":a+=i.substring(u,c),a+="\0";break;case"":a+=i.substring(u,c+1);break;default:He(61167,{path:i})}u=c+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu="remoteDocuments",Qh="owner",ll="owner",xh="mutationQueues",ED="userId",Zi="mutations",bE="batchId",mu="userMutationsIndex",EE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(i,e){return[i,mr(e)]}function I1(i,e,t){return[i,mr(e),t]}const TD={},Cl="documentMutations",zd="remoteDocumentsV14",wD=["prefixPath","collectionGroup","readTime","documentId"],wd="documentKeyIndex",SD=["prefixPath","collectionGroup","documentId"],R1="collectionGroupIndex",AD=["collectionGroup","readTime","prefixPath","documentId"],Ch="remoteDocumentGlobal",ty="remoteDocumentGlobalKey",Dl="targets",x1="queryTargetsIndex",ID=["canonicalId","targetId"],Ol="targetDocuments",RD=["targetId","path"],Gy="documentTargetsIndex",xD=["path","targetId"],qd="targetGlobalKey",yu="targetGlobal",Dh="collectionParents",CD=["collectionId","parent"],Nl="clientMetadata",DD="clientId",gm="bundles",OD="bundleId",ym="namedQueries",ND="name",Qy="indexConfiguration",PD="indexId",ny="collectionGroupIndex",MD="collectionGroup",Fd="indexState",kD=["indexId","uid"],C1="sequenceNumberIndex",VD=["uid","sequenceNumber"],Kd="indexEntries",LD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D1="documentKeyIndex",UD=["indexId","uid","orderedDocumentKey"],vm="documentOverlays",jD=["userId","collectionPath","documentId"],ry="collectionPathOverlayIndex",BD=["userId","collectionPath","largestBatchId"],O1="collectionGroupOverlayIndex",zD=["userId","collectionGroup","largestBatchId"],Yy="globals",qD="name",N1=[xh,Zi,Cl,uu,Dl,Qh,yu,Ol,Nl,Ch,Dh,gm,ym],FD=[...N1,vm],P1=[xh,Zi,Cl,zd,Dl,Qh,yu,Ol,Nl,Ch,Dh,gm,ym,vm],M1=P1,$y=[...M1,Qy,Fd,Kd],KD=$y,HD=[...$y,Yy];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends S1{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Vn(i,e){const t=Ye(i);return yo.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Yh(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function GD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,t,r,a,u){this.key=e,this.value=t,this.color=r??rr.RED,this.left=a??rr.EMPTY,this.right=u??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,u){return new rr(e??this.key,t??this.value,r??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const u=r(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,t,r),null):u===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,r,a,u){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wE(this.data.getIterator())}getIteratorFrom(e){return new wE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class wE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new ia([])}unionWith(e){let t=new Ut(En.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ia(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new k1("Invalid base64 string: "+u):u}}(e);return new Tn(t)}static fromUint8Array(e){const t=function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u}(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const QD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(i){if($e(!!i,39018),typeof i=="string"){let e=0;const t=QD.exec(i);if($e(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(i.seconds),nanos:rn(i.nanos)}}function rn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ha(i){return typeof i=="string"?Tn.fromBase64String(i):Tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="server_timestamp",L1="__type__",U1="__previous_value__",j1="__local_write_time__";function Xy(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[L1])===null||t===void 0?void 0:t.stringValue)===V1}function _m(i){const e=i.mapValue.fields[U1];return Xy(e)?_m(e):e}function Oh(i){const e=ca(i.mapValue.fields[j1].timestampValue);return new Qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t,r,a,u,c,d,p,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=v,this.isUsingEmulator=T}}const Hd="(default)";class wu{constructor(e,t){this.projectId=e,this.database=t||Hd}static empty(){return new wu("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__type__",z1="__max__",co={mapValue:{fields:{__type__:{stringValue:z1}}}},q1="__vector__",Nh="value",Sd={nullValue:"NULL_VALUE"};function vo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Xy(i)?4:F1(i)?9007199254740991:bm(i)?10:11:He(28295,{value:i})}function Is(i,e){if(i===e)return!0;const t=vo(i);if(t!==vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Oh(i).isEqual(Oh(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=ca(a.timestampValue),d=ca(u.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,u){return ha(a.bytesValue).isEqual(ha(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,u){return rn(a.geoPointValue.latitude)===rn(u.geoPointValue.latitude)&&rn(a.geoPointValue.longitude)===rn(u.geoPointValue.longitude)}(i,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return rn(a.integerValue)===rn(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=rn(a.doubleValue),d=rn(u.doubleValue);return c===d?Rh(c)===Rh(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return Rl(i.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return function(a,u){const c=a.mapValue.fields||{},d=u.mapValue.fields||{};if(TE(c)!==TE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Is(c[p],d[p])))return!1;return!0}(i,e);default:return He(52216,{left:i})}}function Ph(i,e){return(i.values||[]).find(t=>Is(t,e))!==void 0}function _o(i,e){if(i===e)return 0;const t=vo(i),r=vo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(i.booleanValue,e.booleanValue);case 2:return function(u,c){const d=rn(u.integerValue||u.doubleValue),p=rn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return SE(i.timestampValue,e.timestampValue);case 4:return SE(Oh(i),Oh(e));case 5:return Jg(i.stringValue,e.stringValue);case 6:return function(u,c){const d=ha(u),p=ha(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,c){const d=u.split("/"),p=c.split("/");for(let v=0;v<d.length&&v<p.length;v++){const T=at(d[v],p[v]);if(T!==0)return T}return at(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,c){const d=at(rn(u.latitude),rn(c.latitude));return d!==0?d:at(rn(u.longitude),rn(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return AE(i.arrayValue,e.arrayValue);case 10:return function(u,c){var d,p,v,T;const I=u.fields||{},C=c.fields||{},z=(d=I[Nh])===null||d===void 0?void 0:d.arrayValue,B=(p=C[Nh])===null||p===void 0?void 0:p.arrayValue,he=at(((v=z==null?void 0:z.values)===null||v===void 0?void 0:v.length)||0,((T=B==null?void 0:B.values)===null||T===void 0?void 0:T.length)||0);return he!==0?he:AE(z,B)}(i.mapValue,e.mapValue);case 11:return function(u,c){if(u===co.mapValue&&c===co.mapValue)return 0;if(u===co.mapValue)return 1;if(c===co.mapValue)return-1;const d=u.fields||{},p=Object.keys(d),v=c.fields||{},T=Object.keys(v);p.sort(),T.sort();for(let I=0;I<p.length&&I<T.length;++I){const C=Jg(p[I],T[I]);if(C!==0)return C;const z=_o(d[p[I]],v[T[I]]);if(z!==0)return z}return at(p.length,T.length)}(i.mapValue,e.mapValue);default:throw He(23264,{Pe:t})}}function SE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return at(i,e);const t=ca(i),r=ca(e),a=at(t.seconds,r.seconds);return a!==0?a:at(t.nanos,r.nanos)}function AE(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const u=_o(t[a],r[a]);if(u)return u}return at(t.length,r.length)}function Pl(i){return sy(i)}function sy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=ca(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ha(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Be.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",a=!0;for(const u of t.values||[])a?a=!1:r+=",",r+=sy(u);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",u=!0;for(const c of r)u?u=!1:a+=",",a+=`${c}:${sy(t.fields[c])}`;return a+"}"}(i.mapValue):He(61005,{value:i})}function Ad(i){switch(vo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_m(i);return e?16+Ad(e):16;case 5:return 2*i.stringValue.length;case 6:return ha(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,u)=>a+Ad(u),0)}(i.arrayValue);case 10:case 11:return function(r){let a=0;return Yh(r.fields,(u,c)=>{a+=u.length+Ad(c)}),a}(i.mapValue);default:throw He(13486,{value:i})}}function Wy(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ay(i){return!!i&&"integerValue"in i}function Mh(i){return!!i&&"arrayValue"in i}function IE(i){return!!i&&"nullValue"in i}function RE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Dg(i){return!!i&&"mapValue"in i}function bm(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[B1])===null||t===void 0?void 0:t.stringValue)===q1}function vh(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Yh(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vh(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vh(i.arrayValue.values[t]);return e}return Object.assign({},i)}function F1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===z1}const K1={mapValue:{fields:{[B1]:{stringValue:q1},[Nh]:{arrayValue:{}}}}};function $D(i){return"nullValue"in i?Sd:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Wy(wu.empty(),Be.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?bm(i)?K1:{mapValue:{}}:He(35942,{value:i})}function XD(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Wy(wu.empty(),Be.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?K1:"mapValue"in i?bm(i)?{mapValue:{}}:co:He(61959,{value:i})}function xE(i,e){const t=_o(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function CE(i,e){const t=_o(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(t)}setAll(e){let t=En.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=vh(c):a.push(d.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,a)}delete(e){const t=this.field(e.popLast());Dg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Dg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Yh(t,(a,u)=>e[a]=u);for(const a of r)delete e[a]}clone(){return new Oi(vh(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,a,u,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=u,this.data=c,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,Je.min(),Je.min(),Je.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,a){return new dn(e,1,t,Je.min(),r,a,0)}static newNoDocument(e,t){return new dn(e,2,t,Je.min(),Je.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Je.min(),Je.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){this.position=e,this.inclusive=t}}function DE(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const u=e[a],c=i.position[a];if(u.field.isKeyField()?r=Be.comparator(Be.fromName(c.referenceValue),t.key):r=_o(c,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function OE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Is(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function WD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{}class At extends H1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ZD(e,t,r):t==="array-contains"?new tO(e,r):t==="in"?new W1(e,r):t==="not-in"?new nO(e,r):t==="array-contains-any"?new rO(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new JD(e,r):new eO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_o(t,this.value)):t!==null&&vo(this.value)===vo(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends H1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ht(e,t)}matches(e){return kl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kl(i){return i.op==="and"}function oy(i){return i.op==="or"}function Zy(i){return G1(i)&&kl(i)}function G1(i){for(const e of i.filters)if(e instanceof Ht)return!1;return!0}function uy(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+Pl(i.value);if(Zy(i))return i.filters.map(e=>uy(e)).join(",");{const e=i.filters.map(t=>uy(t)).join(",");return`${i.op}(${e})`}}function Q1(i,e){return i instanceof At?function(r,a){return a instanceof At&&r.op===a.op&&r.field.isEqual(a.field)&&Is(r.value,a.value)}(i,e):i instanceof Ht?function(r,a){return a instanceof Ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((u,c,d)=>u&&Q1(c,a.filters[d]),!0):!1}(i,e):void He(19439)}function Y1(i,e){const t=i.filters.concat(e);return Ht.create(t,i.op)}function $1(i){return i instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${Pl(t.value)}`}(i):i instanceof Ht?function(t){return t.op.toString()+" {"+t.getFilters().map($1).join(" ,")+"}"}(i):"Filter"}class ZD extends At{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class JD extends At{constructor(e,t){super(e,"in",t),this.keys=X1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eO extends At{constructor(e,t){super(e,"not-in",t),this.keys=X1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function X1(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class tO extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mh(t)&&Ph(t.arrayValue,this.value)}}class W1 extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ph(this.value.arrayValue,t)}}class nO extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ph(this.value.arrayValue,t)}}class rO extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ph(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,t=null,r=[],a=[],u=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=u,this.startAt=c,this.endAt=d,this.Ie=null}}function ly(i,e=null,t=[],r=[],a=null,u=null,c=null){return new iO(i,e,t,r,a,u,c)}function Su(i){const e=Ye(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>uy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),pm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pl(r)).join(",")),e.Ie=t}return e.Ie}function $h(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!WD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Q1(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!OE(i.startAt,e.startAt)&&OE(i.endAt,e.endAt)}function Qd(i){return Be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Yd(i,e){return i.filters.filter(t=>t instanceof At&&t.field.isEqual(e))}function NE(i,e,t){let r=Sd,a=!0;for(const u of Yd(i,e)){let c=Sd,d=!0;switch(u.op){case"<":case"<=":c=$D(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,d=!1;break;case"!=":case"not-in":c=Sd}xE({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let u=0;u<i.orderBy.length;++u)if(i.orderBy[u].field.isEqual(e)){const c=t.position[u];xE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function PE(i,e,t){let r=co,a=!0;for(const u of Yd(i,e)){let c=co,d=!0;switch(u.op){case">=":case">":c=XD(u.value),d=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,d=!1;break;case"!=":case"not-in":c=co}CE({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let u=0;u<i.orderBy.length;++u)if(i.orderBy[u].field.isEqual(e)){const c=t.position[u];CE({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t=null,r=[],a=[],u=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=u,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Z1(i,e,t,r,a,u,c,d){return new Em(i,e,t,r,a,u,c,d)}function Tm(i){return new Em(i)}function ME(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function sO(i){return i.collectionGroup!==null}function _h(i){const e=Ye(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ut(En.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(d=d.add(v.field))})}),d})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Gd(u,r))}),t.has(En.keyField().canonicalString())||e.Ee.push(new Gd(En.keyField(),r))}return e.Ee}function oi(i){const e=Ye(i);return e.de||(e.de=aO(e,_h(i))),e.de}function aO(i,e){if(i.limitType==="F")return ly(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new Gd(a.field,u)});const t=i.endAt?new Ml(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ml(i.startAt.position,i.startAt.inclusive):null;return ly(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function cy(i,e,t){return new Em(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function wm(i,e){return $h(oi(i),oi(e))&&i.limitType===e.limitType}function J1(i){return`${Su(oi(i))}|lt:${i.limitType}`}function gl(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>$1(a)).join(", ")}]`),pm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>Pl(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>Pl(a)).join(",")),`Target(${r})`}(oi(i))}; limitType=${i.limitType})`}function Xh(i,e){return e.isFoundDocument()&&function(r,a){const u=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(i,e)&&function(r,a){for(const u of _h(r))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(i,e)&&function(r,a){for(const u of r.filters)if(!u.matches(a))return!1;return!0}(i,e)&&function(r,a){return!(r.startAt&&!function(c,d,p){const v=DE(c,d,p);return c.inclusive?v<=0:v<0}(r.startAt,_h(r),a)||r.endAt&&!function(c,d,p){const v=DE(c,d,p);return c.inclusive?v>=0:v>0}(r.endAt,_h(r),a))}(i,e)}function eS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function tS(i){return(e,t)=>{let r=!1;for(const a of _h(i)){const u=oO(a,e,t);if(u!==0)return u;r=r||a.field.isKeyField()}return 0}}function oO(i,e,t){const r=i.field.isKeyField()?Be.comparator(e.key,t.key):function(u,c,d){const p=c.data.field(u),v=d.data.field(u);return p!==null&&v!==null?_o(p,v):He(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return He(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,u]of r)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Yh(this.inner,(t,r)=>{for(const[a,u]of r)e(a,u)})}isEmpty(){return GD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new Zt(Be.comparator);function Ni(){return uO}const nS=new Zt(Be.comparator);function hh(...i){let e=nS;for(const t of i)e=e.insert(t.key,t);return e}function lO(i){let e=nS;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ws(){return bh()}function rS(){return bh()}function bh(){return new ma(i=>i.toString(),(i,e)=>i.isEqual(e))}const cO=new Zt(Be.comparator),hO=new Ut(Be.comparator);function Et(...i){let e=hO;for(const t of i)e=e.add(t);return e}const fO=new Ut(at);function Jy(){return fO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function mO(i){return{integerValue:""+i}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this._=void 0}}function pO(i,e,t){return i instanceof kh?function(a,u){const c={fields:{[L1]:{stringValue:V1},[j1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Xy(u)&&(u=_m(u)),u&&(c.fields[U1]=u),{mapValue:c}}(t,e):i instanceof Vl?iS(i,e):i instanceof Ll?sS(i,e):function(a,u){const c=yO(a,u),d=kE(c)+kE(a.Re);return ay(c)&&ay(a.Re)?mO(d):dO(a.serializer,d)}(i,e)}function gO(i,e,t){return i instanceof Vl?iS(i,e):i instanceof Ll?sS(i,e):t}function yO(i,e){return i instanceof Vh?function(r){return ay(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class kh extends Sm{}class Vl extends Sm{constructor(e){super(),this.elements=e}}function iS(i,e){const t=aS(e);for(const r of i.elements)t.some(a=>Is(a,r))||t.push(r);return{arrayValue:{values:t}}}class Ll extends Sm{constructor(e){super(),this.elements=e}}function sS(i,e){let t=aS(e);for(const r of i.elements)t=t.filter(a=>!Is(a,r));return{arrayValue:{values:t}}}class Vh extends Sm{constructor(e,t){super(),this.serializer=e,this.Re=t}}function kE(i){return rn(i.integerValue||i.doubleValue)}function aS(i){return Mh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t){this.field=e,this.transform=t}}function _O(i,e){return i.field.isEqual(e.field)&&function(r,a){return r instanceof Vl&&a instanceof Vl||r instanceof Ll&&a instanceof Ll?Rl(r.elements,a.elements,Is):r instanceof Vh&&a instanceof Vh?Is(r.Re,a.Re):r instanceof kh&&a instanceof kh}(i.transform,e.transform)}class bO{constructor(e,t){this.version=e,this.transformResults=t}}class ts{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Am{}function oS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ev(i.key,ts.none()):new Wh(i.key,i.data,ts.none());{const t=i.data,r=Oi.empty();let a=new Ut(En.comparator);for(let u of e.fields)if(!a.has(u)){let c=t.field(u);c===null&&u.length>1&&(u=u.popLast(),c=t.field(u)),c===null?r.delete(u):r.set(u,c),a=a.add(u)}return new Gl(i.key,r,new ia(a.toArray()),ts.none())}}function EO(i,e,t){i instanceof Wh?function(a,u,c){const d=a.value.clone(),p=LE(a.fieldTransforms,u,c.transformResults);d.setAll(p),u.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Gl?function(a,u,c){if(!Id(a.precondition,u))return void u.convertToUnknownDocument(c.version);const d=LE(a.fieldTransforms,u,c.transformResults),p=u.data;p.setAll(uS(a)),p.setAll(d),u.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Eh(i,e,t,r){return i instanceof Wh?function(u,c,d,p){if(!Id(u.precondition,c))return d;const v=u.value.clone(),T=UE(u.fieldTransforms,p,c);return v.setAll(T),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(i,e,t,r):i instanceof Gl?function(u,c,d,p){if(!Id(u.precondition,c))return d;const v=UE(u.fieldTransforms,p,c),T=c.data;return T.setAll(uS(u)),T.setAll(v),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(I=>I.field))}(i,e,t,r):function(u,c,d){return Id(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function VE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Rl(r,a,(u,c)=>_O(u,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Wh extends Am{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Gl extends Am{constructor(e,t,r,a,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function uS(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function LE(i,e,t){const r=new Map;$e(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let a=0;a<t.length;a++){const u=i[a],c=u.transform,d=e.data.field(u.field);r.set(u.field,gO(c,d,t[a]))}return r}function UE(i,e,t){const r=new Map;for(const a of i){const u=a.transform,c=t.data.field(a.field);r.set(a.field,pO(u,c,e))}return r}class ev extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lS extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&EO(u,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Eh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Eh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=rS();return this.mutations.forEach(a=>{const u=e.get(a.key),c=u.overlayedDocument;let d=this.applyToLocalView(c,u.mutatedFields);d=t.has(a.key)?null:d;const p=oS(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Je.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Et())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(t,r)=>VE(t,r))&&Rl(this.baseMutations,e.baseMutations,(t,r)=>VE(t,r))}}class nv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){$e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let a=function(){return cO}();const u=e.mutations;for(let c=0;c<u.length;c++)a=a.insert(u[c].key,r[c].version);return new nv(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,xt;function wO(i){switch(i){case Se.OK:return He(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return He(15467,{code:i})}}function cS(i){if(i===void 0)return bn("GRPC error has no .code"),Se.UNKNOWN;switch(i){case Cn.OK:return Se.OK;case Cn.CANCELLED:return Se.CANCELLED;case Cn.UNKNOWN:return Se.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return Se.INTERNAL;case Cn.UNAVAILABLE:return Se.UNAVAILABLE;case Cn.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case Cn.NOT_FOUND:return Se.NOT_FOUND;case Cn.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case Cn.ABORTED:return Se.ABORTED;case Cn.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case Cn.DATA_LOSS:return Se.DATA_LOSS;default:return He(39323,{code:i})}}(xt=Cn||(Cn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=new po([4294967295,4294967295],0);function jE(i){const e=v1().encode(i),t=new h1;return t.update(e),new Uint8Array(t.digest())}function BE(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new po([t,r],0),new po([a,u],0)]}class iv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fh(`Invalid padding: ${t}`);if(r<0)throw new fh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fh(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=po.fromNumber(this.pe)}we(e,t,r){let a=e.add(t.multiply(po.fromNumber(r)));return a.compare(SO)===1&&(a=new po([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=jE(e),[r,a]=BE(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);if(!this.be(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new iv(u,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=jE(e),[r,a]=BE(t);for(let u=0;u<this.hashCount;u++){const c=this.we(r,a,u);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r,a,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zh(Je.min(),a,new Zt(at),Ni(),Et())}}class Jh{constructor(e,t,r,a,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jh(r,t,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t,r,a){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=a}}class hS{constructor(e,t){this.targetId=e,this.Ce=t}}class fS{constructor(e,t,r=Tn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class zE{constructor(){this.Fe=0,this.Me=qE(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Et(),t=Et(),r=Et();return this.Me.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:He(38017,{changeType:u})}}),new Jh(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=qE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class AO{constructor(e){this.ze=e,this.je=new Map,this.He=Ni(),this.Je=cd(),this.Ye=cd(),this.Ze=new Zt(at)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:He(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,r=e.Ce.count,a=this._t(t);if(a){const u=a.target;if(Qd(u))if(r===0){const c=new Be(u.path);this.tt(t,c,dn.newNoDocument(c,Je.min()))}else $e(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:u=0}=t;let c,d;try{c=ha(r).toUint8Array()}catch(p){if(p instanceof k1)return Ah("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new iv(c,a,u)}catch(p){return Ah(p instanceof fh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let a=0;return r.forEach(u=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,u,null),a++)}),a}It(e){const t=new Map;this.je.forEach((u,c)=>{const d=this._t(c);if(d){if(u.current&&Qd(d.target)){const p=new Be(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,dn.newNoDocument(p,e))}u.Le&&(t.set(c,u.qe()),u.Qe())}});let r=Et();this.Ye.forEach((u,c)=>{let d=!0;c.forEachWhile(p=>{const v=this._t(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(u))}),this.He.forEach((u,c)=>c.setReadTime(e));const a=new Zh(e,t,this.Ze,this.He,r);return this.He=Ni(),this.Je=cd(),this.Ye=cd(),this.Ze=new Zt(at),a}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new zE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ut(at),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ut(at),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new zE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function cd(){return new Zt(Be.comparator)}function qE(){return new Zt(Be.comparator)}const IO={asc:"ASCENDING",desc:"DESCENDING"},RO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xO={and:"AND",or:"OR"};class CO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hy(i,e){return i.useProto3Json||pm(e)?e:{value:e}}function $d(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DO(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function OO(i,e){return $d(i,e.toTimestamp())}function Sr(i){return $e(!!i,49232),Je.fromTimestamp(function(t){const r=ca(t);return new Qn(r.seconds,r.nanos)}(i))}function dS(i,e){return fy(i,e).canonicalString()}function fy(i,e){const t=function(a){return new Qt(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function mS(i){const e=Qt.fromString(i);return $e(wS(e),10190,{key:e.toString()}),e}function Xd(i,e){return dS(i.databaseId,e.path)}function vu(i,e){const t=mS(e);if(t.get(1)!==i.databaseId.projectId)throw new Ge(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Ge(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Be(yS(t))}function pS(i,e){return dS(i.databaseId,e)}function gS(i){const e=mS(i);return e.length===4?Qt.emptyPath():yS(e)}function dy(i){return new Qt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function yS(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function FE(i,e,t){return{name:Xd(i,e),fields:t.value.mapValue.fields}}function NO(i,e,t){const r=vu(i,e.name),a=Sr(e.updateTime),u=e.createTime?Sr(e.createTime):Je.min(),c=new Oi({mapValue:{fields:e.fields}}),d=dn.newFoundDocument(r,a,u,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function PO(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:He(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(v,T){return v.useProto3Json?($e(T===void 0||typeof T=="string",58123),Tn.fromBase64String(T||"")):($e(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Tn.fromUint8Array(T||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(v){const T=v.code===void 0?Se.UNKNOWN:cS(v.code);return new Ge(T,v.message||"")}(c);t=new fS(r,a,u,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=vu(i,r.document.name),u=Sr(r.document.updateTime),c=r.document.createTime?Sr(r.document.createTime):Je.min(),d=new Oi({mapValue:{fields:r.document.fields}}),p=dn.newFoundDocument(a,u,c,d),v=r.targetIds||[],T=r.removedTargetIds||[];t=new Rd(v,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=vu(i,r.document),u=r.readTime?Sr(r.readTime):Je.min(),c=dn.newNoDocument(a,u),d=r.removedTargetIds||[];t=new Rd([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=vu(i,r.document),u=r.removedTargetIds||[];t=new Rd([],u,a,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:u}=r,c=new TO(a,u),d=r.targetId;t=new hS(d,c)}}return t}function Wd(i,e){let t;if(e instanceof Wh)t={update:FE(i,e.key,e.value)};else if(e instanceof ev)t={delete:Xd(i,e.key)};else if(e instanceof Gl)t={update:FE(i,e.key,e.data),updateMask:jO(e.fieldMask)};else{if(!(e instanceof lS))return He(16599,{ft:e.type});t={verify:Xd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,c){const d=c.transform;if(d instanceof kh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Vl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ll)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Vh)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw He(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:OO(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)}(i,e.precondition)),t}function my(i,e){const t=e.currentDocument?function(u){return u.updateTime!==void 0?ts.updateTime(Sr(u.updateTime)):u.exists!==void 0?ts.exists(u.exists):ts.none()}(e.currentDocument):ts.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let p=null;if("setToServerValue"in d)$e(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new kh;else if("appendMissingElements"in d){const T=d.appendMissingElements.values||[];p=new Vl(T)}else if("removeAllFromArray"in d){const T=d.removeAllFromArray.values||[];p=new Ll(T)}else"increment"in d?p=new Vh(c,d.increment):He(16584,{proto:d});const v=En.fromServerFormat(d.fieldPath);return new vO(v,p)}(i,a)):[];if(e.update){e.update.name;const a=vu(i,e.update.name),u=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const v=p.fieldPaths||[];return new ia(v.map(T=>En.fromServerFormat(T)))}(e.updateMask);return new Gl(a,u,c,t,r)}return new Wh(a,u,t,r)}if(e.delete){const a=vu(i,e.delete);return new ev(a,t)}if(e.verify){const a=vu(i,e.verify);return new lS(a,t)}return He(1463,{proto:e})}function MO(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map(t=>function(a,u){let c=a.updateTime?Sr(a.updateTime):Sr(u);return c.isEqual(Je.min())&&(c=Sr(u)),new bO(c,a.transformResults||[])}(t,e))):[]}function vS(i,e){return{documents:[pS(i,e.path)]}}function _S(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pS(i,a);const u=function(v){if(v.length!==0)return TS(Ht.create(v,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const c=function(v){if(v.length!==0)return v.map(T=>function(C){return{field:yl(C.field),direction:VO(C.dir)}}(T))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=hy(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:a}}function bS(i){let e=gS(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){$e(r===1,65062);const T=t.from[0];T.allDescendants?a=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(I){const C=ES(I);return C instanceof Ht&&Zy(C)?C.getFilters():[C]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(C=>function(B){return new Gd(vl(B.field),function(ue){switch(ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(C))}(t.orderBy));let d=null;t.limit&&(d=function(I){let C;return C=typeof I=="object"?I.value:I,pm(C)?null:C}(t.limit));let p=null;t.startAt&&(p=function(I){const C=!!I.before,z=I.values||[];return new Ml(z,C)}(t.startAt));let v=null;return t.endAt&&(v=function(I){const C=!I.before,z=I.values||[];return new Ml(z,C)}(t.endAt)),Z1(e,a,c,u,d,"F",p,v)}function kO(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ES(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vl(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=vl(t.unaryFilter.field);return At.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(t.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=vl(t.unaryFilter.field);return At.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}}(i):i.fieldFilter!==void 0?function(t){return At.create(vl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Ht.create(t.compositeFilter.filters.map(r=>ES(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He(1026)}}(t.compositeFilter.op))}(i):He(30097,{filter:i})}function VO(i){return IO[i]}function LO(i){return RO[i]}function UO(i){return xO[i]}function yl(i){return{fieldPath:i.canonicalString()}}function vl(i){return En.fromServerFormat(i.fieldPath)}function TS(i){return i instanceof At?function(t){if(t.op==="=="){if(RE(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(IE(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(RE(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(IE(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:LO(t.op),value:t.value}}}(i):i instanceof Ht?function(t){const r=t.getFilters().map(a=>TS(a));return r.length===1?r[0]:{compositeFilter:{op:UO(t.op),filters:r}}}(i):He(54877,{filter:i})}function jO(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,r,a,u=Je.min(),c=Je.min(),d=Tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.wt=e}}function BO(i,e){let t;if(e.document)t=NO(i.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),a=Iu(e.noDocument.readTime);t=dn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return He(56709);{const r=Be.fromSegments(e.unknownDocument.path),a=Iu(e.unknownDocument.version);t=dn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const u=new Qn(a[0],a[1]);return Je.fromTimestamp(u)}(e.readTime)),t}function KE(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(u,c){return{name:Xd(u,c.key),fields:c.data.value.mapValue.fields,updateTime:$d(u,c.version.toTimestamp()),createTime:$d(u,c.createTime.toTimestamp())}}(i.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Au(e.version)};else{if(!e.isUnknownDocument())return He(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Au(e.version)}}return r}function Zd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Au(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Iu(i){const e=new Qn(i.seconds,i.nanoseconds);return Je.fromTimestamp(e)}function cu(i,e){const t=(e.baseMutations||[]).map(u=>my(i.wt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];if(u+1<e.mutations.length&&e.mutations[u+1].transform!==void 0){const d=e.mutations[u+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(u+1,1),++u}}const r=e.mutations.map(u=>my(i.wt,u)),a=Qn.fromMillis(e.localWriteTimeMs);return new tv(e.batchId,a,t,r)}function dh(i){const e=Iu(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Iu(i.lastLimboFreeSnapshotVersion):Je.min();let r;return r=function(u){return u.documents!==void 0}(i.query)?function(u){const c=u.documents.length;return $e(c===1,1966,{count:c}),oi(Tm(gS(u.documents[0])))}(i.query):function(u){return oi(bS(u))}(i.query),new sa(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Tn.fromBase64String(i.resumeToken))}function AS(i,e){const t=Au(e.snapshotVersion),r=Au(e.lastLimboFreeSnapshotVersion);let a;a=Qd(e.target)?vS(i.wt,e.target):_S(i.wt,e.target).gt;const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Su(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function IS(i){const e=bS({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?cy(e,e.limit,"L"):e}function Og(i,e){return new rv(e.largestBatchId,my(i.wt,e.overlayMutation))}function HE(i,e){const t=e.path.lastSegment();return[i,mr(e.path.popLast()),t]}function GE(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Au(r.readTime),documentKey:mr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{getBundleMetadata(e,t){return QE(e).get(t).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:Iu(u.createTime),version:u.version}}(r)})}saveBundleMetadata(e,t){return QE(e).put(function(a){return{bundleId:a.id,createTime:Au(Sr(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return YE(e).get(t).next(r=>{if(r)return function(u){return{name:u.name,query:IS(u.bundledQuery),readTime:Iu(u.readTime)}}(r)})}saveNamedQuery(e,t){return YE(e).put(function(a){return{name:a.name,readTime:Au(Sr(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function QE(i){return Vn(i,gm)}function YE(i){return Vn(i,ym)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const r=t.uid||"";return new Im(e,r)}getOverlay(e,t){return Uc(e).get(HE(this.userId,t)).next(r=>r?Og(this.serializer,r):null)}getOverlays(e,t){const r=ws();return re.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((u,c)=>{const d=new rv(t,c);a.push(this.St(e,d))}),re.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(mr(c.getCollectionPath())));const u=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Uc(e).X(ry,d))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const a=ws(),u=mr(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Uc(e).J(ry,c).next(d=>{for(const p of d){const v=Og(this.serializer,p);a.set(v.getKey(),v)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const u=ws();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Uc(e).te({index:O1,range:d},(p,v,T)=>{const I=Og(this.serializer,v);u.size()<a||I.largestBatchId===c?(u.set(I.getKey(),I),c=I.largestBatchId):T.done()}).next(()=>u)}St(e,t){return Uc(e).put(function(a,u,c){const[d,p,v]=HE(u,c.mutation.key);return{userId:u,collectionPath:p,documentId:v,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Wd(a.wt,c.mutation)}}(this.serializer,this.userId,t))}}function Uc(i){return Vn(i,vm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{Dt(e){return Vn(e,Yy)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Tn.fromUint8Array(r):Tn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rn(e.integerValue));else if("doubleValue"in e){const r=rn(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Rh(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=ca(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ha(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?F1(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):bm(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):He(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const a of Object.keys(r))this.Nt(a,t),this.Ct(r[a],t)}qt(e,t){var r,a;const u=e.fields||{};this.Mt(t,53);const c=Nh,d=((a=(r=u[c].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Mt(t,15),t.xt(rn(d)),this.Nt(c,t),this.Ct(u[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const a of r)this.Ct(a,t)}kt(e,t){this.Mt(t,37),Be.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}hu.Wt=new hu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=255;function FO(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function $E(i){const e=64-function(r){let a=0;for(let u=0;u<8;++u){const c=FO(255&r[u]);if(a+=c,c!==8)break}return a}(i);return Math.ceil(e/8)}class KO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const a=t.codePointAt(0);this.zt(240|a>>>18),this.zt(128|63&a>>>12),this.zt(128|63&a>>>6),this.zt(128|63&a)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Yt()}en(e){const t=this.tn(e),r=$E(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}rn(e){const t=this.tn(e),r=$E(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}sn(){this._n(hl),this._n(255)}an(){this.un(hl),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===hl?(this._n(hl),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===hl?(this.un(hl),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class HO{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class GO{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class jc{constructor(){this.ln=new KO,this.hn=new HO(this.ln),this.Pn=new GO(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}In(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fu(this.indexId,this.documentKey,this.arrayValue,r)}}function ro(i,e){let t=i.indexId-e.indexId;return t!==0?t:(t=XE(i.arrayValue,e.arrayValue),t!==0?t:(t=XE(i.directionalValue,e.directionalValue),t!==0?t:Be.comparator(i.documentKey,e.documentKey)))}function XE(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.En=new Ut((t,r)=>En.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if($e(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=ey(e);if(t!==void 0&&!this.mn(t))return!1;const r=ou(e);let a=new Set,u=0,c=0;for(;u<r.length&&this.mn(r[u]);++u)a=a.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.En.size>0){const d=this.En.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=r[u];if(!this.fn(d,p)||!this.gn(this.dn[c++],p))return!1}++u}for(;u<r.length;++u){const d=r[u];if(c>=this.dn.length||!this.gn(this.dn[c++],d))return!1}return!0}pn(){if(this.Rn)return null;let e=new Ut(En.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ed(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ed(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ed(r.field,r.dir==="asc"?0:1)));return new jd(jd.UNKNOWN_ID,this.collectionId,t,Ih.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(i){var e,t;if($e(i instanceof At||i instanceof Ht,20012),i instanceof At){if(i instanceof W1){const a=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(u=>At.create(i.field,"==",u)))||[];return Ht.create(a,"or")}return i}const r=i.filters.map(a=>RS(a));return Ht.create(r,i.op)}function QO(i){if(i.getFilters().length===0)return[];const e=yy(RS(i));return $e(xS(e),7391),py(e)||gy(e)?[e]:e.getFilters()}function py(i){return i instanceof At}function gy(i){return i instanceof Ht&&Zy(i)}function xS(i){return py(i)||gy(i)||function(t){if(t instanceof Ht&&oy(t)){for(const r of t.getFilters())if(!py(r)&&!gy(r))return!1;return!0}return!1}(i)}function yy(i){if($e(i instanceof At||i instanceof Ht,34018),i instanceof At)return i;if(i.filters.length===1)return yy(i.filters[0]);const e=i.filters.map(r=>yy(r));let t=Ht.create(e,i.op);return t=Jd(t),xS(t)?t:($e(t instanceof Ht,64498),$e(kl(t),40251),$e(t.filters.length>1,57927),t.filters.reduce((r,a)=>sv(r,a)))}function sv(i,e){let t;return $e(i instanceof At||i instanceof Ht,38388),$e(e instanceof At||e instanceof Ht,25473),t=i instanceof At?e instanceof At?function(a,u){return Ht.create([a,u],"and")}(i,e):ZE(i,e):e instanceof At?ZE(e,i):function(a,u){if($e(a.filters.length>0&&u.filters.length>0,48005),kl(a)&&kl(u))return Y1(a,u.getFilters());const c=oy(a)?a:u,d=oy(a)?u:a,p=c.filters.map(v=>sv(v,d));return Ht.create(p,"or")}(i,e),Jd(t)}function ZE(i,e){if(kl(e))return Y1(e,i.getFilters());{const t=e.filters.map(r=>sv(i,r));return Ht.create(t,"or")}}function Jd(i){if($e(i instanceof At||i instanceof Ht,11850),i instanceof At)return i;const e=i.getFilters();if(e.length===1)return Jd(e[0]);if(G1(i))return i;const t=e.map(a=>Jd(a)),r=[];return t.forEach(a=>{a instanceof At?r.push(a):a instanceof Ht&&(a.op===i.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:Ht.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.yn=new av}addToCollectionParentIndex(e,t){return this.yn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ui.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class av{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ut(Qt.comparator),u=!a.has(r);return this.index[t]=a.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ut(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="IndexedDbIndexManager",hd=new Uint8Array(0);class $O{constructor(e,t){this.databaseId=t,this.wn=new av,this.bn=new ma(r=>Su(r),(r,a)=>$h(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const u={collectionId:r,parent:mr(a)};return eT(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[b1(t),""],!1,!0);return eT(e).J(a).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ts(c.parent))}return r})}addFieldIndex(e,t){const r=Bc(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete a.indexId;const u=r.add(a);if(t.indexState){const c=dl(e);return u.next(d=>{c.put(GE(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Bc(e),a=dl(e),u=fl(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Bc(e),r=fl(e),a=dl(e);return t.X().next(()=>r.X()).next(()=>a.X())}createTargetIndexes(e,t){return re.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const u=new WE(r).pn();if(u!=null)return this.addFieldIndex(e,u)}}))}getDocumentsMatchingTarget(e,t){const r=fl(e);let a=!0;const u=new Map;return re.forEach(this.Sn(t),c=>this.Dn(e,c).next(d=>{a&&(a=!!d),u.set(c,d)})).next(()=>{if(a){let c=Et();const d=[];return re.forEach(u,(p,v)=>{Ae(JE,`Using index ${function(oe){return`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`}(p)} to execute ${Su(t)}`);const T=function(oe,Re){const xe=ey(Re);if(xe===void 0)return null;for(const Me of Yd(oe,xe.fieldPath))switch(Me.op){case"array-contains-any":return Me.value.arrayValue.values||[];case"array-contains":return[Me.value]}return null}(v,p),I=function(oe,Re){const xe=new Map;for(const Me of ou(Re))for(const L of Yd(oe,Me.fieldPath))switch(L.op){case"==":case"in":xe.set(Me.fieldPath.canonicalString(),L.value);break;case"not-in":case"!=":return xe.set(Me.fieldPath.canonicalString(),L.value),Array.from(xe.values())}return null}(v,p),C=function(oe,Re){const xe=[];let Me=!0;for(const L of ou(Re)){const N=L.kind===0?NE(oe,L.fieldPath,oe.startAt):PE(oe,L.fieldPath,oe.startAt);xe.push(N.value),Me&&(Me=N.inclusive)}return new Ml(xe,Me)}(v,p),z=function(oe,Re){const xe=[];let Me=!0;for(const L of ou(Re)){const N=L.kind===0?PE(oe,L.fieldPath,oe.endAt):NE(oe,L.fieldPath,oe.endAt);xe.push(N.value),Me&&(Me=N.inclusive)}return new Ml(xe,Me)}(v,p),B=this.vn(p,v,C),he=this.vn(p,v,z),ue=this.Cn(p,v,I),ve=this.Fn(p.indexId,T,B,C.inclusive,he,z.inclusive,ue);return re.forEach(ve,pe=>r.Z(pe,t.limit).next(oe=>{oe.forEach(Re=>{const xe=Be.fromSegments(Re.documentKey);c.has(xe)||(c=c.add(xe),d.push(xe))})}))}).next(()=>d)}return re.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=QO(Ht.create(e.filters,"and")).map(r=>ly(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,a,u,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,u.length),v=p/(t!=null?t.length:1),T=[];for(let I=0;I<p;++I){const C=t?this.Mn(t[I/v]):hd,z=this.xn(e,C,r[I%v],a),B=this.On(e,C,u[I%v],c),he=d.map(ue=>this.xn(e,C,ue,!0));T.push(...this.createRange(z,B,he))}return T}xn(e,t,r,a){const u=new fu(e,Be.empty(),t,r);return a?u:u.In()}On(e,t,r,a){const u=new fu(e,Be.empty(),t,r);return a?u.In():u}Dn(e,t){const r=new WE(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(u=>{let c=null;for(const d of u)r.Vn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.Sn(t);return re.forEach(a,u=>this.Dn(e,u).next(c=>{c?r!==0&&c.fields.length<function(p){let v=new Ut(En.comparator),T=!1;for(const I of p.filters)for(const C of I.getFlattenedFilters())C.field.isKeyField()||(C.op==="array-contains"||C.op==="array-contains-any"?T=!0:v=v.add(C.field));for(const I of p.orderBy)I.field.isKeyField()||(v=v.add(I.field));return v.size+(T?1:0)}(u)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}Nn(e,t){const r=new jc;for(const a of ou(e)){const u=t.data.field(a.fieldPath);if(u==null)return null;const c=r.Tn(a.kind);hu.Wt.vt(u,c)}return r.cn()}Mn(e){const t=new jc;return hu.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new jc;return hu.Wt.vt(Wy(this.databaseId,t),r.Tn(function(u){const c=ou(u);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let a=[];a.push(new jc);let u=0;for(const c of ou(e)){const d=r[u++];for(const p of a)if(this.Ln(t,c.fieldPath)&&Mh(d))a=this.kn(a,c,d);else{const v=p.Tn(c.kind);hu.Wt.vt(d,v)}}return this.qn(a)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const a=[...e],u=[];for(const c of r.arrayValue.values||[])for(const d of a){const p=new jc;p.seed(d.cn()),hu.Wt.vt(c,p.Tn(t.kind)),u.push(p)}return u}Ln(e,t){return!!e.filters.find(r=>r instanceof At&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Bc(e),a=dl(e);return(t?r.J(ny,IDBKeyRange.bound(t,t)):r.J()).next(u=>{const c=[];return re.forEach(u,d=>a.get([d.indexId,this.uid]).next(p=>{c.push(function(T,I){const C=I?new Ih(I.sequenceNumber,new ui(Iu(I.readTime),new Be(Ts(I.documentKey)),I.largestBatchId)):Ih.empty(),z=T.fields.map(([B,he])=>new Ed(En.fromServerFormat(B),he));return new jd(T.indexId,T.collectionGroup,z,C)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const u=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return u!==0?u:at(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Bc(e),u=dl(e);return this.Qn(e).next(c=>a.J(ny,IDBKeyRange.bound(t,t)).next(d=>re.forEach(d,p=>u.put(GE(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(a,u)=>{const c=r.get(a.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),re.forEach(d,p=>this.$n(e,a,p).next(v=>{const T=this.Un(u,p);return v.isEqual(T)?re.resolve():this.Kn(e,u,p,v,T)}))))})}Wn(e,t,r,a){return fl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,a){return fl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const a=fl(e);let u=new Ut(ro);return a.te({index:D1,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(c,d)=>{u=u.add(new fu(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>u)}Un(e,t){let r=new Ut(ro);const a=this.Nn(t,e);if(a==null)return r;const u=ey(t);if(u!=null){const c=e.data.field(u.fieldPath);if(Mh(c))for(const d of c.arrayValue.values||[])r=r.add(new fu(t.indexId,e.key,this.Mn(d),a))}else r=r.add(new fu(t.indexId,e.key,hd,a));return r}Kn(e,t,r,a,u){Ae(JE,"Updating index entries for document '%s'",t.key);const c=[];return function(p,v,T,I,C){const z=p.getIterator(),B=v.getIterator();let he=cl(z),ue=cl(B);for(;he||ue;){let ve=!1,pe=!1;if(he&&ue){const oe=T(he,ue);oe<0?pe=!0:oe>0&&(ve=!0)}else he!=null?pe=!0:ve=!0;ve?(I(ue),ue=cl(B)):pe?(C(he),he=cl(z)):(he=cl(z),ue=cl(B))}}(a,u,ro,d=>{c.push(this.Wn(e,t,r,d))},d=>{c.push(this.Gn(e,t,r,d))}),re.waitFor(c)}Qn(e){let t=1;return dl(e).te({index:C1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,u)=>{u.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>ro(c,d)).filter((c,d,p)=>!d||ro(c,p[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=ro(c,e),p=ro(c,t);if(d===0)a[0]=e.In();else if(d>0&&p<0)a.push(c),a.push(c.In());else if(p>0)break}a.push(t);const u=[];for(let c=0;c<a.length;c+=2){if(this.zn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,hd,[]],p=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,hd,[]];u.push(IDBKeyRange.bound(d,p))}return u}zn(e,t){return ro(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(tT)}getMinOffset(e,t){return re.mapArray(this.Sn(t),r=>this.Dn(e,r).next(a=>a||He(44426))).next(tT)}}function eT(i){return Vn(i,Dh)}function fl(i){return Vn(i,Kd)}function Bc(i){return Vn(i,Qy)}function dl(i){return Vn(i,Fd)}function tT(i){$e(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Ky(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ui(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CS=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(i,e,t){const r=i.store(Zi),a=i.store(Cl),u=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:c},(T,I,C)=>(d++,C.delete()));u.push(p.next(()=>{$e(d===1,47070,{batchId:t.batchId})}));const v=[];for(const T of t.mutations){const I=I1(e,T.key.path,t.batchId);u.push(a.delete(I)),v.push(T.key)}return re.waitFor(u).next(()=>v)}function em(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw He(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(CS,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class Rm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.jn={}}static bt(e,t,r,a){$e(e.uid!=="",64387);const u=e.isAuthenticated()?e.uid:"";return new Rm(u,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return io(e).te({index:mu,range:r},(a,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const u=_l(e),c=io(e);return c.add({}).next(d=>{$e(typeof d=="number",49019);const p=new tv(d,t,r,a),v=function(z,B,he){const ue=he.baseMutations.map(pe=>Wd(z.wt,pe)),ve=he.mutations.map(pe=>Wd(z.wt,pe));return{userId:B,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:ue,mutations:ve}}(this.serializer,this.userId,p),T=[];let I=new Ut((C,z)=>at(C.canonicalString(),z.canonicalString()));for(const C of a){const z=I1(this.userId,C.key.path,d);I=I.add(C.key.path.popLast()),T.push(c.put(v)),T.push(u.put(z,TD))}return I.forEach(C=>{T.push(this.indexManager.addToCollectionParentIndex(e,C))}),e.addOnCommittedListener(()=>{this.jn[d]=p.keys()}),re.waitFor(T).next(()=>p)})}lookupMutationBatch(e,t){return io(e).get(t).next(r=>r?($e(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),cu(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?re.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.jn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return io(e).te({index:mu,range:a},(c,d,p)=>{d.userId===this.userId&&($e(d.batchId>=r,47524,{Jn:r}),u=cu(this.serializer,d)),p.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=gu;return io(e).te({index:mu,range:t,reverse:!0},(a,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,gu],[this.userId,Number.POSITIVE_INFINITY]);return io(e).J(mu,t).next(r=>r.map(a=>cu(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Td(this.userId,t.path),a=IDBKeyRange.lowerBound(r),u=[];return _l(e).te({range:a},(c,d,p)=>{const[v,T,I]=c,C=Ts(T);if(v===this.userId&&t.path.isEqual(C))return io(e).get(I).next(z=>{if(!z)throw He(61480,{Yn:c,batchId:I});$e(z.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:z.userId,batchId:I}),u.push(cu(this.serializer,z))});p.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(at);const a=[];return t.forEach(u=>{const c=Td(this.userId,u.path),d=IDBKeyRange.lowerBound(c),p=_l(e).te({range:d},(v,T,I)=>{const[C,z,B]=v,he=Ts(z);C===this.userId&&u.path.isEqual(he)?r=r.add(B):I.done()});a.push(p)}),re.waitFor(a).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,u=Td(this.userId,r),c=IDBKeyRange.lowerBound(u);let d=new Ut(at);return _l(e).te({range:c},(p,v,T)=>{const[I,C,z]=p,B=Ts(C);I===this.userId&&r.isPrefixOf(B)?B.length===a&&(d=d.add(z)):T.done()}).next(()=>this.Zn(e,d))}Zn(e,t){const r=[],a=[];return t.forEach(u=>{a.push(io(e).get(u).next(c=>{if(c===null)throw He(35274,{batchId:u});$e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(cu(this.serializer,c))}))}),re.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return DS(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),re.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return _l(e).te({range:r},(u,c,d)=>{if(u[0]===this.userId){const p=Ts(u[1]);a.push(p)}else d.done()}).next(()=>{$e(a.length===0,56720,{er:a.map(u=>u.canonicalString())})})})}containsKey(e,t){return OS(e,this.userId,t)}tr(e){return NS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:gu,lastStreamToken:""})}}function OS(i,e,t){const r=Td(e,t.path),a=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return _l(i).te({range:u,ee:!0},(d,p,v)=>{const[T,I,C]=d;T===e&&I===a&&(c=!0),v.done()}).next(()=>c)}function io(i){return Vn(i,Zi)}function _l(i){return Vn(i,Cl)}function NS(i){return Vn(i,xh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ru(0)}static ir(){return new Ru(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new Ru(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>Je.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this._r(e,a)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ml(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>($e(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let a=0;const u=[];return ml(e).te((c,d)=>{const p=dh(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(a++,u.push(this.removeTargetData(e,p)))}).next(()=>re.waitFor(u)).next(()=>a)}forEachTarget(e,t){return ml(e).te((r,a)=>{const u=dh(a);t(u)})}sr(e){return rT(e).get(qd).next(t=>($e(t!==null,2888),t))}_r(e,t){return rT(e).put(qd,t)}ar(e,t){return ml(e).put(AS(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Su(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ml(e).te({range:a,index:x1},(c,d,p)=>{const v=dh(d);$h(t,v.target)&&(u=v,p.done())}).next(()=>u)}addMatchingKeys(e,t,r){const a=[],u=lo(e);return t.forEach(c=>{const d=mr(c.path);a.push(u.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),re.waitFor(a)}removeMatchingKeys(e,t,r){const a=lo(e);return re.forEach(t,u=>{const c=mr(u.path);return re.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=lo(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=lo(e);let u=Et();return a.te({range:r,ee:!0},(c,d,p)=>{const v=Ts(c[1]),T=new Be(v);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=mr(t.path),a=IDBKeyRange.bound([r],[b1(r)],!1,!0);let u=0;return lo(e).te({index:Gy,ee:!0,range:a},([c,d],p,v)=>{c!==0&&(u++,v.done())}).next(()=>u>0)}Rt(e,t){return ml(e).get(t).next(r=>r?dh(r):null)}}function ml(i){return Vn(i,Dl)}function rT(i){return Vn(i,yu)}function lo(i){return Vn(i,Ol)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="LruGarbageCollector",PS=1048576;function sT([i,e],[t,r]){const a=at(i,t);return a===0?at(e,r):a}class WO{constructor(e){this.cr=e,this.buffer=new Ut(sT),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Ae(iT,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){So(t)?Ae(iT,"Ignoring IndexedDB error during garbage collection: ",t):await wo(t)}await this.Ir(3e5)})}}class ZO{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(jr.le);const r=new WO(t);return this.Er.forEachTarget(e,a=>r.Pr(a.sequenceNumber)).next(()=>this.Er.Ar(e,a=>r.Pr(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(nT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nT):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,a,u,c,d,p,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,c=Date.now(),this.nthSequenceNumber(e,a))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,t))).next(I=>(u=I,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(v=Date.now(),pl()<=St.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${u} targets in `+(p-d)+`ms
	Removed ${I} documents in `+(v-p)+`ms
Total Duration: ${v-T}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:I})))}}function kS(i,e){return new ZO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t){this.db=e,this.garbageCollector=kS(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,a)=>t(a))}addReference(e,t,r){return fd(e,r)}removeReference(e,t,r){return fd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fd(e,t)}gr(e,t){return function(a,u){let c=!1;return NS(a).ne(d=>OS(a,d,u).next(p=>(p&&(c=!0),re.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let u=0;return this.mr(e,(c,d)=>{if(d<=t){const p=this.gr(e,c).next(v=>{if(!v)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Je.min()),lo(e).delete(function(I){return[0,mr(I.path)]}(c))))});a.push(p)}}).next(()=>re.waitFor(a)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fd(e,t)}mr(e,t){const r=lo(e);let a,u=jr.le;return r.te({index:Gy},([c,d],{path:p,sequenceNumber:v})=>{c===0?(u!==jr.le&&t(new Be(Ts(a)),u),u=v,a=p):u=jr.le}).next(()=>{u!==jr.le&&t(new Be(Ts(a)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fd(i,e){return lo(i).put(function(r,a){return{targetId:0,path:mr(r.path),sequenceNumber:a}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.changes=new ma(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wo(e).put(r)}removeEntry(e,t,r){return Wo(e).delete(function(u,c){const d=u.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Zd(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return Wo(e).te({index:wd,range:IDBKeyRange.only(zc(t))},(a,u)=>{r=this.yr(t,u)}).next(()=>r)}wr(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return Wo(e).te({index:wd,range:IDBKeyRange.only(zc(t))},(a,u)=>{r={document:this.yr(t,u),size:em(u)}}).next(()=>r)}getEntries(e,t){let r=Ni();return this.br(e,t,(a,u)=>{const c=this.yr(a,u);r=r.insert(a,c)}).next(()=>r)}Sr(e,t){let r=Ni(),a=new Zt(Be.comparator);return this.br(e,t,(u,c)=>{const d=this.yr(u,c);r=r.insert(u,d),a=a.insert(u,em(c))}).next(()=>({documents:r,Dr:a}))}br(e,t,r){if(t.isEmpty())return re.resolve();let a=new Ut(uT);t.forEach(p=>a=a.add(p));const u=IDBKeyRange.bound(zc(a.first()),zc(a.last())),c=a.getIterator();let d=c.getNext();return Wo(e).te({index:wd,range:u},(p,v,T)=>{const I=Be.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&uT(d,I)<0;)r(d,null),d=c.getNext();d&&d.isEqual(I)&&(r(d,v),d=c.hasNext()?c.getNext():null),d?T.H(zc(d)):T.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,u){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Zd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).J(IDBKeyRange.bound(d,p,!0)).next(v=>{u==null||u.incrementDocumentReadCount(v.length);let T=Ni();for(const I of v){const C=this.yr(Be.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);C.isFoundDocument()&&(Xh(t,C)||a.has(C.key))&&(T=T.insert(C.key,C))}return T})}getAllFromCollectionGroup(e,t,r,a){let u=Ni();const c=oT(t,r),d=oT(t,ui.max());return Wo(e).te({index:R1,range:IDBKeyRange.bound(c,d,!0)},(p,v,T)=>{const I=this.yr(Be.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);u=u.insert(I.key,I),u.size===a&&T.done()}).next(()=>u)}newChangeBuffer(e){return new tN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aT(e).get(ty).next(t=>($e(!!t,20021),t))}pr(e,t){return aT(e).put(ty,t)}yr(e,t){if(t){const r=BO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Je.min())))return r}return dn.newInvalidDocument(e)}}function LS(i){return new eN(i)}class tN extends VS{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new ma(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Ut((u,c)=>at(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const d=this.Cr.get(u);if(t.push(this.vr.removeEntry(e,u,d.readTime)),c.isValidDocument()){const p=KE(this.vr.serializer,c);a=a.add(u.path.popLast());const v=em(p);r+=v-d.size,t.push(this.vr.addEntry(e,u,p))}else if(r-=d.size,this.trackRemovals){const p=KE(this.vr.serializer,c.convertToNoDocument(Je.min()));t.push(this.vr.addEntry(e,u,p))}}),a.forEach(u=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.vr.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:a})=>(a.forEach((u,c)=>{this.Cr.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function aT(i){return Vn(i,Ch)}function Wo(i){return Vn(i,zd)}function zc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oT(i,e){const t=e.documentKey.path.toArray();return[i,Zd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uT(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(a=at(t[u],r[u]),a)return a;return a=at(t.length,r.length),a||(a=at(t[t.length-2],r[r.length-2]),a||at(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&Eh(r.mutation,a,ia.empty(),Qn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Et()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Et()){const a=ws();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(u=>{let c=hh();return u.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ws();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Et()))}populateOverlays(e,t,r){const a=[];return r.forEach(u=>{t.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let u=Ni();const c=bh(),d=function(){return bh()}();return t.forEach((p,v)=>{const T=r.get(v.key);a.has(v.key)&&(T===void 0||T.mutation instanceof Gl)?u=u.insert(v.key,v):T!==void 0?(c.set(v.key,T.mutation.getFieldMask()),Eh(T.mutation,v,T.mutation.getFieldMask(),Qn.now())):c.set(v.key,ia.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((v,T)=>c.set(v,T)),t.forEach((v,T)=>{var I;return d.set(v,new nN(T,(I=c.get(v))!==null&&I!==void 0?I:null))}),d))}recalculateAndSaveOverlays(e,t){const r=bh();let a=new Zt((c,d)=>c-d),u=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const v=t.get(p);if(v===null)return;let T=r.get(p)||ia.empty();T=d.applyToLocalView(v,T),r.set(p,T);const I=(a.get(d.batchId)||Et()).add(p);a=a.insert(d.batchId,I)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,T=p.value,I=rS();T.forEach(C=>{if(!u.has(C)){const z=oS(t.get(C),r.get(C));z!==null&&I.set(C,z),u=u.add(C)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,I))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return Be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-u.size):re.resolve(ws());let d=xl,p=u;return c.next(v=>re.forEach(v,(T,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),u.get(T)?re.resolve():this.remoteDocumentCache.getEntry(e,T).next(C=>{p=p.insert(T,C)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,p,v,Et())).next(T=>({batchId:d,changes:lO(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let a=hh();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const u=t.collectionGroup;let c=hh();return this.indexManager.getCollectionParents(e,u).next(d=>re.forEach(d,p=>{const v=function(I,C){return new Em(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,r,a).next(T=>{T.forEach((I,C)=>{c=c.insert(I,C)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,a))).next(c=>{u.forEach((p,v)=>{const T=v.getKey();c.get(T)===null&&(c=c.insert(T,dn.newInvalidDocument(T)))});let d=hh();return c.forEach((p,v)=>{const T=u.get(p);T!==void 0&&Eh(T.mutation,v,ia.empty(),Qn.now()),Xh(t,v)&&(d=d.insert(p,v))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return re.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Sr(a.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(a){return{name:a.name,query:IS(a.bundledQuery),readTime:Sr(a.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.overlays=new Zt(Be.comparator),this.Or=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ws();return re.forEach(t,a=>this.getOverlay(e,a).next(u=>{u!==null&&r.set(a,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,u)=>{this.St(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Or.get(r);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Or.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const a=ws(),u=t.length+1,c=new Be(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&p.largestBatchId>r&&a.set(p.getKey(),p)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let u=new Zt((v,T)=>v-T);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=u.get(v.largestBatchId);T===null&&(T=ws(),u=u.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const d=ws(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,T)=>d.set(v,T)),!(d.size()>=a)););return re.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Or.get(a.largestBatchId).delete(r.key);this.Or.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new rv(t,r));let u=this.Or.get(t);u===void 0&&(u=Et(),this.Or.set(t,u)),this.Or.set(t,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.Nr=new Ut(Gn.Br),this.Lr=new Ut(Gn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Gn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Gn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Be(new Qt([])),r=new Gn(t,e),a=new Gn(t,e+1),u=[];return this.Lr.forEachInRange([r,a],c=>{this.Qr(c),u.push(c.key)}),u}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Be(new Qt([])),r=new Gn(t,e),a=new Gn(t,e+1);let u=Et();return this.Lr.forEachInRange([r,a],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Gn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Be.comparator(e.key,t.key)||at(e.Gr,t.Gr)}static kr(e,t){return at(e.Gr,t.Gr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Ut(Gn.Br)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const u=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new tv(u,t,r,a);this.mutationQueue.push(c);for(const d of a)this.zr=this.zr.add(new Gn(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Hr(r),u=a<0?0:a;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?gu:this.Jn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gn(t,0),a=new Gn(t,Number.POSITIVE_INFINITY),u=[];return this.zr.forEachInRange([r,a],c=>{const d=this.jr(c.Gr);u.push(d)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(at);return t.forEach(a=>{const u=new Gn(a,0),c=new Gn(a,Number.POSITIVE_INFINITY);this.zr.forEachInRange([u,c],d=>{r=r.add(d.Gr)})}),re.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const c=new Gn(new Be(u),0);let d=new Ut(at);return this.zr.forEachWhile(p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===a&&(d=d.add(p.Gr)),!0)},c),re.resolve(this.Jr(d))}Jr(e){const t=[];return e.forEach(r=>{const a=this.jr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){$e(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return re.forEach(t.mutations,a=>{const u=new Gn(a.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Gn(t,0),a=this.zr.firstAfterOrEqual(r);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.Zr=e,this.docs=function(){return new Zt(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),u=a?a.size:0,c=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach(a=>{const u=this.docs.get(a);r=r.insert(a,u?u.document.mutableCopy():dn.newInvalidDocument(a))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let u=Ni();const c=t.path,d=new Be(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:v,value:{document:T}}=p.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||Ky(T1(T),r)<=0||(a.has(T.key)||Xh(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,a){He(9500)}Xr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uN(this)}getSize(e){return re.resolve(this.size)}}class uN extends VS{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.vr.addEntry(e,a)):this.vr.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.persistence=e,this.ei=new ma(t=>Su(t),$h),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.ti=0,this.ni=new ov,this.targetCount=0,this.ri=Ru.rr()}forEachTarget(e,t){return this.ei.forEach((r,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),re.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ru(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.ar(t),re.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let a=0;const u=[];return this.ei.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ei.delete(c),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),re.waitFor(u).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const a=this.persistence.referenceDelegate,u=[];return a&&t.forEach(c=>{u.push(a.markPotentiallyOrphaned(e,c))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){this.ii={},this.overlays={},this.si=new jr(0),this.oi=!1,this.oi=!0,this._i=new sN,this.referenceDelegate=e(this),this.ai=new lN(this),this.indexManager=new YO,this.remoteDocumentCache=function(a){return new oN(a)}(r=>this.referenceDelegate.ui(r)),this.serializer=new SS(t),this.ci=new rN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new aN(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const a=new cN(this.si.next());return this.referenceDelegate.li(),r(a).next(u=>this.referenceDelegate.hi(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Pi(e,t){return re.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class cN extends S1{constructor(e){super(),this.currentSequenceNumber=e}}class xm{constructor(e){this.persistence=e,this.Ti=new ov,this.Ii=null}static Ei(e){return new xm(e)}get di(){if(this.Ii)return this.Ii;throw He(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(a=>this.di.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(u=>this.di.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,r=>{const a=Be.fromPath(r);return this.Ai(e,a).next(u=>{u||t.removeEntry(a,Je.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return re.or([()=>re.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class tm{constructor(e,t){this.persistence=e,this.Ri=new ma(r=>mr(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=kS(this,t)}static Ei(e,t){return new tm(e,t)}li(){}hi(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return re.forEach(this.Ri,(r,a)=>this.gr(e,r,a).next(u=>u?re.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Xr(e,c=>this.gr(e,c,t).next(d=>{d||(r++,u.removeEntry(c,Je.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),re.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ad(e.data.value)),t}gr(e,t,r){return re.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.Ri.get(t);return re.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.serializer=e}q(e,t,r,a){const u=new mm("createOrUpgrade",t);r<1&&a>=1&&(function(p){p.createObjectStore(Qh)}(e),function(p){p.createObjectStore(xh,{keyPath:ED}),p.createObjectStore(Zi,{keyPath:bE,autoIncrement:!0}).createIndex(mu,EE,{unique:!0}),p.createObjectStore(Cl)}(e),lT(e),function(p){p.createObjectStore(uu)}(e));let c=re.resolve();return r<3&&a>=3&&(r!==0&&(function(p){p.deleteObjectStore(Ol),p.deleteObjectStore(Dl),p.deleteObjectStore(yu)}(e),lT(e)),c=c.next(()=>function(p){const v=p.store(yu),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Je.min().toTimestamp(),targetCount:0};return v.put(qd,T)}(u))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(p,v){return v.store(Zi).J().next(I=>{p.deleteObjectStore(Zi),p.createObjectStore(Zi,{keyPath:bE,autoIncrement:!0}).createIndex(mu,EE,{unique:!0});const C=v.store(Zi),z=I.map(B=>C.put(B));return re.waitFor(z)})}(e,u))),c=c.next(()=>{(function(p){p.createObjectStore(Nl,{keyPath:DD})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.Vi(u))),r<6&&a>=6&&(c=c.next(()=>(function(p){p.createObjectStore(Ch)}(e),this.mi(u)))),r<7&&a>=7&&(c=c.next(()=>this.fi(u))),r<8&&a>=8&&(c=c.next(()=>this.gi(e,u))),r<9&&a>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.pi(u))),r<11&&a>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(gm,{keyPath:OD})})(e),function(p){p.createObjectStore(ym,{keyPath:ND})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(p){const v=p.createObjectStore(vm,{keyPath:jD});v.createIndex(ry,BD,{unique:!1}),v.createIndex(O1,zD,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(p){const v=p.createObjectStore(zd,{keyPath:wD});v.createIndex(wd,SD),v.createIndex(R1,AD)}(e)).next(()=>this.yi(e,u)).next(()=>e.deleteObjectStore(uu))),r<14&&a>=14&&(c=c.next(()=>this.wi(e,u))),r<15&&a>=15&&(c=c.next(()=>function(p){p.createObjectStore(Qy,{keyPath:PD,autoIncrement:!0}).createIndex(ny,MD,{unique:!1}),p.createObjectStore(Fd,{keyPath:kD}).createIndex(C1,VD,{unique:!1}),p.createObjectStore(Kd,{keyPath:LD}).createIndex(D1,UD,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(Fd).clear()}).next(()=>{t.objectStore(Kd).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(Yy,{keyPath:qD})})(e)})),c}mi(e){let t=0;return e.store(uu).te((r,a)=>{t+=em(a)}).next(()=>{const r={byteSize:t};return e.store(Ch).put(ty,r)})}Vi(e){const t=e.store(xh),r=e.store(Zi);return t.J().next(a=>re.forEach(a,u=>{const c=IDBKeyRange.bound([u.userId,gu],[u.userId,u.lastAcknowledgedBatchId]);return r.J(mu,c).next(d=>re.forEach(d,p=>{$e(p.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const v=cu(this.serializer,p);return DS(e,u.userId,v).next(()=>{})}))}))}fi(e){const t=e.store(Ol),r=e.store(uu);return e.store(yu).get(qd).next(a=>{const u=[];return r.te((c,d)=>{const p=new Qt(c),v=function(I){return[0,mr(I)]}(p);u.push(t.get(v).next(T=>T?re.resolve():(I=>t.put({targetId:0,path:mr(I),sequenceNumber:a.highestListenSequenceNumber}))(p)))}).next(()=>re.waitFor(u))})}gi(e,t){e.createObjectStore(Dh,{keyPath:CD});const r=t.store(Dh),a=new av,u=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:mr(p)})}};return t.store(uu).te({ee:!0},(c,d)=>{const p=new Qt(c);return u(p.popLast())}).next(()=>t.store(Cl).te({ee:!0},([c,d,p],v)=>{const T=Ts(d);return u(T.popLast())}))}pi(e){const t=e.store(Dl);return t.te((r,a)=>{const u=dh(a),c=AS(this.serializer,u);return t.put(c)})}yi(e,t){const r=t.store(uu),a=[];return r.te((u,c)=>{const d=t.store(zd),p=function(I){return I.document?new Be(Qt.fromString(I.document.name).popFirst(5)):I.noDocument?Be.fromSegments(I.noDocument.path):I.unknownDocument?Be.fromSegments(I.unknownDocument.path):He(36783)}(c).path.toArray(),v={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(v))}).next(()=>re.waitFor(a))}wi(e,t){const r=t.store(Zi),a=LS(this.serializer),u=new uv(xm.Ei,this.serializer.wt);return r.J().next(c=>{const d=new Map;return c.forEach(p=>{var v;let T=(v=d.get(p.userId))!==null&&v!==void 0?v:Et();cu(this.serializer,p).keys().forEach(I=>T=T.add(I)),d.set(p.userId,T)}),re.forEach(d,(p,v)=>{const T=new fr(v),I=Im.bt(this.serializer,T),C=u.getIndexManager(T),z=Rm.bt(T,this.serializer,C,u.referenceDelegate);return new US(a,z,I,C).recalculateAndSaveOverlaysForDocumentKeys(new iy(t,jr.le),p).next()})})}}function lT(i){i.createObjectStore(Ol,{keyPath:RD}).createIndex(Gy,xD,{unique:!0}),i.createObjectStore(Dl,{keyPath:"targetId"}).createIndex(x1,ID,{unique:!0}),i.createObjectStore(yu)}const so="IndexedDbPersistence",Ng=18e5,Pg=5e3,Mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fN="main";class lv{constructor(e,t,r,a,u,c,d,p,v,T,I=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=u,this.window=c,this.document=d,this.Si=v,this.Di=T,this.Ci=I,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=C=>Promise.resolve(),!lv.C())throw new Ge(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JO(this,a),this.Bi=t+fN,this.serializer=new SS(p),this.Li=new yo(this.Bi,this.Ci,new hN(this.serializer)),this._i=new qO,this.ai=new XO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LS(this.serializer),this.ci=new zO,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,T===!1&&bn(so,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(Se.FAILED_PRECONDITION,Mg);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new jr(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(async()=>{this.started&&await this.qi()}))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(So(e))return Ae(so,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae(so,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return qc(e).get(ll).next(t=>re.resolve(this.Hi(t)))}Ji(e){return dd(e).delete(this.clientId)}async Yi(){if(this.isPrimary&&!this.Zi(this.Oi,Ng)){this.Oi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Vn(t,Nl);return r.J().next(a=>{const u=this.Xi(a,Ng),c=a.filter(d=>u.indexOf(d)===-1);return re.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.ki)for(const t of e)this.ki.removeItem(this.es(t.clientId))}}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?re.resolve(!0):qc(e).get(ll).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,Pg)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new Ge(Se.FAILED_PRECONDITION,Mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||dd(e).J().next(r=>this.Xi(r,Pg).find(a=>{if(this.clientId!==a.clientId){const u=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(u||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Ae(so,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),await this.Li.runTransaction("shutdown","readwrite",[Qh,Nl],e=>{const t=new iy(e,jr.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>dd(e).J().next(t=>this.Xi(t,Ng).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return Rm.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $O(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Im.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){Ae(so,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",u=function(p){return p===17?HD:p===16?KD:p===15?$y:p===14?M1:p===13?P1:p===12?FD:p===11?N1:void He(60245)}(this.Ci);let c;return this.Li.runTransaction(e,a,u,d=>(c=new iy(d,this.si?this.si.next():jr.le),t==="readwrite-primary"?this.Wi(c).next(p=>!!p||this.Gi(c)).next(p=>{if(!p)throw bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new Ge(Se.FAILED_PRECONDITION,w1);return r(c)}).next(p=>this.ji(c).next(()=>p)):this.cs(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}cs(e){return qc(e).get(ll).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,Pg)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(Se.FAILED_PRECONDITION,Mg)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qc(e).put(ll,t)}static C(){return yo.C()}zi(e){const t=qc(e);return t.get(ll).next(r=>this.Hi(r)?(Ae(so,"Releasing primary lease."),t.delete(ll)):re.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;xw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return Ae(so,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bn(so,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){bn("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qc(i){return Vn(i,Qh)}function dd(i){return Vn(i,Nl)}function jS(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=a}static Ps(e,t){let r=Et(),a=Et();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new cv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return xw()?8:A1(kn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,a){const u={result:null};return this.Rs(e,t).next(c=>{u.result=c}).next(()=>{if(!u.result)return this.Vs(e,t,a,r).next(c=>{u.result=c})}).next(()=>{if(u.result)return;const c=new dN;return this.fs(e,t,c).next(d=>{if(u.result=d,this.Is)return this.gs(e,t,c,d.size)})}).next(()=>u.result)}gs(e,t,r,a){return r.documentReadCount<this.Es?(pl()<=St.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),re.resolve()):(pl()<=St.DEBUG&&Ae("QueryEngine","Query:",gl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(pl()<=St.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(t))):re.resolve())}Rs(e,t){if(ME(t))return re.resolve(null);let r=oi(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=cy(t,null,"F"),r=oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Et(...u);return this.As.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const v=this.ps(t,d);return this.ys(t,v,c,p.readTime)?this.Rs(e,cy(t,null,"F")):this.ws(e,v,t,p)}))})))}Vs(e,t,r,a){return ME(t)||a.isEqual(Je.min())?re.resolve(null):this.As.getDocuments(e,r).next(u=>{const c=this.ps(t,u);return this.ys(t,c,r,a)?re.resolve(null):(pl()<=St.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gl(t)),this.ws(e,c,t,E1(a,xl)).next(d=>d))})}ps(e,t){let r=new Ut(tS(e));return t.forEach((a,u)=>{Xh(e,u)&&(r=r.add(u))}),r}ys(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}fs(e,t,r){return pl()<=St.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",gl(t)),this.As.getDocumentsMatchingQuery(e,t,ui.min(),r)}ws(e,t,r,a){return this.As.getDocumentsMatchingQuery(e,r,a).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="LocalStore",mN=3e8;class pN{constructor(e,t,r,a){this.persistence=e,this.bs=t,this.serializer=a,this.Ss=new Zt(at),this.Ds=new ma(u=>Su(u),$h),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new US(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function zS(i,e,t,r){return new pN(i,e,t,r)}async function qS(i,e){const t=Ye(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(u=>(a=u,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],d=[];let p=Et();for(const v of a){c.push(v.batchId);for(const T of v.mutations)p=p.add(T.key)}for(const v of u){d.push(v.batchId);for(const T of v.mutations)p=p.add(T.key)}return t.localDocuments.getDocuments(r,p).next(v=>({Ms:v,removedBatchIds:c,addedBatchIds:d}))})})}function gN(i,e){const t=Ye(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),u=t.Cs.newChangeBuffer({trackRemovals:!0});return function(d,p,v,T){const I=v.batch,C=I.keys();let z=re.resolve();return C.forEach(B=>{z=z.next(()=>T.getEntry(p,B)).next(he=>{const ue=v.docVersions.get(B);$e(ue!==null,48541),he.version.compareTo(ue)<0&&(I.applyToRemoteDocument(he,v),he.isValidDocument()&&(he.setReadTime(v.commitVersion),T.addEntry(he)))})}),z.next(()=>d.mutationQueue.removeMutationBatch(p,I))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Et();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(p=p.add(d.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function FS(i){const e=Ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function yN(i,e){const t=Ye(i),r=e.snapshotVersion;let a=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});a=t.Ss;const d=[];e.targetChanges.forEach((T,I)=>{const C=a.get(I);if(!C)return;d.push(t.ai.removeMatchingKeys(u,T.removedDocuments,I).next(()=>t.ai.addMatchingKeys(u,T.addedDocuments,I)));let z=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?z=z.withResumeToken(Tn.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):T.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(T.resumeToken,r)),a=a.insert(I,z),function(he,ue,ve){return he.resumeToken.approximateByteSize()===0||ue.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=mN?!0:ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0}(C,z,T)&&d.push(t.ai.updateTargetData(u,z))});let p=Ni(),v=Et();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),d.push(vN(u,c,e.documentUpdates).next(T=>{p=T.xs,v=T.Os})),!r.isEqual(Je.min())){const T=t.ai.getLastRemoteSnapshotVersion(u).next(I=>t.ai.setTargetsMetadata(u,u.currentSequenceNumber,r));d.push(T)}return re.waitFor(d).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,p,v)).next(()=>p)}).then(u=>(t.Ss=a,u))}function vN(i,e,t){let r=Et(),a=Et();return t.forEach(u=>r=r.add(u)),e.getEntries(i,r).next(u=>{let c=Ni();return t.forEach((d,p)=>{const v=u.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Je.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ae(hv,"Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)}),{xs:c,Os:a}})}function _N(i,e){const t=Ye(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nm(i,e){const t=Ye(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.ai.getTargetData(r,e).next(u=>u?(a=u,re.resolve(a)):t.ai.allocateTargetId(r).next(c=>(a=new sa(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ss.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Ul(i,e,t){const r=Ye(i),a=r.Ss.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!So(c))throw c;Ae(hv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(a.target)}function vy(i,e,t){const r=Ye(i);let a=Je.min(),u=Et();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,v,T){const I=Ye(p),C=I.Ds.get(T);return C!==void 0?re.resolve(I.Ss.get(C)):I.ai.getTargetData(v,T)}(r,c,oi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(c,d.targetId).next(p=>{u=p})}).next(()=>r.bs.getDocumentsMatchingQuery(c,e,t?a:Je.min(),t?u:Et())).next(d=>(GS(r,eS(e),d),{documents:d,Ns:u})))}function KS(i,e){const t=Ye(i),r=Ye(t.ai),a=t.Ss.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Rt(u,e).next(c=>c?c.target:null))}function HS(i,e){const t=Ye(i),r=t.vs.get(e)||Je.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Cs.getAllFromCollectionGroup(a,e,E1(r,xl),Number.MAX_SAFE_INTEGER)).then(a=>(GS(t,e,a),a))}function GS(i,e,t){let r=i.vs.get(e)||Je.min();t.forEach((a,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),i.vs.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firestore_clients";function cT(i,e){return`${QS}_${i}_${e}`}const YS="firestore_mutations";function hT(i,e,t){let r=`${YS}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const $S="firestore_targets";function kg(i,e){return`${$S}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="SharedClientState";class rm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static qs(e,t,r){const a=JSON.parse(r);let u,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(u=new Ge(a.error.code,a.error.message))),c?new rm(e,t,a.state,u):(bn(Es,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Th{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){const r=JSON.parse(t);let a,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(a=new Ge(r.error.code,r.error.message))),u?new Th(e,r.state,a):(bn(Es,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Jy();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=_D(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return a?new im(e,u):(bn(Es,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fv{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fv(t.clientId,t.onlineState):(bn(Es,`Failed to parse online state: ${e}`),null)}}class _y{constructor(){this.activeTargetIds=Jy()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vg{constructor(e,t,r,a,u){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new Zt(at),this.started=!1,this.js=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Hs=cT(this.persistenceKey,this.Ks),this.Js=function(p){return`firestore_sequence_number_${p}`}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new _y),this.Ys=new RegExp(`^${QS}_${c}_([^_]*)$`),this.Zs=new RegExp(`^${YS}_${c}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${$S}_${c}_(\\d+)$`),this.eo=function(p){return`firestore_online_state_${p}`}(this.persistenceKey),this.no=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.us();for(const r of e){if(r===this.Ks)continue;const a=this.getItem(cT(this.persistenceKey,r));if(a){const u=im.qs(r,a);u&&(this.zs=this.zs.insert(u.clientId,u))}}this.ro();const t=this.storage.getItem(this.eo);if(t){const r=this.io(t);r&&this.so(r)}for(const r of this.js)this.Gs(r);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(kg(this.persistenceKey,e));if(a){const u=Th.qs(e,a);u&&(r=u.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kg(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.ao(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae(Es,"READ",e,t),t}setItem(e,t){Ae(Es,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae(Es,"REMOVE",e),this.storage.removeItem(e)}Gs(e){const t=e;if(t.storageArea===this.storage){if(Ae(Es,"EVENT",t.key,t.newValue),t.key===this.Hs)return void bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ys.test(t.key)){if(t.newValue==null){const r=this.Po(t.key);return this.To(r,null)}{const r=this.Io(t.key,t.newValue);if(r)return this.To(r.clientId,r)}}else if(this.Zs.test(t.key)){if(t.newValue!==null){const r=this.Eo(t.key,t.newValue);if(r)return this.Ao(r)}}else if(this.Xs.test(t.key)){if(t.newValue!==null){const r=this.Ro(t.key,t.newValue);if(r)return this.Vo(r)}}else if(t.key===this.eo){if(t.newValue!==null){const r=this.io(t.newValue);if(r)return this.so(r)}}else if(t.key===this.Js){const r=function(u){let c=jr.le;if(u!=null)try{const d=JSON.parse(u);$e(typeof d=="number",30636,{mo:u}),c=d}catch(d){bn(Es,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==jr.le&&this.sequenceNumberHandler(r)}else if(t.key===this.no){const r=this.fo(t.newValue);await Promise.all(r.map(a=>this.syncEngine.po(a)))}}}else this.js.push(t)})}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){const a=new rm(this.currentUser,e,t,r),u=hT(this.persistenceKey,this.currentUser,e);this.setItem(u,a.Qs())}ao(e){const t=hT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){const t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,r){const a=kg(this.persistenceKey,e),u=new Th(e,t,r);this.setItem(a,u.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const r=this.Po(e);return im.qs(r,t)}Eo(e,t){const r=this.Zs.exec(e),a=Number(r[1]),u=r[2]!==void 0?r[2]:null;return rm.qs(new fr(u),a,t)}Ro(e,t){const r=this.Xs.exec(e),a=Number(r[1]);return Th.qs(a,t)}io(e){return fv.qs(e)}fo(e){return JSON.parse(e)}async Ao(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);Ae(Es,`Ignoring mutation for non-active user ${e.user.uid}`)}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const r=t?this.zs.insert(e,t):this.zs.remove(e),a=this.oo(this.zs),u=this.oo(r),c=[],d=[];return u.forEach(p=>{a.has(p)||c.push(p)}),a.forEach(p=>{u.has(p)||d.push(p)}),this.syncEngine.bo(c,d).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=Jy();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class XS{constructor(){this.So=new _y,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new _y,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="ConnectivityMonitor";class dT{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ae(fT,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ae(fT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function by(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="RestConnection",EN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TN{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${a}`,this.qo=this.databaseId.database===Hd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Qo(e,t,r,a,u){const c=by(),d=this.$o(e,t.toUriEncodedString());Ae(Lg,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(p,a,u);const{host:v}=new URL(d),T=zh(v);return this.Ko(e,d,p,r,T).then(I=>(Ae(Lg,`Received RPC '${e}' ${c}: `,I),I),I=>{throw Ah(Lg,`RPC '${e}' ${c} failed with error: `,I,"url: ",d,"request:",r),I})}Wo(e,t,r,a,u,c){return this.Qo(e,t,r,a,u)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,u)=>e[u]=a),r&&r.headers.forEach((a,u)=>e[u]=a)}$o(e,t){const r=EN[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="WebChannelConnection";class SN extends TN{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,a,u){const c=by();return new Promise((d,p)=>{const v=new f1;v.setWithCredentials(!0),v.listenOnce(d1.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case bd.NO_ERROR:const I=v.getResponseJson();Ae(hr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case bd.TIMEOUT:Ae(hr,`RPC '${e}' ${c} timed out`),p(new Ge(Se.DEADLINE_EXCEEDED,"Request time out"));break;case bd.HTTP_ERROR:const C=v.getStatus();if(Ae(hr,`RPC '${e}' ${c} failed with status:`,C,"response text:",v.getResponseText()),C>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const B=z==null?void 0:z.error;if(B&&B.status&&B.message){const he=function(ve){const pe=ve.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(pe)>=0?pe:Se.UNKNOWN}(B.status);p(new Ge(he,B.message))}else p(new Ge(Se.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new Ge(Se.UNAVAILABLE,"Connection failed."));break;default:He(9055,{s_:e,streamId:c,o_:v.getLastErrorCode(),__:v.getLastError()})}}finally{Ae(hr,`RPC '${e}' ${c} completed.`)}});const T=JSON.stringify(a);Ae(hr,`RPC '${e}' ${c} sending request:`,a),v.send(t,"POST",T,r,15)})}a_(e,t,r){const a=by(),u=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=g1(),d=p1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const T=u.join("");Ae(hr,`Creating RPC '${e}' stream ${a}: ${T}`,p);const I=c.createWebChannel(T,p);let C=!1,z=!1;const B=new wN({Go:ue=>{z?Ae(hr,`Not sending because RPC '${e}' stream ${a} is closed:`,ue):(C||(Ae(hr,`Opening RPC '${e}' stream ${a} transport.`),I.open(),C=!0),Ae(hr,`RPC '${e}' stream ${a} sending:`,ue),I.send(ue))},zo:()=>I.close()}),he=(ue,ve,pe)=>{ue.listen(ve,oe=>{try{pe(oe)}catch(Re){setTimeout(()=>{throw Re},0)}})};return he(I,ch.EventType.OPEN,()=>{z||(Ae(hr,`RPC '${e}' stream ${a} transport opened.`),B.t_())}),he(I,ch.EventType.CLOSE,()=>{z||(z=!0,Ae(hr,`RPC '${e}' stream ${a} transport closed`),B.r_())}),he(I,ch.EventType.ERROR,ue=>{z||(z=!0,Ah(hr,`RPC '${e}' stream ${a} transport errored. Name:`,ue.name,"Message:",ue.message),B.r_(new Ge(Se.UNAVAILABLE,"The operation could not be completed")))}),he(I,ch.EventType.MESSAGE,ue=>{var ve;if(!z){const pe=ue.data[0];$e(!!pe,16349);const oe=pe,Re=(oe==null?void 0:oe.error)||((ve=oe[0])===null||ve===void 0?void 0:ve.error);if(Re){Ae(hr,`RPC '${e}' stream ${a} received error:`,Re);const xe=Re.status;let Me=function(M){const q=Cn[M];if(q!==void 0)return cS(q)}(xe),L=Re.message;Me===void 0&&(Me=Se.INTERNAL,L="Unknown error status: "+xe+" with message "+Re.message),z=!0,B.r_(new Ge(Me,L)),I.close()}else Ae(hr,`RPC '${e}' stream ${a} received:`,pe),B.i_(pe)}}),he(d,m1.STAT_EVENT,ue=>{ue.stat===Zg.PROXY?Ae(hr,`RPC '${e}' stream ${a} detected buffering proxy`):ue.stat===Zg.NOPROXY&&Ae(hr,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{B.n_()},0),B}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof window<"u"?window:null}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(i){return new CO(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t,r=1e3,a=1.5,u=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=a,this.l_=u,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),a=Math.max(0,t-r);a>0&&Ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,a,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="PersistentStream";class eA{constructor(e,t,r,a,u,c,d,p){this.bi=e,this.R_=r,this.V_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new JS(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(bn(t.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.m_===t&&this.B_(r,a)},r=>{e(()=>{const a=new Ge(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(a)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(a=>{r(()=>this.L_(a))}),this.stream.onMessage(a=>{r(()=>++this.p_==1?this.q_(a):this.onNext(a))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Ae(mT,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Ae(mT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AN extends eA{constructor(e,t,r,a,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=PO(this.serializer,e),r=function(u){if(!("targetChange"in u))return Je.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Je.min():c.readTime?Sr(c.readTime):Je.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=dy(this.serializer),t.addTarget=function(u,c){let d;const p=c.target;if(d=Qd(p)?{documents:vS(u,p)}:{query:_S(u,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=DO(u,c.resumeToken);const v=hy(u,c.expectedCount);v!==null&&(d.expectedCount=v)}else if(c.snapshotVersion.compareTo(Je.min())>0){d.readTime=$d(u,c.snapshotVersion.toTimestamp());const v=hy(u,c.expectedCount);v!==null&&(d.expectedCount=v)}return d}(this.serializer,e);const r=kO(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=dy(this.serializer),t.removeTarget=e,this.F_(t)}}class IN extends eA{constructor(e,t,r,a,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=u}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=MO(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=dy(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Wd(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{}class xN extends RN{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.J_=!1}Y_(){if(this.J_)throw new Ge(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Qo(e,fy(t,r),a,u,c)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ge(Se.UNKNOWN,u.toString())})}Wo(e,t,r,a,u){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,fy(t,r),a,c,d,u)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ge(Se.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class CN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(bn(t),this.ea=!1):Ae("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="RemoteStore";class DN{constructor(e,t,r,a,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=u,this.ca.vo(c=>{r.enqueueAndForget(async()=>{Cu(this)&&(Ae(xu,"Restarting streams for network reachability change."),await async function(p){const v=Ye(p);v.aa.add(4),await ef(v),v.la.set("Unknown"),v.aa.delete(4),await Cm(v)}(this))})}),this.la=new CN(r,a)}}async function Cm(i){if(Cu(i))for(const e of i.ua)await e(!0)}async function ef(i){for(const e of i.ua)await e(!1)}function Dm(i,e){const t=Ye(i);t._a.has(e.targetId)||(t._a.set(e.targetId,e),pv(t)?mv(t):Ql(t).b_()&&dv(t,e))}function jl(i,e){const t=Ye(i),r=Ql(t);t._a.delete(e),r.b_()&&tA(t,e),t._a.size===0&&(r.b_()?r.v_():Cu(t)&&t.la.set("Unknown"))}function dv(i,e){if(i.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ql(i).U_(e)}function tA(i,e){i.ha.Ke(e),Ql(i).K_(e)}function mv(i){i.ha=new AO({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i._a.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Ql(i).start(),i.la.ta()}function pv(i){return Cu(i)&&!Ql(i).w_()&&i._a.size>0}function Cu(i){return Ye(i).aa.size===0}function nA(i){i.ha=void 0}async function ON(i){i.la.set("Online")}async function NN(i){i._a.forEach((e,t)=>{dv(i,e)})}async function PN(i,e){nA(i),pv(i)?(i.la.ia(e),mv(i)):i.la.set("Unknown")}async function MN(i,e,t){if(i.la.set("Online"),e instanceof fS&&e.state===2&&e.cause)try{await async function(a,u){const c=u.cause;for(const d of u.targetIds)a._a.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a._a.delete(d),a.ha.removeTarget(d))}(i,e)}catch(r){Ae(xu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sm(i,r)}else if(e instanceof Rd?i.ha.Xe(e):e instanceof hS?i.ha.ot(e):i.ha.nt(e),!t.isEqual(Je.min()))try{const r=await FS(i.localStore);t.compareTo(r)>=0&&await function(u,c){const d=u.ha.It(c);return d.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const T=u._a.get(v);T&&u._a.set(v,T.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,v)=>{const T=u._a.get(p);if(!T)return;u._a.set(p,T.withResumeToken(Tn.EMPTY_BYTE_STRING,T.snapshotVersion)),tA(u,p);const I=new sa(T.target,p,v,T.sequenceNumber);dv(u,I)}),u.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){Ae(xu,"Failed to raise snapshot:",r),await sm(i,r)}}async function sm(i,e,t){if(!So(e))throw e;i.aa.add(1),await ef(i),i.la.set("Offline"),t||(t=()=>FS(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ae(xu,"Retrying IndexedDB access"),await t(),i.aa.delete(1),await Cm(i)})}function rA(i,e){return e().catch(t=>sm(i,t,e))}async function tf(i){const e=Ye(i),t=bo(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:gu;for(;kN(e);)try{const a=await _N(e.localStore,r);if(a===null){e.oa.length===0&&t.v_();break}r=a.batchId,VN(e,a)}catch(a){await sm(e,a)}iA(e)&&sA(e)}function kN(i){return Cu(i)&&i.oa.length<10}function VN(i,e){i.oa.push(e);const t=bo(i);t.b_()&&t.W_&&t.G_(e.mutations)}function iA(i){return Cu(i)&&!bo(i).w_()&&i.oa.length>0}function sA(i){bo(i).start()}async function LN(i){bo(i).H_()}async function UN(i){const e=bo(i);for(const t of i.oa)e.G_(t.mutations)}async function jN(i,e,t){const r=i.oa.shift(),a=nv.from(r,e,t);await rA(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await tf(i)}async function BN(i,e){e&&bo(i).W_&&await async function(r,a){if(function(c){return wO(c)&&c!==Se.ABORTED}(a.code)){const u=r.oa.shift();bo(r).D_(),await rA(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,a)),await tf(r)}}(i,e),iA(i)&&sA(i)}async function pT(i,e){const t=Ye(i);t.asyncQueue.verifyOperationInProgress(),Ae(xu,"RemoteStore received new credentials");const r=Cu(t);t.aa.add(3),await ef(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Cm(t)}async function Ey(i,e){const t=Ye(i);e?(t.aa.delete(2),await Cm(t)):e||(t.aa.add(2),await ef(t),t.la.set("Unknown"))}function Ql(i){return i.Pa||(i.Pa=function(t,r,a){const u=Ye(t);return u.Y_(),new AN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{jo:ON.bind(null,i),Jo:NN.bind(null,i),Zo:PN.bind(null,i),Q_:MN.bind(null,i)}),i.ua.push(async e=>{e?(i.Pa.D_(),pv(i)?mv(i):i.la.set("Unknown")):(await i.Pa.stop(),nA(i))})),i.Pa}function bo(i){return i.Ta||(i.Ta=function(t,r,a){const u=Ye(t);return u.Y_(),new IN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{jo:()=>Promise.resolve(),Jo:LN.bind(null,i),Zo:BN.bind(null,i),z_:UN.bind(null,i),j_:jN.bind(null,i)}),i.ua.push(async e=>{e?(i.Ta.D_(),await tf(i)):(await i.Ta.stop(),i.oa.length>0&&(Ae(xu,`Stopping write stream with ${i.oa.length} pending writes`),i.oa=[]))})),i.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t,r,a,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=u,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,u){const c=Date.now()+r,d=new gv(e,t,c,a,u);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aA(i,e){if(bn("AsyncQueue",`${e}: ${i}`),So(i))return new Ge(Se.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=hh(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,u=r.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Sl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(){this.Ia=new Zt(Be.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bl{constructor(e,t,r,a,u,c,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,a,u){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Bl(e,t,Sl.emptySet(t),c,r,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class qN{constructor(){this.queries=yT(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const a=Ye(t),u=a.queries;a.queries=yT(),u.forEach((c,d)=>{for(const p of d.Ra)p.onError(r)})})(this,new Ge(Se.ABORTED,"Firestore shutting down"))}}function yT(){return new ma(i=>J1(i),wm)}async function FN(i,e){const t=Ye(i);let r=3;const a=e.query;let u=t.queries.get(a);u?!u.Va()&&e.ma()&&(r=2):(u=new zN,r=e.ma()?0:1);try{switch(r){case 0:u.Aa=await t.onListen(a,!0);break;case 1:u.Aa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=aA(c,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,u),u.Ra.push(e),e.ga(t.onlineState),u.Aa&&e.pa(u.Aa)&&yv(t)}async function KN(i,e){const t=Ye(i),r=e.query;let a=3;const u=t.queries.get(r);if(u){const c=u.Ra.indexOf(e);c>=0&&(u.Ra.splice(c,1),u.Ra.length===0?a=e.ma()?0:1:!u.Va()&&e.ma()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HN(i,e){const t=Ye(i);let r=!1;for(const a of e){const u=a.query,c=t.queries.get(u);if(c){for(const d of c.Ra)d.pa(a)&&(r=!0);c.Aa=a}}r&&yv(t)}function GN(i,e,t){const r=Ye(i),a=r.queries.get(e);if(a)for(const u of a.Ra)u.onError(t);r.queries.delete(e)}function yv(i){i.fa.forEach(e=>{e.next()})}var Ty,vT;(vT=Ty||(Ty={})).ya="default",vT.Cache="cache";class QN{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Ty.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.key=e}}class uA{constructor(e){this.key=e}}class YN{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Et(),this.mutatedKeys=Et(),this.Ua=tS(e),this.Ka=new Sl(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new gT,a=t?t.Ka:this.Ka;let u=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((T,I)=>{const C=a.get(T),z=Xh(this.query,I)?I:null,B=!!C&&this.mutatedKeys.has(C.key),he=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let ue=!1;C&&z?C.data.isEqual(z.data)?B!==he&&(r.track({type:3,doc:z}),ue=!0):this.ja(C,z)||(r.track({type:2,doc:z}),ue=!0,(p&&this.Ua(z,p)>0||v&&this.Ua(z,v)<0)&&(d=!0)):!C&&z?(r.track({type:0,doc:z}),ue=!0):C&&!z&&(r.track({type:1,doc:C}),ue=!0,(p||v)&&(d=!0)),ue&&(z?(c=c.add(z),u=he?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Ka:c,za:r,ys:d,mutatedKeys:u}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const u=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((T,I)=>function(z,B){const he=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:ue})}};return he(z)-he(B)}(T.type,I.type)||this.Ua(T.doc,I.doc)),this.Ha(r),a=a!=null&&a;const d=t&&!a?this.Ja():[],p=this.$a.size===0&&this.current&&!a?1:0,v=p!==this.Qa;return this.Qa=p,c.length!==0||v?{snapshot:new Bl(this.query,e.Ka,u,c,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:d}:{Ya:d}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new gT,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Et(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new uA(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new oA(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Et();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Bl.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Yl="SyncEngine";class $N{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XN{constructor(e){this.key=e,this.tu=!1}}class WN{constructor(e,t,r,a,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new ma(d=>J1(d),wm),this.iu=new Map,this.su=new Set,this.ou=new Zt(Be.comparator),this._u=new Map,this.au=new ov,this.uu={},this.cu=new Map,this.lu=Ru.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function ZN(i,e,t=!0){const r=Om(i);let a;const u=r.ru.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.eu()):a=await lA(r,e,t,!0),a}async function JN(i,e){const t=Om(i);await lA(t,e,!0,!1)}async function lA(i,e,t,r){const a=await nm(i.localStore,oi(e)),u=a.targetId,c=i.sharedClientState.addLocalQueryTarget(u,t);let d;return r&&(d=await vv(i,e,u,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&Dm(i.remoteStore,a),d}async function vv(i,e,t,r,a){i.Pu=(I,C,z)=>async function(he,ue,ve,pe){let oe=ue.view.Ga(ve);oe.ys&&(oe=await vy(he.localStore,ue.query,!1).then(({documents:L})=>ue.view.Ga(L,oe)));const Re=pe&&pe.targetChanges.get(ue.targetId),xe=pe&&pe.targetMismatches.get(ue.targetId)!=null,Me=ue.view.applyChanges(oe,he.isPrimaryClient,Re,xe);return wy(he,ue.targetId,Me.Ya),Me.snapshot}(i,I,C,z);const u=await vy(i.localStore,e,!0),c=new YN(e,u.Ns),d=c.Ga(u.documents),p=Jh.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),v=c.applyChanges(d,i.isPrimaryClient,p);wy(i,t,v.Ya);const T=new $N(e,t,c);return i.ru.set(e,T),i.iu.has(t)?i.iu.get(t).push(e):i.iu.set(t,[e]),v.snapshot}async function eP(i,e,t){const r=Ye(i),a=r.ru.get(e),u=r.iu.get(a.targetId);if(u.length>1)return r.iu.set(a.targetId,u.filter(c=>!wm(c,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ul(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&jl(r.remoteStore,a.targetId),zl(r,a.targetId)}).catch(wo)):(zl(r,a.targetId),await Ul(r.localStore,a.targetId,!0))}async function tP(i,e){const t=Ye(i),r=t.ru.get(e),a=t.iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jl(t.remoteStore,r.targetId))}async function cA(i,e){const t=Ye(i);try{const r=await yN(t.localStore,e);e.targetChanges.forEach((a,u)=>{const c=t._u.get(u);c&&($e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.tu=!0:a.modifiedDocuments.size>0?$e(c.tu,14607):a.removedDocuments.size>0&&($e(c.tu,42227),c.tu=!1))}),await Du(t,r,e)}catch(r){await wo(r)}}function _T(i,e,t){const r=Ye(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.ru.forEach((u,c)=>{const d=c.view.ga(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const p=Ye(c);p.onlineState=d;let v=!1;p.queries.forEach((T,I)=>{for(const C of I.Ra)C.ga(d)&&(v=!0)}),v&&yv(p)}(r.eventManager,e),a.length&&r.nu.Q_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nP(i,e,t){const r=Ye(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r._u.get(e),u=a&&a.key;if(u){let c=new Zt(Be.comparator);c=c.insert(u,dn.newNoDocument(u,Je.min()));const d=Et().add(u),p=new Zh(Je.min(),new Map,new Zt(at),c,d);await cA(r,p),r.ou=r.ou.remove(u),r._u.delete(e),Ev(r)}else await Ul(r.localStore,e,!1).then(()=>zl(r,e,t)).catch(wo)}async function rP(i,e){const t=Ye(i),r=e.batch.batchId;try{const a=await gN(t.localStore,e);bv(t,r,null),_v(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Du(t,a)}catch(a){await wo(a)}}async function iP(i,e,t){const r=Ye(i);try{const a=await function(c,d){const p=Ye(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let T;return p.mutationQueue.lookupMutationBatch(v,d).next(I=>($e(I!==null,37113),T=I.keys(),p.mutationQueue.removeMutationBatch(v,I))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,T,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T)).next(()=>p.localDocuments.getDocuments(v,T))})}(r.localStore,e);bv(r,e,t),_v(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Du(r,a)}catch(a){await wo(a)}}function _v(i,e){(i.cu.get(e)||[]).forEach(t=>{t.resolve()}),i.cu.delete(e)}function bv(i,e,t){const r=Ye(i);let a=r.uu[r.currentUser.toKey()];if(a){const u=a.get(e);u&&(t?u.reject(t):u.resolve(),a=a.remove(e)),r.uu[r.currentUser.toKey()]=a}}function zl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.iu.get(e))i.ru.delete(r),t&&i.nu.Tu(r,t);i.iu.delete(e),i.isPrimaryClient&&i.au.Ur(e).forEach(r=>{i.au.containsKey(r)||hA(i,r)})}function hA(i,e){i.su.delete(e.path.canonicalString());const t=i.ou.get(e);t!==null&&(jl(i.remoteStore,t),i.ou=i.ou.remove(e),i._u.delete(t),Ev(i))}function wy(i,e,t){for(const r of t)r instanceof oA?(i.au.addReference(r.key,e),sP(i,r)):r instanceof uA?(Ae(Yl,"Document no longer in limbo: "+r.key),i.au.removeReference(r.key,e),i.au.containsKey(r.key)||hA(i,r.key)):He(19791,{Iu:r})}function sP(i,e){const t=e.key,r=t.path.canonicalString();i.ou.get(t)||i.su.has(r)||(Ae(Yl,"New document in limbo: "+t),i.su.add(r),Ev(i))}function Ev(i){for(;i.su.size>0&&i.ou.size<i.maxConcurrentLimboResolutions;){const e=i.su.values().next().value;i.su.delete(e);const t=new Be(Qt.fromString(e)),r=i.lu.next();i._u.set(r,new XN(t)),i.ou=i.ou.insert(t,r),Dm(i.remoteStore,new sa(oi(Tm(t.path)),r,"TargetPurposeLimboResolution",jr.le))}}async function Du(i,e,t){const r=Ye(i),a=[],u=[],c=[];r.ru.isEmpty()||(r.ru.forEach((d,p)=>{c.push(r.Pu(p,e,t).then(v=>{var T;if((v||t)&&r.isPrimaryClient){const I=v?!v.fromCache:(T=t==null?void 0:t.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,I?"current":"not-current")}if(v){a.push(v);const I=cv.Ps(p.targetId,v);u.push(I)}}))}),await Promise.all(c),r.nu.Q_(a),await async function(p,v){const T=Ye(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>re.forEach(v,C=>re.forEach(C.ls,z=>T.persistence.referenceDelegate.addReference(I,C.targetId,z)).next(()=>re.forEach(C.hs,z=>T.persistence.referenceDelegate.removeReference(I,C.targetId,z)))))}catch(I){if(!So(I))throw I;Ae(hv,"Failed to update sequence numbers: "+I)}for(const I of v){const C=I.targetId;if(!I.fromCache){const z=T.Ss.get(C),B=z.snapshotVersion,he=z.withLastLimboFreeSnapshotVersion(B);T.Ss=T.Ss.insert(C,he)}}}(r.localStore,u))}async function aP(i,e){const t=Ye(i);if(!t.currentUser.isEqual(e)){Ae(Yl,"User change. New user:",e.toKey());const r=await qS(t.localStore,e);t.currentUser=e,function(u,c){u.cu.forEach(d=>{d.forEach(p=>{p.reject(new Ge(Se.CANCELLED,c))})}),u.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Du(t,r.Ms)}}function oP(i,e){const t=Ye(i),r=t._u.get(e);if(r&&r.tu)return Et().add(r.key);{let a=Et();const u=t.iu.get(e);if(!u)return a;for(const c of u){const d=t.ru.get(c);a=a.unionWith(d.view.Wa)}return a}}async function uP(i,e){const t=Ye(i),r=await vy(t.localStore,e.query,!0),a=e.view.Xa(r);return t.isPrimaryClient&&wy(t,e.targetId,a.Ya),a}async function lP(i,e){const t=Ye(i);return HS(t.localStore,e).then(r=>Du(t,r))}async function cP(i,e,t,r){const a=Ye(i),u=await function(d,p){const v=Ye(d),T=Ye(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",I=>T.Hn(I,p).next(C=>C?v.localDocuments.getDocuments(I,C):re.resolve(null)))}(a.localStore,e);u!==null?(t==="pending"?await tf(a.remoteStore):t==="acknowledged"||t==="rejected"?(bv(a,e,r||null),_v(a,e),function(d,p){Ye(Ye(d).mutationQueue).Xn(p)}(a.localStore,e)):He(6720,"Unknown batchState",{Eu:t}),await Du(a,u)):Ae(Yl,"Cannot apply mutation batch with id: "+e)}async function hP(i,e){const t=Ye(i);if(Om(t),dA(t),e===!0&&t.hu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await bT(t,r.toArray());t.hu=!0,await Ey(t.remoteStore,!0);for(const u of a)Dm(t.remoteStore,u)}else if(e===!1&&t.hu!==!1){const r=[];let a=Promise.resolve();t.iu.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(zl(t,c),Ul(t.localStore,c,!0))),jl(t.remoteStore,c)}),await a,await bT(t,r),function(c){const d=Ye(c);d._u.forEach((p,v)=>{jl(d.remoteStore,v)}),d.au.Kr(),d._u=new Map,d.ou=new Zt(Be.comparator)}(t),t.hu=!1,await Ey(t.remoteStore,!1)}}async function bT(i,e,t){const r=Ye(i),a=[],u=[];for(const c of e){let d;const p=r.iu.get(c);if(p&&p.length!==0){d=await nm(r.localStore,oi(p[0]));for(const v of p){const T=r.ru.get(v),I=await uP(r,T);I.snapshot&&u.push(I.snapshot)}}else{const v=await KS(r.localStore,c);d=await nm(r.localStore,v),await vv(r,fA(v),c,!1,d.resumeToken)}a.push(d)}return r.nu.Q_(u),a}function fA(i){return Z1(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function fP(i){return function(t){return Ye(Ye(t).persistence).us()}(Ye(i).localStore)}async function dP(i,e,t,r){const a=Ye(i);if(a.hu)return void Ae(Yl,"Ignoring unexpected query state notification.");const u=a.iu.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=await HS(a.localStore,eS(u[0])),d=Zh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tn.EMPTY_BYTE_STRING);await Du(a,c,d);break}case"rejected":await Ul(a.localStore,e,!0),zl(a,e,r);break;default:He(64155,t)}}async function mP(i,e,t){const r=Om(i);if(r.hu){for(const a of e){if(r.iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){Ae(Yl,"Adding an already active target "+a);continue}const u=await KS(r.localStore,a),c=await nm(r.localStore,u);await vv(r,fA(u),c.targetId,!1,c.resumeToken),Dm(r.remoteStore,c)}for(const a of t)r.iu.has(a)&&await Ul(r.localStore,a,!1).then(()=>{jl(r.remoteStore,a),zl(r,a)}).catch(wo)}}function Om(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=cA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nP.bind(null,e),e.nu.Q_=HN.bind(null,e.eventManager),e.nu.Tu=GN.bind(null,e.eventManager),e}function dA(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iP.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ZS(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return zS(this.persistence,new BS,e.initialUser,this.serializer)}Ru(e){return new uv(xm.Ei,this.serializer)}Au(e){return new XS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class pP extends Lh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){$e(this.persistence.referenceDelegate instanceof tm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MS(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new uv(r=>tm.Ei(r,t),this.serializer)}}class mA extends Lh{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.gu.initialize(this,e),await dA(this.gu.syncEngine),await tf(this.gu.remoteStore),await this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Vu(e){return zS(this.persistence,new BS,e.initialUser,this.serializer)}mu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new MS(r,e.asyncQueue,t)}fu(e,t){const r=new vD(t,this.persistence);return new yD(e.asyncQueue,r)}Ru(e){const t=jS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new lv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WS(),xd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new XS}}class gP extends mA{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.gu.syncEngine;this.sharedClientState instanceof Vg&&(this.sharedClientState.syncEngine={yo:cP.bind(null,t),wo:dP.bind(null,t),bo:mP.bind(null,t),us:fP.bind(null,t),po:lP.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ki(async r=>{await hP(this.gu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Au(e){const t=WS();if(!Vg.C(t))throw new Ge(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Uh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_T(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aP.bind(null,this.syncEngine),await Ey(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qN}()}createDatastore(e){const t=ZS(e.databaseInfo.databaseId),r=function(u){return new SN(u)}(e.databaseInfo);return function(u,c,d,p){return new xN(u,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,u,c,d){return new DN(r,a,u,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>_T(this.syncEngine,t,0),function(){return dT.C()?new dT:new bN}())}createSyncEngine(e,t){return function(a,u,c,d,p,v,T){const I=new WN(a,u,c,d,p,v);return T&&(I.hu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const u=Ye(a);Ae(xu,"RemoteStore shutting down."),u.aa.add(5),await ef(u),u.ca.shutdown(),u.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Uh.provider={build:()=>new Uh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):bn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="FirestoreClient";class vP{constructor(e,t,r,a,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=fr.UNAUTHENTICATED,this.clientId=_1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async c=>{Ae(Eo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ae(Eo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=aA(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ug(i,e){i.asyncQueue.verifyOperationInProgress(),Ae(Eo,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async a=>{r.isEqual(a)||(await qS(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function ET(i,e){i.asyncQueue.verifyOperationInProgress();const t=await _P(i);Ae(Eo,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>pT(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,a)=>pT(e.remoteStore,a)),i._onlineComponents=e}async function _P(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ae(Eo,"Using user provided OfflineComponentProvider");try{await Ug(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Se.FAILED_PRECONDITION||a.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Ah("Error using user provided cache. Falling back to memory cache: "+t),await Ug(i,new Lh)}}else Ae(Eo,"Using default OfflineComponentProvider"),await Ug(i,new pP(void 0));return i._offlineComponents}async function bP(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ae(Eo,"Using user provided OnlineComponentProvider"),await ET(i,i._uninitializedComponentsProvider._online)):(Ae(Eo,"Using default OnlineComponentProvider"),await ET(i,new Uh))),i._onlineComponents}async function EP(i){const e=await bP(i),t=e.eventManager;return t.onListen=ZN.bind(null,e.syncEngine),t.onUnlisten=eP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tP.bind(null,e.syncEngine),t}function TP(i,e,t={}){const r=new go;return i.asyncQueue.enqueueAndForget(async()=>function(u,c,d,p,v){const T=new yP({next:C=>{T.yu(),c.enqueueAndForget(()=>KN(u,I));const z=C.docs.has(d);!z&&C.fromCache?v.reject(new Ge(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&C.fromCache&&p&&p.source==="server"?v.reject(new Ge(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new QN(Tm(d.path),T,{includeMetadataChanges:!0,Fa:!0});return FN(u,I)}(await EP(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(i,e,t){if(!t)throw new Ge(Se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function SP(i,e,t,r){if(e===!0&&r===!0)throw new Ge(Se.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function wT(i){if(!Be.isDocumentKey(i))throw new Ge(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function AP(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":He(12329,{type:typeof i})}function ST(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ge(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AP(i);throw new Ge(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="firestore.googleapis.com",AT=!0;class IT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IP,this.ssl=AT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:AT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PS)throw new Ge(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ge(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ge(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ge(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gA{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oD;switch(r.type){case"firstParty":return new cD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ge(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,xy("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=TT.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),TT.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Tv(this.firestore,e,this._query)}}class aa{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new aa(this.firestore,e,this._key)}}class jh extends Tv{constructor(e,t,r){super(e,t,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new aa(this.firestore,null,new Be(e))}withConverter(e){return new jh(this.firestore,e,this._path)}}function yA(i,e,...t){if(i=To(i),arguments.length===1&&(e=_1.newId()),wP("doc","path",e),i instanceof gA){const r=Qt.fromString(e,...t);return wT(r),new aa(i,null,new Be(r))}{if(!(i instanceof aa||i instanceof jh))throw new Ge(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Qt.fromString(e,...t));return wT(r),new aa(i.firestore,i instanceof jh?i.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="AsyncQueue";class xT{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new JS(this,"async_queue_retry"),this.ju=()=>{const r=xd();r&&Ae(RT,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=xd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=xd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new go;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!So(e))throw e;Ae(RT,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,bn("INTERNAL UNHANDLED ERROR: ",CT(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const a=gv.createAndSchedule(this,e,t,r,u=>this.Xu(u));return this.Uu.push(a),a}Ju(){this.Ku&&He(47125,{ec:CT(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function CT(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class vA extends gA{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new xT,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xT(e),this._firestoreClient=void 0,await e}}}function RP(i,e,t){t||(t=Hd);const r=Oy(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),u=r.getOptions(t);if(_u(u,e))return a;throw new Ge(Se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ge(Se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PS)throw new Ge(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&zh(e.host)&&Rw(e.host),r.initialize({options:e,instanceIdentifier:t})}function xP(i){if(i._terminated)throw new Ge(Se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||CP(i),i._firestoreClient}function CP(i){var e,t,r;const a=i._freezeSettings(),u=function(d,p,v,T){return new YD(d,p,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,pA(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new vP(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this._byteString=e}static fromBase64String(e){try{return new am(Tn.fromBase64String(e))}catch(t){throw new Ge(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new am(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ge(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==a[u])return!1;return!0}(this._values,e._values)}}const NP=new RegExp("[~\\*/\\[\\]]");function PP(i,e,t){if(e.search(NP)>=0)throw DT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i);try{return new _A(...e.split("."))._internalPath}catch{throw DT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i)}}function DT(i,e,t,r,a){let u=`Function ${e}() called with invalid data`;u+=". ";let c="";return new Ge(Se.INVALID_ARGUMENT,u+i+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,r,a,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new aa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MP extends bA{data(){return super.data()}}function EA(i,e){return typeof e=="string"?PP(i,e):e instanceof _A?e._internalPath:e._delegate._internalPath}class kP{convertValue(e,t="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yh(e,(a,u)=>{r[a]=this.convertValue(u,t)}),r}convertVectorValue(e){var t,r,a;const u=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Nh].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>rn(c.doubleValue));return new OP(u)}convertGeoPoint(e){return new DP(rn(e.latitude),rn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_m(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const t=ca(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);$e(wS(r),9688,{name:e});const a=new wu(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return a.isEqual(t)||bn(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TA extends bA{constructor(e,t,r,a,u,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new LP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(EA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class LP extends TA{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(i){i=ST(i,aa);const e=ST(i.firestore,vA);return TP(xP(e),i._key).then(t=>jP(e,i,t))}class UP extends kP{constructor(e){super(),this.firestore=e}convertBytes(e){return new am(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new aa(this.firestore,null,t)}}function jP(i,e,t){const r=t.docs.get(e._key),a=new UP(i);return new TA(i,a,e._key,r,new VP(t.hasPendingWrites,t.fromCache),e.converter)}class BP{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=KP(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function zP(i){return new BP(i)}class qP{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Uh.provider,this._offlineComponentProvider={build:t=>new mA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class FP{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Uh.provider,this._offlineComponentProvider={build:t=>new gP(t,e==null?void 0:e.cacheSizeBytes)}}}function KP(i){return new qP(void 0)}function HP(){return new FP}(function(e,t=!0){(function(a){Hl=a})(Fl),Al(new bu("firestore",(r,{instanceIdentifier:a,options:u})=>{const c=r.getProvider("app").getImmediate(),d=new vA(new uD(r.getProvider("auth-internal")),new hD(c,r.getProvider("app-check-internal")),function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ge(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(v.options.projectId,T)}(c,a),c);return u=Object.assign({useFetchStreams:t},u),d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),mo(hE,fE,e),mo(hE,fE,"esm2017")})();const GP={apiKey:"AIzaSyBaP9APfVtEPw1sLQgHx26ZEZ7SPfutv28",authDomain:"tell-4f02c.firebaseapp.com",projectId:"tell-4f02c",storageBucket:"tell-4f02c.firebasestorage.app",messagingSenderId:"1032114981963",appId:"1:1032114981963:web:719ae9a5040929b739d1ce"},SA=Nw(GP),wv=nD(SA),AA=RP(SA,{localCache:zP({tabManager:HP()})});function QP({name:i,imageUrl:e}){const[t,r]=ge.useState(!1),a=()=>{r(!t)};return W.jsxs("div",{className:"relative border-b-1 pb-3 border-gray-300",children:[W.jsxs("div",{className:"flex items-center justify-start gap-2 pt-2 pb-2 rounded-md hover:bg-gray-100 cursor-pointer",onClick:a,children:[W.jsx("img",{src:e,alt:`${i}'s profile`,className:"w-5 h-5 rounded-sm object-cover"}),W.jsx("div",{className:"flex flex-col",children:W.jsx("span",{className:"text-base font-medium",children:i})})]}),t&&W.jsx("div",{className:"absolute top-full left-0 w-56 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:W.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>HC(wv),children:"Logg ut"})})]})}function YP(){const[i,e]=ge.useState(localStorage.getItem("lang")||"English"),t=r=>{e(r.target.value),localStorage.setItem("lang",r.target.value),document.documentElement.lang=r.target.value};return W.jsxs("select",{value:i,onChange:t,"aria-label":"Select language",className:"w-full mt-4 mb-4 focus:outline-none focus:ring-0 focus:border-none",children:[W.jsx("option",{value:"da",children:"Dansk"}),W.jsx("option",{value:"nl",children:"Nederlands"}),W.jsx("option",{value:"en",children:"English"}),W.jsx("option",{value:"et",children:"Eesti"}),W.jsx("option",{value:"fi",children:"Suomea"}),W.jsx("option",{value:"is",children:"slenska"}),W.jsx("option",{value:"no",children:"Norsk"}),W.jsx("option",{value:"se",children:"Svenska"}),W.jsx("option",{value:"fo",children:"Froyskt"})]})}function $P(){const{user:i}=ge.useContext(lm),[e,t]=ge.useState(!0);return W.jsxs("div",{className:"w-64 bg-white h-screen pl-4 pr-4 pt-2 shadow-md max-md:hidden flex flex-col",children:[W.jsxs("div",{className:"flex-1",children:[i&&W.jsx(QP,{name:i.displayName,imageUrl:i.photoURL}),W.jsxs("ul",{className:"space-y-2 w-full pt-3 mt-2",children:[W.jsx("li",{className:"w-full",children:W.jsx("a",{href:"/",className:"w-full text-left block hover:text-blue-600",children:"Home"})}),!i&&W.jsx("li",{className:"w-full",children:W.jsx("a",{href:"/account",className:"w-full text-left block hover:text-blue-600",children:"Account"})}),i&&W.jsx("li",{className:"w-full",children:W.jsx("a",{href:"/tracker",className:"w-full text-left block hover:text-blue-600",children:"Tracker"})}),W.jsx("li",{className:"w-full",children:W.jsx("a",{href:"/terms",className:"w-full text-left block hover:text-blue-600",children:"Terms and Conditions"})})]})]}),W.jsxs("div",{className:"",children:[e&&W.jsxs("div",{id:"dropdown-cta",className:"p-4 mt-6 rounded-lg bg-blue-50 dark:bg-blue-900",role:"alert",children:[W.jsxs("div",{className:"flex items-center mb-3",children:[W.jsx("span",{className:"bg-orange-100 text-orange-800 text-sm font-semibold me-2 px-2.5 py-0.5 rounded-sm dark:bg-orange-200 dark:text-orange-900",children:"New"}),W.jsxs("button",{type:"button",onClick:()=>t(!1),className:"ms-auto -mx-1.5 -my-1.5 bg-blue-50 inline-flex justify-center items-center w-6 h-6 text-blue-900 rounded-lg focus:ring-2 focus:ring-blue-400 p-1 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800","data-dismiss-target":"#dropdown-cta","aria-label":"Close",children:[W.jsx("span",{className:"sr-only",children:"Close"}),W.jsx("svg",{className:"w-2.5 h-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:W.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})]})]}),W.jsx("p",{className:"mb-3 text-sm text-blue-800 dark:text-blue-400",children:"Try using our app in your language! Tell now supports 9 languages in total!"})]}),W.jsx(YP,{})]})]})}function XP({message:i,onClose:e}){const[t,r]=ge.useState(!0);return ge.useEffect(()=>{const a=setTimeout(()=>{r(!1),e()},4e3);return()=>clearTimeout(a)},[e]),t?W.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-gray-50 text-black px-4 py-2 rounded-lg shadow-lg text-sm sm:text-base z-50 animate-fade-in-out",children:i}):null}const WP=[{id:1,name:"Banan",calories:100,fat:.1,protein:1.2,carbs:22.4},{id:2,name:"Eple",calories:52,fat:.2,protein:.3,carbs:14},{id:3,name:"Peanttsmr-brd",calories:280,fat:16,protein:9,carbs:24},{id:4,name:"Egg",calories:93,fat:6.6,protein:7.8,carbs:.7},{id:5,name:"Chocolate Cookie",calories:93.9,fat:4.8,protein:1,carbs:11.4},{id:6,name:"Tosti ham kaas",calories:350,fat:17,protein:19,carbs:30},{id:7,name:"Sultana kjeks (1)",calories:140,fat:4.5,protein:1.5,carbs:22},{id:8,name:"Cola (33cl)",calories:139,fat:0,protein:0,carbs:35},{id:9,name:"Apple Crumble (100g)",calories:170,fat:5,protein:1.5,carbs:30},{id:10,name:"Nudler (1 porsjon, ca. 300 kcal)",calories:300,fat:12,protein:7,carbs:40},{id:11,name:"Spelt Eierkoek (150 kcal)",calories:150,fat:3.5,protein:4,carbs:25},{id:12,name:"Smultring",calories:192,fat:11,protein:2,carbs:22},{id:13,name:"Protein Quark",calories:132,fat:.2,protein:25,carbs:6},{id:14,name:"Choco Mousse",calories:220,fat:13,protein:4,carbs:20},{id:15,name:"Chips",calories:275,fat:17,protein:3,carbs:25},{id:16,name:"Pannenkoek",calories:150,fat:5,protein:5,carbs:20},{id:17,name:"Eplejus (1 glass)",calories:117,fat:.2,protein:.1,carbs:28},{id:18,name:"Protein Shake (1 scoop + 300 ml melk)",calories:298,fat:6,protein:30,carbs:22},{id:19,name:"Drue (1 stk)",calories:3,fat:0,protein:0,carbs:.8},{id:20,name:"Margerhita Pizza",calories:940,fat:34,protein:40,carbs:108},{id:21,name:"KitKat",calories:219,fat:11,protein:2.6,carbs:27},{id:22,name:"Mandarin",calories:21,fat:.1,protein:.3,carbs:5},{id:23,name:"l (1 flaske)",calories:164,fat:0,protein:1.6,carbs:13},{id:24,name:"Croissant",calories:231,fat:12,protein:4.5,carbs:26},{id:25,name:"Hamburger (patty)",calories:250,fat:20,protein:17,carbs:0},{id:26,name:"Kroket",calories:180,fat:11,protein:6,carbs:15},{id:27,name:"Bolletje",calories:140,fat:2,protein:4,carbs:26},{id:28,name:"Kipfilet (100g)",calories:110,fat:1.5,protein:23,carbs:0},{id:29,name:"French Fries",calories:312,fat:15,protein:3.4,carbs:41},{id:30,name:"Oasis (1 glass, 200 ml)",calories:86,fat:0,protein:0,carbs:21.5},{id:31,name:"Braadworst (1)",calories:280,fat:24,protein:14,carbs:1},{id:32,name:"Curry saus (1 portion)",calories:40,fat:.5,protein:.5,carbs:9},{id:33,name:"Hamburger bread",calories:150,fat:2.5,protein:5,carbs:26},{id:34,name:"Mayonaise (1 portion)",calories:110,fat:12,protein:.2,carbs:.5}];function ZP({searchTerm:i,filteredFoods:e,addFood:t,setSearchTerm:r}){return W.jsxs(W.Fragment,{children:[W.jsx("input",{type:"text",placeholder:"Sk etter mat...",className:"w-full p-3 sm:p-2 mb-4 border rounded text-gray-900 bg-white text-base sm:text-base",value:i,onChange:a=>r(a.target.value)}),W.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i!==""&&e.map(a=>W.jsxs("div",{onClick:()=>t(a),className:"p-3 sm:p-2 bg-white rounded shadow cursor-pointer text-gray-900 text-sm sm:text-base",children:[a.name," - ",a.calories," kcal (Fat: ",a.fat,"g, Protein: ",a.protein,"g, Carbs: ",a.carbs,"g)"]},a.id))})]})}function JP({currentDate:i,changeDate:e}){const t=r=>{const a=new Date(r);return`${String(a.getDate()).padStart(2,"0")}-${String(a.getMonth()+1).padStart(2,"0")}-${a.getFullYear()}`};return W.jsxs("div",{className:"mb-2 flex justify-center gap-4",children:[W.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2  text-white rounded",children:W.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:W.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),W.jsx("span",{className:"text-gray-900 mt-2 cursor-pointer",onClick:()=>e(0),children:t(i)}),W.jsx("button",{onClick:()=>e(1),className:"px-4 py-2  text-white rounded ",children:W.jsx("svg",{className:"text-black w-6 h-6 cursor-pointer",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:W.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}function eM({totals:i,goals:e}){const t=Math.min(i.calories/e.calories*100,100),r=45,a=2*Math.PI*r,u=a-t/100*a;function c(d,p){return d>p?d-p:p-d}return W.jsxs("div",{className:"flex flex-col items-center mb-2",children:[W.jsxs("div",{className:"w-32 h-32 sm:w-32 sm:h-32 relative flex items-center justify-center",children:[W.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[W.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#e5e7eb",strokeWidth:"1"}),W.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#3b82f6",strokeWidth:"1",strokeDasharray:a,strokeDashoffset:u,className:"transition-all duration-500 ease-in-out",transform:"rotate(-90 50 50)"})]}),W.jsxs("div",{className:"absolute flex flex-col items-center justify-center text-gray-900",children:[W.jsx("span",{className:"text-2xl sm:text-2xl text-center",children:c(i.calories,e.calories)}),W.jsx("span",{className:"text-md sm:text-base text-center",children:i.calories>e.calories?"over":"igjen"})]})]}),W.jsx("div",{id:"confetti"}),W.jsxs("div",{className:"flex flex-row justify-center gap-4 rounded-lg bg-white shadow pl-2 pr-2 sm:p-2 w-full sm:w-auto",children:[W.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[W.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Karbs"}),W.jsxs("span",{className:"text-base sm:text-lg",children:[i.carbs.toFixed(0),"/",e.carbs,"g"]})]}),W.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[W.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Proteiner"}),W.jsxs("span",{className:"text-base sm:text-lg",children:[i.protein.toFixed(0),"/",e.protein,"g"]})]}),W.jsxs("div",{className:"flex flex-col items-center justify-center w-full sm:w-24 h-20 sm:h-24 text-gray-900 ml-5 mr-5",children:[W.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Fett"}),W.jsxs("span",{className:"text-base sm:text-lg",children:[i.fat.toFixed(0),"/",e.fat,"g"]})]})]})]})}function tM({selectedFoods:i,currentDate:e,removeFood:t,updateQuantity:r}){const a=i[e]||[];return W.jsxs("div",{className:"mt-4",children:[W.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Valgte matvarer"}),a.length===0?W.jsx("p",{className:"text-gray-500",children:"Ingen matvarer valgt for denne dagen."}):W.jsx("ul",{className:"space-y-2",children:a.map((u,c)=>W.jsxs("li",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[W.jsxs("span",{children:[u.food.name," - ",(u.food.calories*u.quantity).toFixed(0)," kcal"]}),W.jsxs("div",{className:"flex items-center space-x-2",children:[W.jsx("button",{onClick:()=>r(c,-1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"-"}),W.jsx("span",{className:"w-8 text-center",children:u.quantity}),W.jsx("button",{onClick:()=>r(c,1),className:"w-8 h-8 flex items-center justify-center border border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"+"}),W.jsx("button",{onClick:()=>t(c),className:"px-2 py-1 border text-sm border-gray-300 rounded hover:bg-gray-200 transition-colors cursor-pointer",children:"Fjern"})]})]},`${u.food.id}-${c}`))})]})}function Sv(){const{user:i}=ge.useContext(lm);return W.jsx("footer",{className:"rounded-lg ml-[-10px]",children:W.jsxs("div",{className:"w-full mx-auto max-w-screen-xl p-4 md:flex md:items-center md:justify-between",children:[W.jsxs("span",{className:"text-sm text-gray-500 sm:text-center",children:[" ",new Date().getFullYear()," ",W.jsx("a",{href:"/",className:"hover:underline",children:"Tell"}),". All Rights Reserved."]}),W.jsxs("ul",{className:"flex flex-wrap items-center mt-3 text-sm font-medium text-gray-500 sm:mt-0",children:[W.jsx("li",{children:W.jsx("a",{href:"/",className:"hover:underline me-4 md:me-6",children:"Home"})}),!i&&W.jsx("li",{children:W.jsx("a",{href:"/account",className:"hover:underline me-4 md:me-6",children:"Account"})}),i&&W.jsx("li",{children:W.jsx("a",{href:"/tracker",className:"hover:underline me-4 md:me-6",children:"Tracker"})}),W.jsx("li",{children:W.jsx("a",{href:"/terms",className:"hover:underline me-4 md:me-6",children:"Terms"})})]})]})})}var Cd={exports:{}},nM=Cd.exports,OT;function rM(){return OT||(OT=1,function(i,e){(function(t,r){i.exports=r()})(nM,function(){var t=function(f,g){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(_[A]=E[A])})(f,g)},r=function(){return(r=Object.assign||function(f){for(var g,_=1,E=arguments.length;_<E;_++)for(var A in g=arguments[_])Object.prototype.hasOwnProperty.call(g,A)&&(f[A]=g[A]);return f}).apply(this,arguments)};function a(f,g,_){for(var E,A=0,R=g.length;A<R;A++)!E&&A in g||((E=E||Array.prototype.slice.call(g,0,A))[A]=g[A]);return f.concat(E||Array.prototype.slice.call(g))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:dR,c=Object.keys,d=Array.isArray;function p(f,g){return typeof g!="object"||c(g).forEach(function(_){f[_]=g[_]}),f}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var v=Object.getPrototypeOf,T={}.hasOwnProperty;function I(f,g){return T.call(f,g)}function C(f,g){typeof g=="function"&&(g=g(v(f))),(typeof Reflect>"u"?c:Reflect.ownKeys)(g).forEach(function(_){B(f,_,g[_])})}var z=Object.defineProperty;function B(f,g,_,E){z(f,g,p(_&&I(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},E))}function he(f){return{from:function(g){return f.prototype=Object.create(g.prototype),B(f.prototype,"constructor",f),{extend:C.bind(null,f.prototype)}}}}var ue=Object.getOwnPropertyDescriptor,ve=[].slice;function pe(f,g,_){return ve.call(f,g,_)}function oe(f,g){return g(f)}function Re(f){if(!f)throw new Error("Assertion Failed")}function xe(f){u.setImmediate?setImmediate(f):setTimeout(f,0)}function Me(f,g){if(typeof g=="string"&&I(f,g))return f[g];if(!g)return f;if(typeof g!="string"){for(var _=[],E=0,A=g.length;E<A;++E){var R=Me(f,g[E]);_.push(R)}return _}var O=g.indexOf(".");if(O!==-1){var P=f[g.substr(0,O)];return P==null?void 0:Me(P,g.substr(O+1))}}function L(f,g,_){if(f&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof g!="string"&&"length"in g){Re(typeof _!="string"&&"length"in _);for(var E=0,A=g.length;E<A;++E)L(f,g[E],_[E])}else{var R,O,P=g.indexOf(".");P!==-1?(R=g.substr(0,P),(O=g.substr(P+1))===""?_===void 0?d(f)&&!isNaN(parseInt(R))?f.splice(R,1):delete f[R]:f[R]=_:L(P=!(P=f[R])||!I(f,R)?f[R]={}:P,O,_)):_===void 0?d(f)&&!isNaN(parseInt(g))?f.splice(g,1):delete f[g]:f[g]=_}}function N(f){var g,_={};for(g in f)I(f,g)&&(_[g]=f[g]);return _}var M=[].concat;function q(f){return M.apply([],f)}var Pt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(q([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(g){return g+f+"Array"})}))).filter(function(f){return u[f]}),Y=new Set(Pt.map(function(f){return u[f]})),Z=null;function V(f){return Z=new WeakMap,f=function g(_){if(!_||typeof _!="object")return _;var E=Z.get(_);if(E)return E;if(d(_)){E=[],Z.set(_,E);for(var A=0,R=_.length;A<R;++A)E.push(g(_[A]))}else if(Y.has(_.constructor))E=_;else{var O,P=v(_);for(O in E=P===Object.prototype?{}:Object.create(P),Z.set(_,E),_)I(_,O)&&(E[O]=g(_[O]))}return E}(f),Z=null,f}var Dn={}.toString;function Yt(f){return Dn.call(f).slice(8,-1)}var ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Le=typeof ye=="symbol"?function(f){var g;return f!=null&&(g=f[ye])&&g.apply(f)}:function(){return null};function Qe(f,g){return g=f.indexOf(g),0<=g&&f.splice(g,1),0<=g}var pt={};function j(f){var g,_,E,A;if(arguments.length===1){if(d(f))return f.slice();if(this===pt&&typeof f=="string")return[f];if(A=Le(f)){for(_=[];!(E=A.next()).done;)_.push(E.value);return _}if(f==null)return[f];if(typeof(g=f.length)!="number")return[f];for(_=new Array(g);g--;)_[g]=f[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var we=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},is=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(is),je={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(f,g){this.name=f,this.message=g}function We(f,g){return f+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,E,A){return A.indexOf(_)===E}).join(`
`)}function ct(f,g,_,E){this.failures=g,this.failedKeys=E,this.successCount=_,this.message=We(f,g)}function et(f,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=We(f,this.failures)}he(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),he(ct).from(Ie),he(et).from(Ie);var un=Er.reduce(function(f,g){return f[g]=g+"Error",f},{}),jt=Ie,Fe=Er.reduce(function(f,g){var _=g+"Error";function E(A,R){this.name=_,A?typeof A=="string"?(this.message="".concat(A).concat(R?`
 `+R:""),this.inner=R||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=je[g]||_,this.inner=null)}return he(E).from(jt),f[g]=E,f},{});Fe.Syntax=SyntaxError,Fe.Type=TypeError,Fe.Range=RangeError;var Pi=is.reduce(function(f,g){return f[g+"Error"]=Fe[g],f},{}),Ar=Er.reduce(function(f,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(f[g+"Error"]=Fe[g]),f},{});function Tt(){}function Br(f){return f}function Cs(f,g){return f==null||f===Br?g:function(_){return g(f(_))}}function zr(f,g){return function(){f.apply(this,arguments),g.apply(this,arguments)}}function Pu(f,g){return f===Tt?g:function(){var _=f.apply(this,arguments);_!==void 0&&(arguments[0]=_);var E=this.onsuccess,A=this.onerror;this.onsuccess=null,this.onerror=null;var R=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?zr(E,this.onsuccess):E),A&&(this.onerror=this.onerror?zr(A,this.onerror):A),R!==void 0?R:_}}function Ir(f,g){return f===Tt?g:function(){f.apply(this,arguments);var _=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?zr(_,this.onsuccess):_),E&&(this.onerror=this.onerror?zr(E,this.onerror):E)}}function Wl(f,g){return f===Tt?g:function(_){var E=f.apply(this,arguments);p(_,E);var A=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?zr(A,this.onsuccess):A),R&&(this.onerror=this.onerror?zr(R,this.onerror):R),E===void 0?_===void 0?void 0:_:p(E,_)}}function Ao(f,g){return f===Tt?g:function(){return g.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function rs(f,g){return f===Tt?g:function(){var _=f.apply(this,arguments);if(_&&typeof _.then=="function"){for(var E=this,A=arguments.length,R=new Array(A);A--;)R[A]=arguments[A];return _.then(function(){return g.apply(E,R)})}return g.apply(this,arguments)}}Ar.ModifyError=ct,Ar.DexieError=Ie,Ar.BulkError=et;var Ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mu(f){Ln=f}var li={},ya=100,Pt=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,v(f),f];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,v(g),f]}(),is=Pt[0],Er=Pt[1],Pt=Pt[2],Er=Er&&Er.then,yt=is&&is.constructor,Yn=!!Pt,ln=function(f,g){qr.push([f,g]),_a&&(queueMicrotask(ba),_a=!1)},va=!0,_a=!0,pr=[],ci=[],Mi=Br,wn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Tt,pgp:!1,env:{},finalize:Tt},qe=wn,qr=[],Fr=0,ss=[];function Ue(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=qe;if(typeof f!="function"){if(f!==li)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ds(this,this._value))}this._state=null,this._value=null,++g.ref,function _(E,A){try{A(function(R){if(E._state===null){if(R===E)throw new TypeError("A promise cannot be resolved with itself.");var O=E._lib&&gr();R&&typeof R.then=="function"?_(E,function(P,K){R instanceof Ue?R._then(P,K):R.then(P,K)}):(E._state=!0,E._value=R,Hr(E)),O&&ki()}},Ds.bind(null,E))}catch(R){Ds(E,R)}}(this,f)}var Kr={get:function(){var f=qe,g=Ns;function _(E,A){var R=this,O=!f.global&&(f!==qe||g!==Ns),P=O&&!On(),K=new Ue(function(G,X){Os(R,new hi(xr(E,f,O,P),xr(A,f,O,P),G,X,f))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return _.prototype=li,_},set:function(f){B(this,"then",f&&f.prototype===li?Kr:{get:function(){return f},set:Kr.set})}};function hi(f,g,_,E,A){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=E,this.psd=A}function Ds(f,g){var _,E;ci.push(g),f._state===null&&(_=f._lib&&gr(),g=Mi(g),f._state=!1,f._value=g,E=f,pr.some(function(A){return A._value===E._value})||pr.push(E),Hr(f),_&&ki())}function Hr(f){var g=f._listeners;f._listeners=[];for(var _=0,E=g.length;_<E;++_)Os(f,g[_]);var A=f._PSD;--A.ref||A.finalize(),Fr===0&&(++Fr,ln(function(){--Fr==0&&Bt()},[]))}function Os(f,g){if(f._state!==null){var _=f._state?g.onFulfilled:g.onRejected;if(_===null)return(f._state?g.resolve:g.reject)(f._value);++g.psd.ref,++Fr,ln(as,[_,f,g])}else f._listeners.push(g)}function as(f,g,_){try{var E,A=g._value;!g._state&&ci.length&&(ci=[]),E=Ln&&g._consoleTask?g._consoleTask.run(function(){return f(A)}):f(A),g._state||ci.indexOf(A)!==-1||function(R){for(var O=pr.length;O;)if(pr[--O]._value===R._value)return pr.splice(O,1)}(g),_.resolve(E)}catch(R){_.reject(R)}finally{--Fr==0&&Bt(),--_.psd.ref||_.psd.finalize()}}function ba(){Rr(wn,function(){gr()&&ki()})}function gr(){var f=va;return _a=va=!1,f}function ki(){var f,g,_;do for(;0<qr.length;)for(f=qr,qr=[],_=f.length,g=0;g<_;++g){var E=f[g];E[0].apply(null,E[1])}while(0<qr.length);_a=va=!0}function Bt(){var f=pr;pr=[],f.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var g=ss.slice(0),_=g.length;_;)g[--_]()}function Jt(f){return new Ue(li,!1,f)}function ut(f,g){var _=qe;return function(){var E=gr(),A=qe;try{return Mt(_,!0),f.apply(this,arguments)}catch(R){g&&g(R)}finally{Mt(A,!1),E&&ki()}}}C(Ue.prototype,{then:Kr,_then:function(f,g){Os(this,new hi(null,null,f,g,qe))},catch:function(f){if(arguments.length===1)return this.then(null,f);var g=f,_=arguments[1];return typeof g=="function"?this.then(null,function(E){return(E instanceof g?_:Jt)(E)}):this.then(null,function(E){return(E&&E.name===g?_:Jt)(E)})},finally:function(f){return this.then(function(g){return Ue.resolve(f()).then(function(){return g})},function(g){return Ue.resolve(f()).then(function(){return Jt(g)})})},timeout:function(f,g){var _=this;return f<1/0?new Ue(function(E,A){var R=setTimeout(function(){return A(new Fe.Timeout(g))},f);_.then(E,A).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(Ue.prototype,Symbol.toStringTag,"Dexie.Promise"),wn.env=Ta(),C(Ue,{all:function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g,_){f.length===0&&g([]);var E=f.length;f.forEach(function(A,R){return Ue.resolve(A).then(function(O){f[R]=O,--E||g(f)},_)})})},resolve:function(f){return f instanceof Ue?f:f&&typeof f.then=="function"?new Ue(function(g,_){f.then(g,_)}):new Ue(li,!0,f)},reject:Jt,race:function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g,_){f.map(function(E){return Ue.resolve(E).then(g,_)})})},PSD:{get:function(){return qe},set:function(f){return qe=f}},totalEchoes:{get:function(){return Ns}},newPSD:$n,usePSD:Rr,scheduler:{get:function(){return ln},set:function(f){ln=f}},rejectionMapper:{get:function(){return Mi},set:function(f){Mi=f}},follow:function(f,g){return new Ue(function(_,E){return $n(function(A,R){var O=qe;O.unhandleds=[],O.onunhandled=R,O.finalize=zr(function(){var P,K=this;P=function(){K.unhandleds.length===0?A():R(K.unhandleds[0])},ss.push(function G(){P(),ss.splice(ss.indexOf(G),1)}),++Fr,ln(function(){--Fr==0&&Bt()},[])},O.finalize),f()},g,_,E)})}}),yt&&(yt.allSettled&&B(Ue,"allSettled",function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g){f.length===0&&g([]);var _=f.length,E=new Array(_);f.forEach(function(A,R){return Ue.resolve(A).then(function(O){return E[R]={status:"fulfilled",value:O}},function(O){return E[R]={status:"rejected",reason:O}}).then(function(){return--_||g(E)})})})}),yt.any&&typeof AggregateError<"u"&&B(Ue,"any",function(){var f=j.apply(null,arguments).map(yr);return new Ue(function(g,_){f.length===0&&_(new AggregateError([]));var E=f.length,A=new Array(E);f.forEach(function(R,O){return Ue.resolve(R).then(function(P){return g(P)},function(P){A[O]=P,--E||_(new AggregateError(A))})})})}),yt.withResolvers&&(Ue.withResolvers=yt.withResolvers));var Ot={awaits:0,echoes:0,id:0},Io=0,Ea=[],Gr=0,Ns=0,Ps=0;function $n(f,g,_,E){var A=qe,R=Object.create(A);return R.parent=A,R.ref=0,R.global=!1,R.id=++Ps,wn.env,R.env=Yn?{Promise:Ue,PromiseProp:{value:Ue,configurable:!0,writable:!0},all:Ue.all,race:Ue.race,allSettled:Ue.allSettled,any:Ue.any,resolve:Ue.resolve,reject:Ue.reject}:{},g&&p(R,g),++A.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Rr(R,f,_,E),R.ref===0&&R.finalize(),E}function ir(){return Ot.id||(Ot.id=++Io),++Ot.awaits,Ot.echoes+=ya,Ot.id}function On(){return!!Ot.awaits&&(--Ot.awaits==0&&(Ot.id=0),Ot.echoes=Ot.awaits*ya,!0)}function yr(f){return Ot.echoes&&f&&f.constructor===yt?(ir(),f.then(function(g){return On(),g},function(g){return On(),$t(g)})):f}function Xn(){var f=Ea[Ea.length-1];Ea.pop(),Mt(f,!1)}function Mt(f,g){var _,E=qe;(g?!Ot.echoes||Gr++&&f===qe:!Gr||--Gr&&f===qe)||queueMicrotask(g?(function(A){++Ns,Ot.echoes&&--Ot.echoes!=0||(Ot.echoes=Ot.awaits=Ot.id=0),Ea.push(qe),Mt(A,!0)}).bind(null,f):Xn),f!==qe&&(qe=f,E===wn&&(wn.env=Ta()),Yn&&(_=wn.env.Promise,g=f.env,(E.global||f.global)&&(Object.defineProperty(u,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function Ta(){var f=u.Promise;return Yn?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Rr(f,g,_,E,A){var R=qe;try{return Mt(f,!0),g(_,E,A)}finally{Mt(R,!1)}}function xr(f,g,_,E){return typeof f!="function"?f:function(){var A=qe;_&&ir(),Mt(g,!0);try{return f.apply(this,arguments)}finally{Mt(A,!1),E&&queueMicrotask(On)}}}function Qr(f){Promise===yt&&Ot.echoes===0?Gr===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Er).indexOf("[native code]")===-1&&(ir=On=Tt);var $t=Ue.reject,fi="",Wn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ro="String expected.",vr=[],_r="__dbnames",mn="readonly",Vi="readwrite";function di(f,g){return f?g?function(){return f.apply(this,arguments)&&g.apply(this,arguments)}:f:g}var mi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Li(f){return typeof f!="string"||/\./.test(f)?function(g){return g}:function(g){return g[f]===void 0&&f in g&&delete(g=V(g))[f],g}}function Ms(){throw Fe.Type()}function ht(f,g){try{var _=ks(f),E=ks(g);if(_!==E)return _==="Array"?1:E==="Array"?-1:_==="binary"?1:E==="binary"?-1:_==="string"?1:E==="string"?-1:_==="Date"?1:E!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<f?1:f<g?-1:0;case"binary":return function(A,R){for(var O=A.length,P=R.length,K=O<P?O:P,G=0;G<K;++G)if(A[G]!==R[G])return A[G]<R[G]?-1:1;return O===P?0:O<P?-1:1}(Un(f),Un(g));case"Array":return function(A,R){for(var O=A.length,P=R.length,K=O<P?O:P,G=0;G<K;++G){var X=ht(A[G],R[G]);if(X!==0)return X}return O===P?0:O<P?-1:1}(f,g)}}catch{}return NaN}function ks(f){var g=typeof f;return g!="object"?g:ArrayBuffer.isView(f)?"binary":(f=Yt(f),f==="ArrayBuffer"?"binary":f)}function Un(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var wa=(kt.prototype._trans=function(f,g,_){var E=this._tx||qe.trans,A=this.name,R=Ln&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function O(G,X,U){if(!U.schema[A])throw new Fe.NotFound("Table "+A+" not part of transaction");return g(U.idbtrans,U)}var P=gr();try{var K=E&&E.db._novip===this.db._novip?E===qe.trans?E._promise(f,O,_):$n(function(){return E._promise(f,O,_)},{trans:E,transless:qe.transless||qe}):function G(X,U,ee,F){if(X.idbdb&&(X._state.openComplete||qe.letThrough||X._vip)){var $=X._createTransaction(U,ee,X._dbSchema);try{$.create(),X._state.PR1398_maxLoop=3}catch(te){return te.name===un.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,U,ee,F)})):$t(te)}return $._promise(U,function(te,Q){return $n(function(){return qe.trans=$,F(te,Q,$)})}).then(function(te){if(U==="readwrite")try{$.idbtrans.commit()}catch{}return U==="readonly"?te:$._completion.then(function(){return te})})}if(X._state.openComplete)return $t(new Fe.DatabaseClosed(X._state.dbOpenError));if(!X._state.isBeingOpened){if(!X._state.autoOpen)return $t(new Fe.DatabaseClosed);X.open().catch(Tt)}return X._state.dbReadyPromise.then(function(){return G(X,U,ee,F)})}(this.db,f,[this.name],O);return R&&(K._consoleTask=R,K=K.catch(function(G){return console.trace(G),$t(G)})),K}finally{P&&ki()}},kt.prototype.get=function(f,g){var _=this;return f&&f.constructor===Object?this.where(f).first(g):f==null?$t(new Fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return _.core.get({trans:E,key:f}).then(function(A){return _.hook.reading.fire(A)})}).then(g)},kt.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(d(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var g=c(f);if(g.length===1)return this.where(g[0]).equals(f[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&g.every(function(G){return 0<=P.keyPath.indexOf(G)})){for(var K=0;K<g.length;++K)if(g.indexOf(P.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(P,K){return P.keyPath.length-K.keyPath.length})[0];if(_&&this.db._maxKey!==fi){var R=_.keyPath.slice(0,g.length);return this.where(R).equals(R.map(function(K){return f[K]}))}!_&&Ln&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var E=this.schema.idxByName;function A(P,K){return ht(P,K)===0}var O=g.reduce(function(U,K){var G=U[0],X=U[1],U=E[K],ee=f[K];return[G||U,G||!U?di(X,U&&U.multi?function(F){return F=Me(F,K),d(F)&&F.some(function($){return A(ee,$)})}:function(F){return A(ee,Me(F,K))}):X]},[null,null]),R=O[0],O=O[1];return R?this.where(R.name).equals(f[R.keyPath]).filter(O):_?this.filter(O):this.where(g).equals("")},kt.prototype.filter=function(f){return this.toCollection().and(f)},kt.prototype.count=function(f){return this.toCollection().count(f)},kt.prototype.offset=function(f){return this.toCollection().offset(f)},kt.prototype.limit=function(f){return this.toCollection().limit(f)},kt.prototype.each=function(f){return this.toCollection().each(f)},kt.prototype.toArray=function(f){return this.toCollection().toArray(f)},kt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kt.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,d(f)?"[".concat(f.join("+"),"]"):f))},kt.prototype.reverse=function(){return this.toCollection().reverse()},kt.prototype.mapToClass=function(f){var g,_=this.db,E=this.name;function A(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Ms&&(function(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function X(){this.constructor=K}t(K,G),K.prototype=G===null?Object.create(G):(X.prototype=G.prototype,new X)}(A,g=f),Object.defineProperty(A.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),A.prototype.table=function(){return E},f=A);for(var R=new Set,O=f.prototype;O;O=v(O))Object.getOwnPropertyNames(O).forEach(function(K){return R.add(K)});function P(K){if(!K)return K;var G,X=Object.create(f.prototype);for(G in K)if(!R.has(G))try{X[G]=K[G]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),f},kt.prototype.defineClass=function(){return this.mapToClass(function(f){p(this,f)})},kt.prototype.add=function(f,g){var _=this,E=this.schema.primKey,A=E.auto,R=E.keyPath,O=f;return R&&A&&(O=Li(R)(f)),this._trans("readwrite",function(P){return _.core.mutate({trans:P,type:"add",keys:g!=null?[g]:null,values:[O]})}).then(function(P){return P.numFailures?Ue.reject(P.failures[0]):P.lastResult}).then(function(P){if(R)try{L(f,R,P)}catch{}return P})},kt.prototype.update=function(f,g){return typeof f!="object"||d(f)?this.where(":id").equals(f).modify(g):(f=Me(f,this.schema.primKey.keyPath),f===void 0?$t(new Fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(g))},kt.prototype.put=function(f,g){var _=this,E=this.schema.primKey,A=E.auto,R=E.keyPath,O=f;return R&&A&&(O=Li(R)(f)),this._trans("readwrite",function(P){return _.core.mutate({trans:P,type:"put",values:[O],keys:g!=null?[g]:null})}).then(function(P){return P.numFailures?Ue.reject(P.failures[0]):P.lastResult}).then(function(P){if(R)try{L(f,R,P)}catch{}return P})},kt.prototype.delete=function(f){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[f]})}).then(function(_){return _.numFailures?Ue.reject(_.failures[0]):void 0})},kt.prototype.clear=function(){var f=this;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"deleteRange",range:mi})}).then(function(g){return g.numFailures?Ue.reject(g.failures[0]):void 0})},kt.prototype.bulkGet=function(f){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:f,trans:_}).then(function(E){return E.map(function(A){return g.hook.reading.fire(A)})})})},kt.prototype.bulkAdd=function(f,g,_){var E=this,A=Array.isArray(g)?g:void 0,R=(_=_||(A?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=E.schema.primKey,P=G.auto,G=G.keyPath;if(G&&A)throw new Fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var K=f.length,G=G&&P?f.map(Li(G)):f;return E.core.mutate({trans:O,type:"add",keys:A,values:G,wantResults:R}).then(function($){var U=$.numFailures,ee=$.results,F=$.lastResult,$=$.failures;if(U===0)return R?ee:F;throw new et("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(K," operations failed"),$)})})},kt.prototype.bulkPut=function(f,g,_){var E=this,A=Array.isArray(g)?g:void 0,R=(_=_||(A?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(O){var G=E.schema.primKey,P=G.auto,G=G.keyPath;if(G&&A)throw new Fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==f.length)throw new Fe.InvalidArgument("Arguments objects and keys must have the same length");var K=f.length,G=G&&P?f.map(Li(G)):f;return E.core.mutate({trans:O,type:"put",keys:A,values:G,wantResults:R}).then(function($){var U=$.numFailures,ee=$.results,F=$.lastResult,$=$.failures;if(U===0)return R?ee:F;throw new et("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(K," operations failed"),$)})})},kt.prototype.bulkUpdate=function(f){var g=this,_=this.core,E=f.map(function(O){return O.key}),A=f.map(function(O){return O.changes}),R=[];return this._trans("readwrite",function(O){return _.getMany({trans:O,keys:E,cache:"clone"}).then(function(P){var K=[],G=[];f.forEach(function(U,ee){var F=U.key,$=U.changes,te=P[ee];if(te){for(var Q=0,ae=Object.keys($);Q<ae.length;Q++){var fe=ae[Q],de=$[fe];if(fe===g.schema.primKey.keyPath){if(ht(de,F)!==0)throw new Fe.Constraint("Cannot update primary key in bulkUpdate()")}else L(te,fe,de)}R.push(ee),K.push(F),G.push(te)}});var X=K.length;return _.mutate({trans:O,type:"put",keys:K,values:G,updates:{keys:E,changeSpecs:A}}).then(function(U){var ee=U.numFailures,F=U.failures;if(ee===0)return X;for(var $=0,te=Object.keys(F);$<te.length;$++){var Q,ae=te[$],fe=R[Number(ae)];fe!=null&&(Q=F[ae],delete F[ae],F[fe]=Q)}throw new et("".concat(g.name,".bulkUpdate(): ").concat(ee," of ").concat(X," operations failed"),F)})})})},kt.prototype.bulkDelete=function(f){var g=this,_=f.length;return this._trans("readwrite",function(E){return g.core.mutate({trans:E,type:"delete",keys:f})}).then(function(O){var A=O.numFailures,R=O.lastResult,O=O.failures;if(A===0)return R;throw new et("".concat(g.name,".bulkDelete(): ").concat(A," of ").concat(_," operations failed"),O)})},kt);function kt(){}function pi(f){function g(O,P){if(P){for(var K=arguments.length,G=new Array(K-1);--K;)G[K-1]=arguments[K];return _[O].subscribe.apply(null,G),f}if(typeof O=="string")return _[O]}var _={};g.addEventType=R;for(var E=1,A=arguments.length;E<A;++E)R(arguments[E]);return g;function R(O,P,K){if(typeof O!="object"){var G;P=P||Ao;var X={subscribers:[],fire:K=K||Tt,subscribe:function(U){X.subscribers.indexOf(U)===-1&&(X.subscribers.push(U),X.fire=P(X.fire,U))},unsubscribe:function(U){X.subscribers=X.subscribers.filter(function(ee){return ee!==U}),X.fire=X.subscribers.reduce(P,K)}};return _[O]=g[O]=X}c(G=O).forEach(function(U){var ee=G[U];if(d(ee))R(U,G[U][0],G[U][1]);else{if(ee!=="asap")throw new Fe.InvalidArgument("Invalid event config");var F=R(U,Br,function(){for(var $=arguments.length,te=new Array($);$--;)te[$]=arguments[$];F.subscribers.forEach(function(Q){xe(function(){Q.apply(null,te)})})})}})}}function Ui(f,g){return he(g).from({prototype:f}),g}function Cr(f,g){return!(f.filter||f.algorithm||f.or)&&(g?f.justLimit:!f.replayFilter)}function xo(f,g){f.filter=di(f.filter,g)}function en(f,g,_){var E=f.replayFilter;f.replayFilter=E?function(){return di(E(),g())}:g,f.justLimit=_&&!E}function jn(f,g){if(f.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(f.index);if(!_)throw new Fe.Schema("KeyPath "+f.index+" on object store "+g.name+" is not indexed");return _}function os(f,g,_){var E=jn(f,g.schema);return g.openCursor({trans:_,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:E,range:f.range}})}function Yr(f,g,_,E){var A=f.replayFilter?di(f.filter,f.replayFilter()):f.filter;if(f.or){var R={},O=function(P,K,G){var X,U;A&&!A(K,G,function(ee){return K.stop(ee)},function(ee){return K.fail(ee)})||((U=""+(X=K.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(X)),I(R,U)||(R[U]=!0,g(P,K,G)))};return Promise.all([f.or._iterate(O,_),gi(os(f,E,_),f.algorithm,O,!f.keysOnly&&f.valueMapper)])}return gi(os(f,E,_),di(f.algorithm,A),g,!f.keysOnly&&f.valueMapper)}function gi(f,g,_,E){var A=ut(E?function(R,O,P){return _(E(R),O,P)}:_);return f.then(function(R){if(R)return R.start(function(){var O=function(){return R.continue()};g&&!g(R,function(P){return O=P},function(P){R.stop(P),O=Tt},function(P){R.fail(P),O=Tt})||A(R.value,R,function(P){return O=P}),O()})})}var It=(us.prototype.execute=function(f){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(d(_))return a(a([],d(f)?f:[],!0),_).sort();if(typeof _=="number")return(Number(f)||0)+_;if(typeof _=="bigint")try{return BigInt(f)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var E=g.remove;if(d(E))return d(f)?f.filter(function(A){return!E.includes(A)}).sort():[];if(typeof E=="number")return Number(f)-E;if(typeof E=="bigint")try{return BigInt(f)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof f=="string"&&f.startsWith(_)?g.replacePrefix[1]+f.substring(_.length):f},us);function us(f){this["@@propmod"]=f}var Dr=(dt.prototype._read=function(f,g){var _=this._ctx;return _.error?_.table._trans(null,$t.bind(null,_.error)):_.table._trans("readonly",f).then(g)},dt.prototype._write=function(f){var g=this._ctx;return g.error?g.table._trans(null,$t.bind(null,g.error)):g.table._trans("readwrite",f,"locked")},dt.prototype._addAlgorithm=function(f){var g=this._ctx;g.algorithm=di(g.algorithm,f)},dt.prototype._iterate=function(f,g){return Yr(this._ctx,f,g,this._ctx.table.core)},dt.prototype.clone=function(f){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return f&&p(_,f),g._ctx=_,g},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(f){var g=this._ctx;return this._read(function(_){return Yr(g,f,_,g.table.core)})},dt.prototype.count=function(f){var g=this;return this._read(function(_){var E=g._ctx,A=E.table.core;if(Cr(E,!0))return A.count({trans:_,query:{index:jn(E,A.schema),range:E.range}}).then(function(O){return Math.min(O,E.limit)});var R=0;return Yr(E,function(){return++R,!1},_,A).then(function(){return R})}).then(f)},dt.prototype.sortBy=function(f,g){var _=f.split(".").reverse(),E=_[0],A=_.length-1;function R(K,G){return G?R(K[_[G]],G-1):K[E]}var O=this._ctx.dir==="next"?1:-1;function P(K,G){return ht(R(K,A),R(G,A))*O}return this.toArray(function(K){return K.sort(P)}).then(g)},dt.prototype.toArray=function(f){var g=this;return this._read(function(_){var E=g._ctx;if(E.dir==="next"&&Cr(E,!0)&&0<E.limit){var A=E.valueMapper,R=jn(E,E.table.core.schema);return E.table.core.query({trans:_,limit:E.limit,values:!0,query:{index:R,range:E.range}}).then(function(P){return P=P.result,A?P.map(A):P})}var O=[];return Yr(E,function(P){return O.push(P)},_,E.table.core).then(function(){return O})},f)},dt.prototype.offset=function(f){var g=this._ctx;return f<=0||(g.offset+=f,Cr(g)?en(g,function(){var _=f;return function(E,A){return _===0||(_===1?--_:A(function(){E.advance(_),_=0}),!1)}}):en(g,function(){var _=f;return function(){return--_<0}})),this},dt.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),en(this._ctx,function(){var g=f;return function(_,E,A){return--g<=0&&E(A),0<=g}},!0),this},dt.prototype.until=function(f,g){return xo(this._ctx,function(_,E,A){return!f(_.value)||(E(A),g)}),this},dt.prototype.first=function(f){return this.limit(1).toArray(function(g){return g[0]}).then(f)},dt.prototype.last=function(f){return this.reverse().first(f)},dt.prototype.filter=function(f){var g;return xo(this._ctx,function(_){return f(_.value)}),(g=this._ctx).isMatch=di(g.isMatch,f),this},dt.prototype.and=function(f){return this.filter(f)},dt.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(f){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){f(E.key,E)})},dt.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},dt.prototype.eachPrimaryKey=function(f){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){f(E.primaryKey,E)})},dt.prototype.keys=function(f){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,A){_.push(A.key)}).then(function(){return _}).then(f)},dt.prototype.primaryKeys=function(f){var g=this._ctx;if(g.dir==="next"&&Cr(g,!0)&&0<g.limit)return this._read(function(E){var A=jn(g,g.table.core.schema);return g.table.core.query({trans:E,values:!1,limit:g.limit,query:{index:A,range:g.range}})}).then(function(E){return E.result}).then(f);g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,A){_.push(A.primaryKey)}).then(function(){return _}).then(f)},dt.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},dt.prototype.firstKey=function(f){return this.limit(1).keys(function(g){return g[0]}).then(f)},dt.prototype.lastKey=function(f){return this.reverse().firstKey(f)},dt.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var g={};return xo(this._ctx,function(A){var E=A.primaryKey.toString(),A=I(g,E);return g[E]=!0,!A}),this},dt.prototype.modify=function(f){var g=this,_=this._ctx;return this._write(function(E){var A,R,O;O=typeof f=="function"?f:(A=c(f),R=A.length,function(Q){for(var ae=!1,fe=0;fe<R;++fe){var de=A[fe],_e=f[de],Oe=Me(Q,de);_e instanceof It?(L(Q,de,_e.execute(Oe)),ae=!0):Oe!==_e&&(L(Q,de,_e),ae=!0)}return ae});var P=_.table.core,U=P.schema.primaryKey,K=U.outbound,G=U.extractKey,X=200,U=g.db._options.modifyChunkSize;U&&(X=typeof U=="object"?U[P.name]||U["*"]||200:U);function ee(Q,de){var fe=de.failures,de=de.numFailures;$+=Q-de;for(var _e=0,Oe=c(fe);_e<Oe.length;_e++){var ke=Oe[_e];F.push(fe[ke])}}var F=[],$=0,te=[];return g.clone().primaryKeys().then(function(Q){function ae(de){var _e=Math.min(X,Q.length-de);return P.getMany({trans:E,keys:Q.slice(de,de+_e),cache:"immutable"}).then(function(Oe){for(var ke=[],Ce=[],Ne=K?[]:null,Ve=[],De=0;De<_e;++De){var ze=Oe[De],Ze={value:V(ze),primKey:Q[de+De]};O.call(Ze,Ze.value,Ze)!==!1&&(Ze.value==null?Ve.push(Q[de+De]):K||ht(G(ze),G(Ze.value))===0?(Ce.push(Ze.value),K&&Ne.push(Q[de+De])):(Ve.push(Q[de+De]),ke.push(Ze.value)))}return Promise.resolve(0<ke.length&&P.mutate({trans:E,type:"add",values:ke}).then(function(tt){for(var lt in tt.failures)Ve.splice(parseInt(lt),1);ee(ke.length,tt)})).then(function(){return(0<Ce.length||fe&&typeof f=="object")&&P.mutate({trans:E,type:"put",keys:Ne,values:Ce,criteria:fe,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<de}).then(function(tt){return ee(Ce.length,tt)})}).then(function(){return(0<Ve.length||fe&&f===Sa)&&P.mutate({trans:E,type:"delete",keys:Ve,criteria:fe,isAdditionalChunk:0<de}).then(function(tt){return ee(Ve.length,tt)})}).then(function(){return Q.length>de+_e&&ae(de+X)})})}var fe=Cr(_)&&_.limit===1/0&&(typeof f!="function"||f===Sa)&&{index:_.index,range:_.range};return ae(0).then(function(){if(0<F.length)throw new ct("Error modifying one or more objects",F,$,te);return Q.length})})})},dt.prototype.delete=function(){var f=this._ctx,g=f.range;return Cr(f)&&(f.isPrimKey||g.type===3)?this._write(function(_){var E=f.table.core.schema.primaryKey,A=g;return f.table.core.count({trans:_,query:{index:E,range:A}}).then(function(R){return f.table.core.mutate({trans:_,type:"deleteRange",range:A}).then(function(O){var P=O.failures;if(O.lastResult,O.results,O=O.numFailures,O)throw new ct("Could not delete some values",Object.keys(P).map(function(K){return P[K]}),R-O);return R-O})})}):this.modify(Sa)},dt);function dt(){}var Sa=function(f,g){return g.value=null};function Co(f,g){return f<g?-1:f===g?0:1}function Do(f,g){return g<f?-1:f===g?0:1}function Zn(f,g,_){return f=f instanceof yi?new f.Collection(f):f,f._ctx.error=new(_||TypeError)(g),f}function ls(f){return new f.Collection(f,function(){return br("")}).limit(0)}function ji(f,g,_,E){var A,R,O,P,K,G,X,U=_.length;if(!_.every(function($){return typeof $=="string"}))return Zn(f,Ro);function ee($){A=$==="next"?function(Q){return Q.toUpperCase()}:function(Q){return Q.toLowerCase()},R=$==="next"?function(Q){return Q.toLowerCase()}:function(Q){return Q.toUpperCase()},O=$==="next"?Co:Do;var te=_.map(function(Q){return{lower:R(Q),upper:A(Q)}}).sort(function(Q,ae){return O(Q.lower,ae.lower)});P=te.map(function(Q){return Q.upper}),K=te.map(function(Q){return Q.lower}),X=(G=$)==="next"?"":E}ee("next"),f=new f.Collection(f,function(){return Bn(P[0],K[U-1]+E)}),f._ondirectionchange=function($){ee($)};var F=0;return f._addAlgorithm(function($,te,Q){var ae=$.key;if(typeof ae!="string")return!1;var fe=R(ae);if(g(fe,K,F))return!0;for(var de=null,_e=F;_e<U;++_e){var Oe=function(ke,Ce,Ne,Ve,De,ze){for(var Ze=Math.min(ke.length,Ve.length),tt=-1,lt=0;lt<Ze;++lt){var Jn=Ce[lt];if(Jn!==Ve[lt])return De(ke[lt],Ne[lt])<0?ke.substr(0,lt)+Ne[lt]+Ne.substr(lt+1):De(ke[lt],Ve[lt])<0?ke.substr(0,lt)+Ve[lt]+Ne.substr(lt+1):0<=tt?ke.substr(0,tt)+Ce[tt]+Ne.substr(tt+1):null;De(ke[lt],Jn)<0&&(tt=lt)}return Ze<Ve.length&&ze==="next"?ke+Ne.substr(ke.length):Ze<ke.length&&ze==="prev"?ke.substr(0,Ne.length):tt<0?null:ke.substr(0,tt)+Ve[tt]+Ne.substr(tt+1)}(ae,fe,P[_e],K[_e],O,G);Oe===null&&de===null?F=_e+1:(de===null||0<O(de,Oe))&&(de=Oe)}return te(de!==null?function(){$.continue(de+X)}:Q),!1}),f}function Bn(f,g,_,E){return{type:2,lower:f,upper:g,lowerOpen:_,upperOpen:E}}function br(f){return{type:1,lower:f,upper:f}}var yi=(Object.defineProperty(zt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),zt.prototype.between=function(f,g,_,E){_=_!==!1,E=E===!0;try{return 0<this._cmp(f,g)||this._cmp(f,g)===0&&(_||E)&&(!_||!E)?ls(this):new this.Collection(this,function(){return Bn(f,g,!_,!E)})}catch{return Zn(this,Wn)}},zt.prototype.equals=function(f){return f==null?Zn(this,Wn):new this.Collection(this,function(){return br(f)})},zt.prototype.above=function(f){return f==null?Zn(this,Wn):new this.Collection(this,function(){return Bn(f,void 0,!0)})},zt.prototype.aboveOrEqual=function(f){return f==null?Zn(this,Wn):new this.Collection(this,function(){return Bn(f,void 0,!1)})},zt.prototype.below=function(f){return f==null?Zn(this,Wn):new this.Collection(this,function(){return Bn(void 0,f,!1,!0)})},zt.prototype.belowOrEqual=function(f){return f==null?Zn(this,Wn):new this.Collection(this,function(){return Bn(void 0,f)})},zt.prototype.startsWith=function(f){return typeof f!="string"?Zn(this,Ro):this.between(f,f+fi,!0,!0)},zt.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):ji(this,function(g,_){return g.indexOf(_[0])===0},[f],fi)},zt.prototype.equalsIgnoreCase=function(f){return ji(this,function(g,_){return g===_[0]},[f],"")},zt.prototype.anyOfIgnoreCase=function(){var f=j.apply(pt,arguments);return f.length===0?ls(this):ji(this,function(g,_){return _.indexOf(g)!==-1},f,"")},zt.prototype.startsWithAnyOfIgnoreCase=function(){var f=j.apply(pt,arguments);return f.length===0?ls(this):ji(this,function(g,_){return _.some(function(E){return g.indexOf(E)===0})},f,fi)},zt.prototype.anyOf=function(){var f=this,g=j.apply(pt,arguments),_=this._cmp;try{g.sort(_)}catch{return Zn(this,Wn)}if(g.length===0)return ls(this);var E=new this.Collection(this,function(){return Bn(g[0],g[g.length-1])});E._ondirectionchange=function(R){_=R==="next"?f._ascending:f._descending,g.sort(_)};var A=0;return E._addAlgorithm(function(R,O,P){for(var K=R.key;0<_(K,g[A]);)if(++A===g.length)return O(P),!1;return _(K,g[A])===0||(O(function(){R.continue(g[A])}),!1)}),E},zt.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},zt.prototype.noneOf=function(){var f=j.apply(pt,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return Zn(this,Wn)}var g=f.reduce(function(_,E){return _?_.concat([[_[_.length-1][1],E]]):[[-1/0,E]]},null);return g.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},zt.prototype.inAnyRange=function(ae,g){var _=this,E=this._cmp,A=this._ascending,R=this._descending,O=this._min,P=this._max;if(ae.length===0)return ls(this);if(!ae.every(function(fe){return fe[0]!==void 0&&fe[1]!==void 0&&A(fe[0],fe[1])<=0}))return Zn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Fe.InvalidArgument);var K=!g||g.includeLowers!==!1,G=g&&g.includeUppers===!0,X,U=A;function ee(fe,de){return U(fe[0],de[0])}try{(X=ae.reduce(function(fe,de){for(var _e=0,Oe=fe.length;_e<Oe;++_e){var ke=fe[_e];if(E(de[0],ke[1])<0&&0<E(de[1],ke[0])){ke[0]=O(ke[0],de[0]),ke[1]=P(ke[1],de[1]);break}}return _e===Oe&&fe.push(de),fe},[])).sort(ee)}catch{return Zn(this,Wn)}var F=0,$=G?function(fe){return 0<A(fe,X[F][1])}:function(fe){return 0<=A(fe,X[F][1])},te=K?function(fe){return 0<R(fe,X[F][0])}:function(fe){return 0<=R(fe,X[F][0])},Q=$,ae=new this.Collection(this,function(){return Bn(X[0][0],X[X.length-1][1],!K,!G)});return ae._ondirectionchange=function(fe){U=fe==="next"?(Q=$,A):(Q=te,R),X.sort(ee)},ae._addAlgorithm(function(fe,de,_e){for(var Oe,ke=fe.key;Q(ke);)if(++F===X.length)return de(_e),!1;return!$(Oe=ke)&&!te(Oe)||(_._cmp(ke,X[F][1])===0||_._cmp(ke,X[F][0])===0||de(function(){U===A?fe.continue(X[F][0]):fe.continue(X[F][1])}),!1)}),ae},zt.prototype.startsWithAnyOf=function(){var f=j.apply(pt,arguments);return f.every(function(g){return typeof g=="string"})?f.length===0?ls(this):this.inAnyRange(f.map(function(g){return[g,g+fi]})):Zn(this,"startsWithAnyOf() only works with strings")},zt);function zt(){}function sr(f){return ut(function(g){return ar(g),f(g.target.error),!1})}function ar(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var cs="storagemutated",Bi="x-storagemutated-1",Sn=pi(null,cs),Or=(zn.prototype._lock=function(){return Re(!qe.global),++this._reculock,this._reculock!==1||qe.global||(qe.lockOwnerFor=this),this},zn.prototype._unlock=function(){if(Re(!qe.global),--this._reculock==0)for(qe.global||(qe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Rr(f[1],f[0])}catch{}}return this},zn.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},zn.prototype.create=function(f){var g=this;if(!this.mode)return this;var _=this.db.idbdb,E=this.db._state.dbOpenError;if(Re(!this.idbtrans),!f&&!_)switch(E&&E.name){case"DatabaseClosedError":throw new Fe.DatabaseClosed(E);case"MissingAPIError":throw new Fe.MissingAPI(E.message,E);default:throw new Fe.OpenFailed(E)}if(!this.active)throw new Fe.TransactionInactive;return Re(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ut(function(A){ar(A),g._reject(f.error)}),f.onabort=ut(function(A){ar(A),g.active&&g._reject(new Fe.Abort(f.error)),g.active=!1,g.on("abort").fire(A)}),f.oncomplete=ut(function(){g.active=!1,g._resolve(),"mutatedParts"in f&&Sn.storagemutated.fire(f.mutatedParts)}),this},zn.prototype._promise=function(f,g,_){var E=this;if(f==="readwrite"&&this.mode!=="readwrite")return $t(new Fe.ReadOnly("Transaction is readonly"));if(!this.active)return $t(new Fe.TransactionInactive);if(this._locked())return new Ue(function(R,O){E._blockedFuncs.push([function(){E._promise(f,g,_).then(R,O)},qe])});if(_)return $n(function(){var R=new Ue(function(O,P){E._lock();var K=g(O,P,E);K&&K.then&&K.then(O,P)});return R.finally(function(){return E._unlock()}),R._lib=!0,R});var A=new Ue(function(R,O){var P=g(R,O,E);P&&P.then&&P.then(R,O)});return A._lib=!0,A},zn.prototype._root=function(){return this.parent?this.parent._root():this},zn.prototype.waitFor=function(f){var g,_=this._root(),E=Ue.resolve(f);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return E}):(_._waitingFor=E,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function R(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=R)}());var A=_._waitingFor;return new Ue(function(R,O){E.then(function(P){return _._waitingQueue.push(ut(R.bind(null,P)))},function(P){return _._waitingQueue.push(ut(O.bind(null,P)))}).finally(function(){_._waitingFor===A&&(_._waitingFor=null)})})},zn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Fe.Abort))},zn.prototype.table=function(f){var g=this._memoizedTables||(this._memoizedTables={});if(I(g,f))return g[f];var _=this.schema[f];if(!_)throw new Fe.NotFound("Table "+f+" not part of transaction");return _=new this.db.Table(f,_,this),_.core=this.db.core.table(f),g[f]=_},zn);function zn(){}function Nr(f,g,_,E,A,R,O){return{name:f,keyPath:g,unique:_,multi:E,auto:A,compound:R,src:(_&&!O?"&":"")+(E?"*":"")+(A?"++":"")+zi(g)}}function zi(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function $r(f,g,_){return{name:f,primKey:g,indexes:_,mappedClass:null,idxByName:(E=function(A){return[A.name,A]},_.reduce(function(A,R,O){return O=E(R,O),O&&(A[O[0]]=O[1]),A},{}))};var E}var qi=function(f){try{return f.only([[]]),qi=function(){return[[]]},[[]]}catch{return qi=function(){return fi},fi}};function Pr(f){return f==null?function(){}:typeof f=="string"?(g=f).split(".").length===1?function(_){return _[g]}:function(_){return Me(_,g)}:function(_){return Me(_,f)};var g}function Xr(f){return[].slice.call(f)}var Oo=0;function tn(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Ct(f,g,K){function E(Q){if(Q.type===3)return null;if(Q.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var F=Q.lower,$=Q.upper,te=Q.lowerOpen,Q=Q.upperOpen;return F===void 0?$===void 0?null:g.upperBound($,!!Q):$===void 0?g.lowerBound(F,!!te):g.bound(F,$,!!te,!!Q)}function A(ee){var F,$=ee.name;return{name:$,schema:ee,mutate:function(te){var Q=te.trans,ae=te.type,fe=te.keys,de=te.values,_e=te.range;return new Promise(function(Oe,ke){Oe=ut(Oe);var Ce=Q.objectStore($),Ne=Ce.keyPath==null,Ve=ae==="put"||ae==="add";if(!Ve&&ae!=="delete"&&ae!=="deleteRange")throw new Error("Invalid operation type: "+ae);var De,ze=(fe||de||{length:1}).length;if(fe&&de&&fe.length!==de.length)throw new Error("Given keys array must have same length as given values array.");if(ze===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function Ze(qn){++Jn,ar(qn)}var tt=[],lt=[],Jn=0;if(ae==="deleteRange"){if(_e.type===4)return Oe({numFailures:Jn,failures:lt,results:[],lastResult:void 0});_e.type===3?tt.push(De=Ce.clear()):tt.push(De=Ce.delete(E(_e)))}else{var Ne=Ve?Ne?[de,fe]:[de,null]:[fe,null],it=Ne[0],yn=Ne[1];if(Ve)for(var In=0;In<ze;++In)tt.push(De=yn&&yn[In]!==void 0?Ce[ae](it[In],yn[In]):Ce[ae](it[In])),De.onerror=Ze;else for(In=0;In<ze;++In)tt.push(De=Ce[ae](it[In])),De.onerror=Ze}function $i(qn){qn=qn.target.result,tt.forEach(function(Ai,ms){return Ai.error!=null&&(lt[ms]=Ai.error)}),Oe({numFailures:Jn,failures:lt,results:ae==="delete"?fe:tt.map(function(Ai){return Ai.result}),lastResult:qn})}De.onerror=function(qn){Ze(qn),$i(qn)},De.onsuccess=$i})},getMany:function(te){var Q=te.trans,ae=te.keys;return new Promise(function(fe,de){fe=ut(fe);for(var _e,Oe=Q.objectStore($),ke=ae.length,Ce=new Array(ke),Ne=0,Ve=0,De=function(tt){tt=tt.target,Ce[tt._pos]=tt.result,++Ve===Ne&&fe(Ce)},ze=sr(de),Ze=0;Ze<ke;++Ze)ae[Ze]!=null&&((_e=Oe.get(ae[Ze]))._pos=Ze,_e.onsuccess=De,_e.onerror=ze,++Ne);Ne===0&&fe(Ce)})},get:function(te){var Q=te.trans,ae=te.key;return new Promise(function(fe,de){fe=ut(fe);var _e=Q.objectStore($).get(ae);_e.onsuccess=function(Oe){return fe(Oe.target.result)},_e.onerror=sr(de)})},query:(F=G,function(te){return new Promise(function(Q,ae){Q=ut(Q);var fe,de,_e,Ne=te.trans,Oe=te.values,ke=te.limit,De=te.query,Ce=ke===1/0?void 0:ke,Ve=De.index,De=De.range,Ne=Ne.objectStore($),Ve=Ve.isPrimaryKey?Ne:Ne.index(Ve.name),De=E(De);if(ke===0)return Q({result:[]});F?((Ce=Oe?Ve.getAll(De,Ce):Ve.getAllKeys(De,Ce)).onsuccess=function(ze){return Q({result:ze.target.result})},Ce.onerror=sr(ae)):(fe=0,de=!Oe&&"openKeyCursor"in Ve?Ve.openKeyCursor(De):Ve.openCursor(De),_e=[],de.onsuccess=function(ze){var Ze=de.result;return Ze?(_e.push(Oe?Ze.value:Ze.primaryKey),++fe===ke?Q({result:_e}):void Ze.continue()):Q({result:_e})},de.onerror=sr(ae))})}),openCursor:function(te){var Q=te.trans,ae=te.values,fe=te.query,de=te.reverse,_e=te.unique;return new Promise(function(Oe,ke){Oe=ut(Oe);var Ve=fe.index,Ce=fe.range,Ne=Q.objectStore($),Ne=Ve.isPrimaryKey?Ne:Ne.index(Ve.name),Ve=de?_e?"prevunique":"prev":_e?"nextunique":"next",De=!ae&&"openKeyCursor"in Ne?Ne.openKeyCursor(E(Ce),Ve):Ne.openCursor(E(Ce),Ve);De.onerror=sr(ke),De.onsuccess=ut(function(ze){var Ze,tt,lt,Jn,it=De.result;it?(it.___id=++Oo,it.done=!1,Ze=it.continue.bind(it),tt=(tt=it.continuePrimaryKey)&&tt.bind(it),lt=it.advance.bind(it),Jn=function(){throw new Error("Cursor not stopped")},it.trans=Q,it.stop=it.continue=it.continuePrimaryKey=it.advance=function(){throw new Error("Cursor not started")},it.fail=ut(ke),it.next=function(){var yn=this,In=1;return this.start(function(){return In--?yn.continue():yn.stop()}).then(function(){return yn})},it.start=function(yn){function In(){if(De.result)try{yn()}catch(qn){it.fail(qn)}else it.done=!0,it.start=function(){throw new Error("Cursor behind last entry")},it.stop()}var $i=new Promise(function(qn,Ai){qn=ut(qn),De.onerror=sr(Ai),it.fail=Ai,it.stop=function(ms){it.stop=it.continue=it.continuePrimaryKey=it.advance=Jn,qn(ms)}});return De.onsuccess=ut(function(qn){De.onsuccess=In,In()}),it.continue=Ze,it.continuePrimaryKey=tt,it.advance=lt,In(),$i},Oe(it)):Oe(null)},ke)})},count:function(te){var Q=te.query,ae=te.trans,fe=Q.index,de=Q.range;return new Promise(function(_e,Oe){var ke=ae.objectStore($),Ce=fe.isPrimaryKey?ke:ke.index(fe.name),ke=E(de),Ce=ke?Ce.count(ke):Ce.count();Ce.onsuccess=ut(function(Ne){return _e(Ne.target.result)}),Ce.onerror=sr(Oe)})}}}var R,O,P,X=(O=K,P=Xr((R=f).objectStoreNames),{schema:{name:R.name,tables:P.map(function(ee){return O.objectStore(ee)}).map(function(ee){var F=ee.keyPath,Q=ee.autoIncrement,$=d(F),te={},Q={name:ee.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:F==null,compound:$,keyPath:F,autoIncrement:Q,unique:!0,extractKey:Pr(F)},indexes:Xr(ee.indexNames).map(function(ae){return ee.index(ae)}).map(function(_e){var fe=_e.name,de=_e.unique,Oe=_e.multiEntry,_e=_e.keyPath,Oe={name:fe,compound:d(_e),keyPath:_e,unique:de,multiEntry:Oe,extractKey:Pr(_e)};return te[tn(_e)]=Oe}),getIndexByKeyPath:function(ae){return te[tn(ae)]}};return te[":id"]=Q.primaryKey,F!=null&&(te[tn(F)]=Q.primaryKey),Q})},hasGetAll:0<P.length&&"getAll"in O.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=X.schema,G=X.hasGetAll,X=K.tables.map(A),U={};return X.forEach(function(ee){return U[ee.name]=ee}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(ee){if(!U[ee])throw new Error("Table '".concat(ee,"' not found"));return U[ee]},MIN_KEY:-1/0,MAX_KEY:qi(g),schema:K}}function Aa(f,g,_,E){var A=_.IDBKeyRange;return _.indexedDB,{dbcore:(E=Ct(g,A,E),f.dbcore.reduce(function(R,O){return O=O.create,r(r({},R),O(R))},E))}}function vi(f,E){var _=E.db,E=Aa(f._middlewares,_,f._deps,E);f.core=E.dbcore,f.tables.forEach(function(A){var R=A.name;f.core.schema.tables.some(function(O){return O.name===R})&&(A.core=f.core.table(R),f[R]instanceof f.Table&&(f[R].core=A.core))})}function Vs(f,g,_,E){_.forEach(function(A){var R=E[A];g.forEach(function(O){var P=function K(G,X){return ue(G,X)||(G=v(G))&&K(G,X)}(O,A);(!P||"value"in P&&P.value===void 0)&&(O===f.Transaction.prototype||O instanceof f.Transaction?B(O,A,{get:function(){return this.table(A)},set:function(K){z(this,A,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):O[A]=new f.Table(A,R))})})}function hs(f,g){g.forEach(function(_){for(var E in _)_[E]instanceof f.Table&&delete _[E]})}function Ia(f,g){return f._cfg.version-g._cfg.version}function _i(f,g,_,E){var A=f._dbSchema;_.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=$r("$meta",Us("")[0],[]),f._storeNames.push("$meta"));var R=f._createTransaction("readwrite",f._storeNames,A);R.create(_),R._completion.catch(E);var O=R._reject.bind(R),P=qe.transless||qe;$n(function(){return qe.trans=R,qe.transless=P,g!==0?(vi(f,_),G=g,((K=R).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(X){return X??G}):Ue.resolve(G)).then(function(X){return ee=X,F=R,$=_,te=[],X=(U=f)._versions,Q=U._dbSchema=Fi(0,U.idbdb,$),(X=X.filter(function(ae){return ae._cfg.version>=ee})).length!==0?(X.forEach(function(ae){te.push(function(){var fe=Q,de=ae._cfg.dbschema;fs(U,fe,$),fs(U,de,$),Q=U._dbSchema=de;var _e=or(fe,de);_e.add.forEach(function(Ve){Ra($,Ve[0],Ve[1].primKey,Ve[1].indexes)}),_e.change.forEach(function(Ve){if(Ve.recreate)throw new Fe.Upgrade("Not yet support for changing primary key");var De=$.objectStore(Ve.name);Ve.add.forEach(function(ze){return bi(De,ze)}),Ve.change.forEach(function(ze){De.deleteIndex(ze.name),bi(De,ze)}),Ve.del.forEach(function(ze){return De.deleteIndex(ze)})});var Oe=ae._cfg.contentUpgrade;if(Oe&&ae._cfg.version>ee){vi(U,$),F._memoizedTables={};var ke=N(de);_e.del.forEach(function(Ve){ke[Ve]=fe[Ve]}),hs(U,[U.Transaction.prototype]),Vs(U,[U.Transaction.prototype],c(ke),ke),F.schema=ke;var Ce,Ne=we(Oe);return Ne&&ir(),_e=Ue.follow(function(){var Ve;(Ce=Oe(F))&&Ne&&(Ve=On.bind(null,null),Ce.then(Ve,Ve))}),Ce&&typeof Ce.then=="function"?Ue.resolve(Ce):_e.then(function(){return Ce})}}),te.push(function(fe){var de,_e,Oe=ae._cfg.dbschema;de=Oe,_e=fe,[].slice.call(_e.db.objectStoreNames).forEach(function(ke){return de[ke]==null&&_e.db.deleteObjectStore(ke)}),hs(U,[U.Transaction.prototype]),Vs(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),F.schema=U._dbSchema}),te.push(function(fe){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===ae._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(de){return de!=="$meta"})):fe.objectStore("$meta").put(ae._cfg.version,"version"))})}),function ae(){return te.length?Ue.resolve(te.shift()(F.idbtrans)).then(ae):Ue.resolve()}().then(function(){ku(Q,$)})):Ue.resolve();var U,ee,F,$,te,Q}).catch(O)):(c(A).forEach(function(X){Ra(_,X,A[X].primKey,A[X].indexes)}),vi(f,_),void Ue.follow(function(){return f.on.populate.fire(R)}).catch(O));var K,G})}function Ls(f,g){ku(f._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=Fi(0,f.idbdb,g);fs(f,f._dbSchema,g);for(var E=0,A=or(_,f._dbSchema).change;E<A.length;E++){var R=function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=g.objectStore(O.name);O.add.forEach(function(K){Ln&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(K.src)),bi(P,K)})}(A[E]);if(typeof R=="object")return R.value}}function or(f,g){var _,E={del:[],add:[],change:[]};for(_ in f)g[_]||E.del.push(_);for(_ in g){var A=f[_],R=g[_];if(A){var O={name:_,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||A.primKey.auto!==R.primKey.auto)O.recreate=!0,E.change.push(O);else{var P=A.idxByName,K=R.idxByName,G=void 0;for(G in P)K[G]||O.del.push(G);for(G in K){var X=P[G],U=K[G];X?X.src!==U.src&&O.change.push(U):O.add.push(U)}(0<O.del.length||0<O.add.length||0<O.change.length)&&E.change.push(O)}}else E.add.push([_,R])}return E}function Ra(f,g,_,E){var A=f.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return E.forEach(function(R){return bi(A,R)}),A}function ku(f,g){c(f).forEach(function(_){g.db.objectStoreNames.contains(_)||(Ln&&console.debug("Dexie: Creating missing table",_),Ra(g,_,f[_].primKey,f[_].indexes))})}function bi(f,g){f.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Fi(f,g,_){var E={};return pe(g.objectStoreNames,0).forEach(function(A){for(var R=_.objectStore(A),O=Nr(zi(G=R.keyPath),G||"",!0,!1,!!R.autoIncrement,G&&typeof G!="string",!0),P=[],K=0;K<R.indexNames.length;++K){var X=R.index(R.indexNames[K]),G=X.keyPath,X=Nr(X.name,G,!!X.unique,!!X.multiEntry,!1,G&&typeof G!="string",!1);P.push(X)}E[A]=$r(A,O,P)}),E}function fs(f,g,_){for(var E=_.db.objectStoreNames,A=0;A<E.length;++A){var R=E[A],O=_.objectStore(R);f._hasGetAll="getAll"in O;for(var P=0;P<O.indexNames.length;++P){var K=O.indexNames[P],G=O.index(K).keyPath,X=typeof G=="string"?G:"["+pe(G).join("+")+"]";!g[R]||(G=g[R].idxByName[X])&&(G.name=K,delete g[R].idxByName[X],g[R].idxByName[K]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Us(f){return f.split(",").map(function(g,_){var E=(g=g.trim()).replace(/([&*]|\+\+)/g,""),A=/^\[/.test(E)?E.match(/^\[(.*)\]$/)[1].split("+"):E;return Nr(E,A||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),d(A),_===0)})}var Vu=(Ki.prototype._parseStoresSpec=function(f,g){c(f).forEach(function(_){if(f[_]!==null){var E=Us(f[_]),A=E.shift();if(A.unique=!0,A.multi)throw new Fe.Schema("Primary key cannot be multi-valued");E.forEach(function(R){if(R.auto)throw new Fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!R.keyPath)throw new Fe.Schema("Index must have a name and cannot be an empty string")}),g[_]=$r(_,A,E)}})},Ki.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,_):_;var _=g._versions,E={},A={};return _.forEach(function(R){p(E,R._cfg.storesSource),A=R._cfg.dbschema={},R._parseStoresSpec(E,A)}),g._dbSchema=A,hs(g,[g._allTables,g,g.Transaction.prototype]),Vs(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],c(A),A),g._storeNames=c(A),this},Ki.prototype.upgrade=function(f){return this._cfg.contentUpgrade=rs(this._cfg.contentUpgrade||Tt,f),this},Ki);function Ki(){}function No(f,g){var _=f._dbNamesDB;return _||(_=f._dbNamesDB=new Si(_r,{addons:[],indexedDB:f,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function js(f){return f&&typeof f.databases=="function"}function Hi(f){return $n(function(){return qe.letThrough=!0,f()})}function xa(f){return!("from"in f)}var pn=function(f,g){if(!this){var _=new pn;return f&&"d"in f&&p(_,f),_}p(this,arguments.length?{d:1,from:f,to:1<arguments.length?g:f}:{d:0})};function Gi(f,g,_){var E=ht(g,_);if(!isNaN(E)){if(0<E)throw RangeError();if(xa(f))return p(f,{from:g,to:_,d:1});var A=f.l,E=f.r;if(ht(_,f.from)<0)return A?Gi(A,g,_):f.l={from:g,to:_,d:1,l:null,r:null},Mo(f);if(0<ht(g,f.to))return E?Gi(E,g,_):f.r={from:g,to:_,d:1,l:null,r:null},Mo(f);ht(g,f.from)<0&&(f.from=g,f.l=null,f.d=E?E.d+1:1),0<ht(_,f.to)&&(f.to=_,f.r=null,f.d=f.l?f.l.d+1:1),_=!f.r,A&&!f.l&&Wr(f,A),E&&_&&Wr(f,E)}}function Wr(f,g){xa(g)||function _(E,K){var R=K.from,O=K.to,P=K.l,K=K.r;Gi(E,R,O),P&&_(E,P),K&&_(E,K)}(f,g)}function Po(f,g){var _=Qi(g),E=_.next();if(E.done)return!1;for(var A=E.value,R=Qi(f),O=R.next(A.from),P=O.value;!E.done&&!O.done;){if(ht(P.from,A.to)<=0&&0<=ht(P.to,A.from))return!0;ht(A.from,P.from)<0?A=(E=_.next(P.from)).value:P=(O=R.next(A.from)).value}return!1}function Qi(f){var g=xa(f)?null:{s:0,n:f};return{next:function(_){for(var E=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,E)for(;g.n.l&&ht(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!E||ht(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Mo(f){var g,_,E=(((g=f.r)===null||g===void 0?void 0:g.d)||0)-(((_=f.l)===null||_===void 0?void 0:_.d)||0),A=1<E?"r":E<-1?"l":"";A&&(g=A=="r"?"l":"r",_=r({},f),E=f[A],f.from=E.from,f.to=E.to,f[A]=E[A],_[A]=E[g],(f[g]=_).d=Ca(_)),f.d=Ca(f)}function Ca(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function Mr(f,g){return c(g).forEach(function(_){f[_]?Wr(f[_],g[_]):f[_]=function E(A){var R,O,P={};for(R in A)I(A,R)&&(O=A[R],P[R]=!O||typeof O!="object"||Y.has(O.constructor)?O:E(O));return P}(g[_])}),f}function Da(f,g){return f.all||g.all||Object.keys(f).some(function(_){return g[_]&&Po(g[_],f[_])})}C(pn.prototype,((Er={add:function(f){return Wr(this,f),this},addKey:function(f){return Gi(this,f,f),this},addKeys:function(f){var g=this;return f.forEach(function(_){return Gi(g,_,_)}),this},hasKey:function(f){var g=Qi(this).next(f).value;return g&&ht(g.from,f)<=0&&0<=ht(g.to,f)}})[ye]=function(){return Qi(this)},Er));var Ei={},Oa={},Na=!1;function Yi(f){Mr(Oa,f),Na||(Na=!0,setTimeout(function(){Na=!1,Nn(Oa,!(Oa={}))},0))}function Nn(f,g){g===void 0&&(g=!1);var _=new Set;if(f.all)for(var E=0,A=Object.values(Ei);E<A.length;E++)ko(O=A[E],f,_,g);else for(var R in f){var O,P=/^idb\:\/\/(.*)\/(.*)\//.exec(R);P&&(R=P[1],P=P[2],(O=Ei["idb://".concat(R,"/").concat(P)])&&ko(O,f,_,g))}_.forEach(function(K){return K()})}function ko(f,g,_,E){for(var A=[],R=0,O=Object.entries(f.queries.query);R<O.length;R++){for(var P=O[R],K=P[0],G=[],X=0,U=P[1];X<U.length;X++){var ee=U[X];Da(g,ee.obsSet)?ee.subscribers.forEach(function(Q){return _.add(Q)}):E&&G.push(ee)}E&&A.push([K,G])}if(E)for(var F=0,$=A;F<$.length;F++){var te=$[F],K=te[0],G=te[1];f.queries.query[K]=G}}function Lu(f){var g=f._state,_=f._deps.indexedDB;if(g.isBeingOpened||f.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?$t(g.dbOpenError):f});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var E=g.openCanceller,A=Math.round(10*f.verno),R=!1;function O(){if(g.openCanceller!==E)throw new Fe.DatabaseClosed("db.open() was cancelled")}function P(){return new Ue(function(ee,F){if(O(),!_)throw new Fe.MissingAPI;var $=f.name,te=g.autoSchema||!A?_.open($):_.open($,A);if(!te)throw new Fe.MissingAPI;te.onerror=sr(F),te.onblocked=ut(f._fireOnBlocked),te.onupgradeneeded=ut(function(Q){var ae;X=te.transaction,g.autoSchema&&!f._options.allowEmptyDB?(te.onerror=ar,X.abort(),te.result.close(),(ae=_.deleteDatabase($)).onsuccess=ae.onerror=ut(function(){F(new Fe.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(X.onerror=sr(F),Q=Q.oldVersion>Math.pow(2,62)?0:Q.oldVersion,U=Q<1,f.idbdb=te.result,R&&Ls(f,X),_i(f,Q/10,X,F))},F),te.onsuccess=ut(function(){X=null;var Q,ae,fe,de,_e,Oe=f.idbdb=te.result,ke=pe(Oe.objectStoreNames);if(0<ke.length)try{var Ce=Oe.transaction((de=ke).length===1?de[0]:de,"readonly");if(g.autoSchema)ae=Oe,fe=Ce,(Q=f).verno=ae.version/10,fe=Q._dbSchema=Fi(0,ae,fe),Q._storeNames=pe(ae.objectStoreNames,0),Vs(Q,[Q._allTables],c(fe),fe);else if(fs(f,f._dbSchema,Ce),((_e=or(Fi(0,(_e=f).idbdb,Ce),_e._dbSchema)).add.length||_e.change.some(function(Ne){return Ne.add.length||Ne.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Oe.close(),A=Oe.version+1,R=!0,ee(P());vi(f,Ce)}catch{}vr.push(f),Oe.onversionchange=ut(function(Ne){g.vcFired=!0,f.on("versionchange").fire(Ne)}),Oe.onclose=ut(function(Ne){f.on("close").fire(Ne)}),U&&(_e=f._deps,Ce=$,Oe=_e.indexedDB,_e=_e.IDBKeyRange,js(Oe)||Ce===_r||No(Oe,_e).put({name:Ce}).catch(Tt)),ee()},F)}).catch(function(ee){switch(ee==null?void 0:ee.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<A)return A=0,P()}return Ue.reject(ee)})}var K,G=g.dbReadyResolve,X=null,U=!1;return Ue.race([E,(typeof navigator>"u"?Ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ee){function F(){return indexedDB.databases().finally(ee)}K=setInterval(F,100),F()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(P)]).then(function(){return O(),g.onReadyBeingFired=[],Ue.resolve(Hi(function(){return f.on.ready.fire(f.vip)})).then(function ee(){if(0<g.onReadyBeingFired.length){var F=g.onReadyBeingFired.reduce(rs,Tt);return g.onReadyBeingFired=[],Ue.resolve(Hi(function(){return F(f.vip)})).then(ee)}})}).finally(function(){g.openCanceller===E&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(ee){g.dbOpenError=ee;try{X&&X.abort()}catch{}return E===g.openCanceller&&f._close(),$t(ee)}).finally(function(){g.openComplete=!0,G()}).then(function(){var ee;return U&&(ee={},f.tables.forEach(function(F){F.schema.indexes.forEach(function($){$.name&&(ee["idb://".concat(f.name,"/").concat(F.name,"/").concat($.name)]=new pn(-1/0,[[[]]]))}),ee["idb://".concat(f.name,"/").concat(F.name,"/")]=ee["idb://".concat(f.name,"/").concat(F.name,"/:dels")]=new pn(-1/0,[[[]]])}),Sn(cs).fire(ee),Nn(ee,!0)),f})}function kr(f){function g(R){return f.next(R)}var _=A(g),E=A(function(R){return f.throw(R)});function A(R){return function(K){var P=R(K),K=P.value;return P.done?K:K&&typeof K.then=="function"?K.then(_,E):d(K)?Promise.all(K).then(_,E):_(K)}}return A(g)()}function h(f,g,_){for(var E=d(f)?f.slice():[f],A=0;A<_;++A)E.push(g);return E}var b={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return r(r({},f),{table:function(g){var _=f.table(g),E=_.schema,A={},R=[];function O(U,ee,F){var $=tn(U),te=A[$]=A[$]||[],Q=U==null?0:typeof U=="string"?1:U.length,ae=0<ee,ae=r(r({},F),{name:ae?"".concat($,"(virtual-from:").concat(F.name,")"):F.name,lowLevelIndex:F,isVirtual:ae,keyTail:ee,keyLength:Q,extractKey:Pr(U),unique:!ae&&F.unique});return te.push(ae),ae.isPrimaryKey||R.push(ae),1<Q&&O(Q===2?U[0]:U.slice(0,Q-1),ee+1,F),te.sort(function(fe,de){return fe.keyTail-de.keyTail}),ae}g=O(E.primaryKey.keyPath,0,E.primaryKey),A[":id"]=[g];for(var P=0,K=E.indexes;P<K.length;P++){var G=K[P];O(G.keyPath,0,G)}function X(U){var ee,F=U.query.index;return F.isVirtual?r(r({},U),{query:{index:F.lowLevelIndex,range:(ee=U.query.range,F=F.keyTail,{type:ee.type===1?2:ee.type,lower:h(ee.lower,ee.lowerOpen?f.MAX_KEY:f.MIN_KEY,F),lowerOpen:!0,upper:h(ee.upper,ee.upperOpen?f.MIN_KEY:f.MAX_KEY,F),upperOpen:!0})}}):U}return r(r({},_),{schema:r(r({},E),{primaryKey:g,indexes:R,getIndexByKeyPath:function(U){return(U=A[tn(U)])&&U[0]}}),count:function(U){return _.count(X(U))},query:function(U){return _.query(X(U))},openCursor:function(U){var ee=U.query.index,F=ee.keyTail,$=ee.isVirtual,te=ee.keyLength;return $?_.openCursor(X(U)).then(function(ae){return ae&&Q(ae)}):_.openCursor(U);function Q(ae){return Object.create(ae,{continue:{value:function(fe){fe!=null?ae.continue(h(fe,U.reverse?f.MAX_KEY:f.MIN_KEY,F)):U.unique?ae.continue(ae.key.slice(0,te).concat(U.reverse?f.MIN_KEY:f.MAX_KEY,F)):ae.continue()}},continuePrimaryKey:{value:function(fe,de){ae.continuePrimaryKey(h(fe,f.MAX_KEY,F),de)}},primaryKey:{get:function(){return ae.primaryKey}},key:{get:function(){var fe=ae.key;return te===1?fe[0]:fe.slice(0,te)}},value:{get:function(){return ae.value}}})}}})}})}};function w(f,g,_,E){return _=_||{},E=E||"",c(f).forEach(function(A){var R,O,P;I(g,A)?(R=f[A],O=g[A],typeof R=="object"&&typeof O=="object"&&R&&O?(P=Yt(R))!==Yt(O)?_[E+A]=g[A]:P==="Object"?w(R,O,_,E+A+"."):R!==O&&(_[E+A]=g[A]):R!==O&&(_[E+A]=g[A])):_[E+A]=void 0}),c(g).forEach(function(A){I(f,A)||(_[E+A]=g[A])}),_}function D(f,g){return g.type==="delete"?g.keys:g.keys||g.values.map(f.extractKey)}var ne={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return r(r({},f),{table:function(g){var _=f.table(g),E=_.schema.primaryKey;return r(r({},_),{mutate:function(A){var R=qe.trans,O=R.table(g).hook,P=O.deleting,K=O.creating,G=O.updating;switch(A.type){case"add":if(K.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"put":if(K.fire===Tt&&G.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"delete":if(P.fire===Tt)break;return R._promise("readwrite",function(){return X(A)},!0);case"deleteRange":if(P.fire===Tt)break;return R._promise("readwrite",function(){return function U(ee,F,$){return _.query({trans:ee,values:!1,query:{index:E,range:F},limit:$}).then(function(te){var Q=te.result;return X({type:"delete",keys:Q,trans:ee}).then(function(ae){return 0<ae.numFailures?Promise.reject(ae.failures[0]):Q.length<$?{failures:[],numFailures:0,lastResult:void 0}:U(ee,r(r({},F),{lower:Q[Q.length-1],lowerOpen:!0}),$)})})}(A.trans,A.range,1e4)},!0)}return _.mutate(A);function X(U){var ee,F,$,te=qe.trans,Q=U.keys||D(E,U);if(!Q)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?r(r({},U),{keys:Q}):r({},U)).type!=="delete"&&(U.values=a([],U.values)),U.keys&&(U.keys=a([],U.keys)),ee=_,$=Q,((F=U).type==="add"?Promise.resolve([]):ee.getMany({trans:F.trans,keys:$,cache:"immutable"})).then(function(ae){var fe=Q.map(function(de,_e){var Oe,ke,Ce,Ne=ae[_e],Ve={onerror:null,onsuccess:null};return U.type==="delete"?P.fire.call(Ve,de,Ne,te):U.type==="add"||Ne===void 0?(Oe=K.fire.call(Ve,de,U.values[_e],te),de==null&&Oe!=null&&(U.keys[_e]=de=Oe,E.outbound||L(U.values[_e],E.keyPath,de))):(Oe=w(Ne,U.values[_e]),(ke=G.fire.call(Ve,Oe,de,Ne,te))&&(Ce=U.values[_e],Object.keys(ke).forEach(function(De){I(Ce,De)?Ce[De]=ke[De]:L(Ce,De,ke[De])}))),Ve});return _.mutate(U).then(function(de){for(var _e=de.failures,Oe=de.results,ke=de.numFailures,de=de.lastResult,Ce=0;Ce<Q.length;++Ce){var Ne=(Oe||Q)[Ce],Ve=fe[Ce];Ne==null?Ve.onerror&&Ve.onerror(_e[Ce]):Ve.onsuccess&&Ve.onsuccess(U.type==="put"&&ae[Ce]?U.values[Ce]:Ne)}return{failures:_e,results:Oe,numFailures:ke,lastResult:de}}).catch(function(de){return fe.forEach(function(_e){return _e.onerror&&_e.onerror(de)}),Promise.reject(de)})})}}})}})}};function me(f,g,_){try{if(!g||g.keys.length<f.length)return null;for(var E=[],A=0,R=0;A<g.keys.length&&R<f.length;++A)ht(g.keys[A],f[R])===0&&(E.push(_?V(g.values[A]):g.values[A]),++R);return E.length===f.length?E:null}catch{return null}}var Pe={stack:"dbcore",level:-1,create:function(f){return{table:function(g){var _=f.table(g);return r(r({},_),{getMany:function(E){if(!E.cache)return _.getMany(E);var A=me(E.keys,E.trans._cache,E.cache==="clone");return A?Ue.resolve(A):_.getMany(E).then(function(R){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?V(R):R},R})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),_.mutate(E)}})}}}};function vt(f,g){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function cn(f,g){switch(f){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var wt={stack:"dbcore",level:0,name:"Observability",create:function(f){var g=f.schema.name,_=new pn(f.MIN_KEY,f.MAX_KEY);return r(r({},f),{transaction:function(E,A,R){if(qe.subscr&&A!=="readonly")throw new Fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(qe.querier));return f.transaction(E,A,R)},table:function(E){var A=f.table(E),R=A.schema,O=R.primaryKey,U=R.indexes,P=O.extractKey,K=O.outbound,G=O.autoIncrement&&U.filter(function(F){return F.compound&&F.keyPath.includes(O.keyPath)}),X=r(r({},A),{mutate:function(F){function $(De){return De="idb://".concat(g,"/").concat(E,"/").concat(De),de[De]||(de[De]=new pn)}var te,Q,ae,fe=F.trans,de=F.mutatedParts||(F.mutatedParts={}),_e=$(""),Oe=$(":dels"),ke=F.type,Ve=F.type==="deleteRange"?[F.range]:F.type==="delete"?[F.keys]:F.values.length<50?[D(O,F).filter(function(De){return De}),F.values]:[],Ce=Ve[0],Ne=Ve[1],Ve=F.trans._cache;return d(Ce)?(_e.addKeys(Ce),(Ve=ke==="delete"||Ce.length===Ne.length?me(Ce,Ve):null)||Oe.addKeys(Ce),(Ve||Ne)&&(te=$,Q=Ve,ae=Ne,R.indexes.forEach(function(De){var ze=te(De.name||"");function Ze(lt){return lt!=null?De.extractKey(lt):null}function tt(lt){return De.multiEntry&&d(lt)?lt.forEach(function(Jn){return ze.addKey(Jn)}):ze.addKey(lt)}(Q||ae).forEach(function(lt,yn){var it=Q&&Ze(Q[yn]),yn=ae&&Ze(ae[yn]);ht(it,yn)!==0&&(it!=null&&tt(it),yn!=null&&tt(yn))})}))):Ce?(Ne={from:(Ne=Ce.lower)!==null&&Ne!==void 0?Ne:f.MIN_KEY,to:(Ne=Ce.upper)!==null&&Ne!==void 0?Ne:f.MAX_KEY},Oe.add(Ne),_e.add(Ne)):(_e.add(_),Oe.add(_),R.indexes.forEach(function(De){return $(De.name).add(_)})),A.mutate(F).then(function(De){return!Ce||F.type!=="add"&&F.type!=="put"||(_e.addKeys(De.results),G&&G.forEach(function(ze){for(var Ze=F.values.map(function(it){return ze.extractKey(it)}),tt=ze.keyPath.findIndex(function(it){return it===O.keyPath}),lt=0,Jn=De.results.length;lt<Jn;++lt)Ze[lt][tt]=De.results[lt];$(ze.name).addKeys(Ze)})),fe.mutatedParts=Mr(fe.mutatedParts||{},de),De})}}),U=function($){var te=$.query,$=te.index,te=te.range;return[$,new pn(($=te.lower)!==null&&$!==void 0?$:f.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:f.MAX_KEY)]},ee={get:function(F){return[O,new pn(F.key)]},getMany:function(F){return[O,new pn().addKeys(F.keys)]},count:U,query:U,openCursor:U};return c(ee).forEach(function(F){X[F]=function($){var te=qe.subscr,Q=!!te,ae=vt(qe,A)&&cn(F,$)?$.obsSet={}:te;if(Q){var fe=function(Ne){return Ne="idb://".concat(g,"/").concat(E,"/").concat(Ne),ae[Ne]||(ae[Ne]=new pn)},de=fe(""),_e=fe(":dels"),te=ee[F]($),Q=te[0],te=te[1];if((F==="query"&&Q.isPrimaryKey&&!$.values?_e:fe(Q.name||"")).add(te),!Q.isPrimaryKey){if(F!=="count"){var Oe=F==="query"&&K&&$.values&&A.query(r(r({},$),{values:!1}));return A[F].apply(this,arguments).then(function(Ne){if(F==="query"){if(K&&$.values)return Oe.then(function(Ze){return Ze=Ze.result,de.addKeys(Ze),Ne});var Ve=$.values?Ne.result.map(P):Ne.result;($.values?de:_e).addKeys(Ve)}else if(F==="openCursor"){var De=Ne,ze=$.values;return De&&Object.create(De,{key:{get:function(){return _e.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var Ze=De.primaryKey;return _e.addKey(Ze),Ze}},value:{get:function(){return ze&&de.addKey(De.primaryKey),De.value}}})}return Ne})}_e.add(_)}}return A[F].apply(this,arguments)}}),X}})}};function gn(f,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var E=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===E?null:(g=r({},g),d(g.keys)&&(g.keys=g.keys.filter(function(A,R){return!(R in _.failures)})),"values"in g&&d(g.values)&&(g.values=g.values.filter(function(A,R){return!(R in _.failures)})),g)}function sn(f,g){return _=f,((E=g).lower===void 0||(E.lowerOpen?0<ht(_,E.lower):0<=ht(_,E.lower)))&&(f=f,(g=g).upper===void 0||(g.upperOpen?ht(f,g.upper)<0:ht(f,g.upper)<=0));var _,E}function Ti(f,g,ee,E,A,R){if(!ee||ee.length===0)return f;var O=g.query.index,P=O.multiEntry,K=g.query.range,G=E.schema.primaryKey.extractKey,X=O.extractKey,U=(O.lowLevelIndex||O).extractKey,ee=ee.reduce(function(F,$){var te=F,Q=[];if($.type==="add"||$.type==="put")for(var ae=new pn,fe=$.values.length-1;0<=fe;--fe){var de,_e=$.values[fe],Oe=G(_e);ae.hasKey(Oe)||(de=X(_e),(P&&d(de)?de.some(function(De){return sn(De,K)}):sn(de,K))&&(ae.addKey(Oe),Q.push(_e)))}switch($.type){case"add":var ke=new pn().addKeys(g.values?F.map(function(ze){return G(ze)}):F),te=F.concat(g.values?Q.filter(function(ze){return ze=G(ze),!ke.hasKey(ze)&&(ke.addKey(ze),!0)}):Q.map(function(ze){return G(ze)}).filter(function(ze){return!ke.hasKey(ze)&&(ke.addKey(ze),!0)}));break;case"put":var Ce=new pn().addKeys($.values.map(function(ze){return G(ze)}));te=F.filter(function(ze){return!Ce.hasKey(g.values?G(ze):ze)}).concat(g.values?Q:Q.map(function(ze){return G(ze)}));break;case"delete":var Ne=new pn().addKeys($.keys);te=F.filter(function(ze){return!Ne.hasKey(g.values?G(ze):ze)});break;case"deleteRange":var Ve=$.range;te=F.filter(function(ze){return!sn(G(ze),Ve)})}return te},f);return ee===f?f:(ee.sort(function(F,$){return ht(U(F),U($))||ht(G(F),G($))}),g.limit&&g.limit<1/0&&(ee.length>g.limit?ee.length=g.limit:f.length===g.limit&&ee.length<g.limit&&(A.dirty=!0)),R?Object.freeze(ee):ee)}function An(f,g){return ht(f.lower,g.lower)===0&&ht(f.upper,g.upper)===0&&!!f.lowerOpen==!!g.lowerOpen&&!!f.upperOpen==!!g.upperOpen}function wi(f,g){return function(_,E,A,R){if(_===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ht(_,E))===0){if(A&&R)return 0;if(A)return 1;if(R)return-1}return E}(f.lower,g.lower,f.lowerOpen,g.lowerOpen)<=0&&0<=function(_,E,A,R){if(_===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ht(_,E))===0){if(A&&R)return 0;if(A)return-1;if(R)return 1}return E}(f.upper,g.upper,f.upperOpen,g.upperOpen)}function Vo(f,g,_,E){f.subscribers.add(_),E.addEventListener("abort",function(){var A,R;f.subscribers.delete(_),f.subscribers.size===0&&(A=f,R=g,setTimeout(function(){A.subscribers.size===0&&Qe(R,A)},3e3))})}var Uu={stack:"dbcore",level:0,name:"Cache",create:function(f){var g=f.schema.name;return r(r({},f),{transaction:function(_,E,A){var R,O,P=f.transaction(_,E,A);return E==="readwrite"&&(O=(R=new AbortController).signal,A=function(K){return function(){if(R.abort(),E==="readwrite"){for(var G=new Set,X=0,U=_;X<U.length;X++){var ee=U[X],F=Ei["idb://".concat(g,"/").concat(ee)];if(F){var $=f.table(ee),te=F.optimisticOps.filter(function(ze){return ze.trans===P});if(P._explicit&&K&&P.mutatedParts)for(var Q=0,ae=Object.values(F.queries.query);Q<ae.length;Q++)for(var fe=0,de=(ke=ae[Q]).slice();fe<de.length;fe++)Da((Ce=de[fe]).obsSet,P.mutatedParts)&&(Qe(ke,Ce),Ce.subscribers.forEach(function(ze){return G.add(ze)}));else if(0<te.length){F.optimisticOps=F.optimisticOps.filter(function(ze){return ze.trans!==P});for(var _e=0,Oe=Object.values(F.queries.query);_e<Oe.length;_e++)for(var ke,Ce,Ne,Ve=0,De=(ke=Oe[_e]).slice();Ve<De.length;Ve++)(Ce=De[Ve]).res!=null&&P.mutatedParts&&(K&&!Ce.dirty?(Ne=Object.isFrozen(Ce.res),Ne=Ti(Ce.res,Ce.req,te,$,Ce,Ne),Ce.dirty?(Qe(ke,Ce),Ce.subscribers.forEach(function(ze){return G.add(ze)})):Ne!==Ce.res&&(Ce.res=Ne,Ce.promise=Ue.resolve({result:Ne}))):(Ce.dirty&&Qe(ke,Ce),Ce.subscribers.forEach(function(ze){return G.add(ze)})))}}}G.forEach(function(ze){return ze()})}}},P.addEventListener("abort",A(!1),{signal:O}),P.addEventListener("error",A(!1),{signal:O}),P.addEventListener("complete",A(!0),{signal:O})),P},table:function(_){var E=f.table(_),A=E.schema.primaryKey;return r(r({},E),{mutate:function(R){var O=qe.trans;if(A.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return E.mutate(R);var P=Ei["idb://".concat(g,"/").concat(_)];return P?(O=E.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||D(A,R).some(function(K){return K==null}))?(P.optimisticOps.push(R),R.mutatedParts&&Yi(R.mutatedParts),O.then(function(K){0<K.numFailures&&(Qe(P.optimisticOps,R),(K=gn(0,R,K))&&P.optimisticOps.push(K),R.mutatedParts&&Yi(R.mutatedParts))}),O.catch(function(){Qe(P.optimisticOps,R),R.mutatedParts&&Yi(R.mutatedParts)})):O.then(function(K){var G=gn(0,r(r({},R),{values:R.values.map(function(X,U){var ee;return K.failures[U]?X:(X=(ee=A.keyPath)!==null&&ee!==void 0&&ee.includes(".")?V(X):r({},X),L(X,A.keyPath,K.results[U]),X)})}),K);P.optimisticOps.push(G),queueMicrotask(function(){return R.mutatedParts&&Yi(R.mutatedParts)})}),O):E.mutate(R)},query:function(R){if(!vt(qe,E)||!cn("query",R))return E.query(R);var O=((G=qe.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",U=qe,P=U.requery,K=U.signal,G=function($,te,Q,ae){var fe=Ei["idb://".concat($,"/").concat(te)];if(!fe)return[];if(!(te=fe.queries[Q]))return[null,!1,fe,null];var de=te[(ae.query?ae.query.index.name:null)||""];if(!de)return[null,!1,fe,null];switch(Q){case"query":var _e=de.find(function(Oe){return Oe.req.limit===ae.limit&&Oe.req.values===ae.values&&An(Oe.req.query.range,ae.query.range)});return _e?[_e,!0,fe,de]:[de.find(function(Oe){return("limit"in Oe.req?Oe.req.limit:1/0)>=ae.limit&&(!ae.values||Oe.req.values)&&wi(Oe.req.query.range,ae.query.range)}),!1,fe,de];case"count":return _e=de.find(function(Oe){return An(Oe.req.query.range,ae.query.range)}),[_e,!!_e,fe,de]}}(g,_,"query",R),X=G[0],U=G[1],ee=G[2],F=G[3];return X&&U?X.obsSet=R.obsSet:(U=E.query(R).then(function($){var te=$.result;if(X&&(X.res=te),O){for(var Q=0,ae=te.length;Q<ae;++Q)Object.freeze(te[Q]);Object.freeze(te)}else $.result=V(te);return $}).catch(function($){return F&&X&&Qe(F,X),Promise.reject($)}),X={obsSet:R.obsSet,promise:U,subscribers:new Set,type:"query",req:R,dirty:!1},F?F.push(X):(F=[X],(ee=ee||(Ei["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=F)),Vo(X,F,P,K),X.promise.then(function($){return{result:Ti($.result,R,ee==null?void 0:ee.optimisticOps,E,X,O)}})}})}})}};function Lo(f,g){return new Proxy(f,{get:function(_,E,A){return E==="db"?g:Reflect.get(_,E,A)}})}var Si=(Wt.prototype.version=function(f){if(isNaN(f)||f<.1)throw new Fe.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new Fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var g=this._versions,_=g.filter(function(E){return E._cfg.version===f})[0];return _||(_=new this.Version(f),g.push(_),g.sort(Ia),_.stores({}),this._state.autoSchema=!1,_)},Wt.prototype._whenReady=function(f){var g=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?f():new Ue(function(_,E){if(g._state.openComplete)return E(new Fe.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void E(new Fe.DatabaseClosed);g.open().catch(Tt)}g._state.dbReadyPromise.then(_,E)}).then(f)},Wt.prototype.use=function(f){var g=f.stack,_=f.create,E=f.level,A=f.name;return A&&this.unuse({stack:g,name:A}),f=this._middlewares[g]||(this._middlewares[g]=[]),f.push({stack:g,create:_,level:E??10,name:A}),f.sort(function(R,O){return R.level-O.level}),this},Wt.prototype.unuse=function(f){var g=f.stack,_=f.name,E=f.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(A){return E?A.create!==E:!!_&&A.name!==_})),this},Wt.prototype.open=function(){var f=this;return Rr(wn,function(){return Lu(f)})},Wt.prototype._close=function(){var f=this._state,g=vr.indexOf(this);if(0<=g&&vr.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new Ue(function(_){f.dbReadyResolve=_}),f.openCanceller=new Ue(function(_,E){f.cancelOpen=E}))},Wt.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new Fe.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Fe.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Wt.prototype.delete=function(f){var g=this;f===void 0&&(f={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ue(function(A,R){function O(){g.close(f);var P=g._deps.indexedDB.deleteDatabase(g.name);P.onsuccess=ut(function(){var K,G,X;K=g._deps,G=g.name,X=K.indexedDB,K=K.IDBKeyRange,js(X)||G===_r||No(X,K).delete(G).catch(Tt),A()}),P.onerror=sr(R),P.onblocked=g._fireOnBlocked}if(_)throw new Fe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(O):O()})},Wt.prototype.backendDB=function(){return this.idbdb},Wt.prototype.isOpen=function(){return this.idbdb!==null},Wt.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},Wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Wt.prototype,"tables",{get:function(){var f=this;return c(this._allTables).map(function(g){return f._allTables[g]})},enumerable:!1,configurable:!0}),Wt.prototype.transaction=function(){var f=(function(g,_,E){var A=arguments.length;if(A<2)throw new Fe.InvalidArgument("Too few arguments");for(var R=new Array(A-1);--A;)R[A-1]=arguments[A];return E=R.pop(),[g,q(R),E]}).apply(this,arguments);return this._transaction.apply(this,f)},Wt.prototype._transaction=function(f,g,_){var E=this,A=qe.trans;A&&A.db===this&&f.indexOf("!")===-1||(A=null);var R,O,P=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(O=g.map(function(G){if(G=G instanceof E.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),f=="r"||f===mn)R=mn;else{if(f!="rw"&&f!=Vi)throw new Fe.InvalidArgument("Invalid transaction mode: "+f);R=Vi}if(A){if(A.mode===mn&&R===Vi){if(!P)throw new Fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");A=null}A&&O.forEach(function(G){if(A&&A.storeNames.indexOf(G)===-1){if(!P)throw new Fe.SubTransaction("Table "+G+" not included in parent transaction.");A=null}}),P&&A&&!A.active&&(A=null)}}catch(G){return A?A._promise(null,function(X,U){U(G)}):$t(G)}var K=(function G(X,U,ee,F,$){return Ue.resolve().then(function(){var te=qe.transless||qe,Q=X._createTransaction(U,ee,X._dbSchema,F);if(Q.explicit=!0,te={trans:Q,transless:te},F)Q.idbtrans=F.idbtrans;else try{Q.create(),Q.idbtrans._explicit=!0,X._state.PR1398_maxLoop=3}catch(de){return de.name===un.InvalidState&&X.isOpen()&&0<--X._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),X.close({disableAutoOpen:!1}),X.open().then(function(){return G(X,U,ee,null,$)})):$t(de)}var ae,fe=we($);return fe&&ir(),te=Ue.follow(function(){var de;(ae=$.call(Q,Q))&&(fe?(de=On.bind(null,null),ae.then(de,de)):typeof ae.next=="function"&&typeof ae.throw=="function"&&(ae=kr(ae)))},te),(ae&&typeof ae.then=="function"?Ue.resolve(ae).then(function(de){return Q.active?de:$t(new Fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return ae})).then(function(de){return F&&Q._resolve(),Q._completion.then(function(){return de})}).catch(function(de){return Q._reject(de),$t(de)})})}).bind(null,this,R,O,A,_);return A?A._promise(R,K,"lock"):qe.trans?Rr(qe.transless,function(){return E._whenReady(K)}):this._whenReady(K)},Wt.prototype.table=function(f){if(!I(this._allTables,f))throw new Fe.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},Wt);function Wt(f,g){var _=this;this._middlewares={},this.verno=0;var E=Wt.dependencies;this._options=g=r({addons:Wt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},E=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var A,R,O,P,K,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Tt,dbReadyPromise:null,cancelOpen:Tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};G.dbReadyPromise=new Ue(function(U){G.dbReadyResolve=U}),G.openCanceller=new Ue(function(U,ee){G.cancelOpen=ee}),this._state=G,this.name=f,this.on=pi(this,"populate","blocked","versionchange","close",{ready:[rs,Tt]}),this.on.ready.subscribe=oe(this.on.ready.subscribe,function(U){return function(ee,F){Wt.vip(function(){var $,te=_._state;te.openComplete?(te.dbOpenError||Ue.resolve().then(ee),F&&U(ee)):te.onReadyBeingFired?(te.onReadyBeingFired.push(ee),F&&U(ee)):(U(ee),$=_,F||U(function Q(){$.on.ready.unsubscribe(ee),$.on.ready.unsubscribe(Q)}))})}}),this.Collection=(A=this,Ui(Dr.prototype,function(ae,Q){this.db=A;var F=mi,$=null;if(Q)try{F=Q()}catch(fe){$=fe}var te=ae._ctx,Q=te.table,ae=Q.hook.reading.fire;this._ctx={table:Q,index:te.index,isPrimKey:!te.index||Q.schema.primKey.keyPath&&te.index===Q.schema.primKey.name,range:F,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:te.or,valueMapper:ae!==Br?ae:null}})),this.Table=(R=this,Ui(wa.prototype,function(U,ee,F){this.db=R,this._tx=F,this.name=U,this.schema=ee,this.hook=R._allTables[U]?R._allTables[U].hook:pi(null,{creating:[Pu,Tt],reading:[Cs,Br],updating:[Wl,Tt],deleting:[Ir,Tt]})})),this.Transaction=(O=this,Ui(Or.prototype,function(U,ee,F,$,te){var Q=this;this.db=O,this.mode=U,this.storeNames=ee,this.schema=F,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=pi(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ue(function(ae,fe){Q._resolve=ae,Q._reject=fe}),this._completion.then(function(){Q.active=!1,Q.on.complete.fire()},function(ae){var fe=Q.active;return Q.active=!1,Q.on.error.fire(ae),Q.parent?Q.parent._reject(ae):fe&&Q.idbtrans&&Q.idbtrans.abort(),$t(ae)})})),this.Version=(P=this,Ui(Vu.prototype,function(U){this.db=P,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,Ui(yi.prototype,function(U,ee,F){if(this.db=K,this._ctx={table:U,index:ee===":id"?null:ee,or:F},this._cmp=this._ascending=ht,this._descending=function($,te){return ht(te,$)},this._max=function($,te){return 0<ht($,te)?$:te},this._min=function($,te){return ht($,te)<0?$:te},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new Fe.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=qi(g.IDBKeyRange),this._createTransaction=function(U,ee,F,$){return new _.Transaction(U,ee,F,_._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(U){_.on("blocked").fire(U),vr.filter(function(ee){return ee.name===_.name&&ee!==_&&!ee._state.vcFired}).map(function(ee){return ee.on("versionchange").fire(U)})},this.use(Pe),this.use(Uu),this.use(wt),this.use(b),this.use(ne);var X=new Proxy(this,{get:function(U,ee,F){if(ee==="_vip")return!0;if(ee==="table")return function(te){return Lo(_.table(te),X)};var $=Reflect.get(U,ee,F);return $ instanceof wa?Lo($,X):ee==="tables"?$.map(function(te){return Lo(te,X)}):ee==="_createTransaction"?function(){return Lo($.apply(this,arguments),X)}:$}});this.vip=X,E.forEach(function(U){return U(_)})}var Pa,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",lf=(ju.prototype.subscribe=function(f,g,_){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:g,complete:_})},ju.prototype[Er]=function(){return this},ju);function ju(f){this._subscribe=f}try{Pa={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Pa={indexedDB:null,IDBKeyRange:null}}function cf(f){var g,_=!1,E=new lf(function(A){var R=we(f),O,P=!1,K={},G={},X={get closed(){return P},unsubscribe:function(){P||(P=!0,O&&O.abort(),U&&Sn.storagemutated.unsubscribe(F))}};A.start&&A.start(X);var U=!1,ee=function(){return Qr($)},F=function(te){Mr(K,te),Da(G,K)&&ee()},$=function(){var te,Q,ae;!P&&Pa.indexedDB&&(K={},te={},O&&O.abort(),O=new AbortController,ae=function(fe){var de=gr();try{R&&ir();var _e=$n(f,fe);return _e=R?_e.finally(On):_e}finally{de&&ki()}}(Q={subscr:te,signal:O.signal,requery:ee,querier:f,trans:null}),Promise.resolve(ae).then(function(fe){_=!0,g=fe,P||Q.signal.aborted||(K={},function(de){for(var _e in de)if(I(de,_e))return;return 1}(G=te)||U||(Sn(cs,F),U=!0),Qr(function(){return!P&&A.next&&A.next(fe)}))},function(fe){_=!1,["DatabaseClosedError","AbortError"].includes(fe==null?void 0:fe.name)||P||Qr(function(){P||A.error&&A.error(fe)})}))};return setTimeout(ee,0),X});return E.hasValue=function(){return _},E.getValue=function(){return g},E}var Bs=Si;function Zl(f){var g=ds;try{ds=!0,Sn.storagemutated.fire(f),Nn(f,!0)}finally{ds=g}}C(Bs,r(r({},Ar),{delete:function(f){return new Bs(f,{addons:[]}).delete()},exists:function(f){return new Bs(f,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return g=Bs.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(js(_)?Promise.resolve(_.databases()).then(function(E){return E.map(function(A){return A.name}).filter(function(A){return A!==_r})}):No(_,g).toCollection().primaryKeys()).then(f)}catch{return $t(new Fe.MissingAPI)}var g,_},defineClass:function(){return function(f){p(this,f)}},ignoreTransaction:function(f){return qe.trans?Rr(qe.transless,f):f()},vip:Hi,async:function(f){return function(){try{var g=kr(f.apply(this,arguments));return g&&typeof g.then=="function"?g:Ue.resolve(g)}catch(_){return $t(_)}}},spawn:function(f,g,_){try{var E=kr(f.apply(_,g||[]));return E&&typeof E.then=="function"?E:Ue.resolve(E)}catch(A){return $t(A)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(f,g){return g=Ue.resolve(typeof f=="function"?Bs.ignoreTransaction(f):f).timeout(g||6e4),qe.trans?qe.trans.waitFor(g):g},Promise:Ue,debug:{get:function(){return Ln},set:function(f){Mu(f)}},derive:he,extend:p,props:C,override:oe,Events:pi,on:Sn,liveQuery:cf,extendObservabilitySet:Mr,getByKeyPath:Me,setByKeyPath:L,delByKeyPath:function(f,g){typeof g=="string"?L(f,g,void 0):"length"in g&&[].map.call(g,function(_){L(f,_,void 0)})},shallowClone:N,deepClone:V,getObjectDiff:w,cmp:ht,asap:xe,minKey:-1/0,addons:[],connections:vr,errnames:un,dependencies:Pa,cache:Ei,semVer:"4.0.11",version:"4.0.11".split(".").map(function(f){return parseInt(f)}).reduce(function(f,g,_){return f+g/Math.pow(10,2*_)})})),Bs.maxKey=qi(Bs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Sn(cs,function(f){ds||(f=new CustomEvent(Bi,{detail:f}),ds=!0,dispatchEvent(f),ds=!1)}),addEventListener(Bi,function(f){f=f.detail,ds||Zl(f)}));var Ma,ds=!1,ur=function(){};return typeof BroadcastChannel<"u"&&((ur=function(){(Ma=new BroadcastChannel(Bi)).onmessage=function(f){return f.data&&Zl(f.data)}})(),typeof Ma.unref=="function"&&Ma.unref(),Sn(cs,function(f){ds||Ma.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!Si.disableBfCache&&f.persisted){Ln&&console.debug("Dexie: handling persisted pagehide"),Ma!=null&&Ma.close();for(var g=0,_=vr;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!Si.disableBfCache&&f.persisted&&(Ln&&console.debug("Dexie: handling persisted pageshow"),ur(),Zl({all:new pn(-1/0,[[]])}))})),Ue.rejectionMapper=function(f,g){return!f||f instanceof Ie||f instanceof TypeError||f instanceof SyntaxError||!f.name||!Pi[f.name]?f:(g=new Pi[f.name](g||f.message,f),"stack"in f&&B(g,"stack",{get:function(){return this.inner.stack}}),g)},Mu(Ln),r(Si,Object.freeze({__proto__:null,Dexie:Si,liveQuery:cf,Entity:Ms,cmp:ht,PropModification:It,replacePrefix:function(f,g){return new It({replacePrefix:[f,g]})},add:function(f){return new It({add:f})},remove:function(f){return new It({remove:f})},default:Si,RangeSet:pn,mergeRanges:Wr,rangesOverlap:Po}),{default:Si}),Si})}(Cd)),Cd.exports}var iM=rM();const Sy=_w(iM),NT=Symbol.for("Dexie"),om=globalThis[NT]||(globalThis[NT]=Sy);if(Sy.semVer!==om.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Sy.semVer} and ${om.semVer}`);const{liveQuery:uV,mergeRanges:lV,rangesOverlap:cV,RangeSet:hV,cmp:fV,Entity:dV,PropModification:mV,replacePrefix:pV,add:gV,remove:yV}=om;class sM extends om{constructor(){super("FoodTrackerDB");Ab(this,"foods");this.version(1).stores({foods:"date"})}}const IA=new sM;async function aM(i,e){await IA.foods.put({date:i,selectedFoods:e})}async function oM(){return await IA.foods.toArray()}var Zo={},Fc={},Jo={},jg={},Kc={},PT;function Nm(){return PT||(PT=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.settings=void 0,Kc.settings={debug:!1,gravity:800,zIndex:99999,respectReducedMotion:!0}),Kc}var eu={},Hc={},MT;function Av(){if(MT)return Hc;MT=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.overrideDefaults=void 0;function i(e,t){return Object.assign({},e,t)}return Hc.overrideDefaults=i,Hc}var Gc={},tu={},Qc={},kT;function uM(){if(kT)return Qc;kT=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.Circle=void 0;var i=function(){function e(t,r,a){a===void 0&&(a=0),this.x=t,this.y=r,this.radius=a}return e.zero=new e(0,0),e}();return Qc.Circle=i,Qc}var Yc={},Bg={},VT;function Ou(){return VT||(VT=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.approximately=i.clamp=i.invlerp=i.slerp=i.lerp=i.epsilon=i.rad2deg=i.deg2rad=void 0,i.deg2rad=Math.PI/180,i.rad2deg=180/Math.PI,i.epsilon=1e-6;function e(c,d,p){return(1-p)*c+p*d}i.lerp=e;function t(c,d,p){return e(c,d,(1-Math.cos(p*Math.PI))/2)}i.slerp=t;function r(c,d,p){return(p-c)/(d-c)}i.invlerp=r;function a(c,d,p){return Math.min(p,Math.max(d,c))}i.clamp=a;function u(c,d){return Math.abs(c-d)<i.epsilon}i.approximately=u}(Bg)),Bg}var LT;function lM(){if(LT)return Yc;LT=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.Color=void 0;var i=Ou(),e=function(){function t(r,a,u){this.values=new Float32Array(3),this.rgb=[r,a,u]}return Object.defineProperty(t.prototype,"r",{get:function(){return this.values[0]},set:function(r){this.values[0]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this.values[1]},set:function(r){this.values[1]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.values[2]},set:function(r){this.values[2]=Math.floor(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return[this.r,this.g,this.b]},set:function(r){this.r=r[0],this.g=r[1],this.b=r[2]},enumerable:!1,configurable:!0}),t.prototype.mix=function(r,a){return a===void 0&&(a=.5),new t(i.lerp(this.r,r.r,a),i.lerp(this.g,r.g,a),i.lerp(this.b,r.b,a))},t.prototype.toHex=function(){var r=function(a){return a.toString(16).padStart(2,"0")};return"#"+r(this.r)+r(this.g)+r(this.b)},t.prototype.toString=function(){return"rgb("+this.values.join(", ")+")"},t.fromHex=function(r){return r.startsWith("#")&&(r=r.substr(1)),new t(parseInt(r.substr(0,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(4,2),16))},t.fromHsl=function(r,a,u){if(r/=360,a/=100,u/=100,a===0)return new t(u,u,u);var c=function(T,I,C){return C<0&&(C+=1),C>1&&(C-=1),C<.16666666666666666?T+(I-T)*6*C:C<.5?I:C<.6666666666666666?T+(I-T)*(.6666666666666666-C)*6:T},d=function(T){return Math.min(255,256*T)},p=u<.5?u*(1+a):u+a-u*a,v=2*u-p;return new t(d(c(v,p,r+1/3)),d(c(v,p,r)),d(c(v,p,r-1/3)))},t.white=new t(255,255,255),t.black=new t(0,0,0),t}();return Yc.Color=e,Yc}var ea={},$c={},UT;function RA(){if(UT)return $c;UT=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.Spline=void 0;var i=Ou(),e=function(){function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(r.length===0)throw new Error("Splines require at least one key.");if(Array.isArray(r[0]))throw new Error("You are trying to pass an array to the spline constructor, which is not supported. Try to spread the array into the constructor instead.");this.keys=r}return t.prototype.evaluate=function(r){if(this.keys.length===0)throw new Error("Attempt to evaluate a spline with no keys.");if(this.keys.length===1)return this.keys[0].value;var a=this.keys.sort(function(v,T){return v.time-T.time}),u=a.findIndex(function(v){return v.time>r});if(u===0)return a[0].value;if(u===-1)return a[a.length-1].value;var c=a[u-1],d=a[u],p=i.invlerp(c.time,d.time,r);return this.interpolate(c.value,d.value,p)},t}();return $c.Spline=e,$c}var jT;function cM(){if(jT)return ea;jT=1;var i=ea&&ea.__extends||function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function d(){this.constructor=u}u.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=ea&&ea.__spreadArray||function(a,u){for(var c=0,d=u.length,p=a.length;c<d;c++,p++)a[p]=u[c];return a};Object.defineProperty(ea,"__esModule",{value:!0}),ea.Gradient=void 0;var t=RA(),r=function(a){i(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.interpolate=function(c,d,p){return c.mix(d,p)},u.solid=function(c){return new u({value:c,time:.5})},u.simple=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var p=1/(c.length-1);return new(u.bind.apply(u,e([void 0],c.map(function(v,T){return{value:v,time:T*p}}))))},u}(t.Spline);return ea.Gradient=r,ea}var nu={},BT;function hM(){if(BT)return nu;BT=1;var i=nu&&nu.__extends||function(){var a=function(u,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(d[v]=p[v])},a(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(u,c);function d(){this.constructor=u}u.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(nu,"__esModule",{value:!0}),nu.NumericSpline=void 0;var e=Ou(),t=RA(),r=function(a){i(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return u.prototype.interpolate=function(c,d,p){return e.slerp(c,d,p)},u}(t.Spline);return nu.NumericSpline=r,nu}var Xc={},zT;function fM(){if(zT)return Xc;zT=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.Rect=void 0;var i=function(){function e(t,r,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.x=t,this.y=r,this.width=a,this.height=u}return e.fromScreen=function(){return new e(window.scrollX,window.scrollY,window.innerWidth,window.innerHeight)},e.fromElement=function(t){var r=t.getBoundingClientRect();return new e(window.scrollX+r.x,window.scrollY+r.y,r.width,r.height)},e.zero=new e(0,0),e}();return Xc.Rect=i,Xc}var ru={},qT;function Iv(){if(qT)return ru;qT=1;var i=ru&&ru.__spreadArray||function(r,a){for(var u=0,c=a.length,d=r.length;u<c;u++,d++)r[d]=a[u];return r};Object.defineProperty(ru,"__esModule",{value:!0}),ru.Vector=void 0;var e=Ou(),t=function(){function r(a,u,c){a===void 0&&(a=0),u===void 0&&(u=0),c===void 0&&(c=0),this.values=new Float32Array(3),this.xyz=[a,u,c]}return Object.defineProperty(r.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"z",{get:function(){return this.values[2]},set:function(a){this.values[2]=a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"xyz",{get:function(){return[this.x,this.y,this.z]},set:function(a){this.values[0]=a[0],this.values[1]=a[1],this.values[2]=a[2]},enumerable:!1,configurable:!0}),r.prototype.magnitude=function(){return Math.sqrt(this.sqrMagnitude())},r.prototype.sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},r.prototype.add=function(a){return new r(this.x+a.x,this.y+a.y,this.z+a.z)},r.prototype.subtract=function(a){return new r(this.x-a.x,this.y-a.y,this.z-a.z)},r.prototype.scale=function(a){return typeof a=="number"?new r(this.x*a,this.y*a,this.z*a):new r(this.x*a.x,this.y*a.y,this.z*a.z)},r.prototype.normalized=function(){var a=this.magnitude();return a!==0?this.scale(1/a):new(r.bind.apply(r,i([void 0],this.xyz)))},r.prototype.angle=function(a){return e.rad2deg*Math.acos((this.x*a.x+this.y*a.y+this.z*a.z)/(this.magnitude()*a.magnitude()))},r.prototype.cross=function(a){return new r(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)},r.prototype.dot=function(a){return this.magnitude()*a.magnitude()*Math.cos(e.deg2rad*this.angle(a))},r.prototype.toString=function(){return"Vector("+this.values.join(", ")+")"},r.from2dAngle=function(a){return new r(Math.cos(a*e.deg2rad),Math.sin(a*e.deg2rad))},r.zero=new r(0,0,0),r.one=new r(1,1,1),r.right=new r(1,0,0),r.up=new r(0,1,0),r.forward=new r(0,0,1),r}();return ru.Vector=t,ru}var FT;function pa(){return FT||(FT=1,function(i){var e=tu&&tu.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=tu&&tu.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(uM(),i),t(lM(),i),t(cM(),i),t(hM(),i),t(fM(),i),t(Iv(),i)}(tu)),tu}var KT;function dM(){if(KT)return Gc;KT=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.rotationToNormal=void 0;var i=pa(),e=Ou();function t(r){var a=r.x*e.deg2rad,u=r.y*e.deg2rad,c=new i.Vector(Math.cos(u),0,Math.sin(u)),d=new i.Vector(0,Math.cos(a),Math.sin(a));return c.cross(d)}return Gc.rotationToNormal=t,Gc}var Wc={},HT;function xA(){return HT||(HT=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.despawningRules=void 0,Wc.despawningRules={lifetime:function(i){return i.lifetime<=0},bounds:function(i){var e=document.documentElement.scrollHeight;return i.location.y>e}}),Wc}var Zc={},GT;function mM(){if(GT)return Zc;GT=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.Lazy=void 0;var i=function(){function e(t,r){r===void 0&&(r=e.defaultExists),this.factory=t,this.exists=r}return Object.defineProperty(e.prototype,"current",{get:function(){return this.exists(this.value)||(this.value=this.factory()),this.value},enumerable:!1,configurable:!0}),e.defaultExists=function(t){return typeof t<"u"},e}();return Zc.Lazy=i,Zc}var QT;function ql(){return QT||(QT=1,function(i){var e=eu&&eu.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=eu&&eu.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(Av(),i),t(dM(),i),t(xA(),i),t(mM(),i)}(eu)),eu}var YT;function CA(){return YT||(YT=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.particleContainer=i.debugContainer=i.rootContainer=void 0;var e=Nm(),t=ql(),r="party-js-";function a(c){return c&&c.isConnected}function u(c,d,p){var v=document.createElement("div");return v.id=r+c,Object.assign(v.style,d),p.appendChild(v)}i.rootContainer=new t.Lazy(function(){return u("container",{position:"fixed",left:"0",top:"0",height:"100vh",width:"100vw",pointerEvents:"none",userSelect:"none",zIndex:e.settings.zIndex.toString()},document.body)},a),i.debugContainer=new t.Lazy(function(){return u("debug",{position:"absolute",top:"0",left:"0",margin:"0.5em",padding:"0.5em 1em",border:"2px solid rgb(0, 0, 0, 0.2)",background:"rgb(0, 0, 0, 0.1)",color:"#555",fontFamily:"monospace"},i.rootContainer.current)},a),i.particleContainer=new t.Lazy(function(){return u("particles",{width:"100%",height:"100%",overflow:"hidden",perspective:"1200px"},i.rootContainer.current)},a)}(jg)),jg}var $T;function pM(){if($T)return Jo;$T=1;var i=Jo&&Jo.__spreadArray||function(a,u){for(var c=0,d=u.length,p=a.length;c<d;c++,p++)a[p]=u[c];return a};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.Debug=void 0;var e=CA(),t=Nm(),r=function(){function a(u){this.scene=u,this.refreshRate=8,this.refreshTimer=1/this.refreshRate}return a.prototype.tick=function(u){var c=e.debugContainer.current,d=t.settings.debug?"block":"none";c.style.display!==d&&(c.style.display=d),t.settings.debug&&(this.refreshTimer+=u,this.refreshTimer>1/this.refreshRate&&(this.refreshTimer=0,c.innerHTML=this.getDebugInformation(u).join("<br>")))},a.prototype.getDebugInformation=function(u){var c=this.scene.emitters.length,d=this.scene.emitters.reduce(function(T,I){return T+I.particles.length},0),p=["<b>party.js Debug</b>","--------------","FPS: "+Math.round(1/u),"Emitters: "+c,"Particles: "+d],v=this.scene.emitters.map(function(T){return[": "+(T.currentLoop+1)+"/"+(T.options.loops>=0?T.options.loops:""),"p: "+T.particles.length,T.isExpired?"<i>expired</i>":"t: "+T.durationTimer.toFixed(3)+"s"].join(", ")});return p.push.apply(p,i(["--------------"],v)),p},a}();return Jo.Debug=r,Jo}var Jc={},wr={},ii={},XT;function nf(){if(XT)return ii;XT=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.randomInsideCircle=ii.randomInsideRect=ii.randomUnitVector=ii.pick=ii.randomRange=void 0;var i=pa(),e=Ou();function t(d,p){return d===void 0&&(d=0),p===void 0&&(p=1),e.lerp(d,p,Math.random())}ii.randomRange=t;function r(d){return d.length===0?void 0:d[Math.floor(Math.random()*d.length)]}ii.pick=r;function a(){var d=t(0,2*Math.PI),p=t(-1,1);return new i.Vector(Math.sqrt(1-p*p)*Math.cos(d),Math.sqrt(1-p*p)*Math.sin(d),p)}ii.randomUnitVector=a;function u(d){return new i.Vector(d.x+t(0,d.width),d.y+t(0,d.height))}ii.randomInsideRect=u;function c(d){var p=t(0,2*Math.PI),v=t(0,d.radius);return new i.Vector(d.x+Math.cos(p)*v,d.y+Math.sin(p)*v)}return ii.randomInsideCircle=c,ii}var WT;function rf(){if(WT)return wr;WT=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.gradientSample=wr.splineSample=wr.skewRelative=wr.skew=wr.range=wr.evaluateVariation=void 0;var i=nf();function e(d){return Array.isArray(d)?i.pick(d):typeof d=="function"?d():d}wr.evaluateVariation=e;function t(d,p){return function(){return i.randomRange(d,p)}}wr.range=t;function r(d,p){return function(){return d+i.randomRange(-p,p)}}wr.skew=r;function a(d,p){return function(){return d*(1+i.randomRange(-p,p))}}wr.skewRelative=a;function u(d){return function(){return d.evaluate(Math.random())}}wr.splineSample=u;function c(d){return u(d)}return wr.gradientSample=c,wr}var iu={},eh={},ZT;function gM(){if(ZT)return eh;ZT=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.getDefaultEmitterOptions=void 0;var i=xA();function e(){return{duration:5,loops:1,useGravity:!0,maxParticles:300,despawningRules:[i.despawningRules.lifetime,i.despawningRules.bounds],modules:[]}}return eh.getDefaultEmitterOptions=e,eh}var th={},si={},JT;function Pm(){if(JT)return si;JT=1,Object.defineProperty(si,"__esModule",{value:!0}),si.circleSource=si.rectSource=si.mouseSource=si.elementSource=si.dynamicSource=void 0;var i=pa(),e=nf();function t(d){if(d instanceof HTMLElement)return r(d);if(d instanceof i.Circle)return c(d);if(d instanceof i.Rect)return u(d);if(d instanceof MouseEvent)return a(d);throw new Error("Cannot infer the source type of '"+d+"'.")}si.dynamicSource=t;function r(d){return function(){return e.randomInsideRect(i.Rect.fromElement(d))}}si.elementSource=r;function a(d){return function(){return new i.Vector(window.scrollX+d.clientX,window.scrollY+d.clientY)}}si.mouseSource=a;function u(d){return function(){return e.randomInsideRect(d)}}si.rectSource=u;function c(d){return function(){return e.randomInsideCircle(d)}}return si.circleSource=c,si}var ew;function yM(){if(ew)return th;ew=1,Object.defineProperty(th,"__esModule",{value:!0}),th.getDefaultEmissionOptions=void 0;var i=pa(),e=Pm();function t(){return{rate:10,angle:0,bursts:[],sourceSampler:e.rectSource(i.Rect.zero),initialLifetime:5,initialSpeed:5,initialSize:1,initialRotation:i.Vector.zero,initialColor:i.Color.white}}return th.getDefaultEmissionOptions=t,th}var nh={},tw;function vM(){if(tw)return nh;tw=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.getDefaultRendererOptions=void 0;function i(){return{shapeFactory:"square",applyColor:e,applyOpacity:t,applyLighting:r,applyTransform:a}}nh.getDefaultRendererOptions=i;function e(u,c){var d=u.toHex();switch(c.nodeName.toLowerCase()){case"div":c.style.background=d;break;case"svg":c.style.fill=c.style.color=d;break;default:c.style.color=d;break}}function t(u,c){c.style.opacity=u.toString()}function r(u,c){c.style.filter="brightness("+(.5+Math.abs(u))+")"}function a(u,c){c.style.transform="translateX("+(u.location.x-window.scrollX).toFixed(3)+"px) "+("translateY("+(u.location.y-window.scrollY).toFixed(3)+"px) ")+("translateZ("+u.location.z.toFixed(3)+"px) ")+("rotateX("+u.rotation.x.toFixed(3)+"deg) ")+("rotateY("+u.rotation.y.toFixed(3)+"deg) ")+("rotateZ("+u.rotation.z.toFixed(3)+"deg) ")+("scale("+u.size.toFixed(3)+")")}return nh}var nw;function _M(){return nw||(nw=1,function(i){var e=iu&&iu.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=iu&&iu.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(gM(),i),t(yM(),i),t(vM(),i)}(iu)),iu}var rh={},rw;function DA(){if(rw)return rh;rw=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.Particle=void 0;var i=pa(),e=Av(),t=function(){function r(a){var u=e.overrideDefaults({lifetime:0,size:1,location:i.Vector.zero,rotation:i.Vector.zero,velocity:i.Vector.zero,color:i.Color.white,opacity:1},a);this.id=Symbol(),this.size=this.initialSize=u.size,this.lifetime=this.initialLifetime=u.lifetime,this.rotation=this.initialRotation=u.rotation,this.location=u.location,this.velocity=u.velocity,this.color=u.color,this.opacity=u.opacity}return r}();return rh.Particle=t,rh}var iw;function OA(){if(iw)return Jc;iw=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Emitter=void 0;var i=Iv(),e=Nm(),t=rf(),r=Av(),a=_M(),u=DA(),c=function(){function d(p){this.particles=[],this.currentLoop=0,this.durationTimer=0,this.emissionTimer=0,this.attemptedBurstIndices=[],this.options=r.overrideDefaults(a.getDefaultEmitterOptions(),p==null?void 0:p.emitterOptions),this.emission=r.overrideDefaults(a.getDefaultEmissionOptions(),p==null?void 0:p.emissionOptions),this.renderer=r.overrideDefaults(a.getDefaultRendererOptions(),p==null?void 0:p.rendererOptions)}return Object.defineProperty(d.prototype,"isExpired",{get:function(){return this.options.loops>=0&&this.currentLoop>=this.options.loops},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"canRemove",{get:function(){return this.particles.length===0},enumerable:!1,configurable:!0}),d.prototype.clearParticles=function(){return this.particles.splice(0).length},d.prototype.tick=function(p){if(!this.isExpired&&(this.durationTimer+=p,this.durationTimer>=this.options.duration&&(this.currentLoop++,this.durationTimer=0,this.attemptedBurstIndices=[]),!this.isExpired)){for(var v=0,T=0,I=this.emission.bursts;T<I.length;T++){var C=I[T];if(C.time<=this.durationTimer&&!this.attemptedBurstIndices.includes(v)){for(var z=t.evaluateVariation(C.count),B=0;B<z;B++)this.emitParticle();this.attemptedBurstIndices.push(v)}v++}this.emissionTimer+=p;for(var he=1/this.emission.rate;this.emissionTimer>he;)this.emissionTimer-=he,this.emitParticle()}for(var ue=function(pe){var oe=ve.particles[pe];ve.tickParticle(oe,p),ve.options.despawningRules.some(function(Re){return Re(oe)})&&ve.particles.splice(pe,1)},ve=this,B=this.particles.length-1;B>=0;B--)ue(B)},d.prototype.tickParticle=function(p,v){p.lifetime-=v,this.options.useGravity&&(p.velocity=p.velocity.add(i.Vector.up.scale(e.settings.gravity*v))),p.location=p.location.add(p.velocity.scale(v));for(var T=0,I=this.options.modules;T<I.length;T++){var C=I[T];C(p)}},d.prototype.emitParticle=function(){var p=new u.Particle({location:this.emission.sourceSampler(),lifetime:t.evaluateVariation(this.emission.initialLifetime),velocity:i.Vector.from2dAngle(t.evaluateVariation(this.emission.angle)).scale(t.evaluateVariation(this.emission.initialSpeed)),size:t.evaluateVariation(this.emission.initialSize),rotation:t.evaluateVariation(this.emission.initialRotation),color:t.evaluateVariation(this.emission.initialColor)});return this.particles.push(p),this.particles.length>this.options.maxParticles&&this.particles.shift(),p},d}();return Jc.Emitter=c,Jc}var ih={},zg={},sw;function NA(){return sw||(sw=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.resolveShapeFactory=i.resolvableShapes=void 0;var e=rf();i.resolvableShapes={square:'<div style="height: 10px; width: 10px;"></div>',rectangle:'<div style="height: 6px; width: 10px;"></div>',circle:'<svg viewBox="0 0 2 2" width="10" height="10"><circle cx="1" cy="1" r="1" fill="currentColor"/></svg>',roundedSquare:'<div style="height: 10px; width: 10px; border-radius: 3px;"></div>',roundedRectangle:'<div style="height: 6px; width: 10px; border-radius: 3px;"></div>',star:'<svg viewBox="0 0 512 512" width="15" height="15"><polygon fill="currentColor" points="512,197.816 325.961,185.585 255.898,9.569 185.835,185.585 0,197.816 142.534,318.842 95.762,502.431 255.898,401.21 416.035,502.431 369.263,318.842"/></svg>'};function t(r){var a=e.evaluateVariation(r);if(typeof a=="string"){var u=i.resolvableShapes[a];if(!u)throw new Error("Failed to resolve shape key '"+a+"'. Did you forget to add it to the 'resolvableShapes' lookup?");var c=document.createElement("div");return c.innerHTML=u,c.firstElementChild}return a}i.resolveShapeFactory=t}(zg)),zg}var aw;function bM(){if(aw)return ih;aw=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.Renderer=void 0;var i=sf(),e=Iv(),t=CA(),r=NA(),a=ql(),u=function(){function c(){this.elements=new Map,this.light=new e.Vector(0,0,1),this.enabled=!0,this.enabled=!i.settings.respectReducedMotion||!window.matchMedia("(prefers-reduced-motion)").matches}return c.prototype.begin=function(){this.renderedParticles=[]},c.prototype.end=function(){for(var d=this.elements.keys(),p=d.next();!p.done;){var v=p.value;this.renderedParticles.includes(v)||(this.elements.get(v).remove(),this.elements.delete(v)),p=d.next()}return this.renderedParticles.length},c.prototype.renderParticle=function(d,p){if(this.enabled){var v=p.renderer,T=this.elements.has(d.id)?this.elements.get(d.id):this.createParticleElement(d,v);if(v.applyColor&&v.applyColor(d.color,T),v.applyOpacity&&v.applyOpacity(d.opacity,T),v.applyLighting){var I=a.rotationToNormal(d.rotation),C=I.dot(this.light);v.applyLighting(C,T)}v.applyTransform&&v.applyTransform(d,T),this.renderedParticles.push(d.id)}},c.prototype.createParticleElement=function(d,p){var v=r.resolveShapeFactory(p.shapeFactory),T=v.cloneNode(!0);return T.style.position="absolute",this.elements.set(d.id,t.particleContainer.current.appendChild(T)),T},c}();return ih.Renderer=u,ih}var ow;function EM(){if(ow)return Fc;ow=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Scene=void 0;var i=pM(),e=OA(),t=bM(),r=function(){function a(){this.emitters=[],this.debug=new i.Debug(this),this.renderer=new t.Renderer,this.scheduledTickId=void 0,this.lastTickTimestamp=performance.now(),this.tick=this.tick.bind(this),this.scheduleTick()}return a.prototype.createEmitter=function(u){var c=new e.Emitter(u);return this.emitters.push(c),c},a.prototype.clearEmitters=function(){return this.emitters.splice(0).length},a.prototype.clearParticles=function(){return this.emitters.reduce(function(u,c){return u+c.clearParticles()},0)},a.prototype.scheduleTick=function(){this.scheduledTickId=window.requestAnimationFrame(this.tick)},a.prototype.cancelTick=function(){window.cancelAnimationFrame(this.scheduledTickId)},a.prototype.tick=function(u){var c=(u-this.lastTickTimestamp)/1e3;try{for(var d=0;d<this.emitters.length;d++){var p=this.emitters[d];p.tick(c),p.isExpired&&p.canRemove&&this.emitters.splice(d--,1)}}catch(B){console.error(`An error occurred while updating the scene's emitters:
"`+B+'"')}try{this.renderer.begin();for(var v=0,T=this.emitters;v<T.length;v++)for(var p=T[v],I=0,C=p.particles;I<C.length;I++){var z=C[I];this.renderer.renderParticle(z,p)}this.renderer.end()}catch(B){console.error(`An error occurred while rendering the scene's particles:
"`+B+'"')}this.debug.tick(c),this.lastTickTimestamp=u,this.scheduleTick()},a}();return Fc.Scene=r,Fc}var su={},sh={},ah={},uw;function Rv(){if(uw)return ah;uw=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.ModuleBuilder=void 0;var i=pa(),e=function(){function u(){this.factor="lifetime",this.isRelative=!1}return u.prototype.drive=function(c){return this.driverKey=c,this},u.prototype.through=function(c){return this.factor=c,this},u.prototype.by=function(c){return this.driverValue=c,this},u.prototype.relative=function(c){return c===void 0&&(c=!0),this.isRelative=c,this},u.prototype.build=function(){var c=this;if(typeof this.driverKey>"u")throw new Error("No driving key was provided in the module builder. Did you forget a '.drive()' call?");if(typeof this.driverValue>"u")throw new Error("No driving value was provided in the module builder. Did you forget a '.through()' call?");return function(d){a(d,c.driverKey,t(c.driverValue,r(c.factor,d),d),c.isRelative)}},u}();ah.ModuleBuilder=e;function t(u,c,d){return typeof u=="object"&&"evaluate"in u?u.evaluate(c):typeof u=="function"?u(c,d):u}function r(u,c){switch(u){case"lifetime":return c.initialLifetime-c.lifetime;case"relativeLifetime":return(c.initialLifetime-c.lifetime)/c.initialLifetime;case"size":return c.size;default:throw new Error("Invalid driving factor '"+u+"'.")}}function a(u,c,d,p){if(p===void 0&&(p=!1),!p)u[c]=d;else{var v=u["initial"+c[0].toUpperCase()+c.substr(1)];if(typeof v>"u")throw new Error("Unable to use relative chaining with key '"+c+"'; no initial value exists.");if(d instanceof i.Vector)a(u,c,v.add(d));else if(typeof d=="number")a(u,c,v*d);else throw new Error("Unable to use relative chaining with particle key '"+c+"'; no relative operation for '"+d+"' could be inferred.")}}return ah}var lw;function TM(){if(lw)return sh;lw=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.confetti=void 0;var i=sf(),e=pa(),t=Rv(),r=nf(),a=Pm(),u=rf(),c=ql();function d(p,v){var T=c.overrideDefaults({count:u.range(20,40),spread:u.range(35,45),speed:u.range(300,600),size:u.skew(1,.2),rotation:function(){return r.randomUnitVector().scale(180)},color:function(){return e.Color.fromHsl(r.randomRange(0,360),100,70)},modules:[new t.ModuleBuilder().drive("size").by(function(C){return Math.min(1,C*3)}).relative().build(),new t.ModuleBuilder().drive("rotation").by(function(C){return new e.Vector(140,200,260).scale(C)}).relative().build()],shapes:["square","circle"]},v),I=i.scene.current.createEmitter({emitterOptions:{loops:1,duration:8,modules:T.modules},emissionOptions:{rate:0,bursts:[{time:0,count:T.count}],sourceSampler:a.dynamicSource(p),angle:u.skew(-90,u.evaluateVariation(T.spread)),initialLifetime:8,initialSpeed:T.speed,initialSize:T.size,initialRotation:T.rotation,initialColor:T.color},rendererOptions:{shapeFactory:T.shapes}});return I}return sh.confetti=d,sh}var oh={},cw;function wM(){if(cw)return oh;cw=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.sparkles=void 0;var i=sf(),e=pa(),t=Rv(),r=nf(),a=Pm(),u=rf(),c=ql();function d(p,v){var T=c.overrideDefaults({lifetime:u.range(1,2),count:u.range(10,20),speed:u.range(100,200),size:u.range(.8,1.8),rotation:function(){return new e.Vector(0,0,r.randomRange(0,360))},color:function(){return e.Color.fromHsl(50,100,r.randomRange(55,85))},modules:[new t.ModuleBuilder().drive("rotation").by(function(C){return new e.Vector(0,0,200).scale(C)}).relative().build(),new t.ModuleBuilder().drive("size").by(new e.NumericSpline({time:0,value:0},{time:.3,value:1},{time:.7,value:1},{time:1,value:0})).through("relativeLifetime").relative().build(),new t.ModuleBuilder().drive("opacity").by(new e.NumericSpline({time:0,value:1},{time:.5,value:1},{time:1,value:0})).through("relativeLifetime").build()],shapes:"star"},v),I=i.scene.current.createEmitter({emitterOptions:{loops:1,duration:3,useGravity:!1,modules:T.modules},emissionOptions:{rate:0,bursts:[{time:0,count:T.count}],sourceSampler:a.dynamicSource(p),angle:u.range(0,360),initialLifetime:T.lifetime,initialSpeed:T.speed,initialSize:T.size,initialRotation:T.rotation,initialColor:T.color},rendererOptions:{applyLighting:void 0,shapeFactory:T.shapes}});return I}return oh.sparkles=d,oh}var hw;function SM(){return hw||(hw=1,function(i){var e=su&&su.__createBinding||(Object.create?function(r,a,u,c){c===void 0&&(c=u),Object.defineProperty(r,c,{enumerable:!0,get:function(){return a[u]}})}:function(r,a,u,c){c===void 0&&(c=u),r[c]=a[u]}),t=su&&su.__exportStar||function(r,a){for(var u in r)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&e(a,r,u)};Object.defineProperty(i,"__esModule",{value:!0}),t(TM(),i),t(wM(),i)}(su)),su}var fw;function sf(){return fw||(fw=1,function(i){var e=Zo&&Zo.__createBinding||(Object.create?function(v,T,I,C){C===void 0&&(C=I),Object.defineProperty(v,C,{enumerable:!0,get:function(){return T[I]}})}:function(v,T,I,C){C===void 0&&(C=I),v[C]=T[I]}),t=Zo&&Zo.__exportStar||function(v,T){for(var I in v)I!=="default"&&!Object.prototype.hasOwnProperty.call(T,I)&&e(T,v,I)};Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.forceInit=i.util=i.math=i.random=i.sources=i.variation=i.Emitter=i.Particle=i.settings=i.scene=void 0;var r=EM(),a=ql();t(pa(),i),t(SM(),i),t(NA(),i),t(Rv(),i),i.scene=new a.Lazy(function(){if(typeof document>"u"||typeof window>"u")throw new Error("It seems like you are trying to run party.js in a non-browser-like environment, which is not supported.");return new r.Scene});var u=Nm();Object.defineProperty(i,"settings",{enumerable:!0,get:function(){return u.settings}});var c=DA();Object.defineProperty(i,"Particle",{enumerable:!0,get:function(){return c.Particle}});var d=OA();Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return d.Emitter}}),i.variation=rf(),i.sources=Pm(),i.random=nf(),i.math=Ou(),i.util=ql();function p(){i.scene.current}i.forceInit=p,i.default=sf()}(Zo)),Zo}var AM=sf();const IM=_w(AM);function RM(){const[i,e]=ge.useState(""),[t,r]=ge.useState({}),[a,u]=ge.useState(new Date().toISOString().split("T")[0]),[c,d]=ge.useState({calories:3e3,fat:75,protein:150,carbs:431}),[p,v]=ge.useState(null),[T,I]=ge.useState(!1),C=(t[a]||[]).reduce((pe,oe)=>({calories:pe.calories+oe.food.calories*oe.quantity,fat:pe.fat+oe.food.fat*oe.quantity,protein:pe.protein+oe.food.protein*oe.quantity,carbs:pe.carbs+oe.food.carbs*oe.quantity}),{calories:0,fat:0,protein:0,carbs:0});ge.useEffect(()=>{const pe=localStorage.getItem("nutritionGoals");pe&&d(JSON.parse(pe))},[]),ge.useEffect(()=>{localStorage.setItem("nutritionGoals",JSON.stringify(c))},[c]),ge.useEffect(()=>{oM().then(pe=>{const oe=pe.reduce((Re,{date:xe,selectedFoods:Me})=>(Re[xe]=Me,Re),{});r({...oe,[a]:oe[a]||[]})}).catch(pe=>{console.error("Error loading all foods:",pe),v("Failed to load food data")})},[a]),ge.useEffect(()=>{if(aM(a,t[a]||[]).catch(pe=>{console.error("Error saving foods:",pe),v("Failed to save food data")}),C.calories>c.calories&&!T){const pe=document.querySelector("#confetti");pe&&(IM.confetti(pe),I(!0))}C.calories<=c.calories&&T&&I(!1)},[t,a,C.calories,c.calories,T]);const z=WP.filter(pe=>pe.name.toLowerCase().includes(i.toLowerCase())),B=pe=>{r(oe=>{const Re=oe[a]||[],xe=Re.findIndex(L=>L.food.id===pe.id);let Me;return xe>=0?(Me=[...Re],Me[xe]={...Me[xe],quantity:Me[xe].quantity+1}):Me=[...Re,{food:pe,quantity:1}],{...oe,[a]:Me}}),e(""),v(`${pe.name} lagt til`)},he=pe=>{r(oe=>({...oe,[a]:oe[a].filter((Re,xe)=>xe!==pe)}))},ue=(pe,oe)=>{r(Re=>{const Me=[...Re[a]||[]],L=Me[pe].quantity+oe;return L<=0?{...Re,[a]:Me.filter((N,M)=>M!==pe)}:(Me[pe]={...Me[pe],quantity:L},{...Re,[a]:Me})}),oe>0&&v(`${t[a][pe].food.name} lagt til`)},ve=pe=>{if(pe===0){u(new Date().toISOString().split("T")[0]),t[new Date().toISOString().split("T")[0]]||r(xe=>({...xe,[Re]:[]})),I(!1);return}const oe=new Date(a);oe.setDate(oe.getDate()+pe);const Re=oe.toISOString().split("T")[0];u(Re),t[Re]||r(xe=>({...xe,[Re]:[]})),I(!1)};return W.jsxs("div",{className:"flex-1 p-4 sm:p-6 max-w-7xl mx-auto",children:[W.jsx(eM,{totals:C,goals:c}),W.jsx(JP,{currentDate:a,changeDate:ve}),W.jsx(ZP,{searchTerm:i,filteredFoods:z,addFood:B,setSearchTerm:e}),W.jsx(tM,{selectedFoods:t,currentDate:a,removeFood:he,updateQuantity:ue}),p&&W.jsx(XP,{message:p,onClose:()=>v(null)}),W.jsx(Sv,{})]})}var uh={},dw;function xM(){if(dw)return uh;dw=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.parse=c,uh.serialize=v;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function c(C,z){const B=new u,he=C.length;if(he<2)return B;const ue=(z==null?void 0:z.decode)||T;let ve=0;do{const pe=C.indexOf("=",ve);if(pe===-1)break;const oe=C.indexOf(";",ve),Re=oe===-1?he:oe;if(pe>Re){ve=C.lastIndexOf(";",pe-1)+1;continue}const xe=d(C,ve,pe),Me=p(C,pe,xe),L=C.slice(xe,Me);if(B[L]===void 0){let N=d(C,pe+1,Re),M=p(C,Re,N);const q=ue(C.slice(N,M));B[L]=q}ve=Re+1}while(ve<he);return B}function d(C,z,B){do{const he=C.charCodeAt(z);if(he!==32&&he!==9)return z}while(++z<B);return B}function p(C,z,B){for(;z>B;){const he=C.charCodeAt(--z);if(he!==32&&he!==9)return z+1}return B}function v(C,z,B){const he=(B==null?void 0:B.encode)||encodeURIComponent;if(!i.test(C))throw new TypeError(`argument name is invalid: ${C}`);const ue=he(z);if(!e.test(ue))throw new TypeError(`argument val is invalid: ${z}`);let ve=C+"="+ue;if(!B)return ve;if(B.maxAge!==void 0){if(!Number.isInteger(B.maxAge))throw new TypeError(`option maxAge is invalid: ${B.maxAge}`);ve+="; Max-Age="+B.maxAge}if(B.domain){if(!t.test(B.domain))throw new TypeError(`option domain is invalid: ${B.domain}`);ve+="; Domain="+B.domain}if(B.path){if(!r.test(B.path))throw new TypeError(`option path is invalid: ${B.path}`);ve+="; Path="+B.path}if(B.expires){if(!I(B.expires)||!Number.isFinite(B.expires.valueOf()))throw new TypeError(`option expires is invalid: ${B.expires}`);ve+="; Expires="+B.expires.toUTCString()}if(B.httpOnly&&(ve+="; HttpOnly"),B.secure&&(ve+="; Secure"),B.partitioned&&(ve+="; Partitioned"),B.priority)switch(typeof B.priority=="string"?B.priority.toLowerCase():void 0){case"low":ve+="; Priority=Low";break;case"medium":ve+="; Priority=Medium";break;case"high":ve+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${B.priority}`)}if(B.sameSite)switch(typeof B.sameSite=="string"?B.sameSite.toLowerCase():B.sameSite){case!0:case"strict":ve+="; SameSite=Strict";break;case"lax":ve+="; SameSite=Lax";break;case"none":ve+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${B.sameSite}`)}return ve}function T(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function I(C){return a.call(C)==="[object Date]"}return uh}xM();var mw="popstate";function CM(i={}){function e(r,a){let{pathname:u,search:c,hash:d}=r.location;return Ay("",{pathname:u,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Bh(a)}return OM(e,t,null,i)}function on(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Rs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DM(){return Math.random().toString(36).substring(2,10)}function pw(i,e){return{usr:i.state,key:i.key,idx:e}}function Ay(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?$l(e):e,state:t,key:e&&e.key||r||DM()}}function Bh({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function $l(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function OM(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:u=!1}=r,c=a.history,d="POP",p=null,v=T();v==null&&(v=0,c.replaceState({...c.state,idx:v},""));function T(){return(c.state||{idx:null}).idx}function I(){d="POP";let ue=T(),ve=ue==null?null:ue-v;v=ue,p&&p({action:d,location:he.location,delta:ve})}function C(ue,ve){d="PUSH";let pe=Ay(he.location,ue,ve);v=T()+1;let oe=pw(pe,v),Re=he.createHref(pe);try{c.pushState(oe,"",Re)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;a.location.assign(Re)}u&&p&&p({action:d,location:he.location,delta:1})}function z(ue,ve){d="REPLACE";let pe=Ay(he.location,ue,ve);v=T();let oe=pw(pe,v),Re=he.createHref(pe);c.replaceState(oe,"",Re),u&&p&&p({action:d,location:he.location,delta:0})}function B(ue){return NM(ue)}let he={get action(){return d},get location(){return i(a,c)},listen(ue){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(mw,I),p=ue,()=>{a.removeEventListener(mw,I),p=null}},createHref(ue){return e(a,ue)},createURL:B,encodeLocation(ue){let ve=B(ue);return{pathname:ve.pathname,search:ve.search,hash:ve.hash}},push:C,replace:z,go(ue){return c.go(ue)}};return he}function NM(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),on(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Bh(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function PA(i,e,t="/"){return PM(i,e,t,!1)}function PM(i,e,t,r){let a=typeof e=="string"?$l(e):e,u=fa(a.pathname||"/",t);if(u==null)return null;let c=MA(i);MM(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let v=HM(u);d=FM(c[p],v,r)}return d}function MA(i,e=[],t=[],r=""){let a=(u,c,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:c,route:u};p.relativePath.startsWith("/")&&(on(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let v=oa([r,p.relativePath]),T=t.concat(p);u.children&&u.children.length>0&&(on(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),MA(u.children,e,T,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:zM(v,u.index),routesMeta:T})};return i.forEach((u,c)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,c);else for(let p of kA(u.path))a(u,c,p)}),e}function kA(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return a?[u,""]:[u];let c=kA(r.join("/")),d=[];return d.push(...c.map(p=>p===""?u:[u,p].join("/"))),a&&d.push(...c),d.map(p=>i.startsWith("/")&&p===""?"/":p)}function MM(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:qM(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var kM=/^:[\w-]+$/,VM=3,LM=2,UM=1,jM=10,BM=-2,gw=i=>i==="*";function zM(i,e){let t=i.split("/"),r=t.length;return t.some(gw)&&(r+=BM),e&&(r+=LM),t.filter(a=>!gw(a)).reduce((a,u)=>a+(kM.test(u)?VM:u===""?UM:jM),r)}function qM(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function FM(i,e,t=!1){let{routesMeta:r}=i,a={},u="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],v=d===r.length-1,T=u==="/"?e:e.slice(u.length)||"/",I=um({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},T),C=p.route;if(!I&&v&&t&&!r[r.length-1].route.index&&(I=um({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!I)return null;Object.assign(a,I.params),c.push({params:a,pathname:oa([u,I.pathname]),pathnameBase:$M(oa([u,I.pathnameBase])),route:C}),I.pathnameBase!=="/"&&(u=oa([u,I.pathnameBase]))}return c}function um(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=KM(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((v,{paramName:T,isOptional:I},C)=>{if(T==="*"){let B=d[C]||"";c=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const z=d[C];return I&&!z?v[T]=void 0:v[T]=(z||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:c,pattern:i}}function KM(i,e=!1,t=!0){Rs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function HM(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function fa(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function GM(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?$l(i):i;return{pathname:t?t.startsWith("/")?t:QM(t,e):e,search:XM(r),hash:WM(a)}}function QM(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function qg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YM(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function VA(i){let e=YM(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function LA(i,e,t,r=!1){let a;typeof i=="string"?a=$l(i):(a={...i},on(!a.pathname||!a.pathname.includes("?"),qg("?","pathname","search",a)),on(!a.pathname||!a.pathname.includes("#"),qg("#","pathname","hash",a)),on(!a.search||!a.search.includes("#"),qg("#","search","hash",a)));let u=i===""||a.pathname==="",c=u?"/":a.pathname,d;if(c==null)d=t;else{let I=e.length-1;if(!r&&c.startsWith("..")){let C=c.split("/");for(;C[0]==="..";)C.shift(),I-=1;a.pathname=C.join("/")}d=I>=0?e[I]:"/"}let p=GM(a,d),v=c&&c!=="/"&&c.endsWith("/"),T=(u||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||T)&&(p.pathname+="/"),p}var oa=i=>i.join("/").replace(/\/\/+/g,"/"),$M=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),XM=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,WM=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ZM(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var UA=["POST","PUT","PATCH","DELETE"];new Set(UA);var JM=["GET",...UA];new Set(JM);var Xl=ge.createContext(null);Xl.displayName="DataRouter";var Mm=ge.createContext(null);Mm.displayName="DataRouterState";var jA=ge.createContext({isTransitioning:!1});jA.displayName="ViewTransition";var ek=ge.createContext(new Map);ek.displayName="Fetchers";var tk=ge.createContext(null);tk.displayName="Await";var xs=ge.createContext(null);xs.displayName="Navigation";var af=ge.createContext(null);af.displayName="Location";var ga=ge.createContext({outlet:null,matches:[],isDataRoute:!1});ga.displayName="Route";var xv=ge.createContext(null);xv.displayName="RouteError";function nk(i,{relative:e}={}){on(of(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ge.useContext(xs),{hash:a,pathname:u,search:c}=uf(i,{relative:e}),d=u;return t!=="/"&&(d=u==="/"?t:oa([t,u])),r.createHref({pathname:d,search:c,hash:a})}function of(){return ge.useContext(af)!=null}function Nu(){return on(of(),"useLocation() may be used only in the context of a <Router> component."),ge.useContext(af).location}var BA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zA(i){ge.useContext(xs).static||ge.useLayoutEffect(i)}function rk(){let{isDataRoute:i}=ge.useContext(ga);return i?gk():ik()}function ik(){on(of(),"useNavigate() may be used only in the context of a <Router> component.");let i=ge.useContext(Xl),{basename:e,navigator:t}=ge.useContext(xs),{matches:r}=ge.useContext(ga),{pathname:a}=Nu(),u=JSON.stringify(VA(r)),c=ge.useRef(!1);return zA(()=>{c.current=!0}),ge.useCallback((p,v={})=>{if(Rs(c.current,BA),!c.current)return;if(typeof p=="number"){t.go(p);return}let T=LA(p,JSON.parse(u),a,v.relative==="path");i==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:oa([e,T.pathname])),(v.replace?t.replace:t.push)(T,v.state,v)},[e,t,u,a,i])}ge.createContext(null);function uf(i,{relative:e}={}){let{matches:t}=ge.useContext(ga),{pathname:r}=Nu(),a=JSON.stringify(VA(t));return ge.useMemo(()=>LA(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function sk(i,e){return qA(i,e)}function qA(i,e,t,r){var pe;on(of(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:u}=ge.useContext(xs),{matches:c}=ge.useContext(ga),d=c[c.length-1],p=d?d.params:{},v=d?d.pathname:"/",T=d?d.pathnameBase:"/",I=d&&d.route;{let oe=I&&I.path||"";FA(v,!I||oe.endsWith("*")||oe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${oe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${oe}"> to <Route path="${oe==="/"?"*":`${oe}/*`}">.`)}let C=Nu(),z;if(e){let oe=typeof e=="string"?$l(e):e;on(T==="/"||((pe=oe.pathname)==null?void 0:pe.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${oe.pathname}" was given in the \`location\` prop.`),z=oe}else z=C;let B=z.pathname||"/",he=B;if(T!=="/"){let oe=T.replace(/^\//,"").split("/");he="/"+B.replace(/^\//,"").split("/").slice(oe.length).join("/")}let ue=!u&&t&&t.matches&&t.matches.length>0?t.matches:PA(i,{pathname:he});Rs(I||ue!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),Rs(ue==null||ue[ue.length-1].route.element!==void 0||ue[ue.length-1].route.Component!==void 0||ue[ue.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ve=ck(ue&&ue.map(oe=>Object.assign({},oe,{params:Object.assign({},p,oe.params),pathname:oa([T,a.encodeLocation?a.encodeLocation(oe.pathname).pathname:oe.pathname]),pathnameBase:oe.pathnameBase==="/"?T:oa([T,a.encodeLocation?a.encodeLocation(oe.pathnameBase).pathname:oe.pathnameBase])})),c,t,r);return e&&ve?ge.createElement(af.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},ve):ve}function ak(){let i=pk(),e=ZM(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=ge.createElement(ge.Fragment,null,ge.createElement("p",null," Hey developer "),ge.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ge.createElement("code",{style:u},"ErrorBoundary")," or"," ",ge.createElement("code",{style:u},"errorElement")," prop on your route.")),ge.createElement(ge.Fragment,null,ge.createElement("h2",null,"Unexpected Application Error!"),ge.createElement("h3",{style:{fontStyle:"italic"}},e),t?ge.createElement("pre",{style:a},t):null,c)}var ok=ge.createElement(ak,null),uk=class extends ge.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?ge.createElement(ga.Provider,{value:this.props.routeContext},ge.createElement(xv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lk({routeContext:i,match:e,children:t}){let r=ge.useContext(Xl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ge.createElement(ga.Provider,{value:i},t)}function ck(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,u=t==null?void 0:t.errors;if(u!=null){let p=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);on(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let v=a[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=p),v.route.id){let{loaderData:T,errors:I}=t,C=v.route.loader&&!T.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||C){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,v,T)=>{let I,C=!1,z=null,B=null;t&&(I=u&&v.route.id?u[v.route.id]:void 0,z=v.route.errorElement||ok,c&&(d<0&&T===0?(FA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,B=null):d===T&&(C=!0,B=v.route.hydrateFallbackElement||null)));let he=e.concat(a.slice(0,T+1)),ue=()=>{let ve;return I?ve=z:C?ve=B:v.route.Component?ve=ge.createElement(v.route.Component,null):v.route.element?ve=v.route.element:ve=p,ge.createElement(lk,{match:v,routeContext:{outlet:p,matches:he,isDataRoute:t!=null},children:ve})};return t&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?ge.createElement(uk,{location:t.location,revalidation:t.revalidation,component:z,error:I,children:ue(),routeContext:{outlet:null,matches:he,isDataRoute:!0}}):ue()},null)}function Cv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hk(i){let e=ge.useContext(Xl);return on(e,Cv(i)),e}function fk(i){let e=ge.useContext(Mm);return on(e,Cv(i)),e}function dk(i){let e=ge.useContext(ga);return on(e,Cv(i)),e}function Dv(i){let e=dk(i),t=e.matches[e.matches.length-1];return on(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function mk(){return Dv("useRouteId")}function pk(){var r;let i=ge.useContext(xv),e=fk("useRouteError"),t=Dv("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function gk(){let{router:i}=hk("useNavigate"),e=Dv("useNavigate"),t=ge.useRef(!1);return zA(()=>{t.current=!0}),ge.useCallback(async(a,u={})=>{Rs(t.current,BA),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var yw={};function FA(i,e,t){!e&&!yw[i]&&(yw[i]=!0,Rs(!1,t))}ge.memo(yk);function yk({routes:i,future:e,state:t}){return qA(i,void 0,t,e)}function bl(i){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vk({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:u=!1}){on(!of(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),d=ge.useMemo(()=>({basename:c,navigator:a,static:u,future:{}}),[c,a,u]);typeof t=="string"&&(t=$l(t));let{pathname:p="/",search:v="",hash:T="",state:I=null,key:C="default"}=t,z=ge.useMemo(()=>{let B=fa(p,c);return B==null?null:{location:{pathname:B,search:v,hash:T,state:I,key:C},navigationType:r}},[c,p,v,T,I,C,r]);return Rs(z!=null,`<Router basename="${c}"> is not able to match the URL "${p}${v}${T}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:ge.createElement(xs.Provider,{value:d},ge.createElement(af.Provider,{children:e,value:z}))}function _k({children:i,location:e}){return sk(Iy(i),e)}function Iy(i,e=[]){let t=[];return ge.Children.forEach(i,(r,a)=>{if(!ge.isValidElement(r))return;let u=[...e,a];if(r.type===ge.Fragment){t.push.apply(t,Iy(r.props.children,u));return}on(r.type===bl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Iy(r.props.children,u)),t.push(c)}),t}var Dd="get",Od="application/x-www-form-urlencoded";function km(i){return i!=null&&typeof i.tagName=="string"}function bk(i){return km(i)&&i.tagName.toLowerCase()==="button"}function Ek(i){return km(i)&&i.tagName.toLowerCase()==="form"}function Tk(i){return km(i)&&i.tagName.toLowerCase()==="input"}function wk(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Sk(i,e){return i.button===0&&(!e||e==="_self")&&!wk(i)}var pd=null;function Ak(){if(pd===null)try{new FormData(document.createElement("form"),0),pd=!1}catch{pd=!0}return pd}var Ik=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fg(i){return i!=null&&!Ik.has(i)?(Rs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Od}"`),null):i}function Rk(i,e){let t,r,a,u,c;if(Ek(i)){let d=i.getAttribute("action");r=d?fa(d,e):null,t=i.getAttribute("method")||Dd,a=Fg(i.getAttribute("enctype"))||Od,u=new FormData(i)}else if(bk(i)||Tk(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||d.getAttribute("action");if(r=p?fa(p,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||Dd,a=Fg(i.getAttribute("formenctype"))||Fg(d.getAttribute("enctype"))||Od,u=new FormData(d,i),!Ak()){let{name:v,type:T,value:I}=i;if(T==="image"){let C=v?`${v}.`:"";u.append(`${C}x`,"0"),u.append(`${C}y`,"0")}else v&&u.append(v,I)}}else{if(km(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dd,r=null,a=Od,c=i}return u&&a==="text/plain"&&(c=u,u=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:u,body:c}}function Ov(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function xk(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ck(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Dk(i,e,t){let r=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let c=await xk(u,t);return c.links?c.links():[]}return[]}));return Mk(r.flat(1).filter(Ck).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function vw(i,e,t,r,a,u){let c=(p,v)=>t[v]?p.route.id!==t[v].route.id:!0,d=(p,v)=>{var T;return t[v].pathname!==p.pathname||((T=t[v].route.path)==null?void 0:T.endsWith("*"))&&t[v].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,v)=>c(p,v)||d(p,v)):u==="data"?e.filter((p,v)=>{var I;let T=r.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(c(p,v)||d(p,v))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function Ok(i,e,{includeHydrateFallback:t}={}){return Nk(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function Nk(i){return[...new Set(i)]}function Pk(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function Mk(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let u=JSON.stringify(Pk(a));return t.has(u)||(t.add(u),r.push({key:u,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kk=new Set([100,101,204,205]);function Vk(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&fa(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function KA(){let i=ge.useContext(Xl);return Ov(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Lk(){let i=ge.useContext(Mm);return Ov(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Nv=ge.createContext(void 0);Nv.displayName="FrameworkContext";function HA(){let i=ge.useContext(Nv);return Ov(i,"You must render this element inside a <HydratedRouter> element"),i}function Uk(i,e){let t=ge.useContext(Nv),[r,a]=ge.useState(!1),[u,c]=ge.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:v,onMouseLeave:T,onTouchStart:I}=e,C=ge.useRef(null);ge.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let he=ve=>{ve.forEach(pe=>{c(pe.isIntersecting)})},ue=new IntersectionObserver(he,{threshold:.5});return C.current&&ue.observe(C.current),()=>{ue.disconnect()}}},[i]),ge.useEffect(()=>{if(r){let he=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(he)}}},[r]);let z=()=>{a(!0)},B=()=>{a(!1),c(!1)};return t?i!=="intent"?[u,C,{}]:[u,C,{onFocus:lh(d,z),onBlur:lh(p,B),onMouseEnter:lh(v,z),onMouseLeave:lh(T,B),onTouchStart:lh(I,z)}]:[!1,C,{}]}function lh(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function jk({page:i,...e}){let{router:t}=KA(),r=ge.useMemo(()=>PA(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?ge.createElement(zk,{page:i,matches:r,...e}):null}function Bk(i){let{manifest:e,routeModules:t}=HA(),[r,a]=ge.useState([]);return ge.useEffect(()=>{let u=!1;return Dk(i,e,t).then(c=>{u||a(c)}),()=>{u=!0}},[i,e,t]),r}function zk({page:i,matches:e,...t}){let r=Nu(),{manifest:a,routeModules:u}=HA(),{basename:c}=KA(),{loaderData:d,matches:p}=Lk(),v=ge.useMemo(()=>vw(i,e,p,a,r,"data"),[i,e,p,a,r]),T=ge.useMemo(()=>vw(i,e,p,a,r,"assets"),[i,e,p,a,r]),I=ge.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let B=new Set,he=!1;if(e.forEach(ve=>{var oe;let pe=a.routes[ve.route.id];!pe||!pe.hasLoader||(!v.some(Re=>Re.route.id===ve.route.id)&&ve.route.id in d&&((oe=u[ve.route.id])!=null&&oe.shouldRevalidate)||pe.hasClientLoader?he=!0:B.add(ve.route.id))}),B.size===0)return[];let ue=Vk(i,c);return he&&B.size>0&&ue.searchParams.set("_routes",e.filter(ve=>B.has(ve.route.id)).map(ve=>ve.route.id).join(",")),[ue.pathname+ue.search]},[c,d,r,a,v,e,i,u]),C=ge.useMemo(()=>Ok(T,a),[T,a]),z=Bk(T);return ge.createElement(ge.Fragment,null,I.map(B=>ge.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),C.map(B=>ge.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),z.map(({key:B,link:he})=>ge.createElement("link",{key:B,...he})))}function qk(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GA&&(window.__reactRouterVersion="7.6.0")}catch{}function Fk({basename:i,children:e,window:t}){let r=ge.useRef();r.current==null&&(r.current=CM({window:t,v5Compat:!0}));let a=r.current,[u,c]=ge.useState({action:a.action,location:a.location}),d=ge.useCallback(p=>{ge.startTransition(()=>c(p))},[c]);return ge.useLayoutEffect(()=>a.listen(d),[a,d]),ge.createElement(vk,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:a})}var QA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YA=ge.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:u,replace:c,state:d,target:p,to:v,preventScrollReset:T,viewTransition:I,...C},z){let{basename:B}=ge.useContext(xs),he=typeof v=="string"&&QA.test(v),ue,ve=!1;if(typeof v=="string"&&he&&(ue=v,GA))try{let M=new URL(window.location.href),q=v.startsWith("//")?new URL(M.protocol+v):new URL(v),Y=fa(q.pathname,B);q.origin===M.origin&&Y!=null?v=Y+q.search+q.hash:ve=!0}catch{Rs(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let pe=nk(v,{relative:a}),[oe,Re,xe]=Uk(r,C),Me=Qk(v,{replace:c,state:d,target:p,preventScrollReset:T,relative:a,viewTransition:I});function L(M){e&&e(M),M.defaultPrevented||Me(M)}let N=ge.createElement("a",{...C,...xe,href:ue||pe,onClick:ve||u?e:L,ref:qk(z,Re),target:p,"data-discover":!he&&t==="render"?"true":void 0});return oe&&!he?ge.createElement(ge.Fragment,null,N,ge.createElement(jk,{page:pe})):N});YA.displayName="Link";var Kk=ge.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:u,to:c,viewTransition:d,children:p,...v},T){let I=uf(c,{relative:v.relative}),C=Nu(),z=ge.useContext(Mm),{navigator:B,basename:he}=ge.useContext(xs),ue=z!=null&&Zk(I)&&d===!0,ve=B.encodeLocation?B.encodeLocation(I).pathname:I.pathname,pe=C.pathname,oe=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;t||(pe=pe.toLowerCase(),oe=oe?oe.toLowerCase():null,ve=ve.toLowerCase()),oe&&he&&(oe=fa(oe,he)||oe);const Re=ve!=="/"&&ve.endsWith("/")?ve.length-1:ve.length;let xe=pe===ve||!a&&pe.startsWith(ve)&&pe.charAt(Re)==="/",Me=oe!=null&&(oe===ve||!a&&oe.startsWith(ve)&&oe.charAt(ve.length)==="/"),L={isActive:xe,isPending:Me,isTransitioning:ue},N=xe?e:void 0,M;typeof r=="function"?M=r(L):M=[r,xe?"active":null,Me?"pending":null,ue?"transitioning":null].filter(Boolean).join(" ");let q=typeof u=="function"?u(L):u;return ge.createElement(YA,{...v,"aria-current":N,className:M,ref:T,style:q,to:c,viewTransition:d},typeof p=="function"?p(L):p)});Kk.displayName="NavLink";var Hk=ge.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:u,method:c=Dd,action:d,onSubmit:p,relative:v,preventScrollReset:T,viewTransition:I,...C},z)=>{let B=Xk(),he=Wk(d,{relative:v}),ue=c.toLowerCase()==="get"?"get":"post",ve=typeof d=="string"&&QA.test(d),pe=oe=>{if(p&&p(oe),oe.defaultPrevented)return;oe.preventDefault();let Re=oe.nativeEvent.submitter,xe=(Re==null?void 0:Re.getAttribute("formmethod"))||c;B(Re||oe.currentTarget,{fetcherKey:e,method:xe,navigate:t,replace:a,state:u,relative:v,preventScrollReset:T,viewTransition:I})};return ge.createElement("form",{ref:z,method:ue,action:he,onSubmit:r?p:pe,...C,"data-discover":!ve&&i==="render"?"true":void 0})});Hk.displayName="Form";function Gk(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $A(i){let e=ge.useContext(Xl);return on(e,Gk(i)),e}function Qk(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:u,viewTransition:c}={}){let d=rk(),p=Nu(),v=uf(i,{relative:u});return ge.useCallback(T=>{if(Sk(T,e)){T.preventDefault();let I=t!==void 0?t:Bh(p)===Bh(v);d(i,{replace:I,state:r,preventScrollReset:a,relative:u,viewTransition:c})}},[p,d,v,t,r,e,i,a,u,c])}var Yk=0,$k=()=>`__${String(++Yk)}__`;function Xk(){let{router:i}=$A("useSubmit"),{basename:e}=ge.useContext(xs),t=mk();return ge.useCallback(async(r,a={})=>{let{action:u,method:c,encType:d,formData:p,body:v}=Rk(r,e);if(a.navigate===!1){let T=a.fetcherKey||$k();await i.fetch(T,t,a.action||u,{preventScrollReset:a.preventScrollReset,formData:p,body:v,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:p,body:v,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function Wk(i,{relative:e}={}){let{basename:t}=ge.useContext(xs),r=ge.useContext(ga);on(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),u={...uf(i||".",{relative:e})},c=Nu();if(i==null){u.search=c.search;let d=new URLSearchParams(u.search),p=d.getAll("index");if(p.some(T=>T==="")){d.delete("index"),p.filter(I=>I).forEach(I=>d.append("index",I));let T=d.toString();u.search=T?`?${T}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:oa([t,u.pathname])),Bh(u)}function Zk(i,e={}){let t=ge.useContext(jA);on(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$A("useViewTransitionState"),a=uf(i,{relative:e.relative});if(!t.isTransitioning)return!1;let u=fa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=fa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return um(a.pathname,c)!=null||um(a.pathname,u)!=null}[...kk];function Jk(){return W.jsx("div",{className:"min-h-screen flex items-start justify-start flex-col p-8",children:W.jsxs("div",{className:"max-w-lg text-left",children:[W.jsx("h3",{className:"text-5xl font-bold text-gray-800 mb-4",children:"Det finns inget hr..."}),W.jsx("p",{className:"text-black mb-4",children:"Whatever you were looking for is not here..."}),W.jsx("a",{href:"/",className:"text-black underline",children:"Go to the main screen"})]})})}function eV(){const i=(e=["Vlkomna"])=>e[Math.floor(Math.random()*e.length)];return W.jsxs("div",{className:"min-h-screen flex items-start justify-start flex-col p-8",children:[W.jsxs("div",{className:"max-w-lg text-left",children:[W.jsx("h3",{className:"text-5xl font-bold text-gray-800 mb-4",children:i()}),W.jsxs("p",{className:"text-lg text-gray-600 mb-6",children:["Discover our ",W.jsxs("span",{className:"relative inline-block",children:["amazing",W.jsx("svg",{className:"absolute -bottom-1 left-0 w-full h-2",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:W.jsx("path",{d:"M0,5 Q50,10 100,5",fill:"none",stroke:"#FBBF24",strokeWidth:"2"})})]})," calorietracker, where you can just",W.jsxs("span",{className:"relative inline-block mx-1",children:["track your food",W.jsx("svg",{className:"absolute -bottom-1 left-0 w-full h-2",viewBox:"0 0 100 10",preserveAspectRatio:"none",children:W.jsx("path",{d:"M0,5 Q50,10 100,5",fill:"none",stroke:"#FBBF24",strokeWidth:"2"})})]})," without bullshit features!"]}),W.jsx("div",{className:"space-y-4 mb-15",children:W.jsxs("button",{type:"button",onClick:()=>window.location.assign("/account"),className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:["Make an account",W.jsx("svg",{className:"rtl:rotate-180 w-3.5 h-3.5 ms-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:W.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 5h12m0 0L9 1m4 4L9 9"})})]})})]}),W.jsx("div",{className:"text-left ml-[-20px]",children:W.jsx("section",{className:"bg-white dark:bg-gray-900",children:W.jsxs("div",{className:"gap-16 items-center py-8 px-4 mx-auto max-w-screen-xl lg:grid lg:grid-cols-2 lg:py-16 lg:px-6",children:[W.jsxs("div",{className:"font-light text-gray-500 sm:text-lg dark:text-gray-400",children:[W.jsxs("h2",{className:"mb-4 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white",children:["We're not the first to do it,",W.jsx("br",{}),"we just do it right."]}),W.jsx("p",{className:"mb-4",children:"We are normal people who just want to track our calories. No ads, no unnecessary functions, just plain and simple (yet very efficient!) calorietracking."}),W.jsx("p",{children:`At Tell (Norwegian for "count"), we want to have a simple app where people can track their calories, across platforms, without a hasle. That's why we made this app as simple as possible, yet let it have the bare minimum of what we want it to have.`})]}),W.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8",children:[W.jsx("img",{className:"w-full rounded-lg",src:"https://flowbite.s3.amazonaws.com/blocks/marketing-ui/content/office-long-2.png",alt:"office content 1"}),W.jsx("img",{className:"mt-4 w-full lg:mt-10 rounded-lg",src:"https://flowbite.s3.amazonaws.com/blocks/marketing-ui/content/office-long-1.png",alt:"office content 2"})]})]})})}),W.jsx("div",{className:"w-full",children:W.jsx(Sv,{})})]})}function tV(){return W.jsxs("div",{className:"mx-auto p-8",children:[W.jsx("h3",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Terms and Conditions"}),W.jsx("p",{className:"mb-4",children:"Welcome to our calorie tracking website. By using our website and services, you agree to these Terms and Conditions. If you do not agree, please do not use our services."}),W.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"1. Account Registration"}),W.jsx("p",{className:"mb-4",children:"To use our service, you must create an account through Google Authentication. You are responsible for maintaining the confidentiality of your account and ensuring all activity under your account complies with these terms."}),W.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"2. Use of Service"}),W.jsx("p",{className:"mb-4",children:"Our service allows you to track your daily caloric intake. You agree to use this service solely for personal, non-commercial purposes and not for any unlawful or harmful activities."}),W.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"3. Privacy and Data"}),W.jsx("p",{className:"mb-4",children:"By signing in with your Google account, you authorize us to access certain information such as your name and email address. We do not sell your data and take appropriate steps to protect your privacy. For more details, see our Privacy Policy."}),W.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"4. Termination"}),W.jsx("p",{className:"mb-4",children:"We reserve the right to suspend or terminate your account if you violate these terms or engage in any activity that harms our service or users."}),W.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"5. Changes to Terms"}),W.jsx("p",{className:"mb-4",children:"We may update these Terms and Conditions at any time. Continued use of the service after changes constitutes acceptance of the new terms."}),W.jsx("h2",{className:"text-2xl font-semibold mt-6 mb-2",children:"6. Contact Us"}),W.jsx("p",{className:"mb-4",children:"If you have questions about these Terms, please contact us at wesselvandalen@gmail.com."}),W.jsx(Sv,{})]})}const nV=async()=>{try{const i=new ta,t=(await h2(wv,i)).user,r=yA(AA,"users",t.email);if(!(await wA(r)).exists())throw new Error("User document doesn't exist");return t}catch(i){throw console.error("Google sign-in error:",i),i}};function rV(){const[i,e]=ge.useState(!1),[t,r]=ge.useState(null),a=async()=>{try{e(!0),r(null);const u=await nV();console.log("Signed in user:",u),window.location.assign("/tracker")}catch(u){const c=u.message||"Failed to sign in with Google";r(c),alert(c)}finally{e(!1)}};return W.jsx("div",{className:"min-h-screen flex items-center justify-center",children:W.jsxs("div",{className:"bg-white p-4 rounded-lg w-full max-w-lg",children:[W.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create an account / log in"}),W.jsx("p",{className:"text-gray-500 text-base",children:"Create your account / log in using our following providers."}),t&&W.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md",children:t}),W.jsx("div",{className:"flex flex-col space-y-4 mt-6",children:W.jsxs("button",{onClick:a,disabled:i,className:"flex items-center justify-center cursor-pointer gap-2 text-sm bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[W.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[W.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),W.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1.02.68-2.33 1.09-3.71 1.09-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),W.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"}),W.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Signing in...":"Google"]})})]})})}function iV(){const{user:i}=ge.useContext(lm);return W.jsxs("div",{className:"flex min-h-screen",children:[W.jsx("div",{className:"fixed top-0 left-0 h-screen w-64 hidden md:block",children:W.jsx($P,{})}),W.jsx("div",{className:"flex-1 md:ml-64 overflow-y-auto",children:W.jsx(Fk,{children:W.jsxs(_k,{children:[W.jsx(bl,{path:"/",element:W.jsx(eV,{})}),i&&W.jsx(bl,{path:"/tracker",element:W.jsx(RM,{})}),!i&&W.jsx(bl,{path:"/account",element:W.jsx(rV,{})}),W.jsx(bl,{path:"/terms",element:W.jsx(tV,{})}),W.jsx(bl,{path:"*",element:W.jsx(Jk,{})})]})})})]})}const sV=({children:i})=>{const[e,t]=ge.useState(null),[r,a]=ge.useState(!0);ge.useEffect(()=>{const c=wv.onAuthStateChanged(async d=>{try{if(a(!0),d){const p=yA(AA,"users",d.email);(await wA(p)).exists()?t(d):(console.log("User document doesn't exist in Firestore"),t(null))}else t(null)}catch(p){console.error("Auth state change error:",p),t(null)}finally{a(!1)}});return()=>c()},[]);const u={user:e,isLoading:r};return W.jsx(lm.Provider,{value:u,children:i})};wR.createRoot(document.getElementById("root")).render(W.jsx(ge.StrictMode,{children:W.jsx(sV,{children:W.jsx(iV,{})})}));
